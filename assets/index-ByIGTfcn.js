(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function Zo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function dj(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var V2={exports:{}},Gh={};var Y5;function hj(){if(Y5)return Gh;Y5=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:o,ref:i!==void 0?i:null,props:a}}return Gh.Fragment=e,Gh.jsx=t,Gh.jsxs=t,Gh}var Q5;function pj(){return Q5||(Q5=1,V2.exports=hj()),V2.exports}var Ye=pj();var J5;(function(r){(function(e){var t=typeof globalThis=="object"||typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:s(),n=i(r);typeof t.Reflect<"u"&&(n=i(t.Reflect,n)),e(n,t),typeof t.Reflect>"u"&&(t.Reflect=r);function i(c,l){return function(d,h){Object.defineProperty(c,d,{configurable:!0,writable:!0,value:h}),l&&l(d,h)}}function a(){try{return Function("return this;")()}catch{}}function o(){try{return(0,eval)("(function() { return this; })()")}catch{}}function s(){return a()||o()}})(function(e,t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",a=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",c={__proto__:[]}instanceof Array,l=!s&&!c,d={create:s?function(){return K(Object.create(null))}:c?function(){return K({__proto__:null})}:function(){return K({})},has:l?function(G,ee){return n.call(G,ee)}:function(G,ee){return ee in G},get:l?function(G,ee){return n.call(G,ee)?G[ee]:void 0}:function(G,ee){return G[ee]}},h=Object.getPrototypeOf(Function),y=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:q(),m=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:w(),b=typeof WeakMap=="function"?WeakMap:A(),v=i?Symbol.for("@reflect-metadata:registry"):void 0,E=Be(),x=Me(E);function D(G,ee,ne,be){if(te(ne)){if(!De(G))throw new TypeError;if(!Se(ee))throw new TypeError;return M(G,ee)}else{if(!De(G))throw new TypeError;if(!fe(ee))throw new TypeError;if(!fe(be)&&!te(be)&&!ae(be))throw new TypeError;return ae(be)&&(be=void 0),ne=we(ne),C(G,ee,ne,be)}}e("decorate",D);function N(G,ee){function ne(be,Ue){if(!fe(be))throw new TypeError;if(!te(Ue)&&!Le(Ue))throw new TypeError;H(G,ee,be,Ue)}return ne}e("metadata",N);function B(G,ee,ne,be){if(!fe(ne))throw new TypeError;return te(be)||(be=we(be)),H(G,ee,ne,be)}e("defineMetadata",B);function k(G,ee,ne){if(!fe(ee))throw new TypeError;return te(ne)||(ne=we(ne)),R(G,ee,ne)}e("hasMetadata",k);function F(G,ee,ne){if(!fe(ee))throw new TypeError;return te(ne)||(ne=we(ne)),S(G,ee,ne)}e("hasOwnMetadata",F);function T(G,ee,ne){if(!fe(ee))throw new TypeError;return te(ne)||(ne=we(ne)),_(G,ee,ne)}e("getMetadata",T);function z(G,ee,ne){if(!fe(ee))throw new TypeError;return te(ne)||(ne=we(ne)),U(G,ee,ne)}e("getOwnMetadata",z);function Z(G,ee){if(!fe(G))throw new TypeError;return te(ee)||(ee=we(ee)),V(G,ee)}e("getMetadataKeys",Z);function Y(G,ee){if(!fe(G))throw new TypeError;return te(ee)||(ee=we(ee)),P(G,ee)}e("getOwnMetadataKeys",Y);function W(G,ee,ne){if(!fe(ee))throw new TypeError;if(te(ne)||(ne=we(ne)),!fe(ee))throw new TypeError;te(ne)||(ne=we(ne));var be=Qe(ee,ne,!1);return te(be)?!1:be.OrdinaryDeleteMetadata(G,ee,ne)}e("deleteMetadata",W);function M(G,ee){for(var ne=G.length-1;ne>=0;--ne){var be=G[ne],Ue=be(ee);if(!te(Ue)&&!ae(Ue)){if(!Se(Ue))throw new TypeError;ee=Ue}}return ee}function C(G,ee,ne,be){for(var Ue=G.length-1;Ue>=0;--Ue){var pe=G[Ue],Ee=pe(ee,ne,be);if(!te(Ee)&&!ae(Ee)){if(!fe(Ee))throw new TypeError;be=Ee}}return be}function R(G,ee,ne){var be=S(G,ee,ne);if(be)return!0;var Ue=le(ee);return ae(Ue)?!1:R(G,Ue,ne)}function S(G,ee,ne){var be=Qe(ee,ne,!1);return te(be)?!1:me(be.OrdinaryHasOwnMetadata(G,ee,ne))}function _(G,ee,ne){var be=S(G,ee,ne);if(be)return U(G,ee,ne);var Ue=le(ee);if(!ae(Ue))return _(G,Ue,ne)}function U(G,ee,ne){var be=Qe(ee,ne,!1);if(!te(be))return be.OrdinaryGetOwnMetadata(G,ee,ne)}function H(G,ee,ne,be){var Ue=Qe(ne,be,!0);Ue.OrdinaryDefineOwnMetadata(G,ee,ne,be)}function V(G,ee){var ne=P(G,ee),be=le(G);if(be===null)return ne;var Ue=V(be,ee);if(Ue.length<=0)return ne;if(ne.length<=0)return Ue;for(var pe=new m,Ee=[],Ce=0,ke=ne;Ce<ke.length;Ce++){var Ke=ke[Ce],et=pe.has(Ke);et||(pe.add(Ke),Ee.push(Ke))}for(var Ze=0,nt=Ue;Ze<nt.length;Ze++){var Ke=nt[Ze],et=pe.has(Ke);et||(pe.add(Ke),Ee.push(Ke))}return Ee}function P(G,ee){var ne=Qe(G,ee,!1);return ne?ne.OrdinaryOwnMetadataKeys(G,ee):[]}function $(G){if(G===null)return 1;switch(typeof G){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return G===null?1:6;default:return 6}}function te(G){return G===void 0}function ae(G){return G===null}function ce(G){return typeof G=="symbol"}function fe(G){return typeof G=="object"?G!==null:typeof G=="function"}function oe(G,ee){switch($(G)){case 0:return G;case 1:return G;case 2:return G;case 3:return G;case 4:return G;case 5:return G}var ne="string",be=ie(G,a);if(be!==void 0){var Ue=be.call(G,ne);if(fe(Ue))throw new TypeError;return Ue}return ye(G)}function ye(G,ee){var ne,be,Ue;{var pe=G.toString;if(Te(pe)){var be=pe.call(G);if(!fe(be))return be}var ne=G.valueOf;if(Te(ne)){var be=ne.call(G);if(!fe(be))return be}}throw new TypeError}function me(G){return!!G}function ve(G){return""+G}function we(G){var ee=oe(G);return ce(ee)?ee:ve(ee)}function De(G){return Array.isArray?Array.isArray(G):G instanceof Object?G instanceof Array:Object.prototype.toString.call(G)==="[object Array]"}function Te(G){return typeof G=="function"}function Se(G){return typeof G=="function"}function Le(G){switch($(G)){case 3:return!0;case 4:return!0;default:return!1}}function $e(G,ee){return G===ee||G!==G&&ee!==ee}function ie(G,ee){var ne=G[ee];if(ne!=null){if(!Te(ne))throw new TypeError;return ne}}function L(G){var ee=ie(G,o);if(!Te(ee))throw new TypeError;var ne=ee.call(G);if(!fe(ne))throw new TypeError;return ne}function j(G){return G.value}function X(G){var ee=G.next();return ee.done?!1:ee}function ue(G){var ee=G.return;ee&&ee.call(G)}function le(G){var ee=Object.getPrototypeOf(G);if(typeof G!="function"||G===h||ee!==h)return ee;var ne=G.prototype,be=ne&&Object.getPrototypeOf(ne);if(be==null||be===Object.prototype)return ee;var Ue=be.constructor;return typeof Ue!="function"||Ue===G?ee:Ue}function de(){var G;!te(v)&&typeof t.Reflect<"u"&&!(v in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(G=Pe(t.Reflect));var ee,ne,be,Ue=new b,pe={registerProvider:Ee,getProvider:ke,setProvider:et};return pe;function Ee(Ze){if(!Object.isExtensible(pe))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case G===Ze:break;case te(ee):ee=Ze;break;case ee===Ze:break;case te(ne):ne=Ze;break;case ne===Ze:break;default:be===void 0&&(be=new m),be.add(Ze);break}}function Ce(Ze,nt){if(!te(ee)){if(ee.isProviderFor(Ze,nt))return ee;if(!te(ne)){if(ne.isProviderFor(Ze,nt))return ee;if(!te(be))for(var xt=L(be);;){var pt=X(xt);if(!pt)return;var St=j(pt);if(St.isProviderFor(Ze,nt))return ue(xt),St}}}if(!te(G)&&G.isProviderFor(Ze,nt))return G}function ke(Ze,nt){var xt=Ue.get(Ze),pt;return te(xt)||(pt=xt.get(nt)),te(pt)&&(pt=Ce(Ze,nt),te(pt)||(te(xt)&&(xt=new y,Ue.set(Ze,xt)),xt.set(nt,pt))),pt}function Ke(Ze){if(te(Ze))throw new TypeError;return ee===Ze||ne===Ze||!te(be)&&be.has(Ze)}function et(Ze,nt,xt){if(!Ke(xt))throw new Error("Metadata provider not registered.");var pt=ke(Ze,nt);if(pt!==xt){if(!te(pt))return!1;var St=Ue.get(Ze);te(St)&&(St=new y,Ue.set(Ze,St)),St.set(nt,xt)}return!0}}function Be(){var G;return!te(v)&&fe(t.Reflect)&&Object.isExtensible(t.Reflect)&&(G=t.Reflect[v]),te(G)&&(G=de()),!te(v)&&fe(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,v,{enumerable:!1,configurable:!1,writable:!1,value:G}),G}function Me(G){var ee=new b,ne={isProviderFor:function(Ke,et){var Ze=ee.get(Ke);return te(Ze)?!1:Ze.has(et)},OrdinaryDefineOwnMetadata:Ee,OrdinaryHasOwnMetadata:Ue,OrdinaryGetOwnMetadata:pe,OrdinaryOwnMetadataKeys:Ce,OrdinaryDeleteMetadata:ke};return E.registerProvider(ne),ne;function be(Ke,et,Ze){var nt=ee.get(Ke),xt=!1;if(te(nt)){if(!Ze)return;nt=new y,ee.set(Ke,nt),xt=!0}var pt=nt.get(et);if(te(pt)){if(!Ze)return;if(pt=new y,nt.set(et,pt),!G.setProvider(Ke,et,ne))throw nt.delete(et),xt&&ee.delete(Ke),new Error("Wrong provider for target.")}return pt}function Ue(Ke,et,Ze){var nt=be(et,Ze,!1);return te(nt)?!1:me(nt.has(Ke))}function pe(Ke,et,Ze){var nt=be(et,Ze,!1);if(!te(nt))return nt.get(Ke)}function Ee(Ke,et,Ze,nt){var xt=be(Ze,nt,!0);xt.set(Ke,et)}function Ce(Ke,et){var Ze=[],nt=be(Ke,et,!1);if(te(nt))return Ze;for(var xt=nt.keys(),pt=L(xt),St=0;;){var Ai=X(pt);if(!Ai)return Ze.length=St,Ze;var kt=j(Ai);try{Ze[St]=kt}catch(Ft){try{ue(pt)}finally{throw Ft}}St++}}function ke(Ke,et,Ze){var nt=be(et,Ze,!1);if(te(nt)||!nt.delete(Ke))return!1;if(nt.size===0){var xt=ee.get(et);te(xt)||(xt.delete(Ze),xt.size===0&&ee.delete(xt))}return!0}}function Pe(G){var ee=G.defineMetadata,ne=G.hasOwnMetadata,be=G.getOwnMetadata,Ue=G.getOwnMetadataKeys,pe=G.deleteMetadata,Ee=new b,Ce={isProviderFor:function(ke,Ke){var et=Ee.get(ke);return!te(et)&&et.has(Ke)?!0:Ue(ke,Ke).length?(te(et)&&(et=new m,Ee.set(ke,et)),et.add(Ke),!0):!1},OrdinaryDefineOwnMetadata:ee,OrdinaryHasOwnMetadata:ne,OrdinaryGetOwnMetadata:be,OrdinaryOwnMetadataKeys:Ue,OrdinaryDeleteMetadata:pe};return Ce}function Qe(G,ee,ne){var be=E.getProvider(G,ee);if(!te(be))return be;if(ne){if(E.setProvider(G,ee,x))return x;throw new Error("Illegal state.")}}function q(){var G={},ee=[],ne=(function(){function Ce(ke,Ke,et){this._index=0,this._keys=ke,this._values=Ke,this._selector=et}return Ce.prototype["@@iterator"]=function(){return this},Ce.prototype[o]=function(){return this},Ce.prototype.next=function(){var ke=this._index;if(ke>=0&&ke<this._keys.length){var Ke=this._selector(this._keys[ke],this._values[ke]);return ke+1>=this._keys.length?(this._index=-1,this._keys=ee,this._values=ee):this._index++,{value:Ke,done:!1}}return{value:void 0,done:!0}},Ce.prototype.throw=function(ke){throw this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),ke},Ce.prototype.return=function(ke){return this._index>=0&&(this._index=-1,this._keys=ee,this._values=ee),{value:ke,done:!0}},Ce})(),be=(function(){function Ce(){this._keys=[],this._values=[],this._cacheKey=G,this._cacheIndex=-2}return Object.defineProperty(Ce.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ce.prototype.has=function(ke){return this._find(ke,!1)>=0},Ce.prototype.get=function(ke){var Ke=this._find(ke,!1);return Ke>=0?this._values[Ke]:void 0},Ce.prototype.set=function(ke,Ke){var et=this._find(ke,!0);return this._values[et]=Ke,this},Ce.prototype.delete=function(ke){var Ke=this._find(ke,!1);if(Ke>=0){for(var et=this._keys.length,Ze=Ke+1;Ze<et;Ze++)this._keys[Ze-1]=this._keys[Ze],this._values[Ze-1]=this._values[Ze];return this._keys.length--,this._values.length--,$e(ke,this._cacheKey)&&(this._cacheKey=G,this._cacheIndex=-2),!0}return!1},Ce.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=G,this._cacheIndex=-2},Ce.prototype.keys=function(){return new ne(this._keys,this._values,Ue)},Ce.prototype.values=function(){return new ne(this._keys,this._values,pe)},Ce.prototype.entries=function(){return new ne(this._keys,this._values,Ee)},Ce.prototype["@@iterator"]=function(){return this.entries()},Ce.prototype[o]=function(){return this.entries()},Ce.prototype._find=function(ke,Ke){if(!$e(this._cacheKey,ke)){this._cacheIndex=-1;for(var et=0;et<this._keys.length;et++)if($e(this._keys[et],ke)){this._cacheIndex=et;break}}return this._cacheIndex<0&&Ke&&(this._cacheIndex=this._keys.length,this._keys.push(ke),this._values.push(void 0)),this._cacheIndex},Ce})();return be;function Ue(Ce,ke){return Ce}function pe(Ce,ke){return ke}function Ee(Ce,ke){return[Ce,ke]}}function w(){var G=(function(){function ee(){this._map=new y}return Object.defineProperty(ee.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ee.prototype.has=function(ne){return this._map.has(ne)},ee.prototype.add=function(ne){return this._map.set(ne,ne),this},ee.prototype.delete=function(ne){return this._map.delete(ne)},ee.prototype.clear=function(){this._map.clear()},ee.prototype.keys=function(){return this._map.keys()},ee.prototype.values=function(){return this._map.keys()},ee.prototype.entries=function(){return this._map.entries()},ee.prototype["@@iterator"]=function(){return this.keys()},ee.prototype[o]=function(){return this.keys()},ee})();return G}function A(){var G=16,ee=d.create(),ne=be();return(function(){function ke(){this._key=be()}return ke.prototype.has=function(Ke){var et=Ue(Ke,!1);return et!==void 0?d.has(et,this._key):!1},ke.prototype.get=function(Ke){var et=Ue(Ke,!1);return et!==void 0?d.get(et,this._key):void 0},ke.prototype.set=function(Ke,et){var Ze=Ue(Ke,!0);return Ze[this._key]=et,this},ke.prototype.delete=function(Ke){var et=Ue(Ke,!1);return et!==void 0?delete et[this._key]:!1},ke.prototype.clear=function(){this._key=be()},ke})();function be(){var ke;do ke="@@WeakMap@@"+Ce();while(d.has(ee,ke));return ee[ke]=!0,ke}function Ue(ke,Ke){if(!n.call(ke,ne)){if(!Ke)return;Object.defineProperty(ke,ne,{value:d.create()})}return ke[ne]}function pe(ke,Ke){for(var et=0;et<Ke;++et)ke[et]=Math.random()*255|0;return ke}function Ee(ke){if(typeof Uint8Array=="function"){var Ke=new Uint8Array(ke);return typeof crypto<"u"?crypto.getRandomValues(Ke):typeof msCrypto<"u"?msCrypto.getRandomValues(Ke):pe(Ke,ke),Ke}return pe(new Array(ke),ke)}function Ce(){var ke=Ee(G);ke[6]=ke[6]&79|64,ke[8]=ke[8]&191|128;for(var Ke="",et=0;et<G;++et){var Ze=ke[et];(et===4||et===6||et===8)&&(Ke+="-"),Ze<16&&(Ke+="0"),Ke+=Ze.toString(16).toLowerCase()}return Ke}}function K(G){return G.__=void 0,delete G.__,G}})})(J5||(J5={}));var H2={exports:{}},wt={};var X5;function yj(){if(X5)return wt;X5=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),y=Symbol.iterator;function m($){return $===null||typeof $!="object"?null:($=y&&$[y]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function x($,te,ae){this.props=$,this.context=te,this.refs=E,this.updater=ae||b}x.prototype.isReactComponent={},x.prototype.setState=function($,te){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,te,"setState")},x.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function D(){}D.prototype=x.prototype;function N($,te,ae){this.props=$,this.context=te,this.refs=E,this.updater=ae||b}var B=N.prototype=new D;B.constructor=N,v(B,x.prototype),B.isPureReactComponent=!0;var k=Array.isArray;function F(){}var T={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function Z($,te,ae){var ce=ae.ref;return{$$typeof:r,type:$,key:te,ref:ce!==void 0?ce:null,props:ae}}function Y($,te){return Z($.type,te,$.props)}function W($){return typeof $=="object"&&$!==null&&$.$$typeof===r}function M($){var te={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ae){return te[ae]})}var C=/\/+/g;function R($,te){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):te.toString(36)}function S($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(F,F):($.status="pending",$.then(function(te){$.status==="pending"&&($.status="fulfilled",$.value=te)},function(te){$.status==="pending"&&($.status="rejected",$.reason=te)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function _($,te,ae,ce,fe){var oe=typeof $;(oe==="undefined"||oe==="boolean")&&($=null);var ye=!1;if($===null)ye=!0;else switch(oe){case"bigint":case"string":case"number":ye=!0;break;case"object":switch($.$$typeof){case r:case e:ye=!0;break;case d:return ye=$._init,_(ye($._payload),te,ae,ce,fe)}}if(ye)return fe=fe($),ye=ce===""?"."+R($,0):ce,k(fe)?(ae="",ye!=null&&(ae=ye.replace(C,"$&/")+"/"),_(fe,te,ae,"",function(we){return we})):fe!=null&&(W(fe)&&(fe=Y(fe,ae+(fe.key==null||$&&$.key===fe.key?"":(""+fe.key).replace(C,"$&/")+"/")+ye)),te.push(fe)),1;ye=0;var me=ce===""?".":ce+":";if(k($))for(var ve=0;ve<$.length;ve++)ce=$[ve],oe=me+R(ce,ve),ye+=_(ce,te,ae,oe,fe);else if(ve=m($),typeof ve=="function")for($=ve.call($),ve=0;!(ce=$.next()).done;)ce=ce.value,oe=me+R(ce,ve++),ye+=_(ce,te,ae,oe,fe);else if(oe==="object"){if(typeof $.then=="function")return _(S($),te,ae,ce,fe);throw te=String($),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ye}function U($,te,ae){if($==null)return $;var ce=[],fe=0;return _($,ce,"","",function(oe){return te.call(ae,oe,fe++)}),ce}function H($){if($._status===-1){var te=$._result;te=te(),te.then(function(ae){($._status===0||$._status===-1)&&($._status=1,$._result=ae)},function(ae){($._status===0||$._status===-1)&&($._status=2,$._result=ae)}),$._status===-1&&($._status=0,$._result=te)}if($._status===1)return $._result.default;throw $._result}var V=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},P={map:U,forEach:function($,te,ae){U($,function(){te.apply(this,arguments)},ae)},count:function($){var te=0;return U($,function(){te++}),te},toArray:function($){return U($,function(te){return te})||[]},only:function($){if(!W($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return wt.Activity=h,wt.Children=P,wt.Component=x,wt.Fragment=t,wt.Profiler=i,wt.PureComponent=N,wt.StrictMode=n,wt.Suspense=c,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,wt.__COMPILER_RUNTIME={__proto__:null,c:function($){return T.H.useMemoCache($)}},wt.cache=function($){return function(){return $.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function($,te,ae){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var ce=v({},$.props),fe=$.key;if(te!=null)for(oe in te.key!==void 0&&(fe=""+te.key),te)!z.call(te,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&te.ref===void 0||(ce[oe]=te[oe]);var oe=arguments.length-2;if(oe===1)ce.children=ae;else if(1<oe){for(var ye=Array(oe),me=0;me<oe;me++)ye[me]=arguments[me+2];ce.children=ye}return Z($.type,fe,ce)},wt.createContext=function($){return $={$$typeof:o,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},wt.createElement=function($,te,ae){var ce,fe={},oe=null;if(te!=null)for(ce in te.key!==void 0&&(oe=""+te.key),te)z.call(te,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(fe[ce]=te[ce]);var ye=arguments.length-2;if(ye===1)fe.children=ae;else if(1<ye){for(var me=Array(ye),ve=0;ve<ye;ve++)me[ve]=arguments[ve+2];fe.children=me}if($&&$.defaultProps)for(ce in ye=$.defaultProps,ye)fe[ce]===void 0&&(fe[ce]=ye[ce]);return Z($,oe,fe)},wt.createRef=function(){return{current:null}},wt.forwardRef=function($){return{$$typeof:s,render:$}},wt.isValidElement=W,wt.lazy=function($){return{$$typeof:d,_payload:{_status:-1,_result:$},_init:H}},wt.memo=function($,te){return{$$typeof:l,type:$,compare:te===void 0?null:te}},wt.startTransition=function($){var te=T.T,ae={};T.T=ae;try{var ce=$(),fe=T.S;fe!==null&&fe(ae,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(F,V)}catch(oe){V(oe)}finally{te!==null&&ae.types!==null&&(te.types=ae.types),T.T=te}},wt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},wt.use=function($){return T.H.use($)},wt.useActionState=function($,te,ae){return T.H.useActionState($,te,ae)},wt.useCallback=function($,te){return T.H.useCallback($,te)},wt.useContext=function($){return T.H.useContext($)},wt.useDebugValue=function(){},wt.useDeferredValue=function($,te){return T.H.useDeferredValue($,te)},wt.useEffect=function($,te){return T.H.useEffect($,te)},wt.useEffectEvent=function($){return T.H.useEffectEvent($)},wt.useId=function(){return T.H.useId()},wt.useImperativeHandle=function($,te,ae){return T.H.useImperativeHandle($,te,ae)},wt.useInsertionEffect=function($,te){return T.H.useInsertionEffect($,te)},wt.useLayoutEffect=function($,te){return T.H.useLayoutEffect($,te)},wt.useMemo=function($,te){return T.H.useMemo($,te)},wt.useOptimistic=function($,te){return T.H.useOptimistic($,te)},wt.useReducer=function($,te,ae){return T.H.useReducer($,te,ae)},wt.useRef=function($){return T.H.useRef($)},wt.useState=function($){return T.H.useState($)},wt.useSyncExternalStore=function($,te,ae){return T.H.useSyncExternalStore($,te,ae)},wt.useTransition=function(){return T.H.useTransition()},wt.version="19.2.3",wt}var eM;function R8(){return eM||(eM=1,H2.exports=yj()),H2.exports}var _r=R8();const mj=Zo(_r);var K2={exports:{}},Wh={},G2={exports:{}},W2={};var tM;function gj(){return tM||(tM=1,(function(r){function e(_,U){var H=_.length;_.push(U);e:for(;0<H;){var V=H-1>>>1,P=_[V];if(0<i(P,U))_[V]=U,_[H]=P,H=V;else break e}}function t(_){return _.length===0?null:_[0]}function n(_){if(_.length===0)return null;var U=_[0],H=_.pop();if(H!==U){_[0]=H;e:for(var V=0,P=_.length,$=P>>>1;V<$;){var te=2*(V+1)-1,ae=_[te],ce=te+1,fe=_[ce];if(0>i(ae,H))ce<P&&0>i(fe,ae)?(_[V]=fe,_[ce]=H,V=ce):(_[V]=ae,_[te]=H,V=te);else if(ce<P&&0>i(fe,H))_[V]=fe,_[ce]=H,V=ce;else break e}}return U}function i(_,U){var H=_.sortIndex-U.sortIndex;return H!==0?H:_.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();r.unstable_now=function(){return o.now()-s}}var c=[],l=[],d=1,h=null,y=3,m=!1,b=!1,v=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function B(_){for(var U=t(l);U!==null;){if(U.callback===null)n(l);else if(U.startTime<=_)n(l),U.sortIndex=U.expirationTime,e(c,U);else break;U=t(l)}}function k(_){if(v=!1,B(_),!b)if(t(c)!==null)b=!0,F||(F=!0,M());else{var U=t(l);U!==null&&S(k,U.startTime-_)}}var F=!1,T=-1,z=5,Z=-1;function Y(){return E?!0:!(r.unstable_now()-Z<z)}function W(){if(E=!1,F){var _=r.unstable_now();Z=_;var U=!0;try{e:{b=!1,v&&(v=!1,D(T),T=-1),m=!0;var H=y;try{t:{for(B(_),h=t(c);h!==null&&!(h.expirationTime>_&&Y());){var V=h.callback;if(typeof V=="function"){h.callback=null,y=h.priorityLevel;var P=V(h.expirationTime<=_);if(_=r.unstable_now(),typeof P=="function"){h.callback=P,B(_),U=!0;break t}h===t(c)&&n(c),B(_)}else n(c);h=t(c)}if(h!==null)U=!0;else{var $=t(l);$!==null&&S(k,$.startTime-_),U=!1}}break e}finally{h=null,y=H,m=!1}U=void 0}}finally{U?M():F=!1}}}var M;if(typeof N=="function")M=function(){N(W)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,R=C.port2;C.port1.onmessage=W,M=function(){R.postMessage(null)}}else M=function(){x(W,0)};function S(_,U){T=x(function(){_(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(_){_.callback=null},r.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<_?Math.floor(1e3/_):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(_){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var H=y;y=U;try{return _()}finally{y=H}},r.unstable_requestPaint=function(){E=!0},r.unstable_runWithPriority=function(_,U){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var H=y;y=_;try{return U()}finally{y=H}},r.unstable_scheduleCallback=function(_,U,H){var V=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?V+H:V):H=V,_){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=H+P,_={id:d++,callback:U,priorityLevel:_,startTime:H,expirationTime:P,sortIndex:-1},H>V?(_.sortIndex=H,e(l,_),t(c)===null&&_===t(l)&&(v?(D(T),T=-1):v=!0,S(k,H-V))):(_.sortIndex=P,e(c,_),b||m||(b=!0,F||(F=!0,M()))),_},r.unstable_shouldYield=Y,r.unstable_wrapCallback=function(_){var U=y;return function(){var H=y;y=U;try{return _.apply(this,arguments)}finally{y=H}}}})(W2)),W2}var rM;function vj(){return rM||(rM=1,G2.exports=gj()),G2.exports}var Z2={exports:{}},Xn={};var nM;function bj(){if(nM)return Xn;nM=1;var r=R8();function e(c){var l="https://react.dev/errors/"+c;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,l,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:l,implementation:d}}var o=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(c,l){if(c==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Xn.createPortal=function(c,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(e(299));return a(c,l,null,d)},Xn.flushSync=function(c){var l=o.T,d=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=l,n.p=d,n.d.f()}},Xn.preconnect=function(c,l){typeof c=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,n.d.C(c,l))},Xn.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Xn.preinit=function(c,l){if(typeof c=="string"&&l&&typeof l.as=="string"){var d=l.as,h=s(d,l.crossOrigin),y=typeof l.integrity=="string"?l.integrity:void 0,m=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?n.d.S(c,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:h,integrity:y,fetchPriority:m}):d==="script"&&n.d.X(c,{crossOrigin:h,integrity:y,fetchPriority:m,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},Xn.preinitModule=function(c,l){if(typeof c=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=s(l.as,l.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&n.d.M(c)},Xn.preload=function(c,l){if(typeof c=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,h=s(d,l.crossOrigin);n.d.L(c,d,{crossOrigin:h,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},Xn.preloadModule=function(c,l){if(typeof c=="string")if(l){var d=s(l.as,l.crossOrigin);n.d.m(c,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else n.d.m(c)},Xn.requestFormReset=function(c){n.d.r(c)},Xn.unstable_batchedUpdates=function(c,l){return c(l)},Xn.useFormState=function(c,l,d){return o.H.useFormState(c,l,d)},Xn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Xn.version="19.2.3",Xn}var iM;function wj(){if(iM)return Z2.exports;iM=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Z2.exports=bj(),Z2.exports}var aM;function _j(){if(aM)return Wh;aM=1;var r=vj(),e=R8(),t=wj();function n(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var f=u,p=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(p=f.return),u=f.return;while(u)}return f.tag===3?p:null}function o(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function s(u){if(u.tag===31){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function c(u){if(a(u)!==u)throw Error(n(188))}function l(u){var f=u.alternate;if(!f){if(f=a(u),f===null)throw Error(n(188));return f!==u?null:u}for(var p=u,g=f;;){var O=p.return;if(O===null)break;var I=O.alternate;if(I===null){if(g=O.return,g!==null){p=g;continue}break}if(O.child===I.child){for(I=O.child;I;){if(I===p)return c(O),u;if(I===g)return c(O),f;I=I.sibling}throw Error(n(188))}if(p.return!==g.return)p=O,g=I;else{for(var Q=!1,se=O.child;se;){if(se===p){Q=!0,p=O,g=I;break}if(se===g){Q=!0,g=O,p=I;break}se=se.sibling}if(!Q){for(se=I.child;se;){if(se===p){Q=!0,p=I,g=O;break}if(se===g){Q=!0,g=I,p=O;break}se=se.sibling}if(!Q)throw Error(n(189))}}if(p.alternate!==g)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?u:f}function d(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=d(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),N=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function M(u){return u===null||typeof u!="object"?null:(u=W&&u[W]||u["@@iterator"],typeof u=="function"?u:null)}var C=Symbol.for("react.client.reference");function R(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===C?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList";case Z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case b:return"Portal";case N:return u.displayName||"Context";case D:return(u._context.displayName||"Context")+".Consumer";case B:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return f=u.displayName||null,f!==null?f:R(u.type)||"Memo";case z:f=u._payload,u=u._init;try{return R(u(f))}catch{}}return null}var S=Array.isArray,_=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},V=[],P=-1;function $(u){return{current:u}}function te(u){0>P||(u.current=V[P],V[P]=null,P--)}function ae(u,f){P++,V[P]=u.current,u.current=f}var ce=$(null),fe=$(null),oe=$(null),ye=$(null);function me(u,f){switch(ae(oe,f),ae(fe,u),ae(ce,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?b5(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=b5(f),u=w5(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}te(ce),ae(ce,u)}function ve(){te(ce),te(fe),te(oe)}function we(u){u.memoizedState!==null&&ae(ye,u);var f=ce.current,p=w5(f,u.type);f!==p&&(ae(fe,u),ae(ce,p))}function De(u){fe.current===u&&(te(ce),te(fe)),ye.current===u&&(te(ye),zh._currentValue=H)}var Te,Se;function Le(u){if(Te===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Te=f&&f[1]||"",Se=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+u+Se}var $e=!1;function ie(u,f){if(!u||$e)return"";$e=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(f){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Ie){var Ne=Ie}Reflect.construct(u,[],Fe)}else{try{Fe.call()}catch(Ie){Ne=Ie}u.call(Fe.prototype)}}else{try{throw Error()}catch(Ie){Ne=Ie}(Fe=u())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Ie){if(Ie&&Ne&&typeof Ie.stack=="string")return[Ie.stack,Ne.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=g.DetermineComponentFrameRoot(),Q=I[0],se=I[1];if(Q&&se){var ge=Q.split(`
`),Oe=se.split(`
`);for(O=g=0;g<ge.length&&!ge[g].includes("DetermineComponentFrameRoot");)g++;for(;O<Oe.length&&!Oe[O].includes("DetermineComponentFrameRoot");)O++;if(g===ge.length||O===Oe.length)for(g=ge.length-1,O=Oe.length-1;1<=g&&0<=O&&ge[g]!==Oe[O];)O--;for(;1<=g&&0<=O;g--,O--)if(ge[g]!==Oe[O]){if(g!==1||O!==1)do if(g--,O--,0>O||ge[g]!==Oe[O]){var qe=`
`+ge[g].replace(" at new "," at ");return u.displayName&&qe.includes("<anonymous>")&&(qe=qe.replace("<anonymous>",u.displayName)),qe}while(1<=g&&0<=O);break}}}finally{$e=!1,Error.prepareStackTrace=p}return(p=u?u.displayName||u.name:"")?Le(p):""}function L(u,f){switch(u.tag){case 26:case 27:case 5:return Le(u.type);case 16:return Le("Lazy");case 13:return u.child!==f&&f!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return ie(u.type,!1);case 11:return ie(u.type.render,!1);case 1:return ie(u.type,!0);case 31:return Le("Activity");default:return""}}function j(u){try{var f="",p=null;do f+=L(u,p),p=u,u=u.return;while(u);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var X=Object.prototype.hasOwnProperty,ue=r.unstable_scheduleCallback,le=r.unstable_cancelCallback,de=r.unstable_shouldYield,Be=r.unstable_requestPaint,Me=r.unstable_now,Pe=r.unstable_getCurrentPriorityLevel,Qe=r.unstable_ImmediatePriority,q=r.unstable_UserBlockingPriority,w=r.unstable_NormalPriority,A=r.unstable_LowPriority,K=r.unstable_IdlePriority,G=r.log,ee=r.unstable_setDisableYieldValue,ne=null,be=null;function Ue(u){if(typeof G=="function"&&ee(u),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(ne,u)}catch{}}var pe=Math.clz32?Math.clz32:ke,Ee=Math.log,Ce=Math.LN2;function ke(u){return u>>>=0,u===0?32:31-(Ee(u)/Ce|0)|0}var Ke=256,et=262144,Ze=4194304;function nt(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function xt(u,f,p){var g=u.pendingLanes;if(g===0)return 0;var O=0,I=u.suspendedLanes,Q=u.pingedLanes;u=u.warmLanes;var se=g&134217727;return se!==0?(g=se&~I,g!==0?O=nt(g):(Q&=se,Q!==0?O=nt(Q):p||(p=se&~u,p!==0&&(O=nt(p))))):(se=g&~I,se!==0?O=nt(se):Q!==0?O=nt(Q):p||(p=g&~u,p!==0&&(O=nt(p)))),O===0?0:f!==0&&f!==O&&(f&I)===0&&(I=O&-O,p=f&-f,I>=p||I===32&&(p&4194048)!==0)?f:O}function pt(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function St(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(){var u=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),u}function kt(u){for(var f=[],p=0;31>p;p++)f.push(u);return f}function Ft(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Jo(u,f,p,g,O,I){var Q=u.pendingLanes;u.pendingLanes=p,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=p,u.entangledLanes&=p,u.errorRecoveryDisabledLanes&=p,u.shellSuspendCounter=0;var se=u.entanglements,ge=u.expirationTimes,Oe=u.hiddenUpdates;for(p=Q&~p;0<p;){var qe=31-pe(p),Fe=1<<qe;se[qe]=0,ge[qe]=-1;var Ne=Oe[qe];if(Ne!==null)for(Oe[qe]=null,qe=0;qe<Ne.length;qe++){var Ie=Ne[qe];Ie!==null&&(Ie.lane&=-536870913)}p&=~Fe}g!==0&&or(u,g,0),I!==0&&O===0&&u.tag!==0&&(u.suspendedLanes|=I&~(Q&~f))}function or(u,f,p){u.pendingLanes|=f,u.suspendedLanes&=~f;var g=31-pe(f);u.entangledLanes|=f,u.entanglements[g]=u.entanglements[g]|1073741824|p&261930}function ur(u,f){var p=u.entangledLanes|=f;for(u=u.entanglements;p;){var g=31-pe(p),O=1<<g;O&f|u[g]&f&&(u[g]|=f),p&=~O}}function eo(u,f){var p=f&-f;return p=(p&42)!==0?1:Yt(p),(p&(u.suspendedLanes|f))!==0?0:p}function Yt(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Qt(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function ui(){var u=U.p;return u!==0?u:(u=window.event,u===void 0?32:z5(u.type))}function cr(u,f){var p=U.p;try{return U.p=u,f()}finally{U.p=p}}var Lt=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Lt,Tt="__reactProps$"+Lt,Kt="__reactContainer$"+Lt,fn="__reactEvents$"+Lt,to="__reactListeners$"+Lt,ro="__reactHandles$"+Lt,ps="__reactResources$"+Lt,Gi="__reactMarker$"+Lt;function Fa(u){delete u[Sr],delete u[Tt],delete u[fn],delete u[to],delete u[ro]}function Xr(u){var f=u[Sr];if(f)return f;for(var p=u.parentNode;p;){if(f=p[Kt]||p[Sr]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(u=T5(u);u!==null;){if(p=u[Sr])return p;u=T5(u)}return f}u=p,p=u.parentNode}return null}function Vr(u){if(u=u[Sr]||u[Kt]){var f=u.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return u}return null}function Ve(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(n(33))}function Si(u){var f=u[ps];return f||(f=u[ps]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function gr(u){u[Gi]=!0}var Cn=new Set,en={};function ci(u,f){Mi(u,f),Mi(u+"Capture",f)}function Mi(u,f){for(en[u]=f,u=0;u<f.length;u++)Cn.add(f[u])}var li=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Br={},za={};function Ti(u){return X.call(za,u)?!0:X.call(Br,u)?!1:li.test(u)?za[u]=!0:(Br[u]=!0,!1)}function Va(u,f,p){if(Ti(f))if(p===null)u.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var g=f.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+p)}}function ha(u,f,p){if(p===null)u.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+p)}}function bn(u,f,p,g){if(g===null)u.removeAttribute(p);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(p);return}u.setAttributeNS(f,p,""+g)}}function Nn(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ry(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Sc(u,f,p){var g=Object.getOwnPropertyDescriptor(u.constructor.prototype,f);if(!u.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var O=g.get,I=g.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return O.call(this)},set:function(Q){p=""+Q,I.call(this,Q)}}),Object.defineProperty(u,f,{enumerable:g.enumerable}),{getValue:function(){return p},setValue:function(Q){p=""+Q},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Fl(u){if(!u._valueTracker){var f=ry(u)?"checked":"value";u._valueTracker=Sc(u,f,""+u[f])}}function nh(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var p=f.getValue(),g="";return u&&(g=ry(u)?u.checked?"true":"false":u.value),u=g,u!==p?(f.setValue(u),!0):!1}function zl(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Hb=/[\n"\\]/g;function Ri(u){return u.replace(Hb,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function ih(u,f,p,g,O,I,Q,se){u.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?u.type=Q:u.removeAttribute("type"),f!=null?Q==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+Nn(f)):u.value!==""+Nn(f)&&(u.value=""+Nn(f)):Q!=="submit"&&Q!=="reset"||u.removeAttribute("value"),f!=null?sh(u,Q,Nn(f)):p!=null?sh(u,Q,Nn(p)):g!=null&&u.removeAttribute("value"),O==null&&I!=null&&(u.defaultChecked=!!I),O!=null&&(u.checked=O&&typeof O!="function"&&typeof O!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?u.name=""+Nn(se):u.removeAttribute("name")}function ah(u,f,p,g,O,I,Q,se){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(u.type=I),f!=null||p!=null){if(!(I!=="submit"&&I!=="reset"||f!=null)){Fl(u);return}p=p!=null?""+Nn(p):"",f=f!=null?""+Nn(f):p,se||f===u.value||(u.value=f),u.defaultValue=f}g=g??O,g=typeof g!="function"&&typeof g!="symbol"&&!!g,u.checked=se?u.checked:!!g,u.defaultChecked=!!g,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(u.name=Q),Fl(u)}function sh(u,f,p){f==="number"&&zl(u.ownerDocument)===u||u.defaultValue===""+p||(u.defaultValue=""+p)}function Xo(u,f,p,g){if(u=u.options,f){f={};for(var O=0;O<p.length;O++)f["$"+p[O]]=!0;for(p=0;p<u.length;p++)O=f.hasOwnProperty("$"+u[p].value),u[p].selected!==O&&(u[p].selected=O),O&&g&&(u[p].defaultSelected=!0)}else{for(p=""+Nn(p),f=null,O=0;O<u.length;O++){if(u[O].value===p){u[O].selected=!0,g&&(u[O].defaultSelected=!0);return}f!==null||u[O].disabled||(f=u[O])}f!==null&&(f.selected=!0)}}function oh(u,f,p){if(f!=null&&(f=""+Nn(f),f!==u.value&&(u.value=f),p==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=p!=null?""+Nn(p):""}function Mc(u,f,p,g){if(f==null){if(g!=null){if(p!=null)throw Error(n(92));if(S(g)){if(1<g.length)throw Error(n(93));g=g[0]}p=g}p==null&&(p=""),f=p}p=Nn(f),u.defaultValue=p,g=u.textContent,g===p&&g!==""&&g!==null&&(u.value=g),Fl(u)}function Wi(u,f){if(f){var p=u.firstChild;if(p&&p===u.lastChild&&p.nodeType===3){p.nodeValue=f;return}}u.textContent=f}var Kb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ny(u,f,p){var g=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?g?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":g?u.setProperty(f,p):typeof p!="number"||p===0||Kb.has(f)?f==="float"?u.cssFloat=p:u[f]=(""+p).trim():u[f]=p+"px"}function Ha(u,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(u=u.style,p!=null){for(var g in p)!p.hasOwnProperty(g)||f!=null&&f.hasOwnProperty(g)||(g.indexOf("--")===0?u.setProperty(g,""):g==="float"?u.cssFloat="":u[g]="");for(var O in f)g=f[O],f.hasOwnProperty(O)&&p[O]!==g&&ny(u,O,g)}else for(var I in f)f.hasOwnProperty(I)&&ny(u,I,f[I])}function uh(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(u){return Wb.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Ka(){}var Ga=null;function Hl(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var eu=null,Wa=null;function iy(u){var f=Vr(u);if(f&&(u=f.stateNode)){var p=u[Tt]||null;e:switch(u=f.stateNode,f.type){case"input":if(ih(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=u;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ri(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var g=p[f];if(g!==u&&g.form===u.form){var O=g[Tt]||null;if(!O)throw Error(n(90));ih(g,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(f=0;f<p.length;f++)g=p[f],g.form===u.form&&nh(g)}break e;case"textarea":oh(u,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&Xo(u,!!p.multiple,f,!1)}}}var Tc=!1;function ay(u,f,p){if(Tc)return u(f,p);Tc=!0;try{var g=u(f);return g}finally{if(Tc=!1,(eu!==null||Wa!==null)&&(zy(),eu&&(f=eu,u=Wa,Wa=eu=null,iy(f),u)))for(f=0;f<u.length;f++)iy(u[f])}}function tu(u,f){var p=u.stateNode;if(p===null)return null;var g=p[Tt]||null;if(g===null)return null;p=g[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(u=u.type,g=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!g;break e;default:u=!1}if(u)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kl=!1;if(pa)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){Kl=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{Kl=!1}var Ya=null,ch=null,Gl=null;function sy(){if(Gl)return Gl;var u,f=ch,p=f.length,g,O="value"in Ya?Ya.value:Ya.textContent,I=O.length;for(u=0;u<p&&f[u]===O[u];u++);var Q=p-u;for(g=1;g<=Q&&f[p-g]===O[I-g];g++);return Gl=O.slice(u,1<g?1-g:void 0)}function he(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function xe(){return!0}function ze(){return!1}function tt(u){function f(p,g,O,I,Q){this._reactName=p,this._targetInst=O,this.type=g,this.nativeEvent=I,this.target=Q,this.currentTarget=null;for(var se in u)u.hasOwnProperty(se)&&(p=u[se],this[se]=p?p(I):I[se]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?xe:ze,this.isPropagationStopped=ze,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=xe)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=xe)},persist:function(){},isPersistent:xe}),f}var jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gt=tt(jt),rr=h({},jt,{view:0,detail:0}),tn=tt(rr),Hr,lr,dn,Jn=h({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zb,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==dn&&(dn&&u.type==="mousemove"?(Hr=u.screenX-dn.screenX,lr=u.screenY-dn.screenY):lr=Hr=0,dn=u),Hr)},movementY:function(u){return"movementY"in u?u.movementY:lr}}),hn=tt(Jn),Oi=h({},Jn,{dataTransfer:0}),Ci=tt(Oi),ys=h({},rr,{relatedTarget:0}),Zi=tt(ys),no=h({},jt,{animationName:0,elapsedTime:0,pseudoElement:0}),oy=tt(no),Wl=h({},jt,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Zl=tt(Wl),vq=h({},jt,{data:0}),x6=tt(vq),bq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eq(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=_q[u])?!!f[u]:!1}function Zb(){return Eq}var xq=h({},rr,{key:function(u){if(u.key){var f=bq[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=he(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?wq[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zb,charCode:function(u){return u.type==="keypress"?he(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?he(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Aq=tt(xq),Sq=h({},Jn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A6=tt(Sq),Mq=h({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zb}),Tq=tt(Mq),Rq=h({},jt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oq=tt(Rq),Cq=h({},Jn,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Nq=tt(Cq),Bq=h({},jt,{newState:0,oldState:0}),Iq=tt(Bq),Dq=[9,13,27,32],Yb=pa&&"CompositionEvent"in window,lh=null;pa&&"documentMode"in document&&(lh=document.documentMode);var Pq=pa&&"TextEvent"in window&&!lh,S6=pa&&(!Yb||lh&&8<lh&&11>=lh),M6=" ",T6=!1;function R6(u,f){switch(u){case"keyup":return Dq.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O6(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Yl=!1;function Uq(u,f){switch(u){case"compositionend":return O6(f);case"keypress":return f.which!==32?null:(T6=!0,M6);case"textInput":return u=f.data,u===M6&&T6?null:u;default:return null}}function kq(u,f){if(Yl)return u==="compositionend"||!Yb&&R6(u,f)?(u=sy(),Gl=ch=Ya=null,Yl=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return S6&&f.locale!=="ko"?null:f.data;default:return null}}var qq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C6(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!qq[u.type]:f==="textarea"}function N6(u,f,p,g){eu?Wa?Wa.push(g):Wa=[g]:eu=g,f=Yy(f,"onChange"),0<f.length&&(p=new gt("onChange","change",null,p,g),u.push({event:p,listeners:f}))}var fh=null,dh=null;function Lq(u){h5(u,0)}function uy(u){var f=Ve(u);if(nh(f))return u}function B6(u,f){if(u==="change")return f}var I6=!1;if(pa){var Qb;if(pa){var Jb="oninput"in document;if(!Jb){var D6=document.createElement("div");D6.setAttribute("oninput","return;"),Jb=typeof D6.oninput=="function"}Qb=Jb}else Qb=!1;I6=Qb&&(!document.documentMode||9<document.documentMode)}function P6(){fh&&(fh.detachEvent("onpropertychange",U6),dh=fh=null)}function U6(u){if(u.propertyName==="value"&&uy(dh)){var f=[];N6(f,dh,u,Hl(u)),ay(Lq,f)}}function jq(u,f,p){u==="focusin"?(P6(),fh=f,dh=p,fh.attachEvent("onpropertychange",U6)):u==="focusout"&&P6()}function $q(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return uy(dh)}function Fq(u,f){if(u==="click")return uy(f)}function zq(u,f){if(u==="input"||u==="change")return uy(f)}function Vq(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var Yi=typeof Object.is=="function"?Object.is:Vq;function hh(u,f){if(Yi(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var p=Object.keys(u),g=Object.keys(f);if(p.length!==g.length)return!1;for(g=0;g<p.length;g++){var O=p[g];if(!X.call(f,O)||!Yi(u[O],f[O]))return!1}return!0}function k6(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function q6(u,f){var p=k6(u);u=0;for(var g;p;){if(p.nodeType===3){if(g=u+p.textContent.length,u<=f&&g>=f)return{node:p,offset:f-u};u=g}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=k6(p)}}function L6(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?L6(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function j6(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=zl(u.document);f instanceof u.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)u=f.contentWindow;else break;f=zl(u.document)}return f}function Xb(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var Hq=pa&&"documentMode"in document&&11>=document.documentMode,Ql=null,ew=null,ph=null,tw=!1;function $6(u,f,p){var g=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tw||Ql==null||Ql!==zl(g)||(g=Ql,"selectionStart"in g&&Xb(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ph&&hh(ph,g)||(ph=g,g=Yy(ew,"onSelect"),0<g.length&&(f=new gt("onSelect","select",null,f,p),u.push({event:f,listeners:g}),f.target=Ql)))}function Rc(u,f){var p={};return p[u.toLowerCase()]=f.toLowerCase(),p["Webkit"+u]="webkit"+f,p["Moz"+u]="moz"+f,p}var Jl={animationend:Rc("Animation","AnimationEnd"),animationiteration:Rc("Animation","AnimationIteration"),animationstart:Rc("Animation","AnimationStart"),transitionrun:Rc("Transition","TransitionRun"),transitionstart:Rc("Transition","TransitionStart"),transitioncancel:Rc("Transition","TransitionCancel"),transitionend:Rc("Transition","TransitionEnd")},rw={},F6={};pa&&(F6=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function Oc(u){if(rw[u])return rw[u];if(!Jl[u])return u;var f=Jl[u],p;for(p in f)if(f.hasOwnProperty(p)&&p in F6)return rw[u]=f[p];return u}var z6=Oc("animationend"),V6=Oc("animationiteration"),H6=Oc("animationstart"),Kq=Oc("transitionrun"),Gq=Oc("transitionstart"),Wq=Oc("transitioncancel"),K6=Oc("transitionend"),G6=new Map,nw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nw.push("scrollEnd");function Qa(u,f){G6.set(u,f),ci(f,[u])}var cy=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},ya=[],Xl=0,iw=0;function ly(){for(var u=Xl,f=iw=Xl=0;f<u;){var p=ya[f];ya[f++]=null;var g=ya[f];ya[f++]=null;var O=ya[f];ya[f++]=null;var I=ya[f];if(ya[f++]=null,g!==null&&O!==null){var Q=g.pending;Q===null?O.next=O:(O.next=Q.next,Q.next=O),g.pending=O}I!==0&&W6(p,O,I)}}function fy(u,f,p,g){ya[Xl++]=u,ya[Xl++]=f,ya[Xl++]=p,ya[Xl++]=g,iw|=g,u.lanes|=g,u=u.alternate,u!==null&&(u.lanes|=g)}function aw(u,f,p,g){return fy(u,f,p,g),dy(u)}function Cc(u,f){return fy(u,null,null,f),dy(u)}function W6(u,f,p){u.lanes|=p;var g=u.alternate;g!==null&&(g.lanes|=p);for(var O=!1,I=u.return;I!==null;)I.childLanes|=p,g=I.alternate,g!==null&&(g.childLanes|=p),I.tag===22&&(u=I.stateNode,u===null||u._visibility&1||(O=!0)),u=I,I=I.return;return u.tag===3?(I=u.stateNode,O&&f!==null&&(O=31-pe(p),u=I.hiddenUpdates,g=u[O],g===null?u[O]=[f]:g.push(f),f.lane=p|536870912),I):null}function dy(u){if(50<Uh)throw Uh=0,p2=null,Error(n(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var ef={};function Zq(u,f,p,g){this.tag=u,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qi(u,f,p,g){return new Zq(u,f,p,g)}function sw(u){return u=u.prototype,!(!u||!u.isReactComponent)}function io(u,f){var p=u.alternate;return p===null?(p=Qi(u.tag,f,u.key,u.mode),p.elementType=u.elementType,p.type=u.type,p.stateNode=u.stateNode,p.alternate=u,u.alternate=p):(p.pendingProps=f,p.type=u.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=u.flags&65011712,p.childLanes=u.childLanes,p.lanes=u.lanes,p.child=u.child,p.memoizedProps=u.memoizedProps,p.memoizedState=u.memoizedState,p.updateQueue=u.updateQueue,f=u.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=u.sibling,p.index=u.index,p.ref=u.ref,p.refCleanup=u.refCleanup,p}function Z6(u,f){u.flags&=65011714;var p=u.alternate;return p===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,f=p.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function hy(u,f,p,g,O,I){var Q=0;if(g=u,typeof u=="function")sw(u)&&(Q=1);else if(typeof u=="string")Q=ej(u,p,ce.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case Z:return u=Qi(31,p,f,O),u.elementType=Z,u.lanes=I,u;case v:return Nc(p.children,O,I,f);case E:Q=8,O|=24;break;case x:return u=Qi(12,p,f,O|2),u.elementType=x,u.lanes=I,u;case k:return u=Qi(13,p,f,O),u.elementType=k,u.lanes=I,u;case F:return u=Qi(19,p,f,O),u.elementType=F,u.lanes=I,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case N:Q=10;break e;case D:Q=9;break e;case B:Q=11;break e;case T:Q=14;break e;case z:Q=16,g=null;break e}Q=29,p=Error(n(130,u===null?"null":typeof u,"")),g=null}return f=Qi(Q,p,f,O),f.elementType=u,f.type=g,f.lanes=I,f}function Nc(u,f,p,g){return u=Qi(7,u,g,f),u.lanes=p,u}function ow(u,f,p){return u=Qi(6,u,null,f),u.lanes=p,u}function Y6(u){var f=Qi(18,null,null,0);return f.stateNode=u,f}function uw(u,f,p){return f=Qi(4,u.children!==null?u.children:[],u.key,f),f.lanes=p,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var Q6=new WeakMap;function ma(u,f){if(typeof u=="object"&&u!==null){var p=Q6.get(u);return p!==void 0?p:(f={value:u,source:f,stack:j(f)},Q6.set(u,f),f)}return{value:u,source:f,stack:j(f)}}var tf=[],rf=0,py=null,yh=0,ga=[],va=0,ru=null,ms=1,gs="";function ao(u,f){tf[rf++]=yh,tf[rf++]=py,py=u,yh=f}function J6(u,f,p){ga[va++]=ms,ga[va++]=gs,ga[va++]=ru,ru=u;var g=ms;u=gs;var O=32-pe(g)-1;g&=~(1<<O),p+=1;var I=32-pe(f)+O;if(30<I){var Q=O-O%5;I=(g&(1<<Q)-1).toString(32),g>>=Q,O-=Q,ms=1<<32-pe(f)+O|p<<O|g,gs=I+u}else ms=1<<I|p<<O|g,gs=u}function cw(u){u.return!==null&&(ao(u,1),J6(u,1,0))}function lw(u){for(;u===py;)py=tf[--rf],tf[rf]=null,yh=tf[--rf],tf[rf]=null;for(;u===ru;)ru=ga[--va],ga[va]=null,gs=ga[--va],ga[va]=null,ms=ga[--va],ga[va]=null}function X6(u,f){ga[va++]=ms,ga[va++]=gs,ga[va++]=ru,ms=f.id,gs=f.overflow,ru=u}var Bn=null,br=null,Dt=!1,nu=null,ba=!1,fw=Error(n(519));function iu(u){var f=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mh(ma(f,u)),fw}function eS(u){var f=u.stateNode,p=u.type,g=u.memoizedProps;switch(f[Sr]=u,f[Tt]=g,p){case"dialog":Ct("cancel",f),Ct("close",f);break;case"iframe":case"object":case"embed":Ct("load",f);break;case"video":case"audio":for(p=0;p<qh.length;p++)Ct(qh[p],f);break;case"source":Ct("error",f);break;case"img":case"image":case"link":Ct("error",f),Ct("load",f);break;case"details":Ct("toggle",f);break;case"input":Ct("invalid",f),ah(f,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Ct("invalid",f);break;case"textarea":Ct("invalid",f),Mc(f,g.value,g.defaultValue,g.children)}p=g.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||g.suppressHydrationWarning===!0||g5(f.textContent,p)?(g.popover!=null&&(Ct("beforetoggle",f),Ct("toggle",f)),g.onScroll!=null&&Ct("scroll",f),g.onScrollEnd!=null&&Ct("scrollend",f),g.onClick!=null&&(f.onclick=Ka),f=!0):f=!1,f||iu(u,!0)}function tS(u){for(Bn=u.return;Bn;)switch(Bn.tag){case 5:case 31:case 13:ba=!1;return;case 27:case 3:ba=!0;return;default:Bn=Bn.return}}function nf(u){if(u!==Bn)return!1;if(!Dt)return tS(u),Dt=!0,!1;var f=u.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=u.type,p=!(p!=="form"&&p!=="button")||O2(u.type,u.memoizedProps)),p=!p),p&&br&&iu(u),tS(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));br=M5(u)}else if(f===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));br=M5(u)}else f===27?(f=br,vu(u.type)?(u=D2,D2=null,br=u):br=f):br=Bn?_a(u.stateNode.nextSibling):null;return!0}function Bc(){br=Bn=null,Dt=!1}function dw(){var u=nu;return u!==null&&(Di===null?Di=u:Di.push.apply(Di,u),nu=null),u}function mh(u){nu===null?nu=[u]:nu.push(u)}var hw=$(null),Ic=null,so=null;function au(u,f,p){ae(hw,f._currentValue),f._currentValue=p}function oo(u){u._currentValue=hw.current,te(hw)}function pw(u,f,p){for(;u!==null;){var g=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,g!==null&&(g.childLanes|=f)):g!==null&&(g.childLanes&f)!==f&&(g.childLanes|=f),u===p)break;u=u.return}}function yw(u,f,p,g){var O=u.child;for(O!==null&&(O.return=u);O!==null;){var I=O.dependencies;if(I!==null){var Q=O.child;I=I.firstContext;e:for(;I!==null;){var se=I;I=O;for(var ge=0;ge<f.length;ge++)if(se.context===f[ge]){I.lanes|=p,se=I.alternate,se!==null&&(se.lanes|=p),pw(I.return,p,u),g||(Q=null);break e}I=se.next}}else if(O.tag===18){if(Q=O.return,Q===null)throw Error(n(341));Q.lanes|=p,I=Q.alternate,I!==null&&(I.lanes|=p),pw(Q,p,u),Q=null}else Q=O.child;if(Q!==null)Q.return=O;else for(Q=O;Q!==null;){if(Q===u){Q=null;break}if(O=Q.sibling,O!==null){O.return=Q.return,Q=O;break}Q=Q.return}O=Q}}function af(u,f,p,g){u=null;for(var O=f,I=!1;O!==null;){if(!I){if((O.flags&524288)!==0)I=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var Q=O.alternate;if(Q===null)throw Error(n(387));if(Q=Q.memoizedProps,Q!==null){var se=O.type;Yi(O.pendingProps.value,Q.value)||(u!==null?u.push(se):u=[se])}}else if(O===ye.current){if(Q=O.alternate,Q===null)throw Error(n(387));Q.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(u!==null?u.push(zh):u=[zh])}O=O.return}u!==null&&yw(f,u,p,g),f.flags|=262144}function yy(u){for(u=u.firstContext;u!==null;){if(!Yi(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Dc(u){Ic=u,so=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function In(u){return rS(Ic,u)}function my(u,f){return Ic===null&&Dc(u),rS(u,f)}function rS(u,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},so===null){if(u===null)throw Error(n(308));so=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else so=so.next=f;return p}var Yq=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(p,g){u.push(g)}};this.abort=function(){f.aborted=!0,u.forEach(function(p){return p()})}},Qq=r.unstable_scheduleCallback,Jq=r.unstable_NormalPriority,rn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mw(){return{controller:new Yq,data:new Map,refCount:0}}function gh(u){u.refCount--,u.refCount===0&&Qq(Jq,function(){u.controller.abort()})}var vh=null,gw=0,sf=0,of=null;function Xq(u,f){if(vh===null){var p=vh=[];gw=0,sf=w2(),of={status:"pending",value:void 0,then:function(g){p.push(g)}}}return gw++,f.then(nS,nS),f}function nS(){if(--gw===0&&vh!==null){of!==null&&(of.status="fulfilled");var u=vh;vh=null,sf=0,of=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function eL(u,f){var p=[],g={status:"pending",value:null,reason:null,then:function(O){p.push(O)}};return u.then(function(){g.status="fulfilled",g.value=f;for(var O=0;O<p.length;O++)(0,p[O])(f)},function(O){for(g.status="rejected",g.reason=O,O=0;O<p.length;O++)(0,p[O])(void 0)}),g}var iS=_.S;_.S=function(u,f){$4=Me(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&Xq(u,f),iS!==null&&iS(u,f)};var Pc=$(null);function vw(){var u=Pc.current;return u!==null?u:fr.pooledCache}function gy(u,f){f===null?ae(Pc,Pc.current):ae(Pc,f.pool)}function aS(){var u=vw();return u===null?null:{parent:rn._currentValue,pool:u}}var uf=Error(n(460)),bw=Error(n(474)),vy=Error(n(542)),by={then:function(){}};function sS(u){return u=u.status,u==="fulfilled"||u==="rejected"}function oS(u,f,p){switch(p=u[p],p===void 0?u.push(f):p!==f&&(f.then(Ka,Ka),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,cS(u),u;default:if(typeof f.status=="string")f.then(Ka,Ka);else{if(u=fr,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=f,u.status="pending",u.then(function(g){if(f.status==="pending"){var O=f;O.status="fulfilled",O.value=g}},function(g){if(f.status==="pending"){var O=f;O.status="rejected",O.reason=g}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,cS(u),u}throw kc=f,uf}}function Uc(u){try{var f=u._init;return f(u._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(kc=p,uf):p}}var kc=null;function uS(){if(kc===null)throw Error(n(459));var u=kc;return kc=null,u}function cS(u){if(u===uf||u===vy)throw Error(n(483))}var cf=null,bh=0;function wy(u){var f=bh;return bh+=1,cf===null&&(cf=[]),oS(cf,u,f)}function wh(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function _y(u,f){throw f.$$typeof===y?Error(n(525)):(u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function lS(u){function f(Ae,_e){if(u){var Re=Ae.deletions;Re===null?(Ae.deletions=[_e],Ae.flags|=16):Re.push(_e)}}function p(Ae,_e){if(!u)return null;for(;_e!==null;)f(Ae,_e),_e=_e.sibling;return null}function g(Ae){for(var _e=new Map;Ae!==null;)Ae.key!==null?_e.set(Ae.key,Ae):_e.set(Ae.index,Ae),Ae=Ae.sibling;return _e}function O(Ae,_e){return Ae=io(Ae,_e),Ae.index=0,Ae.sibling=null,Ae}function I(Ae,_e,Re){return Ae.index=Re,u?(Re=Ae.alternate,Re!==null?(Re=Re.index,Re<_e?(Ae.flags|=67108866,_e):Re):(Ae.flags|=67108866,_e)):(Ae.flags|=1048576,_e)}function Q(Ae){return u&&Ae.alternate===null&&(Ae.flags|=67108866),Ae}function se(Ae,_e,Re,je){return _e===null||_e.tag!==6?(_e=ow(Re,Ae.mode,je),_e.return=Ae,_e):(_e=O(_e,Re),_e.return=Ae,_e)}function ge(Ae,_e,Re,je){var dt=Re.type;return dt===v?qe(Ae,_e,Re.props.children,je,Re.key):_e!==null&&(_e.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===z&&Uc(dt)===_e.type)?(_e=O(_e,Re.props),wh(_e,Re),_e.return=Ae,_e):(_e=hy(Re.type,Re.key,Re.props,null,Ae.mode,je),wh(_e,Re),_e.return=Ae,_e)}function Oe(Ae,_e,Re,je){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==Re.containerInfo||_e.stateNode.implementation!==Re.implementation?(_e=uw(Re,Ae.mode,je),_e.return=Ae,_e):(_e=O(_e,Re.children||[]),_e.return=Ae,_e)}function qe(Ae,_e,Re,je,dt){return _e===null||_e.tag!==7?(_e=Nc(Re,Ae.mode,je,dt),_e.return=Ae,_e):(_e=O(_e,Re),_e.return=Ae,_e)}function Fe(Ae,_e,Re){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=ow(""+_e,Ae.mode,Re),_e.return=Ae,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case m:return Re=hy(_e.type,_e.key,_e.props,null,Ae.mode,Re),wh(Re,_e),Re.return=Ae,Re;case b:return _e=uw(_e,Ae.mode,Re),_e.return=Ae,_e;case z:return _e=Uc(_e),Fe(Ae,_e,Re)}if(S(_e)||M(_e))return _e=Nc(_e,Ae.mode,Re,null),_e.return=Ae,_e;if(typeof _e.then=="function")return Fe(Ae,wy(_e),Re);if(_e.$$typeof===N)return Fe(Ae,my(Ae,_e),Re);_y(Ae,_e)}return null}function Ne(Ae,_e,Re,je){var dt=_e!==null?_e.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return dt!==null?null:se(Ae,_e,""+Re,je);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case m:return Re.key===dt?ge(Ae,_e,Re,je):null;case b:return Re.key===dt?Oe(Ae,_e,Re,je):null;case z:return Re=Uc(Re),Ne(Ae,_e,Re,je)}if(S(Re)||M(Re))return dt!==null?null:qe(Ae,_e,Re,je,null);if(typeof Re.then=="function")return Ne(Ae,_e,wy(Re),je);if(Re.$$typeof===N)return Ne(Ae,_e,my(Ae,Re),je);_y(Ae,Re)}return null}function Ie(Ae,_e,Re,je,dt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return Ae=Ae.get(Re)||null,se(_e,Ae,""+je,dt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case m:return Ae=Ae.get(je.key===null?Re:je.key)||null,ge(_e,Ae,je,dt);case b:return Ae=Ae.get(je.key===null?Re:je.key)||null,Oe(_e,Ae,je,dt);case z:return je=Uc(je),Ie(Ae,_e,Re,je,dt)}if(S(je)||M(je))return Ae=Ae.get(Re)||null,qe(_e,Ae,je,dt,null);if(typeof je.then=="function")return Ie(Ae,_e,Re,wy(je),dt);if(je.$$typeof===N)return Ie(Ae,_e,Re,my(_e,je),dt);_y(_e,je)}return null}function st(Ae,_e,Re,je){for(var dt=null,zt=null,ut=_e,At=_e=0,Bt=null;ut!==null&&At<Re.length;At++){ut.index>At?(Bt=ut,ut=null):Bt=ut.sibling;var Vt=Ne(Ae,ut,Re[At],je);if(Vt===null){ut===null&&(ut=Bt);break}u&&ut&&Vt.alternate===null&&f(Ae,ut),_e=I(Vt,_e,At),zt===null?dt=Vt:zt.sibling=Vt,zt=Vt,ut=Bt}if(At===Re.length)return p(Ae,ut),Dt&&ao(Ae,At),dt;if(ut===null){for(;At<Re.length;At++)ut=Fe(Ae,Re[At],je),ut!==null&&(_e=I(ut,_e,At),zt===null?dt=ut:zt.sibling=ut,zt=ut);return Dt&&ao(Ae,At),dt}for(ut=g(ut);At<Re.length;At++)Bt=Ie(ut,Ae,At,Re[At],je),Bt!==null&&(u&&Bt.alternate!==null&&ut.delete(Bt.key===null?At:Bt.key),_e=I(Bt,_e,At),zt===null?dt=Bt:zt.sibling=Bt,zt=Bt);return u&&ut.forEach(function(xu){return f(Ae,xu)}),Dt&&ao(Ae,At),dt}function yt(Ae,_e,Re,je){if(Re==null)throw Error(n(151));for(var dt=null,zt=null,ut=_e,At=_e=0,Bt=null,Vt=Re.next();ut!==null&&!Vt.done;At++,Vt=Re.next()){ut.index>At?(Bt=ut,ut=null):Bt=ut.sibling;var xu=Ne(Ae,ut,Vt.value,je);if(xu===null){ut===null&&(ut=Bt);break}u&&ut&&xu.alternate===null&&f(Ae,ut),_e=I(xu,_e,At),zt===null?dt=xu:zt.sibling=xu,zt=xu,ut=Bt}if(Vt.done)return p(Ae,ut),Dt&&ao(Ae,At),dt;if(ut===null){for(;!Vt.done;At++,Vt=Re.next())Vt=Fe(Ae,Vt.value,je),Vt!==null&&(_e=I(Vt,_e,At),zt===null?dt=Vt:zt.sibling=Vt,zt=Vt);return Dt&&ao(Ae,At),dt}for(ut=g(ut);!Vt.done;At++,Vt=Re.next())Vt=Ie(ut,Ae,At,Vt.value,je),Vt!==null&&(u&&Vt.alternate!==null&&ut.delete(Vt.key===null?At:Vt.key),_e=I(Vt,_e,At),zt===null?dt=Vt:zt.sibling=Vt,zt=Vt);return u&&ut.forEach(function(fj){return f(Ae,fj)}),Dt&&ao(Ae,At),dt}function ar(Ae,_e,Re,je){if(typeof Re=="object"&&Re!==null&&Re.type===v&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case m:e:{for(var dt=Re.key;_e!==null;){if(_e.key===dt){if(dt=Re.type,dt===v){if(_e.tag===7){p(Ae,_e.sibling),je=O(_e,Re.props.children),je.return=Ae,Ae=je;break e}}else if(_e.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===z&&Uc(dt)===_e.type){p(Ae,_e.sibling),je=O(_e,Re.props),wh(je,Re),je.return=Ae,Ae=je;break e}p(Ae,_e);break}else f(Ae,_e);_e=_e.sibling}Re.type===v?(je=Nc(Re.props.children,Ae.mode,je,Re.key),je.return=Ae,Ae=je):(je=hy(Re.type,Re.key,Re.props,null,Ae.mode,je),wh(je,Re),je.return=Ae,Ae=je)}return Q(Ae);case b:e:{for(dt=Re.key;_e!==null;){if(_e.key===dt)if(_e.tag===4&&_e.stateNode.containerInfo===Re.containerInfo&&_e.stateNode.implementation===Re.implementation){p(Ae,_e.sibling),je=O(_e,Re.children||[]),je.return=Ae,Ae=je;break e}else{p(Ae,_e);break}else f(Ae,_e);_e=_e.sibling}je=uw(Re,Ae.mode,je),je.return=Ae,Ae=je}return Q(Ae);case z:return Re=Uc(Re),ar(Ae,_e,Re,je)}if(S(Re))return st(Ae,_e,Re,je);if(M(Re)){if(dt=M(Re),typeof dt!="function")throw Error(n(150));return Re=dt.call(Re),yt(Ae,_e,Re,je)}if(typeof Re.then=="function")return ar(Ae,_e,wy(Re),je);if(Re.$$typeof===N)return ar(Ae,_e,my(Ae,Re),je);_y(Ae,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint"?(Re=""+Re,_e!==null&&_e.tag===6?(p(Ae,_e.sibling),je=O(_e,Re),je.return=Ae,Ae=je):(p(Ae,_e),je=ow(Re,Ae.mode,je),je.return=Ae,Ae=je),Q(Ae)):p(Ae,_e)}return function(Ae,_e,Re,je){try{bh=0;var dt=ar(Ae,_e,Re,je);return cf=null,dt}catch(ut){if(ut===uf||ut===vy)throw ut;var zt=Qi(29,ut,null,Ae.mode);return zt.lanes=je,zt.return=Ae,zt}}}var qc=lS(!0),fS=lS(!1),su=!1;function ww(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _w(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function ou(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function uu(u,f,p){var g=u.updateQueue;if(g===null)return null;if(g=g.shared,(Gt&2)!==0){var O=g.pending;return O===null?f.next=f:(f.next=O.next,O.next=f),g.pending=f,f=dy(u),W6(u,null,p),f}return fy(u,g,f,p),dy(u)}function _h(u,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var g=f.lanes;g&=u.pendingLanes,p|=g,f.lanes=p,ur(u,p)}}function Ew(u,f){var p=u.updateQueue,g=u.alternate;if(g!==null&&(g=g.updateQueue,p===g)){var O=null,I=null;if(p=p.firstBaseUpdate,p!==null){do{var Q={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};I===null?O=I=Q:I=I.next=Q,p=p.next}while(p!==null);I===null?O=I=f:I=I.next=f}else O=I=f;p={baseState:g.baseState,firstBaseUpdate:O,lastBaseUpdate:I,shared:g.shared,callbacks:g.callbacks},u.updateQueue=p;return}u=p.lastBaseUpdate,u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=f}var xw=!1;function Eh(){if(xw){var u=of;if(u!==null)throw u}}function xh(u,f,p,g){xw=!1;var O=u.updateQueue;su=!1;var I=O.firstBaseUpdate,Q=O.lastBaseUpdate,se=O.shared.pending;if(se!==null){O.shared.pending=null;var ge=se,Oe=ge.next;ge.next=null,Q===null?I=Oe:Q.next=Oe,Q=ge;var qe=u.alternate;qe!==null&&(qe=qe.updateQueue,se=qe.lastBaseUpdate,se!==Q&&(se===null?qe.firstBaseUpdate=Oe:se.next=Oe,qe.lastBaseUpdate=ge))}if(I!==null){var Fe=O.baseState;Q=0,qe=Oe=ge=null,se=I;do{var Ne=se.lane&-536870913,Ie=Ne!==se.lane;if(Ie?(Nt&Ne)===Ne:(g&Ne)===Ne){Ne!==0&&Ne===sf&&(xw=!0),qe!==null&&(qe=qe.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var st=u,yt=se;Ne=f;var ar=p;switch(yt.tag){case 1:if(st=yt.payload,typeof st=="function"){Fe=st.call(ar,Fe,Ne);break e}Fe=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=yt.payload,Ne=typeof st=="function"?st.call(ar,Fe,Ne):st,Ne==null)break e;Fe=h({},Fe,Ne);break e;case 2:su=!0}}Ne=se.callback,Ne!==null&&(u.flags|=64,Ie&&(u.flags|=8192),Ie=O.callbacks,Ie===null?O.callbacks=[Ne]:Ie.push(Ne))}else Ie={lane:Ne,tag:se.tag,payload:se.payload,callback:se.callback,next:null},qe===null?(Oe=qe=Ie,ge=Fe):qe=qe.next=Ie,Q|=Ne;if(se=se.next,se===null){if(se=O.shared.pending,se===null)break;Ie=se,se=Ie.next,Ie.next=null,O.lastBaseUpdate=Ie,O.shared.pending=null}}while(!0);qe===null&&(ge=Fe),O.baseState=ge,O.firstBaseUpdate=Oe,O.lastBaseUpdate=qe,I===null&&(O.shared.lanes=0),hu|=Q,u.lanes=Q,u.memoizedState=Fe}}function dS(u,f){if(typeof u!="function")throw Error(n(191,u));u.call(f)}function hS(u,f){var p=u.callbacks;if(p!==null)for(u.callbacks=null,u=0;u<p.length;u++)dS(p[u],f)}var lf=$(null),Ey=$(0);function pS(u,f){u=go,ae(Ey,u),ae(lf,f),go=u|f.baseLanes}function Aw(){ae(Ey,go),ae(lf,lf.current)}function Sw(){go=Ey.current,te(lf),te(Ey)}var Ji=$(null),wa=null;function cu(u){var f=u.alternate;ae(Kr,Kr.current&1),ae(Ji,u),wa===null&&(f===null||lf.current!==null||f.memoizedState!==null)&&(wa=u)}function Mw(u){ae(Kr,Kr.current),ae(Ji,u),wa===null&&(wa=u)}function yS(u){u.tag===22?(ae(Kr,Kr.current),ae(Ji,u),wa===null&&(wa=u)):lu()}function lu(){ae(Kr,Kr.current),ae(Ji,Ji.current)}function Xi(u){te(Ji),wa===u&&(wa=null),te(Kr)}var Kr=$(0);function xy(u){for(var f=u;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||B2(p)||I2(p)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var uo=0,Et=null,nr=null,nn=null,Ay=!1,ff=!1,Lc=!1,Sy=0,Ah=0,df=null,tL=0;function kr(){throw Error(n(321))}function Tw(u,f){if(f===null)return!1;for(var p=0;p<f.length&&p<u.length;p++)if(!Yi(u[p],f[p]))return!1;return!0}function Rw(u,f,p,g,O,I){return uo=I,Et=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,_.H=u===null||u.memoizedState===null?JS:zw,Lc=!1,I=p(g,O),Lc=!1,ff&&(I=gS(f,p,g,O)),mS(u),I}function mS(u){_.H=Th;var f=nr!==null&&nr.next!==null;if(uo=0,nn=nr=Et=null,Ay=!1,Ah=0,df=null,f)throw Error(n(300));u===null||an||(u=u.dependencies,u!==null&&yy(u)&&(an=!0))}function gS(u,f,p,g){Et=u;var O=0;do{if(ff&&(df=null),Ah=0,ff=!1,25<=O)throw Error(n(301));if(O+=1,nn=nr=null,u.updateQueue!=null){var I=u.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}_.H=XS,I=f(p,g)}while(ff);return I}function rL(){var u=_.H,f=u.useState()[0];return f=typeof f.then=="function"?Sh(f):f,u=u.useState()[0],(nr!==null?nr.memoizedState:null)!==u&&(Et.flags|=1024),f}function Ow(){var u=Sy!==0;return Sy=0,u}function Cw(u,f,p){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~p}function Nw(u){if(Ay){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Ay=!1}uo=0,nn=nr=Et=null,ff=!1,Ah=Sy=0,df=null}function fi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Et.memoizedState=nn=u:nn=nn.next=u,nn}function Gr(){if(nr===null){var u=Et.alternate;u=u!==null?u.memoizedState:null}else u=nr.next;var f=nn===null?Et.memoizedState:nn.next;if(f!==null)nn=f,nr=u;else{if(u===null)throw Et.alternate===null?Error(n(467)):Error(n(310));nr=u,u={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},nn===null?Et.memoizedState=nn=u:nn=nn.next=u}return nn}function My(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Sh(u){var f=Ah;return Ah+=1,df===null&&(df=[]),u=oS(df,u,f),f=Et,(nn===null?f.memoizedState:nn.next)===null&&(f=f.alternate,_.H=f===null||f.memoizedState===null?JS:zw),u}function Ty(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Sh(u);if(u.$$typeof===N)return In(u)}throw Error(n(438,String(u)))}function Bw(u){var f=null,p=Et.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var g=Et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(f={data:g.data.map(function(O){return O.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=My(),Et.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(u),g=0;g<u;g++)p[g]=Y;return f.index++,p}function co(u,f){return typeof f=="function"?f(u):f}function Ry(u){var f=Gr();return Iw(f,nr,u)}function Iw(u,f,p){var g=u.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=p;var O=u.baseQueue,I=g.pending;if(I!==null){if(O!==null){var Q=O.next;O.next=I.next,I.next=Q}f.baseQueue=O=I,g.pending=null}if(I=u.baseState,O===null)u.memoizedState=I;else{f=O.next;var se=Q=null,ge=null,Oe=f,qe=!1;do{var Fe=Oe.lane&-536870913;if(Fe!==Oe.lane?(Nt&Fe)===Fe:(uo&Fe)===Fe){var Ne=Oe.revertLane;if(Ne===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),Fe===sf&&(qe=!0);else if((uo&Ne)===Ne){Oe=Oe.next,Ne===sf&&(qe=!0);continue}else Fe={lane:0,revertLane:Oe.revertLane,gesture:null,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ge===null?(se=ge=Fe,Q=I):ge=ge.next=Fe,Et.lanes|=Ne,hu|=Ne;Fe=Oe.action,Lc&&p(I,Fe),I=Oe.hasEagerState?Oe.eagerState:p(I,Fe)}else Ne={lane:Fe,revertLane:Oe.revertLane,gesture:Oe.gesture,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},ge===null?(se=ge=Ne,Q=I):ge=ge.next=Ne,Et.lanes|=Fe,hu|=Fe;Oe=Oe.next}while(Oe!==null&&Oe!==f);if(ge===null?Q=I:ge.next=se,!Yi(I,u.memoizedState)&&(an=!0,qe&&(p=of,p!==null)))throw p;u.memoizedState=I,u.baseState=Q,u.baseQueue=ge,g.lastRenderedState=I}return O===null&&(g.lanes=0),[u.memoizedState,g.dispatch]}function Dw(u){var f=Gr(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=u;var g=p.dispatch,O=p.pending,I=f.memoizedState;if(O!==null){p.pending=null;var Q=O=O.next;do I=u(I,Q.action),Q=Q.next;while(Q!==O);Yi(I,f.memoizedState)||(an=!0),f.memoizedState=I,f.baseQueue===null&&(f.baseState=I),p.lastRenderedState=I}return[I,g]}function vS(u,f,p){var g=Et,O=Gr(),I=Dt;if(I){if(p===void 0)throw Error(n(407));p=p()}else p=f();var Q=!Yi((nr||O).memoizedState,p);if(Q&&(O.memoizedState=p,an=!0),O=O.queue,kw(_S.bind(null,g,O,u),[u]),O.getSnapshot!==f||Q||nn!==null&&nn.memoizedState.tag&1){if(g.flags|=2048,hf(9,{destroy:void 0},wS.bind(null,g,O,p,f),null),fr===null)throw Error(n(349));I||(uo&127)!==0||bS(g,f,p)}return p}function bS(u,f,p){u.flags|=16384,u={getSnapshot:f,value:p},f=Et.updateQueue,f===null?(f=My(),Et.updateQueue=f,f.stores=[u]):(p=f.stores,p===null?f.stores=[u]:p.push(u))}function wS(u,f,p,g){f.value=p,f.getSnapshot=g,ES(f)&&xS(u)}function _S(u,f,p){return p(function(){ES(f)&&xS(u)})}function ES(u){var f=u.getSnapshot;u=u.value;try{var p=f();return!Yi(u,p)}catch{return!0}}function xS(u){var f=Cc(u,2);f!==null&&Pi(f,u,2)}function Pw(u){var f=fi();if(typeof u=="function"){var p=u;if(u=p(),Lc){Ue(!0);try{p()}finally{Ue(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:u},f}function AS(u,f,p,g){return u.baseState=p,Iw(u,nr,typeof g=="function"?g:co)}function nL(u,f,p,g,O){if(Ny(u))throw Error(n(485));if(u=f.action,u!==null){var I={payload:O,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){I.listeners.push(Q)}};_.T!==null?p(!0):I.isTransition=!1,g(I),p=f.pending,p===null?(I.next=f.pending=I,SS(f,I)):(I.next=p.next,f.pending=p.next=I)}}function SS(u,f){var p=f.action,g=f.payload,O=u.state;if(f.isTransition){var I=_.T,Q={};_.T=Q;try{var se=p(O,g),ge=_.S;ge!==null&&ge(Q,se),MS(u,f,se)}catch(Oe){Uw(u,f,Oe)}finally{I!==null&&Q.types!==null&&(I.types=Q.types),_.T=I}}else try{I=p(O,g),MS(u,f,I)}catch(Oe){Uw(u,f,Oe)}}function MS(u,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(g){TS(u,f,g)},function(g){return Uw(u,f,g)}):TS(u,f,p)}function TS(u,f,p){f.status="fulfilled",f.value=p,RS(f),u.state=p,f=u.pending,f!==null&&(p=f.next,p===f?u.pending=null:(p=p.next,f.next=p,SS(u,p)))}function Uw(u,f,p){var g=u.pending;if(u.pending=null,g!==null){g=g.next;do f.status="rejected",f.reason=p,RS(f),f=f.next;while(f!==g)}u.action=null}function RS(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function OS(u,f){return f}function CS(u,f){if(Dt){var p=fr.formState;if(p!==null){e:{var g=Et;if(Dt){if(br){t:{for(var O=br,I=ba;O.nodeType!==8;){if(!I){O=null;break t}if(O=_a(O.nextSibling),O===null){O=null;break t}}I=O.data,O=I==="F!"||I==="F"?O:null}if(O){br=_a(O.nextSibling),g=O.data==="F!";break e}}iu(g)}g=!1}g&&(f=p[0])}}return p=fi(),p.memoizedState=p.baseState=f,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OS,lastRenderedState:f},p.queue=g,p=ZS.bind(null,Et,g),g.dispatch=p,g=Pw(!1),I=Fw.bind(null,Et,!1,g.queue),g=fi(),O={state:f,dispatch:null,action:u,pending:null},g.queue=O,p=nL.bind(null,Et,O,I,p),O.dispatch=p,g.memoizedState=u,[f,p,!1]}function NS(u){var f=Gr();return BS(f,nr,u)}function BS(u,f,p){if(f=Iw(u,f,OS)[0],u=Ry(co)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var g=Sh(f)}catch(Q){throw Q===uf?vy:Q}else g=f;f=Gr();var O=f.queue,I=O.dispatch;return p!==f.memoizedState&&(Et.flags|=2048,hf(9,{destroy:void 0},iL.bind(null,O,p),null)),[g,I,u]}function iL(u,f){u.action=f}function IS(u){var f=Gr(),p=nr;if(p!==null)return BS(f,p,u);Gr(),f=f.memoizedState,p=Gr();var g=p.queue.dispatch;return p.memoizedState=u,[f,g,!1]}function hf(u,f,p,g){return u={tag:u,create:p,deps:g,inst:f,next:null},f=Et.updateQueue,f===null&&(f=My(),Et.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=u.next=u:(g=p.next,p.next=u,u.next=g,f.lastEffect=u),u}function DS(){return Gr().memoizedState}function Oy(u,f,p,g){var O=fi();Et.flags|=u,O.memoizedState=hf(1|f,{destroy:void 0},p,g===void 0?null:g)}function Cy(u,f,p,g){var O=Gr();g=g===void 0?null:g;var I=O.memoizedState.inst;nr!==null&&g!==null&&Tw(g,nr.memoizedState.deps)?O.memoizedState=hf(f,I,p,g):(Et.flags|=u,O.memoizedState=hf(1|f,I,p,g))}function PS(u,f){Oy(8390656,8,u,f)}function kw(u,f){Cy(2048,8,u,f)}function aL(u){Et.flags|=4;var f=Et.updateQueue;if(f===null)f=My(),Et.updateQueue=f,f.events=[u];else{var p=f.events;p===null?f.events=[u]:p.push(u)}}function US(u){var f=Gr().memoizedState;return aL({ref:f,nextImpl:u}),function(){if((Gt&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}function kS(u,f){return Cy(4,2,u,f)}function qS(u,f){return Cy(4,4,u,f)}function LS(u,f){if(typeof f=="function"){u=u();var p=f(u);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function jS(u,f,p){p=p!=null?p.concat([u]):null,Cy(4,4,LS.bind(null,f,u),p)}function qw(){}function $S(u,f){var p=Gr();f=f===void 0?null:f;var g=p.memoizedState;return f!==null&&Tw(f,g[1])?g[0]:(p.memoizedState=[u,f],u)}function FS(u,f){var p=Gr();f=f===void 0?null:f;var g=p.memoizedState;if(f!==null&&Tw(f,g[1]))return g[0];if(g=u(),Lc){Ue(!0);try{u()}finally{Ue(!1)}}return p.memoizedState=[g,f],g}function Lw(u,f,p){return p===void 0||(uo&1073741824)!==0&&(Nt&261930)===0?u.memoizedState=f:(u.memoizedState=p,u=z4(),Et.lanes|=u,hu|=u,p)}function zS(u,f,p,g){return Yi(p,f)?p:lf.current!==null?(u=Lw(u,p,g),Yi(u,f)||(an=!0),u):(uo&42)===0||(uo&1073741824)!==0&&(Nt&261930)===0?(an=!0,u.memoizedState=p):(u=z4(),Et.lanes|=u,hu|=u,f)}function VS(u,f,p,g,O){var I=U.p;U.p=I!==0&&8>I?I:8;var Q=_.T,se={};_.T=se,Fw(u,!1,f,p);try{var ge=O(),Oe=_.S;if(Oe!==null&&Oe(se,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var qe=eL(ge,g);Mh(u,f,qe,ra(u))}else Mh(u,f,g,ra(u))}catch(Fe){Mh(u,f,{then:function(){},status:"rejected",reason:Fe},ra())}finally{U.p=I,Q!==null&&se.types!==null&&(Q.types=se.types),_.T=Q}}function sL(){}function jw(u,f,p,g){if(u.tag!==5)throw Error(n(476));var O=HS(u).queue;VS(u,O,f,H,p===null?sL:function(){return KS(u),p(g)})}function HS(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:H},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:p},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function KS(u){var f=HS(u);f.next===null&&(f=u.alternate.memoizedState),Mh(u,f.next.queue,{},ra())}function $w(){return In(zh)}function GS(){return Gr().memoizedState}function WS(){return Gr().memoizedState}function oL(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var p=ra();u=ou(p);var g=uu(f,u,p);g!==null&&(Pi(g,f,p),_h(g,f,p)),f={cache:mw()},u.payload=f;return}f=f.return}}function uL(u,f,p){var g=ra();p={lane:g,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ny(u)?YS(f,p):(p=aw(u,f,p,g),p!==null&&(Pi(p,u,g),QS(p,f,g)))}function ZS(u,f,p){var g=ra();Mh(u,f,p,g)}function Mh(u,f,p,g){var O={lane:g,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ny(u))YS(f,O);else{var I=u.alternate;if(u.lanes===0&&(I===null||I.lanes===0)&&(I=f.lastRenderedReducer,I!==null))try{var Q=f.lastRenderedState,se=I(Q,p);if(O.hasEagerState=!0,O.eagerState=se,Yi(se,Q))return fy(u,f,O,0),fr===null&&ly(),!1}catch{}if(p=aw(u,f,O,g),p!==null)return Pi(p,u,g),QS(p,f,g),!0}return!1}function Fw(u,f,p,g){if(g={lane:2,revertLane:w2(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ny(u)){if(f)throw Error(n(479))}else f=aw(u,p,g,2),f!==null&&Pi(f,u,2)}function Ny(u){var f=u.alternate;return u===Et||f!==null&&f===Et}function YS(u,f){ff=Ay=!0;var p=u.pending;p===null?f.next=f:(f.next=p.next,p.next=f),u.pending=f}function QS(u,f,p){if((p&4194048)!==0){var g=f.lanes;g&=u.pendingLanes,p|=g,f.lanes=p,ur(u,p)}}var Th={readContext:In,use:Ty,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useInsertionEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useSyncExternalStore:kr,useId:kr,useHostTransitionStatus:kr,useFormState:kr,useActionState:kr,useOptimistic:kr,useMemoCache:kr,useCacheRefresh:kr};Th.useEffectEvent=kr;var JS={readContext:In,use:Ty,useCallback:function(u,f){return fi().memoizedState=[u,f===void 0?null:f],u},useContext:In,useEffect:PS,useImperativeHandle:function(u,f,p){p=p!=null?p.concat([u]):null,Oy(4194308,4,LS.bind(null,f,u),p)},useLayoutEffect:function(u,f){return Oy(4194308,4,u,f)},useInsertionEffect:function(u,f){Oy(4,2,u,f)},useMemo:function(u,f){var p=fi();f=f===void 0?null:f;var g=u();if(Lc){Ue(!0);try{u()}finally{Ue(!1)}}return p.memoizedState=[g,f],g},useReducer:function(u,f,p){var g=fi();if(p!==void 0){var O=p(f);if(Lc){Ue(!0);try{p(f)}finally{Ue(!1)}}}else O=f;return g.memoizedState=g.baseState=O,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:O},g.queue=u,u=u.dispatch=uL.bind(null,Et,u),[g.memoizedState,u]},useRef:function(u){var f=fi();return u={current:u},f.memoizedState=u},useState:function(u){u=Pw(u);var f=u.queue,p=ZS.bind(null,Et,f);return f.dispatch=p,[u.memoizedState,p]},useDebugValue:qw,useDeferredValue:function(u,f){var p=fi();return Lw(p,u,f)},useTransition:function(){var u=Pw(!1);return u=VS.bind(null,Et,u.queue,!0,!1),fi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,p){var g=Et,O=fi();if(Dt){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),fr===null)throw Error(n(349));(Nt&127)!==0||bS(g,f,p)}O.memoizedState=p;var I={value:p,getSnapshot:f};return O.queue=I,PS(_S.bind(null,g,I,u),[u]),g.flags|=2048,hf(9,{destroy:void 0},wS.bind(null,g,I,p,f),null),p},useId:function(){var u=fi(),f=fr.identifierPrefix;if(Dt){var p=gs,g=ms;p=(g&~(1<<32-pe(g)-1)).toString(32)+p,f="_"+f+"R_"+p,p=Sy++,0<p&&(f+="H"+p.toString(32)),f+="_"}else p=tL++,f="_"+f+"r_"+p.toString(32)+"_";return u.memoizedState=f},useHostTransitionStatus:$w,useFormState:CS,useActionState:CS,useOptimistic:function(u){var f=fi();f.memoizedState=f.baseState=u;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=Fw.bind(null,Et,!0,p),p.dispatch=f,[u,f]},useMemoCache:Bw,useCacheRefresh:function(){return fi().memoizedState=oL.bind(null,Et)},useEffectEvent:function(u){var f=fi(),p={impl:u};return f.memoizedState=p,function(){if((Gt&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},zw={readContext:In,use:Ty,useCallback:$S,useContext:In,useEffect:kw,useImperativeHandle:jS,useInsertionEffect:kS,useLayoutEffect:qS,useMemo:FS,useReducer:Ry,useRef:DS,useState:function(){return Ry(co)},useDebugValue:qw,useDeferredValue:function(u,f){var p=Gr();return zS(p,nr.memoizedState,u,f)},useTransition:function(){var u=Ry(co)[0],f=Gr().memoizedState;return[typeof u=="boolean"?u:Sh(u),f]},useSyncExternalStore:vS,useId:GS,useHostTransitionStatus:$w,useFormState:NS,useActionState:NS,useOptimistic:function(u,f){var p=Gr();return AS(p,nr,u,f)},useMemoCache:Bw,useCacheRefresh:WS};zw.useEffectEvent=US;var XS={readContext:In,use:Ty,useCallback:$S,useContext:In,useEffect:kw,useImperativeHandle:jS,useInsertionEffect:kS,useLayoutEffect:qS,useMemo:FS,useReducer:Dw,useRef:DS,useState:function(){return Dw(co)},useDebugValue:qw,useDeferredValue:function(u,f){var p=Gr();return nr===null?Lw(p,u,f):zS(p,nr.memoizedState,u,f)},useTransition:function(){var u=Dw(co)[0],f=Gr().memoizedState;return[typeof u=="boolean"?u:Sh(u),f]},useSyncExternalStore:vS,useId:GS,useHostTransitionStatus:$w,useFormState:IS,useActionState:IS,useOptimistic:function(u,f){var p=Gr();return nr!==null?AS(p,nr,u,f):(p.baseState=u,[u,p.queue.dispatch])},useMemoCache:Bw,useCacheRefresh:WS};XS.useEffectEvent=US;function Vw(u,f,p,g){f=u.memoizedState,p=p(g,f),p=p==null?f:h({},f,p),u.memoizedState=p,u.lanes===0&&(u.updateQueue.baseState=p)}var Hw={enqueueSetState:function(u,f,p){u=u._reactInternals;var g=ra(),O=ou(g);O.payload=f,p!=null&&(O.callback=p),f=uu(u,O,g),f!==null&&(Pi(f,u,g),_h(f,u,g))},enqueueReplaceState:function(u,f,p){u=u._reactInternals;var g=ra(),O=ou(g);O.tag=1,O.payload=f,p!=null&&(O.callback=p),f=uu(u,O,g),f!==null&&(Pi(f,u,g),_h(f,u,g))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var p=ra(),g=ou(p);g.tag=2,f!=null&&(g.callback=f),f=uu(u,g,p),f!==null&&(Pi(f,u,p),_h(f,u,p))}};function e4(u,f,p,g,O,I,Q){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(g,I,Q):f.prototype&&f.prototype.isPureReactComponent?!hh(p,g)||!hh(O,I):!0}function t4(u,f,p,g){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,g),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,g),f.state!==u&&Hw.enqueueReplaceState(f,f.state,null)}function jc(u,f){var p=f;if("ref"in f){p={};for(var g in f)g!=="ref"&&(p[g]=f[g])}if(u=u.defaultProps){p===f&&(p=h({},p));for(var O in u)p[O]===void 0&&(p[O]=u[O])}return p}function r4(u){cy(u)}function n4(u){console.error(u)}function i4(u){cy(u)}function By(u,f){try{var p=u.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(g){setTimeout(function(){throw g})}}function a4(u,f,p){try{var g=u.onCaughtError;g(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function Kw(u,f,p){return p=ou(p),p.tag=3,p.payload={element:null},p.callback=function(){By(u,f)},p}function s4(u){return u=ou(u),u.tag=3,u}function o4(u,f,p,g){var O=p.type.getDerivedStateFromError;if(typeof O=="function"){var I=g.value;u.payload=function(){return O(I)},u.callback=function(){a4(f,p,g)}}var Q=p.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(u.callback=function(){a4(f,p,g),typeof O!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var se=g.stack;this.componentDidCatch(g.value,{componentStack:se!==null?se:""})})}function cL(u,f,p,g,O){if(p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(f=p.alternate,f!==null&&af(f,p,O,!0),p=Ji.current,p!==null){switch(p.tag){case 31:case 13:return wa===null?Vy():p.alternate===null&&qr===0&&(qr=3),p.flags&=-257,p.flags|=65536,p.lanes=O,g===by?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([g]):f.add(g),g2(u,g,O)),!1;case 22:return p.flags|=65536,g===by?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([g])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([g]):p.add(g)),g2(u,g,O)),!1}throw Error(n(435,p.tag))}return g2(u,g,O),Vy(),!1}if(Dt)return f=Ji.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=O,g!==fw&&(u=Error(n(422),{cause:g}),mh(ma(u,p)))):(g!==fw&&(f=Error(n(423),{cause:g}),mh(ma(f,p))),u=u.current.alternate,u.flags|=65536,O&=-O,u.lanes|=O,g=ma(g,p),O=Kw(u.stateNode,g,O),Ew(u,O),qr!==4&&(qr=2)),!1;var I=Error(n(520),{cause:g});if(I=ma(I,p),Ph===null?Ph=[I]:Ph.push(I),qr!==4&&(qr=2),f===null)return!0;g=ma(g,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,u=O&-O,p.lanes|=u,u=Kw(p.stateNode,g,u),Ew(p,u),!1;case 1:if(f=p.type,I=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(pu===null||!pu.has(I))))return p.flags|=65536,O&=-O,p.lanes|=O,O=s4(O),o4(O,u,p,g),Ew(p,O),!1}p=p.return}while(p!==null);return!1}var Gw=Error(n(461)),an=!1;function Dn(u,f,p,g){f.child=u===null?fS(f,null,p,g):qc(f,u.child,p,g)}function u4(u,f,p,g,O){p=p.render;var I=f.ref;if("ref"in g){var Q={};for(var se in g)se!=="ref"&&(Q[se]=g[se])}else Q=g;return Dc(f),g=Rw(u,f,p,Q,I,O),se=Ow(),u!==null&&!an?(Cw(u,f,O),lo(u,f,O)):(Dt&&se&&cw(f),f.flags|=1,Dn(u,f,g,O),f.child)}function c4(u,f,p,g,O){if(u===null){var I=p.type;return typeof I=="function"&&!sw(I)&&I.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=I,l4(u,f,I,g,O)):(u=hy(p.type,null,g,f,f.mode,O),u.ref=f.ref,u.return=f,f.child=u)}if(I=u.child,!t2(u,O)){var Q=I.memoizedProps;if(p=p.compare,p=p!==null?p:hh,p(Q,g)&&u.ref===f.ref)return lo(u,f,O)}return f.flags|=1,u=io(I,g),u.ref=f.ref,u.return=f,f.child=u}function l4(u,f,p,g,O){if(u!==null){var I=u.memoizedProps;if(hh(I,g)&&u.ref===f.ref)if(an=!1,f.pendingProps=g=I,t2(u,O))(u.flags&131072)!==0&&(an=!0);else return f.lanes=u.lanes,lo(u,f,O)}return Ww(u,f,p,g,O)}function f4(u,f,p,g){var O=g.children,I=u!==null?u.memoizedState:null;if(u===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((f.flags&128)!==0){if(I=I!==null?I.baseLanes|p:p,u!==null){for(g=f.child=u.child,O=0;g!==null;)O=O|g.lanes|g.childLanes,g=g.sibling;g=O&~I}else g=0,f.child=null;return d4(u,f,I,p,g)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&gy(f,I!==null?I.cachePool:null),I!==null?pS(f,I):Aw(),yS(f);else return g=f.lanes=536870912,d4(u,f,I!==null?I.baseLanes|p:p,p,g)}else I!==null?(gy(f,I.cachePool),pS(f,I),lu(),f.memoizedState=null):(u!==null&&gy(f,null),Aw(),lu());return Dn(u,f,O,p),f.child}function Rh(u,f){return u!==null&&u.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function d4(u,f,p,g,O){var I=vw();return I=I===null?null:{parent:rn._currentValue,pool:I},f.memoizedState={baseLanes:p,cachePool:I},u!==null&&gy(f,null),Aw(),yS(f),u!==null&&af(u,f,g,!0),f.childLanes=O,null}function Iy(u,f){return f=Py({mode:f.mode,children:f.children},u.mode),f.ref=u.ref,u.child=f,f.return=u,f}function h4(u,f,p){return qc(f,u.child,null,p),u=Iy(f,f.pendingProps),u.flags|=2,Xi(f),f.memoizedState=null,u}function lL(u,f,p){var g=f.pendingProps,O=(f.flags&128)!==0;if(f.flags&=-129,u===null){if(Dt){if(g.mode==="hidden")return u=Iy(f,g),f.lanes=536870912,Rh(null,u);if(Mw(f),(u=br)?(u=S5(u,ba),u=u!==null&&u.data==="&"?u:null,u!==null&&(f.memoizedState={dehydrated:u,treeContext:ru!==null?{id:ms,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},p=Y6(u),p.return=f,f.child=p,Bn=f,br=null)):u=null,u===null)throw iu(f);return f.lanes=536870912,null}return Iy(f,g)}var I=u.memoizedState;if(I!==null){var Q=I.dehydrated;if(Mw(f),O)if(f.flags&256)f.flags&=-257,f=h4(u,f,p);else if(f.memoizedState!==null)f.child=u.child,f.flags|=128,f=null;else throw Error(n(558));else if(an||af(u,f,p,!1),O=(p&u.childLanes)!==0,an||O){if(g=fr,g!==null&&(Q=eo(g,p),Q!==0&&Q!==I.retryLane))throw I.retryLane=Q,Cc(u,Q),Pi(g,u,Q),Gw;Vy(),f=h4(u,f,p)}else u=I.treeContext,br=_a(Q.nextSibling),Bn=f,Dt=!0,nu=null,ba=!1,u!==null&&X6(f,u),f=Iy(f,g),f.flags|=4096;return f}return u=io(u.child,{mode:g.mode,children:g.children}),u.ref=f.ref,f.child=u,u.return=f,u}function Dy(u,f){var p=f.ref;if(p===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(u===null||u.ref!==p)&&(f.flags|=4194816)}}function Ww(u,f,p,g,O){return Dc(f),p=Rw(u,f,p,g,void 0,O),g=Ow(),u!==null&&!an?(Cw(u,f,O),lo(u,f,O)):(Dt&&g&&cw(f),f.flags|=1,Dn(u,f,p,O),f.child)}function p4(u,f,p,g,O,I){return Dc(f),f.updateQueue=null,p=gS(f,g,p,O),mS(u),g=Ow(),u!==null&&!an?(Cw(u,f,I),lo(u,f,I)):(Dt&&g&&cw(f),f.flags|=1,Dn(u,f,p,I),f.child)}function y4(u,f,p,g,O){if(Dc(f),f.stateNode===null){var I=ef,Q=p.contextType;typeof Q=="object"&&Q!==null&&(I=In(Q)),I=new p(g,I),f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Hw,f.stateNode=I,I._reactInternals=f,I=f.stateNode,I.props=g,I.state=f.memoizedState,I.refs={},ww(f),Q=p.contextType,I.context=typeof Q=="object"&&Q!==null?In(Q):ef,I.state=f.memoizedState,Q=p.getDerivedStateFromProps,typeof Q=="function"&&(Vw(f,p,Q,g),I.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Q=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Q!==I.state&&Hw.enqueueReplaceState(I,I.state,null),xh(f,g,I,O),Eh(),I.state=f.memoizedState),typeof I.componentDidMount=="function"&&(f.flags|=4194308),g=!0}else if(u===null){I=f.stateNode;var se=f.memoizedProps,ge=jc(p,se);I.props=ge;var Oe=I.context,qe=p.contextType;Q=ef,typeof qe=="object"&&qe!==null&&(Q=In(qe));var Fe=p.getDerivedStateFromProps;qe=typeof Fe=="function"||typeof I.getSnapshotBeforeUpdate=="function",se=f.pendingProps!==se,qe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(se||Oe!==Q)&&t4(f,I,g,Q),su=!1;var Ne=f.memoizedState;I.state=Ne,xh(f,g,I,O),Eh(),Oe=f.memoizedState,se||Ne!==Oe||su?(typeof Fe=="function"&&(Vw(f,p,Fe,g),Oe=f.memoizedState),(ge=su||e4(f,p,ge,g,Ne,Oe,Q))?(qe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(f.flags|=4194308)):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=g,f.memoizedState=Oe),I.props=g,I.state=Oe,I.context=Q,g=ge):(typeof I.componentDidMount=="function"&&(f.flags|=4194308),g=!1)}else{I=f.stateNode,_w(u,f),Q=f.memoizedProps,qe=jc(p,Q),I.props=qe,Fe=f.pendingProps,Ne=I.context,Oe=p.contextType,ge=ef,typeof Oe=="object"&&Oe!==null&&(ge=In(Oe)),se=p.getDerivedStateFromProps,(Oe=typeof se=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Q!==Fe||Ne!==ge)&&t4(f,I,g,ge),su=!1,Ne=f.memoizedState,I.state=Ne,xh(f,g,I,O),Eh();var Ie=f.memoizedState;Q!==Fe||Ne!==Ie||su||u!==null&&u.dependencies!==null&&yy(u.dependencies)?(typeof se=="function"&&(Vw(f,p,se,g),Ie=f.memoizedState),(qe=su||e4(f,p,qe,g,Ne,Ie,ge)||u!==null&&u.dependencies!==null&&yy(u.dependencies))?(Oe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(g,Ie,ge),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(g,Ie,ge)),typeof I.componentDidUpdate=="function"&&(f.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof I.componentDidUpdate!="function"||Q===u.memoizedProps&&Ne===u.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===u.memoizedProps&&Ne===u.memoizedState||(f.flags|=1024),f.memoizedProps=g,f.memoizedState=Ie),I.props=g,I.state=Ie,I.context=ge,g=qe):(typeof I.componentDidUpdate!="function"||Q===u.memoizedProps&&Ne===u.memoizedState||(f.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===u.memoizedProps&&Ne===u.memoizedState||(f.flags|=1024),g=!1)}return I=g,Dy(u,f),g=(f.flags&128)!==0,I||g?(I=f.stateNode,p=g&&typeof p.getDerivedStateFromError!="function"?null:I.render(),f.flags|=1,u!==null&&g?(f.child=qc(f,u.child,null,O),f.child=qc(f,null,p,O)):Dn(u,f,p,O),f.memoizedState=I.state,u=f.child):u=lo(u,f,O),u}function m4(u,f,p,g){return Bc(),f.flags|=256,Dn(u,f,p,g),f.child}var Zw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yw(u){return{baseLanes:u,cachePool:aS()}}function Qw(u,f,p){return u=u!==null?u.childLanes&~p:0,f&&(u|=ta),u}function g4(u,f,p){var g=f.pendingProps,O=!1,I=(f.flags&128)!==0,Q;if((Q=I)||(Q=u!==null&&u.memoizedState===null?!1:(Kr.current&2)!==0),Q&&(O=!0,f.flags&=-129),Q=(f.flags&32)!==0,f.flags&=-33,u===null){if(Dt){if(O?cu(f):lu(),(u=br)?(u=S5(u,ba),u=u!==null&&u.data!=="&"?u:null,u!==null&&(f.memoizedState={dehydrated:u,treeContext:ru!==null?{id:ms,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},p=Y6(u),p.return=f,f.child=p,Bn=f,br=null)):u=null,u===null)throw iu(f);return I2(u)?f.lanes=32:f.lanes=536870912,null}var se=g.children;return g=g.fallback,O?(lu(),O=f.mode,se=Py({mode:"hidden",children:se},O),g=Nc(g,O,p,null),se.return=f,g.return=f,se.sibling=g,f.child=se,g=f.child,g.memoizedState=Yw(p),g.childLanes=Qw(u,Q,p),f.memoizedState=Zw,Rh(null,g)):(cu(f),Jw(f,se))}var ge=u.memoizedState;if(ge!==null&&(se=ge.dehydrated,se!==null)){if(I)f.flags&256?(cu(f),f.flags&=-257,f=Xw(u,f,p)):f.memoizedState!==null?(lu(),f.child=u.child,f.flags|=128,f=null):(lu(),se=g.fallback,O=f.mode,g=Py({mode:"visible",children:g.children},O),se=Nc(se,O,p,null),se.flags|=2,g.return=f,se.return=f,g.sibling=se,f.child=g,qc(f,u.child,null,p),g=f.child,g.memoizedState=Yw(p),g.childLanes=Qw(u,Q,p),f.memoizedState=Zw,f=Rh(null,g));else if(cu(f),I2(se)){if(Q=se.nextSibling&&se.nextSibling.dataset,Q)var Oe=Q.dgst;Q=Oe,g=Error(n(419)),g.stack="",g.digest=Q,mh({value:g,source:null,stack:null}),f=Xw(u,f,p)}else if(an||af(u,f,p,!1),Q=(p&u.childLanes)!==0,an||Q){if(Q=fr,Q!==null&&(g=eo(Q,p),g!==0&&g!==ge.retryLane))throw ge.retryLane=g,Cc(u,g),Pi(Q,u,g),Gw;B2(se)||Vy(),f=Xw(u,f,p)}else B2(se)?(f.flags|=192,f.child=u.child,f=null):(u=ge.treeContext,br=_a(se.nextSibling),Bn=f,Dt=!0,nu=null,ba=!1,u!==null&&X6(f,u),f=Jw(f,g.children),f.flags|=4096);return f}return O?(lu(),se=g.fallback,O=f.mode,ge=u.child,Oe=ge.sibling,g=io(ge,{mode:"hidden",children:g.children}),g.subtreeFlags=ge.subtreeFlags&65011712,Oe!==null?se=io(Oe,se):(se=Nc(se,O,p,null),se.flags|=2),se.return=f,g.return=f,g.sibling=se,f.child=g,Rh(null,g),g=f.child,se=u.child.memoizedState,se===null?se=Yw(p):(O=se.cachePool,O!==null?(ge=rn._currentValue,O=O.parent!==ge?{parent:ge,pool:ge}:O):O=aS(),se={baseLanes:se.baseLanes|p,cachePool:O}),g.memoizedState=se,g.childLanes=Qw(u,Q,p),f.memoizedState=Zw,Rh(u.child,g)):(cu(f),p=u.child,u=p.sibling,p=io(p,{mode:"visible",children:g.children}),p.return=f,p.sibling=null,u!==null&&(Q=f.deletions,Q===null?(f.deletions=[u],f.flags|=16):Q.push(u)),f.child=p,f.memoizedState=null,p)}function Jw(u,f){return f=Py({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function Py(u,f){return u=Qi(22,u,null,f),u.lanes=0,u}function Xw(u,f,p){return qc(f,u.child,null,p),u=Jw(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function v4(u,f,p){u.lanes|=f;var g=u.alternate;g!==null&&(g.lanes|=f),pw(u.return,f,p)}function e2(u,f,p,g,O,I){var Q=u.memoizedState;Q===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:g,tail:p,tailMode:O,treeForkCount:I}:(Q.isBackwards=f,Q.rendering=null,Q.renderingStartTime=0,Q.last=g,Q.tail=p,Q.tailMode=O,Q.treeForkCount=I)}function b4(u,f,p){var g=f.pendingProps,O=g.revealOrder,I=g.tail;g=g.children;var Q=Kr.current,se=(Q&2)!==0;if(se?(Q=Q&1|2,f.flags|=128):Q&=1,ae(Kr,Q),Dn(u,f,g,p),g=Dt?yh:0,!se&&u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&v4(u,p,f);else if(u.tag===19)v4(u,p,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(O){case"forwards":for(p=f.child,O=null;p!==null;)u=p.alternate,u!==null&&xy(u)===null&&(O=p),p=p.sibling;p=O,p===null?(O=f.child,f.child=null):(O=p.sibling,p.sibling=null),e2(f,!1,O,p,I,g);break;case"backwards":case"unstable_legacy-backwards":for(p=null,O=f.child,f.child=null;O!==null;){if(u=O.alternate,u!==null&&xy(u)===null){f.child=O;break}u=O.sibling,O.sibling=p,p=O,O=u}e2(f,!0,p,null,I,g);break;case"together":e2(f,!1,null,null,void 0,g);break;default:f.memoizedState=null}return f.child}function lo(u,f,p){if(u!==null&&(f.dependencies=u.dependencies),hu|=f.lanes,(p&f.childLanes)===0)if(u!==null){if(af(u,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,p=io(u,u.pendingProps),f.child=p,p.return=f;u.sibling!==null;)u=u.sibling,p=p.sibling=io(u,u.pendingProps),p.return=f;p.sibling=null}return f.child}function t2(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&yy(u)))}function fL(u,f,p){switch(f.tag){case 3:me(f,f.stateNode.containerInfo),au(f,rn,u.memoizedState.cache),Bc();break;case 27:case 5:we(f);break;case 4:me(f,f.stateNode.containerInfo);break;case 10:au(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,Mw(f),null;break;case 13:var g=f.memoizedState;if(g!==null)return g.dehydrated!==null?(cu(f),f.flags|=128,null):(p&f.child.childLanes)!==0?g4(u,f,p):(cu(f),u=lo(u,f,p),u!==null?u.sibling:null);cu(f);break;case 19:var O=(u.flags&128)!==0;if(g=(p&f.childLanes)!==0,g||(af(u,f,p,!1),g=(p&f.childLanes)!==0),O){if(g)return b4(u,f,p);f.flags|=128}if(O=f.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),ae(Kr,Kr.current),g)break;return null;case 22:return f.lanes=0,f4(u,f,p,f.pendingProps);case 24:au(f,rn,u.memoizedState.cache)}return lo(u,f,p)}function w4(u,f,p){if(u!==null)if(u.memoizedProps!==f.pendingProps)an=!0;else{if(!t2(u,p)&&(f.flags&128)===0)return an=!1,fL(u,f,p);an=(u.flags&131072)!==0}else an=!1,Dt&&(f.flags&1048576)!==0&&J6(f,yh,f.index);switch(f.lanes=0,f.tag){case 16:e:{var g=f.pendingProps;if(u=Uc(f.elementType),f.type=u,typeof u=="function")sw(u)?(g=jc(u,g),f.tag=1,f=y4(null,f,u,g,p)):(f.tag=0,f=Ww(null,f,u,g,p));else{if(u!=null){var O=u.$$typeof;if(O===B){f.tag=11,f=u4(null,f,u,g,p);break e}else if(O===T){f.tag=14,f=c4(null,f,u,g,p);break e}}throw f=R(u)||u,Error(n(306,f,""))}}return f;case 0:return Ww(u,f,f.type,f.pendingProps,p);case 1:return g=f.type,O=jc(g,f.pendingProps),y4(u,f,g,O,p);case 3:e:{if(me(f,f.stateNode.containerInfo),u===null)throw Error(n(387));g=f.pendingProps;var I=f.memoizedState;O=I.element,_w(u,f),xh(f,g,null,p);var Q=f.memoizedState;if(g=Q.cache,au(f,rn,g),g!==I.cache&&yw(f,[rn],p,!0),Eh(),g=Q.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:Q.cache},f.updateQueue.baseState=I,f.memoizedState=I,f.flags&256){f=m4(u,f,g,p);break e}else if(g!==O){O=ma(Error(n(424)),f),mh(O),f=m4(u,f,g,p);break e}else for(u=f.stateNode.containerInfo,u.nodeType===9?u=u.body:u=u.nodeName==="HTML"?u.ownerDocument.body:u,br=_a(u.firstChild),Bn=f,Dt=!0,nu=null,ba=!0,p=fS(f,null,g,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Bc(),g===O){f=lo(u,f,p);break e}Dn(u,f,g,p)}f=f.child}return f;case 26:return Dy(u,f),u===null?(p=N5(f.type,null,f.pendingProps,null))?f.memoizedState=p:Dt||(p=f.type,u=f.pendingProps,g=Qy(oe.current).createElement(p),g[Sr]=f,g[Tt]=u,Pn(g,p,u),gr(g),f.stateNode=g):f.memoizedState=N5(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return we(f),u===null&&Dt&&(g=f.stateNode=R5(f.type,f.pendingProps,oe.current),Bn=f,ba=!0,O=br,vu(f.type)?(D2=O,br=_a(g.firstChild)):br=O),Dn(u,f,f.pendingProps.children,p),Dy(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&Dt&&((O=g=br)&&(g=$L(g,f.type,f.pendingProps,ba),g!==null?(f.stateNode=g,Bn=f,br=_a(g.firstChild),ba=!1,O=!0):O=!1),O||iu(f)),we(f),O=f.type,I=f.pendingProps,Q=u!==null?u.memoizedProps:null,g=I.children,O2(O,I)?g=null:Q!==null&&O2(O,Q)&&(f.flags|=32),f.memoizedState!==null&&(O=Rw(u,f,rL,null,null,p),zh._currentValue=O),Dy(u,f),Dn(u,f,g,p),f.child;case 6:return u===null&&Dt&&((u=p=br)&&(p=FL(p,f.pendingProps,ba),p!==null?(f.stateNode=p,Bn=f,br=null,u=!0):u=!1),u||iu(f)),null;case 13:return g4(u,f,p);case 4:return me(f,f.stateNode.containerInfo),g=f.pendingProps,u===null?f.child=qc(f,null,g,p):Dn(u,f,g,p),f.child;case 11:return u4(u,f,f.type,f.pendingProps,p);case 7:return Dn(u,f,f.pendingProps,p),f.child;case 8:return Dn(u,f,f.pendingProps.children,p),f.child;case 12:return Dn(u,f,f.pendingProps.children,p),f.child;case 10:return g=f.pendingProps,au(f,f.type,g.value),Dn(u,f,g.children,p),f.child;case 9:return O=f.type._context,g=f.pendingProps.children,Dc(f),O=In(O),g=g(O),f.flags|=1,Dn(u,f,g,p),f.child;case 14:return c4(u,f,f.type,f.pendingProps,p);case 15:return l4(u,f,f.type,f.pendingProps,p);case 19:return b4(u,f,p);case 31:return lL(u,f,p);case 22:return f4(u,f,p,f.pendingProps);case 24:return Dc(f),g=In(rn),u===null?(O=vw(),O===null&&(O=fr,I=mw(),O.pooledCache=I,I.refCount++,I!==null&&(O.pooledCacheLanes|=p),O=I),f.memoizedState={parent:g,cache:O},ww(f),au(f,rn,O)):((u.lanes&p)!==0&&(_w(u,f),xh(f,null,null,p),Eh()),O=u.memoizedState,I=f.memoizedState,O.parent!==g?(O={parent:g,cache:g},f.memoizedState=O,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=O),au(f,rn,g)):(g=I.cache,au(f,rn,g),g!==O.cache&&yw(f,[rn],p,!0))),Dn(u,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function fo(u){u.flags|=4}function r2(u,f,p,g,O){if((f=(u.mode&32)!==0)&&(f=!1),f){if(u.flags|=16777216,(O&335544128)===O)if(u.stateNode.complete)u.flags|=8192;else if(G4())u.flags|=8192;else throw kc=by,bw}else u.flags&=-16777217}function _4(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!U5(f))if(G4())u.flags|=8192;else throw kc=by,bw}function Uy(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?Ai():536870912,u.lanes|=f,gf|=f)}function Oh(u,f){if(!Dt)switch(u.tailMode){case"hidden":f=u.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u.tail=null:p.sibling=null;break;case"collapsed":p=u.tail;for(var g=null;p!==null;)p.alternate!==null&&(g=p),p=p.sibling;g===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:g.sibling=null}}function wr(u){var f=u.alternate!==null&&u.alternate.child===u.child,p=0,g=0;if(f)for(var O=u.child;O!==null;)p|=O.lanes|O.childLanes,g|=O.subtreeFlags&65011712,g|=O.flags&65011712,O.return=u,O=O.sibling;else for(O=u.child;O!==null;)p|=O.lanes|O.childLanes,g|=O.subtreeFlags,g|=O.flags,O.return=u,O=O.sibling;return u.subtreeFlags|=g,u.childLanes=p,f}function dL(u,f,p){var g=f.pendingProps;switch(lw(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(f),null;case 1:return wr(f),null;case 3:return p=f.stateNode,g=null,u!==null&&(g=u.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),oo(rn),ve(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(u===null||u.child===null)&&(nf(f)?fo(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,dw())),wr(f),null;case 26:var O=f.type,I=f.memoizedState;return u===null?(fo(f),I!==null?(wr(f),_4(f,I)):(wr(f),r2(f,O,null,g,p))):I?I!==u.memoizedState?(fo(f),wr(f),_4(f,I)):(wr(f),f.flags&=-16777217):(u=u.memoizedProps,u!==g&&fo(f),wr(f),r2(f,O,u,g,p)),null;case 27:if(De(f),p=oe.current,O=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==g&&fo(f);else{if(!g){if(f.stateNode===null)throw Error(n(166));return wr(f),null}u=ce.current,nf(f)?eS(f):(u=R5(O,g,p),f.stateNode=u,fo(f))}return wr(f),null;case 5:if(De(f),O=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==g&&fo(f);else{if(!g){if(f.stateNode===null)throw Error(n(166));return wr(f),null}if(I=ce.current,nf(f))eS(f);else{var Q=Qy(oe.current);switch(I){case 1:I=Q.createElementNS("http://www.w3.org/2000/svg",O);break;case 2:I=Q.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;default:switch(O){case"svg":I=Q.createElementNS("http://www.w3.org/2000/svg",O);break;case"math":I=Q.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;case"script":I=Q.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof g.is=="string"?Q.createElement("select",{is:g.is}):Q.createElement("select"),g.multiple?I.multiple=!0:g.size&&(I.size=g.size);break;default:I=typeof g.is=="string"?Q.createElement(O,{is:g.is}):Q.createElement(O)}}I[Sr]=f,I[Tt]=g;e:for(Q=f.child;Q!==null;){if(Q.tag===5||Q.tag===6)I.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===f)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===f)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}f.stateNode=I;e:switch(Pn(I,O,g),O){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&fo(f)}}return wr(f),r2(f,f.type,u===null?null:u.memoizedProps,f.pendingProps,p),null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==g&&fo(f);else{if(typeof g!="string"&&f.stateNode===null)throw Error(n(166));if(u=oe.current,nf(f)){if(u=f.stateNode,p=f.memoizedProps,g=null,O=Bn,O!==null)switch(O.tag){case 27:case 5:g=O.memoizedProps}u[Sr]=f,u=!!(u.nodeValue===p||g!==null&&g.suppressHydrationWarning===!0||g5(u.nodeValue,p)),u||iu(f,!0)}else u=Qy(u).createTextNode(g),u[Sr]=f,f.stateNode=u}return wr(f),null;case 31:if(p=f.memoizedState,u===null||u.memoizedState!==null){if(g=nf(f),p!==null){if(u===null){if(!g)throw Error(n(318));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[Sr]=f}else Bc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;wr(f),u=!1}else p=dw(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=p),u=!0;if(!u)return f.flags&256?(Xi(f),f):(Xi(f),null);if((f.flags&128)!==0)throw Error(n(558))}return wr(f),null;case 13:if(g=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(O=nf(f),g!==null&&g.dehydrated!==null){if(u===null){if(!O)throw Error(n(318));if(O=f.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(n(317));O[Sr]=f}else Bc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;wr(f),O=!1}else O=dw(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=O),O=!0;if(!O)return f.flags&256?(Xi(f),f):(Xi(f),null)}return Xi(f),(f.flags&128)!==0?(f.lanes=p,f):(p=g!==null,u=u!==null&&u.memoizedState!==null,p&&(g=f.child,O=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(O=g.alternate.memoizedState.cachePool.pool),I=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(I=g.memoizedState.cachePool.pool),I!==O&&(g.flags|=2048)),p!==u&&p&&(f.child.flags|=8192),Uy(f,f.updateQueue),wr(f),null);case 4:return ve(),u===null&&A2(f.stateNode.containerInfo),wr(f),null;case 10:return oo(f.type),wr(f),null;case 19:if(te(Kr),g=f.memoizedState,g===null)return wr(f),null;if(O=(f.flags&128)!==0,I=g.rendering,I===null)if(O)Oh(g,!1);else{if(qr!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(I=xy(u),I!==null){for(f.flags|=128,Oh(g,!1),u=I.updateQueue,f.updateQueue=u,Uy(f,u),f.subtreeFlags=0,u=p,p=f.child;p!==null;)Z6(p,u),p=p.sibling;return ae(Kr,Kr.current&1|2),Dt&&ao(f,g.treeForkCount),f.child}u=u.sibling}g.tail!==null&&Me()>$y&&(f.flags|=128,O=!0,Oh(g,!1),f.lanes=4194304)}else{if(!O)if(u=xy(I),u!==null){if(f.flags|=128,O=!0,u=u.updateQueue,f.updateQueue=u,Uy(f,u),Oh(g,!0),g.tail===null&&g.tailMode==="hidden"&&!I.alternate&&!Dt)return wr(f),null}else 2*Me()-g.renderingStartTime>$y&&p!==536870912&&(f.flags|=128,O=!0,Oh(g,!1),f.lanes=4194304);g.isBackwards?(I.sibling=f.child,f.child=I):(u=g.last,u!==null?u.sibling=I:f.child=I,g.last=I)}return g.tail!==null?(u=g.tail,g.rendering=u,g.tail=u.sibling,g.renderingStartTime=Me(),u.sibling=null,p=Kr.current,ae(Kr,O?p&1|2:p&1),Dt&&ao(f,g.treeForkCount),u):(wr(f),null);case 22:case 23:return Xi(f),Sw(),g=f.memoizedState!==null,u!==null?u.memoizedState!==null!==g&&(f.flags|=8192):g&&(f.flags|=8192),g?(p&536870912)!==0&&(f.flags&128)===0&&(wr(f),f.subtreeFlags&6&&(f.flags|=8192)):wr(f),p=f.updateQueue,p!==null&&Uy(f,p.retryQueue),p=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),g=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==p&&(f.flags|=2048),u!==null&&te(Pc),null;case 24:return p=null,u!==null&&(p=u.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),oo(rn),wr(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function hL(u,f){switch(lw(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return oo(rn),ve(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return De(f),null;case 31:if(f.memoizedState!==null){if(Xi(f),f.alternate===null)throw Error(n(340));Bc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 13:if(Xi(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));Bc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return te(Kr),null;case 4:return ve(),null;case 10:return oo(f.type),null;case 22:case 23:return Xi(f),Sw(),u!==null&&te(Pc),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return oo(rn),null;case 25:return null;default:return null}}function E4(u,f){switch(lw(f),f.tag){case 3:oo(rn),ve();break;case 26:case 27:case 5:De(f);break;case 4:ve();break;case 31:f.memoizedState!==null&&Xi(f);break;case 13:Xi(f);break;case 19:te(Kr);break;case 10:oo(f.type);break;case 22:case 23:Xi(f),Sw(),u!==null&&te(Pc);break;case 24:oo(rn)}}function Ch(u,f){try{var p=f.updateQueue,g=p!==null?p.lastEffect:null;if(g!==null){var O=g.next;p=O;do{if((p.tag&u)===u){g=void 0;var I=p.create,Q=p.inst;g=I(),Q.destroy=g}p=p.next}while(p!==O)}}catch(se){er(f,f.return,se)}}function fu(u,f,p){try{var g=f.updateQueue,O=g!==null?g.lastEffect:null;if(O!==null){var I=O.next;g=I;do{if((g.tag&u)===u){var Q=g.inst,se=Q.destroy;if(se!==void 0){Q.destroy=void 0,O=f;var ge=p,Oe=se;try{Oe()}catch(qe){er(O,ge,qe)}}}g=g.next}while(g!==I)}}catch(qe){er(f,f.return,qe)}}function x4(u){var f=u.updateQueue;if(f!==null){var p=u.stateNode;try{hS(f,p)}catch(g){er(u,u.return,g)}}}function A4(u,f,p){p.props=jc(u.type,u.memoizedProps),p.state=u.memoizedState;try{p.componentWillUnmount()}catch(g){er(u,f,g)}}function Nh(u,f){try{var p=u.ref;if(p!==null){switch(u.tag){case 26:case 27:case 5:var g=u.stateNode;break;case 30:g=u.stateNode;break;default:g=u.stateNode}typeof p=="function"?u.refCleanup=p(g):p.current=g}}catch(O){er(u,f,O)}}function vs(u,f){var p=u.ref,g=u.refCleanup;if(p!==null)if(typeof g=="function")try{g()}catch(O){er(u,f,O)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(O){er(u,f,O)}else p.current=null}function S4(u){var f=u.type,p=u.memoizedProps,g=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&g.focus();break e;case"img":p.src?g.src=p.src:p.srcSet&&(g.srcset=p.srcSet)}}catch(O){er(u,u.return,O)}}function n2(u,f,p){try{var g=u.stateNode;PL(g,u.type,p,f),g[Tt]=f}catch(O){er(u,u.return,O)}}function M4(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&vu(u.type)||u.tag===4}function i2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||M4(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&vu(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function a2(u,f,p){var g=u.tag;if(g===5||g===6)u=u.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(u,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(u),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=Ka));else if(g!==4&&(g===27&&vu(u.type)&&(p=u.stateNode,f=null),u=u.child,u!==null))for(a2(u,f,p),u=u.sibling;u!==null;)a2(u,f,p),u=u.sibling}function ky(u,f,p){var g=u.tag;if(g===5||g===6)u=u.stateNode,f?p.insertBefore(u,f):p.appendChild(u);else if(g!==4&&(g===27&&vu(u.type)&&(p=u.stateNode),u=u.child,u!==null))for(ky(u,f,p),u=u.sibling;u!==null;)ky(u,f,p),u=u.sibling}function T4(u){var f=u.stateNode,p=u.memoizedProps;try{for(var g=u.type,O=f.attributes;O.length;)f.removeAttributeNode(O[0]);Pn(f,g,p),f[Sr]=u,f[Tt]=p}catch(I){er(u,u.return,I)}}var ho=!1,sn=!1,s2=!1,R4=typeof WeakSet=="function"?WeakSet:Set,wn=null;function pL(u,f){if(u=u.containerInfo,T2=im,u=j6(u),Xb(u)){if("selectionStart"in u)var p={start:u.selectionStart,end:u.selectionEnd};else e:{p=(p=u.ownerDocument)&&p.defaultView||window;var g=p.getSelection&&p.getSelection();if(g&&g.rangeCount!==0){p=g.anchorNode;var O=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{p.nodeType,I.nodeType}catch{p=null;break e}var Q=0,se=-1,ge=-1,Oe=0,qe=0,Fe=u,Ne=null;t:for(;;){for(var Ie;Fe!==p||O!==0&&Fe.nodeType!==3||(se=Q+O),Fe!==I||g!==0&&Fe.nodeType!==3||(ge=Q+g),Fe.nodeType===3&&(Q+=Fe.nodeValue.length),(Ie=Fe.firstChild)!==null;)Ne=Fe,Fe=Ie;for(;;){if(Fe===u)break t;if(Ne===p&&++Oe===O&&(se=Q),Ne===I&&++qe===g&&(ge=Q),(Ie=Fe.nextSibling)!==null)break;Fe=Ne,Ne=Fe.parentNode}Fe=Ie}p=se===-1||ge===-1?null:{start:se,end:ge}}else p=null}p=p||{start:0,end:0}}else p=null;for(R2={focusedElem:u,selectionRange:p},im=!1,wn=f;wn!==null;)if(f=wn,u=f.child,(f.subtreeFlags&1028)!==0&&u!==null)u.return=f,wn=u;else for(;wn!==null;){switch(f=wn,I=f.alternate,u=f.flags,f.tag){case 0:if((u&4)!==0&&(u=f.updateQueue,u=u!==null?u.events:null,u!==null))for(p=0;p<u.length;p++)O=u[p],O.ref.impl=O.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&I!==null){u=void 0,p=f,O=I.memoizedProps,I=I.memoizedState,g=p.stateNode;try{var st=jc(p.type,O);u=g.getSnapshotBeforeUpdate(st,I),g.__reactInternalSnapshotBeforeUpdate=u}catch(yt){er(p,p.return,yt)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,p=u.nodeType,p===9)N2(u);else if(p===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":N2(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=f.sibling,u!==null){u.return=f.return,wn=u;break}wn=f.return}}function O4(u,f,p){var g=p.flags;switch(p.tag){case 0:case 11:case 15:yo(u,p),g&4&&Ch(5,p);break;case 1:if(yo(u,p),g&4)if(u=p.stateNode,f===null)try{u.componentDidMount()}catch(Q){er(p,p.return,Q)}else{var O=jc(p.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(O,f,u.__reactInternalSnapshotBeforeUpdate)}catch(Q){er(p,p.return,Q)}}g&64&&x4(p),g&512&&Nh(p,p.return);break;case 3:if(yo(u,p),g&64&&(u=p.updateQueue,u!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{hS(u,f)}catch(Q){er(p,p.return,Q)}}break;case 27:f===null&&g&4&&T4(p);case 26:case 5:yo(u,p),f===null&&g&4&&S4(p),g&512&&Nh(p,p.return);break;case 12:yo(u,p);break;case 31:yo(u,p),g&4&&B4(u,p);break;case 13:yo(u,p),g&4&&I4(u,p),g&64&&(u=p.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(p=xL.bind(null,p),zL(u,p))));break;case 22:if(g=p.memoizedState!==null||ho,!g){f=f!==null&&f.memoizedState!==null||sn,O=ho;var I=sn;ho=g,(sn=f)&&!I?mo(u,p,(p.subtreeFlags&8772)!==0):yo(u,p),ho=O,sn=I}break;case 30:break;default:yo(u,p)}}function C4(u){var f=u.alternate;f!==null&&(u.alternate=null,C4(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Fa(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Mr=null,Ni=!1;function po(u,f,p){for(p=p.child;p!==null;)N4(u,f,p),p=p.sibling}function N4(u,f,p){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(ne,p)}catch{}switch(p.tag){case 26:sn||vs(p,f),po(u,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:sn||vs(p,f);var g=Mr,O=Ni;vu(p.type)&&(Mr=p.stateNode,Ni=!1),po(u,f,p),jh(p.stateNode),Mr=g,Ni=O;break;case 5:sn||vs(p,f);case 6:if(g=Mr,O=Ni,Mr=null,po(u,f,p),Mr=g,Ni=O,Mr!==null)if(Ni)try{(Mr.nodeType===9?Mr.body:Mr.nodeName==="HTML"?Mr.ownerDocument.body:Mr).removeChild(p.stateNode)}catch(I){er(p,f,I)}else try{Mr.removeChild(p.stateNode)}catch(I){er(p,f,I)}break;case 18:Mr!==null&&(Ni?(u=Mr,x5(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,p.stateNode),Sf(u)):x5(Mr,p.stateNode));break;case 4:g=Mr,O=Ni,Mr=p.stateNode.containerInfo,Ni=!0,po(u,f,p),Mr=g,Ni=O;break;case 0:case 11:case 14:case 15:fu(2,p,f),sn||fu(4,p,f),po(u,f,p);break;case 1:sn||(vs(p,f),g=p.stateNode,typeof g.componentWillUnmount=="function"&&A4(p,f,g)),po(u,f,p);break;case 21:po(u,f,p);break;case 22:sn=(g=sn)||p.memoizedState!==null,po(u,f,p),sn=g;break;default:po(u,f,p)}}function B4(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Sf(u)}catch(p){er(f,f.return,p)}}}function I4(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Sf(u)}catch(p){er(f,f.return,p)}}function yL(u){switch(u.tag){case 31:case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new R4),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new R4),f;default:throw Error(n(435,u.tag))}}function qy(u,f){var p=yL(u);f.forEach(function(g){if(!p.has(g)){p.add(g);var O=AL.bind(null,u,g);g.then(O,O)}})}function Bi(u,f){var p=f.deletions;if(p!==null)for(var g=0;g<p.length;g++){var O=p[g],I=u,Q=f,se=Q;e:for(;se!==null;){switch(se.tag){case 27:if(vu(se.type)){Mr=se.stateNode,Ni=!1;break e}break;case 5:Mr=se.stateNode,Ni=!1;break e;case 3:case 4:Mr=se.stateNode.containerInfo,Ni=!0;break e}se=se.return}if(Mr===null)throw Error(n(160));N4(I,Q,O),Mr=null,Ni=!1,I=O.alternate,I!==null&&(I.return=null),O.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)D4(f,u),f=f.sibling}var Ja=null;function D4(u,f){var p=u.alternate,g=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Bi(f,u),Ii(u),g&4&&(fu(3,u,u.return),Ch(3,u),fu(5,u,u.return));break;case 1:Bi(f,u),Ii(u),g&512&&(sn||p===null||vs(p,p.return)),g&64&&ho&&(u=u.updateQueue,u!==null&&(g=u.callbacks,g!==null&&(p=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=p===null?g:p.concat(g))));break;case 26:var O=Ja;if(Bi(f,u),Ii(u),g&512&&(sn||p===null||vs(p,p.return)),g&4){var I=p!==null?p.memoizedState:null;if(g=u.memoizedState,p===null)if(g===null)if(u.stateNode===null){e:{g=u.type,p=u.memoizedProps,O=O.ownerDocument||O;t:switch(g){case"title":I=O.getElementsByTagName("title")[0],(!I||I[Gi]||I[Sr]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=O.createElement(g),O.head.insertBefore(I,O.querySelector("head > title"))),Pn(I,g,p),I[Sr]=u,gr(I),g=I;break e;case"link":var Q=D5("link","href",O).get(g+(p.href||""));if(Q){for(var se=0;se<Q.length;se++)if(I=Q[se],I.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&I.getAttribute("rel")===(p.rel==null?null:p.rel)&&I.getAttribute("title")===(p.title==null?null:p.title)&&I.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){Q.splice(se,1);break t}}I=O.createElement(g),Pn(I,g,p),O.head.appendChild(I);break;case"meta":if(Q=D5("meta","content",O).get(g+(p.content||""))){for(se=0;se<Q.length;se++)if(I=Q[se],I.getAttribute("content")===(p.content==null?null:""+p.content)&&I.getAttribute("name")===(p.name==null?null:p.name)&&I.getAttribute("property")===(p.property==null?null:p.property)&&I.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&I.getAttribute("charset")===(p.charSet==null?null:p.charSet)){Q.splice(se,1);break t}}I=O.createElement(g),Pn(I,g,p),O.head.appendChild(I);break;default:throw Error(n(468,g))}I[Sr]=u,gr(I),g=I}u.stateNode=g}else P5(O,u.type,u.stateNode);else u.stateNode=I5(O,g,u.memoizedProps);else I!==g?(I===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):I.count--,g===null?P5(O,u.type,u.stateNode):I5(O,g,u.memoizedProps)):g===null&&u.stateNode!==null&&n2(u,u.memoizedProps,p.memoizedProps)}break;case 27:Bi(f,u),Ii(u),g&512&&(sn||p===null||vs(p,p.return)),p!==null&&g&4&&n2(u,u.memoizedProps,p.memoizedProps);break;case 5:if(Bi(f,u),Ii(u),g&512&&(sn||p===null||vs(p,p.return)),u.flags&32){O=u.stateNode;try{Wi(O,"")}catch(st){er(u,u.return,st)}}g&4&&u.stateNode!=null&&(O=u.memoizedProps,n2(u,O,p!==null?p.memoizedProps:O)),g&1024&&(s2=!0);break;case 6:if(Bi(f,u),Ii(u),g&4){if(u.stateNode===null)throw Error(n(162));g=u.memoizedProps,p=u.stateNode;try{p.nodeValue=g}catch(st){er(u,u.return,st)}}break;case 3:if(em=null,O=Ja,Ja=Jy(f.containerInfo),Bi(f,u),Ja=O,Ii(u),g&4&&p!==null&&p.memoizedState.isDehydrated)try{Sf(f.containerInfo)}catch(st){er(u,u.return,st)}s2&&(s2=!1,P4(u));break;case 4:g=Ja,Ja=Jy(u.stateNode.containerInfo),Bi(f,u),Ii(u),Ja=g;break;case 12:Bi(f,u),Ii(u);break;case 31:Bi(f,u),Ii(u),g&4&&(g=u.updateQueue,g!==null&&(u.updateQueue=null,qy(u,g)));break;case 13:Bi(f,u),Ii(u),u.child.flags&8192&&u.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(jy=Me()),g&4&&(g=u.updateQueue,g!==null&&(u.updateQueue=null,qy(u,g)));break;case 22:O=u.memoizedState!==null;var ge=p!==null&&p.memoizedState!==null,Oe=ho,qe=sn;if(ho=Oe||O,sn=qe||ge,Bi(f,u),sn=qe,ho=Oe,Ii(u),g&8192)e:for(f=u.stateNode,f._visibility=O?f._visibility&-2:f._visibility|1,O&&(p===null||ge||ho||sn||$c(u)),p=null,f=u;;){if(f.tag===5||f.tag===26){if(p===null){ge=p=f;try{if(I=ge.stateNode,O)Q=I.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{se=ge.stateNode;var Fe=ge.memoizedProps.style,Ne=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;se.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(st){er(ge,ge.return,st)}}}else if(f.tag===6){if(p===null){ge=f;try{ge.stateNode.nodeValue=O?"":ge.memoizedProps}catch(st){er(ge,ge.return,st)}}}else if(f.tag===18){if(p===null){ge=f;try{var Ie=ge.stateNode;O?A5(Ie,!0):A5(ge.stateNode,!1)}catch(st){er(ge,ge.return,st)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}g&4&&(g=u.updateQueue,g!==null&&(p=g.retryQueue,p!==null&&(g.retryQueue=null,qy(u,p))));break;case 19:Bi(f,u),Ii(u),g&4&&(g=u.updateQueue,g!==null&&(u.updateQueue=null,qy(u,g)));break;case 30:break;case 21:break;default:Bi(f,u),Ii(u)}}function Ii(u){var f=u.flags;if(f&2){try{for(var p,g=u.return;g!==null;){if(M4(g)){p=g;break}g=g.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var O=p.stateNode,I=i2(u);ky(u,I,O);break;case 5:var Q=p.stateNode;p.flags&32&&(Wi(Q,""),p.flags&=-33);var se=i2(u);ky(u,se,Q);break;case 3:case 4:var ge=p.stateNode.containerInfo,Oe=i2(u);a2(u,Oe,ge);break;default:throw Error(n(161))}}catch(qe){er(u,u.return,qe)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function P4(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;P4(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function yo(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)O4(u,f.alternate,f),f=f.sibling}function $c(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:fu(4,f,f.return),$c(f);break;case 1:vs(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&A4(f,f.return,p),$c(f);break;case 27:jh(f.stateNode);case 26:case 5:vs(f,f.return),$c(f);break;case 22:f.memoizedState===null&&$c(f);break;case 30:$c(f);break;default:$c(f)}u=u.sibling}}function mo(u,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var g=f.alternate,O=u,I=f,Q=I.flags;switch(I.tag){case 0:case 11:case 15:mo(O,I,p),Ch(4,I);break;case 1:if(mo(O,I,p),g=I,O=g.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Oe){er(g,g.return,Oe)}if(g=I,O=g.updateQueue,O!==null){var se=g.stateNode;try{var ge=O.shared.hiddenCallbacks;if(ge!==null)for(O.shared.hiddenCallbacks=null,O=0;O<ge.length;O++)dS(ge[O],se)}catch(Oe){er(g,g.return,Oe)}}p&&Q&64&&x4(I),Nh(I,I.return);break;case 27:T4(I);case 26:case 5:mo(O,I,p),p&&g===null&&Q&4&&S4(I),Nh(I,I.return);break;case 12:mo(O,I,p);break;case 31:mo(O,I,p),p&&Q&4&&B4(O,I);break;case 13:mo(O,I,p),p&&Q&4&&I4(O,I);break;case 22:I.memoizedState===null&&mo(O,I,p),Nh(I,I.return);break;case 30:break;default:mo(O,I,p)}f=f.sibling}}function o2(u,f){var p=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==p&&(u!=null&&u.refCount++,p!=null&&gh(p))}function u2(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&gh(u))}function Xa(u,f,p,g){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)U4(u,f,p,g),f=f.sibling}function U4(u,f,p,g){var O=f.flags;switch(f.tag){case 0:case 11:case 15:Xa(u,f,p,g),O&2048&&Ch(9,f);break;case 1:Xa(u,f,p,g);break;case 3:Xa(u,f,p,g),O&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&gh(u)));break;case 12:if(O&2048){Xa(u,f,p,g),u=f.stateNode;try{var I=f.memoizedProps,Q=I.id,se=I.onPostCommit;typeof se=="function"&&se(Q,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ge){er(f,f.return,ge)}}else Xa(u,f,p,g);break;case 31:Xa(u,f,p,g);break;case 13:Xa(u,f,p,g);break;case 23:break;case 22:I=f.stateNode,Q=f.alternate,f.memoizedState!==null?I._visibility&2?Xa(u,f,p,g):Bh(u,f):I._visibility&2?Xa(u,f,p,g):(I._visibility|=2,pf(u,f,p,g,(f.subtreeFlags&10256)!==0||!1)),O&2048&&o2(Q,f);break;case 24:Xa(u,f,p,g),O&2048&&u2(f.alternate,f);break;default:Xa(u,f,p,g)}}function pf(u,f,p,g,O){for(O=O&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var I=u,Q=f,se=p,ge=g,Oe=Q.flags;switch(Q.tag){case 0:case 11:case 15:pf(I,Q,se,ge,O),Ch(8,Q);break;case 23:break;case 22:var qe=Q.stateNode;Q.memoizedState!==null?qe._visibility&2?pf(I,Q,se,ge,O):Bh(I,Q):(qe._visibility|=2,pf(I,Q,se,ge,O)),O&&Oe&2048&&o2(Q.alternate,Q);break;case 24:pf(I,Q,se,ge,O),O&&Oe&2048&&u2(Q.alternate,Q);break;default:pf(I,Q,se,ge,O)}f=f.sibling}}function Bh(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=u,g=f,O=g.flags;switch(g.tag){case 22:Bh(p,g),O&2048&&o2(g.alternate,g);break;case 24:Bh(p,g),O&2048&&u2(g.alternate,g);break;default:Bh(p,g)}f=f.sibling}}var Ih=8192;function yf(u,f,p){if(u.subtreeFlags&Ih)for(u=u.child;u!==null;)k4(u,f,p),u=u.sibling}function k4(u,f,p){switch(u.tag){case 26:yf(u,f,p),u.flags&Ih&&u.memoizedState!==null&&tj(p,Ja,u.memoizedState,u.memoizedProps);break;case 5:yf(u,f,p);break;case 3:case 4:var g=Ja;Ja=Jy(u.stateNode.containerInfo),yf(u,f,p),Ja=g;break;case 22:u.memoizedState===null&&(g=u.alternate,g!==null&&g.memoizedState!==null?(g=Ih,Ih=16777216,yf(u,f,p),Ih=g):yf(u,f,p));break;default:yf(u,f,p)}}function q4(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function Dh(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var g=f[p];wn=g,j4(g,u)}q4(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)L4(u),u=u.sibling}function L4(u){switch(u.tag){case 0:case 11:case 15:Dh(u),u.flags&2048&&fu(9,u,u.return);break;case 3:Dh(u);break;case 12:Dh(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,Ly(u)):Dh(u);break;default:Dh(u)}}function Ly(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var g=f[p];wn=g,j4(g,u)}q4(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:fu(8,f,f.return),Ly(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,Ly(f));break;default:Ly(f)}u=u.sibling}}function j4(u,f){for(;wn!==null;){var p=wn;switch(p.tag){case 0:case 11:case 15:fu(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var g=p.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:gh(p.memoizedState.cache)}if(g=p.child,g!==null)g.return=p,wn=g;else e:for(p=u;wn!==null;){g=wn;var O=g.sibling,I=g.return;if(C4(g),g===p){wn=null;break e}if(O!==null){O.return=I,wn=O;break e}wn=I}}}var mL={getCacheForType:function(u){var f=In(rn),p=f.data.get(u);return p===void 0&&(p=u(),f.data.set(u,p)),p},cacheSignal:function(){return In(rn).controller.signal}},gL=typeof WeakMap=="function"?WeakMap:Map,Gt=0,fr=null,Ot=null,Nt=0,Xt=0,ea=null,du=!1,mf=!1,c2=!1,go=0,qr=0,hu=0,Fc=0,l2=0,ta=0,gf=0,Ph=null,Di=null,f2=!1,jy=0,$4=0,$y=1/0,Fy=null,pu=null,pn=0,yu=null,vf=null,vo=0,d2=0,h2=null,F4=null,Uh=0,p2=null;function ra(){return(Gt&2)!==0&&Nt!==0?Nt&-Nt:_.T!==null?w2():ui()}function z4(){if(ta===0)if((Nt&536870912)===0||Dt){var u=et;et<<=1,(et&3932160)===0&&(et=262144),ta=u}else ta=536870912;return u=Ji.current,u!==null&&(u.flags|=32),ta}function Pi(u,f,p){(u===fr&&(Xt===2||Xt===9)||u.cancelPendingCommit!==null)&&(bf(u,0),mu(u,Nt,ta,!1)),Ft(u,p),((Gt&2)===0||u!==fr)&&(u===fr&&((Gt&2)===0&&(Fc|=p),qr===4&&mu(u,Nt,ta,!1)),bs(u))}function V4(u,f,p){if((Gt&6)!==0)throw Error(n(327));var g=!p&&(f&127)===0&&(f&u.expiredLanes)===0||pt(u,f),O=g?wL(u,f):m2(u,f,!0),I=g;do{if(O===0){mf&&!g&&mu(u,f,0,!1);break}else{if(p=u.current.alternate,I&&!vL(p)){O=m2(u,f,!1),I=!1;continue}if(O===2){if(I=f,u.errorRecoveryDisabledLanes&I)var Q=0;else Q=u.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){f=Q;e:{var se=u;O=Ph;var ge=se.current.memoizedState.isDehydrated;if(ge&&(bf(se,Q).flags|=256),Q=m2(se,Q,!1),Q!==2){if(c2&&!ge){se.errorRecoveryDisabledLanes|=I,Fc|=I,O=4;break e}I=Di,Di=O,I!==null&&(Di===null?Di=I:Di.push.apply(Di,I))}O=Q}if(I=!1,O!==2)continue}}if(O===1){bf(u,0),mu(u,f,0,!0);break}e:{switch(g=u,I=O,I){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:mu(g,f,ta,!du);break e;case 2:Di=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(O=jy+300-Me(),10<O)){if(mu(g,f,ta,!du),xt(g,0,!0)!==0)break e;vo=f,g.timeoutHandle=_5(H4.bind(null,g,p,Di,Fy,f2,f,ta,Fc,gf,du,I,"Throttled",-0,0),O);break e}H4(g,p,Di,Fy,f2,f,ta,Fc,gf,du,I,null,-0,0)}}break}while(!0);bs(u)}function H4(u,f,p,g,O,I,Q,se,ge,Oe,qe,Fe,Ne,Ie){if(u.timeoutHandle=-1,Fe=f.subtreeFlags,Fe&8192||(Fe&16785408)===16785408){Fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ka},k4(f,I,Fe);var st=(I&62914560)===I?jy-Me():(I&4194048)===I?$4-Me():0;if(st=rj(Fe,st),st!==null){vo=I,u.cancelPendingCommit=st(X4.bind(null,u,f,I,p,g,O,Q,se,ge,qe,Fe,null,Ne,Ie)),mu(u,I,Q,!Oe);return}}X4(u,f,I,p,g,O,Q,se,ge)}function vL(u){for(var f=u;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var g=0;g<p.length;g++){var O=p[g],I=O.getSnapshot;O=O.value;try{if(!Yi(I(),O))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function mu(u,f,p,g){f&=~l2,f&=~Fc,u.suspendedLanes|=f,u.pingedLanes&=~f,g&&(u.warmLanes|=f),g=u.expirationTimes;for(var O=f;0<O;){var I=31-pe(O),Q=1<<I;g[I]=-1,O&=~Q}p!==0&&or(u,p,f)}function zy(){return(Gt&6)===0?(kh(0),!1):!0}function y2(){if(Ot!==null){if(Xt===0)var u=Ot.return;else u=Ot,so=Ic=null,Nw(u),cf=null,bh=0,u=Ot;for(;u!==null;)E4(u.alternate,u),u=u.return;Ot=null}}function bf(u,f){var p=u.timeoutHandle;p!==-1&&(u.timeoutHandle=-1,qL(p)),p=u.cancelPendingCommit,p!==null&&(u.cancelPendingCommit=null,p()),vo=0,y2(),fr=u,Ot=p=io(u.current,null),Nt=f,Xt=0,ea=null,du=!1,mf=pt(u,f),c2=!1,gf=ta=l2=Fc=hu=qr=0,Di=Ph=null,f2=!1,(f&8)!==0&&(f|=f&32);var g=u.entangledLanes;if(g!==0)for(u=u.entanglements,g&=f;0<g;){var O=31-pe(g),I=1<<O;f|=u[O],g&=~I}return go=f,ly(),p}function K4(u,f){Et=null,_.H=Th,f===uf||f===vy?(f=uS(),Xt=3):f===bw?(f=uS(),Xt=4):Xt=f===Gw?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ea=f,Ot===null&&(qr=1,By(u,ma(f,u.current)))}function G4(){var u=Ji.current;return u===null?!0:(Nt&4194048)===Nt?wa===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?u===wa:!1}function W4(){var u=_.H;return _.H=Th,u===null?Th:u}function Z4(){var u=_.A;return _.A=mL,u}function Vy(){qr=4,du||(Nt&4194048)!==Nt&&Ji.current!==null||(mf=!0),(hu&134217727)===0&&(Fc&134217727)===0||fr===null||mu(fr,Nt,ta,!1)}function m2(u,f,p){var g=Gt;Gt|=2;var O=W4(),I=Z4();(fr!==u||Nt!==f)&&(Fy=null,bf(u,f)),f=!1;var Q=qr;e:do try{if(Xt!==0&&Ot!==null){var se=Ot,ge=ea;switch(Xt){case 8:y2(),Q=6;break e;case 3:case 2:case 9:case 6:Ji.current===null&&(f=!0);var Oe=Xt;if(Xt=0,ea=null,wf(u,se,ge,Oe),p&&mf){Q=0;break e}break;default:Oe=Xt,Xt=0,ea=null,wf(u,se,ge,Oe)}}bL(),Q=qr;break}catch(qe){K4(u,qe)}while(!0);return f&&u.shellSuspendCounter++,so=Ic=null,Gt=g,_.H=O,_.A=I,Ot===null&&(fr=null,Nt=0,ly()),Q}function bL(){for(;Ot!==null;)Y4(Ot)}function wL(u,f){var p=Gt;Gt|=2;var g=W4(),O=Z4();fr!==u||Nt!==f?(Fy=null,$y=Me()+500,bf(u,f)):mf=pt(u,f);e:do try{if(Xt!==0&&Ot!==null){f=Ot;var I=ea;t:switch(Xt){case 1:Xt=0,ea=null,wf(u,f,I,1);break;case 2:case 9:if(sS(I)){Xt=0,ea=null,Q4(f);break}f=function(){Xt!==2&&Xt!==9||fr!==u||(Xt=7),bs(u)},I.then(f,f);break e;case 3:Xt=7;break e;case 4:Xt=5;break e;case 7:sS(I)?(Xt=0,ea=null,Q4(f)):(Xt=0,ea=null,wf(u,f,I,7));break;case 5:var Q=null;switch(Ot.tag){case 26:Q=Ot.memoizedState;case 5:case 27:var se=Ot;if(Q?U5(Q):se.stateNode.complete){Xt=0,ea=null;var ge=se.sibling;if(ge!==null)Ot=ge;else{var Oe=se.return;Oe!==null?(Ot=Oe,Hy(Oe)):Ot=null}break t}}Xt=0,ea=null,wf(u,f,I,5);break;case 6:Xt=0,ea=null,wf(u,f,I,6);break;case 8:y2(),qr=6;break e;default:throw Error(n(462))}}_L();break}catch(qe){K4(u,qe)}while(!0);return so=Ic=null,_.H=g,_.A=O,Gt=p,Ot!==null?0:(fr=null,Nt=0,ly(),qr)}function _L(){for(;Ot!==null&&!de();)Y4(Ot)}function Y4(u){var f=w4(u.alternate,u,go);u.memoizedProps=u.pendingProps,f===null?Hy(u):Ot=f}function Q4(u){var f=u,p=f.alternate;switch(f.tag){case 15:case 0:f=p4(p,f,f.pendingProps,f.type,void 0,Nt);break;case 11:f=p4(p,f,f.pendingProps,f.type.render,f.ref,Nt);break;case 5:Nw(f);default:E4(p,f),f=Ot=Z6(f,go),f=w4(p,f,go)}u.memoizedProps=u.pendingProps,f===null?Hy(u):Ot=f}function wf(u,f,p,g){so=Ic=null,Nw(f),cf=null,bh=0;var O=f.return;try{if(cL(u,O,f,p,Nt)){qr=1,By(u,ma(p,u.current)),Ot=null;return}}catch(I){if(O!==null)throw Ot=O,I;qr=1,By(u,ma(p,u.current)),Ot=null;return}f.flags&32768?(Dt||g===1?u=!0:mf||(Nt&536870912)!==0?u=!1:(du=u=!0,(g===2||g===9||g===3||g===6)&&(g=Ji.current,g!==null&&g.tag===13&&(g.flags|=16384))),J4(f,u)):Hy(f)}function Hy(u){var f=u;do{if((f.flags&32768)!==0){J4(f,du);return}u=f.return;var p=dL(f.alternate,f,go);if(p!==null){Ot=p;return}if(f=f.sibling,f!==null){Ot=f;return}Ot=f=u}while(f!==null);qr===0&&(qr=5)}function J4(u,f){do{var p=hL(u.alternate,u);if(p!==null){p.flags&=32767,Ot=p;return}if(p=u.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(u=u.sibling,u!==null)){Ot=u;return}Ot=u=p}while(u!==null);qr=6,Ot=null}function X4(u,f,p,g,O,I,Q,se,ge){u.cancelPendingCommit=null;do Ky();while(pn!==0);if((Gt&6)!==0)throw Error(n(327));if(f!==null){if(f===u.current)throw Error(n(177));if(I=f.lanes|f.childLanes,I|=iw,Jo(u,p,I,Q,se,ge),u===fr&&(Ot=fr=null,Nt=0),vf=f,yu=u,vo=p,d2=I,h2=O,F4=g,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,SL(w,function(){return i5(),null})):(u.callbackNode=null,u.callbackPriority=0),g=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||g){g=_.T,_.T=null,O=U.p,U.p=2,Q=Gt,Gt|=4;try{pL(u,f,p)}finally{Gt=Q,U.p=O,_.T=g}}pn=1,e5(),t5(),r5()}}function e5(){if(pn===1){pn=0;var u=yu,f=vf,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=_.T,_.T=null;var g=U.p;U.p=2;var O=Gt;Gt|=4;try{D4(f,u);var I=R2,Q=j6(u.containerInfo),se=I.focusedElem,ge=I.selectionRange;if(Q!==se&&se&&se.ownerDocument&&L6(se.ownerDocument.documentElement,se)){if(ge!==null&&Xb(se)){var Oe=ge.start,qe=ge.end;if(qe===void 0&&(qe=Oe),"selectionStart"in se)se.selectionStart=Oe,se.selectionEnd=Math.min(qe,se.value.length);else{var Fe=se.ownerDocument||document,Ne=Fe&&Fe.defaultView||window;if(Ne.getSelection){var Ie=Ne.getSelection(),st=se.textContent.length,yt=Math.min(ge.start,st),ar=ge.end===void 0?yt:Math.min(ge.end,st);!Ie.extend&&yt>ar&&(Q=ar,ar=yt,yt=Q);var Ae=q6(se,yt),_e=q6(se,ar);if(Ae&&_e&&(Ie.rangeCount!==1||Ie.anchorNode!==Ae.node||Ie.anchorOffset!==Ae.offset||Ie.focusNode!==_e.node||Ie.focusOffset!==_e.offset)){var Re=Fe.createRange();Re.setStart(Ae.node,Ae.offset),Ie.removeAllRanges(),yt>ar?(Ie.addRange(Re),Ie.extend(_e.node,_e.offset)):(Re.setEnd(_e.node,_e.offset),Ie.addRange(Re))}}}}for(Fe=[],Ie=se;Ie=Ie.parentNode;)Ie.nodeType===1&&Fe.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<Fe.length;se++){var je=Fe[se];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}im=!!T2,R2=T2=null}finally{Gt=O,U.p=g,_.T=p}}u.current=f,pn=2}}function t5(){if(pn===2){pn=0;var u=yu,f=vf,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=_.T,_.T=null;var g=U.p;U.p=2;var O=Gt;Gt|=4;try{O4(u,f.alternate,f)}finally{Gt=O,U.p=g,_.T=p}}pn=3}}function r5(){if(pn===4||pn===3){pn=0,Be();var u=yu,f=vf,p=vo,g=F4;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?pn=5:(pn=0,vf=yu=null,n5(u,u.pendingLanes));var O=u.pendingLanes;if(O===0&&(pu=null),Qt(p),f=f.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(ne,f,void 0,(f.current.flags&128)===128)}catch{}if(g!==null){f=_.T,O=U.p,U.p=2,_.T=null;try{for(var I=u.onRecoverableError,Q=0;Q<g.length;Q++){var se=g[Q];I(se.value,{componentStack:se.stack})}}finally{_.T=f,U.p=O}}(vo&3)!==0&&Ky(),bs(u),O=u.pendingLanes,(p&261930)!==0&&(O&42)!==0?u===p2?Uh++:(Uh=0,p2=u):Uh=0,kh(0)}}function n5(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,gh(f)))}function Ky(){return e5(),t5(),r5(),i5()}function i5(){if(pn!==5)return!1;var u=yu,f=d2;d2=0;var p=Qt(vo),g=_.T,O=U.p;try{U.p=32>p?32:p,_.T=null,p=h2,h2=null;var I=yu,Q=vo;if(pn=0,vf=yu=null,vo=0,(Gt&6)!==0)throw Error(n(331));var se=Gt;if(Gt|=4,L4(I.current),U4(I,I.current,Q,p),Gt=se,kh(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(ne,I)}catch{}return!0}finally{U.p=O,_.T=g,n5(u,f)}}function a5(u,f,p){f=ma(p,f),f=Kw(u.stateNode,f,2),u=uu(u,f,2),u!==null&&(Ft(u,2),bs(u))}function er(u,f,p){if(u.tag===3)a5(u,u,p);else for(;f!==null;){if(f.tag===3){a5(f,u,p);break}else if(f.tag===1){var g=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(pu===null||!pu.has(g))){u=ma(p,u),p=s4(2),g=uu(f,p,2),g!==null&&(o4(p,g,f,u),Ft(g,2),bs(g));break}}f=f.return}}function g2(u,f,p){var g=u.pingCache;if(g===null){g=u.pingCache=new gL;var O=new Set;g.set(f,O)}else O=g.get(f),O===void 0&&(O=new Set,g.set(f,O));O.has(p)||(c2=!0,O.add(p),u=EL.bind(null,u,f,p),f.then(u,u))}function EL(u,f,p){var g=u.pingCache;g!==null&&g.delete(f),u.pingedLanes|=u.suspendedLanes&p,u.warmLanes&=~p,fr===u&&(Nt&p)===p&&(qr===4||qr===3&&(Nt&62914560)===Nt&&300>Me()-jy?(Gt&2)===0&&bf(u,0):l2|=p,gf===Nt&&(gf=0)),bs(u)}function s5(u,f){f===0&&(f=Ai()),u=Cc(u,f),u!==null&&(Ft(u,f),bs(u))}function xL(u){var f=u.memoizedState,p=0;f!==null&&(p=f.retryLane),s5(u,p)}function AL(u,f){var p=0;switch(u.tag){case 31:case 13:var g=u.stateNode,O=u.memoizedState;O!==null&&(p=O.retryLane);break;case 19:g=u.stateNode;break;case 22:g=u.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(f),s5(u,p)}function SL(u,f){return ue(u,f)}var Gy=null,_f=null,v2=!1,Wy=!1,b2=!1,gu=0;function bs(u){u!==_f&&u.next===null&&(_f===null?Gy=_f=u:_f=_f.next=u),Wy=!0,v2||(v2=!0,TL())}function kh(u,f){if(!b2&&Wy){b2=!0;do for(var p=!1,g=Gy;g!==null;){if(u!==0){var O=g.pendingLanes;if(O===0)var I=0;else{var Q=g.suspendedLanes,se=g.pingedLanes;I=(1<<31-pe(42|u)+1)-1,I&=O&~(Q&~se),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(p=!0,l5(g,I))}else I=Nt,I=xt(g,g===fr?I:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(I&3)===0||pt(g,I)||(p=!0,l5(g,I));g=g.next}while(p);b2=!1}}function ML(){o5()}function o5(){Wy=v2=!1;var u=0;gu!==0&&kL()&&(u=gu);for(var f=Me(),p=null,g=Gy;g!==null;){var O=g.next,I=u5(g,f);I===0?(g.next=null,p===null?Gy=O:p.next=O,O===null&&(_f=p)):(p=g,(u!==0||(I&3)!==0)&&(Wy=!0)),g=O}pn!==0&&pn!==5||kh(u),gu!==0&&(gu=0)}function u5(u,f){for(var p=u.suspendedLanes,g=u.pingedLanes,O=u.expirationTimes,I=u.pendingLanes&-62914561;0<I;){var Q=31-pe(I),se=1<<Q,ge=O[Q];ge===-1?((se&p)===0||(se&g)!==0)&&(O[Q]=St(se,f)):ge<=f&&(u.expiredLanes|=se),I&=~se}if(f=fr,p=Nt,p=xt(u,u===f?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),g=u.callbackNode,p===0||u===f&&(Xt===2||Xt===9)||u.cancelPendingCommit!==null)return g!==null&&g!==null&&le(g),u.callbackNode=null,u.callbackPriority=0;if((p&3)===0||pt(u,p)){if(f=p&-p,f===u.callbackPriority)return f;switch(g!==null&&le(g),Qt(p)){case 2:case 8:p=q;break;case 32:p=w;break;case 268435456:p=K;break;default:p=w}return g=c5.bind(null,u),p=ue(p,g),u.callbackPriority=f,u.callbackNode=p,f}return g!==null&&g!==null&&le(g),u.callbackPriority=2,u.callbackNode=null,2}function c5(u,f){if(pn!==0&&pn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var p=u.callbackNode;if(Ky()&&u.callbackNode!==p)return null;var g=Nt;return g=xt(u,u===fr?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),g===0?null:(V4(u,g,f),u5(u,Me()),u.callbackNode!=null&&u.callbackNode===p?c5.bind(null,u):null)}function l5(u,f){if(Ky())return null;V4(u,f,!0)}function TL(){LL(function(){(Gt&6)!==0?ue(Qe,ML):o5()})}function w2(){if(gu===0){var u=sf;u===0&&(u=Ke,Ke<<=1,(Ke&261888)===0&&(Ke=256)),gu=u}return gu}function f5(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Vl(""+u)}function d5(u,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,u.id&&p.setAttribute("form",u.id),f.parentNode.insertBefore(p,f),u=new FormData(u),p.parentNode.removeChild(p),u}function RL(u,f,p,g,O){if(f==="submit"&&p&&p.stateNode===O){var I=f5((O[Tt]||null).action),Q=g.submitter;Q&&(f=(f=Q[Tt]||null)?f5(f.formAction):Q.getAttribute("formAction"),f!==null&&(I=f,Q=null));var se=new gt("action","action",null,g,O);u.push({event:se,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(gu!==0){var ge=Q?d5(O,Q):new FormData(O);jw(p,{pending:!0,data:ge,method:O.method,action:I},null,ge)}}else typeof I=="function"&&(se.preventDefault(),ge=Q?d5(O,Q):new FormData(O),jw(p,{pending:!0,data:ge,method:O.method,action:I},I,ge))},currentTarget:O}]})}}for(var _2=0;_2<nw.length;_2++){var E2=nw[_2],OL=E2.toLowerCase(),CL=E2[0].toUpperCase()+E2.slice(1);Qa(OL,"on"+CL)}Qa(z6,"onAnimationEnd"),Qa(V6,"onAnimationIteration"),Qa(H6,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(Kq,"onTransitionRun"),Qa(Gq,"onTransitionStart"),Qa(Wq,"onTransitionCancel"),Qa(K6,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qh));function h5(u,f){f=(f&4)!==0;for(var p=0;p<u.length;p++){var g=u[p],O=g.event;g=g.listeners;e:{var I=void 0;if(f)for(var Q=g.length-1;0<=Q;Q--){var se=g[Q],ge=se.instance,Oe=se.currentTarget;if(se=se.listener,ge!==I&&O.isPropagationStopped())break e;I=se,O.currentTarget=Oe;try{I(O)}catch(qe){cy(qe)}O.currentTarget=null,I=ge}else for(Q=0;Q<g.length;Q++){if(se=g[Q],ge=se.instance,Oe=se.currentTarget,se=se.listener,ge!==I&&O.isPropagationStopped())break e;I=se,O.currentTarget=Oe;try{I(O)}catch(qe){cy(qe)}O.currentTarget=null,I=ge}}}}function Ct(u,f){var p=f[fn];p===void 0&&(p=f[fn]=new Set);var g=u+"__bubble";p.has(g)||(p5(f,u,2,!1),p.add(g))}function x2(u,f,p){var g=0;f&&(g|=4),p5(p,u,g,f)}var Zy="_reactListening"+Math.random().toString(36).slice(2);function A2(u){if(!u[Zy]){u[Zy]=!0,Cn.forEach(function(p){p!=="selectionchange"&&(NL.has(p)||x2(p,!1,u),x2(p,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[Zy]||(f[Zy]=!0,x2("selectionchange",!1,f))}}function p5(u,f,p,g){switch(z5(f)){case 2:var O=aj;break;case 8:O=sj;break;default:O=L2}p=O.bind(null,f,p,u),O=void 0,!Kl||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(O=!0),g?O!==void 0?u.addEventListener(f,p,{capture:!0,passive:O}):u.addEventListener(f,p,!0):O!==void 0?u.addEventListener(f,p,{passive:O}):u.addEventListener(f,p,!1)}function S2(u,f,p,g,O){var I=g;if((f&1)===0&&(f&2)===0&&g!==null)e:for(;;){if(g===null)return;var Q=g.tag;if(Q===3||Q===4){var se=g.stateNode.containerInfo;if(se===O)break;if(Q===4)for(Q=g.return;Q!==null;){var ge=Q.tag;if((ge===3||ge===4)&&Q.stateNode.containerInfo===O)return;Q=Q.return}for(;se!==null;){if(Q=Xr(se),Q===null)return;if(ge=Q.tag,ge===5||ge===6||ge===26||ge===27){g=I=Q;continue e}se=se.parentNode}}g=g.return}ay(function(){var Oe=I,qe=Hl(p),Fe=[];e:{var Ne=G6.get(u);if(Ne!==void 0){var Ie=gt,st=u;switch(u){case"keypress":if(he(p)===0)break e;case"keydown":case"keyup":Ie=Aq;break;case"focusin":st="focus",Ie=Zi;break;case"focusout":st="blur",Ie=Zi;break;case"beforeblur":case"afterblur":Ie=Zi;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Ci;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Tq;break;case z6:case V6:case H6:Ie=oy;break;case K6:Ie=Oq;break;case"scroll":case"scrollend":Ie=tn;break;case"wheel":Ie=Nq;break;case"copy":case"cut":case"paste":Ie=Zl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=A6;break;case"toggle":case"beforetoggle":Ie=Iq}var yt=(f&4)!==0,ar=!yt&&(u==="scroll"||u==="scrollend"),Ae=yt?Ne!==null?Ne+"Capture":null:Ne;yt=[];for(var _e=Oe,Re;_e!==null;){var je=_e;if(Re=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||Re===null||Ae===null||(je=tu(_e,Ae),je!=null&&yt.push(Lh(_e,je,Re))),ar)break;_e=_e.return}0<yt.length&&(Ne=new Ie(Ne,st,null,p,qe),Fe.push({event:Ne,listeners:yt}))}}if((f&7)===0){e:{if(Ne=u==="mouseover"||u==="pointerover",Ie=u==="mouseout"||u==="pointerout",Ne&&p!==Ga&&(st=p.relatedTarget||p.fromElement)&&(Xr(st)||st[Kt]))break e;if((Ie||Ne)&&(Ne=qe.window===qe?qe:(Ne=qe.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Ie?(st=p.relatedTarget||p.toElement,Ie=Oe,st=st?Xr(st):null,st!==null&&(ar=a(st),yt=st.tag,st!==ar||yt!==5&&yt!==27&&yt!==6)&&(st=null)):(Ie=null,st=Oe),Ie!==st)){if(yt=hn,je="onMouseLeave",Ae="onMouseEnter",_e="mouse",(u==="pointerout"||u==="pointerover")&&(yt=A6,je="onPointerLeave",Ae="onPointerEnter",_e="pointer"),ar=Ie==null?Ne:Ve(Ie),Re=st==null?Ne:Ve(st),Ne=new yt(je,_e+"leave",Ie,p,qe),Ne.target=ar,Ne.relatedTarget=Re,je=null,Xr(qe)===Oe&&(yt=new yt(Ae,_e+"enter",st,p,qe),yt.target=Re,yt.relatedTarget=ar,je=yt),ar=je,Ie&&st)t:{for(yt=BL,Ae=Ie,_e=st,Re=0,je=Ae;je;je=yt(je))Re++;je=0;for(var dt=_e;dt;dt=yt(dt))je++;for(;0<Re-je;)Ae=yt(Ae),Re--;for(;0<je-Re;)_e=yt(_e),je--;for(;Re--;){if(Ae===_e||_e!==null&&Ae===_e.alternate){yt=Ae;break t}Ae=yt(Ae),_e=yt(_e)}yt=null}else yt=null;Ie!==null&&y5(Fe,Ne,Ie,yt,!1),st!==null&&ar!==null&&y5(Fe,ar,st,yt,!0)}}e:{if(Ne=Oe?Ve(Oe):window,Ie=Ne.nodeName&&Ne.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&Ne.type==="file")var zt=B6;else if(C6(Ne))if(I6)zt=zq;else{zt=$q;var ut=jq}else Ie=Ne.nodeName,!Ie||Ie.toLowerCase()!=="input"||Ne.type!=="checkbox"&&Ne.type!=="radio"?Oe&&uh(Oe.elementType)&&(zt=B6):zt=Fq;if(zt&&(zt=zt(u,Oe))){N6(Fe,zt,p,qe);break e}ut&&ut(u,Ne,Oe),u==="focusout"&&Oe&&Ne.type==="number"&&Oe.memoizedProps.value!=null&&sh(Ne,"number",Ne.value)}switch(ut=Oe?Ve(Oe):window,u){case"focusin":(C6(ut)||ut.contentEditable==="true")&&(Ql=ut,ew=Oe,ph=null);break;case"focusout":ph=ew=Ql=null;break;case"mousedown":tw=!0;break;case"contextmenu":case"mouseup":case"dragend":tw=!1,$6(Fe,p,qe);break;case"selectionchange":if(Hq)break;case"keydown":case"keyup":$6(Fe,p,qe)}var At;if(Yb)e:{switch(u){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Yl?R6(u,p)&&(Bt="onCompositionEnd"):u==="keydown"&&p.keyCode===229&&(Bt="onCompositionStart");Bt&&(S6&&p.locale!=="ko"&&(Yl||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Yl&&(At=sy()):(Ya=qe,ch="value"in Ya?Ya.value:Ya.textContent,Yl=!0)),ut=Yy(Oe,Bt),0<ut.length&&(Bt=new x6(Bt,u,null,p,qe),Fe.push({event:Bt,listeners:ut}),At?Bt.data=At:(At=O6(p),At!==null&&(Bt.data=At)))),(At=Pq?Uq(u,p):kq(u,p))&&(Bt=Yy(Oe,"onBeforeInput"),0<Bt.length&&(ut=new x6("onBeforeInput","beforeinput",null,p,qe),Fe.push({event:ut,listeners:Bt}),ut.data=At)),RL(Fe,u,Oe,p,qe)}h5(Fe,f)})}function Lh(u,f,p){return{instance:u,listener:f,currentTarget:p}}function Yy(u,f){for(var p=f+"Capture",g=[];u!==null;){var O=u,I=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||I===null||(O=tu(u,p),O!=null&&g.unshift(Lh(u,O,I)),O=tu(u,f),O!=null&&g.push(Lh(u,O,I))),u.tag===3)return g;u=u.return}return[]}function BL(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function y5(u,f,p,g,O){for(var I=f._reactName,Q=[];p!==null&&p!==g;){var se=p,ge=se.alternate,Oe=se.stateNode;if(se=se.tag,ge!==null&&ge===g)break;se!==5&&se!==26&&se!==27||Oe===null||(ge=Oe,O?(Oe=tu(p,I),Oe!=null&&Q.unshift(Lh(p,Oe,ge))):O||(Oe=tu(p,I),Oe!=null&&Q.push(Lh(p,Oe,ge)))),p=p.return}Q.length!==0&&u.push({event:f,listeners:Q})}var IL=/\r\n?/g,DL=/\u0000|\uFFFD/g;function m5(u){return(typeof u=="string"?u:""+u).replace(IL,`
`).replace(DL,"")}function g5(u,f){return f=m5(f),m5(u)===f}function ir(u,f,p,g,O,I){switch(p){case"children":typeof g=="string"?f==="body"||f==="textarea"&&g===""||Wi(u,g):(typeof g=="number"||typeof g=="bigint")&&f!=="body"&&Wi(u,""+g);break;case"className":ha(u,"class",g);break;case"tabIndex":ha(u,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ha(u,p,g);break;case"style":Ha(u,g,I);break;case"data":if(f!=="object"){ha(u,"data",g);break}case"src":case"href":if(g===""&&(f!=="a"||p!=="href")){u.removeAttribute(p);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){u.removeAttribute(p);break}g=Vl(""+g),u.setAttribute(p,g);break;case"action":case"formAction":if(typeof g=="function"){u.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(p==="formAction"?(f!=="input"&&ir(u,f,"name",O.name,O,null),ir(u,f,"formEncType",O.formEncType,O,null),ir(u,f,"formMethod",O.formMethod,O,null),ir(u,f,"formTarget",O.formTarget,O,null)):(ir(u,f,"encType",O.encType,O,null),ir(u,f,"method",O.method,O,null),ir(u,f,"target",O.target,O,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){u.removeAttribute(p);break}g=Vl(""+g),u.setAttribute(p,g);break;case"onClick":g!=null&&(u.onclick=Ka);break;case"onScroll":g!=null&&Ct("scroll",u);break;case"onScrollEnd":g!=null&&Ct("scrollend",u);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(p=g.__html,p!=null){if(O.children!=null)throw Error(n(60));u.innerHTML=p}}break;case"multiple":u.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":u.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){u.removeAttribute("xlink:href");break}p=Vl(""+g),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?u.setAttribute(p,""+g):u.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?u.setAttribute(p,""):u.removeAttribute(p);break;case"capture":case"download":g===!0?u.setAttribute(p,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?u.setAttribute(p,g):u.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?u.setAttribute(p,g):u.removeAttribute(p);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?u.removeAttribute(p):u.setAttribute(p,g);break;case"popover":Ct("beforetoggle",u),Ct("toggle",u),Va(u,"popover",g);break;case"xlinkActuate":bn(u,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":bn(u,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":bn(u,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":bn(u,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":bn(u,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":bn(u,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":bn(u,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":bn(u,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":bn(u,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Va(u,"is",g);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Gb.get(p)||p,Va(u,p,g))}}function M2(u,f,p,g,O,I){switch(p){case"style":Ha(u,g,I);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(p=g.__html,p!=null){if(O.children!=null)throw Error(n(60));u.innerHTML=p}}break;case"children":typeof g=="string"?Wi(u,g):(typeof g=="number"||typeof g=="bigint")&&Wi(u,""+g);break;case"onScroll":g!=null&&Ct("scroll",u);break;case"onScrollEnd":g!=null&&Ct("scrollend",u);break;case"onClick":g!=null&&(u.onclick=Ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!en.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(O=p.endsWith("Capture"),f=p.slice(2,O?p.length-7:void 0),I=u[Tt]||null,I=I!=null?I[p]:null,typeof I=="function"&&u.removeEventListener(f,I,O),typeof g=="function")){typeof I!="function"&&I!==null&&(p in u?u[p]=null:u.hasAttribute(p)&&u.removeAttribute(p)),u.addEventListener(f,g,O);break e}p in u?u[p]=g:g===!0?u.setAttribute(p,""):Va(u,p,g)}}}function Pn(u,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",u),Ct("load",u);var g=!1,O=!1,I;for(I in p)if(p.hasOwnProperty(I)){var Q=p[I];if(Q!=null)switch(I){case"src":g=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:ir(u,f,I,Q,p,null)}}O&&ir(u,f,"srcSet",p.srcSet,p,null),g&&ir(u,f,"src",p.src,p,null);return;case"input":Ct("invalid",u);var se=I=Q=O=null,ge=null,Oe=null;for(g in p)if(p.hasOwnProperty(g)){var qe=p[g];if(qe!=null)switch(g){case"name":O=qe;break;case"type":Q=qe;break;case"checked":ge=qe;break;case"defaultChecked":Oe=qe;break;case"value":I=qe;break;case"defaultValue":se=qe;break;case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,f));break;default:ir(u,f,g,qe,p,null)}}ah(u,I,se,ge,Oe,Q,O,!1);return;case"select":Ct("invalid",u),g=Q=I=null;for(O in p)if(p.hasOwnProperty(O)&&(se=p[O],se!=null))switch(O){case"value":I=se;break;case"defaultValue":Q=se;break;case"multiple":g=se;default:ir(u,f,O,se,p,null)}f=I,p=Q,u.multiple=!!g,f!=null?Xo(u,!!g,f,!1):p!=null&&Xo(u,!!g,p,!0);return;case"textarea":Ct("invalid",u),I=O=g=null;for(Q in p)if(p.hasOwnProperty(Q)&&(se=p[Q],se!=null))switch(Q){case"value":g=se;break;case"defaultValue":O=se;break;case"children":I=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(91));break;default:ir(u,f,Q,se,p,null)}Mc(u,g,O,I);return;case"option":for(ge in p)p.hasOwnProperty(ge)&&(g=p[ge],g!=null)&&(ge==="selected"?u.selected=g&&typeof g!="function"&&typeof g!="symbol":ir(u,f,ge,g,p,null));return;case"dialog":Ct("beforetoggle",u),Ct("toggle",u),Ct("cancel",u),Ct("close",u);break;case"iframe":case"object":Ct("load",u);break;case"video":case"audio":for(g=0;g<qh.length;g++)Ct(qh[g],u);break;case"image":Ct("error",u),Ct("load",u);break;case"details":Ct("toggle",u);break;case"embed":case"source":case"link":Ct("error",u),Ct("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Oe in p)if(p.hasOwnProperty(Oe)&&(g=p[Oe],g!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:ir(u,f,Oe,g,p,null)}return;default:if(uh(f)){for(qe in p)p.hasOwnProperty(qe)&&(g=p[qe],g!==void 0&&M2(u,f,qe,g,p,void 0));return}}for(se in p)p.hasOwnProperty(se)&&(g=p[se],g!=null&&ir(u,f,se,g,p,null))}function PL(u,f,p,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,I=null,Q=null,se=null,ge=null,Oe=null,qe=null;for(Ie in p){var Fe=p[Ie];if(p.hasOwnProperty(Ie)&&Fe!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":ge=Fe;default:g.hasOwnProperty(Ie)||ir(u,f,Ie,null,g,Fe)}}for(var Ne in g){var Ie=g[Ne];if(Fe=p[Ne],g.hasOwnProperty(Ne)&&(Ie!=null||Fe!=null))switch(Ne){case"type":I=Ie;break;case"name":O=Ie;break;case"checked":Oe=Ie;break;case"defaultChecked":qe=Ie;break;case"value":Q=Ie;break;case"defaultValue":se=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,f));break;default:Ie!==Fe&&ir(u,f,Ne,Ie,g,Fe)}}ih(u,Q,se,ge,Oe,qe,I,O);return;case"select":Ie=Q=se=Ne=null;for(I in p)if(ge=p[I],p.hasOwnProperty(I)&&ge!=null)switch(I){case"value":break;case"multiple":Ie=ge;default:g.hasOwnProperty(I)||ir(u,f,I,null,g,ge)}for(O in g)if(I=g[O],ge=p[O],g.hasOwnProperty(O)&&(I!=null||ge!=null))switch(O){case"value":Ne=I;break;case"defaultValue":se=I;break;case"multiple":Q=I;default:I!==ge&&ir(u,f,O,I,g,ge)}f=se,p=Q,g=Ie,Ne!=null?Xo(u,!!p,Ne,!1):!!g!=!!p&&(f!=null?Xo(u,!!p,f,!0):Xo(u,!!p,p?[]:"",!1));return;case"textarea":Ie=Ne=null;for(se in p)if(O=p[se],p.hasOwnProperty(se)&&O!=null&&!g.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:ir(u,f,se,null,g,O)}for(Q in g)if(O=g[Q],I=p[Q],g.hasOwnProperty(Q)&&(O!=null||I!=null))switch(Q){case"value":Ne=O;break;case"defaultValue":Ie=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(n(91));break;default:O!==I&&ir(u,f,Q,O,g,I)}oh(u,Ne,Ie);return;case"option":for(var st in p)Ne=p[st],p.hasOwnProperty(st)&&Ne!=null&&!g.hasOwnProperty(st)&&(st==="selected"?u.selected=!1:ir(u,f,st,null,g,Ne));for(ge in g)Ne=g[ge],Ie=p[ge],g.hasOwnProperty(ge)&&Ne!==Ie&&(Ne!=null||Ie!=null)&&(ge==="selected"?u.selected=Ne&&typeof Ne!="function"&&typeof Ne!="symbol":ir(u,f,ge,Ne,g,Ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in p)Ne=p[yt],p.hasOwnProperty(yt)&&Ne!=null&&!g.hasOwnProperty(yt)&&ir(u,f,yt,null,g,Ne);for(Oe in g)if(Ne=g[Oe],Ie=p[Oe],g.hasOwnProperty(Oe)&&Ne!==Ie&&(Ne!=null||Ie!=null))switch(Oe){case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(n(137,f));break;default:ir(u,f,Oe,Ne,g,Ie)}return;default:if(uh(f)){for(var ar in p)Ne=p[ar],p.hasOwnProperty(ar)&&Ne!==void 0&&!g.hasOwnProperty(ar)&&M2(u,f,ar,void 0,g,Ne);for(qe in g)Ne=g[qe],Ie=p[qe],!g.hasOwnProperty(qe)||Ne===Ie||Ne===void 0&&Ie===void 0||M2(u,f,qe,Ne,g,Ie);return}}for(var Ae in p)Ne=p[Ae],p.hasOwnProperty(Ae)&&Ne!=null&&!g.hasOwnProperty(Ae)&&ir(u,f,Ae,null,g,Ne);for(Fe in g)Ne=g[Fe],Ie=p[Fe],!g.hasOwnProperty(Fe)||Ne===Ie||Ne==null&&Ie==null||ir(u,f,Fe,Ne,g,Ie)}function v5(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UL(){if(typeof performance.getEntriesByType=="function"){for(var u=0,f=0,p=performance.getEntriesByType("resource"),g=0;g<p.length;g++){var O=p[g],I=O.transferSize,Q=O.initiatorType,se=O.duration;if(I&&se&&v5(Q)){for(Q=0,se=O.responseEnd,g+=1;g<p.length;g++){var ge=p[g],Oe=ge.startTime;if(Oe>se)break;var qe=ge.transferSize,Fe=ge.initiatorType;qe&&v5(Fe)&&(ge=ge.responseEnd,Q+=qe*(ge<se?1:(se-Oe)/(ge-Oe)))}if(--g,f+=8*(I+Q)/(O.duration/1e3),u++,10<u)break}}if(0<u)return f/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var T2=null,R2=null;function Qy(u){return u.nodeType===9?u:u.ownerDocument}function b5(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w5(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function O2(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var C2=null;function kL(){var u=window.event;return u&&u.type==="popstate"?u===C2?!1:(C2=u,!0):(C2=null,!1)}var _5=typeof setTimeout=="function"?setTimeout:void 0,qL=typeof clearTimeout=="function"?clearTimeout:void 0,E5=typeof Promise=="function"?Promise:void 0,LL=typeof queueMicrotask=="function"?queueMicrotask:typeof E5<"u"?function(u){return E5.resolve(null).then(u).catch(jL)}:_5;function jL(u){setTimeout(function(){throw u})}function vu(u){return u==="head"}function x5(u,f){var p=f,g=0;do{var O=p.nextSibling;if(u.removeChild(p),O&&O.nodeType===8)if(p=O.data,p==="/$"||p==="/&"){if(g===0){u.removeChild(O),Sf(f);return}g--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")g++;else if(p==="html")jh(u.ownerDocument.documentElement);else if(p==="head"){p=u.ownerDocument.head,jh(p);for(var I=p.firstChild;I;){var Q=I.nextSibling,se=I.nodeName;I[Gi]||se==="SCRIPT"||se==="STYLE"||se==="LINK"&&I.rel.toLowerCase()==="stylesheet"||p.removeChild(I),I=Q}}else p==="body"&&jh(u.ownerDocument.body);p=O}while(p);Sf(f)}function A5(u,f){var p=u;u=0;do{var g=p.nextSibling;if(p.nodeType===1?f?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(f?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),g&&g.nodeType===8)if(p=g.data,p==="/$"){if(u===0)break;u--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||u++;p=g}while(p)}function N2(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":N2(p),Fa(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}u.removeChild(p)}}function $L(u,f,p,g){for(;u.nodeType===1;){var O=p;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!g&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(g){if(!u[Gi])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(I=u.getAttribute("rel"),I==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(I!==O.rel||u.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||u.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||u.getAttribute("title")!==(O.title==null?null:O.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(I=u.getAttribute("src"),(I!==(O.src==null?null:O.src)||u.getAttribute("type")!==(O.type==null?null:O.type)||u.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&I&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var I=O.name==null?null:""+O.name;if(O.type==="hidden"&&u.getAttribute("name")===I)return u}else return u;if(u=_a(u.nextSibling),u===null)break}return null}function FL(u,f,p){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!p||(u=_a(u.nextSibling),u===null))return null;return u}function S5(u,f){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!f||(u=_a(u.nextSibling),u===null))return null;return u}function B2(u){return u.data==="$?"||u.data==="$~"}function I2(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function zL(u,f){var p=u.ownerDocument;if(u.data==="$~")u._reactRetry=f;else if(u.data!=="$?"||p.readyState!=="loading")f();else{var g=function(){f(),p.removeEventListener("DOMContentLoaded",g)};p.addEventListener("DOMContentLoaded",g),u._reactRetry=g}}function _a(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return u}var D2=null;function M5(u){u=u.nextSibling;for(var f=0;u;){if(u.nodeType===8){var p=u.data;if(p==="/$"||p==="/&"){if(f===0)return _a(u.nextSibling);f--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||f++}u=u.nextSibling}return null}function T5(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var p=u.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(f===0)return u;f--}else p!=="/$"&&p!=="/&"||f++}u=u.previousSibling}return null}function R5(u,f,p){switch(f=Qy(p),u){case"html":if(u=f.documentElement,!u)throw Error(n(452));return u;case"head":if(u=f.head,!u)throw Error(n(453));return u;case"body":if(u=f.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function jh(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);Fa(u)}var Ea=new Map,O5=new Set;function Jy(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var bo=U.d;U.d={f:VL,r:HL,D:KL,C:GL,L:WL,m:ZL,X:QL,S:YL,M:JL};function VL(){var u=bo.f(),f=zy();return u||f}function HL(u){var f=Vr(u);f!==null&&f.tag===5&&f.type==="form"?KS(f):bo.r(u)}var Ef=typeof document>"u"?null:document;function C5(u,f,p){var g=Ef;if(g&&typeof f=="string"&&f){var O=Ri(f);O='link[rel="'+u+'"][href="'+O+'"]',typeof p=="string"&&(O+='[crossorigin="'+p+'"]'),O5.has(O)||(O5.add(O),u={rel:u,crossOrigin:p,href:f},g.querySelector(O)===null&&(f=g.createElement("link"),Pn(f,"link",u),gr(f),g.head.appendChild(f)))}}function KL(u){bo.D(u),C5("dns-prefetch",u,null)}function GL(u,f){bo.C(u,f),C5("preconnect",u,f)}function WL(u,f,p){bo.L(u,f,p);var g=Ef;if(g&&u&&f){var O='link[rel="preload"][as="'+Ri(f)+'"]';f==="image"&&p&&p.imageSrcSet?(O+='[imagesrcset="'+Ri(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(O+='[imagesizes="'+Ri(p.imageSizes)+'"]')):O+='[href="'+Ri(u)+'"]';var I=O;switch(f){case"style":I=xf(u);break;case"script":I=Af(u)}Ea.has(I)||(u=h({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:u,as:f},p),Ea.set(I,u),g.querySelector(O)!==null||f==="style"&&g.querySelector($h(I))||f==="script"&&g.querySelector(Fh(I))||(f=g.createElement("link"),Pn(f,"link",u),gr(f),g.head.appendChild(f)))}}function ZL(u,f){bo.m(u,f);var p=Ef;if(p&&u){var g=f&&typeof f.as=="string"?f.as:"script",O='link[rel="modulepreload"][as="'+Ri(g)+'"][href="'+Ri(u)+'"]',I=O;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=Af(u)}if(!Ea.has(I)&&(u=h({rel:"modulepreload",href:u},f),Ea.set(I,u),p.querySelector(O)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Fh(I)))return}g=p.createElement("link"),Pn(g,"link",u),gr(g),p.head.appendChild(g)}}}function YL(u,f,p){bo.S(u,f,p);var g=Ef;if(g&&u){var O=Si(g).hoistableStyles,I=xf(u);f=f||"default";var Q=O.get(I);if(!Q){var se={loading:0,preload:null};if(Q=g.querySelector($h(I)))se.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},p),(p=Ea.get(I))&&P2(u,p);var ge=Q=g.createElement("link");gr(ge),Pn(ge,"link",u),ge._p=new Promise(function(Oe,qe){ge.onload=Oe,ge.onerror=qe}),ge.addEventListener("load",function(){se.loading|=1}),ge.addEventListener("error",function(){se.loading|=2}),se.loading|=4,Xy(Q,f,g)}Q={type:"stylesheet",instance:Q,count:1,state:se},O.set(I,Q)}}}function QL(u,f){bo.X(u,f);var p=Ef;if(p&&u){var g=Si(p).hoistableScripts,O=Af(u),I=g.get(O);I||(I=p.querySelector(Fh(O)),I||(u=h({src:u,async:!0},f),(f=Ea.get(O))&&U2(u,f),I=p.createElement("script"),gr(I),Pn(I,"link",u),p.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},g.set(O,I))}}function JL(u,f){bo.M(u,f);var p=Ef;if(p&&u){var g=Si(p).hoistableScripts,O=Af(u),I=g.get(O);I||(I=p.querySelector(Fh(O)),I||(u=h({src:u,async:!0,type:"module"},f),(f=Ea.get(O))&&U2(u,f),I=p.createElement("script"),gr(I),Pn(I,"link",u),p.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},g.set(O,I))}}function N5(u,f,p,g){var O=(O=oe.current)?Jy(O):null;if(!O)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=xf(p.href),p=Si(O).hoistableStyles,g=p.get(f),g||(g={type:"style",instance:null,count:0,state:null},p.set(f,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){u=xf(p.href);var I=Si(O).hoistableStyles,Q=I.get(u);if(Q||(O=O.ownerDocument||O,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(u,Q),(I=O.querySelector($h(u)))&&!I._p&&(Q.instance=I,Q.state.loading=5),Ea.has(u)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ea.set(u,p),I||XL(O,u,p,Q.state))),f&&g===null)throw Error(n(528,""));return Q}if(f&&g!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Af(p),p=Si(O).hoistableScripts,g=p.get(f),g||(g={type:"script",instance:null,count:0,state:null},p.set(f,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function xf(u){return'href="'+Ri(u)+'"'}function $h(u){return'link[rel="stylesheet"]['+u+"]"}function B5(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function XL(u,f,p,g){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?g.loading=1:(f=u.createElement("link"),g.preload=f,f.addEventListener("load",function(){return g.loading|=1}),f.addEventListener("error",function(){return g.loading|=2}),Pn(f,"link",p),gr(f),u.head.appendChild(f))}function Af(u){return'[src="'+Ri(u)+'"]'}function Fh(u){return"script[async]"+u}function I5(u,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var g=u.querySelector('style[data-href~="'+Ri(p.href)+'"]');if(g)return f.instance=g,gr(g),g;var O=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return g=(u.ownerDocument||u).createElement("style"),gr(g),Pn(g,"style",O),Xy(g,p.precedence,u),f.instance=g;case"stylesheet":O=xf(p.href);var I=u.querySelector($h(O));if(I)return f.state.loading|=4,f.instance=I,gr(I),I;g=B5(p),(O=Ea.get(O))&&P2(g,O),I=(u.ownerDocument||u).createElement("link"),gr(I);var Q=I;return Q._p=new Promise(function(se,ge){Q.onload=se,Q.onerror=ge}),Pn(I,"link",g),f.state.loading|=4,Xy(I,p.precedence,u),f.instance=I;case"script":return I=Af(p.src),(O=u.querySelector(Fh(I)))?(f.instance=O,gr(O),O):(g=p,(O=Ea.get(I))&&(g=h({},p),U2(g,O)),u=u.ownerDocument||u,O=u.createElement("script"),gr(O),Pn(O,"link",g),u.head.appendChild(O),f.instance=O);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(g=f.instance,f.state.loading|=4,Xy(g,p.precedence,u));return f.instance}function Xy(u,f,p){for(var g=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=g.length?g[g.length-1]:null,I=O,Q=0;Q<g.length;Q++){var se=g[Q];if(se.dataset.precedence===f)I=se;else if(I!==O)break}I?I.parentNode.insertBefore(u,I.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(u,f.firstChild))}function P2(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function U2(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var em=null;function D5(u,f,p){if(em===null){var g=new Map,O=em=new Map;O.set(p,g)}else O=em,g=O.get(p),g||(g=new Map,O.set(p,g));if(g.has(u))return g;for(g.set(u,null),p=p.getElementsByTagName(u),O=0;O<p.length;O++){var I=p[O];if(!(I[Gi]||I[Sr]||u==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=I.getAttribute(f)||"";Q=u+Q;var se=g.get(Q);se?se.push(I):g.set(Q,[I])}}return g}function P5(u,f,p){u=u.ownerDocument||u,u.head.insertBefore(p,f==="title"?u.querySelector("head > title"):null)}function ej(u,f,p){if(p===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;return f.rel==="stylesheet"?(u=f.disabled,typeof f.precedence=="string"&&u==null):!0;case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function U5(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function tj(u,f,p,g){if(p.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var O=xf(g.href),I=f.querySelector($h(O));if(I){f=I._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(u.count++,u=tm.bind(u),f.then(u,u)),p.state.loading|=4,p.instance=I,gr(I);return}I=f.ownerDocument||f,g=B5(g),(O=Ea.get(O))&&P2(g,O),I=I.createElement("link"),gr(I);var Q=I;Q._p=new Promise(function(se,ge){Q.onload=se,Q.onerror=ge}),Pn(I,"link",g),p.instance=I}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(u.count++,p=tm.bind(u),f.addEventListener("load",p),f.addEventListener("error",p))}}var k2=0;function rj(u,f){return u.stylesheets&&u.count===0&&nm(u,u.stylesheets),0<u.count||0<u.imgCount?function(p){var g=setTimeout(function(){if(u.stylesheets&&nm(u,u.stylesheets),u.unsuspend){var I=u.unsuspend;u.unsuspend=null,I()}},6e4+f);0<u.imgBytes&&k2===0&&(k2=62500*UL());var O=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&nm(u,u.stylesheets),u.unsuspend)){var I=u.unsuspend;u.unsuspend=null,I()}},(u.imgBytes>k2?50:800)+f);return u.unsuspend=p,function(){u.unsuspend=null,clearTimeout(g),clearTimeout(O)}}:null}function tm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nm(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var rm=null;function nm(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,rm=new Map,f.forEach(nj,u),rm=null,tm.call(u))}function nj(u,f){if(!(f.state.loading&4)){var p=rm.get(u);if(p)var g=p.get(null);else{p=new Map,rm.set(u,p);for(var O=u.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<O.length;I++){var Q=O[I];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(p.set(Q.dataset.precedence,Q),g=Q)}g&&p.set(null,g)}O=f.instance,Q=O.getAttribute("data-precedence"),I=p.get(Q)||g,I===g&&p.set(null,O),p.set(Q,O),this.count++,g=tm.bind(this),O.addEventListener("load",g),O.addEventListener("error",g),I?I.parentNode.insertBefore(O,I.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(O,u.firstChild)),f.state.loading|=4}}var zh={$$typeof:N,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function ij(u,f,p,g,O,I,Q,se,ge){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.hiddenUpdates=kt(null),this.identifierPrefix=g,this.onUncaughtError=O,this.onCaughtError=I,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function k5(u,f,p,g,O,I,Q,se,ge,Oe,qe,Fe){return u=new ij(u,f,p,Q,ge,Oe,qe,Fe,se),f=1,I===!0&&(f|=24),I=Qi(3,null,null,f),u.current=I,I.stateNode=u,f=mw(),f.refCount++,u.pooledCache=f,f.refCount++,I.memoizedState={element:g,isDehydrated:p,cache:f},ww(I),u}function q5(u){return u?(u=ef,u):ef}function L5(u,f,p,g,O,I){O=q5(O),g.context===null?g.context=O:g.pendingContext=O,g=ou(f),g.payload={element:p},I=I===void 0?null:I,I!==null&&(g.callback=I),p=uu(u,g,f),p!==null&&(Pi(p,u,f),_h(p,u,f))}function j5(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var p=u.retryLane;u.retryLane=p!==0&&p<f?p:f}}function q2(u,f){j5(u,f),(u=u.alternate)&&j5(u,f)}function $5(u){if(u.tag===13||u.tag===31){var f=Cc(u,67108864);f!==null&&Pi(f,u,67108864),q2(u,67108864)}}function F5(u){if(u.tag===13||u.tag===31){var f=ra();f=Yt(f);var p=Cc(u,f);p!==null&&Pi(p,u,f),q2(u,f)}}var im=!0;function aj(u,f,p,g){var O=_.T;_.T=null;var I=U.p;try{U.p=2,L2(u,f,p,g)}finally{U.p=I,_.T=O}}function sj(u,f,p,g){var O=_.T;_.T=null;var I=U.p;try{U.p=8,L2(u,f,p,g)}finally{U.p=I,_.T=O}}function L2(u,f,p,g){if(im){var O=j2(g);if(O===null)S2(u,f,g,am,p),V5(u,g);else if(uj(O,u,f,p,g))g.stopPropagation();else if(V5(u,g),f&4&&-1<oj.indexOf(u)){for(;O!==null;){var I=Vr(O);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var Q=nt(I.pendingLanes);if(Q!==0){var se=I;for(se.pendingLanes|=2,se.entangledLanes|=2;Q;){var ge=1<<31-pe(Q);se.entanglements[1]|=ge,Q&=~ge}bs(I),(Gt&6)===0&&($y=Me()+500,kh(0))}}break;case 31:case 13:se=Cc(I,2),se!==null&&Pi(se,I,2),zy(),q2(I,2)}if(I=j2(g),I===null&&S2(u,f,g,am,p),I===O)break;O=I}O!==null&&g.stopPropagation()}else S2(u,f,g,null,p)}}function j2(u){return u=Hl(u),$2(u)}var am=null;function $2(u){if(am=null,u=Xr(u),u!==null){var f=a(u);if(f===null)u=null;else{var p=f.tag;if(p===13){if(u=o(f),u!==null)return u;u=null}else if(p===31){if(u=s(f),u!==null)return u;u=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return am=u,null}function z5(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Qe:return 2;case q:return 8;case w:case A:return 32;case K:return 268435456;default:return 32}default:return 32}}var F2=!1,bu=null,wu=null,_u=null,Vh=new Map,Hh=new Map,Eu=[],oj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V5(u,f){switch(u){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":wu=null;break;case"mouseover":case"mouseout":_u=null;break;case"pointerover":case"pointerout":Vh.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hh.delete(f.pointerId)}}function Kh(u,f,p,g,O,I){return u===null||u.nativeEvent!==I?(u={blockedOn:f,domEventName:p,eventSystemFlags:g,nativeEvent:I,targetContainers:[O]},f!==null&&(f=Vr(f),f!==null&&$5(f)),u):(u.eventSystemFlags|=g,f=u.targetContainers,O!==null&&f.indexOf(O)===-1&&f.push(O),u)}function uj(u,f,p,g,O){switch(f){case"focusin":return bu=Kh(bu,u,f,p,g,O),!0;case"dragenter":return wu=Kh(wu,u,f,p,g,O),!0;case"mouseover":return _u=Kh(_u,u,f,p,g,O),!0;case"pointerover":var I=O.pointerId;return Vh.set(I,Kh(Vh.get(I)||null,u,f,p,g,O)),!0;case"gotpointercapture":return I=O.pointerId,Hh.set(I,Kh(Hh.get(I)||null,u,f,p,g,O)),!0}return!1}function H5(u){var f=Xr(u.target);if(f!==null){var p=a(f);if(p!==null){if(f=p.tag,f===13){if(f=o(p),f!==null){u.blockedOn=f,cr(u.priority,function(){F5(p)});return}}else if(f===31){if(f=s(p),f!==null){u.blockedOn=f,cr(u.priority,function(){F5(p)});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){u.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}u.blockedOn=null}function sm(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var p=j2(u.nativeEvent);if(p===null){p=u.nativeEvent;var g=new p.constructor(p.type,p);Ga=g,p.target.dispatchEvent(g),Ga=null}else return f=Vr(p),f!==null&&$5(f),u.blockedOn=p,!1;f.shift()}return!0}function K5(u,f,p){sm(u)&&p.delete(f)}function cj(){F2=!1,bu!==null&&sm(bu)&&(bu=null),wu!==null&&sm(wu)&&(wu=null),_u!==null&&sm(_u)&&(_u=null),Vh.forEach(K5),Hh.forEach(K5)}function om(u,f){u.blockedOn===f&&(u.blockedOn=null,F2||(F2=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,cj)))}var um=null;function G5(u){um!==u&&(um=u,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){um===u&&(um=null);for(var f=0;f<u.length;f+=3){var p=u[f],g=u[f+1],O=u[f+2];if(typeof g!="function"){if($2(g||p)===null)continue;break}var I=Vr(p);I!==null&&(u.splice(f,3),f-=3,jw(I,{pending:!0,data:O,method:p.method,action:g},g,O))}}))}function Sf(u){function f(ge){return om(ge,u)}bu!==null&&om(bu,u),wu!==null&&om(wu,u),_u!==null&&om(_u,u),Vh.forEach(f),Hh.forEach(f);for(var p=0;p<Eu.length;p++){var g=Eu[p];g.blockedOn===u&&(g.blockedOn=null)}for(;0<Eu.length&&(p=Eu[0],p.blockedOn===null);)H5(p),p.blockedOn===null&&Eu.shift();if(p=(u.ownerDocument||u).$$reactFormReplay,p!=null)for(g=0;g<p.length;g+=3){var O=p[g],I=p[g+1],Q=O[Tt]||null;if(typeof I=="function")Q||G5(p);else if(Q){var se=null;if(I&&I.hasAttribute("formAction")){if(O=I,Q=I[Tt]||null)se=Q.formAction;else if($2(O)!==null)continue}else se=Q.action;typeof se=="function"?p[g+1]=se:(p.splice(g,3),g-=3),G5(p)}}}function W5(){function u(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(Q){return O=Q})},focusReset:"manual",scroll:"manual"})}function f(){O!==null&&(O(),O=null),g||setTimeout(p,20)}function p(){if(!g&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,O=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(p,100),function(){g=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),O!==null&&(O(),O=null)}}}function z2(u){this._internalRoot=u}cm.prototype.render=z2.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,g=ra();L5(p,g,u,f,null,null)},cm.prototype.unmount=z2.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;L5(u.current,2,null,u,null,null),zy(),f[Kt]=null}};function cm(u){this._internalRoot=u}cm.prototype.unstable_scheduleHydration=function(u){if(u){var f=ui();u={blockedOn:null,target:u,priority:f};for(var p=0;p<Eu.length&&f!==0&&f<Eu[p].priority;p++);Eu.splice(p,0,u),p===0&&H5(u)}};var Z5=e.version;if(Z5!=="19.2.3")throw Error(n(527,Z5,"19.2.3"));U.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=l(f),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var lj={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{ne=lm.inject(lj),be=lm}catch{}}return Wh.createRoot=function(u,f){if(!i(u))throw Error(n(299));var p=!1,g="",O=r4,I=n4,Q=i4;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(g=f.identifierPrefix),f.onUncaughtError!==void 0&&(O=f.onUncaughtError),f.onCaughtError!==void 0&&(I=f.onCaughtError),f.onRecoverableError!==void 0&&(Q=f.onRecoverableError)),f=k5(u,1,!1,null,null,p,g,null,O,I,Q,W5),u[Kt]=f.current,A2(u),new z2(f)},Wh.hydrateRoot=function(u,f,p){if(!i(u))throw Error(n(299));var g=!1,O="",I=r4,Q=n4,se=i4,ge=null;return p!=null&&(p.unstable_strictMode===!0&&(g=!0),p.identifierPrefix!==void 0&&(O=p.identifierPrefix),p.onUncaughtError!==void 0&&(I=p.onUncaughtError),p.onCaughtError!==void 0&&(Q=p.onCaughtError),p.onRecoverableError!==void 0&&(se=p.onRecoverableError),p.formState!==void 0&&(ge=p.formState)),f=k5(u,1,!0,f,p??null,g,O,ge,I,Q,se,W5),f.context=q5(null),p=f.current,g=ra(),g=Yt(g),O=ou(g),O.callback=null,uu(p,O,g),p=g,f.current.lanes=p,Ft(f,p),bs(f),u[Kt]=f.current,A2(u),new cm(f)},Wh.version="19.2.3",Wh}var sM;function Ej(){if(sM)return K2.exports;sM=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),K2.exports=_j(),K2.exports}var xj=Ej();const Aj=Zo(xj);var fm={exports:{}};const Sj={},Mj=Object.freeze(Object.defineProperty({__proto__:null,default:Sj},Symbol.toStringTag,{value:"Module"})),Jv=dj(Mj);var oM;function O8(){if(oM)return fm.exports;oM=1;var r;fm.exports=function(i){return r||(r=new e(null)),r.generate(i)};function e(n){this.rand=n}if(fm.exports.Rand=e,e.prototype.generate=function(i){return this._rand(i)},e.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var a=new Uint8Array(i),o=0;o<a.length;o++)a[o]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(i){var a=new Uint8Array(i);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(i){var a=new Uint8Array(i);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t=Jv;if(typeof t.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(i){return t.randomBytes(i)}}catch{}return fm.exports}var Tj=O8();const Rj=Zo(Tj);var Y2={},sr={},Q2,uM;function kl(){if(uM)return Q2;uM=1,Q2=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,n,i){if(t!=n)throw new Error(i||"Assertion failed: "+t+" != "+n)},Q2}var dm={exports:{}},cM;function Ws(){return cM||(cM=1,typeof Object.create=="function"?dm.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:dm.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),dm.exports}var lM;function Zs(){if(lM)return sr;lM=1;var r=kl(),e=Ws();sr.inherits=e;function t(M,C){return(M.charCodeAt(C)&64512)!==55296||C<0||C+1>=M.length?!1:(M.charCodeAt(C+1)&64512)===56320}function n(M,C){if(Array.isArray(M))return M.slice();if(!M)return[];var R=[];if(typeof M=="string")if(C){if(C==="hex")for(M=M.replace(/[^a-z0-9]+/ig,""),M.length%2!==0&&(M="0"+M),_=0;_<M.length;_+=2)R.push(parseInt(M[_]+M[_+1],16))}else for(var S=0,_=0;_<M.length;_++){var U=M.charCodeAt(_);U<128?R[S++]=U:U<2048?(R[S++]=U>>6|192,R[S++]=U&63|128):t(M,_)?(U=65536+((U&1023)<<10)+(M.charCodeAt(++_)&1023),R[S++]=U>>18|240,R[S++]=U>>12&63|128,R[S++]=U>>6&63|128,R[S++]=U&63|128):(R[S++]=U>>12|224,R[S++]=U>>6&63|128,R[S++]=U&63|128)}else for(_=0;_<M.length;_++)R[_]=M[_]|0;return R}sr.toArray=n;function i(M){for(var C="",R=0;R<M.length;R++)C+=s(M[R].toString(16));return C}sr.toHex=i;function a(M){var C=M>>>24|M>>>8&65280|M<<8&16711680|(M&255)<<24;return C>>>0}sr.htonl=a;function o(M,C){for(var R="",S=0;S<M.length;S++){var _=M[S];C==="little"&&(_=a(_)),R+=c(_.toString(16))}return R}sr.toHex32=o;function s(M){return M.length===1?"0"+M:M}sr.zero2=s;function c(M){return M.length===7?"0"+M:M.length===6?"00"+M:M.length===5?"000"+M:M.length===4?"0000"+M:M.length===3?"00000"+M:M.length===2?"000000"+M:M.length===1?"0000000"+M:M}sr.zero8=c;function l(M,C,R,S){var _=R-C;r(_%4===0);for(var U=new Array(_/4),H=0,V=C;H<U.length;H++,V+=4){var P;S==="big"?P=M[V]<<24|M[V+1]<<16|M[V+2]<<8|M[V+3]:P=M[V+3]<<24|M[V+2]<<16|M[V+1]<<8|M[V],U[H]=P>>>0}return U}sr.join32=l;function d(M,C){for(var R=new Array(M.length*4),S=0,_=0;S<M.length;S++,_+=4){var U=M[S];C==="big"?(R[_]=U>>>24,R[_+1]=U>>>16&255,R[_+2]=U>>>8&255,R[_+3]=U&255):(R[_+3]=U>>>24,R[_+2]=U>>>16&255,R[_+1]=U>>>8&255,R[_]=U&255)}return R}sr.split32=d;function h(M,C){return M>>>C|M<<32-C}sr.rotr32=h;function y(M,C){return M<<C|M>>>32-C}sr.rotl32=y;function m(M,C){return M+C>>>0}sr.sum32=m;function b(M,C,R){return M+C+R>>>0}sr.sum32_3=b;function v(M,C,R,S){return M+C+R+S>>>0}sr.sum32_4=v;function E(M,C,R,S,_){return M+C+R+S+_>>>0}sr.sum32_5=E;function x(M,C,R,S){var _=M[C],U=M[C+1],H=S+U>>>0,V=(H<S?1:0)+R+_;M[C]=V>>>0,M[C+1]=H}sr.sum64=x;function D(M,C,R,S){var _=C+S>>>0,U=(_<C?1:0)+M+R;return U>>>0}sr.sum64_hi=D;function N(M,C,R,S){var _=C+S;return _>>>0}sr.sum64_lo=N;function B(M,C,R,S,_,U,H,V){var P=0,$=C;$=$+S>>>0,P+=$<C?1:0,$=$+U>>>0,P+=$<U?1:0,$=$+V>>>0,P+=$<V?1:0;var te=M+R+_+H+P;return te>>>0}sr.sum64_4_hi=B;function k(M,C,R,S,_,U,H,V){var P=C+S+U+V;return P>>>0}sr.sum64_4_lo=k;function F(M,C,R,S,_,U,H,V,P,$){var te=0,ae=C;ae=ae+S>>>0,te+=ae<C?1:0,ae=ae+U>>>0,te+=ae<U?1:0,ae=ae+V>>>0,te+=ae<V?1:0,ae=ae+$>>>0,te+=ae<$?1:0;var ce=M+R+_+H+P+te;return ce>>>0}sr.sum64_5_hi=F;function T(M,C,R,S,_,U,H,V,P,$){var te=C+S+U+V+$;return te>>>0}sr.sum64_5_lo=T;function z(M,C,R){var S=C<<32-R|M>>>R;return S>>>0}sr.rotr64_hi=z;function Z(M,C,R){var S=M<<32-R|C>>>R;return S>>>0}sr.rotr64_lo=Z;function Y(M,C,R){return M>>>R}sr.shr64_hi=Y;function W(M,C,R){var S=M<<32-R|C>>>R;return S>>>0}return sr.shr64_lo=W,sr}var J2={},fM;function T0(){if(fM)return J2;fM=1;var r=Zs(),e=kl();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return J2.BlockHash=t,t.prototype.update=function(i,a){if(i=r.toArray(i,a),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=r.join32(i,0,i.length-o,this.endian);for(var s=0;s<i.length;s+=this._delta32)this._update(i,s,s+this._delta32)}return this},t.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},t.prototype._pad=function(){var i=this.pendingTotal,a=this._delta8,o=a-(i+this.padLength)%a,s=new Array(o+this.padLength);s[0]=128;for(var c=1;c<o;c++)s[c]=0;if(i<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)s[c++]=0;s[c++]=0,s[c++]=0,s[c++]=0,s[c++]=0,s[c++]=i>>>24&255,s[c++]=i>>>16&255,s[c++]=i>>>8&255,s[c++]=i&255}else for(s[c++]=i&255,s[c++]=i>>>8&255,s[c++]=i>>>16&255,s[c++]=i>>>24&255,s[c++]=0,s[c++]=0,s[c++]=0,s[c++]=0,l=8;l<this.padLength;l++)s[c++]=0;return s},J2}var zc={},ws={},dM;function QB(){if(dM)return ws;dM=1;var r=Zs(),e=r.rotr32;function t(d,h,y,m){if(d===0)return n(h,y,m);if(d===1||d===3)return a(h,y,m);if(d===2)return i(h,y,m)}ws.ft_1=t;function n(d,h,y){return d&h^~d&y}ws.ch32=n;function i(d,h,y){return d&h^d&y^h&y}ws.maj32=i;function a(d,h,y){return d^h^y}ws.p32=a;function o(d){return e(d,2)^e(d,13)^e(d,22)}ws.s0_256=o;function s(d){return e(d,6)^e(d,11)^e(d,25)}ws.s1_256=s;function c(d){return e(d,7)^e(d,18)^d>>>3}ws.g0_256=c;function l(d){return e(d,17)^e(d,19)^d>>>10}return ws.g1_256=l,ws}var X2,hM;function Oj(){if(hM)return X2;hM=1;var r=Zs(),e=T0(),t=QB(),n=r.rotl32,i=r.sum32,a=r.sum32_5,o=t.ft_1,s=e.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(l,s),X2=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(h,y){for(var m=this.W,b=0;b<16;b++)m[b]=h[y+b];for(;b<m.length;b++)m[b]=n(m[b-3]^m[b-8]^m[b-14]^m[b-16],1);var v=this.h[0],E=this.h[1],x=this.h[2],D=this.h[3],N=this.h[4];for(b=0;b<m.length;b++){var B=~~(b/20),k=a(n(v,5),o(B,E,x,D),N,m[b],c[B]);N=D,D=x,x=n(E,30),E=v,v=k}this.h[0]=i(this.h[0],v),this.h[1]=i(this.h[1],E),this.h[2]=i(this.h[2],x),this.h[3]=i(this.h[3],D),this.h[4]=i(this.h[4],N)},l.prototype._digest=function(h){return h==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},X2}var e_,pM;function JB(){if(pM)return e_;pM=1;var r=Zs(),e=T0(),t=QB(),n=kl(),i=r.sum32,a=r.sum32_4,o=r.sum32_5,s=t.ch32,c=t.maj32,l=t.s0_256,d=t.s1_256,h=t.g0_256,y=t.g1_256,m=e.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}return r.inherits(v,m),e_=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(x,D){for(var N=this.W,B=0;B<16;B++)N[B]=x[D+B];for(;B<N.length;B++)N[B]=a(y(N[B-2]),N[B-7],h(N[B-15]),N[B-16]);var k=this.h[0],F=this.h[1],T=this.h[2],z=this.h[3],Z=this.h[4],Y=this.h[5],W=this.h[6],M=this.h[7];for(n(this.k.length===N.length),B=0;B<N.length;B++){var C=o(M,d(Z),s(Z,Y,W),this.k[B],N[B]),R=i(l(k),c(k,F,T));M=W,W=Y,Y=Z,Z=i(z,C),z=T,T=F,F=k,k=i(C,R)}this.h[0]=i(this.h[0],k),this.h[1]=i(this.h[1],F),this.h[2]=i(this.h[2],T),this.h[3]=i(this.h[3],z),this.h[4]=i(this.h[4],Z),this.h[5]=i(this.h[5],Y),this.h[6]=i(this.h[6],W),this.h[7]=i(this.h[7],M)},v.prototype._digest=function(x){return x==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},e_}var t_,yM;function Cj(){if(yM)return t_;yM=1;var r=Zs(),e=JB();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),t_=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},t_}var r_,mM;function XB(){if(mM)return r_;mM=1;var r=Zs(),e=T0(),t=kl(),n=r.rotr64_hi,i=r.rotr64_lo,a=r.shr64_hi,o=r.shr64_lo,s=r.sum64,c=r.sum64_hi,l=r.sum64_lo,d=r.sum64_4_hi,h=r.sum64_4_lo,y=r.sum64_5_hi,m=r.sum64_5_lo,b=e.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function E(){if(!(this instanceof E))return new E;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}r.inherits(E,b),r_=E,E.blockSize=1024,E.outSize=512,E.hmacStrength=192,E.padLength=128,E.prototype._prepareBlock=function(R,S){for(var _=this.W,U=0;U<32;U++)_[U]=R[S+U];for(;U<_.length;U+=2){var H=W(_[U-4],_[U-3]),V=M(_[U-4],_[U-3]),P=_[U-14],$=_[U-13],te=Z(_[U-30],_[U-29]),ae=Y(_[U-30],_[U-29]),ce=_[U-32],fe=_[U-31];_[U]=d(H,V,P,$,te,ae,ce,fe),_[U+1]=h(H,V,P,$,te,ae,ce,fe)}},E.prototype._update=function(R,S){this._prepareBlock(R,S);var _=this.W,U=this.h[0],H=this.h[1],V=this.h[2],P=this.h[3],$=this.h[4],te=this.h[5],ae=this.h[6],ce=this.h[7],fe=this.h[8],oe=this.h[9],ye=this.h[10],me=this.h[11],ve=this.h[12],we=this.h[13],De=this.h[14],Te=this.h[15];t(this.k.length===_.length);for(var Se=0;Se<_.length;Se+=2){var Le=De,$e=Te,ie=T(fe,oe),L=z(fe,oe),j=x(fe,oe,ye,me,ve),X=D(fe,oe,ye,me,ve,we),ue=this.k[Se],le=this.k[Se+1],de=_[Se],Be=_[Se+1],Me=y(Le,$e,ie,L,j,X,ue,le,de,Be),Pe=m(Le,$e,ie,L,j,X,ue,le,de,Be);Le=k(U,H),$e=F(U,H),ie=N(U,H,V,P,$),L=B(U,H,V,P,$,te);var Qe=c(Le,$e,ie,L),q=l(Le,$e,ie,L);De=ve,Te=we,ve=ye,we=me,ye=fe,me=oe,fe=c(ae,ce,Me,Pe),oe=l(ce,ce,Me,Pe),ae=$,ce=te,$=V,te=P,V=U,P=H,U=c(Me,Pe,Qe,q),H=l(Me,Pe,Qe,q)}s(this.h,0,U,H),s(this.h,2,V,P),s(this.h,4,$,te),s(this.h,6,ae,ce),s(this.h,8,fe,oe),s(this.h,10,ye,me),s(this.h,12,ve,we),s(this.h,14,De,Te)},E.prototype._digest=function(R){return R==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function x(C,R,S,_,U){var H=C&S^~C&U;return H<0&&(H+=4294967296),H}function D(C,R,S,_,U,H){var V=R&_^~R&H;return V<0&&(V+=4294967296),V}function N(C,R,S,_,U){var H=C&S^C&U^S&U;return H<0&&(H+=4294967296),H}function B(C,R,S,_,U,H){var V=R&_^R&H^_&H;return V<0&&(V+=4294967296),V}function k(C,R){var S=n(C,R,28),_=n(R,C,2),U=n(R,C,7),H=S^_^U;return H<0&&(H+=4294967296),H}function F(C,R){var S=i(C,R,28),_=i(R,C,2),U=i(R,C,7),H=S^_^U;return H<0&&(H+=4294967296),H}function T(C,R){var S=n(C,R,14),_=n(C,R,18),U=n(R,C,9),H=S^_^U;return H<0&&(H+=4294967296),H}function z(C,R){var S=i(C,R,14),_=i(C,R,18),U=i(R,C,9),H=S^_^U;return H<0&&(H+=4294967296),H}function Z(C,R){var S=n(C,R,1),_=n(C,R,8),U=a(C,R,7),H=S^_^U;return H<0&&(H+=4294967296),H}function Y(C,R){var S=i(C,R,1),_=i(C,R,8),U=o(C,R,7),H=S^_^U;return H<0&&(H+=4294967296),H}function W(C,R){var S=n(C,R,19),_=n(R,C,29),U=a(C,R,6),H=S^_^U;return H<0&&(H+=4294967296),H}function M(C,R){var S=i(C,R,19),_=i(R,C,29),U=o(C,R,6),H=S^_^U;return H<0&&(H+=4294967296),H}return r_}var n_,gM;function Nj(){if(gM)return n_;gM=1;var r=Zs(),e=XB();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),n_=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(i){return i==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},n_}var vM;function Bj(){return vM||(vM=1,zc.sha1=Oj(),zc.sha224=Cj(),zc.sha256=JB(),zc.sha384=Nj(),zc.sha512=XB()),zc}var i_={},bM;function Ij(){if(bM)return i_;bM=1;var r=Zs(),e=T0(),t=r.rotl32,n=r.sum32,i=r.sum32_3,a=r.sum32_4,o=e.BlockHash;function s(){if(!(this instanceof s))return new s;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(s,o),i_.ripemd160=s,s.blockSize=512,s.outSize=160,s.hmacStrength=192,s.padLength=64,s.prototype._update=function(E,x){for(var D=this.h[0],N=this.h[1],B=this.h[2],k=this.h[3],F=this.h[4],T=D,z=N,Z=B,Y=k,W=F,M=0;M<80;M++){var C=n(t(a(D,c(M,N,B,k),E[h[M]+x],l(M)),m[M]),F);D=F,F=k,k=t(B,10),B=N,N=C,C=n(t(a(T,c(79-M,z,Z,Y),E[y[M]+x],d(M)),b[M]),W),T=W,W=Y,Y=t(Z,10),Z=z,z=C}C=i(this.h[1],B,Y),this.h[1]=i(this.h[2],k,W),this.h[2]=i(this.h[3],F,T),this.h[3]=i(this.h[4],D,z),this.h[4]=i(this.h[0],N,Z),this.h[0]=C},s.prototype._digest=function(E){return E==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function c(v,E,x,D){return v<=15?E^x^D:v<=31?E&x|~E&D:v<=47?(E|~x)^D:v<=63?E&D|x&~D:E^(x|~D)}function l(v){return v<=15?0:v<=31?1518500249:v<=47?1859775393:v<=63?2400959708:2840853838}function d(v){return v<=15?1352829926:v<=31?1548603684:v<=47?1836072691:v<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return i_}var a_,wM;function Dj(){if(wM)return a_;wM=1;var r=Zs(),e=kl();function t(n,i,a){if(!(this instanceof t))return new t(n,i,a);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(i,a))}return a_=t,t.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var a=i.length;a<this.blockSize;a++)i.push(0);for(a=0;a<i.length;a++)i[a]^=54;for(this.inner=new this.Hash().update(i),a=0;a<i.length;a++)i[a]^=106;this.outer=new this.Hash().update(i)},t.prototype.update=function(i,a){return this.inner.update(i,a),this},t.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},a_}var _M;function Xv(){return _M||(_M=1,(function(r){var e=r;e.utils=Zs(),e.common=T0(),e.sha=Bj(),e.ripemd=Ij(),e.hmac=Dj(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Y2)),Y2}var hd=Xv(),$1={exports:{}},Pj=$1.exports,EM;function Ys(){return EM||(EM=1,(function(r){(function(e,t){function n(W,M){if(!W)throw new Error(M||"Assertion failed")}function i(W,M){W.super_=M;var C=function(){};C.prototype=M.prototype,W.prototype=new C,W.prototype.constructor=W}function a(W,M,C){if(a.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,W!==null&&((M==="le"||M==="be")&&(C=M,M=10),this._init(W||0,M||10,C||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Jv.Buffer}catch{}a.isBN=function(M){return M instanceof a?!0:M!==null&&typeof M=="object"&&M.constructor.wordSize===a.wordSize&&Array.isArray(M.words)},a.max=function(M,C){return M.cmp(C)>0?M:C},a.min=function(M,C){return M.cmp(C)<0?M:C},a.prototype._init=function(M,C,R){if(typeof M=="number")return this._initNumber(M,C,R);if(typeof M=="object")return this._initArray(M,C,R);C==="hex"&&(C=16),n(C===(C|0)&&C>=2&&C<=36),M=M.toString().replace(/\s+/g,"");var S=0;M[0]==="-"&&(S++,this.negative=1),S<M.length&&(C===16?this._parseHex(M,S,R):(this._parseBase(M,C,S),R==="le"&&this._initArray(this.toArray(),C,R)))},a.prototype._initNumber=function(M,C,R){M<0&&(this.negative=1,M=-M),M<67108864?(this.words=[M&67108863],this.length=1):M<4503599627370496?(this.words=[M&67108863,M/67108864&67108863],this.length=2):(n(M<9007199254740992),this.words=[M&67108863,M/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),C,R)},a.prototype._initArray=function(M,C,R){if(n(typeof M.length=="number"),M.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(M.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var _,U,H=0;if(R==="be")for(S=M.length-1,_=0;S>=0;S-=3)U=M[S]|M[S-1]<<8|M[S-2]<<16,this.words[_]|=U<<H&67108863,this.words[_+1]=U>>>26-H&67108863,H+=24,H>=26&&(H-=26,_++);else if(R==="le")for(S=0,_=0;S<M.length;S+=3)U=M[S]|M[S+1]<<8|M[S+2]<<16,this.words[_]|=U<<H&67108863,this.words[_+1]=U>>>26-H&67108863,H+=24,H>=26&&(H-=26,_++);return this.strip()};function s(W,M){var C=W.charCodeAt(M);return C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:C-48&15}function c(W,M,C){var R=s(W,C);return C-1>=M&&(R|=s(W,C-1)<<4),R}a.prototype._parseHex=function(M,C,R){this.length=Math.ceil((M.length-C)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var _=0,U=0,H;if(R==="be")for(S=M.length-1;S>=C;S-=2)H=c(M,C,S)<<_,this.words[U]|=H&67108863,_>=18?(_-=18,U+=1,this.words[U]|=H>>>26):_+=8;else{var V=M.length-C;for(S=V%2===0?C+1:C;S<M.length;S+=2)H=c(M,C,S)<<_,this.words[U]|=H&67108863,_>=18?(_-=18,U+=1,this.words[U]|=H>>>26):_+=8}this.strip()};function l(W,M,C,R){for(var S=0,_=Math.min(W.length,C),U=M;U<_;U++){var H=W.charCodeAt(U)-48;S*=R,H>=49?S+=H-49+10:H>=17?S+=H-17+10:S+=H}return S}a.prototype._parseBase=function(M,C,R){this.words=[0],this.length=1;for(var S=0,_=1;_<=67108863;_*=C)S++;S--,_=_/C|0;for(var U=M.length-R,H=U%S,V=Math.min(U,U-H)+R,P=0,$=R;$<V;$+=S)P=l(M,$,$+S,C),this.imuln(_),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P);if(H!==0){var te=1;for(P=l(M,$,M.length,C),$=0;$<H;$++)te*=C;this.imuln(te),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P)}this.strip()},a.prototype.copy=function(M){M.words=new Array(this.length);for(var C=0;C<this.length;C++)M.words[C]=this.words[C];M.length=this.length,M.negative=this.negative,M.red=this.red},a.prototype.clone=function(){var M=new a(null);return this.copy(M),M},a.prototype._expand=function(M){for(;this.length<M;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(M,C){M=M||10,C=C|0||1;var R;if(M===16||M==="hex"){R="";for(var S=0,_=0,U=0;U<this.length;U++){var H=this.words[U],V=((H<<S|_)&16777215).toString(16);_=H>>>24-S&16777215,S+=2,S>=26&&(S-=26,U--),_!==0||U!==this.length-1?R=d[6-V.length]+V+R:R=V+R}for(_!==0&&(R=_.toString(16)+R);R.length%C!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(M===(M|0)&&M>=2&&M<=36){var P=h[M],$=y[M];R="";var te=this.clone();for(te.negative=0;!te.isZero();){var ae=te.modn($).toString(M);te=te.idivn($),te.isZero()?R=ae+R:R=d[P-ae.length]+ae+R}for(this.isZero()&&(R="0"+R);R.length%C!==0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var M=this.words[0];return this.length===2?M+=this.words[1]*67108864:this.length===3&&this.words[2]===1?M+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-M:M},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(M,C){return n(typeof o<"u"),this.toArrayLike(o,M,C)},a.prototype.toArray=function(M,C){return this.toArrayLike(Array,M,C)},a.prototype.toArrayLike=function(M,C,R){var S=this.byteLength(),_=R||Math.max(1,S);n(S<=_,"byte array longer than desired length"),n(_>0,"Requested array length <= 0"),this.strip();var U=C==="le",H=new M(_),V,P,$=this.clone();if(U){for(P=0;!$.isZero();P++)V=$.andln(255),$.iushrn(8),H[P]=V;for(;P<_;P++)H[P]=0}else{for(P=0;P<_-S;P++)H[P]=0;for(P=0;!$.isZero();P++)V=$.andln(255),$.iushrn(8),H[_-P-1]=V}return H},Math.clz32?a.prototype._countBits=function(M){return 32-Math.clz32(M)}:a.prototype._countBits=function(M){var C=M,R=0;return C>=4096&&(R+=13,C>>>=13),C>=64&&(R+=7,C>>>=7),C>=8&&(R+=4,C>>>=4),C>=2&&(R+=2,C>>>=2),R+C},a.prototype._zeroBits=function(M){if(M===0)return 26;var C=M,R=0;return(C&8191)===0&&(R+=13,C>>>=13),(C&127)===0&&(R+=7,C>>>=7),(C&15)===0&&(R+=4,C>>>=4),(C&3)===0&&(R+=2,C>>>=2),(C&1)===0&&R++,R},a.prototype.bitLength=function(){var M=this.words[this.length-1],C=this._countBits(M);return(this.length-1)*26+C};function m(W){for(var M=new Array(W.bitLength()),C=0;C<M.length;C++){var R=C/26|0,S=C%26;M[C]=(W.words[R]&1<<S)>>>S}return M}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var M=0,C=0;C<this.length;C++){var R=this._zeroBits(this.words[C]);if(M+=R,R!==26)break}return M},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(M){return this.negative!==0?this.abs().inotn(M).iaddn(1):this.clone()},a.prototype.fromTwos=function(M){return this.testn(M-1)?this.notn(M).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(M){for(;this.length<M.length;)this.words[this.length++]=0;for(var C=0;C<M.length;C++)this.words[C]=this.words[C]|M.words[C];return this.strip()},a.prototype.ior=function(M){return n((this.negative|M.negative)===0),this.iuor(M)},a.prototype.or=function(M){return this.length>M.length?this.clone().ior(M):M.clone().ior(this)},a.prototype.uor=function(M){return this.length>M.length?this.clone().iuor(M):M.clone().iuor(this)},a.prototype.iuand=function(M){var C;this.length>M.length?C=M:C=this;for(var R=0;R<C.length;R++)this.words[R]=this.words[R]&M.words[R];return this.length=C.length,this.strip()},a.prototype.iand=function(M){return n((this.negative|M.negative)===0),this.iuand(M)},a.prototype.and=function(M){return this.length>M.length?this.clone().iand(M):M.clone().iand(this)},a.prototype.uand=function(M){return this.length>M.length?this.clone().iuand(M):M.clone().iuand(this)},a.prototype.iuxor=function(M){var C,R;this.length>M.length?(C=this,R=M):(C=M,R=this);for(var S=0;S<R.length;S++)this.words[S]=C.words[S]^R.words[S];if(this!==C)for(;S<C.length;S++)this.words[S]=C.words[S];return this.length=C.length,this.strip()},a.prototype.ixor=function(M){return n((this.negative|M.negative)===0),this.iuxor(M)},a.prototype.xor=function(M){return this.length>M.length?this.clone().ixor(M):M.clone().ixor(this)},a.prototype.uxor=function(M){return this.length>M.length?this.clone().iuxor(M):M.clone().iuxor(this)},a.prototype.inotn=function(M){n(typeof M=="number"&&M>=0);var C=Math.ceil(M/26)|0,R=M%26;this._expand(C),R>0&&C--;for(var S=0;S<C;S++)this.words[S]=~this.words[S]&67108863;return R>0&&(this.words[S]=~this.words[S]&67108863>>26-R),this.strip()},a.prototype.notn=function(M){return this.clone().inotn(M)},a.prototype.setn=function(M,C){n(typeof M=="number"&&M>=0);var R=M/26|0,S=M%26;return this._expand(R+1),C?this.words[R]=this.words[R]|1<<S:this.words[R]=this.words[R]&~(1<<S),this.strip()},a.prototype.iadd=function(M){var C;if(this.negative!==0&&M.negative===0)return this.negative=0,C=this.isub(M),this.negative^=1,this._normSign();if(this.negative===0&&M.negative!==0)return M.negative=0,C=this.isub(M),M.negative=1,C._normSign();var R,S;this.length>M.length?(R=this,S=M):(R=M,S=this);for(var _=0,U=0;U<S.length;U++)C=(R.words[U]|0)+(S.words[U]|0)+_,this.words[U]=C&67108863,_=C>>>26;for(;_!==0&&U<R.length;U++)C=(R.words[U]|0)+_,this.words[U]=C&67108863,_=C>>>26;if(this.length=R.length,_!==0)this.words[this.length]=_,this.length++;else if(R!==this)for(;U<R.length;U++)this.words[U]=R.words[U];return this},a.prototype.add=function(M){var C;return M.negative!==0&&this.negative===0?(M.negative=0,C=this.sub(M),M.negative^=1,C):M.negative===0&&this.negative!==0?(this.negative=0,C=M.sub(this),this.negative=1,C):this.length>M.length?this.clone().iadd(M):M.clone().iadd(this)},a.prototype.isub=function(M){if(M.negative!==0){M.negative=0;var C=this.iadd(M);return M.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(M),this.negative=1,this._normSign();var R=this.cmp(M);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,_;R>0?(S=this,_=M):(S=M,_=this);for(var U=0,H=0;H<_.length;H++)C=(S.words[H]|0)-(_.words[H]|0)+U,U=C>>26,this.words[H]=C&67108863;for(;U!==0&&H<S.length;H++)C=(S.words[H]|0)+U,U=C>>26,this.words[H]=C&67108863;if(U===0&&H<S.length&&S!==this)for(;H<S.length;H++)this.words[H]=S.words[H];return this.length=Math.max(this.length,H),S!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(M){return this.clone().isub(M)};function b(W,M,C){C.negative=M.negative^W.negative;var R=W.length+M.length|0;C.length=R,R=R-1|0;var S=W.words[0]|0,_=M.words[0]|0,U=S*_,H=U&67108863,V=U/67108864|0;C.words[0]=H;for(var P=1;P<R;P++){for(var $=V>>>26,te=V&67108863,ae=Math.min(P,M.length-1),ce=Math.max(0,P-W.length+1);ce<=ae;ce++){var fe=P-ce|0;S=W.words[fe]|0,_=M.words[ce]|0,U=S*_+te,$+=U/67108864|0,te=U&67108863}C.words[P]=te|0,V=$|0}return V!==0?C.words[P]=V|0:C.length--,C.strip()}var v=function(M,C,R){var S=M.words,_=C.words,U=R.words,H=0,V,P,$,te=S[0]|0,ae=te&8191,ce=te>>>13,fe=S[1]|0,oe=fe&8191,ye=fe>>>13,me=S[2]|0,ve=me&8191,we=me>>>13,De=S[3]|0,Te=De&8191,Se=De>>>13,Le=S[4]|0,$e=Le&8191,ie=Le>>>13,L=S[5]|0,j=L&8191,X=L>>>13,ue=S[6]|0,le=ue&8191,de=ue>>>13,Be=S[7]|0,Me=Be&8191,Pe=Be>>>13,Qe=S[8]|0,q=Qe&8191,w=Qe>>>13,A=S[9]|0,K=A&8191,G=A>>>13,ee=_[0]|0,ne=ee&8191,be=ee>>>13,Ue=_[1]|0,pe=Ue&8191,Ee=Ue>>>13,Ce=_[2]|0,ke=Ce&8191,Ke=Ce>>>13,et=_[3]|0,Ze=et&8191,nt=et>>>13,xt=_[4]|0,pt=xt&8191,St=xt>>>13,Ai=_[5]|0,kt=Ai&8191,Ft=Ai>>>13,Jo=_[6]|0,or=Jo&8191,ur=Jo>>>13,eo=_[7]|0,Yt=eo&8191,Qt=eo>>>13,ui=_[8]|0,cr=ui&8191,Lt=ui>>>13,Sr=_[9]|0,Tt=Sr&8191,Kt=Sr>>>13;R.negative=M.negative^C.negative,R.length=19,V=Math.imul(ae,ne),P=Math.imul(ae,be),P=P+Math.imul(ce,ne)|0,$=Math.imul(ce,be);var fn=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(fn>>>26)|0,fn&=67108863,V=Math.imul(oe,ne),P=Math.imul(oe,be),P=P+Math.imul(ye,ne)|0,$=Math.imul(ye,be),V=V+Math.imul(ae,pe)|0,P=P+Math.imul(ae,Ee)|0,P=P+Math.imul(ce,pe)|0,$=$+Math.imul(ce,Ee)|0;var to=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(to>>>26)|0,to&=67108863,V=Math.imul(ve,ne),P=Math.imul(ve,be),P=P+Math.imul(we,ne)|0,$=Math.imul(we,be),V=V+Math.imul(oe,pe)|0,P=P+Math.imul(oe,Ee)|0,P=P+Math.imul(ye,pe)|0,$=$+Math.imul(ye,Ee)|0,V=V+Math.imul(ae,ke)|0,P=P+Math.imul(ae,Ke)|0,P=P+Math.imul(ce,ke)|0,$=$+Math.imul(ce,Ke)|0;var ro=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(ro>>>26)|0,ro&=67108863,V=Math.imul(Te,ne),P=Math.imul(Te,be),P=P+Math.imul(Se,ne)|0,$=Math.imul(Se,be),V=V+Math.imul(ve,pe)|0,P=P+Math.imul(ve,Ee)|0,P=P+Math.imul(we,pe)|0,$=$+Math.imul(we,Ee)|0,V=V+Math.imul(oe,ke)|0,P=P+Math.imul(oe,Ke)|0,P=P+Math.imul(ye,ke)|0,$=$+Math.imul(ye,Ke)|0,V=V+Math.imul(ae,Ze)|0,P=P+Math.imul(ae,nt)|0,P=P+Math.imul(ce,Ze)|0,$=$+Math.imul(ce,nt)|0;var ps=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(ps>>>26)|0,ps&=67108863,V=Math.imul($e,ne),P=Math.imul($e,be),P=P+Math.imul(ie,ne)|0,$=Math.imul(ie,be),V=V+Math.imul(Te,pe)|0,P=P+Math.imul(Te,Ee)|0,P=P+Math.imul(Se,pe)|0,$=$+Math.imul(Se,Ee)|0,V=V+Math.imul(ve,ke)|0,P=P+Math.imul(ve,Ke)|0,P=P+Math.imul(we,ke)|0,$=$+Math.imul(we,Ke)|0,V=V+Math.imul(oe,Ze)|0,P=P+Math.imul(oe,nt)|0,P=P+Math.imul(ye,Ze)|0,$=$+Math.imul(ye,nt)|0,V=V+Math.imul(ae,pt)|0,P=P+Math.imul(ae,St)|0,P=P+Math.imul(ce,pt)|0,$=$+Math.imul(ce,St)|0;var Gi=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,V=Math.imul(j,ne),P=Math.imul(j,be),P=P+Math.imul(X,ne)|0,$=Math.imul(X,be),V=V+Math.imul($e,pe)|0,P=P+Math.imul($e,Ee)|0,P=P+Math.imul(ie,pe)|0,$=$+Math.imul(ie,Ee)|0,V=V+Math.imul(Te,ke)|0,P=P+Math.imul(Te,Ke)|0,P=P+Math.imul(Se,ke)|0,$=$+Math.imul(Se,Ke)|0,V=V+Math.imul(ve,Ze)|0,P=P+Math.imul(ve,nt)|0,P=P+Math.imul(we,Ze)|0,$=$+Math.imul(we,nt)|0,V=V+Math.imul(oe,pt)|0,P=P+Math.imul(oe,St)|0,P=P+Math.imul(ye,pt)|0,$=$+Math.imul(ye,St)|0,V=V+Math.imul(ae,kt)|0,P=P+Math.imul(ae,Ft)|0,P=P+Math.imul(ce,kt)|0,$=$+Math.imul(ce,Ft)|0;var Fa=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Fa>>>26)|0,Fa&=67108863,V=Math.imul(le,ne),P=Math.imul(le,be),P=P+Math.imul(de,ne)|0,$=Math.imul(de,be),V=V+Math.imul(j,pe)|0,P=P+Math.imul(j,Ee)|0,P=P+Math.imul(X,pe)|0,$=$+Math.imul(X,Ee)|0,V=V+Math.imul($e,ke)|0,P=P+Math.imul($e,Ke)|0,P=P+Math.imul(ie,ke)|0,$=$+Math.imul(ie,Ke)|0,V=V+Math.imul(Te,Ze)|0,P=P+Math.imul(Te,nt)|0,P=P+Math.imul(Se,Ze)|0,$=$+Math.imul(Se,nt)|0,V=V+Math.imul(ve,pt)|0,P=P+Math.imul(ve,St)|0,P=P+Math.imul(we,pt)|0,$=$+Math.imul(we,St)|0,V=V+Math.imul(oe,kt)|0,P=P+Math.imul(oe,Ft)|0,P=P+Math.imul(ye,kt)|0,$=$+Math.imul(ye,Ft)|0,V=V+Math.imul(ae,or)|0,P=P+Math.imul(ae,ur)|0,P=P+Math.imul(ce,or)|0,$=$+Math.imul(ce,ur)|0;var Xr=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Xr>>>26)|0,Xr&=67108863,V=Math.imul(Me,ne),P=Math.imul(Me,be),P=P+Math.imul(Pe,ne)|0,$=Math.imul(Pe,be),V=V+Math.imul(le,pe)|0,P=P+Math.imul(le,Ee)|0,P=P+Math.imul(de,pe)|0,$=$+Math.imul(de,Ee)|0,V=V+Math.imul(j,ke)|0,P=P+Math.imul(j,Ke)|0,P=P+Math.imul(X,ke)|0,$=$+Math.imul(X,Ke)|0,V=V+Math.imul($e,Ze)|0,P=P+Math.imul($e,nt)|0,P=P+Math.imul(ie,Ze)|0,$=$+Math.imul(ie,nt)|0,V=V+Math.imul(Te,pt)|0,P=P+Math.imul(Te,St)|0,P=P+Math.imul(Se,pt)|0,$=$+Math.imul(Se,St)|0,V=V+Math.imul(ve,kt)|0,P=P+Math.imul(ve,Ft)|0,P=P+Math.imul(we,kt)|0,$=$+Math.imul(we,Ft)|0,V=V+Math.imul(oe,or)|0,P=P+Math.imul(oe,ur)|0,P=P+Math.imul(ye,or)|0,$=$+Math.imul(ye,ur)|0,V=V+Math.imul(ae,Yt)|0,P=P+Math.imul(ae,Qt)|0,P=P+Math.imul(ce,Yt)|0,$=$+Math.imul(ce,Qt)|0;var Vr=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,V=Math.imul(q,ne),P=Math.imul(q,be),P=P+Math.imul(w,ne)|0,$=Math.imul(w,be),V=V+Math.imul(Me,pe)|0,P=P+Math.imul(Me,Ee)|0,P=P+Math.imul(Pe,pe)|0,$=$+Math.imul(Pe,Ee)|0,V=V+Math.imul(le,ke)|0,P=P+Math.imul(le,Ke)|0,P=P+Math.imul(de,ke)|0,$=$+Math.imul(de,Ke)|0,V=V+Math.imul(j,Ze)|0,P=P+Math.imul(j,nt)|0,P=P+Math.imul(X,Ze)|0,$=$+Math.imul(X,nt)|0,V=V+Math.imul($e,pt)|0,P=P+Math.imul($e,St)|0,P=P+Math.imul(ie,pt)|0,$=$+Math.imul(ie,St)|0,V=V+Math.imul(Te,kt)|0,P=P+Math.imul(Te,Ft)|0,P=P+Math.imul(Se,kt)|0,$=$+Math.imul(Se,Ft)|0,V=V+Math.imul(ve,or)|0,P=P+Math.imul(ve,ur)|0,P=P+Math.imul(we,or)|0,$=$+Math.imul(we,ur)|0,V=V+Math.imul(oe,Yt)|0,P=P+Math.imul(oe,Qt)|0,P=P+Math.imul(ye,Yt)|0,$=$+Math.imul(ye,Qt)|0,V=V+Math.imul(ae,cr)|0,P=P+Math.imul(ae,Lt)|0,P=P+Math.imul(ce,cr)|0,$=$+Math.imul(ce,Lt)|0;var Ve=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,V=Math.imul(K,ne),P=Math.imul(K,be),P=P+Math.imul(G,ne)|0,$=Math.imul(G,be),V=V+Math.imul(q,pe)|0,P=P+Math.imul(q,Ee)|0,P=P+Math.imul(w,pe)|0,$=$+Math.imul(w,Ee)|0,V=V+Math.imul(Me,ke)|0,P=P+Math.imul(Me,Ke)|0,P=P+Math.imul(Pe,ke)|0,$=$+Math.imul(Pe,Ke)|0,V=V+Math.imul(le,Ze)|0,P=P+Math.imul(le,nt)|0,P=P+Math.imul(de,Ze)|0,$=$+Math.imul(de,nt)|0,V=V+Math.imul(j,pt)|0,P=P+Math.imul(j,St)|0,P=P+Math.imul(X,pt)|0,$=$+Math.imul(X,St)|0,V=V+Math.imul($e,kt)|0,P=P+Math.imul($e,Ft)|0,P=P+Math.imul(ie,kt)|0,$=$+Math.imul(ie,Ft)|0,V=V+Math.imul(Te,or)|0,P=P+Math.imul(Te,ur)|0,P=P+Math.imul(Se,or)|0,$=$+Math.imul(Se,ur)|0,V=V+Math.imul(ve,Yt)|0,P=P+Math.imul(ve,Qt)|0,P=P+Math.imul(we,Yt)|0,$=$+Math.imul(we,Qt)|0,V=V+Math.imul(oe,cr)|0,P=P+Math.imul(oe,Lt)|0,P=P+Math.imul(ye,cr)|0,$=$+Math.imul(ye,Lt)|0,V=V+Math.imul(ae,Tt)|0,P=P+Math.imul(ae,Kt)|0,P=P+Math.imul(ce,Tt)|0,$=$+Math.imul(ce,Kt)|0;var Si=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Si>>>26)|0,Si&=67108863,V=Math.imul(K,pe),P=Math.imul(K,Ee),P=P+Math.imul(G,pe)|0,$=Math.imul(G,Ee),V=V+Math.imul(q,ke)|0,P=P+Math.imul(q,Ke)|0,P=P+Math.imul(w,ke)|0,$=$+Math.imul(w,Ke)|0,V=V+Math.imul(Me,Ze)|0,P=P+Math.imul(Me,nt)|0,P=P+Math.imul(Pe,Ze)|0,$=$+Math.imul(Pe,nt)|0,V=V+Math.imul(le,pt)|0,P=P+Math.imul(le,St)|0,P=P+Math.imul(de,pt)|0,$=$+Math.imul(de,St)|0,V=V+Math.imul(j,kt)|0,P=P+Math.imul(j,Ft)|0,P=P+Math.imul(X,kt)|0,$=$+Math.imul(X,Ft)|0,V=V+Math.imul($e,or)|0,P=P+Math.imul($e,ur)|0,P=P+Math.imul(ie,or)|0,$=$+Math.imul(ie,ur)|0,V=V+Math.imul(Te,Yt)|0,P=P+Math.imul(Te,Qt)|0,P=P+Math.imul(Se,Yt)|0,$=$+Math.imul(Se,Qt)|0,V=V+Math.imul(ve,cr)|0,P=P+Math.imul(ve,Lt)|0,P=P+Math.imul(we,cr)|0,$=$+Math.imul(we,Lt)|0,V=V+Math.imul(oe,Tt)|0,P=P+Math.imul(oe,Kt)|0,P=P+Math.imul(ye,Tt)|0,$=$+Math.imul(ye,Kt)|0;var gr=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(gr>>>26)|0,gr&=67108863,V=Math.imul(K,ke),P=Math.imul(K,Ke),P=P+Math.imul(G,ke)|0,$=Math.imul(G,Ke),V=V+Math.imul(q,Ze)|0,P=P+Math.imul(q,nt)|0,P=P+Math.imul(w,Ze)|0,$=$+Math.imul(w,nt)|0,V=V+Math.imul(Me,pt)|0,P=P+Math.imul(Me,St)|0,P=P+Math.imul(Pe,pt)|0,$=$+Math.imul(Pe,St)|0,V=V+Math.imul(le,kt)|0,P=P+Math.imul(le,Ft)|0,P=P+Math.imul(de,kt)|0,$=$+Math.imul(de,Ft)|0,V=V+Math.imul(j,or)|0,P=P+Math.imul(j,ur)|0,P=P+Math.imul(X,or)|0,$=$+Math.imul(X,ur)|0,V=V+Math.imul($e,Yt)|0,P=P+Math.imul($e,Qt)|0,P=P+Math.imul(ie,Yt)|0,$=$+Math.imul(ie,Qt)|0,V=V+Math.imul(Te,cr)|0,P=P+Math.imul(Te,Lt)|0,P=P+Math.imul(Se,cr)|0,$=$+Math.imul(Se,Lt)|0,V=V+Math.imul(ve,Tt)|0,P=P+Math.imul(ve,Kt)|0,P=P+Math.imul(we,Tt)|0,$=$+Math.imul(we,Kt)|0;var Cn=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,V=Math.imul(K,Ze),P=Math.imul(K,nt),P=P+Math.imul(G,Ze)|0,$=Math.imul(G,nt),V=V+Math.imul(q,pt)|0,P=P+Math.imul(q,St)|0,P=P+Math.imul(w,pt)|0,$=$+Math.imul(w,St)|0,V=V+Math.imul(Me,kt)|0,P=P+Math.imul(Me,Ft)|0,P=P+Math.imul(Pe,kt)|0,$=$+Math.imul(Pe,Ft)|0,V=V+Math.imul(le,or)|0,P=P+Math.imul(le,ur)|0,P=P+Math.imul(de,or)|0,$=$+Math.imul(de,ur)|0,V=V+Math.imul(j,Yt)|0,P=P+Math.imul(j,Qt)|0,P=P+Math.imul(X,Yt)|0,$=$+Math.imul(X,Qt)|0,V=V+Math.imul($e,cr)|0,P=P+Math.imul($e,Lt)|0,P=P+Math.imul(ie,cr)|0,$=$+Math.imul(ie,Lt)|0,V=V+Math.imul(Te,Tt)|0,P=P+Math.imul(Te,Kt)|0,P=P+Math.imul(Se,Tt)|0,$=$+Math.imul(Se,Kt)|0;var en=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(en>>>26)|0,en&=67108863,V=Math.imul(K,pt),P=Math.imul(K,St),P=P+Math.imul(G,pt)|0,$=Math.imul(G,St),V=V+Math.imul(q,kt)|0,P=P+Math.imul(q,Ft)|0,P=P+Math.imul(w,kt)|0,$=$+Math.imul(w,Ft)|0,V=V+Math.imul(Me,or)|0,P=P+Math.imul(Me,ur)|0,P=P+Math.imul(Pe,or)|0,$=$+Math.imul(Pe,ur)|0,V=V+Math.imul(le,Yt)|0,P=P+Math.imul(le,Qt)|0,P=P+Math.imul(de,Yt)|0,$=$+Math.imul(de,Qt)|0,V=V+Math.imul(j,cr)|0,P=P+Math.imul(j,Lt)|0,P=P+Math.imul(X,cr)|0,$=$+Math.imul(X,Lt)|0,V=V+Math.imul($e,Tt)|0,P=P+Math.imul($e,Kt)|0,P=P+Math.imul(ie,Tt)|0,$=$+Math.imul(ie,Kt)|0;var ci=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(ci>>>26)|0,ci&=67108863,V=Math.imul(K,kt),P=Math.imul(K,Ft),P=P+Math.imul(G,kt)|0,$=Math.imul(G,Ft),V=V+Math.imul(q,or)|0,P=P+Math.imul(q,ur)|0,P=P+Math.imul(w,or)|0,$=$+Math.imul(w,ur)|0,V=V+Math.imul(Me,Yt)|0,P=P+Math.imul(Me,Qt)|0,P=P+Math.imul(Pe,Yt)|0,$=$+Math.imul(Pe,Qt)|0,V=V+Math.imul(le,cr)|0,P=P+Math.imul(le,Lt)|0,P=P+Math.imul(de,cr)|0,$=$+Math.imul(de,Lt)|0,V=V+Math.imul(j,Tt)|0,P=P+Math.imul(j,Kt)|0,P=P+Math.imul(X,Tt)|0,$=$+Math.imul(X,Kt)|0;var Mi=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,V=Math.imul(K,or),P=Math.imul(K,ur),P=P+Math.imul(G,or)|0,$=Math.imul(G,ur),V=V+Math.imul(q,Yt)|0,P=P+Math.imul(q,Qt)|0,P=P+Math.imul(w,Yt)|0,$=$+Math.imul(w,Qt)|0,V=V+Math.imul(Me,cr)|0,P=P+Math.imul(Me,Lt)|0,P=P+Math.imul(Pe,cr)|0,$=$+Math.imul(Pe,Lt)|0,V=V+Math.imul(le,Tt)|0,P=P+Math.imul(le,Kt)|0,P=P+Math.imul(de,Tt)|0,$=$+Math.imul(de,Kt)|0;var li=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(li>>>26)|0,li&=67108863,V=Math.imul(K,Yt),P=Math.imul(K,Qt),P=P+Math.imul(G,Yt)|0,$=Math.imul(G,Qt),V=V+Math.imul(q,cr)|0,P=P+Math.imul(q,Lt)|0,P=P+Math.imul(w,cr)|0,$=$+Math.imul(w,Lt)|0,V=V+Math.imul(Me,Tt)|0,P=P+Math.imul(Me,Kt)|0,P=P+Math.imul(Pe,Tt)|0,$=$+Math.imul(Pe,Kt)|0;var Br=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(Br>>>26)|0,Br&=67108863,V=Math.imul(K,cr),P=Math.imul(K,Lt),P=P+Math.imul(G,cr)|0,$=Math.imul(G,Lt),V=V+Math.imul(q,Tt)|0,P=P+Math.imul(q,Kt)|0,P=P+Math.imul(w,Tt)|0,$=$+Math.imul(w,Kt)|0;var za=(H+V|0)+((P&8191)<<13)|0;H=($+(P>>>13)|0)+(za>>>26)|0,za&=67108863,V=Math.imul(K,Tt),P=Math.imul(K,Kt),P=P+Math.imul(G,Tt)|0,$=Math.imul(G,Kt);var Ti=(H+V|0)+((P&8191)<<13)|0;return H=($+(P>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,U[0]=fn,U[1]=to,U[2]=ro,U[3]=ps,U[4]=Gi,U[5]=Fa,U[6]=Xr,U[7]=Vr,U[8]=Ve,U[9]=Si,U[10]=gr,U[11]=Cn,U[12]=en,U[13]=ci,U[14]=Mi,U[15]=li,U[16]=Br,U[17]=za,U[18]=Ti,H!==0&&(U[19]=H,R.length++),R};Math.imul||(v=b);function E(W,M,C){C.negative=M.negative^W.negative,C.length=W.length+M.length;for(var R=0,S=0,_=0;_<C.length-1;_++){var U=S;S=0;for(var H=R&67108863,V=Math.min(_,M.length-1),P=Math.max(0,_-W.length+1);P<=V;P++){var $=_-P,te=W.words[$]|0,ae=M.words[P]|0,ce=te*ae,fe=ce&67108863;U=U+(ce/67108864|0)|0,fe=fe+H|0,H=fe&67108863,U=U+(fe>>>26)|0,S+=U>>>26,U&=67108863}C.words[_]=H,R=U,U=S}return R!==0?C.words[_]=R:C.length--,C.strip()}function x(W,M,C){var R=new D;return R.mulp(W,M,C)}a.prototype.mulTo=function(M,C){var R,S=this.length+M.length;return this.length===10&&M.length===10?R=v(this,M,C):S<63?R=b(this,M,C):S<1024?R=E(this,M,C):R=x(this,M,C),R};function D(W,M){this.x=W,this.y=M}D.prototype.makeRBT=function(M){for(var C=new Array(M),R=a.prototype._countBits(M)-1,S=0;S<M;S++)C[S]=this.revBin(S,R,M);return C},D.prototype.revBin=function(M,C,R){if(M===0||M===R-1)return M;for(var S=0,_=0;_<C;_++)S|=(M&1)<<C-_-1,M>>=1;return S},D.prototype.permute=function(M,C,R,S,_,U){for(var H=0;H<U;H++)S[H]=C[M[H]],_[H]=R[M[H]]},D.prototype.transform=function(M,C,R,S,_,U){this.permute(U,M,C,R,S,_);for(var H=1;H<_;H<<=1)for(var V=H<<1,P=Math.cos(2*Math.PI/V),$=Math.sin(2*Math.PI/V),te=0;te<_;te+=V)for(var ae=P,ce=$,fe=0;fe<H;fe++){var oe=R[te+fe],ye=S[te+fe],me=R[te+fe+H],ve=S[te+fe+H],we=ae*me-ce*ve;ve=ae*ve+ce*me,me=we,R[te+fe]=oe+me,S[te+fe]=ye+ve,R[te+fe+H]=oe-me,S[te+fe+H]=ye-ve,fe!==V&&(we=P*ae-$*ce,ce=P*ce+$*ae,ae=we)}},D.prototype.guessLen13b=function(M,C){var R=Math.max(C,M)|1,S=R&1,_=0;for(R=R/2|0;R;R=R>>>1)_++;return 1<<_+1+S},D.prototype.conjugate=function(M,C,R){if(!(R<=1))for(var S=0;S<R/2;S++){var _=M[S];M[S]=M[R-S-1],M[R-S-1]=_,_=C[S],C[S]=-C[R-S-1],C[R-S-1]=-_}},D.prototype.normalize13b=function(M,C){for(var R=0,S=0;S<C/2;S++){var _=Math.round(M[2*S+1]/C)*8192+Math.round(M[2*S]/C)+R;M[S]=_&67108863,_<67108864?R=0:R=_/67108864|0}return M},D.prototype.convert13b=function(M,C,R,S){for(var _=0,U=0;U<C;U++)_=_+(M[U]|0),R[2*U]=_&8191,_=_>>>13,R[2*U+1]=_&8191,_=_>>>13;for(U=2*C;U<S;++U)R[U]=0;n(_===0),n((_&-8192)===0)},D.prototype.stub=function(M){for(var C=new Array(M),R=0;R<M;R++)C[R]=0;return C},D.prototype.mulp=function(M,C,R){var S=2*this.guessLen13b(M.length,C.length),_=this.makeRBT(S),U=this.stub(S),H=new Array(S),V=new Array(S),P=new Array(S),$=new Array(S),te=new Array(S),ae=new Array(S),ce=R.words;ce.length=S,this.convert13b(M.words,M.length,H,S),this.convert13b(C.words,C.length,$,S),this.transform(H,U,V,P,S,_),this.transform($,U,te,ae,S,_);for(var fe=0;fe<S;fe++){var oe=V[fe]*te[fe]-P[fe]*ae[fe];P[fe]=V[fe]*ae[fe]+P[fe]*te[fe],V[fe]=oe}return this.conjugate(V,P,S),this.transform(V,P,ce,U,S,_),this.conjugate(ce,U,S),this.normalize13b(ce,S),R.negative=M.negative^C.negative,R.length=M.length+C.length,R.strip()},a.prototype.mul=function(M){var C=new a(null);return C.words=new Array(this.length+M.length),this.mulTo(M,C)},a.prototype.mulf=function(M){var C=new a(null);return C.words=new Array(this.length+M.length),x(this,M,C)},a.prototype.imul=function(M){return this.clone().mulTo(M,this)},a.prototype.imuln=function(M){n(typeof M=="number"),n(M<67108864);for(var C=0,R=0;R<this.length;R++){var S=(this.words[R]|0)*M,_=(S&67108863)+(C&67108863);C>>=26,C+=S/67108864|0,C+=_>>>26,this.words[R]=_&67108863}return C!==0&&(this.words[R]=C,this.length++),this.length=M===0?1:this.length,this},a.prototype.muln=function(M){return this.clone().imuln(M)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(M){var C=m(M);if(C.length===0)return new a(1);for(var R=this,S=0;S<C.length&&C[S]===0;S++,R=R.sqr());if(++S<C.length)for(var _=R.sqr();S<C.length;S++,_=_.sqr())C[S]!==0&&(R=R.mul(_));return R},a.prototype.iushln=function(M){n(typeof M=="number"&&M>=0);var C=M%26,R=(M-C)/26,S=67108863>>>26-C<<26-C,_;if(C!==0){var U=0;for(_=0;_<this.length;_++){var H=this.words[_]&S,V=(this.words[_]|0)-H<<C;this.words[_]=V|U,U=H>>>26-C}U&&(this.words[_]=U,this.length++)}if(R!==0){for(_=this.length-1;_>=0;_--)this.words[_+R]=this.words[_];for(_=0;_<R;_++)this.words[_]=0;this.length+=R}return this.strip()},a.prototype.ishln=function(M){return n(this.negative===0),this.iushln(M)},a.prototype.iushrn=function(M,C,R){n(typeof M=="number"&&M>=0);var S;C?S=(C-C%26)/26:S=0;var _=M%26,U=Math.min((M-_)/26,this.length),H=67108863^67108863>>>_<<_,V=R;if(S-=U,S=Math.max(0,S),V){for(var P=0;P<U;P++)V.words[P]=this.words[P];V.length=U}if(U!==0)if(this.length>U)for(this.length-=U,P=0;P<this.length;P++)this.words[P]=this.words[P+U];else this.words[0]=0,this.length=1;var $=0;for(P=this.length-1;P>=0&&($!==0||P>=S);P--){var te=this.words[P]|0;this.words[P]=$<<26-_|te>>>_,$=te&H}return V&&$!==0&&(V.words[V.length++]=$),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(M,C,R){return n(this.negative===0),this.iushrn(M,C,R)},a.prototype.shln=function(M){return this.clone().ishln(M)},a.prototype.ushln=function(M){return this.clone().iushln(M)},a.prototype.shrn=function(M){return this.clone().ishrn(M)},a.prototype.ushrn=function(M){return this.clone().iushrn(M)},a.prototype.testn=function(M){n(typeof M=="number"&&M>=0);var C=M%26,R=(M-C)/26,S=1<<C;if(this.length<=R)return!1;var _=this.words[R];return!!(_&S)},a.prototype.imaskn=function(M){n(typeof M=="number"&&M>=0);var C=M%26,R=(M-C)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(C!==0&&R++,this.length=Math.min(R,this.length),C!==0){var S=67108863^67108863>>>C<<C;this.words[this.length-1]&=S}return this.strip()},a.prototype.maskn=function(M){return this.clone().imaskn(M)},a.prototype.iaddn=function(M){return n(typeof M=="number"),n(M<67108864),M<0?this.isubn(-M):this.negative!==0?this.length===1&&(this.words[0]|0)<M?(this.words[0]=M-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(M),this.negative=1,this):this._iaddn(M)},a.prototype._iaddn=function(M){this.words[0]+=M;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},a.prototype.isubn=function(M){if(n(typeof M=="number"),n(M<67108864),M<0)return this.iaddn(-M);if(this.negative!==0)return this.negative=0,this.iaddn(M),this.negative=1,this;if(this.words[0]-=M,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this.strip()},a.prototype.addn=function(M){return this.clone().iaddn(M)},a.prototype.subn=function(M){return this.clone().isubn(M)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(M,C,R){var S=M.length+R,_;this._expand(S);var U,H=0;for(_=0;_<M.length;_++){U=(this.words[_+R]|0)+H;var V=(M.words[_]|0)*C;U-=V&67108863,H=(U>>26)-(V/67108864|0),this.words[_+R]=U&67108863}for(;_<this.length-R;_++)U=(this.words[_+R]|0)+H,H=U>>26,this.words[_+R]=U&67108863;if(H===0)return this.strip();for(n(H===-1),H=0,_=0;_<this.length;_++)U=-(this.words[_]|0)+H,H=U>>26,this.words[_]=U&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(M,C){var R=this.length-M.length,S=this.clone(),_=M,U=_.words[_.length-1]|0,H=this._countBits(U);R=26-H,R!==0&&(_=_.ushln(R),S.iushln(R),U=_.words[_.length-1]|0);var V=S.length-_.length,P;if(C!=="mod"){P=new a(null),P.length=V+1,P.words=new Array(P.length);for(var $=0;$<P.length;$++)P.words[$]=0}var te=S.clone()._ishlnsubmul(_,1,V);te.negative===0&&(S=te,P&&(P.words[V]=1));for(var ae=V-1;ae>=0;ae--){var ce=(S.words[_.length+ae]|0)*67108864+(S.words[_.length+ae-1]|0);for(ce=Math.min(ce/U|0,67108863),S._ishlnsubmul(_,ce,ae);S.negative!==0;)ce--,S.negative=0,S._ishlnsubmul(_,1,ae),S.isZero()||(S.negative^=1);P&&(P.words[ae]=ce)}return P&&P.strip(),S.strip(),C!=="div"&&R!==0&&S.iushrn(R),{div:P||null,mod:S}},a.prototype.divmod=function(M,C,R){if(n(!M.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var S,_,U;return this.negative!==0&&M.negative===0?(U=this.neg().divmod(M,C),C!=="mod"&&(S=U.div.neg()),C!=="div"&&(_=U.mod.neg(),R&&_.negative!==0&&_.iadd(M)),{div:S,mod:_}):this.negative===0&&M.negative!==0?(U=this.divmod(M.neg(),C),C!=="mod"&&(S=U.div.neg()),{div:S,mod:U.mod}):(this.negative&M.negative)!==0?(U=this.neg().divmod(M.neg(),C),C!=="div"&&(_=U.mod.neg(),R&&_.negative!==0&&_.isub(M)),{div:U.div,mod:_}):M.length>this.length||this.cmp(M)<0?{div:new a(0),mod:this}:M.length===1?C==="div"?{div:this.divn(M.words[0]),mod:null}:C==="mod"?{div:null,mod:new a(this.modn(M.words[0]))}:{div:this.divn(M.words[0]),mod:new a(this.modn(M.words[0]))}:this._wordDiv(M,C)},a.prototype.div=function(M){return this.divmod(M,"div",!1).div},a.prototype.mod=function(M){return this.divmod(M,"mod",!1).mod},a.prototype.umod=function(M){return this.divmod(M,"mod",!0).mod},a.prototype.divRound=function(M){var C=this.divmod(M);if(C.mod.isZero())return C.div;var R=C.div.negative!==0?C.mod.isub(M):C.mod,S=M.ushrn(1),_=M.andln(1),U=R.cmp(S);return U<0||_===1&&U===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},a.prototype.modn=function(M){n(M<=67108863);for(var C=(1<<26)%M,R=0,S=this.length-1;S>=0;S--)R=(C*R+(this.words[S]|0))%M;return R},a.prototype.idivn=function(M){n(M<=67108863);for(var C=0,R=this.length-1;R>=0;R--){var S=(this.words[R]|0)+C*67108864;this.words[R]=S/M|0,C=S%M}return this.strip()},a.prototype.divn=function(M){return this.clone().idivn(M)},a.prototype.egcd=function(M){n(M.negative===0),n(!M.isZero());var C=this,R=M.clone();C.negative!==0?C=C.umod(M):C=C.clone();for(var S=new a(1),_=new a(0),U=new a(0),H=new a(1),V=0;C.isEven()&&R.isEven();)C.iushrn(1),R.iushrn(1),++V;for(var P=R.clone(),$=C.clone();!C.isZero();){for(var te=0,ae=1;(C.words[0]&ae)===0&&te<26;++te,ae<<=1);if(te>0)for(C.iushrn(te);te-- >0;)(S.isOdd()||_.isOdd())&&(S.iadd(P),_.isub($)),S.iushrn(1),_.iushrn(1);for(var ce=0,fe=1;(R.words[0]&fe)===0&&ce<26;++ce,fe<<=1);if(ce>0)for(R.iushrn(ce);ce-- >0;)(U.isOdd()||H.isOdd())&&(U.iadd(P),H.isub($)),U.iushrn(1),H.iushrn(1);C.cmp(R)>=0?(C.isub(R),S.isub(U),_.isub(H)):(R.isub(C),U.isub(S),H.isub(_))}return{a:U,b:H,gcd:R.iushln(V)}},a.prototype._invmp=function(M){n(M.negative===0),n(!M.isZero());var C=this,R=M.clone();C.negative!==0?C=C.umod(M):C=C.clone();for(var S=new a(1),_=new a(0),U=R.clone();C.cmpn(1)>0&&R.cmpn(1)>0;){for(var H=0,V=1;(C.words[0]&V)===0&&H<26;++H,V<<=1);if(H>0)for(C.iushrn(H);H-- >0;)S.isOdd()&&S.iadd(U),S.iushrn(1);for(var P=0,$=1;(R.words[0]&$)===0&&P<26;++P,$<<=1);if(P>0)for(R.iushrn(P);P-- >0;)_.isOdd()&&_.iadd(U),_.iushrn(1);C.cmp(R)>=0?(C.isub(R),S.isub(_)):(R.isub(C),_.isub(S))}var te;return C.cmpn(1)===0?te=S:te=_,te.cmpn(0)<0&&te.iadd(M),te},a.prototype.gcd=function(M){if(this.isZero())return M.abs();if(M.isZero())return this.abs();var C=this.clone(),R=M.clone();C.negative=0,R.negative=0;for(var S=0;C.isEven()&&R.isEven();S++)C.iushrn(1),R.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;R.isEven();)R.iushrn(1);var _=C.cmp(R);if(_<0){var U=C;C=R,R=U}else if(_===0||R.cmpn(1)===0)break;C.isub(R)}while(!0);return R.iushln(S)},a.prototype.invm=function(M){return this.egcd(M).a.umod(M)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(M){return this.words[0]&M},a.prototype.bincn=function(M){n(typeof M=="number");var C=M%26,R=(M-C)/26,S=1<<C;if(this.length<=R)return this._expand(R+1),this.words[R]|=S,this;for(var _=S,U=R;_!==0&&U<this.length;U++){var H=this.words[U]|0;H+=_,_=H>>>26,H&=67108863,this.words[U]=H}return _!==0&&(this.words[U]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(M){var C=M<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this.strip();var R;if(this.length>1)R=1;else{C&&(M=-M),n(M<=67108863,"Number is too big");var S=this.words[0]|0;R=S===M?0:S<M?-1:1}return this.negative!==0?-R|0:R},a.prototype.cmp=function(M){if(this.negative!==0&&M.negative===0)return-1;if(this.negative===0&&M.negative!==0)return 1;var C=this.ucmp(M);return this.negative!==0?-C|0:C},a.prototype.ucmp=function(M){if(this.length>M.length)return 1;if(this.length<M.length)return-1;for(var C=0,R=this.length-1;R>=0;R--){var S=this.words[R]|0,_=M.words[R]|0;if(S!==_){S<_?C=-1:S>_&&(C=1);break}}return C},a.prototype.gtn=function(M){return this.cmpn(M)===1},a.prototype.gt=function(M){return this.cmp(M)===1},a.prototype.gten=function(M){return this.cmpn(M)>=0},a.prototype.gte=function(M){return this.cmp(M)>=0},a.prototype.ltn=function(M){return this.cmpn(M)===-1},a.prototype.lt=function(M){return this.cmp(M)===-1},a.prototype.lten=function(M){return this.cmpn(M)<=0},a.prototype.lte=function(M){return this.cmp(M)<=0},a.prototype.eqn=function(M){return this.cmpn(M)===0},a.prototype.eq=function(M){return this.cmp(M)===0},a.red=function(M){return new Z(M)},a.prototype.toRed=function(M){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),M.convertTo(this)._forceRed(M)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(M){return this.red=M,this},a.prototype.forceRed=function(M){return n(!this.red,"Already a number in reduction context"),this._forceRed(M)},a.prototype.redAdd=function(M){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,M)},a.prototype.redIAdd=function(M){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,M)},a.prototype.redSub=function(M){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,M)},a.prototype.redISub=function(M){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,M)},a.prototype.redShl=function(M){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,M)},a.prototype.redMul=function(M){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,M),this.red.mul(this,M)},a.prototype.redIMul=function(M){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,M),this.red.imul(this,M)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(M){return n(this.red&&!M.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,M)};var N={k256:null,p224:null,p192:null,p25519:null};function B(W,M){this.name=W,this.p=new a(M,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}B.prototype._tmp=function(){var M=new a(null);return M.words=new Array(Math.ceil(this.n/13)),M},B.prototype.ireduce=function(M){var C=M,R;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),R=C.bitLength();while(R>this.n);var S=R<this.n?-1:C.ucmp(this.p);return S===0?(C.words[0]=0,C.length=1):S>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},B.prototype.split=function(M,C){M.iushrn(this.n,0,C)},B.prototype.imulK=function(M){return M.imul(this.k)};function k(){B.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(k,B),k.prototype.split=function(M,C){for(var R=4194303,S=Math.min(M.length,9),_=0;_<S;_++)C.words[_]=M.words[_];if(C.length=S,M.length<=9){M.words[0]=0,M.length=1;return}var U=M.words[9];for(C.words[C.length++]=U&R,_=10;_<M.length;_++){var H=M.words[_]|0;M.words[_-10]=(H&R)<<4|U>>>22,U=H}U>>>=22,M.words[_-10]=U,U===0&&M.length>10?M.length-=10:M.length-=9},k.prototype.imulK=function(M){M.words[M.length]=0,M.words[M.length+1]=0,M.length+=2;for(var C=0,R=0;R<M.length;R++){var S=M.words[R]|0;C+=S*977,M.words[R]=C&67108863,C=S*64+(C/67108864|0)}return M.words[M.length-1]===0&&(M.length--,M.words[M.length-1]===0&&M.length--),M};function F(){B.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(F,B);function T(){B.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(T,B);function z(){B.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,B),z.prototype.imulK=function(M){for(var C=0,R=0;R<M.length;R++){var S=(M.words[R]|0)*19+C,_=S&67108863;S>>>=26,M.words[R]=_,C=S}return C!==0&&(M.words[M.length++]=C),M},a._prime=function(M){if(N[M])return N[M];var C;if(M==="k256")C=new k;else if(M==="p224")C=new F;else if(M==="p192")C=new T;else if(M==="p25519")C=new z;else throw new Error("Unknown prime "+M);return N[M]=C,C};function Z(W){if(typeof W=="string"){var M=a._prime(W);this.m=M.p,this.prime=M}else n(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}Z.prototype._verify1=function(M){n(M.negative===0,"red works only with positives"),n(M.red,"red works only with red numbers")},Z.prototype._verify2=function(M,C){n((M.negative|C.negative)===0,"red works only with positives"),n(M.red&&M.red===C.red,"red works only with red numbers")},Z.prototype.imod=function(M){return this.prime?this.prime.ireduce(M)._forceRed(this):M.umod(this.m)._forceRed(this)},Z.prototype.neg=function(M){return M.isZero()?M.clone():this.m.sub(M)._forceRed(this)},Z.prototype.add=function(M,C){this._verify2(M,C);var R=M.add(C);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},Z.prototype.iadd=function(M,C){this._verify2(M,C);var R=M.iadd(C);return R.cmp(this.m)>=0&&R.isub(this.m),R},Z.prototype.sub=function(M,C){this._verify2(M,C);var R=M.sub(C);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},Z.prototype.isub=function(M,C){this._verify2(M,C);var R=M.isub(C);return R.cmpn(0)<0&&R.iadd(this.m),R},Z.prototype.shl=function(M,C){return this._verify1(M),this.imod(M.ushln(C))},Z.prototype.imul=function(M,C){return this._verify2(M,C),this.imod(M.imul(C))},Z.prototype.mul=function(M,C){return this._verify2(M,C),this.imod(M.mul(C))},Z.prototype.isqr=function(M){return this.imul(M,M.clone())},Z.prototype.sqr=function(M){return this.mul(M,M)},Z.prototype.sqrt=function(M){if(M.isZero())return M.clone();var C=this.m.andln(3);if(n(C%2===1),C===3){var R=this.m.add(new a(1)).iushrn(2);return this.pow(M,R)}for(var S=this.m.subn(1),_=0;!S.isZero()&&S.andln(1)===0;)_++,S.iushrn(1);n(!S.isZero());var U=new a(1).toRed(this),H=U.redNeg(),V=this.m.subn(1).iushrn(1),P=this.m.bitLength();for(P=new a(2*P*P).toRed(this);this.pow(P,V).cmp(H)!==0;)P.redIAdd(H);for(var $=this.pow(P,S),te=this.pow(M,S.addn(1).iushrn(1)),ae=this.pow(M,S),ce=_;ae.cmp(U)!==0;){for(var fe=ae,oe=0;fe.cmp(U)!==0;oe++)fe=fe.redSqr();n(oe<ce);var ye=this.pow($,new a(1).iushln(ce-oe-1));te=te.redMul(ye),$=ye.redSqr(),ae=ae.redMul($),ce=oe}return te},Z.prototype.invm=function(M){var C=M._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},Z.prototype.pow=function(M,C){if(C.isZero())return new a(1).toRed(this);if(C.cmpn(1)===0)return M.clone();var R=4,S=new Array(1<<R);S[0]=new a(1).toRed(this),S[1]=M;for(var _=2;_<S.length;_++)S[_]=this.mul(S[_-1],M);var U=S[0],H=0,V=0,P=C.bitLength()%26;for(P===0&&(P=26),_=C.length-1;_>=0;_--){for(var $=C.words[_],te=P-1;te>=0;te--){var ae=$>>te&1;if(U!==S[0]&&(U=this.sqr(U)),ae===0&&H===0){V=0;continue}H<<=1,H|=ae,V++,!(V!==R&&(_!==0||te!==0))&&(U=this.mul(U,S[H]),V=0,H=0)}P=26}return U},Z.prototype.convertTo=function(M){var C=M.umod(this.m);return C===M?C.clone():C},Z.prototype.convertFrom=function(M){var C=M.clone();return C.red=null,C},a.mont=function(M){return new Y(M)};function Y(W){Z.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(Y,Z),Y.prototype.convertTo=function(M){return this.imod(M.ushln(this.shift))},Y.prototype.convertFrom=function(M){var C=this.imod(M.mul(this.rinv));return C.red=null,C},Y.prototype.imul=function(M,C){if(M.isZero()||C.isZero())return M.words[0]=0,M.length=1,M;var R=M.imul(C),S=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=R.isub(S).iushrn(this.shift),U=_;return _.cmp(this.m)>=0?U=_.isub(this.m):_.cmpn(0)<0&&(U=_.iadd(this.m)),U._forceRed(this)},Y.prototype.mul=function(M,C){if(M.isZero()||C.isZero())return new a(0)._forceRed(this);var R=M.mul(C),S=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=R.isub(S).iushrn(this.shift),U=_;return _.cmp(this.m)>=0?U=_.isub(this.m):_.cmpn(0)<0&&(U=_.iadd(this.m)),U._forceRed(this)},Y.prototype.invm=function(M){var C=this.imod(M._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(r,Pj)})($1)),$1.exports}var Uj=Ys();const ss=Zo(Uj);var s_={};const kj="6.6.1",qj={version:kj};var o_={},u_={},xM;function eI(){return xM||(xM=1,(function(r){var e=r;function t(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var s=[];if(typeof a!="string"){for(var c=0;c<a.length;c++)s[c]=a[c]|0;return s}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var c=0;c<a.length;c+=2)s.push(parseInt(a[c]+a[c+1],16))}else for(var c=0;c<a.length;c++){var l=a.charCodeAt(c),d=l>>8,h=l&255;d?s.push(d,h):s.push(h)}return s}e.toArray=t;function n(a){return a.length===1?"0"+a:a}e.zero2=n;function i(a){for(var o="",s=0;s<a.length;s++)o+=n(a[s].toString(16));return o}e.toHex=i,e.encode=function(o,s){return s==="hex"?i(o):o}})(u_)),u_}var AM;function La(){return AM||(AM=1,(function(r){var e=r,t=Ys(),n=kl(),i=eI();e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function a(d,h,y){var m=new Array(Math.max(d.bitLength(),y)+1),b;for(b=0;b<m.length;b+=1)m[b]=0;var v=1<<h+1,E=d.clone();for(b=0;b<m.length;b++){var x,D=E.andln(v-1);E.isOdd()?(D>(v>>1)-1?x=(v>>1)-D:x=D,E.isubn(x)):x=0,m[b]=x,E.iushrn(1)}return m}e.getNAF=a;function o(d,h){var y=[[],[]];d=d.clone(),h=h.clone();for(var m=0,b=0,v;d.cmpn(-m)>0||h.cmpn(-b)>0;){var E=d.andln(3)+m&3,x=h.andln(3)+b&3;E===3&&(E=-1),x===3&&(x=-1);var D;(E&1)===0?D=0:(v=d.andln(7)+m&7,(v===3||v===5)&&x===2?D=-E:D=E),y[0].push(D);var N;(x&1)===0?N=0:(v=h.andln(7)+b&7,(v===3||v===5)&&E===2?N=-x:N=x),y[1].push(N),2*m===D+1&&(m=1-m),2*b===N+1&&(b=1-b),d.iushrn(1),h.iushrn(1)}return y}e.getJSF=o;function s(d,h,y){var m="_"+h;d.prototype[h]=function(){return this[m]!==void 0?this[m]:this[m]=y.call(this)}}e.cachedProperty=s;function c(d){return typeof d=="string"?e.toArray(d,"hex"):d}e.parseBytes=c;function l(d){return new t(d,"hex","le")}e.intFromLE=l})(o_)),o_}var c_={},l_,SM;function eb(){if(SM)return l_;SM=1;var r=Ys(),e=La(),t=e.getNAF,n=e.getJSF,i=e.assert;function a(s,c){this.type=s,this.p=new r(c.p,16),this.red=c.prime?r.red(c.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=c.n&&new r(c.n,16),this.g=c.g&&this.pointFromJSON(c.g,c.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var l=this.n&&this.p.div(this.n);!l||l.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}l_=a,a.prototype.point=function(){throw new Error("Not implemented")},a.prototype.validate=function(){throw new Error("Not implemented")},a.prototype._fixedNafMul=function(c,l){i(c.precomputed);var d=c._getDoubles(),h=t(l,1,this._bitLength),y=(1<<d.step+1)-(d.step%2===0?2:1);y/=3;var m=[],b,v;for(b=0;b<h.length;b+=d.step){v=0;for(var E=b+d.step-1;E>=b;E--)v=(v<<1)+h[E];m.push(v)}for(var x=this.jpoint(null,null,null),D=this.jpoint(null,null,null),N=y;N>0;N--){for(b=0;b<m.length;b++)v=m[b],v===N?D=D.mixedAdd(d.points[b]):v===-N&&(D=D.mixedAdd(d.points[b].neg()));x=x.add(D)}return x.toP()},a.prototype._wnafMul=function(c,l){var d=4,h=c._getNAFPoints(d);d=h.wnd;for(var y=h.points,m=t(l,d,this._bitLength),b=this.jpoint(null,null,null),v=m.length-1;v>=0;v--){for(var E=0;v>=0&&m[v]===0;v--)E++;if(v>=0&&E++,b=b.dblp(E),v<0)break;var x=m[v];i(x!==0),c.type==="affine"?x>0?b=b.mixedAdd(y[x-1>>1]):b=b.mixedAdd(y[-x-1>>1].neg()):x>0?b=b.add(y[x-1>>1]):b=b.add(y[-x-1>>1].neg())}return c.type==="affine"?b.toP():b},a.prototype._wnafMulAdd=function(c,l,d,h,y){var m=this._wnafT1,b=this._wnafT2,v=this._wnafT3,E=0,x,D,N;for(x=0;x<h;x++){N=l[x];var B=N._getNAFPoints(c);m[x]=B.wnd,b[x]=B.points}for(x=h-1;x>=1;x-=2){var k=x-1,F=x;if(m[k]!==1||m[F]!==1){v[k]=t(d[k],m[k],this._bitLength),v[F]=t(d[F],m[F],this._bitLength),E=Math.max(v[k].length,E),E=Math.max(v[F].length,E);continue}var T=[l[k],null,null,l[F]];l[k].y.cmp(l[F].y)===0?(T[1]=l[k].add(l[F]),T[2]=l[k].toJ().mixedAdd(l[F].neg())):l[k].y.cmp(l[F].y.redNeg())===0?(T[1]=l[k].toJ().mixedAdd(l[F]),T[2]=l[k].add(l[F].neg())):(T[1]=l[k].toJ().mixedAdd(l[F]),T[2]=l[k].toJ().mixedAdd(l[F].neg()));var z=[-3,-1,-5,-7,0,7,5,1,3],Z=n(d[k],d[F]);for(E=Math.max(Z[0].length,E),v[k]=new Array(E),v[F]=new Array(E),D=0;D<E;D++){var Y=Z[0][D]|0,W=Z[1][D]|0;v[k][D]=z[(Y+1)*3+(W+1)],v[F][D]=0,b[k]=T}}var M=this.jpoint(null,null,null),C=this._wnafT4;for(x=E;x>=0;x--){for(var R=0;x>=0;){var S=!0;for(D=0;D<h;D++)C[D]=v[D][x]|0,C[D]!==0&&(S=!1);if(!S)break;R++,x--}if(x>=0&&R++,M=M.dblp(R),x<0)break;for(D=0;D<h;D++){var _=C[D];_!==0&&(_>0?N=b[D][_-1>>1]:_<0&&(N=b[D][-_-1>>1].neg()),N.type==="affine"?M=M.mixedAdd(N):M=M.add(N))}}for(x=0;x<h;x++)b[x]=null;return y?M:M.toP()};function o(s,c){this.curve=s,this.type=c,this.precomputed=null}return a.BasePoint=o,o.prototype.eq=function(){throw new Error("Not implemented")},o.prototype.validate=function(){return this.curve.validate(this)},a.prototype.decodePoint=function(c,l){c=e.toArray(c,l);var d=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*d){c[0]===6?i(c[c.length-1]%2===0):c[0]===7&&i(c[c.length-1]%2===1);var h=this.point(c.slice(1,1+d),c.slice(1+d,1+2*d));return h}else if((c[0]===2||c[0]===3)&&c.length-1===d)return this.pointFromX(c.slice(1,1+d),c[0]===3);throw new Error("Unknown point format")},o.prototype.encodeCompressed=function(c){return this.encode(c,!0)},o.prototype._encode=function(c){var l=this.curve.p.byteLength(),d=this.getX().toArray("be",l);return c?[this.getY().isEven()?2:3].concat(d):[4].concat(d,this.getY().toArray("be",l))},o.prototype.encode=function(c,l){return e.encode(this._encode(l),c)},o.prototype.precompute=function(c){if(this.precomputed)return this;var l={doubles:null,naf:null,beta:null};return l.naf=this._getNAFPoints(8),l.doubles=this._getDoubles(4,c),l.beta=this._getBeta(),this.precomputed=l,this},o.prototype._hasDoubles=function(c){if(!this.precomputed)return!1;var l=this.precomputed.doubles;return l?l.points.length>=Math.ceil((c.bitLength()+1)/l.step):!1},o.prototype._getDoubles=function(c,l){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var d=[this],h=this,y=0;y<l;y+=c){for(var m=0;m<c;m++)h=h.dbl();d.push(h)}return{step:c,points:d}},o.prototype._getNAFPoints=function(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var l=[this],d=(1<<c)-1,h=d===1?null:this.dbl(),y=1;y<d;y++)l[y]=l[y-1].add(h);return{wnd:c,points:l}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(c){for(var l=this,d=0;d<c;d++)l=l.dbl();return l},l_}var f_,MM;function Lj(){if(MM)return f_;MM=1;var r=La(),e=Ys(),t=Ws(),n=eb(),i=r.assert;function a(c){n.call(this,"short",c),this.a=new e(c.a,16).toRed(this.red),this.b=new e(c.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(c),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t(a,n),f_=a,a.prototype._getEndomorphism=function(l){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var d,h;if(l.beta)d=new e(l.beta,16).toRed(this.red);else{var y=this._getEndoRoots(this.p);d=y[0].cmp(y[1])<0?y[0]:y[1],d=d.toRed(this.red)}if(l.lambda)h=new e(l.lambda,16);else{var m=this._getEndoRoots(this.n);this.g.mul(m[0]).x.cmp(this.g.x.redMul(d))===0?h=m[0]:(h=m[1],i(this.g.mul(h).x.cmp(this.g.x.redMul(d))===0))}var b;return l.basis?b=l.basis.map(function(v){return{a:new e(v.a,16),b:new e(v.b,16)}}):b=this._getEndoBasis(h),{beta:d,lambda:h,basis:b}}},a.prototype._getEndoRoots=function(l){var d=l===this.p?this.red:e.mont(l),h=new e(2).toRed(d).redInvm(),y=h.redNeg(),m=new e(3).toRed(d).redNeg().redSqrt().redMul(h),b=y.redAdd(m).fromRed(),v=y.redSub(m).fromRed();return[b,v]},a.prototype._getEndoBasis=function(l){for(var d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=l,y=this.n.clone(),m=new e(1),b=new e(0),v=new e(0),E=new e(1),x,D,N,B,k,F,T,z=0,Z,Y;h.cmpn(0)!==0;){var W=y.div(h);Z=y.sub(W.mul(h)),Y=v.sub(W.mul(m));var M=E.sub(W.mul(b));if(!N&&Z.cmp(d)<0)x=T.neg(),D=m,N=Z.neg(),B=Y;else if(N&&++z===2)break;T=Z,y=h,h=Z,v=m,m=Y,E=b,b=M}k=Z.neg(),F=Y;var C=N.sqr().add(B.sqr()),R=k.sqr().add(F.sqr());return R.cmp(C)>=0&&(k=x,F=D),N.negative&&(N=N.neg(),B=B.neg()),k.negative&&(k=k.neg(),F=F.neg()),[{a:N,b:B},{a:k,b:F}]},a.prototype._endoSplit=function(l){var d=this.endo.basis,h=d[0],y=d[1],m=y.b.mul(l).divRound(this.n),b=h.b.neg().mul(l).divRound(this.n),v=m.mul(h.a),E=b.mul(y.a),x=m.mul(h.b),D=b.mul(y.b),N=l.sub(v).sub(E),B=x.add(D).neg();return{k1:N,k2:B}},a.prototype.pointFromX=function(l,d){l=new e(l,16),l.red||(l=l.toRed(this.red));var h=l.redSqr().redMul(l).redIAdd(l.redMul(this.a)).redIAdd(this.b),y=h.redSqrt();if(y.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var m=y.fromRed().isOdd();return(d&&!m||!d&&m)&&(y=y.redNeg()),this.point(l,y)},a.prototype.validate=function(l){if(l.inf)return!0;var d=l.x,h=l.y,y=this.a.redMul(d),m=d.redSqr().redMul(d).redIAdd(y).redIAdd(this.b);return h.redSqr().redISub(m).cmpn(0)===0},a.prototype._endoWnafMulAdd=function(l,d,h){for(var y=this._endoWnafT1,m=this._endoWnafT2,b=0;b<l.length;b++){var v=this._endoSplit(d[b]),E=l[b],x=E._getBeta();v.k1.negative&&(v.k1.ineg(),E=E.neg(!0)),v.k2.negative&&(v.k2.ineg(),x=x.neg(!0)),y[b*2]=E,y[b*2+1]=x,m[b*2]=v.k1,m[b*2+1]=v.k2}for(var D=this._wnafMulAdd(1,y,m,b*2,h),N=0;N<b*2;N++)y[N]=null,m[N]=null;return D};function o(c,l,d,h){n.BasePoint.call(this,c,"affine"),l===null&&d===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(l,16),this.y=new e(d,16),h&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}t(o,n.BasePoint),a.prototype.point=function(l,d,h){return new o(this,l,d,h)},a.prototype.pointFromJSON=function(l,d){return o.fromJSON(this,l,d)},o.prototype._getBeta=function(){if(this.curve.endo){var l=this.precomputed;if(l&&l.beta)return l.beta;var d=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(l){var h=this.curve,y=function(m){return h.point(m.x.redMul(h.endo.beta),m.y)};l.beta=d,d.precomputed={beta:null,naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(y)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(y)}}}return d}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(l,d,h){typeof d=="string"&&(d=JSON.parse(d));var y=l.point(d[0],d[1],h);if(!d[2])return y;function m(v){return l.point(v[0],v[1],h)}var b=d[2];return y.precomputed={beta:null,doubles:b.doubles&&{step:b.doubles.step,points:[y].concat(b.doubles.points.map(m))},naf:b.naf&&{wnd:b.naf.wnd,points:[y].concat(b.naf.points.map(m))}},y},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(l){if(this.inf)return l;if(l.inf)return this;if(this.eq(l))return this.dbl();if(this.neg().eq(l))return this.curve.point(null,null);if(this.x.cmp(l.x)===0)return this.curve.point(null,null);var d=this.y.redSub(l.y);d.cmpn(0)!==0&&(d=d.redMul(this.x.redSub(l.x).redInvm()));var h=d.redSqr().redISub(this.x).redISub(l.x),y=d.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,y)},o.prototype.dbl=function(){if(this.inf)return this;var l=this.y.redAdd(this.y);if(l.cmpn(0)===0)return this.curve.point(null,null);var d=this.curve.a,h=this.x.redSqr(),y=l.redInvm(),m=h.redAdd(h).redIAdd(h).redIAdd(d).redMul(y),b=m.redSqr().redISub(this.x.redAdd(this.x)),v=m.redMul(this.x.redSub(b)).redISub(this.y);return this.curve.point(b,v)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(l){return l=new e(l,16),this.isInfinity()?this:this._hasDoubles(l)?this.curve._fixedNafMul(this,l):this.curve.endo?this.curve._endoWnafMulAdd([this],[l]):this.curve._wnafMul(this,l)},o.prototype.mulAdd=function(l,d,h){var y=[this,d],m=[l,h];return this.curve.endo?this.curve._endoWnafMulAdd(y,m):this.curve._wnafMulAdd(1,y,m,2)},o.prototype.jmulAdd=function(l,d,h){var y=[this,d],m=[l,h];return this.curve.endo?this.curve._endoWnafMulAdd(y,m,!0):this.curve._wnafMulAdd(1,y,m,2,!0)},o.prototype.eq=function(l){return this===l||this.inf===l.inf&&(this.inf||this.x.cmp(l.x)===0&&this.y.cmp(l.y)===0)},o.prototype.neg=function(l){if(this.inf)return this;var d=this.curve.point(this.x,this.y.redNeg());if(l&&this.precomputed){var h=this.precomputed,y=function(m){return m.neg()};d.precomputed={naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(y)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(y)}}}return d},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var l=this.curve.jpoint(this.x,this.y,this.curve.one);return l};function s(c,l,d,h){n.BasePoint.call(this,c,"jacobian"),l===null&&d===null&&h===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(l,16),this.y=new e(d,16),this.z=new e(h,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return t(s,n.BasePoint),a.prototype.jpoint=function(l,d,h){return new s(this,l,d,h)},s.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var l=this.z.redInvm(),d=l.redSqr(),h=this.x.redMul(d),y=this.y.redMul(d).redMul(l);return this.curve.point(h,y)},s.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},s.prototype.add=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var d=l.z.redSqr(),h=this.z.redSqr(),y=this.x.redMul(d),m=l.x.redMul(h),b=this.y.redMul(d.redMul(l.z)),v=l.y.redMul(h.redMul(this.z)),E=y.redSub(m),x=b.redSub(v);if(E.cmpn(0)===0)return x.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=E.redSqr(),N=D.redMul(E),B=y.redMul(D),k=x.redSqr().redIAdd(N).redISub(B).redISub(B),F=x.redMul(B.redISub(k)).redISub(b.redMul(N)),T=this.z.redMul(l.z).redMul(E);return this.curve.jpoint(k,F,T)},s.prototype.mixedAdd=function(l){if(this.isInfinity())return l.toJ();if(l.isInfinity())return this;var d=this.z.redSqr(),h=this.x,y=l.x.redMul(d),m=this.y,b=l.y.redMul(d).redMul(this.z),v=h.redSub(y),E=m.redSub(b);if(v.cmpn(0)===0)return E.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var x=v.redSqr(),D=x.redMul(v),N=h.redMul(x),B=E.redSqr().redIAdd(D).redISub(N).redISub(N),k=E.redMul(N.redISub(B)).redISub(m.redMul(D)),F=this.z.redMul(v);return this.curve.jpoint(B,k,F)},s.prototype.dblp=function(l){if(l===0)return this;if(this.isInfinity())return this;if(!l)return this.dbl();var d;if(this.curve.zeroA||this.curve.threeA){var h=this;for(d=0;d<l;d++)h=h.dbl();return h}var y=this.curve.a,m=this.curve.tinv,b=this.x,v=this.y,E=this.z,x=E.redSqr().redSqr(),D=v.redAdd(v);for(d=0;d<l;d++){var N=b.redSqr(),B=D.redSqr(),k=B.redSqr(),F=N.redAdd(N).redIAdd(N).redIAdd(y.redMul(x)),T=b.redMul(B),z=F.redSqr().redISub(T.redAdd(T)),Z=T.redISub(z),Y=F.redMul(Z);Y=Y.redIAdd(Y).redISub(k);var W=D.redMul(E);d+1<l&&(x=x.redMul(k)),b=z,E=W,D=Y}return this.curve.jpoint(b,D.redMul(m),E)},s.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},s.prototype._zeroDbl=function(){var l,d,h;if(this.zOne){var y=this.x.redSqr(),m=this.y.redSqr(),b=m.redSqr(),v=this.x.redAdd(m).redSqr().redISub(y).redISub(b);v=v.redIAdd(v);var E=y.redAdd(y).redIAdd(y),x=E.redSqr().redISub(v).redISub(v),D=b.redIAdd(b);D=D.redIAdd(D),D=D.redIAdd(D),l=x,d=E.redMul(v.redISub(x)).redISub(D),h=this.y.redAdd(this.y)}else{var N=this.x.redSqr(),B=this.y.redSqr(),k=B.redSqr(),F=this.x.redAdd(B).redSqr().redISub(N).redISub(k);F=F.redIAdd(F);var T=N.redAdd(N).redIAdd(N),z=T.redSqr(),Z=k.redIAdd(k);Z=Z.redIAdd(Z),Z=Z.redIAdd(Z),l=z.redISub(F).redISub(F),d=T.redMul(F.redISub(l)).redISub(Z),h=this.y.redMul(this.z),h=h.redIAdd(h)}return this.curve.jpoint(l,d,h)},s.prototype._threeDbl=function(){var l,d,h;if(this.zOne){var y=this.x.redSqr(),m=this.y.redSqr(),b=m.redSqr(),v=this.x.redAdd(m).redSqr().redISub(y).redISub(b);v=v.redIAdd(v);var E=y.redAdd(y).redIAdd(y).redIAdd(this.curve.a),x=E.redSqr().redISub(v).redISub(v);l=x;var D=b.redIAdd(b);D=D.redIAdd(D),D=D.redIAdd(D),d=E.redMul(v.redISub(x)).redISub(D),h=this.y.redAdd(this.y)}else{var N=this.z.redSqr(),B=this.y.redSqr(),k=this.x.redMul(B),F=this.x.redSub(N).redMul(this.x.redAdd(N));F=F.redAdd(F).redIAdd(F);var T=k.redIAdd(k);T=T.redIAdd(T);var z=T.redAdd(T);l=F.redSqr().redISub(z),h=this.y.redAdd(this.z).redSqr().redISub(B).redISub(N);var Z=B.redSqr();Z=Z.redIAdd(Z),Z=Z.redIAdd(Z),Z=Z.redIAdd(Z),d=F.redMul(T.redISub(l)).redISub(Z)}return this.curve.jpoint(l,d,h)},s.prototype._dbl=function(){var l=this.curve.a,d=this.x,h=this.y,y=this.z,m=y.redSqr().redSqr(),b=d.redSqr(),v=h.redSqr(),E=b.redAdd(b).redIAdd(b).redIAdd(l.redMul(m)),x=d.redAdd(d);x=x.redIAdd(x);var D=x.redMul(v),N=E.redSqr().redISub(D.redAdd(D)),B=D.redISub(N),k=v.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var F=E.redMul(B).redISub(k),T=h.redAdd(h).redMul(y);return this.curve.jpoint(N,F,T)},s.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var l=this.x.redSqr(),d=this.y.redSqr(),h=this.z.redSqr(),y=d.redSqr(),m=l.redAdd(l).redIAdd(l),b=m.redSqr(),v=this.x.redAdd(d).redSqr().redISub(l).redISub(y);v=v.redIAdd(v),v=v.redAdd(v).redIAdd(v),v=v.redISub(b);var E=v.redSqr(),x=y.redIAdd(y);x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var D=m.redIAdd(v).redSqr().redISub(b).redISub(E).redISub(x),N=d.redMul(D);N=N.redIAdd(N),N=N.redIAdd(N);var B=this.x.redMul(E).redISub(N);B=B.redIAdd(B),B=B.redIAdd(B);var k=this.y.redMul(D.redMul(x.redISub(D)).redISub(v.redMul(E)));k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var F=this.z.redAdd(v).redSqr().redISub(h).redISub(E);return this.curve.jpoint(B,k,F)},s.prototype.mul=function(l,d){return l=new e(l,d),this.curve._wnafMul(this,l)},s.prototype.eq=function(l){if(l.type==="affine")return this.eq(l.toJ());if(this===l)return!0;var d=this.z.redSqr(),h=l.z.redSqr();if(this.x.redMul(h).redISub(l.x.redMul(d)).cmpn(0)!==0)return!1;var y=d.redMul(this.z),m=h.redMul(l.z);return this.y.redMul(m).redISub(l.y.redMul(y)).cmpn(0)===0},s.prototype.eqXToP=function(l){var d=this.z.redSqr(),h=l.toRed(this.curve.red).redMul(d);if(this.x.cmp(h)===0)return!0;for(var y=l.clone(),m=this.curve.redN.redMul(d);;){if(y.iadd(this.curve.n),y.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(m),this.x.cmp(h)===0)return!0}},s.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},f_}var d_,TM;function jj(){if(TM)return d_;TM=1;var r=Ys(),e=Ws(),t=eb(),n=La();function i(o){t.call(this,"mont",o),this.a=new r(o.a,16).toRed(this.red),this.b=new r(o.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(i,t),d_=i,i.prototype.validate=function(s){var c=s.normalize().x,l=c.redSqr(),d=l.redMul(c).redAdd(l.redMul(this.a)).redAdd(c),h=d.redSqrt();return h.redSqr().cmp(d)===0};function a(o,s,c){t.BasePoint.call(this,o,"projective"),s===null&&c===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(s,16),this.z=new r(c,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(a,t.BasePoint),i.prototype.decodePoint=function(s,c){return this.point(n.toArray(s,c),1)},i.prototype.point=function(s,c){return new a(this,s,c)},i.prototype.pointFromJSON=function(s){return a.fromJSON(this,s)},a.prototype.precompute=function(){},a.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},a.fromJSON=function(s,c){return new a(s,c[0],c[1]||s.one)},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},a.prototype.dbl=function(){var s=this.x.redAdd(this.z),c=s.redSqr(),l=this.x.redSub(this.z),d=l.redSqr(),h=c.redSub(d),y=c.redMul(d),m=h.redMul(d.redAdd(this.curve.a24.redMul(h)));return this.curve.point(y,m)},a.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.diffAdd=function(s,c){var l=this.x.redAdd(this.z),d=this.x.redSub(this.z),h=s.x.redAdd(s.z),y=s.x.redSub(s.z),m=y.redMul(l),b=h.redMul(d),v=c.z.redMul(m.redAdd(b).redSqr()),E=c.x.redMul(m.redISub(b).redSqr());return this.curve.point(v,E)},a.prototype.mul=function(s){for(var c=s.clone(),l=this,d=this.curve.point(null,null),h=this,y=[];c.cmpn(0)!==0;c.iushrn(1))y.push(c.andln(1));for(var m=y.length-1;m>=0;m--)y[m]===0?(l=l.diffAdd(d,h),d=d.dbl()):(d=l.diffAdd(d,h),l=l.dbl());return d},a.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.eq=function(s){return this.getX().cmp(s.getX())===0},a.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d_}var h_,RM;function $j(){if(RM)return h_;RM=1;var r=La(),e=Ys(),t=Ws(),n=eb(),i=r.assert;function a(s){this.twisted=(s.a|0)!==1,this.mOneA=this.twisted&&(s.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",s),this.a=new e(s.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(s.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(s.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(s.c|0)===1}t(a,n),h_=a,a.prototype._mulA=function(c){return this.mOneA?c.redNeg():this.a.redMul(c)},a.prototype._mulC=function(c){return this.oneC?c:this.c.redMul(c)},a.prototype.jpoint=function(c,l,d,h){return this.point(c,l,d,h)},a.prototype.pointFromX=function(c,l){c=new e(c,16),c.red||(c=c.toRed(this.red));var d=c.redSqr(),h=this.c2.redSub(this.a.redMul(d)),y=this.one.redSub(this.c2.redMul(this.d).redMul(d)),m=h.redMul(y.redInvm()),b=m.redSqrt();if(b.redSqr().redSub(m).cmp(this.zero)!==0)throw new Error("invalid point");var v=b.fromRed().isOdd();return(l&&!v||!l&&v)&&(b=b.redNeg()),this.point(c,b)},a.prototype.pointFromY=function(c,l){c=new e(c,16),c.red||(c=c.toRed(this.red));var d=c.redSqr(),h=d.redSub(this.c2),y=d.redMul(this.d).redMul(this.c2).redSub(this.a),m=h.redMul(y.redInvm());if(m.cmp(this.zero)===0){if(l)throw new Error("invalid point");return this.point(this.zero,c)}var b=m.redSqrt();if(b.redSqr().redSub(m).cmp(this.zero)!==0)throw new Error("invalid point");return b.fromRed().isOdd()!==l&&(b=b.redNeg()),this.point(b,c)},a.prototype.validate=function(c){if(c.isInfinity())return!0;c.normalize();var l=c.x.redSqr(),d=c.y.redSqr(),h=l.redMul(this.a).redAdd(d),y=this.c2.redMul(this.one.redAdd(this.d.redMul(l).redMul(d)));return h.cmp(y)===0};function o(s,c,l,d,h){n.BasePoint.call(this,s,"projective"),c===null&&l===null&&d===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(c,16),this.y=new e(l,16),this.z=d?new e(d,16):this.curve.one,this.t=h&&new e(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return t(o,n.BasePoint),a.prototype.pointFromJSON=function(c){return o.fromJSON(this,c)},a.prototype.point=function(c,l,d,h){return new o(this,c,l,d,h)},o.fromJSON=function(c,l){return new o(c,l[0],l[1],l[2])},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},o.prototype._extDbl=function(){var c=this.x.redSqr(),l=this.y.redSqr(),d=this.z.redSqr();d=d.redIAdd(d);var h=this.curve._mulA(c),y=this.x.redAdd(this.y).redSqr().redISub(c).redISub(l),m=h.redAdd(l),b=m.redSub(d),v=h.redSub(l),E=y.redMul(b),x=m.redMul(v),D=y.redMul(v),N=b.redMul(m);return this.curve.point(E,x,N,D)},o.prototype._projDbl=function(){var c=this.x.redAdd(this.y).redSqr(),l=this.x.redSqr(),d=this.y.redSqr(),h,y,m,b,v,E;if(this.curve.twisted){b=this.curve._mulA(l);var x=b.redAdd(d);this.zOne?(h=c.redSub(l).redSub(d).redMul(x.redSub(this.curve.two)),y=x.redMul(b.redSub(d)),m=x.redSqr().redSub(x).redSub(x)):(v=this.z.redSqr(),E=x.redSub(v).redISub(v),h=c.redSub(l).redISub(d).redMul(E),y=x.redMul(b.redSub(d)),m=x.redMul(E))}else b=l.redAdd(d),v=this.curve._mulC(this.z).redSqr(),E=b.redSub(v).redSub(v),h=this.curve._mulC(c.redISub(b)).redMul(E),y=this.curve._mulC(b).redMul(l.redISub(d)),m=b.redMul(E);return this.curve.point(h,y,m)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(c){var l=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),d=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),h=this.t.redMul(this.curve.dd).redMul(c.t),y=this.z.redMul(c.z.redAdd(c.z)),m=d.redSub(l),b=y.redSub(h),v=y.redAdd(h),E=d.redAdd(l),x=m.redMul(b),D=v.redMul(E),N=m.redMul(E),B=b.redMul(v);return this.curve.point(x,D,B,N)},o.prototype._projAdd=function(c){var l=this.z.redMul(c.z),d=l.redSqr(),h=this.x.redMul(c.x),y=this.y.redMul(c.y),m=this.curve.d.redMul(h).redMul(y),b=d.redSub(m),v=d.redAdd(m),E=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub(h).redISub(y),x=l.redMul(b).redMul(E),D,N;return this.curve.twisted?(D=l.redMul(v).redMul(y.redSub(this.curve._mulA(h))),N=b.redMul(v)):(D=l.redMul(v).redMul(y.redSub(h)),N=this.curve._mulC(b).redMul(v)),this.curve.point(x,D,N)},o.prototype.add=function(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)},o.prototype.mul=function(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)},o.prototype.mulAdd=function(c,l,d){return this.curve._wnafMulAdd(1,[this,l],[c,d],2,!1)},o.prototype.jmulAdd=function(c,l,d){return this.curve._wnafMulAdd(1,[this,l],[c,d],2,!0)},o.prototype.normalize=function(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0},o.prototype.eqXToP=function(c){var l=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(l)===0)return!0;for(var d=c.clone(),h=this.curve.redN.redMul(this.z);;){if(d.iadd(this.curve.n),d.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(h),this.x.cmp(l)===0)return!0}},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add,h_}var OM;function tI(){return OM||(OM=1,(function(r){var e=r;e.base=eb(),e.short=Lj(),e.mont=jj(),e.edwards=$j()})(c_)),c_}var p_={},y_,CM;function Fj(){return CM||(CM=1,y_={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),y_}var NM;function C8(){return NM||(NM=1,(function(r){var e=r,t=Xv(),n=tI(),i=La(),a=i.assert;function o(l){l.type==="short"?this.curve=new n.short(l):l.type==="edwards"?this.curve=new n.edwards(l):this.curve=new n.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function s(l,d){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var h=new o(d);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:h}),h}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=Fj()}catch{c=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(p_)),p_}var m_,BM;function zj(){if(BM)return m_;BM=1;var r=Xv(),e=eI(),t=kl();function n(i){if(!(this instanceof n))return new n(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var a=e.toArray(i.entropy,i.entropyEnc||"hex"),o=e.toArray(i.nonce,i.nonceEnc||"hex"),s=e.toArray(i.pers,i.persEnc||"hex");t(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(a,o,s)}return m_=n,n.prototype._init=function(a,o,s){var c=a.concat(o).concat(s);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(c),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},n.prototype._update=function(a){var o=this._hmac().update(this.V).update([0]);a&&(o=o.update(a)),this.K=o.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(a,o,s,c){typeof o!="string"&&(c=s,s=o,o=null),a=e.toArray(a,o),s=e.toArray(s,c),t(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(s||[])),this._reseed=1},n.prototype.generate=function(a,o,s,c){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof o!="string"&&(c=s,s=o,o=null),s&&(s=e.toArray(s,c||"hex"),this._update(s));for(var l=[];l.length<a;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var d=l.slice(0,a);return this._update(s),this._reseed++,e.encode(d,o)},m_}var g_,IM;function Vj(){if(IM)return g_;IM=1;var r=Ys(),e=La(),t=e.assert;function n(i,a){this.ec=i,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}return g_=n,n.fromPublic=function(a,o,s){return o instanceof n?o:new n(a,{pub:o,pubEnc:s})},n.fromPrivate=function(a,o,s){return o instanceof n?o:new n(a,{priv:o,privEnc:s})},n.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(a,o){return typeof a=="string"&&(o=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),o?this.pub.encode(o,a):this.pub},n.prototype.getPrivate=function(a){return a==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(a,o){this.priv=new r(a,o||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(a,o){if(a.x||a.y){this.ec.curve.type==="mont"?t(a.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&t(a.x&&a.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(a.x,a.y);return}this.pub=this.ec.curve.decodePoint(a,o)},n.prototype.derive=function(a){return a.validate()||t(a.validate(),"public point not validated"),a.mul(this.priv).getX()},n.prototype.sign=function(a,o,s){return this.ec.sign(a,this,o,s)},n.prototype.verify=function(a,o,s){return this.ec.verify(a,o,this,void 0,s)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},g_}var v_,DM;function Hj(){if(DM)return v_;DM=1;var r=Ys(),e=La(),t=e.assert;function n(c,l){if(c instanceof n)return c;this._importDER(c,l)||(t(c.r&&c.s,"Signature without r or s"),this.r=new r(c.r,16),this.s=new r(c.s,16),c.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=c.recoveryParam)}v_=n;function i(){this.place=0}function a(c,l){var d=c[l.place++];if(!(d&128))return d;var h=d&15;if(h===0||h>4||c[l.place]===0)return!1;for(var y=0,m=0,b=l.place;m<h;m++,b++)y<<=8,y|=c[b],y>>>=0;return y<=127?!1:(l.place=b,y)}function o(c){for(var l=0,d=c.length-1;!c[l]&&!(c[l+1]&128)&&l<d;)l++;return l===0?c:c.slice(l)}n.prototype._importDER=function(l,d){l=e.toArray(l,d);var h=new i;if(l[h.place++]!==48)return!1;var y=a(l,h);if(y===!1||y+h.place!==l.length||l[h.place++]!==2)return!1;var m=a(l,h);if(m===!1||(l[h.place]&128)!==0)return!1;var b=l.slice(h.place,m+h.place);if(h.place+=m,l[h.place++]!==2)return!1;var v=a(l,h);if(v===!1||l.length!==v+h.place||(l[h.place]&128)!==0)return!1;var E=l.slice(h.place,v+h.place);if(b[0]===0)if(b[1]&128)b=b.slice(1);else return!1;if(E[0]===0)if(E[1]&128)E=E.slice(1);else return!1;return this.r=new r(b),this.s=new r(E),this.recoveryParam=null,!0};function s(c,l){if(l<128){c.push(l);return}var d=1+(Math.log(l)/Math.LN2>>>3);for(c.push(d|128);--d;)c.push(l>>>(d<<3)&255);c.push(l)}return n.prototype.toDER=function(l){var d=this.r.toArray(),h=this.s.toArray();for(d[0]&128&&(d=[0].concat(d)),h[0]&128&&(h=[0].concat(h)),d=o(d),h=o(h);!h[0]&&!(h[1]&128);)h=h.slice(1);var y=[2];s(y,d.length),y=y.concat(d),y.push(2),s(y,h.length);var m=y.concat(h),b=[48];return s(b,m.length),b=b.concat(m),e.encode(b,l)},v_}var b_,PM;function Kj(){if(PM)return b_;PM=1;var r=Ys(),e=zj(),t=La(),n=C8(),i=O8(),a=t.assert,o=Vj(),s=Hj();function c(l){if(!(this instanceof c))return new c(l);typeof l=="string"&&(a(Object.prototype.hasOwnProperty.call(n,l),"Unknown curve "+l),l=n[l]),l instanceof n.PresetCurve&&(l={curve:l}),this.curve=l.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=l.curve.g,this.g.precompute(l.curve.n.bitLength()+1),this.hash=l.hash||l.curve.hash}return b_=c,c.prototype.keyPair=function(d){return new o(this,d)},c.prototype.keyFromPrivate=function(d,h){return o.fromPrivate(this,d,h)},c.prototype.keyFromPublic=function(d,h){return o.fromPublic(this,d,h)},c.prototype.genKeyPair=function(d){d||(d={});for(var h=new e({hash:this.hash,pers:d.pers,persEnc:d.persEnc||"utf8",entropy:d.entropy||i(this.hash.hmacStrength),entropyEnc:d.entropy&&d.entropyEnc||"utf8",nonce:this.n.toArray()}),y=this.n.byteLength(),m=this.n.sub(new r(2));;){var b=new r(h.generate(y));if(!(b.cmp(m)>0))return b.iaddn(1),this.keyFromPrivate(b)}},c.prototype._truncateToN=function(d,h,y){var m;if(r.isBN(d)||typeof d=="number")d=new r(d,16),m=d.byteLength();else if(typeof d=="object")m=d.length,d=new r(d,16);else{var b=d.toString();m=b.length+1>>>1,d=new r(b,16)}typeof y!="number"&&(y=m*8);var v=y-this.n.bitLength();return v>0&&(d=d.ushrn(v)),!h&&d.cmp(this.n)>=0?d.sub(this.n):d},c.prototype.sign=function(d,h,y,m){if(typeof y=="object"&&(m=y,y=null),m||(m={}),typeof d!="string"&&typeof d!="number"&&!r.isBN(d)){a(typeof d=="object"&&d&&typeof d.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),a(d.length>>>0===d.length);for(var b=0;b<d.length;b++)a((d[b]&255)===d[b])}h=this.keyFromPrivate(h,y),d=this._truncateToN(d,!1,m.msgBitLength),a(!d.isNeg(),"Can not sign a negative message");var v=this.n.byteLength(),E=h.getPrivate().toArray("be",v),x=d.toArray("be",v);a(new r(x).eq(d),"Can not sign message");for(var D=new e({hash:this.hash,entropy:E,nonce:x,pers:m.pers,persEnc:m.persEnc||"utf8"}),N=this.n.sub(new r(1)),B=0;;B++){var k=m.k?m.k(B):new r(D.generate(this.n.byteLength()));if(k=this._truncateToN(k,!0),!(k.cmpn(1)<=0||k.cmp(N)>=0)){var F=this.g.mul(k);if(!F.isInfinity()){var T=F.getX(),z=T.umod(this.n);if(z.cmpn(0)!==0){var Z=k.invm(this.n).mul(z.mul(h.getPrivate()).iadd(d));if(Z=Z.umod(this.n),Z.cmpn(0)!==0){var Y=(F.getY().isOdd()?1:0)|(T.cmp(z)!==0?2:0);return m.canonical&&Z.cmp(this.nh)>0&&(Z=this.n.sub(Z),Y^=1),new s({r:z,s:Z,recoveryParam:Y})}}}}}},c.prototype.verify=function(d,h,y,m,b){b||(b={}),d=this._truncateToN(d,!1,b.msgBitLength),y=this.keyFromPublic(y,m),h=new s(h,"hex");var v=h.r,E=h.s;if(v.cmpn(1)<0||v.cmp(this.n)>=0||E.cmpn(1)<0||E.cmp(this.n)>=0)return!1;var x=E.invm(this.n),D=x.mul(d).umod(this.n),N=x.mul(v).umod(this.n),B;return this.curve._maxwellTrick?(B=this.g.jmulAdd(D,y.getPublic(),N),B.isInfinity()?!1:B.eqXToP(v)):(B=this.g.mulAdd(D,y.getPublic(),N),B.isInfinity()?!1:B.getX().umod(this.n).cmp(v)===0)},c.prototype.recoverPubKey=function(l,d,h,y){a((3&h)===h,"The recovery param is more than two bits"),d=new s(d,y);var m=this.n,b=new r(l),v=d.r,E=d.s,x=h&1,D=h>>1;if(v.cmp(this.curve.p.umod(this.curve.n))>=0&&D)throw new Error("Unable to find sencond key candinate");D?v=this.curve.pointFromX(v.add(this.curve.n),x):v=this.curve.pointFromX(v,x);var N=d.r.invm(m),B=m.sub(b).mul(N).umod(m),k=E.mul(N).umod(m);return this.g.mulAdd(B,v,k)},c.prototype.getKeyRecoveryParam=function(l,d,h,y){if(d=new s(d,y),d.recoveryParam!==null)return d.recoveryParam;for(var m=0;m<4;m++){var b;try{b=this.recoverPubKey(l,d,m)}catch{continue}if(b.eq(h))return m}throw new Error("Unable to find valid recovery factor")},b_}var w_,UM;function Gj(){if(UM)return w_;UM=1;var r=La(),e=r.assert,t=r.parseBytes,n=r.cachedProperty;function i(a,o){this.eddsa=a,this._secret=t(o.secret),a.isPoint(o.pub)?this._pub=o.pub:this._pubBytes=t(o.pub)}return i.fromPublic=function(o,s){return s instanceof i?s:new i(o,{pub:s})},i.fromSecret=function(o,s){return s instanceof i?s:new i(o,{secret:s})},i.prototype.secret=function(){return this._secret},n(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(i,"privBytes",function(){var o=this.eddsa,s=this.hash(),c=o.encodingLength-1,l=s.slice(0,o.encodingLength);return l[0]&=248,l[c]&=127,l[c]|=64,l}),n(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(o){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(o,this)},i.prototype.verify=function(o,s){return this.eddsa.verify(o,s,this)},i.prototype.getSecret=function(o){return e(this._secret,"KeyPair is public only"),r.encode(this.secret(),o)},i.prototype.getPublic=function(o){return r.encode(this.pubBytes(),o)},w_=i,w_}var __,kM;function Wj(){if(kM)return __;kM=1;var r=Ys(),e=La(),t=e.assert,n=e.cachedProperty,i=e.parseBytes;function a(o,s){this.eddsa=o,typeof s!="object"&&(s=i(s)),Array.isArray(s)&&(t(s.length===o.encodingLength*2,"Signature has invalid size"),s={R:s.slice(0,o.encodingLength),S:s.slice(o.encodingLength)}),t(s.R&&s.S,"Signature without R or S"),o.isPoint(s.R)&&(this._R=s.R),s.S instanceof r&&(this._S=s.S),this._Rencoded=Array.isArray(s.R)?s.R:s.Rencoded,this._Sencoded=Array.isArray(s.S)?s.S:s.Sencoded}return n(a,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(a,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(a,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(a,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),a.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},a.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},__=a,__}var E_,qM;function Zj(){if(qM)return E_;qM=1;var r=Xv(),e=C8(),t=La(),n=t.assert,i=t.parseBytes,a=Gj(),o=Wj();function s(c){if(n(c==="ed25519","only tested with ed25519 so far"),!(this instanceof s))return new s(c);c=e[c].curve,this.curve=c,this.g=c.g,this.g.precompute(c.n.bitLength()+1),this.pointClass=c.point().constructor,this.encodingLength=Math.ceil(c.n.bitLength()/8),this.hash=r.sha512}return E_=s,s.prototype.sign=function(l,d){l=i(l);var h=this.keyFromSecret(d),y=this.hashInt(h.messagePrefix(),l),m=this.g.mul(y),b=this.encodePoint(m),v=this.hashInt(b,h.pubBytes(),l).mul(h.priv()),E=y.add(v).umod(this.curve.n);return this.makeSignature({R:m,S:E,Rencoded:b})},s.prototype.verify=function(l,d,h){if(l=i(l),d=this.makeSignature(d),d.S().gte(d.eddsa.curve.n)||d.S().isNeg())return!1;var y=this.keyFromPublic(h),m=this.hashInt(d.Rencoded(),y.pubBytes(),l),b=this.g.mul(d.S()),v=d.R().add(y.pub().mul(m));return v.eq(b)},s.prototype.hashInt=function(){for(var l=this.hash(),d=0;d<arguments.length;d++)l.update(arguments[d]);return t.intFromLE(l.digest()).umod(this.curve.n)},s.prototype.keyFromPublic=function(l){return a.fromPublic(this,l)},s.prototype.keyFromSecret=function(l){return a.fromSecret(this,l)},s.prototype.makeSignature=function(l){return l instanceof o?l:new o(this,l)},s.prototype.encodePoint=function(l){var d=l.getY().toArray("le",this.encodingLength);return d[this.encodingLength-1]|=l.getX().isOdd()?128:0,d},s.prototype.decodePoint=function(l){l=t.parseBytes(l);var d=l.length-1,h=l.slice(0,d).concat(l[d]&-129),y=(l[d]&128)!==0,m=t.intFromLE(h);return this.curve.pointFromY(m,y)},s.prototype.encodeInt=function(l){return l.toArray("le",this.encodingLength)},s.prototype.decodeInt=function(l){return t.intFromLE(l)},s.prototype.isPoint=function(l){return l instanceof this.pointClass},E_}var LM;function Yj(){return LM||(LM=1,(function(r){var e=r;e.version=qj.version,e.utils=La(),e.rand=O8(),e.curve=tI(),e.curves=C8(),e.ec=Kj(),e.eddsa=Zj()})(s_)),s_}var x_=Yj();function re(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}const Qj=4,jM=0,$M=1,Jj=2;function Fd(r){let e=r.length;for(;--e>=0;)r[e]=0}const Xj=0,rI=1,e$=2,t$=3,r$=258,N8=29,R0=256,Pp=R0+1+N8,pd=30,B8=19,nI=2*Pp+1,nl=15,A_=16,n$=7,I8=256,iI=16,aI=17,sI=18,ux=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),F1=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i$=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),oI=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a$=512,Co=new Array((Pp+2)*2);Fd(Co);const wp=new Array(pd*2);Fd(wp);const Up=new Array(a$);Fd(Up);const kp=new Array(r$-t$+1);Fd(kp);const D8=new Array(N8);Fd(D8);const nv=new Array(pd);Fd(nv);function S_(r,e,t,n,i){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}let uI,cI,lI;function M_(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}const fI=r=>r<256?Up[r]:Up[256+(r>>>7)],qp=(r,e)=>{r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255},Li=(r,e,t)=>{r.bi_valid>A_-t?(r.bi_buf|=e<<r.bi_valid&65535,qp(r,r.bi_buf),r.bi_buf=e>>A_-r.bi_valid,r.bi_valid+=t-A_):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)},Ns=(r,e,t)=>{Li(r,t[e*2],t[e*2+1])},dI=(r,e)=>{let t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1},s$=r=>{r.bi_valid===16?(qp(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},o$=(r,e)=>{const t=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,s=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,d,h,y,m,b,v=0;for(y=0;y<=nl;y++)r.bl_count[y]=0;for(t[r.heap[r.heap_max]*2+1]=0,l=r.heap_max+1;l<nI;l++)d=r.heap[l],y=t[t[d*2+1]*2+1]+1,y>c&&(y=c,v++),t[d*2+1]=y,!(d>n)&&(r.bl_count[y]++,m=0,d>=s&&(m=o[d-s]),b=t[d*2],r.opt_len+=b*(y+m),a&&(r.static_len+=b*(i[d*2+1]+m)));if(v!==0){do{for(y=c-1;r.bl_count[y]===0;)y--;r.bl_count[y]--,r.bl_count[y+1]+=2,r.bl_count[c]--,v-=2}while(v>0);for(y=c;y!==0;y--)for(d=r.bl_count[y];d!==0;)h=r.heap[--l],!(h>n)&&(t[h*2+1]!==y&&(r.opt_len+=(y-t[h*2+1])*t[h*2],t[h*2+1]=y),d--)}},hI=(r,e,t)=>{const n=new Array(nl+1);let i=0,a,o;for(a=1;a<=nl;a++)i=i+t[a-1]<<1,n[a]=i;for(o=0;o<=e;o++){let s=r[o*2+1];s!==0&&(r[o*2]=dI(n[s]++,s))}},u$=()=>{let r,e,t,n,i;const a=new Array(nl+1);for(t=0,n=0;n<N8-1;n++)for(D8[n]=t,r=0;r<1<<ux[n];r++)kp[t++]=n;for(kp[t-1]=n,i=0,n=0;n<16;n++)for(nv[n]=i,r=0;r<1<<F1[n];r++)Up[i++]=n;for(i>>=7;n<pd;n++)for(nv[n]=i<<7,r=0;r<1<<F1[n]-7;r++)Up[256+i++]=n;for(e=0;e<=nl;e++)a[e]=0;for(r=0;r<=143;)Co[r*2+1]=8,r++,a[8]++;for(;r<=255;)Co[r*2+1]=9,r++,a[9]++;for(;r<=279;)Co[r*2+1]=7,r++,a[7]++;for(;r<=287;)Co[r*2+1]=8,r++,a[8]++;for(hI(Co,Pp+1,a),r=0;r<pd;r++)wp[r*2+1]=5,wp[r*2]=dI(r,5);uI=new S_(Co,ux,R0+1,Pp,nl),cI=new S_(wp,F1,0,pd,nl),lI=new S_(new Array(0),i$,0,B8,n$)},pI=r=>{let e;for(e=0;e<Pp;e++)r.dyn_ltree[e*2]=0;for(e=0;e<pd;e++)r.dyn_dtree[e*2]=0;for(e=0;e<B8;e++)r.bl_tree[e*2]=0;r.dyn_ltree[I8*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},yI=r=>{r.bi_valid>8?qp(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},FM=(r,e,t,n)=>{const i=e*2,a=t*2;return r[i]<r[a]||r[i]===r[a]&&n[e]<=n[t]},T_=(r,e,t)=>{const n=r.heap[t];let i=t<<1;for(;i<=r.heap_len&&(i<r.heap_len&&FM(e,r.heap[i+1],r.heap[i],r.depth)&&i++,!FM(e,n,r.heap[i],r.depth));)r.heap[t]=r.heap[i],t=i,i<<=1;r.heap[t]=n},zM=(r,e,t)=>{let n,i,a=0,o,s;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+a++]&255,n+=(r.pending_buf[r.sym_buf+a++]&255)<<8,i=r.pending_buf[r.sym_buf+a++],n===0?Ns(r,i,e):(o=kp[i],Ns(r,o+R0+1,e),s=ux[o],s!==0&&(i-=D8[o],Li(r,i,s)),n--,o=fI(n),Ns(r,o,t),s=F1[o],s!==0&&(n-=nv[o],Li(r,n,s)));while(a<r.sym_next);Ns(r,I8,e)},cx=(r,e)=>{const t=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems;let o,s,c=-1,l;for(r.heap_len=0,r.heap_max=nI,o=0;o<a;o++)t[o*2]!==0?(r.heap[++r.heap_len]=c=o,r.depth[o]=0):t[o*2+1]=0;for(;r.heap_len<2;)l=r.heap[++r.heap_len]=c<2?++c:0,t[l*2]=1,r.depth[l]=0,r.opt_len--,i&&(r.static_len-=n[l*2+1]);for(e.max_code=c,o=r.heap_len>>1;o>=1;o--)T_(r,t,o);l=a;do o=r.heap[1],r.heap[1]=r.heap[r.heap_len--],T_(r,t,1),s=r.heap[1],r.heap[--r.heap_max]=o,r.heap[--r.heap_max]=s,t[l*2]=t[o*2]+t[s*2],r.depth[l]=(r.depth[o]>=r.depth[s]?r.depth[o]:r.depth[s])+1,t[o*2+1]=t[s*2+1]=l,r.heap[1]=l++,T_(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],o$(r,e),hI(t,c,r.bl_count)},VM=(r,e,t)=>{let n,i=-1,a,o=e[1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)a=o,o=e[(n+1)*2+1],!(++s<c&&a===o)&&(s<l?r.bl_tree[a*2]+=s:a!==0?(a!==i&&r.bl_tree[a*2]++,r.bl_tree[iI*2]++):s<=10?r.bl_tree[aI*2]++:r.bl_tree[sI*2]++,s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4))},HM=(r,e,t)=>{let n,i=-1,a,o=e[1],s=0,c=7,l=4;for(o===0&&(c=138,l=3),n=0;n<=t;n++)if(a=o,o=e[(n+1)*2+1],!(++s<c&&a===o)){if(s<l)do Ns(r,a,r.bl_tree);while(--s!==0);else a!==0?(a!==i&&(Ns(r,a,r.bl_tree),s--),Ns(r,iI,r.bl_tree),Li(r,s-3,2)):s<=10?(Ns(r,aI,r.bl_tree),Li(r,s-3,3)):(Ns(r,sI,r.bl_tree),Li(r,s-11,7));s=0,i=a,o===0?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4)}},c$=r=>{let e;for(VM(r,r.dyn_ltree,r.l_desc.max_code),VM(r,r.dyn_dtree,r.d_desc.max_code),cx(r,r.bl_desc),e=B8-1;e>=3&&r.bl_tree[oI[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e},l$=(r,e,t,n)=>{let i;for(Li(r,e-257,5),Li(r,t-1,5),Li(r,n-4,4),i=0;i<n;i++)Li(r,r.bl_tree[oI[i]*2+1],3);HM(r,r.dyn_ltree,e-1),HM(r,r.dyn_dtree,t-1)},f$=r=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return jM;if(r.dyn_ltree[18]!==0||r.dyn_ltree[20]!==0||r.dyn_ltree[26]!==0)return $M;for(t=32;t<R0;t++)if(r.dyn_ltree[t*2]!==0)return $M;return jM};let KM=!1;const d$=r=>{KM||(u$(),KM=!0),r.l_desc=new M_(r.dyn_ltree,uI),r.d_desc=new M_(r.dyn_dtree,cI),r.bl_desc=new M_(r.bl_tree,lI),r.bi_buf=0,r.bi_valid=0,pI(r)},mI=(r,e,t,n)=>{Li(r,(Xj<<1)+(n?1:0),3),yI(r),qp(r,t),qp(r,~t),t&&r.pending_buf.set(r.window.subarray(e,e+t),r.pending),r.pending+=t},h$=r=>{Li(r,rI<<1,3),Ns(r,I8,Co),s$(r)},p$=(r,e,t,n)=>{let i,a,o=0;r.level>0?(r.strm.data_type===Jj&&(r.strm.data_type=f$(r)),cx(r,r.l_desc),cx(r,r.d_desc),o=c$(r),i=r.opt_len+3+7>>>3,a=r.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&e!==-1?mI(r,e,t,n):r.strategy===Qj||a===i?(Li(r,(rI<<1)+(n?1:0),3),zM(r,Co,wp)):(Li(r,(e$<<1)+(n?1:0),3),l$(r,r.l_desc.max_code+1,r.d_desc.max_code+1,o+1),zM(r,r.dyn_ltree,r.dyn_dtree)),pI(r),n&&yI(r)},y$=(r,e,t)=>(r.pending_buf[r.sym_buf+r.sym_next++]=e,r.pending_buf[r.sym_buf+r.sym_next++]=e>>8,r.pending_buf[r.sym_buf+r.sym_next++]=t,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(kp[t]+R0+1)*2]++,r.dyn_dtree[fI(e)*2]++),r.sym_next===r.sym_end);var m$=d$,g$=mI,v$=p$,b$=y$,w$=h$,_$={_tr_init:m$,_tr_stored_block:g$,_tr_flush_block:v$,_tr_tally:b$,_tr_align:w$};const E$=(r,e,t,n)=>{let i=r&65535|0,a=r>>>16&65535|0,o=0;for(;t!==0;){o=t>2e3?2e3:t,t-=o;do i=i+e[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var Lp=E$;const x$=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},A$=new Uint32Array(x$()),S$=(r,e,t,n)=>{const i=A$,a=n+t;r^=-1;for(let o=n;o<a;o++)r=r>>>8^i[(r^e[o])&255];return r^-1};var xn=S$,gl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},O0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:M$,_tr_stored_block:lx,_tr_flush_block:T$,_tr_tally:ic,_tr_align:R$}=_$,{Z_NO_FLUSH:ac,Z_PARTIAL_FLUSH:O$,Z_FULL_FLUSH:C$,Z_FINISH:Oa,Z_BLOCK:GM,Z_OK:jn,Z_STREAM_END:WM,Z_STREAM_ERROR:Ls,Z_DATA_ERROR:N$,Z_BUF_ERROR:R_,Z_DEFAULT_COMPRESSION:B$,Z_FILTERED:I$,Z_HUFFMAN_ONLY:hm,Z_RLE:D$,Z_FIXED:P$,Z_DEFAULT_STRATEGY:U$,Z_UNKNOWN:k$,Z_DEFLATED:tb}=O0,q$=9,L$=15,j$=8,$$=29,F$=256,fx=F$+1+$$,z$=30,V$=19,H$=2*fx+1,K$=15,Pt=3,Zu=258,js=Zu+Pt+1,G$=32,Ed=42,P8=57,dx=69,hx=73,px=91,yx=103,il=113,dp=666,_i=1,zd=2,vl=3,Vd=4,W$=3,al=(r,e)=>(r.msg=gl[e],e),ZM=r=>r*2-(r>4?9:0),Ku=r=>{let e=r.length;for(;--e>=0;)r[e]=0},Z$=r=>{let e,t,n,i=r.w_size;e=r.hash_size,n=e;do t=r.head[--n],r.head[n]=t>=i?t-i:0;while(--e);e=i,n=e;do t=r.prev[--n],r.prev[n]=t>=i?t-i:0;while(--e)};let Y$=(r,e,t)=>(e<<r.hash_shift^t)&r.hash_mask,sc=Y$;const aa=r=>{const e=r.state;let t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(r.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},ua=(r,e)=>{T$(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,aa(r.strm)},Wt=(r,e)=>{r.pending_buf[r.pending++]=e},Zh=(r,e)=>{r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255},mx=(r,e,t,n)=>{let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,e.set(r.input.subarray(r.next_in,r.next_in+i),t),r.state.wrap===1?r.adler=Lp(r.adler,e,i,t):r.state.wrap===2&&(r.adler=xn(r.adler,e,i,t)),r.next_in+=i,r.total_in+=i,i)},gI=(r,e)=>{let t=r.max_chain_length,n=r.strstart,i,a,o=r.prev_length,s=r.nice_match;const c=r.strstart>r.w_size-js?r.strstart-(r.w_size-js):0,l=r.window,d=r.w_mask,h=r.prev,y=r.strstart+Zu;let m=l[n+o-1],b=l[n+o];r.prev_length>=r.good_match&&(t>>=2),s>r.lookahead&&(s=r.lookahead);do if(i=e,!(l[i+o]!==b||l[i+o-1]!==m||l[i]!==l[n]||l[++i]!==l[n+1])){n+=2,i++;do;while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<y);if(a=Zu-(y-n),n=y-Zu,a>o){if(r.match_start=e,o=a,a>=s)break;m=l[n+o-1],b=l[n+o]}}while((e=h[e&d])>c&&--t!==0);return o<=r.lookahead?o:r.lookahead},xd=r=>{const e=r.w_size;let t,n,i;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-js)&&(r.window.set(r.window.subarray(e,e+e-n),0),r.match_start-=e,r.strstart-=e,r.block_start-=e,r.insert>r.strstart&&(r.insert=r.strstart),Z$(r),n+=e),r.strm.avail_in===0)break;if(t=mx(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=t,r.lookahead+r.insert>=Pt)for(i=r.strstart-r.insert,r.ins_h=r.window[i],r.ins_h=sc(r,r.ins_h,r.window[i+1]);r.insert&&(r.ins_h=sc(r,r.ins_h,r.window[i+Pt-1]),r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,r.insert--,!(r.lookahead+r.insert<Pt)););}while(r.lookahead<js&&r.strm.avail_in!==0)},vI=(r,e)=>{let t=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,i,a,o=0,s=r.strm.avail_in;do{if(n=65535,a=r.bi_valid+42>>3,r.strm.avail_out<a||(a=r.strm.avail_out-a,i=r.strstart-r.block_start,n>i+r.strm.avail_in&&(n=i+r.strm.avail_in),n>a&&(n=a),n<t&&(n===0&&e!==Oa||e===ac||n!==i+r.strm.avail_in)))break;o=e===Oa&&n===i+r.strm.avail_in?1:0,lx(r,0,0,o),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,aa(r.strm),i&&(i>n&&(i=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+i),r.strm.next_out),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i,r.block_start+=i,n-=i),n&&(mx(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(o===0);return s-=r.strm.avail_in,s&&(s>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=s&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-s,r.strm.next_in),r.strstart),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),o?Vd:e!==ac&&e!==Oa&&r.strm.avail_in===0&&r.strstart===r.block_start?zd:(a=r.window_size-r.strstart,r.strm.avail_in>a&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,a+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),a>r.strm.avail_in&&(a=r.strm.avail_in),a&&(mx(r.strm,r.window,r.strstart,a),r.strstart+=a,r.insert+=a>r.w_size-r.insert?r.w_size-r.insert:a),r.high_water<r.strstart&&(r.high_water=r.strstart),a=r.bi_valid+42>>3,a=r.pending_buf_size-a>65535?65535:r.pending_buf_size-a,t=a>r.w_size?r.w_size:a,i=r.strstart-r.block_start,(i>=t||(i||e===Oa)&&e!==ac&&r.strm.avail_in===0&&i<=a)&&(n=i>a?a:i,o=e===Oa&&r.strm.avail_in===0&&n===i?1:0,lx(r,r.block_start,n,o),r.block_start+=n,aa(r.strm)),o?vl:_i)},O_=(r,e)=>{let t,n;for(;;){if(r.lookahead<js){if(xd(r),r.lookahead<js&&e===ac)return _i;if(r.lookahead===0)break}if(t=0,r.lookahead>=Pt&&(r.ins_h=sc(r,r.ins_h,r.window[r.strstart+Pt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-js&&(r.match_length=gI(r,t)),r.match_length>=Pt)if(n=ic(r,r.strstart-r.match_start,r.match_length-Pt),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=Pt){r.match_length--;do r.strstart++,r.ins_h=sc(r,r.ins_h,r.window[r.strstart+Pt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=sc(r,r.ins_h,r.window[r.strstart+1]);else n=ic(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(ua(r,!1),r.strm.avail_out===0))return _i}return r.insert=r.strstart<Pt-1?r.strstart:Pt-1,e===Oa?(ua(r,!0),r.strm.avail_out===0?vl:Vd):r.sym_next&&(ua(r,!1),r.strm.avail_out===0)?_i:zd},Mf=(r,e)=>{let t,n,i;for(;;){if(r.lookahead<js){if(xd(r),r.lookahead<js&&e===ac)return _i;if(r.lookahead===0)break}if(t=0,r.lookahead>=Pt&&(r.ins_h=sc(r,r.ins_h,r.window[r.strstart+Pt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=Pt-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-js&&(r.match_length=gI(r,t),r.match_length<=5&&(r.strategy===I$||r.match_length===Pt&&r.strstart-r.match_start>4096)&&(r.match_length=Pt-1)),r.prev_length>=Pt&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-Pt,n=ic(r,r.strstart-1-r.prev_match,r.prev_length-Pt),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=sc(r,r.ins_h,r.window[r.strstart+Pt-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=Pt-1,r.strstart++,n&&(ua(r,!1),r.strm.avail_out===0))return _i}else if(r.match_available){if(n=ic(r,0,r.window[r.strstart-1]),n&&ua(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return _i}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=ic(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<Pt-1?r.strstart:Pt-1,e===Oa?(ua(r,!0),r.strm.avail_out===0?vl:Vd):r.sym_next&&(ua(r,!1),r.strm.avail_out===0)?_i:zd},Q$=(r,e)=>{let t,n,i,a;const o=r.window;for(;;){if(r.lookahead<=Zu){if(xd(r),r.lookahead<=Zu&&e===ac)return _i;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=Pt&&r.strstart>0&&(i=r.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){a=r.strstart+Zu;do;while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);r.match_length=Zu-(a-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=Pt?(t=ic(r,1,r.match_length-Pt),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=ic(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(ua(r,!1),r.strm.avail_out===0))return _i}return r.insert=0,e===Oa?(ua(r,!0),r.strm.avail_out===0?vl:Vd):r.sym_next&&(ua(r,!1),r.strm.avail_out===0)?_i:zd},J$=(r,e)=>{let t;for(;;){if(r.lookahead===0&&(xd(r),r.lookahead===0)){if(e===ac)return _i;break}if(r.match_length=0,t=ic(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(ua(r,!1),r.strm.avail_out===0))return _i}return r.insert=0,e===Oa?(ua(r,!0),r.strm.avail_out===0?vl:Vd):r.sym_next&&(ua(r,!1),r.strm.avail_out===0)?_i:zd};function _s(r,e,t,n,i){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=i}const hp=[new _s(0,0,0,0,vI),new _s(4,4,8,4,O_),new _s(4,5,16,8,O_),new _s(4,6,32,32,O_),new _s(4,4,16,16,Mf),new _s(8,16,32,32,Mf),new _s(8,16,128,128,Mf),new _s(8,32,128,256,Mf),new _s(32,128,258,1024,Mf),new _s(32,258,258,4096,Mf)],X$=r=>{r.window_size=2*r.w_size,Ku(r.head),r.max_lazy_match=hp[r.level].max_lazy,r.good_match=hp[r.level].good_length,r.nice_match=hp[r.level].nice_length,r.max_chain_length=hp[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=Pt-1,r.match_available=0,r.ins_h=0};function eF(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=tb,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(H$*2),this.dyn_dtree=new Uint16Array((2*z$+1)*2),this.bl_tree=new Uint16Array((2*V$+1)*2),Ku(this.dyn_ltree),Ku(this.dyn_dtree),Ku(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(K$+1),this.heap=new Uint16Array(2*fx+1),Ku(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*fx+1),Ku(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const C0=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.status!==Ed&&e.status!==P8&&e.status!==dx&&e.status!==hx&&e.status!==px&&e.status!==yx&&e.status!==il&&e.status!==dp?1:0},bI=r=>{if(C0(r))return al(r,Ls);r.total_in=r.total_out=0,r.data_type=k$;const e=r.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?P8:e.wrap?Ed:il,r.adler=e.wrap===2?0:1,e.last_flush=-2,M$(e),jn},wI=r=>{const e=bI(r);return e===jn&&X$(r.state),e},tF=(r,e)=>C0(r)||r.state.wrap!==2?Ls:(r.state.gzhead=e,jn),_I=(r,e,t,n,i,a)=>{if(!r)return Ls;let o=1;if(e===B$&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>q$||t!==tb||n<8||n>15||e<0||e>9||a<0||a>P$||n===8&&o!==1)return al(r,Ls);n===8&&(n=9);const s=new eF;return r.state=s,s.strm=r,s.status=Ed,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+Pt-1)/Pt),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=e,s.strategy=a,s.method=t,wI(r)},rF=(r,e)=>_I(r,e,tb,L$,j$,U$),nF=(r,e)=>{if(C0(r)||e>GM||e<0)return r?al(r,Ls):Ls;const t=r.state;if(!r.output||r.avail_in!==0&&!r.input||t.status===dp&&e!==Oa)return al(r,r.avail_out===0?R_:Ls);const n=t.last_flush;if(t.last_flush=e,t.pending!==0){if(aa(r),r.avail_out===0)return t.last_flush=-1,jn}else if(r.avail_in===0&&ZM(e)<=ZM(n)&&e!==Oa)return al(r,R_);if(t.status===dp&&r.avail_in!==0)return al(r,R_);if(t.status===Ed&&t.wrap===0&&(t.status=il),t.status===Ed){let i=tb+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=hm||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,i|=a<<6,t.strstart!==0&&(i|=G$),i+=31-i%31,Zh(t,i),t.strstart!==0&&(Zh(t,r.adler>>>16),Zh(t,r.adler&65535)),r.adler=1,t.status=il,aa(r),t.pending!==0)return t.last_flush=-1,jn}if(t.status===P8){if(r.adler=0,Wt(t,31),Wt(t,139),Wt(t,8),t.gzhead)Wt(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Wt(t,t.gzhead.time&255),Wt(t,t.gzhead.time>>8&255),Wt(t,t.gzhead.time>>16&255),Wt(t,t.gzhead.time>>24&255),Wt(t,t.level===9?2:t.strategy>=hm||t.level<2?4:0),Wt(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Wt(t,t.gzhead.extra.length&255),Wt(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(r.adler=xn(r.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=dx;else if(Wt(t,0),Wt(t,0),Wt(t,0),Wt(t,0),Wt(t,0),Wt(t,t.level===9?2:t.strategy>=hm||t.level<2?4:0),Wt(t,W$),t.status=il,aa(r),t.pending!==0)return t.last_flush=-1,jn}if(t.status===dx){if(t.gzhead.extra){let i=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let s=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(r.adler=xn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=s,aa(r),t.pending!==0)return t.last_flush=-1,jn;i=0,a-=s}let o=new Uint8Array(t.gzhead.extra);t.pending_buf.set(o.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>i&&(r.adler=xn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=hx}if(t.status===hx){if(t.gzhead.name){let i=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(r.adler=xn(r.adler,t.pending_buf,t.pending-i,i)),aa(r),t.pending!==0)return t.last_flush=-1,jn;i=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,Wt(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>i&&(r.adler=xn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=px}if(t.status===px){if(t.gzhead.comment){let i=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(r.adler=xn(r.adler,t.pending_buf,t.pending-i,i)),aa(r),t.pending!==0)return t.last_flush=-1,jn;i=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,Wt(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>i&&(r.adler=xn(r.adler,t.pending_buf,t.pending-i,i))}t.status=yx}if(t.status===yx){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(aa(r),t.pending!==0))return t.last_flush=-1,jn;Wt(t,r.adler&255),Wt(t,r.adler>>8&255),r.adler=0}if(t.status=il,aa(r),t.pending!==0)return t.last_flush=-1,jn}if(r.avail_in!==0||t.lookahead!==0||e!==ac&&t.status!==dp){let i=t.level===0?vI(t,e):t.strategy===hm?J$(t,e):t.strategy===D$?Q$(t,e):hp[t.level].func(t,e);if((i===vl||i===Vd)&&(t.status=dp),i===_i||i===vl)return r.avail_out===0&&(t.last_flush=-1),jn;if(i===zd&&(e===O$?R$(t):e!==GM&&(lx(t,0,0,!1),e===C$&&(Ku(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),aa(r),r.avail_out===0))return t.last_flush=-1,jn}return e!==Oa?jn:t.wrap<=0?WM:(t.wrap===2?(Wt(t,r.adler&255),Wt(t,r.adler>>8&255),Wt(t,r.adler>>16&255),Wt(t,r.adler>>24&255),Wt(t,r.total_in&255),Wt(t,r.total_in>>8&255),Wt(t,r.total_in>>16&255),Wt(t,r.total_in>>24&255)):(Zh(t,r.adler>>>16),Zh(t,r.adler&65535)),aa(r),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?jn:WM)},iF=r=>{if(C0(r))return Ls;const e=r.state.status;return r.state=null,e===il?al(r,N$):jn},aF=(r,e)=>{let t=e.length;if(C0(r))return Ls;const n=r.state,i=n.wrap;if(i===2||i===1&&n.status!==Ed||n.lookahead)return Ls;if(i===1&&(r.adler=Lp(r.adler,e,t,0)),n.wrap=0,t>=n.w_size){i===0&&(Ku(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(t-n.w_size,t),0),e=c,t=n.w_size}const a=r.avail_in,o=r.next_in,s=r.input;for(r.avail_in=t,r.next_in=0,r.input=e,xd(n);n.lookahead>=Pt;){let c=n.strstart,l=n.lookahead-(Pt-1);do n.ins_h=sc(n,n.ins_h,n.window[c+Pt-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--l);n.strstart=c,n.lookahead=Pt-1,xd(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Pt-1,n.match_available=0,r.next_in=o,r.input=s,r.avail_in=a,n.wrap=i,jn};var sF=rF,oF=_I,uF=wI,cF=bI,lF=tF,fF=nF,dF=iF,hF=aF,pF="pako deflate (from Nodeca project)",_p={deflateInit:sF,deflateInit2:oF,deflateReset:uF,deflateResetKeep:cF,deflateSetHeader:lF,deflate:fF,deflateEnd:dF,deflateSetDictionary:hF,deflateInfo:pF};const yF=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var mF=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)yF(t,n)&&(r[n]=t[n])}}return r},gF=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,a=r.length;n<a;n++){let o=r[n];t.set(o,i),i+=o.length}return t},rb={assign:mF,flattenChunks:gF};let EI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{EI=!1}const jp=new Uint8Array(256);for(let r=0;r<256;r++)jp[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;jp[254]=jp[254]=1;var vF=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,a,o=r.length,s=0;for(i=0;i<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(s),a=0,i=0;a<s;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<o&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[a++]=t:t<2048?(e[a++]=192|t>>>6,e[a++]=128|t&63):t<65536?(e[a++]=224|t>>>12,e[a++]=128|t>>>6&63,e[a++]=128|t&63):(e[a++]=240|t>>>18,e[a++]=128|t>>>12&63,e[a++]=128|t>>>6&63,e[a++]=128|t&63);return e};const bF=(r,e)=>{if(e<65534&&r.subarray&&EI)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var wF=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const a=new Array(t*2);for(i=0,n=0;n<t;){let o=r[n++];if(o<128){a[i++]=o;continue}let s=jp[o];if(s>4){a[i++]=65533,n+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&n<t;)o=o<<6|r[n++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return bF(a,i)},_F=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+jp[r[t]]>e?t:e},$p={string2buf:vF,buf2string:wF,utf8border:_F};function EF(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var xI=EF;const AI=Object.prototype.toString,{Z_NO_FLUSH:xF,Z_SYNC_FLUSH:AF,Z_FULL_FLUSH:SF,Z_FINISH:MF,Z_OK:iv,Z_STREAM_END:TF,Z_DEFAULT_COMPRESSION:RF,Z_DEFAULT_STRATEGY:OF,Z_DEFLATED:CF}=O0;function N0(r){this.options=rb.assign({level:RF,method:CF,chunkSize:16384,windowBits:15,memLevel:8,strategy:OF},r||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xI,this.strm.avail_out=0;let t=_p.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==iv)throw new Error(gl[t]);if(e.header&&_p.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=$p.string2buf(e.dictionary):AI.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=_p.deflateSetDictionary(this.strm,n),t!==iv)throw new Error(gl[t]);this._dict_set=!0}}N0.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize;let i,a;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?MF:xF,typeof r=="string"?t.input=$p.string2buf(r):AI.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===AF||a===SF)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=_p.deflate(t,a),i===TF)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=_p.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===iv;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};N0.prototype.onData=function(r){this.chunks.push(r)};N0.prototype.onEnd=function(r){r===iv&&(this.result=rb.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function U8(r,e){const t=new N0(e);if(t.push(r,!0),t.err)throw t.msg||gl[t.err];return t.result}function NF(r,e){return e=e||{},e.raw=!0,U8(r,e)}function BF(r,e){return e=e||{},e.gzip=!0,U8(r,e)}var IF=N0,DF=U8,PF=NF,UF=BF,kF={Deflate:IF,deflate:DF,deflateRaw:PF,gzip:UF};const pm=16209,qF=16191;var LF=function(e,t){let n,i,a,o,s,c,l,d,h,y,m,b,v,E,x,D,N,B,k,F,T,z,Z,Y;const W=e.state;n=e.next_in,Z=e.input,i=n+(e.avail_in-5),a=e.next_out,Y=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=W.dmax,l=W.wsize,d=W.whave,h=W.wnext,y=W.window,m=W.hold,b=W.bits,v=W.lencode,E=W.distcode,x=(1<<W.lenbits)-1,D=(1<<W.distbits)-1;e:do{b<15&&(m+=Z[n++]<<b,b+=8,m+=Z[n++]<<b,b+=8),N=v[m&x];t:for(;;){if(B=N>>>24,m>>>=B,b-=B,B=N>>>16&255,B===0)Y[a++]=N&65535;else if(B&16){k=N&65535,B&=15,B&&(b<B&&(m+=Z[n++]<<b,b+=8),k+=m&(1<<B)-1,m>>>=B,b-=B),b<15&&(m+=Z[n++]<<b,b+=8,m+=Z[n++]<<b,b+=8),N=E[m&D];r:for(;;){if(B=N>>>24,m>>>=B,b-=B,B=N>>>16&255,B&16){if(F=N&65535,B&=15,b<B&&(m+=Z[n++]<<b,b+=8,b<B&&(m+=Z[n++]<<b,b+=8)),F+=m&(1<<B)-1,F>c){e.msg="invalid distance too far back",W.mode=pm;break e}if(m>>>=B,b-=B,B=a-o,F>B){if(B=F-B,B>d&&W.sane){e.msg="invalid distance too far back",W.mode=pm;break e}if(T=0,z=y,h===0){if(T+=l-B,B<k){k-=B;do Y[a++]=y[T++];while(--B);T=a-F,z=Y}}else if(h<B){if(T+=l+h-B,B-=h,B<k){k-=B;do Y[a++]=y[T++];while(--B);if(T=0,h<k){B=h,k-=B;do Y[a++]=y[T++];while(--B);T=a-F,z=Y}}}else if(T+=h-B,B<k){k-=B;do Y[a++]=y[T++];while(--B);T=a-F,z=Y}for(;k>2;)Y[a++]=z[T++],Y[a++]=z[T++],Y[a++]=z[T++],k-=3;k&&(Y[a++]=z[T++],k>1&&(Y[a++]=z[T++]))}else{T=a-F;do Y[a++]=Y[T++],Y[a++]=Y[T++],Y[a++]=Y[T++],k-=3;while(k>2);k&&(Y[a++]=Y[T++],k>1&&(Y[a++]=Y[T++]))}}else if((B&64)===0){N=E[(N&65535)+(m&(1<<B)-1)];continue r}else{e.msg="invalid distance code",W.mode=pm;break e}break}}else if((B&64)===0){N=v[(N&65535)+(m&(1<<B)-1)];continue t}else if(B&32){W.mode=qF;break e}else{e.msg="invalid literal/length code",W.mode=pm;break e}break}}while(n<i&&a<s);k=b>>3,n-=k,b-=k<<3,m&=(1<<b)-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=a<s?257+(s-a):257-(a-s),W.hold=m,W.bits=b};const Tf=15,YM=852,QM=592,JM=0,C_=1,XM=2,jF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$F=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),FF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),zF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),VF=(r,e,t,n,i,a,o,s)=>{const c=s.bits;let l=0,d=0,h=0,y=0,m=0,b=0,v=0,E=0,x=0,D=0,N,B,k,F,T,z=null,Z;const Y=new Uint16Array(Tf+1),W=new Uint16Array(Tf+1);let M=null,C,R,S;for(l=0;l<=Tf;l++)Y[l]=0;for(d=0;d<n;d++)Y[e[t+d]]++;for(m=c,y=Tf;y>=1&&Y[y]===0;y--);if(m>y&&(m=y),y===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<y&&Y[h]===0;h++);for(m<h&&(m=h),E=1,l=1;l<=Tf;l++)if(E<<=1,E-=Y[l],E<0)return-1;if(E>0&&(r===JM||y!==1))return-1;for(W[1]=0,l=1;l<Tf;l++)W[l+1]=W[l]+Y[l];for(d=0;d<n;d++)e[t+d]!==0&&(o[W[e[t+d]]++]=d);if(r===JM?(z=M=o,Z=20):r===C_?(z=jF,M=$F,Z=257):(z=FF,M=zF,Z=0),D=0,d=0,l=h,T=a,b=m,v=0,k=-1,x=1<<m,F=x-1,r===C_&&x>YM||r===XM&&x>QM)return 1;for(;;){C=l-v,o[d]+1<Z?(R=0,S=o[d]):o[d]>=Z?(R=M[o[d]-Z],S=z[o[d]-Z]):(R=96,S=0),N=1<<l-v,B=1<<b,h=B;do B-=N,i[T+(D>>v)+B]=C<<24|R<<16|S|0;while(B!==0);for(N=1<<l-1;D&N;)N>>=1;if(N!==0?(D&=N-1,D+=N):D=0,d++,--Y[l]===0){if(l===y)break;l=e[t+o[d]]}if(l>m&&(D&F)!==k){for(v===0&&(v=m),T+=h,b=l-v,E=1<<b;b+v<y&&(E-=Y[b+v],!(E<=0));)b++,E<<=1;if(x+=1<<b,r===C_&&x>YM||r===XM&&x>QM)return 1;k=D&F,i[k]=m<<24|b<<16|T-a|0}}return D!==0&&(i[T+D]=l-v<<24|64<<16|0),s.bits=m,0};var Ep=VF;const HF=0,SI=1,MI=2,{Z_FINISH:e9,Z_BLOCK:KF,Z_TREES:ym,Z_OK:bl,Z_STREAM_END:GF,Z_NEED_DICT:WF,Z_STREAM_ERROR:Na,Z_DATA_ERROR:TI,Z_MEM_ERROR:RI,Z_BUF_ERROR:ZF,Z_DEFLATED:t9}=O0,nb=16180,r9=16181,n9=16182,i9=16183,a9=16184,s9=16185,o9=16186,u9=16187,c9=16188,l9=16189,av=16190,wo=16191,N_=16192,f9=16193,B_=16194,d9=16195,h9=16196,p9=16197,y9=16198,mm=16199,gm=16200,m9=16201,g9=16202,v9=16203,b9=16204,w9=16205,I_=16206,_9=16207,E9=16208,Tr=16209,OI=16210,CI=16211,YF=852,QF=592,JF=15,XF=JF,x9=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function ez(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ql=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<nb||e.mode>CI?1:0},NI=r=>{if(ql(r))return Na;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=nb,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(YF),e.distcode=e.distdyn=new Int32Array(QF),e.sane=1,e.back=-1,bl},BI=r=>{if(ql(r))return Na;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,NI(r)},II=(r,e)=>{let t;if(ql(r))return Na;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Na:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,BI(r))},DI=(r,e)=>{if(!r)return Na;const t=new ez;r.state=t,t.strm=r,t.window=null,t.mode=nb;const n=II(r,e);return n!==bl&&(r.state=null),n},tz=r=>DI(r,XF);let A9=!0,D_,P_;const rz=r=>{if(A9){D_=new Int32Array(512),P_=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Ep(SI,r.lens,0,288,D_,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Ep(MI,r.lens,0,32,P_,0,r.work,{bits:5}),A9=!1}r.lencode=D_,r.lenbits=9,r.distcode=P_,r.distbits=5},PI=(r,e,t,n)=>{let i;const a=r.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(e.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(e.subarray(t-n,t-n+i),a.wnext),n-=i,n?(a.window.set(e.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},nz=(r,e)=>{let t,n,i,a,o,s,c,l,d,h,y,m,b,v,E=0,x,D,N,B,k,F,T,z;const Z=new Uint8Array(4);let Y,W;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ql(r)||!r.output||!r.input&&r.avail_in!==0)return Na;t=r.state,t.mode===wo&&(t.mode=N_),o=r.next_out,i=r.output,c=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,l=t.hold,d=t.bits,h=s,y=c,z=bl;e:for(;;)switch(t.mode){case nb:if(t.wrap===0){t.mode=N_;break}for(;d<16;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,Z[0]=l&255,Z[1]=l>>>8&255,t.check=xn(t.check,Z,2,0),l=0,d=0,t.mode=r9;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){r.msg="incorrect header check",t.mode=Tr;break}if((l&15)!==t9){r.msg="unknown compression method",t.mode=Tr;break}if(l>>>=4,d-=4,T=(l&15)+8,t.wbits===0&&(t.wbits=T),T>15||T>t.wbits){r.msg="invalid window size",t.mode=Tr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=l&512?l9:wo,l=0,d=0;break;case r9:for(;d<16;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(t.flags=l,(t.flags&255)!==t9){r.msg="unknown compression method",t.mode=Tr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Tr;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(Z[0]=l&255,Z[1]=l>>>8&255,t.check=xn(t.check,Z,2,0)),l=0,d=0,t.mode=n9;case n9:for(;d<32;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(Z[0]=l&255,Z[1]=l>>>8&255,Z[2]=l>>>16&255,Z[3]=l>>>24&255,t.check=xn(t.check,Z,4,0)),l=0,d=0,t.mode=i9;case i9:for(;d<16;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(Z[0]=l&255,Z[1]=l>>>8&255,t.check=xn(t.check,Z,2,0)),l=0,d=0,t.mode=a9;case a9:if(t.flags&1024){for(;d<16;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(Z[0]=l&255,Z[1]=l>>>8&255,t.check=xn(t.check,Z,2,0)),l=0,d=0}else t.head&&(t.head.extra=null);t.mode=s9;case s9:if(t.flags&1024&&(m=t.length,m>s&&(m=s),m&&(t.head&&(T=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+m),T)),t.flags&512&&t.wrap&4&&(t.check=xn(t.check,n,m,a)),s-=m,a+=m,t.length-=m),t.length))break e;t.length=0,t.mode=o9;case o9:if(t.flags&2048){if(s===0)break e;m=0;do T=n[a+m++],t.head&&T&&t.length<65536&&(t.head.name+=String.fromCharCode(T));while(T&&m<s);if(t.flags&512&&t.wrap&4&&(t.check=xn(t.check,n,m,a)),s-=m,a+=m,T)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=u9;case u9:if(t.flags&4096){if(s===0)break e;m=0;do T=n[a+m++],t.head&&T&&t.length<65536&&(t.head.comment+=String.fromCharCode(T));while(T&&m<s);if(t.flags&512&&t.wrap&4&&(t.check=xn(t.check,n,m,a)),s-=m,a+=m,T)break e}else t.head&&(t.head.comment=null);t.mode=c9;case c9:if(t.flags&512){for(;d<16;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(t.wrap&4&&l!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Tr;break}l=0,d=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=wo;break;case l9:for(;d<32;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}r.adler=t.check=x9(l),l=0,d=0,t.mode=av;case av:if(t.havedict===0)return r.next_out=o,r.avail_out=c,r.next_in=a,r.avail_in=s,t.hold=l,t.bits=d,WF;r.adler=t.check=1,t.mode=wo;case wo:if(e===KF||e===ym)break e;case N_:if(t.last){l>>>=d&7,d-=d&7,t.mode=I_;break}for(;d<3;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}switch(t.last=l&1,l>>>=1,d-=1,l&3){case 0:t.mode=f9;break;case 1:if(rz(t),t.mode=mm,e===ym){l>>>=2,d-=2;break e}break;case 2:t.mode=h9;break;case 3:r.msg="invalid block type",t.mode=Tr}l>>>=2,d-=2;break;case f9:for(l>>>=d&7,d-=d&7;d<32;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if((l&65535)!==(l>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Tr;break}if(t.length=l&65535,l=0,d=0,t.mode=B_,e===ym)break e;case B_:t.mode=d9;case d9:if(m=t.length,m){if(m>s&&(m=s),m>c&&(m=c),m===0)break e;i.set(n.subarray(a,a+m),o),s-=m,a+=m,c-=m,o+=m,t.length-=m;break}t.mode=wo;break;case h9:for(;d<14;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(t.nlen=(l&31)+257,l>>>=5,d-=5,t.ndist=(l&31)+1,l>>>=5,d-=5,t.ncode=(l&15)+4,l>>>=4,d-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Tr;break}t.have=0,t.mode=p9;case p9:for(;t.have<t.ncode;){for(;d<3;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}t.lens[M[t.have++]]=l&7,l>>>=3,d-=3}for(;t.have<19;)t.lens[M[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,Y={bits:t.lenbits},z=Ep(HF,t.lens,0,19,t.lencode,0,t.work,Y),t.lenbits=Y.bits,z){r.msg="invalid code lengths set",t.mode=Tr;break}t.have=0,t.mode=y9;case y9:for(;t.have<t.nlen+t.ndist;){for(;E=t.lencode[l&(1<<t.lenbits)-1],x=E>>>24,D=E>>>16&255,N=E&65535,!(x<=d);){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(N<16)l>>>=x,d-=x,t.lens[t.have++]=N;else{if(N===16){for(W=x+2;d<W;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(l>>>=x,d-=x,t.have===0){r.msg="invalid bit length repeat",t.mode=Tr;break}T=t.lens[t.have-1],m=3+(l&3),l>>>=2,d-=2}else if(N===17){for(W=x+3;d<W;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}l>>>=x,d-=x,T=0,m=3+(l&7),l>>>=3,d-=3}else{for(W=x+7;d<W;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}l>>>=x,d-=x,T=0,m=11+(l&127),l>>>=7,d-=7}if(t.have+m>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Tr;break}for(;m--;)t.lens[t.have++]=T}}if(t.mode===Tr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Tr;break}if(t.lenbits=9,Y={bits:t.lenbits},z=Ep(SI,t.lens,0,t.nlen,t.lencode,0,t.work,Y),t.lenbits=Y.bits,z){r.msg="invalid literal/lengths set",t.mode=Tr;break}if(t.distbits=6,t.distcode=t.distdyn,Y={bits:t.distbits},z=Ep(MI,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,Y),t.distbits=Y.bits,z){r.msg="invalid distances set",t.mode=Tr;break}if(t.mode=mm,e===ym)break e;case mm:t.mode=gm;case gm:if(s>=6&&c>=258){r.next_out=o,r.avail_out=c,r.next_in=a,r.avail_in=s,t.hold=l,t.bits=d,LF(r,y),o=r.next_out,i=r.output,c=r.avail_out,a=r.next_in,n=r.input,s=r.avail_in,l=t.hold,d=t.bits,t.mode===wo&&(t.back=-1);break}for(t.back=0;E=t.lencode[l&(1<<t.lenbits)-1],x=E>>>24,D=E>>>16&255,N=E&65535,!(x<=d);){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(D&&(D&240)===0){for(B=x,k=D,F=N;E=t.lencode[F+((l&(1<<B+k)-1)>>B)],x=E>>>24,D=E>>>16&255,N=E&65535,!(B+x<=d);){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}l>>>=B,d-=B,t.back+=B}if(l>>>=x,d-=x,t.back+=x,t.length=N,D===0){t.mode=w9;break}if(D&32){t.back=-1,t.mode=wo;break}if(D&64){r.msg="invalid literal/length code",t.mode=Tr;break}t.extra=D&15,t.mode=m9;case m9:if(t.extra){for(W=t.extra;d<W;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=g9;case g9:for(;E=t.distcode[l&(1<<t.distbits)-1],x=E>>>24,D=E>>>16&255,N=E&65535,!(x<=d);){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if((D&240)===0){for(B=x,k=D,F=N;E=t.distcode[F+((l&(1<<B+k)-1)>>B)],x=E>>>24,D=E>>>16&255,N=E&65535,!(B+x<=d);){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}l>>>=B,d-=B,t.back+=B}if(l>>>=x,d-=x,t.back+=x,D&64){r.msg="invalid distance code",t.mode=Tr;break}t.offset=N,t.extra=D&15,t.mode=v9;case v9:if(t.extra){for(W=t.extra;d<W;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,d-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Tr;break}t.mode=b9;case b9:if(c===0)break e;if(m=y-c,t.offset>m){if(m=t.offset-m,m>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Tr;break}m>t.wnext?(m-=t.wnext,b=t.wsize-m):b=t.wnext-m,m>t.length&&(m=t.length),v=t.window}else v=i,b=o-t.offset,m=t.length;m>c&&(m=c),c-=m,t.length-=m;do i[o++]=v[b++];while(--m);t.length===0&&(t.mode=gm);break;case w9:if(c===0)break e;i[o++]=t.length,c--,t.mode=gm;break;case I_:if(t.wrap){for(;d<32;){if(s===0)break e;s--,l|=n[a++]<<d,d+=8}if(y-=c,r.total_out+=y,t.total+=y,t.wrap&4&&y&&(r.adler=t.check=t.flags?xn(t.check,i,y,o-y):Lp(t.check,i,y,o-y)),y=c,t.wrap&4&&(t.flags?l:x9(l))!==t.check){r.msg="incorrect data check",t.mode=Tr;break}l=0,d=0}t.mode=_9;case _9:if(t.wrap&&t.flags){for(;d<32;){if(s===0)break e;s--,l+=n[a++]<<d,d+=8}if(t.wrap&4&&l!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Tr;break}l=0,d=0}t.mode=E9;case E9:z=GF;break e;case Tr:z=TI;break e;case OI:return RI;case CI:default:return Na}return r.next_out=o,r.avail_out=c,r.next_in=a,r.avail_in=s,t.hold=l,t.bits=d,(t.wsize||y!==r.avail_out&&t.mode<Tr&&(t.mode<I_||e!==e9))&&PI(r,r.output,r.next_out,y-r.avail_out),h-=r.avail_in,y-=r.avail_out,r.total_in+=h,r.total_out+=y,t.total+=y,t.wrap&4&&y&&(r.adler=t.check=t.flags?xn(t.check,i,y,r.next_out-y):Lp(t.check,i,y,r.next_out-y)),r.data_type=t.bits+(t.last?64:0)+(t.mode===wo?128:0)+(t.mode===mm||t.mode===B_?256:0),(h===0&&y===0||e===e9)&&z===bl&&(z=ZF),z},iz=r=>{if(ql(r))return Na;let e=r.state;return e.window&&(e.window=null),r.state=null,bl},az=(r,e)=>{if(ql(r))return Na;const t=r.state;return(t.wrap&2)===0?Na:(t.head=e,e.done=!1,bl)},sz=(r,e)=>{const t=e.length;let n,i,a;return ql(r)||(n=r.state,n.wrap!==0&&n.mode!==av)?Na:n.mode===av&&(i=1,i=Lp(i,e,t,0),i!==n.check)?TI:(a=PI(r,e,t,t),a?(n.mode=OI,RI):(n.havedict=1,bl))};var oz=BI,uz=II,cz=NI,lz=tz,fz=DI,dz=nz,hz=iz,pz=az,yz=sz,mz="pako inflate (from Nodeca project)",No={inflateReset:oz,inflateReset2:uz,inflateResetKeep:cz,inflateInit:lz,inflateInit2:fz,inflate:dz,inflateEnd:hz,inflateGetHeader:pz,inflateSetDictionary:yz,inflateInfo:mz};function gz(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var vz=gz;const UI=Object.prototype.toString,{Z_NO_FLUSH:bz,Z_FINISH:wz,Z_OK:Fp,Z_STREAM_END:U_,Z_NEED_DICT:k_,Z_STREAM_ERROR:_z,Z_DATA_ERROR:S9,Z_MEM_ERROR:Ez}=O0;function B0(r){this.options=rb.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xI,this.strm.avail_out=0;let t=No.inflateInit2(this.strm,e.windowBits);if(t!==Fp)throw new Error(gl[t]);if(this.header=new vz,No.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=$p.string2buf(e.dictionary):UI.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=No.inflateSetDictionary(this.strm,e.dictionary),t!==Fp)))throw new Error(gl[t])}B0.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?wz:bz,UI.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=No.inflate(t,o),a===k_&&i&&(a=No.inflateSetDictionary(t,i),a===Fp?a=No.inflate(t,o):a===S9&&(a=k_));t.avail_in>0&&a===U_&&t.state.wrap>0&&r[t.next_in]!==0;)No.inflateReset(t),a=No.inflate(t,o);switch(a){case _z:case S9:case k_:case Ez:return this.onEnd(a),this.ended=!0,!1}if(s=t.avail_out,t.next_out&&(t.avail_out===0||a===U_))if(this.options.to==="string"){let c=$p.utf8border(t.output,t.next_out),l=t.next_out-c,d=$p.buf2string(t.output,c);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(c,c+l),0),this.onData(d)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Fp&&s===0)){if(a===U_)return a=No.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};B0.prototype.onData=function(r){this.chunks.push(r)};B0.prototype.onEnd=function(r){r===Fp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rb.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function k8(r,e){const t=new B0(e);if(t.push(r),t.err)throw t.msg||gl[t.err];return t.result}function xz(r,e){return e=e||{},e.raw=!0,k8(r,e)}var Az=B0,Sz=k8,Mz=xz,Tz=k8,Rz={Inflate:Az,inflate:Sz,inflateRaw:Mz,ungzip:Tz};const{Deflate:Oz,deflate:Cz,deflateRaw:Nz,gzip:Bz}=kF,{Inflate:Iz,inflate:Dz,inflateRaw:Pz,ungzip:Uz}=Rz;var kz=Oz,qz=Cz,Lz=Nz,jz=Bz,$z=Iz,Fz=Dz,zz=Pz,Vz=Uz,Hz=O0,z1={Deflate:kz,deflate:qz,deflateRaw:Lz,gzip:jz,Inflate:$z,inflate:Fz,inflateRaw:zz,ungzip:Vz,constants:Hz};function Ad(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function Kz(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(!r[n].equals(e[n]))return!1;return!0}const Yu={};function kI(){Yu.enc=new Array(255),Yu.dec={};for(let r=0;r<=255;++r){const e=r.toString(16).padStart(2,"0");Yu.enc[r]=e,Yu.dec[e]=r}}function q8(r){Yu.enc||kI();const e=r.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=Yu.enc[r[n]];return t.join("")}function Gz(r){if(Yu.dec||kI(),typeof r!="string")throw new Error("Expected string containing hex digits");if(r.length%2)throw new Error("Odd number of hex digits");r=r.toLowerCase();const e=r.length/2,t=new Uint8Array(e);for(let n=0;n<e;n++){const i=Yu.dec[r[n*2]+r[n*2+1]];if(i===void 0)throw new Error("Expected hex string");t[n]=i}return t}function ib(r){return Rj(r)}let M9=!1;function ht(r,e){if(r instanceof e)return!0;if(r==null||typeof r!="object")return!1;const t=e.__className||e.abiName;if(!t)return!1;let n=r.constructor,i=!1;for(;n&&!i;){const a=n.__className||n.abiName;if(!a)break;i=t==a,n=Object.getPrototypeOf(n)}return i&&!M9&&(console.warn(`Detected alien instance of ${t}, this usually means more than one version of @wharfkit/antelope has been included in your bundle.`),M9=!0),i}let L8=class{static from(e){if(ht(e,this))return e;if(typeof e=="string")return this.fromString(e);throw new Error("Invalid blob")}static fromString(e){if(typeof Buffer=="function")return new this(new Uint8Array(Buffer.from(e,"base64")));switch(e.length%4){case 2:e+="==";break;case 3:e+="=";break;case 1:e=e.substring(0,e.length-1);break}const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new this(n)}constructor(e){this.array=e}equals(e){const t=this.constructor;try{return Ad(this.array,t.from(e).array)}catch{return!1}}get base64String(){return typeof Buffer=="function"?Buffer.from(this.array).toString("base64"):btoa(this.utf8String)}get utf8String(){return new TextDecoder().decode(this.array)}toABI(e){e.writeArray(this.array)}toString(){return this.base64String}toJSON(){return this.toString()}};L8.abiName="blob";class lt{static from(e,t){return ht(e,this)?e:typeof e=="string"?this.fromString(e,t):ArrayBuffer.isView(e)?new this(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)):ht(e.array,Uint8Array)?new this(e.array):new this(new Uint8Array(e))}static fromString(e,t="hex"){if(t==="hex"){const n=Gz(e);return new this(n)}else if(t=="utf8"){const n=new TextEncoder;return new this(n.encode(e))}else throw new Error(`Unknown encoding: ${t}`)}static fromABI(e){const t=e.readVaruint32();return new this(e.readArray(t))}static abiDefault(){return new lt}static equal(e,t){return this.from(e).equals(this.from(t))}static random(e){return new this(ib(e))}static isBytes(e){return!!(ht(e,lt)||ht(e,Uint8Array)||Array.isArray(e)&&e.every(t=>typeof t=="number")||typeof e=="string"&&(/[\da-f]/i.test(e)||e===""))}constructor(e=new Uint8Array){this.array=e}get length(){return this.array.byteLength}get hexString(){return q8(this.array)}get utf8String(){return new TextDecoder().decode(this.array)}append(e){e=lt.from(e);const t=this.array.byteLength+e.array.byteLength,n=new ArrayBuffer(t),i=new Uint8Array(n);i.set(this.array),i.set(e.array,this.array.byteLength),this.array=i}appending(e){const t=new lt(this.array);return t.append(e),t}zeropad(e,t=!1){const n=t?e:Math.max(e,this.array.byteLength),i=new ArrayBuffer(n),a=new Uint8Array(i);a.fill(0),t&&this.array.byteLength>n?a.set(this.array.slice(0,n),0):a.set(this.array,n-this.array.byteLength),this.array=a}zeropadded(e,t=!1){const n=new lt(this.array);return n.zeropad(e,t),n}dropFirst(e=1){this.array=this.array.subarray(e)}droppingFirst(e=1){return new lt(this.array.subarray(e))}copy(){const e=new ArrayBuffer(this.array.byteLength),t=new Uint8Array(e);return t.set(this.array),new lt(t)}equals(e){return Ad(this.array,lt.from(e).array)}toString(e="hex"){if(e==="hex")return this.hexString;if(e==="utf8")return this.utf8String;throw new Error(`Unknown encoding: ${e}`)}toABI(e){e.writeVaruint32(this.array.byteLength),e.writeArray(this.array)}toJSON(){return this.hexString}}lt.abiName="bytes";class Hd{static from(e){return ht(e,this)?e:ht(e,Hd)?new this(e.array):new this(lt.from(e).array)}static fromABI(e){return new this(e.readArray(this.byteSize))}static abiDefault(){return new this(new Uint8Array(this.byteSize))}constructor(e){const t=this.constructor.byteSize;if(e.byteLength!==t)throw new Error(`Checksum size mismatch, expected ${t} bytes got ${e.byteLength}`);this.array=e}equals(e){const t=this.constructor;try{return Ad(this.array,t.from(e).array)}catch{return!1}}get hexString(){return q8(this.array)}toABI(e){e.writeArray(this.array)}toString(){return this.hexString}toJSON(){return this.toString()}}Hd.abiName="__checksum";class $t extends Hd{static from(e){return super.from(e)}static hash(e){const t=new Uint8Array(hd.sha256().update(lt.from(e).array).digest());return new $t(t)}}$t.abiName="checksum256";$t.byteSize=32;class Kd extends Hd{static from(e){return super.from(e)}static hash(e){const t=new Uint8Array(hd.sha512().update(lt.from(e).array).digest());return new Kd(t)}}Kd.abiName="checksum512";Kd.byteSize=64;class cc extends Hd{static from(e){return super.from(e)}static hash(e){const t=new Uint8Array(hd.ripemd160().update(lt.from(e).array).digest());return new cc(t)}}cc.abiName="checksum160";cc.byteSize=20;var _t;(function(r){r.K1="K1",r.R1="R1",r.WA="WA"})(_t||(_t={}));(function(r){function e(n){switch(n){case r.K1:return 0;case r.R1:return 1;case r.WA:return 2;default:throw new Error(`Unknown curve type: ${n}`)}}r.indexFor=e;function t(n){let i;switch(typeof n!="number"?i=r.indexFor(n):i=n,i){case 0:return r.K1;case 1:return r.R1;case 2:return r.WA;default:throw new Error("Unknown curve type")}}r.from=t})(_t||(_t={}));class It{static get max(){return new ss(2).pow(new ss(this.byteWidth*8-(this.isSigned?1:0))).isubn(1)}static get min(){return this.isSigned?this.max.ineg().isubn(1):new ss(0)}static get zero(){return this.from(0)}static add(e,t,n="truncate"){return It.operator(e,t,n,(i,a)=>i.add(a))}static sub(e,t,n){return It.operator(e,t,n,(i,a)=>i.sub(a))}static mul(e,t,n){return It.operator(e,t,n,(i,a)=>i.mul(a))}static div(e,t,n){return It.operator(e,t,n,(i,a)=>{if(a.isZero())throw new Error("Division by zero");return i.div(a)})}static divRound(e,t,n){return It.operator(e,t,n,(i,a)=>{if(a.isZero())throw new Error("Division by zero");return i.divRound(a)})}static divCeil(e,t,n){return It.operator(e,t,n,(i,a)=>{if(a.isZero())throw new Error("Division by zero");const o=i.divmod(a);return o.mod.isZero()?o.div:o.div.negative!==0?o.div.isubn(1):o.div.iaddn(1)})}static gt(e,t){return e.value.gt(t.value)}static lt(e,t){return e.value.lt(t.value)}static gte(e,t){return e.value.gte(t.value)}static lte(e,t){return e.value.lte(t.value)}static operator(e,t,n="truncate",i){const{a,b:o}=Yz(e,t),s=a.constructor,c=i(a.value,o.value);return s.from(c,n)}static from(e,t){if(ht(e,this))return e;let n=this,i;if(ht(e,It))n=e.constructor,i=e.value.clone();else if(e instanceof Uint8Array)i=new ss(e,void 0,"le"),n.isSigned&&(i=i.fromTwos(n.byteWidth*8));else{if(typeof e=="string"&&!/[0-9]+/.test(e)||typeof e=="number"&&!Number.isFinite(e))throw new Error("Invalid number");i=ss.isBN(e)?e.clone():new ss(e,10),i.isNeg()&&!n.isSigned&&(n={byteWidth:n.byteWidth,isSigned:!0})}switch(t){case"clamp":i=Wz(i,this.min,this.max);break;case"truncate":i=Zz(i,n,this);break}return new this(i)}static fromABI(e){return this.from(e.readArray(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){return this.from(ib(this.byteWidth))}constructor(e){const t=this.constructor;if(t.isSigned===void 0||t.byteWidth===void 0)throw new Error("Cannot instantiate abstract class Int");if(e.gt(t.max))throw new Error(`Number ${e} overflows ${t.abiName}`);if(e.lt(t.min))throw new Error(`Number ${e} underflows ${t.abiName}`);this.value=e}cast(e,t="truncate"){return this.constructor===e?this:e.from(this,t)}get byteArray(){const e=this.constructor;return(e.isSigned?this.value.toTwos(e.byteWidth*8):this.value).toArrayLike(Uint8Array,"le",e.byteWidth)}equals(e,t=!1){const n=this.constructor;if(t===!0&&ht(e,It)){const i=e.constructor;if(n.byteWidth!==i.byteWidth||n.isSigned!==i.isSigned)return!1}try{return this.value.eq(n.from(e).value)}catch{return!1}}add(e){this.value=this.operator(e,It.add).value}adding(e){return this.operator(e,It.add)}subtract(e){this.value=this.operator(e,It.sub).value}subtracting(e){return this.operator(e,It.sub)}multiply(e){this.value=this.operator(e,It.mul).value}multiplying(e){return this.operator(e,It.mul)}divide(e,t){this.value=this.dividing(e,t).value}dividing(e,t){let n=It.div;switch(t){case"ceil":n=It.divCeil;break;case"round":n=It.divRound;break}return this.operator(e,n)}gt(e){return It.gt(this,e)}lt(e){return It.lt(this,e)}gte(e){return It.gte(this,e)}lte(e){return It.lte(this,e)}operator(e,t){let n;return ht(e,It)?n=e:n=wi.from(e,"truncate"),t(this,n).cast(this.constructor)}toNumber(){return this.value.toNumber()}toString(){return this.value.toString()}[Symbol.toPrimitive](e){return e==="number"?this.toNumber():this.toString()}toABI(e){e.writeArray(this.byteArray)}toJSON(){return this.value.bitLength()>32?this.value.toString():this.value.toNumber()}}It.abiName="__int";class ab extends It{}ab.abiName="int8";ab.byteWidth=1;ab.isSigned=!0;class sb extends It{}sb.abiName="int16";sb.byteWidth=2;sb.isSigned=!0;class Fo extends It{}Fo.abiName="int32";Fo.byteWidth=4;Fo.isSigned=!0;class wi extends It{}wi.abiName="int64";wi.byteWidth=8;wi.isSigned=!0;class ob extends It{}ob.abiName="int128";ob.byteWidth=16;ob.isSigned=!0;class $o extends It{}$o.abiName="uint8";$o.byteWidth=1;$o.isSigned=!1;class wl extends It{}wl.abiName="uint16";wl.byteWidth=2;wl.isSigned=!1;class Er extends It{}Er.abiName="uint32";Er.byteWidth=4;Er.isSigned=!1;class Or extends It{}Or.abiName="uint64";Or.byteWidth=8;Or.isSigned=!1;class _l extends It{}_l.abiName="uint128";_l.byteWidth=16;_l.isSigned=!1;class ub extends It{static fromABI(e){return new this(new ss(e.readVarint32()))}toABI(e){e.writeVarint32(Number(this))}}ub.abiName="varint32";ub.byteWidth=32;ub.isSigned=!0;class I0 extends It{static fromABI(e){return new this(new ss(e.readVaruint32()))}toABI(e){e.writeVaruint32(Number(this))}}I0.abiName="varuint32";I0.byteWidth=32;I0.isSigned=!1;function Wz(r,e,t){return ss.min(ss.max(r,e),t)}function Zz(r,e,t){const n=r.isNeg()?255:0,a=(e.isSigned?r.toTwos(e.byteWidth*8):r).toArrayLike(Uint8Array,"le"),o=new Uint8Array(t.byteWidth);o.fill(n),o.set(a.slice(0,t.byteWidth));const s=new ss(o,void 0,"le");return t.isSigned?s.fromTwos(t.byteWidth*8):s}function Yz(r,e){r=T9(r),e=T9(e);const t=r.constructor,n=e.constructor;return t!==n&&(t.isSigned===n.isSigned?t.byteWidth>n.byteWidth?e=e.cast(t):n.byteWidth>t.byteWidth&&(r=r.cast(n)):t.isSigned===!1&&t.byteWidth>=n.byteWidth?e=e.cast(t):n.isSigned===!1&&n.byteWidth>=t.byteWidth?r=r.cast(n):t.isSigned===!0&&t.max.gte(n.max)&&t.min.lte(n.min)?e=e.cast(t):n.isSigned===!0&&n.max.gte(t.max)&&n.min.lte(t.min)&&(r=r.cast(n))),{a:r,b:e}}function T9(r){let e=r;return r.constructor.byteWidth<4&&(e=r.cast(Fo)),e}function cb(r){const e=[],t=[],n=[],i=new Set,a=c=>{let l;return typeof c.type!="string"?l=o(c.type):l=c.type,c.array===!0&&(c.size?l+=`[${c.size}]`:l+="[]"),c.optional===!0&&(l+="?"),c.extension===!0&&(l+="$"),l},o=c=>{if(c.abiName){if(c.abiName==="__struct")throw new Error("Misconfigured Struct subclass, did you forget @Struct.type?")}else throw new Error("Encountered non-conforming type");if(i.has(c))return c.abiName;if(i.add(c),c.abiAlias)n.push({new_type_name:c.abiName,type:a(c.abiAlias)});else if(c.abiFields){const l=c.abiFields.map(h=>({name:h.name,type:a(h)})),d={base:c.abiBase?o(c.abiBase):"",name:c.abiName,fields:l};e.push(d)}else if(c.abiVariant){const l={name:c.abiName,types:c.abiVariant.map(a)};t.push(l)}return c.abiName},s=o(r);return{abi:Ut.from({structs:e,variants:t,types:n}),types:Array.from(i),root:s}}function sv(r){let e=typeof r.type=="string"?r.type:r.type.abiName;return r.array===!0&&(r.size?e+=`[${r.size}]`:e+="[]"),r.optional===!0&&(e+="?"),r.extension===!0&&(e+="$"),e}function Qz(r){return typeof r!="string"&&r.abiName===void 0&&r.type!==void 0}function qI(r){return typeof r=="string"?{type:r}:typeof r.abiName<"u"?{type:r}:r}const LI={abiName:"string",abiDefault:()=>"",fromABI:r=>r.readString(),from:r=>r,toABI:(r,e)=>{e.writeString(r)}},jI={abiName:"bool",abiDefault:()=>!1,fromABI:r=>r.readByte()===1,from:r=>r,toABI:(r,e)=>{e.writeByte(r===!0?1:0)}};function Jz(){return[jI,LI,Yr,Yr.Symbol,Yr.SymbolCode,fb,lt,cc,$t,Kd,zp,lb,F8,P0,ob,sb,Fo,wi,ab,Xe,Fn,Yd,zI,Vo,_l,wl,Er,Or,$o,ub,I0]}function gx(r=[]){const e={},t=Jz();for(const n of t)e[n.abiName]=n;for(const n of r){if(!n.abiName)throw new Error("Invalid type");e[n.abiName]=n}return e}function j8(r){if(r.constructor&&r.constructor.abiName!==void 0)return r.constructor.abiName;if(Array.isArray(r)){const e=r.map(j8),t=e[0];return!t||!e.every(n=>n===t)?void 0:t+"[]"}switch(typeof r){case"boolean":return"bool";case"string":return"string"}}function ov(r,e="jsobj"){var t;if(r.constructor&&r.constructor.abiName!==void 0)return r.constructor;if(Array.isArray(r)){const i=r.map(o=>ov(o,e)),a=i[0];return!a||!i.every(o=>o&&o.abiName===a.abiName)?void 0:a}const n=typeof r;if(n==="object"&&r!==null){const i=Object.keys(r).map(a=>({name:a,type:ov(r[a],e+"_nested")}));return i.find(a=>!a.type)?void 0:(t=class extends J{},t.abiName=e,t.abiFields=i,t)}switch(n){case"boolean":return jI;case"string":return LI}}class $I extends Error{constructor(e,t){const n=e.codingPath.map(({field:i,type:a})=>typeof i=="number"?i:`${i}<${a.typeName}>`).join(".");super(`Decoding error at ${n}: ${t.message}`),this.stack=t.stack,this.ctx=e,this.underlyingError=t}}$I.__className="DecodingError";function zo(r){const e=qI(r.type),t=sv(e),n=r.customTypes||[];let i;if(r.abi)i=Ut.from(r.abi);else try{let s;if(typeof e.type=="string"){const l=gx(n),d=new Ut.ResolvedType(e.type).name;if(s=l[d],!s)throw new Error(`Unknown type: ${e.type}`)}else s=e.type;const c=cb(s);i=c.abi,n.push(...c.types)}catch(s){throw Error(`Unable to synthesize ABI for: ${t} (${s.message}). To decode non-class types you need to pass the ABI definition manually.`)}const a=i.resolveType(t);typeof e.type!="string"&&n.unshift(e.type);const o={types:gx(n),strictExtensions:r.strictExtensions||!1,codingPath:[{field:"root",type:a}]};try{if(r.data||r.data===""){let s;if(ht(r.data,Sd))s=r.data;else{const c=lt.from(r.data),l=r.ignoreInvalidUTF8===void 0?!0:!r.ignoreInvalidUTF8;s=new Sd(c.array,new TextDecoder("utf-8",{fatal:l}))}return r.metadata&&(s.metadata=r.metadata),V1(a,s,o)}else{if(r.object!==void 0)return xp(r.object,a,o);if(r.json)return xp(JSON.parse(r.json),a,o);throw new Error("Nothing to decode, you must set one of data, json, object")}}catch(s){throw new $I(o,s)}}const El=Symbol("Resolved");function V1(r,e,t){if(t.codingPath.length>32)throw new Error("Maximum decoding depth exceeded");if(r.isExtension&&!e.canRead())return t.strictExtensions?Ap(r,t):null;if(r.isOptional&&e.readByte()===0)return null;if(r.isArray){const i=e.readVaruint32(),a=[];for(let o=0;o<i;o++)t.codingPath.push({field:o,type:r}),a.push(n()),t.codingPath.pop();return a}else return n();function n(){const i=t.types[r.name];if(i&&i.fromABI)return i.fromABI(e);if(r.ref){t.codingPath.push({field:"",type:r.ref});const a=V1(r.ref,e,t);return t.codingPath.pop(),a}else if(r.fields){const a=r.allFields;if(!a)throw new Error("Invalid struct fields");const o={};for(const s of a)t.codingPath.push({field:s.name,type:s.type}),o[s.name]=V1(s.type,e,t),t.codingPath.pop();return i?(o[El]=!0,i.from(o)):o}else if(r.variant){const a=e.readByte(),o=r.variant[a];if(!o)throw new Error(`Unknown variant idx: ${a}`);t.codingPath.push({field:`v${a}`,type:o});const s=[o.typeName,V1(o,e,t)];return t.codingPath.pop(),i?i.from(s):s}else throw i?new Error("Invalid type"):new Error(r.name==="any"?"Unable to decode 'any' type from binary":"Unknown type")}}function xp(r,e,t){if(r==null){if(e.isOptional)return null;if(e.isExtension)return t.strictExtensions?Ap(e,t):null;throw new Error(`Unexpectedly encountered ${r} for non-optional (${t.codingPath.map(i=>i.field).join(".")})`)}else if(e.isArray){if(!Array.isArray(r))throw new Error("Expected array");const i=[],a=r.length;for(let o=0;o<a;o++)t.codingPath.push({field:o,type:e}),i.push(n(r[o])),t.codingPath.pop();return i}else return n(r);function n(i){const a=t.types[e.name];if(e.ref&&!a)return xp(i,e.ref,t);if(e.fields){if(typeof i!="object")throw new Error("Expected object");if(typeof a=="function"&&ht(i,a))return i;const o=e.allFields;if(!o)throw new Error("Invalid struct fields");const s={};for(const c of o)t.codingPath.push({field:c.name,type:c.type}),s[c.name]=xp(i[c.name],c.type,t),t.codingPath.pop();return a?(s[El]=!0,a.from(s)):s}else if(e.variant){let o;Array.isArray(i)&&i.length===2&&typeof i[0]=="string"?(o=i[0],i=i[1]):ht(i,ai)?(o=i.variantName,i=i.value):o=j8(i);const s=e.variant.findIndex(d=>d.typeName===o);if(s===-1)throw new Error(`Unknown variant type: ${o}`);const c=e.variant[s];t.codingPath.push({field:`v${s}`,type:c});const l=[c.typeName,xp(i,c,t)];return t.codingPath.pop(),a?(l[El]=!0,a.from(l)):l}else{if(!a){if(e.name==="any")return i;throw new Error("Unknown type")}return a.from(i)}}}function Ap(r,e,t=new Set){if(r.isArray)return[];if(r.isOptional)return null;const n=e.types[r.name];if(n&&n.abiDefault)return n.abiDefault();if(t.has(r.name))throw new Error("Circular type reference");if(t.add(r.name),r.allFields){const i={};for(const a of r.allFields)e.codingPath.push({field:a.name,type:a.type}),i[a.name]=Ap(a.type,e,t),e.codingPath.pop();return n?(i[El]=!0,n.from(i)):i}if(r.variant&&r.variant.length>0){const i=[r.variant[0].typeName,Ap(r.variant[0],e)];return n?(i[El]=!0,n.from(i)):i}if(r.ref){e.codingPath.push({field:"",type:r.ref});const i=Ap(r.ref,e,t);return e.codingPath.pop(),i}throw new Error("Unable to determine default value")}class Sd{constructor(e,t){this.array=e,this.pos=0,this.metadata={},this.textDecoder=t||new TextDecoder("utf-8",{fatal:!0}),this.data=new DataView(e.buffer,e.byteOffset,e.byteLength)}canRead(e=1){return!(this.pos+e>this.array.byteLength)}ensure(e){if(!this.canRead(e))throw new Error("Read past end of buffer")}setPosition(e){if(e<0||e>this.array.byteLength)throw new Error("Invalid position");this.pos=e}getPosition(){return this.pos}advance(e){this.ensure(e),this.pos+=e}readByte(){return this.ensure(1),this.array[this.pos++]}readFloat(e){this.ensure(e);let t;switch(e){case 4:t=this.data.getFloat32(this.pos,!0);break;case 8:t=this.data.getFloat64(this.pos,!0);break;default:throw new Error("Invalid float size")}return this.pos+=e,t}readVaruint32(){let e=0,t=0;for(;;){const n=this.readByte();if(e|=(n&127)<<t,t+=7,!(n&128))break}return e>>>0}readVarint32(){const e=this.readVaruint32();return e&1?~e>>1|2147483648:e>>>1}readArray(e){this.ensure(e);const t=this.array.subarray(this.pos,this.pos+e);return this.pos+=e,t}readString(){const e=this.readVaruint32();return this.textDecoder.decode(this.readArray(e))}}Sd.__className="ABIDecoder";class FI extends Error{constructor(e,t){const n=e.codingPath.map(({field:i,type:a})=>typeof i=="number"?i:`${i}<${a.typeName}>`).join(".");super(`Encoding error at ${n}: ${t.message}`),this.stack=t.stack,this.ctx=e,this.underlyingError=t}}FI.__className="EncodingError";function Ba(r){let e,t;typeof r.type=="string"?t=r.type:r.type&&Qz(r.type)?(typeof r.type.type!="string"&&(e=r.type.type),t=sv(r.type)):r.type&&r.type.abiName!==void 0?(e=r.type,t=r.type.abiName):(e=ov(r.object),e&&(t=e.abiName,Array.isArray(r.object)&&(t+="[]")));const n=r.customTypes?r.customTypes.slice():[];if(e)n.unshift(e);else if(t){const c=new Ut.ResolvedType(t).name;e=n.find(l=>l.abiName===c)}let i;if(r.abi&&t)i=Ut.from(r.abi).resolveType(t);else if(e){const c=cb(e);i=c.abi.resolveType(t||e.abiName),n.push(...c.types)}else if(t)i=new Ut.ResolvedType(t);else throw new Error("Unable to determine the type of the object to be encoded. To encode custom ABI types you must pass the type argument.");const a=gx(n),o=r.encoder||new $8;r.metadata&&(o.metadata=r.metadata);const s={types:a,encoder:o,codingPath:[{field:"root",type:i}]};try{H1(r.object,i,s)}catch(c){throw new FI(s,c)}return lt.from(o.getData())}function H1(r,e,t){const n=r!=null;if(e.isOptional&&(t.encoder.writeByte(n?1:0),!n))return;if(e.isArray){if(!Array.isArray(r))throw new Error(`Expected array for: ${e.typeName}`);const a=r.length;e.size||t.encoder.writeVaruint32(a);for(let o=0;o<a;o++)t.codingPath.push({field:o,type:e}),i(r[o]),t.codingPath.pop()}else i(r);function i(a){const o=t.types[e.name];if(e.ref&&!o){H1(a,e.ref,t);return}if(!n){if(e.isExtension)return;throw new Error(`Found ${a} for non-optional type: ${e.typeName} (${t.codingPath.map(s=>s.field).join(".")})`)}if(o&&o.toABI)o.toABI(a,t.encoder);else if(typeof a.toABI=="function"&&a.constructor.abiName===e.name)a.toABI(t.encoder);else if(e.fields){if(typeof a!="object")throw new Error(`Expected object for: ${e.name}`);const s=e.allFields;if(!s)throw new Error("Invalid struct fields");for(const c of s)t.codingPath.push({field:c.name,type:c.type}),H1(a[c.name],c.type,t),t.codingPath.pop()}else if(e.variant){let s;Array.isArray(a)&&a.length===2&&typeof a[0]=="string"?(s=a[0],a=a[1]):ht(a,ai)?(s=a.variantName,a=a.value):s=j8(a);const c=e.variant.findIndex(d=>d.typeName===s);if(c===-1){const d=e.variant.map(h=>`'${h.typeName}'`).join(", ");throw new Error(`Unknown variant type '${s}', expected one of ${d}`)}const l=e.variant[c];t.encoder.writeVaruint32(c),t.codingPath.push({field:`v${c}`,type:l}),H1(a,l,t),t.codingPath.pop()}else{if(!o)throw new Error(e.name==="any"?"Unable to encode any type to binary":"Unknown type");const s=o.from(a);if(!s.toABI)throw new Error(`Invalid type ${e.name}, no encoding methods implemented`);s.toABI(t.encoder)}}}class $8{constructor(e=1024){this.pageSize=e,this.pos=0,this.textEncoder=new TextEncoder,this.metadata={};const t=new ArrayBuffer(e);this.data=new DataView(t),this.array=new Uint8Array(t)}ensure(e){if(this.data.byteLength>=this.pos+e)return;const t=Math.ceil(e/this.pageSize),n=this.data.byteLength+this.pageSize*t,i=new ArrayBuffer(n),a=new DataView(i),o=new Uint8Array(i);o.set(this.array),this.data=a,this.array=o}writeByte(e){this.ensure(1),this.array[this.pos++]=e}writeArray(e){const t=e.length;this.ensure(t),this.array.set(e,this.pos),this.pos+=t}writeFloat(e,t){switch(this.ensure(t),t){case 4:this.data.setFloat32(this.pos,e,!0);break;case 8:this.data.setFloat64(this.pos,e,!0);break;default:throw new Error("Invalid float size")}this.pos+=t}writeVaruint32(e){for(this.ensure(4);;)if(e>>>7)this.array[this.pos++]=128|e&127,e=e>>>7;else{this.array[this.pos++]=e;break}}writeVarint32(e){this.writeVaruint32(e<<1^e>>31)}writeString(e){const t=this.textEncoder.encode(e);this.writeVaruint32(t.byteLength),this.writeArray(t)}getData(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.pos)}getBytes(){return new lt(this.getData())}}$8.__className="ABIEncoder";class Ut{constructor(e){this.version=e.version||Ut.version,this.types=e.types||[],this.variants=e.variants||[],this.structs=e.structs||[],this.actions=e.actions||[],this.tables=e.tables||[],this.ricardian_clauses=e.ricardian_clauses||[],this.action_results=e.action_results||[]}static from(e){return ht(e,Ut)?e:ht(e,L8)?zo({data:e.array,type:this}):typeof e=="string"?new Ut(JSON.parse(e)):new Ut(e)}static fromABI(e){const t=e.readString(),n=[],i=e.readVaruint32();for(let x=0;x<i;x++)n.push({new_type_name:e.readString(),type:e.readString()});const a=[],o=e.readVaruint32();for(let x=0;x<o;x++){const D=e.readString(),N=e.readString(),B=e.readVaruint32(),k=[];for(let F=0;F<B;F++)k.push({name:e.readString(),type:e.readString()});a.push({base:N,name:D,fields:k})}const s=[],c=e.readVaruint32();for(let x=0;x<c;x++){const D=Xe.fromABI(e),N=e.readString(),B=e.readString();s.push({name:D,type:N,ricardian_contract:B})}const l=[],d=e.readVaruint32();for(let x=0;x<d;x++){const D=Xe.fromABI(e),N=e.readString(),B=[],k=e.readVaruint32();for(let Z=0;Z<k;Z++)B.push(e.readString());const F=[],T=e.readVaruint32();for(let Z=0;Z<T;Z++)F.push(e.readString());const z=e.readString();l.push({name:D,index_type:N,key_names:B,key_types:F,type:z})}const h=[],y=e.readVaruint32();for(let x=0;x<y;x++){const D=e.readString(),N=e.readString();h.push({id:D,body:N})}const m=e.readVaruint32();for(let x=0;x<m;x++)e.advance(8),e.advance(e.readVaruint32());const b=e.readVaruint32();for(let x=0;x<b;x++)e.advance(2),e.advance(e.readVaruint32());const v=[];if(e.canRead()){const x=e.readVaruint32();for(let D=0;D<x;D++){const N=e.readString(),B=[],k=e.readVaruint32();for(let F=0;F<k;F++)B.push(e.readString());v.push({name:N,types:B})}}const E=[];if(e.canRead()){const x=e.readVaruint32();for(let D=0;D<x;D++){const N=Xe.fromABI(e),B=e.readString();E.push({name:N,result_type:B})}}return new Ut({version:t,types:n,structs:a,actions:s,tables:l,ricardian_clauses:h,variants:v,action_results:E})}toABI(e){e.writeString(this.version),e.writeVaruint32(this.types.length);for(const t of this.types)e.writeString(t.new_type_name),e.writeString(t.type);e.writeVaruint32(this.structs.length);for(const t of this.structs){e.writeString(t.name),e.writeString(t.base),e.writeVaruint32(t.fields.length);for(const n of t.fields)e.writeString(n.name),e.writeString(n.type)}e.writeVaruint32(this.actions.length);for(const t of this.actions)Xe.from(t.name).toABI(e),e.writeString(t.type),e.writeString(t.ricardian_contract);e.writeVaruint32(this.tables.length);for(const t of this.tables){Xe.from(t.name).toABI(e),e.writeString(t.index_type),e.writeVaruint32(t.key_names.length);for(const n of t.key_names)e.writeString(n);e.writeVaruint32(t.key_types.length);for(const n of t.key_types)e.writeString(n);e.writeString(t.type)}e.writeVaruint32(this.ricardian_clauses.length);for(const t of this.ricardian_clauses)e.writeString(t.id),e.writeString(t.body);e.writeVaruint32(0),e.writeVaruint32(0),e.writeVaruint32(this.variants.length);for(const t of this.variants){e.writeString(t.name),e.writeVaruint32(t.types.length);for(const n of t.types)e.writeString(n)}e.writeVaruint32(this.action_results.length);for(const t of this.action_results)Xe.from(t.name).toABI(e),e.writeString(t.result_type)}resolveType(e){const t={};return this.resolve({name:e,types:t},{id:0})}resolveAll(){const e={},t={id:0};return{types:this.types.map(n=>this.resolve({name:n.new_type_name,types:e},t)),variants:this.variants.map(n=>this.resolve({name:n.name,types:e},t)),structs:this.structs.map(n=>this.resolve({name:n.name,types:e},t))}}resolve({name:e,types:t},n){const i=t[e];if(i)return i;const a=new Ut.ResolvedType(e,++n.id);t[a.typeName]=a;const o=this.types.find(l=>l.new_type_name==a.name);if(o)return a.ref=this.resolve({name:o.type,types:t},n),a;const s=this.getStruct(a.name);if(s)return s.base&&(a.base=this.resolve({name:s.base,types:t},n)),a.fields=s.fields.map(l=>({name:l.name,type:this.resolve({name:l.type,types:t},n)})),a;const c=this.getVariant(a.name);return c&&(a.variant=c.types.map(l=>this.resolve({name:l,types:t},n))),a}getStruct(e){return this.structs.find(t=>t.name==e)}getVariant(e){return this.variants.find(t=>t.name==e)}getActionType(e){const t=Xe.from(e).toString(),n=this.actions.find(i=>i.name.toString()===t);if(n)return n.type}equals(e){const t=Ut.from(e);return this.version!=t.version||this.types.length!=t.types.length||this.structs.length!=t.structs.length||this.actions.length!=t.actions.length||this.tables.length!=t.tables.length||this.ricardian_clauses.length!=t.ricardian_clauses.length||this.variants.length!=t.variants.length||this.action_results.length!=t.action_results.length?!1:Ba({object:this}).equals(Ba({object:t}))}toJSON(){return{version:this.version,types:this.types,structs:this.structs,actions:this.actions,tables:this.tables,ricardian_clauses:this.ricardian_clauses,error_messages:[],abi_extensions:[],variants:this.variants,action_results:this.action_results}}}Ut.abiName="abi";Ut.version="eosio::abi/1.1";(function(r){class e{constructor(n,i=0){let a=n;a.endsWith("$")?(a=a.slice(0,-1),this.isExtension=!0):this.isExtension=!1,a.endsWith("?")?(a=a.slice(0,-1),this.isOptional=!0):this.isOptional=!1,this.isArray=!1,a.endsWith("[]")&&(a=a.slice(0,-2),this.isArray=!0);const o=a.match(/(.*)\[(\d+)\]/);if(o){const[,s,c]=o;a=s,this.isArray=!0,this.size=Number(c)}this.id=i,this.name=a}get typeName(){let n=this.name;return this.isArray&&(this.size?n+=`[${this.size}]`:n+="[]"),this.isOptional&&(n+="?"),this.isExtension&&(n+="$"),n}get allFields(){let n=this;const i=[],a=new Set;do{if(!n.fields||a.has(n.name))return;for(let o=n.fields.length-1;o>=0;o--)i.unshift(n.fields[o]);a.add(n.name),n=n.base}while(n!==void 0);return i}}r.ResolvedType=e})(Ut||(Ut={}));class J{static from(e){return e[El]===!0?new this(e):ht(e,this)?e:zo({object:e,type:this})}static get structFields(){const e=[],t=n=>{n.abiBase&&t(n.abiBase);for(const i of n.abiFields||[])e.push(i)};return t(this),e}constructor(e){const t=this.constructor;for(const n of t.structFields){const i=typeof n.type=="string"?new Ut.ResolvedType(String(n.type)).isOptional:n.optional,a=e[n.name];i&&!a||(this[n.name]=a)}}equals(e){const t=this.constructor;return e.constructor&&typeof e.constructor.abiName=="string"&&e.constructor.abiName!==t.abiName?!1:Ba({object:this}).equals(Ba({object:t.from(e)}))}toJSON(){const e=this.constructor,t={};for(const n of e.structFields)n.optional&&!this[n.name]||(t[n.name]=this[n.name]);return t}}J.abiName="__struct";(function(r){const e=Symbol("FieldsOwner");function t(i){return function(a){return a.abiName=i,a}}r.type=t;function n(i,a={}){return(o,s)=>{const c=o.constructor;c.abiFields?c.abiFields[e]!==c&&(c.abiBase=c.abiFields[e],c.abiFields=[],c.abiFields[e]=c):(c.abiFields=[],c.abiFields[e]=c),c.abiFields.push({...a,name:s,type:i})}}r.field=n})(J||(J={}));function Gd(r){return function(e){return e.abiAlias={type:Object.getPrototypeOf(e.prototype).constructor},e.abiName=r,e}}class ai{static from(e){return e[El]?new this(e):ht(e,this)?e:zo({object:e,type:this})}constructor(e){const t=this.constructor.abiVariant;this.value=e[1];const n=t.map(sv).findIndex(i=>i===e[0]);if(0>n||t.length<=n)throw new Error(`Unknown variant ${e[0]}`);this.variantIdx=n}equals(e){const n=this.constructor.from(e);return this.variantIdx!==n.variantIdx?!1:Ba({object:this}).equals(Ba({object:n}))}get variantName(){const e=this.constructor.abiVariant[this.variantIdx];return sv(e)}toJSON(){return[this.variantName,this.value]}}ai.abiName="__variant";ai.abiVariant=[];(function(r){function e(t,n){return function(i){return i.abiName=t,i.abiVariant=n.map(qI),i}}r.type=e})(ai||(ai={}));class D0{static from(e){return ht(e,this)?e:(typeof e=="string"?e=Number.parseFloat(e):ht(e,D0)&&(e=e.value),new this(e))}static fromABI(e){return new this(e.readFloat(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){const e=ib(this.byteWidth),t=new Sd(e);return this.fromABI(t)}constructor(e){this.value=e}equals(e){const t=this.constructor;return this.value===t.from(e).value}toABI(e){const t=this.constructor;e.writeFloat(this.value,t.byteWidth)}toString(){return this.value.toString()}toJSON(){return this.toString()}}D0.abiName="__float";class F8 extends D0{toString(){return this.value.toFixed(7)}}F8.abiName="float32";F8.byteWidth=4;class P0 extends D0{}P0.abiName="float64";P0.byteWidth=8;class lb{static from(e){return ht(e,this)?e:(typeof e=="string"&&e.startsWith("0x")&&(e=e.slice(2)),new this(lt.from(e)))}static fromABI(e){return new this(new lt(e.readArray(this.byteWidth)))}static random(){const e=ib(16),t=new Sd(e);return this.fromABI(t)}constructor(e){if(e.array.length!==16)throw new Error("Invalid float128");this.data=e}equals(e){const t=this.constructor;return this.data.equals(t.from(e).data)}toABI(e){e.writeArray(this.data.array)}toString(){return"0x"+this.data.hexString}toJSON(){return this.toString()}}lb.abiName="float128";lb.byteWidth=16;class Xe{get rawValue(){return this.value}static from(e){if(ht(e,Xe))return e;if(typeof e=="string")return new Xe(Xz(e));if(ht(e,Or))return new Xe(e);throw new Error("Invalid name")}static fromABI(e){return new Xe(Or.fromABI(e))}static abiDefault(){return new this(Or.from(0))}constructor(e){this.value=e}equals(e){return this.value.equals(Xe.from(e).value)}toString(){return eV(this.value)}toABI(e){this.value.toABI(e)}toJSON(){return this.toString()}}Xe.abiName="name";Xe.pattern=/^[a-z1-5.]{0,13}$/;function Xz(r){function e(i){return i>=97&&i<=122?i-97+6:i>=49&&i<=53?i-49+1:0}const t=new Uint8Array(8);let n=63;for(let i=0;i<r.length;++i){let a=e(r.charCodeAt(i));n<5&&(a=a<<1);for(let o=4;o>=0;--o)n>=0&&(t[Math.floor(n/8)]|=(a>>o&1)<<n%8,--n)}return Or.from(t)}function eV(r){const e=r.value.toArray("le",8);let t="";for(let n=63;n>=0;){let i=0;for(let a=0;a<5;++a)n>=0&&(i=i<<1|e[Math.floor(n/8)]>>n%8&1,--n);i>=6?t+=String.fromCharCode(i+97-6):i>=1?t+=String.fromCharCode(i+49-1):t+="."}for(;t.endsWith(".");)t=t.substr(0,t.length-1);return t}class Wd{static from(e){return ht(e,this)?e:ht(e,Wd)?this.fromMilliseconds(e.toMilliseconds()):ht(e,Date)?this.fromDate(e):typeof e=="string"?this.fromString(e):this.fromInteger(e)}static fromString(e){const t=Date.parse(e+"Z");if(!Number.isFinite(t))throw new Error("Invalid date string");return this.fromMilliseconds(t)}static fromDate(e){return this.fromMilliseconds(e.getTime())}static abiDefault(){return this.from(0)}toABI(e){this.value.toABI(e)}equals(e){const t=this.constructor;return this.toMilliseconds()===t.from(e).toMilliseconds()}toMilliseconds(){throw new Error("Not implemented")}toDate(){return new Date(this.toMilliseconds())}toJSON(){return this.toString()}}Wd.abiName="__time_point_base";class zI extends Wd{static fromMilliseconds(e){return new this(wi.from(Math.round(e*1e3)))}static fromInteger(e){return new this(wi.from(e))}static fromABI(e){return new this(wi.fromABI(e))}constructor(e){super(),this.value=e}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.dividing(1e3,"round"))}}zI.abiName="time_point";class Vo extends Wd{static fromMilliseconds(e){return new this(Er.from(Math.round(e/1e3)))}static fromInteger(e){return new this(Er.from(e))}static fromABI(e){return new this(Er.fromABI(e))}constructor(e){super(),this.value=e}toString(){return this.toDate().toISOString().slice(0,-5)}toMilliseconds(){return Number(this.value.cast(Or).multiplying(1e3))}}Vo.abiName="time_point_sec";class fb extends Wd{static fromMilliseconds(e){return new this(Er.from(Math.round((e-9466848e5)/500)))}static fromInteger(e){return new this(Er.from(e))}static fromABI(e){return new this(Er.fromABI(e))}constructor(e){super(),this.value=e}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.cast(Or).multiplying(500).adding(9466848e5))}}fb.abiName="block_timestamp_type";class Yr{static from(e,t){if(ht(e,Yr))return e;switch(typeof e){case"number":if(!t)throw new Error("Symbol is required when creating Asset from number");return this.fromFloat(e,t);case"string":return this.fromString(e);default:throw new Error("Invalid asset")}}static fromString(e){const t=(typeof e=="string"?e:"").split(" ");if(t.length!==2)throw new Error("Invalid asset string");const n=t[0].replace(".",""),i=(t[0].split(".")[1]||"").length,a=Yr.Symbol.fromParts(t[1],i);return new Yr(wi.from(n),a)}static fromFloat(e,t){const n=Yr.Symbol.from(t);return new Yr(n.convertFloat(e),n)}static fromUnits(e,t){return new Yr(wi.from(e),Yr.Symbol.from(t))}static fromABI(e){const t=wi.fromABI(e),n=Yr.Symbol.fromABI(e);return new Yr(t,n)}static abiDefault(){return new this(wi.from(0),Yr.Symbol.abiDefault())}static formatUnits(e,t){const n=wi.from(e).toString().split("");let i=!1;for(n[0]==="-"&&(i=!0,n.shift());n.length<=t;)n.unshift("0");t>0&&n.splice(n.length-t,0,".");let a=n.join("");return i&&(a="-"+a),a}constructor(e,t){this.units=e,this.symbol=t}equals(e){const{symbol:t,units:n}=Yr.from(e);return this.symbol.value.equals(t.value)&&this.units.equals(n)}get value(){return this.symbol.convertUnits(this.units)}set value(e){this.units=this.symbol.convertFloat(e)}get quantity(){return Yr.formatUnits(this.units,this.symbol.precision)}toABI(e){this.units.toABI(e),this.symbol.toABI(e)}toString(){return this.quantity+" "+this.symbol.name}toJSON(){return this.toString()}}Yr.abiName="asset";(function(r){class e{static from(i){if(ht(i,e))return i;if(ht(i,Or))return new e(i);const a=i.split(",");if(a.length!==2&&i!=="0,")throw new Error("Invalid symbol string");i==="0,"&&a.push("");const o=Number.parseInt(a[0]);return e.fromParts(a[1],o)}static fromParts(i,a){return new e(tV(i,a))}static fromABI(i){return new e(Or.fromABI(i))}static abiDefault(){return this.from("4,SYS")}constructor(i){if(R9(i)>e.maxPrecision)throw new Error("Invalid asset symbol, precision too large");if(!i.equals(0)&&!t.pattern.test(q_(i)))throw new Error("Invalid asset symbol, name must be uppercase A-Z");this.value=i}equals(i){return this.value.equals(e.from(i).value)}get name(){return q_(this.value)}get precision(){return R9(this.value)}get code(){return new t(Or.from(this.value.value.clone().iushrn(8)))}toABI(i){this.value.toABI(i)}convertUnits(i){return i.value.toNumber()/Math.pow(10,this.precision)}convertFloat(i){return wi.from(i.toFixed(this.precision).replace(".",""))}toString(){return`${this.precision},${this.name}`}toJSON(){return this.toString()}}e.abiName="symbol",e.maxPrecision=18,r.Symbol=e;class t{static from(i){return ht(i,t)?i:(typeof i=="string"&&(i=Or.from(HI(i))),new this(Or.from(i)))}static fromABI(i){return new t(Or.fromABI(i))}static abiDefault(){return this.from("SYS")}constructor(i){if(!i.equals(0)&&!t.pattern.test(q_(i)))throw new Error("Invalid asset symbol, name must be uppercase A-Z");this.value=i}equals(i){return this.value.equals(t.from(i).value)}toABI(i){this.value.toABI(i)}toString(){return VI(this.value.value.toArray("be"))}toJSON(){return this.toString()}}t.abiName="symbol_code",t.pattern=/^[A-Z]{0,7}$/,r.SymbolCode=t})(Yr||(Yr={}));class zp{static from(e){return ht(e,zp)?e:new this(Yr.from(e.quantity),Xe.from(e.contract))}static fromABI(e){return new zp(Yr.fromABI(e),Xe.fromABI(e))}constructor(e,t){this.quantity=e,this.contract=t}equals(e){return this.quantity.equals(e.quantity)&&this.contract.equals(e.contract)}toABI(e){this.quantity.toABI(e),this.contract.toABI(e)}toJSON(){return{quantity:this.quantity,contract:this.contract}}}zp.abiName="extended_asset";function R9(r){return r.value.and(Or.from(255).value).toNumber()}function q_(r){const e=r.value.toArray("be").slice(0,-1);return VI(e)}function VI(r){return r.map(e=>String.fromCharCode(e)).reverse().join("")}function tV(r,e){const t=HI(r),n=new Uint8Array(t.length+1);return n[0]=e,n.set(t,1),Or.from(n)}function HI(r){const e=Math.min(r.length,7),t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r.charCodeAt(n);return t}var ji;(function(r){let e;(function(b){b.E_CHECKSUM="E_CHECKSUM",b.E_INVALID="E_INVALID"})(e=r.ErrorCode||(r.ErrorCode={}));class t extends Error{constructor(v,E,x={}){super(v),this.code=E,this.info=x}}t.__className="DecodingError",r.DecodingError=t;const n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i=new Int16Array(255).fill(-1);for(let b=0;b<58;++b)i[n.charCodeAt(b)]=b;function a(b,v){if(v==null)return h(b);const E=new Uint8Array(v);for(let x=0;x<b.length;++x){let D=i[b.charCodeAt(x)];if(D<0)throw new t("Invalid Base58 character encountered",e.E_INVALID,{char:b[x]});for(let N=0;N<v;++N){const B=E[N]*58+D;E[N]=B,D=B>>8}if(D)throw new t("Base58 value is out of range",e.E_INVALID)}return E.reverse(),new lt(E)}r.decode=a;function o(b,v){const E=a(b,v!=null?v+4:v),x=E.array.subarray(0,-4),D=E.array.subarray(-4),N=m(x);if(!Ad(D,N))throw new t("Checksum mismatch",e.E_CHECKSUM,{actual:N,expected:D,data:x,hash:"double_sha256"});return new lt(x)}r.decodeCheck=o;function s(b,v,E){const x=a(b,v!=null?v+4:v),D=x.array.subarray(0,-4),N=x.array.subarray(-4),B=y(D,E);if(!Ad(N,B))throw new t("Checksum mismatch",e.E_CHECKSUM,{actual:B,expected:N,data:D,hash:"ripemd160"});return new lt(D)}r.decodeRipemd160Check=s;function c(b){b=lt.from(b);const v=[];for(const E of b.array){let x=E;for(let D=0;D<v.length;++D){const N=(i[v[D]]<<8)+x;v[D]=n.charCodeAt(N%58),x=N/58|0}for(;x;)v.push(n.charCodeAt(x%58)),x=x/58|0}for(const E of b.array){if(E)break;v.push(49)}return v.reverse(),String.fromCharCode(...v)}r.encode=c;function l(b){return b=lt.from(b),b=b.appending(m(b.array)),c(b)}r.encodeCheck=l;function d(b,v){return b=lt.from(b),b=b.appending(y(b.array,v)),c(b)}r.encodeRipemd160Check=d;function h(b){const v=[];for(let E=0;E<b.length;++E){let x=i[b.charCodeAt(E)];if(x<0)throw new t("Invalid Base58 character encountered",e.E_INVALID,{char:b[E]});for(let D=0;D<v.length;++D){const N=v[D]*58+x;v[D]=N&255,x=N>>8}x&&v.push(x)}for(const E of b)if(E==="1")v.push(0);else break;return v.reverse(),lt.from(v)}function y(b,v){const E=hd.ripemd160().update(b);return v&&E.update(v),new Uint8Array(E.digest().slice(0,4))}function m(b){const v=hd.sha256().update(b).digest(),E=hd.sha256().update(v).digest();return new Uint8Array(E.slice(0,4))}})(ji||(ji={}));class Fn{static from(e){if(ht(e,Fn))return e;if(typeof e=="object"&&e.type&&e.compressed)return new Fn(_t.from(e.type),new lt(e.compressed));if(typeof e!="string")throw new Error("Invalid public key");if(e.startsWith("PUB_")){const t=e.split("_");if(t.length!==3)throw new Error("Invalid public key string");const n=_t.from(t[1]),i=n===_t.K1||n===_t.R1?33:void 0,a=ji.decodeRipemd160Check(t[2],i,n);return new Fn(n,a)}else if(e.length>=50){const t=ji.decodeRipemd160Check(e.slice(-50));return new Fn(_t.K1,t)}else throw new Error("Invalid public key string")}static fromABI(e){const t=_t.from(e.readByte());if(t==_t.WA){const n=e.getPosition();e.advance(33),e.advance(1),e.advance(e.readVaruint32());const i=e.getPosition()-n;e.setPosition(n);const a=lt.from(e.readArray(i));return new Fn(_t.WA,a)}return new Fn(t,new lt(e.readArray(33)))}constructor(e,t){this.type=e,this.data=t}getCompressedKeyBytes(){return this.type===_t.WA?this.data.array.slice(0,33):this.data.array}equals(e){const t=Fn.from(e);return this.type===t.type&&this.data.equals(t.data)}toLegacyString(e="EOS"){if(this.type!==_t.K1)throw new Error("Unable to create legacy formatted string for non-K1 key");return`${e}${ji.encodeRipemd160Check(this.data)}`}toString(){return`PUB_${this.type}_${ji.encodeRipemd160Check(this.data,this.type)}`}toABI(e){e.writeByte(_t.indexFor(this.type)),e.writeArray(this.data.array)}toJSON(){return this.toString()}}Fn.abiName="public_key";const vm={};function Zd(r){let e=vm[r];if(!e)if(r==="K1")e=vm[r]=new x_.ec("secp256k1");else if(r==="R1")e=vm[r]=new x_.ec("p256");else if(r==="WA")e=vm[r]=new x_.ec("p256");else throw new Error(`Unknown curve type: ${r}`);return e}function rV(r,e,t){if(t===_t.WA)throw new Error("can't recover webauthn public keys, please use @wharfkit/webauthn.");const n=Zd(t),i=r[0]-31,a=r.subarray(1,33),o=r.subarray(33,65),s=n.recoverPubKey(e,{r:a,s:o},i);return new Uint8Array(s.encodeCompressed())}function nV(r,e,t,n){const i=Zd(n),a=r.subarray(1,33),o=r.subarray(33,65);return i.verify(e,{r:a,s:o},t)}let Yd=class Qc{static from(e){if(ht(e,Qc))return e;if(typeof e=="object"&&e.r&&e.s){const t=new Uint8Array(65);let n=e.recid;const i=_t.from(e.type);return(e.type===_t.K1||e.type===_t.R1)&&(n+=31),t[0]=n,t.set(e.r,1),t.set(e.s,33),new Qc(i,new lt(t))}if(typeof e!="string")throw new Error("Invalid signature");if(e.startsWith("SIG_")){const t=e.split("_");if(t.length!==3)throw new Error("Invalid signature string");const n=_t.from(t[1]),i=n===_t.K1||n===_t.R1?65:void 0,a=ji.decodeRipemd160Check(t[2],i,n);return new Qc(n,a)}else throw new Error("Invalid signature string")}static fromABI(e){const t=_t.from(e.readByte());if(t===_t.WA){const n=e.getPosition();e.advance(65),e.advance(e.readVaruint32()),e.advance(e.readVaruint32());const i=e.getPosition()-n;e.setPosition(n);const a=lt.from(e.readArray(i));return new Qc(_t.WA,a)}return new Qc(t,new lt(e.readArray(65)))}constructor(e,t){this.type=e,this.data=t}equals(e){const t=Qc.from(e);return this.type===t.type&&this.data.equals(t.data)}recoverDigest(e){e=$t.from(e);const t=rV(this.data.array,e.array,this.type);return Fn.from({compressed:t,type:this.type})}recoverMessage(e){return this.recoverDigest($t.hash(e))}verifyDigest(e,t){return e=$t.from(e),nV(this.data.array,e.array,t.getCompressedKeyBytes(),this.type)}verifyMessage(e,t){return this.verifyDigest($t.hash(e),t)}toString(){return`SIG_${this.type}_${ji.encodeRipemd160Check(this.data,this.type)}`}toABI(e){e.writeByte(_t.indexFor(this.type)),e.writeArray(this.data.array)}toJSON(){return this.toString()}};Yd.abiName="signature";function iV(r,e){const i=Zd(e).keyFromPrivate(r).getPublic();return new Uint8Array(i.encodeCompressed())}function aV(r,e,t){const n=Zd(t),i=n.keyFromPrivate(r),a=n.keyFromPublic(e).getPublic();return i.derive(a).toArrayLike(Uint8Array,"be")}function sV(r,e,t){const i=Zd(t).keyFromPrivate(r);let a,o,s;if(t==="K1"){let c=1;do a=i.sign(e,{canonical:!0,pers:[c++]}),o=a.r.toArrayLike(Uint8Array,"be",32),s=a.s.toArrayLike(Uint8Array,"be",32);while(!oV(o,s))}else a=i.sign(e,{canonical:!0}),o=a.r.toArrayLike(Uint8Array,"be",32),s=a.s.toArrayLike(Uint8Array,"be",32);return{type:t,r:o,s,recid:a.recoveryParam||0}}function oV(r,e){return!(r[0]&128)&&!(r[0]===0&&!(r[1]&128))&&!(e[0]&128)&&!(e[0]===0&&!(e[1]&128))}function uV(r){return Zd(r).genKeyPair().getPrivate().toArrayLike(Uint8Array,"be",32)}let KI=class vx{static from(e){return ht(e,vx)?e:this.fromString(e)}static fromString(e,t=!1){try{const{type:n,data:i}=cV(e);if(this.isAllZero(i))throw new Error("Invalid private key: All-zero private key is not allowed");return new this(n,i)}catch(n){if(n.message=`Invalid private key (${n.message})`,t&&ht(n,ji.DecodingError)&&n.code===ji.ErrorCode.E_CHECKSUM){const i=e.startsWith("PVT_R1")?_t.R1:_t.K1,a=new lt(n.info.data);if(a.length===33&&a.dropFirst(),a.zeropad(32,!0),this.isAllZero(a))throw new Error("Invalid private key: All-zero private key is not allowed");return new this(i,a)}throw n}}static generate(e){const t=_t.from(e),n=3;let i=0,a;do{if(i>=n)throw new Error("Failed to generate valid private key: Maximum retries exceeded");a=new lt(uV(t)),i++}while(this.isAllZero(a));return new vx(t,a)}constructor(e,t){if((e===_t.K1||e===_t.R1)&&t.length!==32)throw new Error("Invalid private key length");this.type=e,this.data=t}signDigest(e){return e=$t.from(e),Yd.from(sV(this.data.array,e.array,this.type))}signMessage(e){return this.signDigest($t.hash(e))}sharedSecret(e){const t=aV(this.data.array,e.data.array,this.type);return Kd.hash(t)}toPublic(){const e=iV(this.data.array,this.type);return Fn.from({compressed:e,type:this.type})}toWif(){if(this.type!==_t.K1)throw new Error("Unable to generate WIF for non-k1 key");return ji.encodeCheck(lt.from([128]).appending(this.data))}static isAllZero(e){return e.array.every(t=>t===0)}toString(){return`PVT_${this.type}_${ji.encodeRipemd160Check(this.data,this.type)}`}toJSON(){return this.toString()}};function cV(r){const e=typeof r;if(e!=="string")throw new Error(`Expected string, got ${e}`);if(r.startsWith("PVT_")){const t=r.split("_");if(t.length!==3)throw new Error("Invalid PVT format");const n=_t.from(t[1]);let i;switch(n){case _t.K1:case _t.R1:i=32;break}const a=ji.decodeRipemd160Check(t[2],i,n);return{type:n,data:a}}else{const t=_t.K1,n=ji.decodeCheck(r);if(n.array[0]!==128)throw new Error("Invalid WIF");return{type:t,data:n.droppingFirst()}}}var bx;let Vn=bx=class extends J{static from(e){if(typeof e=="string"){const t=e.split("@");if(t.length!==2&&t[0].length>0&&t[1].length>0)throw new Error("Invalid permission level string, should be in the format <actor>@<permission>");e={actor:t[0],permission:t[1]}}return super.from(e)}equals(e){const t=bx.from(e);return this.actor.equals(t.actor)&&this.permission.equals(t.permission)}toString(){return`${this.actor}@${this.permission}`}};re([J.field("name")],Vn.prototype,"actor",void 0);re([J.field("name")],Vn.prototype,"permission",void 0);Vn=bx=re([J.type("permission_level")],Vn);var wx;let Cr=wx=class extends J{static from(e,t){let n={...e};const i=n.data;if(!lt.isBytes(i)){let o;if(t){if(o=Ut.from(t).getActionType(n.name),!o)throw new Error(`The action "${n.name}" does not exist on the ABI provided.`)}else if(!i.constructor||i.constructor.abiName===void 0)throw new Error("Missing ABI definition when creating action with untyped action data");n={...n,data:Ba({object:i,type:o,abi:t})}}const a=super.from(n);if(t)a.abi=Ut.from(t);else{const o=ov(i);o&&(a.abi=Ut.from({...cb(o).abi,actions:[{name:a.name,type:o.abiName,ricardian_contract:""}]}))}return a}equals(e){const t=wx.from(e,this.abi);return this.account.equals(t.account)&&this.name.equals(t.name)&&Kz(this.authorization,t.authorization)&&this.data.equals(t.data)}decodeData(e){if(typeof e=="string"||e.abiName)return zo({data:this.data,type:e});{const t=Ut.from(e),n=t.getActionType(this.name);if(!n)throw new Error(`Action ${this.name} does not exist in provided ABI`);return zo({data:this.data,type:n,abi:t})}}get decoded(){if(!this.abi)throw new Error("Missing ABI definition when decoding action data");return{...this.toJSON(),data:this.decodeData(this.abi)}}};re([J.field("name")],Cr.prototype,"account",void 0);re([J.field("name")],Cr.prototype,"name",void 0);re([J.field(Vn,{array:!0})],Cr.prototype,"authorization",void 0);re([J.field("bytes")],Cr.prototype,"data",void 0);Cr=wx=re([J.type("action")],Cr);var _x;let Vp=class extends J{};re([J.field("uint16")],Vp.prototype,"type",void 0);re([J.field("bytes")],Vp.prototype,"data",void 0);Vp=re([J.type("transaction_extension")],Vp);let Fs=class extends J{static from(e){return super.from({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,...e})}};re([J.field("time_point_sec")],Fs.prototype,"expiration",void 0);re([J.field("uint16")],Fs.prototype,"ref_block_num",void 0);re([J.field("uint32")],Fs.prototype,"ref_block_prefix",void 0);re([J.field("varuint32")],Fs.prototype,"max_net_usage_words",void 0);re([J.field("uint8")],Fs.prototype,"max_cpu_usage_ms",void 0);re([J.field("varuint32")],Fs.prototype,"delay_sec",void 0);Fs=re([J.type("transaction_header")],Fs);let cn=_x=class extends Fs{static from(e,t){const n=c=>{if(t)return Array.isArray(t)?t.filter(l=>Xe.from(l.contract).equals(c)).map(({abi:l})=>l)[0]:t},i=c=>c instanceof Cr?c:Cr.from(c,n(c.account)),a=(e.actions||[]).map(i),o=(e.context_free_actions||[]).map(i),s={transaction_extensions:[],...e,context_free_actions:o,actions:a};return super.from(s)}equals(e){const t=_x.from(e);return this.id.equals(t.id)}get id(){return $t.hash(Ba({object:this}))}signingDigest(e){const t=this.signingData(e);return $t.hash(t)}signingData(e){let t=lt.from($t.from(e).array);return t=t.appending(Ba({object:this})),t=t.appending(new Uint8Array(32)),t}};re([J.field(Cr,{array:!0})],cn.prototype,"context_free_actions",void 0);re([J.field(Cr,{array:!0})],cn.prototype,"actions",void 0);re([J.field(Vp,{array:!0})],cn.prototype,"transaction_extensions",void 0);cn=_x=re([J.type("transaction")],cn);let os=class extends cn{get transaction(){return cn.from({...this,signatures:void 0,context_free_data:void 0})}get id(){return this.transaction.id}static from(e){return super.from({signatures:[],context_free_data:[],...e})}};re([J.field("signature[]")],os.prototype,"signatures",void 0);re([J.field("bytes[]")],os.prototype,"context_free_data",void 0);os=re([J.type("signed_transaction")],os);var td;(function(r){r[r.none=0]="none",r[r.zlib=1]="zlib"})(td||(td={}));let An=class extends J{static from(e){return super.from({signatures:[],packed_context_free_data:"",compression:0,...e})}static fromSigned(e,t=1){let n=Ba({object:cn.from(e)}),i=Ba({object:e.context_free_data,type:"bytes[]"});switch(t){case td.zlib:{n=z1.deflate(n.array),i=z1.deflate(i.array);break}case td.none:break}return this.from({compression:t,signatures:e.signatures,packed_context_free_data:i,packed_trx:n})}getTransaction(){switch(Number(this.compression)){case td.none:return zo({data:this.packed_trx,type:cn});case td.zlib:{const e=z1.inflate(this.packed_trx.array);return zo({data:e,type:cn})}default:throw new Error(`Unknown transaction compression ${this.compression}`)}}getSignedTransaction(){const e=this.getTransaction();return os.from({...e,signatures:this.signatures})}};re([J.field("signature[]")],An.prototype,"signatures",void 0);re([J.field("uint8")],An.prototype,"compression",void 0);re([J.field("bytes")],An.prototype,"packed_context_free_data",void 0);re([J.field("bytes")],An.prototype,"packed_trx",void 0);An=re([J.type("packed_transaction")],An);let xl=class extends J{};re([J.field("string")],xl.prototype,"status",void 0);re([J.field("uint32")],xl.prototype,"cpu_usage_us",void 0);re([J.field("uint32")],xl.prototype,"net_usage_words",void 0);xl=re([J.type("transaction_receipt")],xl);var Ex;let Md=class extends wl{};Md=re([Gd("weight_type")],Md);let Td=class extends J{};re([J.field(Fn)],Td.prototype,"key",void 0);re([J.field(Md)],Td.prototype,"weight",void 0);Td=re([J.type("key_weight")],Td);let Hp=class extends J{};re([J.field(Vn)],Hp.prototype,"permission",void 0);re([J.field(Md)],Hp.prototype,"weight",void 0);Hp=re([J.type("permission_level_weight")],Hp);let Kp=class extends J{};re([J.field(Er)],Kp.prototype,"wait_sec",void 0);re([J.field(Md)],Kp.prototype,"weight",void 0);Kp=re([J.type("wait_weight")],Kp);let lc=Ex=class extends J{static from(e){if(ht(e,Ex))return e;const t=super.from({keys:[],accounts:[],waits:[],...e});return t.sort(),t}get waitThreshold(){return this.waits.reduce((e,t)=>e+t.weight.toNumber(),0)}get keyThreshold(){return this.threshold.toNumber()-this.waitThreshold}keyWeight(e){const t=this.keys.find(({key:n})=>n.equals(e));return t?t.weight.toNumber():0}hasPermission(e,t=!1){const n=t?1:this.keyThreshold;return this.keyWeight(e)>=n}sort(){this.keys.sort((e,t)=>String(e.key).localeCompare(String(t.key))),this.accounts.sort((e,t)=>String(e.permission).localeCompare(String(t.permission))),this.waits.sort((e,t)=>String(e.wait_sec).localeCompare(String(t.wait_sec)))}};re([J.field(Er)],lc.prototype,"threshold",void 0);re([J.field(Td,{array:!0})],lc.prototype,"keys",void 0);re([J.field(Hp,{array:!0})],lc.prototype,"accounts",void 0);re([J.field(Kp,{array:!0})],lc.prototype,"waits",void 0);lc=Ex=re([J.type("authority")],lc);class Nr{static from(e){return ht(e,this)?e:lt.isBytes(e)?new this(lt.from(e).array):this.fromBlockChecksum(e.checksum,e.blockNum)}static fromABI(e){return new this(e.readArray(32))}static fromBlockChecksum(e,t){const n=new Nr($t.from(e).array),i=new Uint8Array(4);return i[0]=Number(t)>>24&255,i[1]=Number(t)>>16&255,i[2]=Number(t)>>8&255,i[3]=Number(t)&255,n.array.set(i,0),n}constructor(e){if(e.byteLength!==32)throw new Error(`BlockId size mismatch, expected 32 bytes got ${e.byteLength}`);this.array=e}equals(e){const t=this.constructor;try{return Ad(this.array,t.from(e).array)}catch{return!1}}toABI(e){e.writeArray(this.array)}toString(){return this.hexString}toJSON(){return this.toString()}get hexString(){return q8(this.array)}get blockNum(){const e=this.array.slice(0,4);let t=0;for(let n=0;n<4;n++)t=(t<<8)+e[n];return Er.from(t)}}Nr.abiName="block_id_type";var Zt;(function(r){r.encode=Ba,r.decode=zo;function e(i){return cb(i).abi}r.synthesize=e;function t(i){return JSON.stringify(i)}r.stringify=t;function n(i){const a=o=>{switch(typeof o){case"boolean":case"number":case"string":return o;case"object":{if(o===null)return o;if(typeof o.toJSON=="function")return a(o.toJSON());if(Array.isArray(o))return o.map(a);const s={};for(const c of Object.keys(o))s[c]=a(o[c]);return s}}};return a(i)}r.objectify=n})(Zt||(Zt={}));class Gp{constructor(e,t={}){if(this.headers={},e=e.trim(),e.endsWith("/")&&(e=e.slice(0,-1)),this.url=e,t.headers&&(this.headers=t.headers),t.fetch)this.fetch=t.fetch;else if(typeof window<"u"&&window.fetch)this.fetch=window.fetch.bind(window);else if(typeof globalThis<"u"&&globalThis.fetch)this.fetch=globalThis.fetch.bind(globalThis);else throw new Error("Missing fetch")}async call(e){const t=this.url+e.path,n=e.params!==void 0?JSON.stringify(e.params):void 0,i={...this.headers,...e.headers},a=await this.fetch(t,{method:e.method||"POST",body:n,headers:i}),o=await a.text();let s;try{s=JSON.parse(o)}catch{}const c={};for(const[l,d]of a.headers.entries())c[l]=d;return{headers:c,status:a.status,json:s,text:o}}}let Wp=class extends J{};re([J.field("name")],Wp.prototype,"account",void 0);re([J.field("name",{optional:!0})],Wp.prototype,"action",void 0);Wp=re([J.type("account_linked_action")],Wp);let Al=class extends J{};re([J.field("name")],Al.prototype,"perm_name",void 0);re([J.field("name")],Al.prototype,"parent",void 0);re([J.field(lc)],Al.prototype,"required_auth",void 0);re([J.field(Wp,{optional:!0,array:!0})],Al.prototype,"linked_actions",void 0);Al=re([J.type("account_permission")],Al);let zs=class extends J{};re([J.field("int64")],zs.prototype,"used",void 0);re([J.field("int64")],zs.prototype,"available",void 0);re([J.field("int64")],zs.prototype,"max",void 0);re([J.field("time_point",{optional:!0})],zs.prototype,"last_usage_update_time",void 0);re([J.field("int64",{optional:!0})],zs.prototype,"current_used",void 0);zs=re([J.type("account_resource_limit")],zs);let Sl=class extends J{};re([J.field("name")],Sl.prototype,"owner",void 0);re([J.field("asset")],Sl.prototype,"net_weight",void 0);re([J.field("asset")],Sl.prototype,"cpu_weight",void 0);re([J.field("uint64")],Sl.prototype,"ram_bytes",void 0);Sl=re([J.type("account_total_resources")],Sl);let Ml=class extends J{};re([J.field("name")],Ml.prototype,"from",void 0);re([J.field("name")],Ml.prototype,"to",void 0);re([J.field("asset")],Ml.prototype,"net_weight",void 0);re([J.field("asset")],Ml.prototype,"cpu_weight",void 0);Ml=re([J.type("account_self_delegated_bandwidth")],Ml);let Tl=class extends J{};re([J.field("name")],Tl.prototype,"owner",void 0);re([J.field("time_point")],Tl.prototype,"request_time",void 0);re([J.field("asset")],Tl.prototype,"net_amount",void 0);re([J.field("asset")],Tl.prototype,"cpu_amount",void 0);Tl=re([J.type("account_refund_request")],Tl);let ca=class extends J{};re([J.field("name")],ca.prototype,"owner",void 0);re([J.field("name")],ca.prototype,"proxy",void 0);re([J.field("name",{array:!0})],ca.prototype,"producers",void 0);re([J.field("int64",{optional:!0})],ca.prototype,"staked",void 0);re([J.field("float64")],ca.prototype,"last_vote_weight",void 0);re([J.field("float64")],ca.prototype,"proxied_vote_weight",void 0);re([J.field("bool")],ca.prototype,"is_proxy",void 0);re([J.field("uint32",{optional:!0})],ca.prototype,"flags1",void 0);re([J.field("uint32")],ca.prototype,"reserved2",void 0);re([J.field("string")],ca.prototype,"reserved3",void 0);ca=re([J.type("account_voter_info")],ca);let Rl=class extends J{};re([J.field("time_point",{optional:!0})],Rl.prototype,"key",void 0);re([J.field("int64",{optional:!0})],Rl.prototype,"value",void 0);re([J.field("time_point",{optional:!0})],Rl.prototype,"first",void 0);re([J.field("int64",{optional:!0})],Rl.prototype,"second",void 0);Rl=re([J.type("account_rex_info_maturities")],Rl);let Ho=class extends J{};re([J.field("uint32")],Ho.prototype,"version",void 0);re([J.field("name")],Ho.prototype,"owner",void 0);re([J.field("asset")],Ho.prototype,"vote_stake",void 0);re([J.field("asset")],Ho.prototype,"rex_balance",void 0);re([J.field("int64")],Ho.prototype,"matured_rex",void 0);re([J.field(Rl,{array:!0})],Ho.prototype,"rex_maturities",void 0);Ho=re([J.type("account_rex_info")],Ho);let Ol=class extends J{};re([J.field("name")],Ol.prototype,"account_name",void 0);re([J.field("checksum256")],Ol.prototype,"code_hash",void 0);re([J.field("checksum256")],Ol.prototype,"abi_hash",void 0);re([J.field(L8)],Ol.prototype,"abi",void 0);Ol=re([J.type("get_raw_abi_response")],Ol);let Ur=class extends J{getPermission(e){const t=Xe.from(e),n=this.permissions.find(i=>i.perm_name.equals(t));if(!n)throw new Error(`Unknown permission ${t} on account ${this.account_name}.`);return n}};re([J.field("name")],Ur.prototype,"account_name",void 0);re([J.field("uint32")],Ur.prototype,"head_block_num",void 0);re([J.field("time_point")],Ur.prototype,"head_block_time",void 0);re([J.field("bool")],Ur.prototype,"privileged",void 0);re([J.field("time_point")],Ur.prototype,"last_code_update",void 0);re([J.field("time_point")],Ur.prototype,"created",void 0);re([J.field("asset?")],Ur.prototype,"core_liquid_balance",void 0);re([J.field("int64")],Ur.prototype,"ram_quota",void 0);re([J.field("int64")],Ur.prototype,"net_weight",void 0);re([J.field("int64")],Ur.prototype,"cpu_weight",void 0);re([J.field(zs)],Ur.prototype,"net_limit",void 0);re([J.field(zs)],Ur.prototype,"cpu_limit",void 0);re([J.field(zs,{optional:!0})],Ur.prototype,"subjective_cpu_bill_limit",void 0);re([J.field("uint64")],Ur.prototype,"ram_usage",void 0);re([J.field(Al,{array:!0})],Ur.prototype,"permissions",void 0);re([J.field(Sl,{optional:!0})],Ur.prototype,"total_resources",void 0);re([J.field(Ml,{optional:!0})],Ur.prototype,"self_delegated_bandwidth",void 0);re([J.field(Tl,{optional:!0})],Ur.prototype,"refund_request",void 0);re([J.field(ca,{optional:!0})],Ur.prototype,"voter_info",void 0);re([J.field(Ho,{optional:!0})],Ur.prototype,"rex_info",void 0);Ur=re([J.type("account_object")],Ur);let Ko=class extends J{};re([J.field(Xe)],Ko.prototype,"account_name",void 0);re([J.field(Xe)],Ko.prototype,"permission_name",void 0);re([J.field(Fn,{optional:!0})],Ko.prototype,"authorizing_key",void 0);re([J.field(Vn,{optional:!0})],Ko.prototype,"authorizing_account",void 0);re([J.field(Md)],Ko.prototype,"weight",void 0);re([J.field(Er)],Ko.prototype,"threshold",void 0);Ko=re([J.type("account_by_authorizers_row")],Ko);let uv=class extends J{};re([J.field(Ko,{array:!0})],uv.prototype,"accounts",void 0);uv=re([J.type("account_by_authorizers")],uv);let Zp=class extends J{};re([J.field("name")],Zp.prototype,"producer_name",void 0);re([J.field("public_key")],Zp.prototype,"block_signing_key",void 0);Zp=re([J.type("new_producers_entry")],Zp);let Yp=class extends J{};re([J.field("uint32")],Yp.prototype,"version",void 0);re([J.field(Zp,{array:!0})],Yp.prototype,"producers",void 0);Yp=re([J.type("new_producers")],Yp);let cv=class extends J{};re([J.field("uint16")],cv.prototype,"type",void 0);re([J.field("bytes")],cv.prototype,"data",void 0);cv=re([J.type("block_extension")],cv);let lv=class extends J{};re([J.field("uint16")],lv.prototype,"type",void 0);re([J.field("bytes")],lv.prototype,"data",void 0);lv=re([J.type("header_extension")],lv);let GI=class{static from(e){let t,n;return typeof e=="string"?(t=$t.from(e),n={}):(t=$t.from(e.id),n=e),new this(t,n)}constructor(e,t){this.id=e,this.extra=t}get transaction(){if(this.extra.packed_trx)switch(this.extra.compression){case"zlib":{const e=z1.inflate(lt.from(this.extra.packed_trx,"hex").array);return Zt.decode({data:e,type:cn})}case"none":return Zt.decode({data:this.extra.packed_trx,type:cn});default:throw new Error(`Unsupported compression type ${this.extra.compression}`)}}get signatures(){if(this.extra.signatures)return this.extra.signatures.map(Yd.from)}equals(e){return this.id.equals(e.id)}toJSON(){return this.id}};GI.abiName="trx_variant";let fv=class extends xl{get id(){return this.trx.id}};re([J.field(GI)],fv.prototype,"trx",void 0);fv=re([J.type("get_block_response_receipt")],fv);let mn=class extends J{};re([J.field("time_point")],mn.prototype,"timestamp",void 0);re([J.field("name")],mn.prototype,"producer",void 0);re([J.field("uint16")],mn.prototype,"confirmed",void 0);re([J.field(Nr)],mn.prototype,"previous",void 0);re([J.field("checksum256")],mn.prototype,"transaction_mroot",void 0);re([J.field("checksum256")],mn.prototype,"action_mroot",void 0);re([J.field("uint32")],mn.prototype,"schedule_version",void 0);re([J.field(Yp,{optional:!0})],mn.prototype,"new_producers",void 0);re([J.field("any",{optional:!0})],mn.prototype,"header_extensions",void 0);re([J.field("any",{optional:!0})],mn.prototype,"new_protocol_features",void 0);re([J.field("signature")],mn.prototype,"producer_signature",void 0);re([J.field(fv,{array:!0})],mn.prototype,"transactions",void 0);re([J.field("block_extension",{optional:!0})],mn.prototype,"block_extensions",void 0);re([J.field(Nr)],mn.prototype,"id",void 0);re([J.field("uint32")],mn.prototype,"block_num",void 0);re([J.field("uint32")],mn.prototype,"ref_block_prefix",void 0);mn=re([J.type("get_block_response")],mn);let xi=class extends J{};re([J.field("uint32")],xi.prototype,"block_num",void 0);re([J.field("uint32")],xi.prototype,"ref_block_num",void 0);re([J.field(Nr)],xi.prototype,"id",void 0);re([J.field("time_point")],xi.prototype,"timestamp",void 0);re([J.field("name")],xi.prototype,"producer",void 0);re([J.field("uint16")],xi.prototype,"confirmed",void 0);re([J.field(Nr)],xi.prototype,"previous",void 0);re([J.field("checksum256")],xi.prototype,"transaction_mroot",void 0);re([J.field("checksum256")],xi.prototype,"action_mroot",void 0);re([J.field("uint32")],xi.prototype,"schedule_version",void 0);re([J.field("signature")],xi.prototype,"producer_signature",void 0);re([J.field("uint32")],xi.prototype,"ref_block_prefix",void 0);xi=re([J.type("get_block_response")],xi);let Qp=class extends J{};re([J.field("name")],Qp.prototype,"producer_name",void 0);re([J.field("any")],Qp.prototype,"authority",void 0);Qp=re([J.type("active_schedule_producer_authority")],Qp);let Jp=class extends J{};re([J.field("name")],Jp.prototype,"producer_name",void 0);re([J.field(Qp)],Jp.prototype,"authority",void 0);Jp=re([J.type("active_schedule_producer")],Jp);let dv=class extends J{};re([J.field("uint32")],dv.prototype,"version",void 0);re([J.field(Jp,{array:!0})],dv.prototype,"producers",void 0);dv=re([J.type("active_schedule")],dv);let Ia=class extends J{};re([J.field("time_point")],Ia.prototype,"timestamp",void 0);re([J.field("name")],Ia.prototype,"producer",void 0);re([J.field("uint16")],Ia.prototype,"confirmed",void 0);re([J.field(Nr)],Ia.prototype,"previous",void 0);re([J.field("checksum256")],Ia.prototype,"transaction_mroot",void 0);re([J.field("checksum256")],Ia.prototype,"action_mroot",void 0);re([J.field("uint32")],Ia.prototype,"schedule_version",void 0);re([J.field("any",{array:!0,optional:!0})],Ia.prototype,"header_extensions",void 0);re([J.field("signature")],Ia.prototype,"producer_signature",void 0);Ia=re([J.type("block_state_header")],Ia);let Kn=class extends J{};re([J.field("uint32")],Kn.prototype,"block_num",void 0);re([J.field("uint32")],Kn.prototype,"dpos_proposed_irreversible_blocknum",void 0);re([J.field("uint32")],Kn.prototype,"dpos_irreversible_blocknum",void 0);re([J.field(Nr)],Kn.prototype,"id",void 0);re([J.field(Ia)],Kn.prototype,"header",void 0);re([J.field("any")],Kn.prototype,"active_schedule",void 0);re([J.field("any")],Kn.prototype,"blockroot_merkle",void 0);re([J.field("any")],Kn.prototype,"producer_to_last_produced",void 0);re([J.field("any")],Kn.prototype,"producer_to_last_implied_irb",void 0);re([J.field("any")],Kn.prototype,"valid_block_signing_authority",void 0);re([J.field("any")],Kn.prototype,"confirm_count",void 0);re([J.field("any")],Kn.prototype,"pending_schedule",void 0);re([J.field("any",{optional:!0})],Kn.prototype,"activated_protocol_features",void 0);re([J.field("any")],Kn.prototype,"additional_signatures",void 0);Kn=re([J.type("get_block_header_state_response")],Kn);let Rn=class extends J{getTransactionHeader(e=120){const t=Vo.fromMilliseconds(this.head_block_time.toMilliseconds()+e*1e3),i=this.last_irreversible_block_id.array.subarray(8,12),a=new Uint32Array(i.buffer,i.byteOffset,1)[0];return Fs.from({expiration:t,ref_block_num:Number(this.last_irreversible_block_num)&65535,ref_block_prefix:a})}};re([J.field("string")],Rn.prototype,"server_version",void 0);re([J.field("checksum256")],Rn.prototype,"chain_id",void 0);re([J.field("uint32")],Rn.prototype,"head_block_num",void 0);re([J.field("uint32")],Rn.prototype,"last_irreversible_block_num",void 0);re([J.field(Nr)],Rn.prototype,"last_irreversible_block_id",void 0);re([J.field(Nr)],Rn.prototype,"head_block_id",void 0);re([J.field("time_point")],Rn.prototype,"head_block_time",void 0);re([J.field("name")],Rn.prototype,"head_block_producer",void 0);re([J.field("uint64")],Rn.prototype,"virtual_block_cpu_limit",void 0);re([J.field("uint64")],Rn.prototype,"virtual_block_net_limit",void 0);re([J.field("uint64")],Rn.prototype,"block_cpu_limit",void 0);re([J.field("uint64")],Rn.prototype,"block_net_limit",void 0);re([J.field("string?")],Rn.prototype,"server_version_string",void 0);re([J.field("uint32?")],Rn.prototype,"fork_db_head_block_num",void 0);re([J.field("block_id_type?")],Rn.prototype,"fork_db_head_block_id",void 0);Rn=re([J.type("get_info_response")],Rn);let fc=class extends J{};re([J.field("name")],fc.prototype,"code",void 0);re([J.field("name")],fc.prototype,"scope",void 0);re([J.field("name")],fc.prototype,"table",void 0);re([J.field("name")],fc.prototype,"payer",void 0);re([J.field("uint32")],fc.prototype,"count",void 0);fc=re([J.type("get_table_by_scope_response_row")],fc);let Xp=class extends J{};re([J.field(fc,{array:!0})],Xp.prototype,"rows",void 0);re([J.field("string")],Xp.prototype,"more",void 0);Xp=re([J.type("get_table_by_scope_response")],Xp);let Go=class extends J{};re([J.field(Or)],Go.prototype,"global_action_seq",void 0);re([J.field(wi)],Go.prototype,"account_action_seq",void 0);re([J.field(Er)],Go.prototype,"block_num",void 0);re([J.field(fb)],Go.prototype,"block_time",void 0);re([J.field("any")],Go.prototype,"action_trace",void 0);re([J.field("boolean?")],Go.prototype,"irrevirsible",void 0);Go=re([J.type("ordered_action_result")],Go);let Cl=class extends J{};re([J.field(Go,{array:!0})],Cl.prototype,"actions",void 0);re([J.field(Fo)],Cl.prototype,"last_irreversible_block",void 0);re([J.field(Fo)],Cl.prototype,"head_block_num",void 0);re([J.field("boolean?")],Cl.prototype,"time_limit_exceeded_error",void 0);Cl=re([J.type("get_actions_response")],Cl);let O9=class extends J{};O9=re([J.type("transaction_trace")],O9);let Da=class extends J{};re([J.field("any")],Da.prototype,"actions",void 0);re([J.field("any")],Da.prototype,"context_free_actions",void 0);re([J.field("any")],Da.prototype,"context_free_data",void 0);re([J.field("number")],Da.prototype,"delay_sec",void 0);re([J.field("string")],Da.prototype,"expiration",void 0);re([J.field("number")],Da.prototype,"max_cpu_usage_ms",void 0);re([J.field("number")],Da.prototype,"max_net_usage_words",void 0);re([J.field("number")],Da.prototype,"ref_block_num",void 0);re([J.field("number")],Da.prototype,"ref_block_prefix",void 0);re([J.field("string",{array:!0})],Da.prototype,"signatures",void 0);Da=re([J.type("trx")],Da);let hv=class extends J{};re([J.field(xl)],hv.prototype,"receipt",void 0);re([J.field("trx")],hv.prototype,"trx",void 0);hv=re([J.type("transaction_info")],hv);let Wo=class extends J{};re([J.field($t)],Wo.prototype,"id",void 0);re([J.field(Er)],Wo.prototype,"block_num",void 0);re([J.field(fb)],Wo.prototype,"block_time",void 0);re([J.field(Er)],Wo.prototype,"last_irreversible_block",void 0);re([J.field("any?")],Wo.prototype,"traces",void 0);re([J.field("any")],Wo.prototype,"trx",void 0);Wo=re([J.type("get_transaction_response")],Wo);let pv=class extends J{};re([J.field("name",{array:!0})],pv.prototype,"account_names",void 0);pv=re([J.type("get_key_accounts_response")],pv);let dc=class extends J{};re([J.field(Ut)],dc.prototype,"abi",void 0);re([J.field("name")],dc.prototype,"account_name",void 0);re([J.field("checksum256")],dc.prototype,"code_hash",void 0);re([J.field("string")],dc.prototype,"wast",void 0);re([J.field("string")],dc.prototype,"wasm",void 0);dc=re([J.type("get_code_response")],dc);let yv=class extends J{};re([J.field("name",{array:!0})],yv.prototype,"controlled_accounts",void 0);yv=re([J.type("get_controlled_accounts_response")],yv);let Rd=class extends J{};re([J.field("asset")],Rd.prototype,"supply",void 0);re([J.field("asset")],Rd.prototype,"max_supply",void 0);re([J.field("name")],Rd.prototype,"issuer",void 0);Rd=re([J.type("get_currency_stats_item_response")],Rd);let Pa=class extends J{};re([J.field("string")],Pa.prototype,"state",void 0);re([J.field("uint32")],Pa.prototype,"head_number",void 0);re([J.field(Nr)],Pa.prototype,"head_id",void 0);re([J.field("time_point")],Pa.prototype,"head_timestamp",void 0);re([J.field("uint32")],Pa.prototype,"irreversible_number",void 0);re([J.field(Nr)],Pa.prototype,"irreversible_id",void 0);re([J.field("time_point")],Pa.prototype,"irreversible_timestamp",void 0);re([J.field(Nr)],Pa.prototype,"earliest_tracked_block_id",void 0);re([J.field("uint32")],Pa.prototype,"earliest_tracked_block_number",void 0);Pa=re([J.type("get_transaction_status_response")],Pa);let e0=class extends J{};re([J.field(Er)],e0.prototype,"threshold",void 0);re([J.field(Td,{array:!0})],e0.prototype,"keys",void 0);e0=re([J.type("producer_authority")],e0);let t0=class extends J{static from(e){return super.from({...e,authority:[e.authority[0],e0.from(e.authority[1])]})}};re([J.field("name")],t0.prototype,"producer_name",void 0);re([J.field("any",{array:!0})],t0.prototype,"authority",void 0);t0=re([J.type("producer")],t0);let Nl=class extends J{};re([J.field("uint32")],Nl.prototype,"version",void 0);re([J.field(t0,{array:!0})],Nl.prototype,"producers",void 0);Nl=re([J.type("producer_schedule")],Nl);let Od=class extends J{};re([J.field(Nl,{optional:!0})],Od.prototype,"active",void 0);re([J.field(Nl,{optional:!0})],Od.prototype,"pending",void 0);re([J.field(Nl,{optional:!0})],Od.prototype,"proposed",void 0);Od=re([J.type("get_producer_schedule_response")],Od);let Vs=class extends J{};re([J.field("checksum256")],Vs.prototype,"feature_digest",void 0);re([J.field("uint32")],Vs.prototype,"activation_ordinal",void 0);re([J.field("uint32")],Vs.prototype,"activation_block_num",void 0);re([J.field("checksum256")],Vs.prototype,"description_digest",void 0);re([J.field("string",{array:!0})],Vs.prototype,"dependencies",void 0);re([J.field("string")],Vs.prototype,"protocol_feature_type",void 0);re([J.field("any",{array:!0})],Vs.prototype,"specification",void 0);Vs=re([J.type("protocol_feature")],Vs);let r0=class extends J{};re([J.field(Vs,{array:!0})],r0.prototype,"activated_protocol_features",void 0);re([J.field("uint32",{optional:!0})],r0.prototype,"more",void 0);r0=re([J.type("get_protocol_features_response")],r0);class lV{constructor(e){this.client=e}async get_abi(e){return this.client.call({path:"/v1/chain/get_abi",params:{account_name:Xe.from(e)}})}async get_code(e){return this.client.call({path:"/v1/chain/get_code",params:{account_name:Xe.from(e)},responseType:dc})}async get_raw_abi(e){return this.client.call({path:"/v1/chain/get_raw_abi",params:{account_name:Xe.from(e)},responseType:Ol})}async get_account(e,t=Ur){return this.client.call({path:"/v1/chain/get_account",params:{account_name:Xe.from(e)},responseType:t})}async get_accounts_by_authorizers(e){return this.client.call({path:"/v1/chain/get_accounts_by_authorizers",params:e,responseType:uv})}async get_activated_protocol_features(e){return this.client.call({path:"/v1/chain/get_activated_protocol_features",params:e,responseType:r0})}async get_block(e){return this.client.call({path:"/v1/chain/get_block",params:{block_num_or_id:e},responseType:mn})}async get_block_header_state(e){return this.client.call({path:"/v1/chain/get_block_header_state",params:{block_num_or_id:e},responseType:Kn})}async get_block_info(e){return this.client.call({path:"/v1/chain/get_block_info",params:{block_num:e},responseType:xi})}async get_currency_balance(e,t,n){const i={account:Xe.from(t),code:Xe.from(e)};return n&&(i.symbol=n),this.client.call({path:"/v1/chain/get_currency_balance",params:i,responseType:"asset[]"})}async get_currency_stats(e,t){const n={code:Xe.from(e),symbol:t},i=await this.client.call({path:"/v1/chain/get_currency_stats",params:n}),a={};return Object.keys(i).forEach(o=>a[o]=Rd.from(i[o])),a}async get_info(){return this.client.call({path:"/v1/chain/get_info",responseType:Rn,method:"GET"})}async get_producer_schedule(){return this.client.call({path:"/v1/chain/get_producer_schedule",responseType:Od})}async compute_transaction(e){return ht(e,An)||(e=An.fromSigned(os.from(e))),this.client.call({path:"/v1/chain/compute_transaction",params:{transaction:e}})}async send_read_only_transaction(e){return ht(e,An)||(e=An.fromSigned(os.from(e))),this.client.call({path:"/v1/chain/send_read_only_transaction",params:{transaction:e}})}async push_transaction(e){return ht(e,An)||(e=An.fromSigned(os.from(e))),this.client.call({path:"/v1/chain/push_transaction",params:e})}async send_transaction(e){return ht(e,An)||(e=An.fromSigned(os.from(e))),this.client.call({path:"/v1/chain/send_transaction",params:e})}async send_transaction2(e,t){return ht(e,An)||(e=An.fromSigned(os.from(e))),this.client.call({path:"/v1/chain/send_transaction2",params:{return_failure_trace:!0,retry_trx:!1,retry_trx_num_blocks:0,transaction:e,...t}})}async get_table_rows(e){const t=e.type;let n=e.key_type;const i=e.lower_bound||e.upper_bound;!n&&i&&(ht(i,Or)?n="i64":ht(i,_l)?n="i128":ht(i,$t)?n="sha256":ht(i,cc)&&(n="ripemd160")),n||(n="name");let a=e.json;a===void 0&&(a=t===void 0);let o=e.upper_bound;o&&typeof o!="string"&&(o=String(o));let s=e.lower_bound;s&&typeof s!="string"&&(s=String(s));let c=e.scope;typeof c>"u"?c=String(Xe.from(e.code)):typeof c!="string"&&(c=String(c));let{rows:l,more:d,next_key:h}=await this.client.call({path:"/v1/chain/get_table_rows",params:{...e,code:Xe.from(e.code),table:Xe.from(e.table),limit:e.limit!==void 0?Er.from(e.limit):void 0,scope:c,key_type:n,json:a,upper_bound:o,lower_bound:s}}),y;if(e.show_payer&&(y=[],l=l.map(({data:m,payer:b})=>(y.push(Xe.from(b)),m))),t&&(a?l=l.map(m=>typeof m=="string"&&lt.isBytes(m)?Zt.decode({data:lt.from(m),type:t}):Zt.decode({object:m,type:t})):l=l.map(m=>lt.from(m)).map(m=>Zt.decode({data:m,type:t}))),h&&h.length>0){let m;switch(n){case"i64":m=Or;break;case"i128":m=_l;break;case"name":m=Xe;break;case"float64":m=P0;break;case"float128":m=lb;break;case"sha256":m=$t;break;case"ripemd160":m=cc;break;default:throw new Error(`Unsupported key type: ${n}`)}m===Xe?h=Xe.from(Zt.decode({object:h,type:Or})):h=Zt.decode({object:h,type:m})}else h=void 0;return{rows:l,more:d,next_key:h,ram_payers:y}}async get_table_by_scope(e){return this.client.call({path:"/v1/chain/get_table_by_scope",params:e,responseType:Xp})}async get_transaction_status(e){return this.client.call({path:"/v1/chain/get_transaction_status",params:{id:$t.from(e)},responseType:Pa})}}class fV{constructor(e){this.client=e}async get_actions(e,t,n){return this.client.call({path:"/v1/history/get_actions",params:{account_name:Xe.from(e),pos:Fo.from(t),offset:Fo.from(n)},responseType:Cl})}async get_transaction(e,t={}){return this.client.call({path:"/v1/history/get_transaction",params:{id:$t.from(e),block_num_hint:t.blockNumHint&&Er.from(t.blockNumHint),traces:t.excludeTraces===!0?!1:void 0},responseType:Wo})}async get_key_accounts(e){return this.client.call({path:"/v1/history/get_key_accounts",params:{public_key:Fn.from(e)},responseType:pv})}async get_controlled_accounts(e){return this.client.call({path:"/v1/history/get_controlled_accounts",params:{controlling_account:Xe.from(e)},responseType:yv})}}class U0 extends Error{static formatError(e){return e.what==="unspecified"&&e.details[0].file&&e.details[0].file==="http_plugin.cpp"&&e.details[0].message.slice(0,11)==="unknown key"?"Account not found":e.what==="unspecified"&&e.details&&e.details.length>0?e.details[0].message:e.what&&e.what.length>0?e.what:"Unknown API error"}constructor(e,t){let n;t.json&&t.json.error?n=`${U0.formatError(t.json.error)} at ${e}`:n=`HTTP ${t.status} at ${e}`,super(n),this.path=e,this.response=t}get error(){const{json:e}=this.response;return e?e.error:void 0}get name(){const{error:e}=this;return e?e.name:"unspecified"}get code(){const{error:e}=this;return e?e.code:0}get details(){const{error:e}=this;return e?e.details:[]}}U0.__className="APIError";class db{constructor(e){if(this.v1={chain:new lV(this),history:new fV(this)},e.provider)this.provider=e.provider;else if(e.url)this.provider=new Gp(e.url,e);else throw new Error("Missing url or provider")}async call(e){const t=await this.provider.call(e),{json:n}=t;if(Math.floor(t.status/100)!==2||n&&typeof n.error=="object")throw new U0(e.path,t);return e.responseType?zo({type:e.responseType,object:t.json}):t.json||t.text}}db.__className="APIClient";var xx;let On=class extends J{};re([J.field("uint16")],On.prototype,"networkVersion",void 0);re([J.field("checksum256")],On.prototype,"chainId",void 0);re([J.field("checksum256")],On.prototype,"nodeId",void 0);re([J.field("public_key")],On.prototype,"key",void 0);re([J.field("int64")],On.prototype,"time",void 0);re([J.field("checksum256")],On.prototype,"token",void 0);re([J.field("signature")],On.prototype,"sig",void 0);re([J.field("string")],On.prototype,"p2pAddress",void 0);re([J.field("uint32")],On.prototype,"lastIrreversibleBlockNumber",void 0);re([J.field(Nr)],On.prototype,"lastIrreversibleBlockId",void 0);re([J.field("uint32")],On.prototype,"headNum",void 0);re([J.field(Nr)],On.prototype,"headId",void 0);re([J.field("string")],On.prototype,"os",void 0);re([J.field("string")],On.prototype,"agent",void 0);re([J.field("int16")],On.prototype,"generation",void 0);On=re([J.type("handshake_message")],On);let Bl=class extends J{};re([J.field("uint32")],Bl.prototype,"lastIrreversibleBlockNumber",void 0);re([J.field(Nr)],Bl.prototype,"lastIrreversibleBlockId",void 0);re([J.field("uint32")],Bl.prototype,"headNum",void 0);re([J.field(Nr)],Bl.prototype,"headId",void 0);Bl=re([J.type("chain_size_message")],Bl);let n0=class extends J{};re([J.field("uint8")],n0.prototype,"reason",void 0);re([J.field("checksum256")],n0.prototype,"nodeId",void 0);n0=re([J.type("go_away_message")],n0);let Il=class extends J{};re([J.field("int64")],Il.prototype,"org",void 0);re([J.field("int64")],Il.prototype,"rec",void 0);re([J.field("int64")],Il.prototype,"xmt",void 0);re([J.field("int64")],Il.prototype,"dst",void 0);Il=re([J.type("time_message")],Il);let i0=class extends J{};re([J.field("checksum256",{array:!0})],i0.prototype,"knownTrx",void 0);re([J.field(Nr,{array:!0})],i0.prototype,"knownBlocks",void 0);i0=re([J.type("notice_message")],i0);let a0=class extends J{};re([J.field("checksum256",{array:!0})],a0.prototype,"reqTrx",void 0);re([J.field(Nr,{array:!0})],a0.prototype,"reqBlocks",void 0);a0=re([J.type("request_message")],a0);let s0=class extends J{};re([J.field("uint32")],s0.prototype,"startBlock",void 0);re([J.field("uint32")],s0.prototype,"endBlock",void 0);s0=re([J.type("sync_request_message")],s0);let o0=class extends J{};re([J.field("name")],o0.prototype,"producer_name",void 0);re([J.field("public_key")],o0.prototype,"block_signing_key",void 0);o0=re([J.type("new_producers_entry")],o0);let u0=class extends J{};re([J.field("uint32")],u0.prototype,"version",void 0);re([J.field(o0,{array:!0})],u0.prototype,"producers",void 0);u0=re([J.type("new_producers")],u0);let c0=class extends J{};re([J.field("uint16")],c0.prototype,"type",void 0);re([J.field("bytes")],c0.prototype,"data",void 0);c0=re([J.type("block_extension")],c0);let mv=class extends J{};re([J.field("uint16")],mv.prototype,"type",void 0);re([J.field("bytes")],mv.prototype,"data",void 0);mv=re([J.type("header_extension")],mv);let Ax=class extends ai{};Ax=re([ai.type("trx_variant",[$t,An])],Ax);let Dl=class extends J{};re([J.field($o)],Dl.prototype,"status",void 0);re([J.field(Er)],Dl.prototype,"cpu_usage_us",void 0);re([J.field(I0)],Dl.prototype,"net_usage_words",void 0);re([J.field(Ax)],Dl.prototype,"trx",void 0);Dl=re([J.type("full_transaction_receipt")],Dl);let Ua=xx=class extends J{get blockNum(){return this.previous.blockNum.adding(1)}get id(){const e=$t.hash(Zt.encode({object:this,type:xx}));return Nr.fromBlockChecksum(e,this.blockNum)}};re([J.field("uint32")],Ua.prototype,"timeSlot",void 0);re([J.field("name")],Ua.prototype,"producer",void 0);re([J.field("uint16")],Ua.prototype,"confirmed",void 0);re([J.field(Nr)],Ua.prototype,"previous",void 0);re([J.field(Nr)],Ua.prototype,"transaction_mroot",void 0);re([J.field(Nr)],Ua.prototype,"action_mroot",void 0);re([J.field("uint32")],Ua.prototype,"schedule_version",void 0);re([J.field(u0,{optional:!0})],Ua.prototype,"new_producers",void 0);re([J.field("any",{array:!0})],Ua.prototype,"header_extensions",void 0);Ua=xx=re([J.type("block_header")],Ua);let Cd=class extends Ua{};re([J.field("signature")],Cd.prototype,"producer_signature",void 0);re([J.field(Dl,{array:!0})],Cd.prototype,"transactions",void 0);re([J.field(c0,{array:!0})],Cd.prototype,"block_extensions",void 0);Cd=re([J.type("signed_block")],Cd);let C9=class extends ai{};C9=re([ai.type("net_message",[On,Bl,n0,Il,i0,a0,s0,Cd,An])],C9);var K1={exports:{}},L_,N9;function dV(){if(N9)return L_;N9=1;let r=!1;return"process"in globalThis&&(r=/^v8\./.test(globalThis.process.version)),L_=function(t){function n(h,y){return t[h](y)}const i=n("require","crypto");function a(h,y){const m=h.length;for(let b=0,v=0;b<m;b++)h[b]=y[v++]<<24|y[v++]<<16|y[v++]<<8|y[v++];return h}function o(h,y){const m=h.length;for(let b=0,v=0;b<m;b++)h[b]=(y[v++]<<24|y[v++]<<16|y[v++]<<8|y[v++])-2147483648;return h}function s(h,y){const m=h.length;for(let b=0,v=0;b<m;b++)h[b]=y[v++]<<8|y[v++];return h}function c(h,y){const m=h.length;for(let b=0,v=0;b<m;b++)h[b]=(y[v++]<<8|y[v++])-32768;return h}function l(h,y){const m=h.length;for(let b=0;b<m;b++)h[b]=y[b];return h}function d(h,y){const m=h.length;for(let b=0;b<m;b++)h[b]=y[b]-128;return h}return r?function(y){if(y instanceof Uint8Array)return i.randomFillSync(y);const m=i.randomBytes(y.byteLength);if(y instanceof Uint32Array)return a(y,m);if(y instanceof Uint16Array)return s(y,m);if(y instanceof Int32Array)return o(y,m);if(y instanceof Int16Array)return c(y,m);if(y instanceof Int8Array)return d(y,m);if(y instanceof Uint8ClampedArray)return l(y,m);throw new Error("invalid type")}:i.randomFillSync||function(y){const m=i.randomBytes(y.byteLength);if(y instanceof Uint8Array)return l(y,m);if(y instanceof Uint32Array)return a(y,m);if(y instanceof Uint16Array)return s(y,m);if(y instanceof Int32Array)return o(y,m);if(y instanceof Int16Array)return c(y,m);if(y instanceof Int8Array)return d(y,m);if(y instanceof Uint8ClampedArray)return l(y,m);throw new Error("invalid type")}},L_}var G1={exports:{}},hV=G1.exports,B9;function pV(){return B9||(B9=1,(function(r){(function(e,t,n){var i=256,a=6,o=52,s="random",c=n.pow(i,a),l=n.pow(2,o),d=l*2,h=i-1,y;function m(B,k,F){var T=[];k=k==!0?{entropy:!0}:k||{};var z=x(E(k.entropy?[B,N(t)]:B??D(),3),T),Z=new b(T),Y=function(){for(var W=Z.g(a),M=c,C=0;W<l;)W=(W+C)*i,M*=i,C=Z.g(1);for(;W>=d;)W/=2,M/=2,C>>>=1;return(W+C)/M};return Y.int32=function(){return Z.g(4)|0},Y.quick=function(){return Z.g(4)/4294967296},Y.double=Y,x(N(Z.S),t),(k.pass||F||function(W,M,C,R){return R&&(R.S&&v(R,Z),W.state=function(){return v(Z,{})}),C?(n[s]=W,M):W})(Y,z,"global"in k?k.global:this==n,k.state)}function b(B){var k,F=B.length,T=this,z=0,Z=T.i=T.j=0,Y=T.S=[];for(F||(B=[F++]);z<i;)Y[z]=z++;for(z=0;z<i;z++)Y[z]=Y[Z=h&Z+B[z%F]+(k=Y[z])],Y[Z]=k;(T.g=function(W){for(var M,C=0,R=T.i,S=T.j,_=T.S;W--;)M=_[R=h&R+1],C=C*i+_[h&(_[R]=_[S=h&S+M])+(_[S]=M)];return T.i=R,T.j=S,C})(i)}function v(B,k){return k.i=B.i,k.j=B.j,k.S=B.S.slice(),k}function E(B,k){var F=[],T=typeof B,z;if(k&&T=="object")for(z in B)try{F.push(E(B[z],k-1))}catch{}return F.length?F:T=="string"?B:B+"\0"}function x(B,k){for(var F=B+"",T,z=0;z<F.length;)k[h&z]=h&(T^=k[h&z]*19)+F.charCodeAt(z++);return N(k)}function D(){try{var B;return y&&(B=y.randomBytes)?B=B(i):(B=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(B)),N(B)}catch{var k=e.navigator,F=k&&k.plugins;return[+new Date,e,F,e.screen,N(t)]}}function N(B){return String.fromCharCode.apply(0,B)}if(x(n.random(),t),r.exports){r.exports=m;try{y=Jv}catch{}}else n["seed"+s]=m})(typeof self<"u"?self:hV,[],Math)})(G1)),G1.exports}var j_,I9;function yV(){if(I9)return j_;I9=1;function r(e){const t=e.reduce(function(o,s){return o+s.length*2},0),n=new ArrayBuffer(t),i=new Uint16Array(n);let a=0;return e.forEach(function(o){for(var s=0,c=o.length;s<c;s++)i[a+s]=o.charCodeAt(s);a+=o.length}),i}return j_=function(t){const n=pV();function i(v,E){return t[v](E)}let a,o;try{a=i("require","react-native").NativeModules.SyncRandomBytes,a&&(o=a.seed)}catch{}!o&&t&&"Expo"in t&&(o=r([t.Expo.Constants.installationId,t.Expo.Constants.sessionId,"performance"in t?t.performance.now().toString(32):new Date().toISOString(),Math.random().toString(32)]));let s=n(o),c=!1;!o&&a&&(c=!0,a.randomBytes().then(v=>{c=!1,s=n(v)}).catch(function(v){c=!1,console.log(`WARNING: can not collect seed data: ${v.message}`)}));function l(v){const E=v.length;if(E>16384)throw new Error("QuotaExceeded");for(let x=E-1;x>=0;x--)v[x]=s.int32();return v}function d(v){const E=v.length;if(E>16384)throw new Error("QuotaExceeded");for(let x=E-1;x>=0;x--)v[x]=s.int32()-2147483648;return v}function h(v){if(v.length>65536)throw new Error("QuotaExceeded");const E=v.length*.25+1|0;for(let x=E-1,D=0;x>=0;x--){const N=s.int32();v[D++]=N&255,v[D++]=N>>8&255,v[D++]=N>>16&255,v[D++]=N>>24&255}return v}function y(v){if(v.length>65536)throw new Error("QuotaExceeded");const E=v.length*.25+1|0;for(let x=E-1,D=0;x>=0;x--){const N=s.int32();v[D++]=(N&255)-128,v[D++]=(N>>8&255)-128,v[D++]=(N>>16&255)-128,v[D++]=(N>>24&255)-128}return v}function m(v){if(v.length>32767)throw new Error("QuotaExceeded");const E=v.length*.5+1|0;for(let x=E-1,D=0;x>=0;x--){const N=s.int32();v[D++]=N&65535,v[D++]=N>>16&65535}return v}function b(v){if(v.length>32767)throw new Error("QuotaExceeded");const E=v.length*.5+1|0;for(let x=E-1,D=0;x>=0;x--){const N=s.int32();v[D++]=(N&65535)-32768,v[D++]=(N>>16&65535)-32768}return v}return function(E){if(c&&(c=!1,console.log("WARNING: random data is requested before the seed is done")),E==null)throw new Error("invalid type");if(E instanceof Uint8Array)return h(E);if(E instanceof Uint32Array)return l(E);if(E instanceof Uint16Array)return m(E);if(E instanceof Int32Array)return d(E);if(E instanceof Int16Array)return b(E);if(E instanceof Int8Array)return y(E);if(E instanceof Uint8ClampedArray)return h(E);throw new Error("invalid type")}},j_}K1.exports;var D9;function mV(){return D9||(D9=1,(function(r){r.exports=(function(e){if(e&&e.crypto&&e.crypto.getRandomValues)return e.crypto.getRandomValues.bind(e.crypto);try{return dV()(e)}catch{return yV()(e)}})(typeof window=="object"?window:r)})(K1)),K1.exports}var gV=mV();const vV=Zo(gV);const WI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",ko=new Uint8Array(256);for(let r=0;r<62;r++)ko[WI.charCodeAt(r)]=r;ko[43]=ko[45]=62;ko[47]=ko[95]=63;function ZI(r,e=!0){const t=r.byteLength,n=t%3,i=t-n,a=WI+(e?"-_":"+/"),o=[];let s,c,l,d,h;for(let y=0;y<i;y+=3)h=r[y]<<16|r[y+1]<<8|r[y+2],s=(h&16515072)>>18,c=(h&258048)>>12,l=(h&4032)>>6,d=h&63,o.push(a[s]+a[c]+a[l]+a[d]);return n===1?(h=r[i],s=(h&252)>>2,c=(h&3)<<4,o.push(a[s]+a[c])):n===2&&(h=r[i]<<8|r[i+1],s=(h&64512)>>10,c=(h&1008)>>4,l=(h&15)<<2,o.push(a[s]+a[c]+a[l])),o.join("")}function YI(r){const e=r.length*.75,t=new Uint8Array(e);let n,i,a,o,s=0;for(let c=0;c<r.length;c+=4)n=ko[r.charCodeAt(c)],i=ko[r.charCodeAt(c+1)],a=ko[r.charCodeAt(c+2)],o=ko[r.charCodeAt(c+3)],t[s++]=n<<2|i>>4,t[s++]=(i&15)<<4|a>>2,t[s++]=(a&3)<<6|o&63;return t}var En;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.EOS=1]="EOS",r[r.TELOS=2]="TELOS",r[r.JUNGLE=3]="JUNGLE",r[r.KYLIN=4]="KYLIN",r[r.WORBLI=5]="WORBLI",r[r.BOS=6]="BOS",r[r.MEETONE=7]="MEETONE",r[r.INSIGHTS=8]="INSIGHTS",r[r.BEOS=9]="BEOS",r[r.WAX=10]="WAX",r[r.PROTON=11]="PROTON",r[r.FIO=12]="FIO"})(En||(En={}));let us=class extends $t{static from(e){if(ht(e,this))return e;if(typeof e=="number"&&(e=P9.get(e),!e))throw new Error("Unknown chain id alias");return super.from(e)}get chainVariant(){const e=this.chainName;return e!==En.UNKNOWN?Ds.from(["chain_alias",e]):Ds.from(this)}get chainName(){const e=this.hexString;for(const[t,n]of P9)if(n===e)return t;return En.UNKNOWN}};us=re([Gd("chain_id")],us);let Sx=class extends $o{};Sx=re([Gd("chain_alias")],Sx);let Ds=class extends ai{get chainId(){return ht(this.value,us)?this.value:us.from(Number(this.value.value))}};Ds=re([ai.type("variant_id",[Sx,us])],Ds);const P9=new Map([[En.EOS,"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"],[En.TELOS,"4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11"],[En.JUNGLE,"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473"],[En.KYLIN,"5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191"],[En.WORBLI,"73647cde120091e0a4b85bced2f3cfdb3041e266cbbe95cee59b73235a1b3b6f"],[En.BOS,"d5a3d18fbb3c084e3b1f3fa98c21014b5f3db536cc15d08f9f6479517c6a3d86"],[En.MEETONE,"cfe6486a83bad4962f232d48003b1824ab5665c36778141034d75e57b956e422"],[En.INSIGHTS,"b042025541e25a472bffde2d62edd457b7e70cee943412b1ea0f044f88591664"],[En.BEOS,"b912d19a6abd2b1b05611ae5be473355d64d95aeff0c09bedc8c166cd6468fe4"],[En.WAX,"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4"],[En.PROTON,"384da888112027f0321850a169f737c33e53b388aad48b5adace4bab97f437e0"],[En.FIO,"21dcae42c0182200e93f954a074011f9048a7624c6fe81d3c9541a614a88bd1c"]]);var Jf;let U9=class extends Xe{};U9=re([Gd("account_name")],U9);let k9=class extends Xe{};k9=re([Gd("permission_name")],k9);let l0=class extends J{};re([J.field(Vn,{optional:!0})],l0.prototype,"permission",void 0);l0=re([J.type("identity")],l0);let hc=class extends J{};re([J.field("name")],hc.prototype,"scope",void 0);re([J.field(Vn,{optional:!0})],hc.prototype,"permission",void 0);hc=re([J.type("identity")],hc);let Mx=class extends ai{};Mx=re([ai.type("variant_req",[Cr,{type:Cr,array:!0},cn,l0])],Mx);let Tx=class extends ai{};Tx=re([ai.type("variant_req",[Cr,{type:Cr,array:!0},cn,hc])],Tx);let pc=Jf=class extends $o{get broadcast(){return(Number(this)&Jf.broadcast)!==0}set broadcast(e){this.setFlag(Jf.broadcast,e)}get background(){return(Number(this)&Jf.background)!==0}set background(e){this.setFlag(Jf.background,e)}setFlag(e,t){t?this.value=$o.from(Number(this)|e).value:this.value=$o.from(Number(this)&~e).value}};pc.broadcast=1;pc.background=2;pc=Jf=re([Gd("request_flags")],pc);let Pl=class extends J{};re([J.field("string")],Pl.prototype,"key",void 0);re([J.field("bytes")],Pl.prototype,"value",void 0);Pl=re([J.type("info_pair")],Pl);let yc=class extends J{};re([J.field(Ds)],yc.prototype,"chain_id",void 0);re([J.field(Mx)],yc.prototype,"req",void 0);re([J.field(pc)],yc.prototype,"flags",void 0);re([J.field("string")],yc.prototype,"callback",void 0);re([J.field(Pl,{array:!0})],yc.prototype,"info",void 0);yc=re([J.type("signing_request")],yc);let mc=class extends J{};re([J.field(Ds)],mc.prototype,"chain_id",void 0);re([J.field(Tx)],mc.prototype,"req",void 0);re([J.field(pc)],mc.prototype,"flags",void 0);re([J.field("string")],mc.prototype,"callback",void 0);re([J.field(Pl,{array:!0})],mc.prototype,"info",void 0);mc=re([J.type("signing_request")],mc);let Qu=class extends J{};re([J.field("name")],Qu.prototype,"signer",void 0);re([J.field("signature")],Qu.prototype,"signature",void 0);Qu=re([J.type("request_signature")],Qu);var pp;let gc=pp=class extends J{static from(e){return ht(e,pp)?e:typeof e=="string"?pp.fromString(e):super.from(e)}static fromString(e){const t=e.split(" ");if(t.length!==2||t[0]!=="EOSIO")throw new Error("Invalid IdentityProof string");const n=YI(t[1]);return Zt.decode({data:n,type:pp})}static fromPayload(e,t={}){const n=Gu.from(e.req,t);if(!(n.version>=3&&n.isIdentity()))throw new Error("Not an identity request");return this.from({chainId:e.cid||n.getChainId(),scope:n.getIdentityScope(),expiration:e.ex,signer:{actor:e.sa,permission:e.sp},signature:e.sig})}get transaction(){const e=Cr.from({account:"",name:"identity",authorization:[this.signer],data:hc.from({scope:this.scope,permission:this.signer})});return cn.from({ref_block_num:0,ref_block_prefix:0,expiration:this.expiration,actions:[e]})}recover(){return this.signature.recoverDigest(this.transaction.signingDigest(this.chainId))}verify(e,t){return Vo.from(t||new Date).toMilliseconds()<this.expiration.toMilliseconds()&&lc.from(e).hasPermission(this.recover())}toString(){const e=Zt.encode({object:this});return`EOSIO ${ZI(e.array,!1)}`}};re([J.field(us)],gc.prototype,"chainId",void 0);re([J.field(Xe)],gc.prototype,"scope",void 0);re([J.field(Vo)],gc.prototype,"expiration",void 0);re([J.field(Vn)],gc.prototype,"signer",void 0);re([J.field(Yd)],gc.prototype,"signature",void 0);gc=pp=re([J.type("identity_proof")],gc);const Jc=Xe.from("............1"),Xf=Xe.from("............2"),Rx=Vn.from({actor:Jc,permission:Xf});class Gu{constructor(e,t,n,i,a){if(t.flags.broadcast&&t.req.variantName==="identity")throw new Error("Invalid request (identity request cannot be broadcast)");this.version=e,this.data=t,this.zlib=n,this.abiProvider=i,this.signature=a}static identityAbi(e){const t=Zt.synthesize(this.identityType(e));return t.actions=[{name:"identity",type:"identity",ricardian_contract:""}],t}static identityType(e){return e===2?l0:hc}static storageType(e){return e===2?yc:mc}static async create(e,t={}){let n;e.action?n=[e.action]:e.actions?n=e.actions:e.transaction?n=e.transaction.actions||[]:n=[];const i=n.filter(o=>!lt.isBytes(o.data)&&o.data.constructor.abiName===void 0).map(o=>Xe.from(o.account)),a={};if(i.length>0){const o=t.abiProvider;if(!o)throw new Error("Missing abi provider");const s=await Promise.all(i.map(c=>o.getAbi(c)));for(const[c,l]of s.entries())a[i[c].toString()]=l}return this.createSync(e,t,a)}static createSync(e,t={},n={}){let i=2;const a={},o=d=>wV(d,n);if(e.chainId===null&&(i=3),e.identity!==void 0)e.identity.scope&&(i=3),a.req=["identity",this.identityType(i).from(e.identity)];else if(e.action&&!e.actions&&!e.transaction)a.req=["action",o(e.action)];else if(e.actions&&!e.action&&!e.transaction)e.actions.length===1?a.req=["action",o(e.actions[0])]:a.req=["action[]",e.actions.map(o)];else if(e.transaction&&!e.action&&!e.actions){const d=e.transaction;d.expiration===void 0&&(d.expiration="1970-01-01T00:00:00.000"),d.ref_block_num===void 0&&(d.ref_block_num=0),d.ref_block_prefix===void 0&&(d.ref_block_prefix=0),d.context_free_actions===void 0&&(d.context_free_actions=[]),d.transaction_extensions===void 0&&(d.transaction_extensions=[]),d.delay_sec===void 0&&(d.delay_sec=0),d.max_cpu_usage_ms===void 0&&(d.max_cpu_usage_ms=0),d.max_net_usage_words===void 0&&(d.max_net_usage_words=0),d.actions===void 0&&(d.actions=[]),d.context_free_actions===void 0&&(d.context_free_actions=[]),d.actions=d.actions.map(o),a.req=["transaction",d]}else throw new TypeError("Invalid arguments: Must have exactly one of action, actions or transaction");e.chainId===null?a.chain_id=Ds.from(["chain_alias",0]):a.chain_id=us.from(e.chainId||En.EOS).chainVariant;const s=pc.from(0);let c="";if(s.broadcast=e.broadcast!==void 0?e.broadcast:a.req[0]!=="identity",typeof e.callback=="string"?c=e.callback:typeof e.callback=="object"&&(c=e.callback.url,s.background=e.callback.background||!1),a.flags=s,a.callback=c,a.info=[],typeof e.info=="object"){for(const d in e.info)if(Object.prototype.hasOwnProperty.call(e.info,d)){let y=e.info[d];typeof y=="string"?y=lt.from(y,"utf8"):y instanceof lt||(y=Zt.encode({object:y})),a.info.push({key:d,value:y})}}if(e.chainIds&&e.chainId===null){const d=e.chainIds.map(h=>us.from(h).chainVariant);a.info.push({key:"chain_ids",value:Zt.encode({object:d,type:{type:Ds,array:!0}})})}const l=new Gu(i,this.storageType(i).from(a),t.zlib,t.abiProvider);return t.signatureProvider&&l.sign(t.signatureProvider),l}static identity(e,t={}){let n={actor:e.account||Jc,permission:e.permission||Xf};return n.actor===Jc&&n.permission===Xf&&(n=void 0),this.createSync({...e,identity:{permission:n,scope:e.scope},broadcast:!1},t)}static fromTransaction(e,t,n={}){const i=us.from(e);t=lt.from(t);const a=new $8;return a.writeByte(2),a.writeArray(Zt.encode({object:i.chainVariant}).array),a.writeByte(2),a.writeArray(lt.from(t).array),a.writeByte(pc.broadcast),a.writeByte(0),a.writeByte(0),Gu.fromData(a.getData(),n)}static from(e,t={}){if(typeof e!="string")throw new Error("Invalid request uri");const[,n]=e.split(":"),i=YI(n.startsWith("//")?n.slice(2):n);return Gu.fromData(i,t)}static fromData(e,t={}){e=lt.from(e);const n=e.array[0],i=n&-129;if(i!==2&&i!==3)throw new Error("Unsupported protocol version");let a=e.droppingFirst(1);if((n&128)!==0){if(!t.zlib)throw new Error("Compressed URI needs zlib");a=lt.from(t.zlib.inflateRaw(a.array))}const o=new Sd(a.array),s=Zt.decode({data:o,type:this.storageType(i)});let c;return o.canRead()&&(c=Zt.decode({data:o,type:Qu})),new Gu(i,s,t.zlib,t.abiProvider,c)}sign(e){const t=this.getSignatureDigest();this.signature=Qu.from(e.sign(t))}getSignatureDigest(){const e=[this.version,114,101,113,117,101,115,116];return $t.hash(lt.from(e).appending(this.getData()))}setSignature(e,t){this.signature=Qu.from({signer:e,signature:t})}setCallback(e,t){this.data.callback=e,this.data.flags.background=t}setBroadcast(e){this.data.flags.broadcast=e}encode(e,t,n="esr:"){const i=e!==void 0?e:this.zlib!==void 0;if(i&&this.zlib===void 0)throw new Error("Need zlib to compress");let a=this.version;const o=this.getData(),s=this.getSignatureData();let c=new Uint8Array(o.byteLength+s.byteLength);if(c.set(o,0),c.set(s,o.byteLength),i){const d=this.zlib.deflateRaw(c);c.byteLength>d.byteLength&&(a|=128,c=d)}const l=new Uint8Array(1+c.byteLength);return l[0]=a,l.set(c,1),t!==!1&&(n+="//"),n+ZI(l)}getData(){return Zt.encode({object:this.data}).array}getSignatureData(){return this.signature?Zt.encode({object:this.signature}).array:new Uint8Array(0)}getRequiredAbis(){return this.getRawActions().filter(e=>!$_(e)).map(e=>e.account).filter((e,t,n)=>n.indexOf(e)===t)}requiresTapos(){const e=this.getRawTransaction();return!this.isIdentity()&&!q9(e)}async fetchAbis(e){const t=this.getRequiredAbis();if(t.length>0){const n=e||this.abiProvider;if(!n)throw new Error("Missing ABI provider");const i=new Map;return await Promise.all(t.map(async a=>{i.set(a.toString(),Ut.from(await n.getAbi(a)))})),i}else return new Map}resolveActions(e,t){return this.getRawActions().map(n=>{let i;if($_(n))i=this.constructor.identityAbi(this.version);else{const c=e.get(n.account.toString());if(!c)throw new Error(`Missing ABI definition for ${n.account}`);i=Ut.from(c)}if(!i.getActionType(n.name))throw new Error(`Missing type for action ${n.account}:${n.name} in ABI`);let o=n.decodeData(i),s=n.authorization;if(t){const c=Vn.from(t),l=d=>{if(d instanceof Xe)return d.equals(Jc)?c.actor:d.equals(Xf)?c.permission:d;if(Array.isArray(d))return d.map(l);if(typeof d=="object"&&d!==null){for(const h of Object.keys(d))d[h]=l(d[h]);return d}else return d};o=l(o),s=s.map(d=>{let{actor:h,permission:y}=d;return h.equals(Jc)&&(h=c.actor),y.equals(Xf)&&(y=c.permission),y.equals(Jc)&&(y=c.permission),Vn.from({actor:h,permission:y})})}return{...n,authorization:s,data:o}})}resolveTransaction(e,t,n={}){const i=this.getRawTransaction();if(!this.isIdentity()&&!q9(i))if(n.expiration!==void 0&&n.ref_block_num!==void 0&&n.ref_block_prefix!==void 0)i.expiration=Vo.from(n.expiration),i.ref_block_num=wl.from(n.ref_block_num,"truncate"),i.ref_block_prefix=Er.from(n.ref_block_prefix);else if(n.block_num!==void 0&&n.ref_block_prefix!==void 0&&n.timestamp!==void 0)i.expiration=L9(n.timestamp,n.expire_seconds),i.ref_block_num=wl.from(n.block_num,"truncate"),i.ref_block_prefix=Er.from(n.ref_block_prefix);else throw new Error("Invalid transaction context, need either a reference block or explicit TaPoS values");else this.isIdentity()&&this.version>2&&(i.expiration=n.expiration?Vo.from(n.expiration):L9(n.timestamp,n.expire_seconds));const a=this.resolveActions(e,t),o=i.context_free_actions;return{...i,context_free_actions:o,actions:a}}resolve(e,t,n={}){const i=this.resolveTransaction(e,t,n),a=i.actions.map(c=>{let l;if($_(c)?l=this.constructor.identityAbi(this.version):l=e.get(c.account.toString()),!l)throw new Error(`Missing ABI definition for ${c.account}`);const d=l.getActionType(c.name),h=Zt.encode({object:c.data,type:d,abi:l});return Cr.from({...c,data:h})}),o=cn.from({...i,actions:a});let s;if(this.isMultiChain()){if(!n.chainId)throw new Error("Missing chosen chain ID for multi-chain request");s=us.from(n.chainId);const c=this.getChainIds();if(c&&!c.some(l=>s.equals(l)))throw new Error("Trying to resolve for chain ID not defined in request")}else s=this.getChainId();return new bV(this,Vn.from(t),o,i,s)}getChainId(){return this.data.chain_id.chainId}getChainIds(){if(!this.isMultiChain())return null;const e=this.getInfoKey("chain_ids",{type:Ds,array:!0});return e?e.map(t=>t.chainId):null}setChainIds(e){const t=e.map(n=>us.from(n).chainVariant);this.setInfoKey("chain_ids",t,{type:Ds,array:!0})}isMultiChain(){return this.data.chain_id.variantIdx===0&&this.data.chain_id.value.equals(En.UNKNOWN)}getRawActions(){const e=this.data.req;switch(e.variantName){case"action":return[e.value];case"action[]":return e.value;case"identity":if(this.version===2){const t=e.value;let n="0101000000000000000200000000000000",i=[Rx];t.permission&&(n=Zt.encode({object:t}),i=[t.permission]);const a=Cr.from({account:"",name:"identity",authorization:i,data:n});return delete a.abi,[a]}else{let{scope:t,permission:n}=e.value;n||(n=Rx);const i=Zt.encode({object:{scope:t,permission:n},type:hc}),a=Cr.from({account:"",name:"identity",authorization:[n],data:i});return delete a.abi,[a]}case"transaction":return e.value.actions;default:throw new Error("Invalid signing request data")}}getRawTransaction(){const e=this.data.req;switch(e.variantName){case"transaction":return cn.from({...e.value});case"action":case"action[]":case"identity":return cn.from({actions:this.getRawActions(),context_free_actions:[],transaction_extensions:[],expiration:"1970-01-01T00:00:00.000",ref_block_num:0,ref_block_prefix:0,max_cpu_usage_ms:0,max_net_usage_words:0,delay_sec:0});default:throw new Error("Invalid signing request data")}}isIdentity(){return this.data.req.variantName==="identity"}shouldBroadcast(){return this.isIdentity()?!1:this.data.flags.broadcast}getIdentity(){if(!this.isIdentity())return null;const e=this.data.req.value;return e.permission&&!e.permission.actor.equals(Jc)?e.permission.actor:null}getIdentityPermission(){if(!this.isIdentity())return null;const e=this.data.req.value;return e.permission&&!e.permission.permission.equals(Xf)?e.permission.permission:null}getIdentityScope(){return!this.isIdentity()||this.version<=2?null:this.data.req.value.scope}getRawInfo(){const e={};for(const{key:t,value:n}of this.data.info)e[t]=n;return e}getRawInfoKey(e){const t=this.data.info.find(n=>n.key===e);if(t)return t.value}setRawInfoKey(e,t){let n=this.data.info.find(i=>i.key===e);n?n.value=lt.from(t):(n=Pl.from({key:e,value:t}),this.data.info.push(n))}setInfoKey(e,t,n){let i;typeof t=="string"&&!n?i=lt.from(t,"utf8"):i=Zt.encode({object:t,type:n}),this.setRawInfoKey(e,i)}getInfoKey(e,t){const n=this.getRawInfoKey(e);if(n)return t?Zt.decode({data:n,type:t}):n.utf8String}clone(){let e;this.signature&&(e=Qu.from(JSON.parse(JSON.stringify(this.signature))));const n=this.constructor.storageType(this.version).from(JSON.parse(JSON.stringify(this.data)));return new Gu(this.version,n,this.zlib,this.abiProvider,e)}toString(){return this.encode()}toJSON(){return this.encode()}}class bV{constructor(e,t,n,i,a){this.request=e,this.signer=t,this.transaction=n,this.resolvedTransaction=i,this.chainId=a}static async fromPayload(e,t={}){const n=Gu.from(e.req,t),i=await n.fetchAbis();return n.resolve(i,{actor:e.sa,permission:e.sp},{ref_block_num:e.rbn,ref_block_prefix:e.rid,expiration:e.ex,chainId:e.cid||n.getChainId()})}get serializedTransaction(){return Zt.encode({object:this.transaction}).array}get signingDigest(){return this.transaction.signingDigest(this.chainId)}get signingData(){return this.transaction.signingData(this.chainId)}getCallback(e,t){const{callback:n,flags:i}=this.request.data;if(!n||n.length===0)return null;if(!e||e.length===0)throw new Error("Must have at least one signature to resolve callback");const a=e.map(c=>Yd.from(c)),o={sig:String(a[0]),tx:String(this.transaction.id),rbn:String(this.transaction.ref_block_num),rid:String(this.transaction.ref_block_prefix),ex:String(this.transaction.expiration),req:this.request.encode(),sa:String(this.signer.actor),sp:String(this.signer.permission),cid:String(this.chainId)};for(const[c,l]of a.slice(1).entries())o[`sig${c}`]=String(l);t&&(o.bn=String(Er.from(t)));const s=n.replace(/({{([a-z0-9]+)}})/g,(c,l,d)=>o[d]||"");return{background:i.background,payload:o,url:s}}getIdentityProof(e){if(!this.request.isIdentity())throw new Error("Not a identity request");return gc.from({chainId:this.chainId,scope:this.request.getIdentityScope(),expiration:this.transaction.expiration,signer:this.signer,signature:e})}}function wV(r,e){if(lt.isBytes(r.data)||r.data.constructor.abiName!==void 0)return Cr.from(r);const t=e[String(Xe.from(r.account))];if(!t)throw new Error(`Missing ABI for ${r.account}`);const n=Cr.from(r,t);return delete n.abi,n}function $_(r){const e=Xe.from(r.account),t=Xe.from(r.name);return e.rawValue.equals(0)&&t.equals("identity")}function q9(r){return!(r.expiration.equals(0)&&r.ref_block_num.equals(0)&&r.ref_block_prefix.equals(0))}function L9(r,e=60){const t=Vo.from(r||new Date),n=Er.from(e);return Vo.fromInteger(t.value.adding(n))}class _V{constructor(e){this.client=e,this.cache=new Map,this.pending=new Map}async getAbi(e){const t=String(e);let n=this.cache.get(t);if(!n){let i=this.pending.get(t);i||(i=this.client.v1.chain.get_raw_abi(e),this.pending.set(t,i));const a=await i;if(this.pending.delete(t),a.abi)n=Ut.from(a.abi),this.cache.set(t,n);else throw new Error(`ABI for ${t} could not be loaded.`)}return n}setAbi(e,t,n=!1){const i=String(e),a=Ut.from(t),o=this.cache.get(i);n&&o?this.cache.set(i,Ut.from({action_results:Vc(o.action_results,a.action_results),types:Vc(o.types,a.types,"new_type_name"),structs:Vc(o.structs,a.structs),actions:Vc(o.actions,a.actions),tables:Vc(o.tables,a.tables),ricardian_clauses:Vc(o.ricardian_clauses,a.ricardian_clauses,"id"),variants:Vc(o.variants,a.variants),version:a.version})):this.cache.set(i,a)}}function Vc(r,e,t="name"){return e.reduce((n,i)=>(n.some(a=>String(a[t])===String(i[t]))||n.push(i),n),r.slice())}function EV(r){return["primary","secondary","tertiary","fourth","fifth","sixth","seventh","eighth","ninth","tenth"][r]}function zu(r){if(r!=null)return ht(r,_l)||ht(r,Or)||ht(r,P0)||ht(r,$t)||ht(r,cc)?r:typeof r=="number"?Or.from(r):Xe.from(r)}const xV={json:!1,limit:1e3};class QI{constructor(e){this.endReached=!1,this.rowsCount=0,this.maxRows=Number.MAX_SAFE_INTEGER,this.abi=Ut.from(e.abi),this.client=e.client,this.params={...xV,...e.params},e.maxRows&&(this.maxRows=e.maxRows);const t=this.abi.tables.find(n=>Xe.from(n.name).equals(this.params.table));if(!t)throw new Error("Table not found");this.type=t.type}get nextkey(){return this.next_key}async*[Symbol.asyncIterator](){for(;;){const e=await this.next();for(const t of e)yield t;if(e.length===0||!this.next_key)return}}async reset(){this.next_key=void 0,this.endReached=!1,this.rowsCount=0}async all(){const e=[];for await(const t of this)e.push(t);return e}}class AV extends QI{async next(e=Number.MAX_SAFE_INTEGER){if(this.endReached)return[];let t=this.params.lower_bound;this.next_key&&(t=this.next_key);const n=this.maxRows-this.rowsCount,i=Math.min(n,e,this.params.limit),a={...this.params,limit:i,lower_bound:zu(t),upper_bound:zu(this.params.upper_bound)},o=await this.client.v1.chain.get_table_rows(a),c=this.params.json===!1&&!a.type?o.rows.map(l=>Zt.decode({data:l,abi:this.abi,type:this.type})):o.rows;return this.next_key=o.next_key,this.rowsCount+=c.length,(!o.next_key||c.length===0||this.rowsCount===this.maxRows)&&(this.endReached=!0),c}}class SV extends QI{async next(e=Number.MAX_SAFE_INTEGER){if(this.endReached)return[];let t=this.params.lower_bound;this.next_key&&(t=this.next_key);const n=this.maxRows-this.rowsCount,i=Math.min(n,e,this.params.limit),a={code:this.params.code,table:this.params.table,limit:i,lower_bound:t?String(t):void 0,upper_bound:this.params.upper_bound?String(this.params.upper_bound):void 0},o=await this.client.v1.chain.get_table_by_scope(a),s=o.rows;return this.next_key=o.more,this.rowsCount+=s.length,(!o.more||s.length===0||this.rowsCount===this.maxRows)&&(this.endReached=!0),s}}class z8{constructor(e){this.debug=!1,this.defaultRowLimit=1e3,this.abi=Ut.from(e.abi),this.account=Xe.from(e.account),this.name=Xe.from(e.name),this.client=e.client,this.rowType=e.rowType,this.fieldToIndex=e.fieldToIndex;const t=this.abi.tables.find(n=>this.name.equals(n.name));if(!t)throw new Error(`Table ${this.name} not found in ABI`);this.tableABI=t,this.defaultScope=e.defaultScope,e.debug&&(this.debug=!0)}static from(e){return new z8(e)}query(e={}){const t={table:this.name,code:this.account,scope:e.scope!==void 0?String(e.scope):this.defaultScope||this.account,type:this.rowType,json:this.debug,index_position:e.index_position,key_type:e.key_type,lower_bound:zu(e.from),upper_bound:zu(e.to),limit:e.rowsPerAPIRequest||this.defaultRowLimit,reverse:e.reverse};if(e.index){const n=this.getFieldToIndex();if(!n[e.index])throw new Error(`Field ${e.index} is not listed in the ABI under key_names/key_types. Try using 'index_position' instead.`);t.index_position=n[e.index].index_position}return new AV({abi:this.abi,client:this.client,maxRows:e.maxRows,params:t})}async get(e,t={}){const n={table:this.name,code:this.account,scope:t.scope!==void 0?String(t.scope):this.defaultScope||this.account,type:this.rowType,limit:1,lower_bound:zu(e),upper_bound:zu(e),index_position:t.index_position,key_type:t.key_type,json:this.debug,reverse:t.reverse};if(t.index){const o=this.getFieldToIndex();if(!o[t.index])throw new Error(`Field ${t.index} is not listed in the ABI under key_names/key_types. Try using 'index_position' instead.`);n.index_position=o[t.index].index_position}const{rows:i}=await this.client.v1.chain.get_table_rows(n);if(i.length===0)return;let[a]=i;return this.debug||(this.rowType||(a=Zt.decode({data:a,abi:this.abi,type:this.tableABI.type})),t.json&&(a=Zt.objectify(a))),a}first(e,t={}){return this.query({...t,maxRows:e})}async all(e={}){return this.query(e).all()}getFieldToIndex(){if(this.fieldToIndex)return this.fieldToIndex;const e={};for(let t=0;t<this.tableABI.key_names.length;t++)e[this.tableABI.key_names[t]]={type:this.tableABI.key_types[t],index_position:EV(t)};return e}scopes(e={}){const t={code:this.account,table:this.name,lower_bound:zu(e.from),upper_bound:zu(e.to),limit:e.rowsPerAPIRequest||this.defaultRowLimit,reverse:e.reverse};return new SV({abi:this.abi,client:this.client,maxRows:e.maxRows,params:t})}}class k0{constructor(e,t={}){if(this.debug=!1,!e.abi)throw new Error("Contract requires an ABI");if(this.abi=Ut.from(e.abi),!e.account)throw new Error("Contract requires an account name");if(this.account=Xe.from(e.account),!e.client)throw new Error("Contract requires an APIClient");this.client=e.client,t.debug&&(this.debug=t.debug)}get tableNames(){return this.abi.tables.map(e=>String(e.name))}hasTable(e){return this.tableNames.includes(String(e))}table(e,t,n){if(!this.hasTable(e))throw new Error(`Contract (${this.account}) does not have a table named (${e})`);return z8.from({abi:this.abi,account:this.account,client:this.client,debug:this.debug,defaultScope:t,name:e,rowType:n})}get actionNames(){return this.abi.actions.map(e=>String(e.name))}hasAction(e){return this.actionNames.includes(String(e))}action(e,t,n){if(!this.hasAction(e))throw new Error(`Contract (${this.account}) does not have an action named (${e})`);let i=[Rx];return n&&n.authorization&&(i=n.authorization.map(a=>Vn.from(a))),Cr.from({account:this.account,name:e,authorization:i,data:t},this.abi)}async readonly(e,t){t||(t={});const n=this.action(e,t);n.authorization=[];const i=cn.from({ref_block_num:0,ref_block_prefix:0,expiration:0,actions:[n]}),o=(await this.client.v1.chain.send_read_only_transaction(i)).processed.action_traces[0].return_value_hex_data,s=this.abi.action_results.find(c=>Xe.from(c.name).equals(e));if(!s)throw new Error(`Return type for ${e} not defined in the ABI.`);return Zt.decode({data:o,type:s.result_type,abi:this.abi})}actions(e,t){return e.map(n=>this.action(n.name,n.data,{authorization:n.authorization||t?.authorization}))}ricardian(e){if(!this.hasAction(e))throw new Error(`Contract (${this.account}) does not have an action named (${e})`);const t=this.abi.actions.find(n=>Xe.from(n.name).equals(e));if(!t||!t.ricardian_contract)throw new Error(`Contract (${this.account}) action named (${e}) does not have a defined ricardian contract`);return t.ricardian_contract}}const MV={};class TV{constructor(e,t=MV){if(this.debug=!1,e.client)this.client=e.client;else throw new Error("A `client` must be passed when initializing the ContractKit.");t.abiCache?this.abiCache=t.abiCache:this.abiCache=new _V(this.client),t.abis&&t.abis.forEach(({name:n,abi:i})=>this.abiCache.setAbi(Xe.from(n),Ut.from(i))),t.debug&&(this.debug=t.debug)}async load(e){const t=Xe.from(e),n=await this.abiCache.getAbi(t);return new k0({abi:Ut.from(n),account:t,client:this.client},{debug:this.debug})}}var bm={exports:{}},j9;function RV(){return j9||(j9=1,(function(r,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,n=(function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a})();(function(a){(function(o){var s=typeof a<"u"&&a||typeof self<"u"&&self||typeof a<"u"&&a||{},c={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(S){return S&&DataView.prototype.isPrototypeOf(S)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(S){return S&&d.indexOf(Object.prototype.toString.call(S))>-1};function y(S){if(typeof S!="string"&&(S=String(S)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(S)||S==="")throw new TypeError('Invalid character in header field name: "'+S+'"');return S.toLowerCase()}function m(S){return typeof S!="string"&&(S=String(S)),S}function b(S){var _={next:function(){var U=S.shift();return{done:U===void 0,value:U}}};return c.iterable&&(_[Symbol.iterator]=function(){return _}),_}function v(S){this.map={},S instanceof v?S.forEach(function(_,U){this.append(U,_)},this):Array.isArray(S)?S.forEach(function(_){if(_.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+_.length);this.append(_[0],_[1])},this):S&&Object.getOwnPropertyNames(S).forEach(function(_){this.append(_,S[_])},this)}v.prototype.append=function(S,_){S=y(S),_=m(_);var U=this.map[S];this.map[S]=U?U+", "+_:_},v.prototype.delete=function(S){delete this.map[y(S)]},v.prototype.get=function(S){return S=y(S),this.has(S)?this.map[S]:null},v.prototype.has=function(S){return this.map.hasOwnProperty(y(S))},v.prototype.set=function(S,_){this.map[y(S)]=m(_)},v.prototype.forEach=function(S,_){for(var U in this.map)this.map.hasOwnProperty(U)&&S.call(_,this.map[U],U,this)},v.prototype.keys=function(){var S=[];return this.forEach(function(_,U){S.push(U)}),b(S)},v.prototype.values=function(){var S=[];return this.forEach(function(_){S.push(_)}),b(S)},v.prototype.entries=function(){var S=[];return this.forEach(function(_,U){S.push([U,_])}),b(S)},c.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function E(S){if(!S._noBody){if(S.bodyUsed)return Promise.reject(new TypeError("Already read"));S.bodyUsed=!0}}function x(S){return new Promise(function(_,U){S.onload=function(){_(S.result)},S.onerror=function(){U(S.error)}})}function D(S){var _=new FileReader,U=x(_);return _.readAsArrayBuffer(S),U}function N(S){var _=new FileReader,U=x(_),H=/charset=([A-Za-z0-9_-]+)/.exec(S.type),V=H?H[1]:"utf-8";return _.readAsText(S,V),U}function B(S){for(var _=new Uint8Array(S),U=new Array(_.length),H=0;H<_.length;H++)U[H]=String.fromCharCode(_[H]);return U.join("")}function k(S){if(S.slice)return S.slice(0);var _=new Uint8Array(S.byteLength);return _.set(new Uint8Array(S)),_.buffer}function F(){return this.bodyUsed=!1,this._initBody=function(S){this.bodyUsed=this.bodyUsed,this._bodyInit=S,S?typeof S=="string"?this._bodyText=S:c.blob&&Blob.prototype.isPrototypeOf(S)?this._bodyBlob=S:c.formData&&FormData.prototype.isPrototypeOf(S)?this._bodyFormData=S:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)?this._bodyText=S.toString():c.arrayBuffer&&c.blob&&l(S)?(this._bodyArrayBuffer=k(S.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(S)||h(S))?this._bodyArrayBuffer=k(S):this._bodyText=S=Object.prototype.toString.call(S):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof S=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(S)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var S=E(this);if(S)return S;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var S=E(this);return S||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(D);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var S=E(this);if(S)return S;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function z(S){var _=S.toUpperCase();return T.indexOf(_)>-1?_:S}function Z(S,_){if(!(this instanceof Z))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');_=_||{};var U=_.body;if(S instanceof Z){if(S.bodyUsed)throw new TypeError("Already read");this.url=S.url,this.credentials=S.credentials,_.headers||(this.headers=new v(S.headers)),this.method=S.method,this.mode=S.mode,this.signal=S.signal,!U&&S._bodyInit!=null&&(U=S._bodyInit,S.bodyUsed=!0)}else this.url=String(S);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new v(_.headers)),this.method=z(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal||(function(){if("AbortController"in s){var P=new AbortController;return P.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&U)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(U),(this.method==="GET"||this.method==="HEAD")&&(_.cache==="no-store"||_.cache==="no-cache")){var H=/([?&])_=[^&]*/;if(H.test(this.url))this.url=this.url.replace(H,"$1_="+new Date().getTime());else{var V=/\?/;this.url+=(V.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Z.prototype.clone=function(){return new Z(this,{body:this._bodyInit})};function Y(S){var _=new FormData;return S.trim().split("&").forEach(function(U){if(U){var H=U.split("="),V=H.shift().replace(/\+/g," "),P=H.join("=").replace(/\+/g," ");_.append(decodeURIComponent(V),decodeURIComponent(P))}}),_}function W(S){var _=new v,U=S.replace(/\r?\n[\t ]+/g," ");return U.split("\r").map(function(H){return H.indexOf(`
`)===0?H.substr(1,H.length):H}).forEach(function(H){var V=H.split(":"),P=V.shift().trim();if(P){var $=V.join(":").trim();try{_.append(P,$)}catch(te){console.warn("Response "+te.message)}}}),_}F.call(Z.prototype);function M(S,_){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=_.statusText===void 0?"":""+_.statusText,this.headers=new v(_.headers),this.url=_.url||"",this._initBody(S)}F.call(M.prototype),M.prototype.clone=function(){return new M(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},M.error=function(){var S=new M(null,{status:200,statusText:""});return S.ok=!1,S.status=0,S.type="error",S};var C=[301,302,303,307,308];M.redirect=function(S,_){if(C.indexOf(_)===-1)throw new RangeError("Invalid status code");return new M(null,{status:_,headers:{location:S}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(_,U){this.message=_,this.name=U;var H=Error(_);this.stack=H.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function R(S,_){return new Promise(function(U,H){var V=new Z(S,_);if(V.signal&&V.signal.aborted)return H(new o.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function $(){P.abort()}P.onload=function(){var ce={statusText:P.statusText,headers:W(P.getAllResponseHeaders()||"")};V.url.indexOf("file://")===0&&(P.status<200||P.status>599)?ce.status=200:ce.status=P.status,ce.url="responseURL"in P?P.responseURL:ce.headers.get("X-Request-URL");var fe="response"in P?P.response:P.responseText;setTimeout(function(){U(new M(fe,ce))},0)},P.onerror=function(){setTimeout(function(){H(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){H(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){H(new o.DOMException("Aborted","AbortError"))},0)};function te(ce){try{return ce===""&&s.location.href?s.location.href:ce}catch{return ce}}if(P.open(V.method,te(V.url),!0),V.credentials==="include"?P.withCredentials=!0:V.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(c.blob?P.responseType="blob":c.arrayBuffer&&(P.responseType="arraybuffer")),_&&typeof _.headers=="object"&&!(_.headers instanceof v||s.Headers&&_.headers instanceof s.Headers)){var ae=[];Object.getOwnPropertyNames(_.headers).forEach(function(ce){ae.push(y(ce)),P.setRequestHeader(ce,m(_.headers[ce]))}),V.headers.forEach(function(ce,fe){ae.indexOf(fe)===-1&&P.setRequestHeader(fe,ce)})}else V.headers.forEach(function(ce,fe){P.setRequestHeader(fe,ce)});V.signal&&(V.signal.addEventListener("abort",$),P.onreadystatechange=function(){P.readyState===4&&V.signal.removeEventListener("abort",$)}),P.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return R.polyfill=!0,s.fetch||(s.fetch=R,s.Headers=v,s.Request=Z,s.Response=M),o.Headers=v,o.Request=Z,o.Response=M,o.fetch=R,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=t.fetch?t:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(bm,bm.exports)),bm.exports}var OV=RV();const JI=Zo(OV);var wm={exports:{}},F_,$9;function CV(){if($9)return F_;$9=1;var r=1e3,e=r*60,t=e*60,n=t*24,i=n*7,a=n*365.25;F_=function(d,h){h=h||{};var y=typeof d;if(y==="string"&&d.length>0)return o(d);if(y==="number"&&isFinite(d))return h.long?c(d):s(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(h){var y=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return y*a;case"weeks":case"week":case"w":return y*i;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*t;case"minutes":case"minute":case"mins":case"min":case"m":return y*e;case"seconds":case"second":case"secs":case"sec":case"s":return y*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function s(d){var h=Math.abs(d);return h>=n?Math.round(d/n)+"d":h>=t?Math.round(d/t)+"h":h>=e?Math.round(d/e)+"m":h>=r?Math.round(d/r)+"s":d+"ms"}function c(d){var h=Math.abs(d);return h>=n?l(d,h,n,"day"):h>=t?l(d,h,t,"hour"):h>=e?l(d,h,e,"minute"):h>=r?l(d,h,r,"second"):d+" ms"}function l(d,h,y,m){var b=h>=y*1.5;return Math.round(d/y)+" "+m+(b?"s":"")}return F_}var z_,F9;function NV(){if(F9)return z_;F9=1;function r(e){n.debug=n,n.default=n,n.coerce=l,n.disable=s,n.enable=a,n.enabled=c,n.humanize=CV(),n.destroy=d,Object.keys(e).forEach(h=>{n[h]=e[h]}),n.names=[],n.skips=[],n.formatters={};function t(h){let y=0;for(let m=0;m<h.length;m++)y=(y<<5)-y+h.charCodeAt(m),y|=0;return n.colors[Math.abs(y)%n.colors.length]}n.selectColor=t;function n(h){let y,m=null,b,v;function E(...x){if(!E.enabled)return;const D=E,N=Number(new Date),B=N-(y||N);D.diff=B,D.prev=y,D.curr=N,y=N,x[0]=n.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let k=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(T,z)=>{if(T==="%%")return"%";k++;const Z=n.formatters[z];if(typeof Z=="function"){const Y=x[k];T=Z.call(D,Y),x.splice(k,1),k--}return T}),n.formatArgs.call(D,x),(D.log||n.log).apply(D,x)}return E.namespace=h,E.useColors=n.useColors(),E.color=n.selectColor(h),E.extend=i,E.destroy=n.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(b!==n.namespaces&&(b=n.namespaces,v=n.enabled(h)),v),set:x=>{m=x}}),typeof n.init=="function"&&n.init(E),E}function i(h,y){const m=n(this.namespace+(typeof y>"u"?":":y)+h);return m.log=this.log,m}function a(h){n.save(h),n.namespaces=h,n.names=[],n.skips=[];const y=(typeof h=="string"?h:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of y)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function o(h,y){let m=0,b=0,v=-1,E=0;for(;m<h.length;)if(b<y.length&&(y[b]===h[m]||y[b]==="*"))y[b]==="*"?(v=b,E=m,b++):(m++,b++);else if(v!==-1)b=v+1,E++,m=E;else return!1;for(;b<y.length&&y[b]==="*";)b++;return b===y.length}function s(){const h=[...n.names,...n.skips.map(y=>"-"+y)].join(",");return n.enable(""),h}function c(h){for(const y of n.skips)if(o(h,y))return!1;for(const y of n.names)if(o(h,y))return!0;return!1}function l(h){return h instanceof Error?h.stack||h.message:h}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return z_=r,z_}var z9;function BV(){return z9||(z9=1,(function(r,e){var t={};e.formatArgs=i,e.save=a,e.load=o,e.useColors=n,e.storage=s(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;l.splice(1,0,d,"color: inherit");let h=0,y=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(h++,m==="%c"&&(y=h))}),l.splice(y,0,d)}e.log=console.debug||console.log||(()=>{});function a(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function o(){let l;try{l=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=t.DEBUG),l}function s(){try{return localStorage}catch{}}r.exports=NV()(e);const{formatters:c}=r.exports;c.j=function(l){try{return JSON.stringify(l)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(wm,wm.exports)),wm.exports}var IV=BV();const qt=Zo(IV);var rd=9e15,wc=1e9,Ox="0123456789abcdef",gv="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",vv="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Cx={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-rd,maxE:rd,crypto:!1},XI,qo,vt=!0,hb="[DecimalError] ",vc=hb+"Invalid argument: ",eD=hb+"Precision limit exceeded",tD=hb+"crypto unavailable",rD="[object Decimal]",si=Math.floor,yn=Math.pow,DV=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,PV=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,UV=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,nD=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ls=1e7,mt=7,kV=9007199254740991,qV=gv.length-1,Nx=vv.length-1,He={toStringTag:rD};He.absoluteValue=He.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),ft(r)};He.ceil=function(){return ft(new this.constructor(this),this.e+1,2)};He.clampedTo=He.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(vc+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};He.comparedTo=He.cmp=function(r){var e,t,n,i,a=this,o=a.d,s=(r=new a.constructor(r)).d,c=a.s,l=r.s;if(!o||!s)return!c||!l?NaN:c!==l?c:o===s?0:!o^c<0?1:-1;if(!o[0]||!s[0])return o[0]?c:s[0]?-l:0;if(c!==l)return c;if(a.e!==r.e)return a.e>r.e^c<0?1:-1;for(n=o.length,i=s.length,e=0,t=n<i?n:i;e<t;++e)if(o[e]!==s[e])return o[e]>s[e]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};He.cosine=He.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+mt,n.rounding=1,t=LV(n,uD(n,t)),n.precision=r,n.rounding=e,ft(qo==2||qo==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};He.cubeRoot=He.cbrt=function(){var r,e,t,n,i,a,o,s,c,l,d=this,h=d.constructor;if(!d.isFinite()||d.isZero())return new h(d);for(vt=!1,a=d.s*yn(d.s*d,1/3),!a||Math.abs(a)==1/0?(t=zn(d.d),r=d.e,(a=(r-t.length+1)%3)&&(t+=a==1||a==-2?"0":"00"),a=yn(t,1/3),r=si((r+1)/3)-(r%3==(r<0?-1:2)),a==1/0?t="5e"+r:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=d.s):n=new h(a.toString()),o=(r=h.precision)+3;;)if(s=n,c=s.times(s).times(s),l=c.plus(d),n=mr(l.plus(d).times(s),l.plus(c),o+2,1),zn(s.d).slice(0,o)===(t=zn(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(ft(s,r+1,0),s.times(s).times(s).eq(d))){n=s;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ft(n,r+1,1),e=!n.times(n).times(n).eq(d));break}return vt=!0,ft(n,r,h.rounding,e)};He.decimalPlaces=He.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-si(this.e/mt))*mt,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};He.dividedBy=He.div=function(r){return mr(this,new this.constructor(r))};He.dividedToIntegerBy=He.divToInt=function(r){var e=this,t=e.constructor;return ft(mr(e,new t(r),0,1,1),t.precision,t.rounding)};He.equals=He.eq=function(r){return this.cmp(r)===0};He.floor=function(){return ft(new this.constructor(this),this.e+1,3)};He.greaterThan=He.gt=function(r){return this.cmp(r)>0};He.greaterThanOrEqualTo=He.gte=function(r){var e=this.cmp(r);return e==1||e===0};He.hyperbolicCosine=He.cosh=function(){var r,e,t,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;t=o.precision,n=o.rounding,o.precision=t+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(r=Math.ceil(i/3),e=(1/yb(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),a=Nd(o,1,a.times(e),new o(1),!0);for(var c,l=r,d=new o(8);l--;)c=a.times(a),a=s.minus(c.times(d.minus(c.times(d))));return ft(a,o.precision=t,o.rounding=n,!0)};He.hyperbolicSine=He.sinh=function(){var r,e,t,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,t=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Nd(a,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/yb(5,r)),i=Nd(a,2,i,i,!0);for(var o,s=new a(5),c=new a(16),l=new a(20);r--;)o=i.times(i),i=i.times(s.plus(o.times(c.times(o).plus(l))))}return a.precision=e,a.rounding=t,ft(i,e,t,!0)};He.hyperbolicTangent=He.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,mr(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};He.inverseCosine=He.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Ps(e,n,i):new e(0):new e(NaN):r.isZero()?Ps(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};He.inverseHyperbolicCosine=He.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,vt=!1,t=t.times(t).minus(1).sqrt().plus(t),vt=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};He.inverseHyperbolicSine=He.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,vt=!1,t=t.times(t).plus(1).sqrt().plus(t),vt=!0,n.precision=r,n.rounding=e,t.ln())};He.inverseHyperbolicTangent=He.atanh=function(){var r,e,t,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=a.precision,e=a.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?ft(new a(i),r,e,!0):(a.precision=t=n-i.e,i=mr(i.plus(1),new a(1).minus(i),t+r,1),a.precision=r+4,a.rounding=1,i=i.ln(),a.precision=r,a.rounding=e,i.times(.5))):new a(NaN)};He.inverseSine=He.asin=function(){var r,e,t,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),t=a.precision,n=a.rounding,e!==-1?e===0?(r=Ps(a,t+4,n).times(.5),r.s=i.s,r):new a(NaN):(a.precision=t+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=t,a.rounding=n,i.times(2)))};He.inverseTangent=He.atan=function(){var r,e,t,n,i,a,o,s,c,l=this,d=l.constructor,h=d.precision,y=d.rounding;if(l.isFinite()){if(l.isZero())return new d(l);if(l.abs().eq(1)&&h+4<=Nx)return o=Ps(d,h+4,y).times(.25),o.s=l.s,o}else{if(!l.s)return new d(NaN);if(h+4<=Nx)return o=Ps(d,h+4,y).times(.5),o.s=l.s,o}for(d.precision=s=h+10,d.rounding=1,t=Math.min(28,s/mt+2|0),r=t;r;--r)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(vt=!1,e=Math.ceil(s/mt),n=1,c=l.times(l),o=new d(l),i=l;r!==-1;)if(i=i.times(c),a=o.minus(i.div(n+=2)),i=i.times(c),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(r=e;o.d[r]===a.d[r]&&r--;);return t&&(o=o.times(2<<t-1)),vt=!0,ft(o,d.precision=h,d.rounding=y,!0)};He.isFinite=function(){return!!this.d};He.isInteger=He.isInt=function(){return!!this.d&&si(this.e/mt)>this.d.length-2};He.isNaN=function(){return!this.s};He.isNegative=He.isNeg=function(){return this.s<0};He.isPositive=He.isPos=function(){return this.s>0};He.isZero=function(){return!!this.d&&this.d[0]===0};He.lessThan=He.lt=function(r){return this.cmp(r)<0};He.lessThanOrEqualTo=He.lte=function(r){return this.cmp(r)<1};He.logarithm=He.log=function(r){var e,t,n,i,a,o,s,c,l=this,d=l.constructor,h=d.precision,y=d.rounding,m=5;if(r==null)r=new d(10),e=!0;else{if(r=new d(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new d(NaN);e=r.eq(10)}if(t=l.d,l.s<0||!t||!t[0]||l.eq(1))return new d(t&&!t[0]?-1/0:l.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)a=!0;else{for(i=t[0];i%10===0;)i/=10;a=i!==1}if(vt=!1,s=h+m,o=Ju(l,s),n=e?bv(d,s+10):Ju(r,s),c=mr(o,n,s,1),f0(c.d,i=h,y))do if(s+=10,o=Ju(l,s),n=e?bv(d,s+10):Ju(r,s),c=mr(o,n,s,1),!a){+zn(c.d).slice(i+1,i+15)+1==1e14&&(c=ft(c,h+1,0));break}while(f0(c.d,i+=10,y));return vt=!0,ft(c,h,y)};He.minus=He.sub=function(r){var e,t,n,i,a,o,s,c,l,d,h,y,m=this,b=m.constructor;if(r=new b(r),!m.d||!r.d)return!m.s||!r.s?r=new b(NaN):m.d?r.s=-r.s:r=new b(r.d||m.s!==r.s?m:NaN),r;if(m.s!=r.s)return r.s=-r.s,m.plus(r);if(l=m.d,y=r.d,s=b.precision,c=b.rounding,!l[0]||!y[0]){if(y[0])r.s=-r.s;else if(l[0])r=new b(m);else return new b(c===3?-0:0);return vt?ft(r,s,c):r}if(t=si(r.e/mt),d=si(m.e/mt),l=l.slice(),a=d-t,a){for(h=a<0,h?(e=l,a=-a,o=y.length):(e=y,t=d,o=l.length),n=Math.max(Math.ceil(s/mt),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=l.length,o=y.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(l[n]!=y[n]){h=l[n]<y[n];break}a=0}for(h&&(e=l,l=y,y=e,r.s=-r.s),o=l.length,n=y.length-o;n>0;--n)l[o++]=0;for(n=y.length;n>a;){if(l[--n]<y[n]){for(i=n;i&&l[--i]===0;)l[i]=ls-1;--l[i],l[n]+=ls}l[n]-=y[n]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--t;return l[0]?(r.d=l,r.e=pb(l,t),vt?ft(r,s,c):r):new b(c===3?-0:0)};He.modulo=He.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?ft(new n(t),n.precision,n.rounding):(vt=!1,n.modulo==9?(e=mr(t,r.abs(),0,3,1),e.s*=r.s):e=mr(t,r,0,n.modulo,1),e=e.times(r),vt=!0,t.minus(e))};He.naturalExponential=He.exp=function(){return Bx(this)};He.naturalLogarithm=He.ln=function(){return Ju(this)};He.negated=He.neg=function(){var r=new this.constructor(this);return r.s=-r.s,ft(r)};He.plus=He.add=function(r){var e,t,n,i,a,o,s,c,l,d,h=this,y=h.constructor;if(r=new y(r),!h.d||!r.d)return!h.s||!r.s?r=new y(NaN):h.d||(r=new y(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(l=h.d,d=r.d,s=y.precision,c=y.rounding,!l[0]||!d[0])return d[0]||(r=new y(h)),vt?ft(r,s,c):r;if(a=si(h.e/mt),n=si(r.e/mt),l=l.slice(),i=a-n,i){for(i<0?(t=l,i=-i,o=d.length):(t=d,n=a,o=l.length),a=Math.ceil(s/mt),o=a>o?a+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=l.length,i=d.length,o-i<0&&(i=o,t=d,d=l,l=t),e=0;i;)e=(l[--i]=l[i]+d[i]+e)/ls|0,l[i]%=ls;for(e&&(l.unshift(e),++n),o=l.length;l[--o]==0;)l.pop();return r.d=l,r.e=pb(l,n),vt?ft(r,s,c):r};He.precision=He.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(vc+r);return t.d?(e=iD(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};He.round=function(){var r=this,e=r.constructor;return ft(new e(r),r.e+1,e.rounding)};He.sine=He.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+mt,n.rounding=1,t=$V(n,uD(n,t)),n.precision=r,n.rounding=e,ft(qo>2?t.neg():t,r,e,!0)):new n(NaN)};He.squareRoot=He.sqrt=function(){var r,e,t,n,i,a,o=this,s=o.d,c=o.e,l=o.s,d=o.constructor;if(l!==1||!s||!s[0])return new d(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(vt=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=zn(s),(e.length+c)%2==0&&(e+="0"),l=Math.sqrt(e),c=si((c+1)/2)-(c<0||c%2),l==1/0?e="5e"+c:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new d(e)):n=new d(l.toString()),t=(c=d.precision)+3;;)if(a=n,n=a.plus(mr(o,a,t+2,1)).times(.5),zn(a.d).slice(0,t)===(e=zn(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(ft(a,c+1,0),a.times(a).eq(o))){n=a;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ft(n,c+1,1),r=!n.times(n).eq(o));break}return vt=!0,ft(n,c,d.rounding,r)};He.tangent=He.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=mr(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,ft(qo==2||qo==4?t.neg():t,r,e,!0)):new n(NaN)};He.times=He.mul=function(r){var e,t,n,i,a,o,s,c,l,d=this,h=d.constructor,y=d.d,m=(r=new h(r)).d;if(r.s*=d.s,!y||!y[0]||!m||!m[0])return new h(!r.s||y&&!y[0]&&!m||m&&!m[0]&&!y?NaN:!y||!m?r.s/0:r.s*0);for(t=si(d.e/mt)+si(r.e/mt),c=y.length,l=m.length,c<l&&(a=y,y=m,m=a,o=c,c=l,l=o),a=[],o=c+l,n=o;n--;)a.push(0);for(n=l;--n>=0;){for(e=0,i=c+n;i>n;)s=a[i]+m[n]*y[i-n-1]+e,a[i--]=s%ls|0,e=s/ls|0;a[i]=(a[i]+e)%ls|0}for(;!a[--o];)a.pop();return e?++t:a.shift(),r.d=a,r.e=pb(a,t),vt?ft(r,h.precision,h.rounding):r};He.toBinary=function(r,e){return V8(this,2,r,e)};He.toDecimalPlaces=He.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(Vi(r,0,wc),e===void 0?e=n.rounding:Vi(e,0,8),ft(t,r+t.e+1,e))};He.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Hs(n,!0):(Vi(r,0,wc),e===void 0?e=i.rounding:Vi(e,0,8),n=ft(new i(n),r+1,e),t=Hs(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};He.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?t=Hs(i):(Vi(r,0,wc),e===void 0?e=a.rounding:Vi(e,0,8),n=ft(new a(i),r+i.e+1,e),t=Hs(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};He.toFraction=function(r){var e,t,n,i,a,o,s,c,l,d,h,y,m=this,b=m.d,v=m.constructor;if(!b)return new v(m);if(l=t=new v(1),n=c=new v(0),e=new v(n),a=e.e=iD(b)-m.e-1,o=a%mt,e.d[0]=yn(10,o<0?mt+o:o),r==null)r=a>0?e:l;else{if(s=new v(r),!s.isInt()||s.lt(l))throw Error(vc+s);r=s.gt(e)?a>0?e:l:s}for(vt=!1,s=new v(zn(b)),d=v.precision,v.precision=a=b.length*mt*2;h=mr(s,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=l,l=c.plus(h.times(i)),c=i,i=e,e=s.minus(h.times(i)),s=i;return i=mr(r.minus(t),n,0,1,1),c=c.plus(i.times(l)),t=t.plus(i.times(n)),c.s=l.s=m.s,y=mr(l,n,a,1).minus(m).abs().cmp(mr(c,t,a,1).minus(m).abs())<1?[l,n]:[c,t],v.precision=d,vt=!0,y};He.toHexadecimal=He.toHex=function(r,e){return V8(this,16,r,e)};He.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:Vi(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(vt=!1,t=mr(t,r,0,e,1).times(r),vt=!0,ft(t)):(r.s=t.s,t=r),t};He.toNumber=function(){return+this};He.toOctal=function(r,e){return V8(this,8,r,e)};He.toPower=He.pow=function(r){var e,t,n,i,a,o,s=this,c=s.constructor,l=+(r=new c(r));if(!s.d||!r.d||!s.d[0]||!r.d[0])return new c(yn(+s,l));if(s=new c(s),s.eq(1))return s;if(n=c.precision,a=c.rounding,r.eq(1))return ft(s,n,a);if(e=si(r.e/mt),e>=r.d.length-1&&(t=l<0?-l:l)<=kV)return i=aD(c,s,t,n),r.s<0?new c(1).div(i):ft(i,n,a);if(o=s.s,o<0){if(e<r.d.length-1)return new c(NaN);if((r.d[e]&1)==0&&(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return t=yn(+s,l),e=t==0||!isFinite(t)?si(l*(Math.log("0."+zn(s.d))/Math.LN10+s.e+1)):new c(t+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?o/0:0):(vt=!1,c.rounding=s.s=1,t=Math.min(12,(e+"").length),i=Bx(r.times(Ju(s,n+t)),n),i.d&&(i=ft(i,n+5,1),f0(i.d,n,a)&&(e=n+10,i=ft(Bx(r.times(Ju(s,e+t)),e),e+5,1),+zn(i.d).slice(n+1,n+15)+1==1e14&&(i=ft(i,n+1,0)))),i.s=o,vt=!0,c.rounding=a,ft(i,n,a))};He.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Hs(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Vi(r,1,wc),e===void 0?e=i.rounding:Vi(e,0,8),n=ft(new i(n),r,e),t=Hs(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};He.toSignificantDigits=He.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(Vi(r,1,wc),e===void 0?e=n.rounding:Vi(e,0,8)),ft(new n(t),r,e)};He.toString=function(){var r=this,e=r.constructor,t=Hs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};He.truncated=He.trunc=function(){return ft(new this.constructor(this),this.e+1,1)};He.valueOf=He.toJSON=function(){var r=this,e=r.constructor,t=Hs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function zn(r){var e,t,n,i=r.length-1,a="",o=r[0];if(i>0){for(a+=o,e=1;e<i;e++)n=r[e]+"",t=mt-n.length,t&&(a+=Vu(t)),a+=n;o=r[e],n=o+"",t=mt-n.length,t&&(a+=Vu(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Vi(r,e,t){if(r!==~~r||r<e||r>t)throw Error(vc+r)}function f0(r,e,t,n){var i,a,o,s;for(a=r[0];a>=10;a/=10)--e;return--e<0?(e+=mt,i=0):(i=Math.ceil((e+1)/mt),e%=mt),a=yn(10,mt-e),s=r[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=t<4&&s==99999||t>3&&s==49999||s==5e4||s==0):o=(t<4&&s+1==a||t>3&&s+1==a/2)&&(r[i+1]/a/100|0)==yn(10,e-2)-1||(s==a/2||s==0)&&(r[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||t<4)&&s==9999||!n&&t>3&&s==4999):o=((n||t<4)&&s+1==a||!n&&t>3&&s+1==a/2)&&(r[i+1]/a/1e3|0)==yn(10,e-3)-1,o}function W1(r,e,t){for(var n,i=[0],a,o=0,s=r.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Ox.indexOf(r.charAt(o++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function LV(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/yb(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=Nd(r,1,e.times(i),new r(1));for(var a=t;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return r.precision-=t,e}var mr=(function(){function r(n,i,a){var o,s=0,c=n.length;for(n=n.slice();c--;)o=n[c]*i+s,n[c]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,c;if(a!=o)c=a>o?1:-1;else for(s=c=0;s<a;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function t(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,c){var l,d,h,y,m,b,v,E,x,D,N,B,k,F,T,z,Z,Y,W,M,C=n.constructor,R=n.s==i.s?1:-1,S=n.d,_=i.d;if(!S||!S[0]||!_||!_[0])return new C(!n.s||!i.s||(S?_&&S[0]==_[0]:!_)?NaN:S&&S[0]==0||!_?R*0:R/0);for(c?(m=1,d=n.e-i.e):(c=ls,m=mt,d=si(n.e/m)-si(i.e/m)),W=_.length,Z=S.length,x=new C(R),D=x.d=[],h=0;_[h]==(S[h]||0);h++);if(_[h]>(S[h]||0)&&d--,a==null?(F=a=C.precision,o=C.rounding):s?F=a+(n.e-i.e)+1:F=a,F<0)D.push(1),b=!0;else{if(F=F/m+2|0,h=0,W==1){for(y=0,_=_[0],F++;(h<Z||y)&&F--;h++)T=y*c+(S[h]||0),D[h]=T/_|0,y=T%_|0;b=y||h<Z}else{for(y=c/(_[0]+1)|0,y>1&&(_=r(_,y,c),S=r(S,y,c),W=_.length,Z=S.length),z=W,N=S.slice(0,W),B=N.length;B<W;)N[B++]=0;M=_.slice(),M.unshift(0),Y=_[0],_[1]>=c/2&&++Y;do y=0,l=e(_,N,W,B),l<0?(k=N[0],W!=B&&(k=k*c+(N[1]||0)),y=k/Y|0,y>1?(y>=c&&(y=c-1),v=r(_,y,c),E=v.length,B=N.length,l=e(v,N,E,B),l==1&&(y--,t(v,W<E?M:_,E,c))):(y==0&&(l=y=1),v=_.slice()),E=v.length,E<B&&v.unshift(0),t(N,v,B,c),l==-1&&(B=N.length,l=e(_,N,W,B),l<1&&(y++,t(N,W<B?M:_,B,c))),B=N.length):l===0&&(y++,N=[0]),D[h++]=y,l&&N[0]?N[B++]=S[z]||0:(N=[S[z]],B=1);while((z++<Z||N[0]!==void 0)&&F--);b=N[0]!==void 0}D[0]||D.shift()}if(m==1)x.e=d,XI=b;else{for(h=1,y=D[0];y>=10;y/=10)h++;x.e=h+d*m-1,ft(x,s?a+x.e+1:a,o,b)}return x}})();function ft(r,e,t,n){var i,a,o,s,c,l,d,h,y,m=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,s=h[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=mt,o=e,d=h[y=0],c=d/yn(10,i-o-1)%10|0;else if(y=Math.ceil((a+1)/mt),s=h.length,y>=s)if(n){for(;s++<=y;)h.push(0);d=c=0,i=1,a%=mt,o=a-mt+1}else break e;else{for(d=s=h[y],i=1;s>=10;s/=10)i++;a%=mt,o=a-mt+i,c=o<0?0:d/yn(10,i-o-1)%10|0}if(n=n||e<0||h[y+1]!==void 0||(o<0?d:d%yn(10,i-o-1)),l=t<4?(c||n)&&(t==0||t==(r.s<0?3:2)):c>5||c==5&&(t==4||n||t==6&&(a>0?o>0?d/yn(10,i-o):0:h[y-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,l?(e-=r.e+1,h[0]=yn(10,(mt-e%mt)%mt),r.e=-e||0):h[0]=r.e=0,r;if(a==0?(h.length=y,s=1,y--):(h.length=y+1,s=yn(10,mt-a),h[y]=o>0?(d/yn(10,i-o)%yn(10,o)|0)*s:0),l)for(;;)if(y==0){for(a=1,o=h[0];o>=10;o/=10)a++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(r.e++,h[0]==ls&&(h[0]=1));break}else{if(h[y]+=s,h[y]!=ls)break;h[y--]=0,s=1}for(a=h.length;h[--a]===0;)h.pop()}return vt&&(r.e>m.maxE?(r.d=null,r.e=NaN):r.e<m.minE&&(r.e=0,r.d=[0])),r}function Hs(r,e,t){if(!r.isFinite())return oD(r);var n,i=r.e,a=zn(r.d),o=a.length;return e?(t&&(n=t-o)>0?a=a.charAt(0)+"."+a.slice(1)+Vu(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(r.e<0?"e":"e+")+r.e):i<0?(a="0."+Vu(-i-1)+a,t&&(n=t-o)>0&&(a+=Vu(n))):i>=o?(a+=Vu(i+1-o),t&&(n=t-i-1)>0&&(a=a+"."+Vu(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-o)>0&&(i+1===o&&(a+="."),a+=Vu(n))),a}function pb(r,e){var t=r[0];for(e*=mt;t>=10;t/=10)e++;return e}function bv(r,e,t){if(e>qV)throw vt=!0,t&&(r.precision=t),Error(eD);return ft(new r(gv),e,1,!0)}function Ps(r,e,t){if(e>Nx)throw Error(eD);return ft(new r(vv),e,t,!0)}function iD(r){var e=r.length-1,t=e*mt+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Vu(r){for(var e="";r--;)e+="0";return e}function aD(r,e,t,n){var i,a=new r(1),o=Math.ceil(n/mt+4);for(vt=!1;;){if(t%2&&(a=a.times(e),H9(a.d,o)&&(i=!0)),t=si(t/2),t===0){t=a.d.length-1,i&&a.d[t]===0&&++a.d[t];break}e=e.times(e),H9(e.d,o)}return vt=!0,a}function V9(r){return r.d[r.d.length-1]&1}function sD(r,e,t){for(var n,i,a=new r(e[0]),o=0;++o<e.length;){if(i=new r(e[o]),!i.s){a=i;break}n=a.cmp(i),(n===t||n===0&&a.s===t)&&(a=i)}return a}function Bx(r,e){var t,n,i,a,o,s,c,l=0,d=0,h=0,y=r.constructor,m=y.rounding,b=y.precision;if(!r.d||!r.d[0]||r.e>17)return new y(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(vt=!1,c=b):c=e,s=new y(.03125);r.e>-2;)r=r.times(s),h+=5;for(n=Math.log(yn(2,h))/Math.LN10*2+5|0,c+=n,t=a=o=new y(1),y.precision=c;;){if(a=ft(a.times(r),c,1),t=t.times(++d),s=o.plus(mr(a,t,c,1)),zn(s.d).slice(0,c)===zn(o.d).slice(0,c)){for(i=h;i--;)o=ft(o.times(o),c,1);if(e==null)if(l<3&&f0(o.d,c-n,m,l))y.precision=c+=10,t=a=s=new y(1),d=0,l++;else return ft(o,y.precision=b,m,vt=!0);else return y.precision=b,o}o=s}}function Ju(r,e){var t,n,i,a,o,s,c,l,d,h,y,m=1,b=10,v=r,E=v.d,x=v.constructor,D=x.rounding,N=x.precision;if(v.s<0||!E||!E[0]||!v.e&&E[0]==1&&E.length==1)return new x(E&&!E[0]?-1/0:v.s!=1?NaN:E?0:v);if(e==null?(vt=!1,d=N):d=e,x.precision=d+=b,t=zn(E),n=t.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)v=v.times(r),t=zn(v.d),n=t.charAt(0),m++;a=v.e,n>1?(v=new x("0."+t),a++):v=new x(n+"."+t.slice(1))}else return l=bv(x,d+2,N).times(a+""),v=Ju(new x(n+"."+t.slice(1)),d-b).plus(l),x.precision=N,e==null?ft(v,N,D,vt=!0):v;for(h=v,c=o=v=mr(v.minus(1),v.plus(1),d,1),y=ft(v.times(v),d,1),i=3;;){if(o=ft(o.times(y),d,1),l=c.plus(mr(o,new x(i),d,1)),zn(l.d).slice(0,d)===zn(c.d).slice(0,d))if(c=c.times(2),a!==0&&(c=c.plus(bv(x,d+2,N).times(a+""))),c=mr(c,new x(m),d,1),e==null)if(f0(c.d,d-b,D,s))x.precision=d+=b,l=o=v=mr(h.minus(1),h.plus(1),d,1),y=ft(v.times(v),d,1),i=s=1;else return ft(c,x.precision=N,D,vt=!0);else return x.precision=N,c;c=l,i+=2}}function oD(r){return String(r.s*r.s/0)}function Z1(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%mt,t<0&&(n+=mt),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=mt;n<i;)r.d.push(+e.slice(n,n+=mt));e=e.slice(n),n=mt-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),vt&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function jV(r,e){var t,n,i,a,o,s,c,l,d;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),nD.test(e))return Z1(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(PV.test(e))t=16,e=e.toLowerCase();else if(DV.test(e))t=2;else if(UV.test(e))t=8;else throw Error(vc+e);for(a=e.search(/p/i),a>0?(c=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=r.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=aD(n,new n(t),a,a*2)),l=W1(e,t,ls),d=l.length-1,a=d;l[a]===0;--a)l.pop();return a<0?new n(r.s*0):(r.e=pb(l,d),r.d=l,vt=!1,o&&(r=mr(r,i,s*4)),c&&(r=r.times(Math.abs(c)<54?yn(2,c):Qd.pow(2,c))),vt=!0,r)}function $V(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:Nd(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/yb(5,t)),e=Nd(r,2,e,e);for(var i,a=new r(5),o=new r(16),s=new r(20);t--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Nd(r,e,t,n,i){var a,o,s,c,l=r.precision,d=Math.ceil(l/mt);for(vt=!1,c=t.times(t),s=new r(n);;){if(o=mr(s.times(c),new r(e++*e++),l,1),s=i?n.plus(o):n.minus(o),n=mr(o.times(c),new r(e++*e++),l,1),o=s.plus(n),o.d[d]!==void 0){for(a=d;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return vt=!0,o.d.length=d+1,o}function yb(r,e){for(var t=r;--e;)t*=r;return t}function uD(r,e){var t,n=e.s<0,i=Ps(r,r.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return qo=n?4:1,e;if(t=e.divToInt(i),t.isZero())qo=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(a))return qo=V9(t)?n?2:3:n?4:1,e;qo=V9(t)?n?1:4:n?3:2}return e.minus(i).abs()}function V8(r,e,t,n){var i,a,o,s,c,l,d,h,y,m=r.constructor,b=t!==void 0;if(b?(Vi(t,1,wc),n===void 0?n=m.rounding:Vi(n,0,8)):(t=m.precision,n=m.rounding),!r.isFinite())d=oD(r);else{for(d=Hs(r),o=d.indexOf("."),b?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(d=d.replace(".",""),y=new m(1),y.e=d.length-o,y.d=W1(Hs(y),10,i),y.e=y.d.length),h=W1(d,10,i),a=c=h.length;h[--c]==0;)h.pop();if(!h[0])d=b?"0p+0":"0";else{if(o<0?a--:(r=new m(r),r.d=h,r.e=a,r=mr(r,y,t,n,0,i),h=r.d,a=r.e,l=XI),o=h[t],s=i/2,l=l||h[t+1]!==void 0,l=n<4?(o!==void 0||l)&&(n===0||n===(r.s<0?3:2)):o>s||o===s&&(n===4||l||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,l)for(;++h[--t]>i-1;)h[t]=0,t||(++a,h.unshift(1));for(c=h.length;!h[c-1];--c);for(o=0,d="";o<c;o++)d+=Ox.charAt(h[o]);if(b){if(c>1)if(e==16||e==8){for(o=e==16?4:3,--c;c%o;c++)d+="0";for(h=W1(d,i,e),c=h.length;!h[c-1];--c);for(o=1,d="1.";o<c;o++)d+=Ox.charAt(h[o])}else d=d.charAt(0)+"."+d.slice(1);d=d+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)d="0"+d;d="0."+d}else if(++a>c)for(a-=c;a--;)d+="0";else a<c&&(d=d.slice(0,a)+"."+d.slice(a))}d=(e==16?"0x":e==2?"0b":e==8?"0o":"")+d}return r.s<0?"-"+d:d}function H9(r,e){if(r.length>e)return r.length=e,!0}function FV(r){return new this(r).abs()}function zV(r){return new this(r).acos()}function VV(r){return new this(r).acosh()}function HV(r,e){return new this(r).plus(e)}function KV(r){return new this(r).asin()}function GV(r){return new this(r).asinh()}function WV(r){return new this(r).atan()}function ZV(r){return new this(r).atanh()}function YV(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,a=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ps(this,a,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ps(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ps(this,a,1).times(.5),t.s=r.s):e.s<0?(this.precision=a,this.rounding=1,t=this.atan(mr(r,e,a,1)),e=Ps(this,a,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(mr(r,e,a,1)),t}function QV(r){return new this(r).cbrt()}function JV(r){return ft(r=new this(r),r.e+1,2)}function XV(r,e,t){return new this(r).clamp(e,t)}function eH(r){if(!r||typeof r!="object")throw Error(hb+"Object expected");var e,t,n,i=r.defaults===!0,a=["precision",1,wc,"rounding",0,8,"toExpNeg",-rd,0,"toExpPos",0,rd,"maxE",0,rd,"minE",-rd,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(t=a[e],i&&(this[t]=Cx[t]),(n=r[t])!==void 0)if(si(n)===n&&n>=a[e+1]&&n<=a[e+2])this[t]=n;else throw Error(vc+t+": "+n);if(t="crypto",i&&(this[t]=Cx[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(tD);else this[t]=!1;else throw Error(vc+t+": "+n);return this}function tH(r){return new this(r).cos()}function rH(r){return new this(r).cosh()}function cD(r){var e,t,n;function i(a){var o,s,c,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,K9(a)){l.s=a.s,vt?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;vt?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[a]):(l.e=o,l.d=[a]);return}if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return Z1(l,a.toString())}if(c==="string")return(s=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(s===43&&(a=a.slice(1)),l.s=1),nD.test(a)?Z1(l,a):jV(l,a);if(c==="bigint")return a<0?(a=-a,l.s=-1):l.s=1,Z1(l,a.toString());throw Error(vc+a)}if(i.prototype=He,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=eH,i.clone=cD,i.isDecimal=K9,i.abs=FV,i.acos=zV,i.acosh=VV,i.add=HV,i.asin=KV,i.asinh=GV,i.atan=WV,i.atanh=ZV,i.atan2=YV,i.cbrt=QV,i.ceil=JV,i.clamp=XV,i.cos=tH,i.cosh=rH,i.div=nH,i.exp=iH,i.floor=aH,i.hypot=sH,i.ln=oH,i.log=uH,i.log10=lH,i.log2=cH,i.max=fH,i.min=dH,i.mod=hH,i.mul=pH,i.pow=yH,i.random=mH,i.round=gH,i.sign=vH,i.sin=bH,i.sinh=wH,i.sqrt=_H,i.sub=EH,i.sum=xH,i.tan=AH,i.tanh=SH,i.trunc=MH,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function nH(r,e){return new this(r).div(e)}function iH(r){return new this(r).exp()}function aH(r){return ft(r=new this(r),r.e+1,3)}function sH(){var r,e,t=new this(0);for(vt=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return vt=!0,new this(1/0);t=e}return vt=!0,t.sqrt()}function K9(r){return r instanceof Qd||r&&r.toStringTag===rD||!1}function oH(r){return new this(r).ln()}function uH(r,e){return new this(r).log(e)}function cH(r){return new this(r).log(2)}function lH(r){return new this(r).log(10)}function fH(){return sD(this,arguments,-1)}function dH(){return sD(this,arguments,1)}function hH(r,e){return new this(r).mod(e)}function pH(r,e){return new this(r).mul(e)}function yH(r,e){return new this(r).pow(e)}function mH(r){var e,t,n,i,a=0,o=new this(1),s=[];if(r===void 0?r=this.precision:Vi(r,1,wc),n=Math.ceil(r/mt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(tD);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],r%=mt,n&&r&&(i=yn(10,mt-r),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)t=0,s=[0];else{for(t=-1;s[0]===0;t-=mt)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<mt&&(t-=mt-n)}return o.e=t,o.d=s,o}function gH(r){return ft(r=new this(r),r.e+1,this.rounding)}function vH(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function bH(r){return new this(r).sin()}function wH(r){return new this(r).sinh()}function _H(r){return new this(r).sqrt()}function EH(r,e){return new this(r).sub(e)}function xH(){var r=0,e=arguments,t=new this(e[r]);for(vt=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return vt=!0,ft(t,this.precision,this.rounding)}function AH(r){return new this(r).tan()}function SH(r){return new this(r).tanh()}function MH(r){return ft(r=new this(r),r.e+1,1)}He[Symbol.for("nodejs.util.inspect.custom")]=He.toString;He[Symbol.toStringTag]="Decimal";var Qd=He.constructor=cD(Cx);gv=new Qd(gv);vv=new Qd(vv);const Rf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function q0(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Ix(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Ll(r,...e){if(!q0(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function lD(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ix(r.outputLen),Ix(r.blockLen)}function wv(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function TH(r,e){Ll(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Bd(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function V_(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Es(r,e){return r<<32-e|r>>>e}const fD=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",RH=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function pl(r){if(Ll(r),fD)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=RH[r[t]];return e}const _o={_0:48,_9:57,A:65,F:70,a:97,f:102};function G9(r){if(r>=_o._0&&r<=_o._9)return r-_o._0;if(r>=_o.A&&r<=_o.F)return r-(_o.A-10);if(r>=_o.a&&r<=_o.f)return r-(_o.a-10)}function _v(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(fD)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,a=0;i<t;i++,a+=2){const o=G9(r.charCodeAt(a)),s=G9(r.charCodeAt(a+1));if(o===void 0||s===void 0){const c=r[a]+r[a+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+a)}n[i]=o*16+s}return n}function OH(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function H8(r){return typeof r=="string"&&(r=OH(r)),Ll(r),r}function Bs(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Ll(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const a=r[n];t.set(a,i),i+=a.length}return t}let dD=class{};function K8(r){const e=n=>r().update(H8(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function G8(r=32){if(Rf&&typeof Rf.getRandomValues=="function")return Rf.getRandomValues(new Uint8Array(r));if(Rf&&typeof Rf.randomBytes=="function")return Uint8Array.from(Rf.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function CH(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(t>>i&a),s=Number(t&a),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,s,n)}function NH(r,e,t){return r&e^~r&t}function BH(r,e,t){return r&e^r&t^e&t}class hD extends dD{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=V_(this.buffer)}update(e){wv(this),e=H8(e),Ll(e);const{view:t,buffer:n,blockLen:i}=this,a=e.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const c=V_(e);for(;i<=a-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){wv(this),TH(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;t[o++]=128,Bd(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;CH(n,i-8,BigInt(this.length*8),a),this.process(n,0);const s=V_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)s.setUint32(4*h,d[h],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.destroyed=o,e.finished=a,e.length=i,e.pos=s,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Au=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ei=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),ti=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),_m=BigInt(2**32-1),W9=BigInt(32);function IH(r,e=!1){return e?{h:Number(r&_m),l:Number(r>>W9&_m)}:{h:Number(r>>W9&_m)|0,l:Number(r&_m)|0}}function DH(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let a=0;a<t;a++){const{h:o,l:s}=IH(r[a],e);[n[a],i[a]]=[o,s]}return[n,i]}const Z9=(r,e,t)=>r>>>t,Y9=(r,e,t)=>r<<32-t|e>>>t,Of=(r,e,t)=>r>>>t|e<<32-t,Cf=(r,e,t)=>r<<32-t|e>>>t,Em=(r,e,t)=>r<<64-t|e>>>t-32,xm=(r,e,t)=>r>>>t-32|e<<64-t;function Eo(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const PH=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),UH=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,kH=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),qH=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,LH=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),jH=(r,e,t,n,i,a)=>e+t+n+i+a+(r/2**32|0)|0,$H=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Su=new Uint32Array(64);let FH=class extends hD{constructor(e=32){super(64,e,8,!1),this.A=Au[0]|0,this.B=Au[1]|0,this.C=Au[2]|0,this.D=Au[3]|0,this.E=Au[4]|0,this.F=Au[5]|0,this.G=Au[6]|0,this.H=Au[7]|0}get(){const{A:e,B:t,C:n,D:i,E:a,F:o,G:s,H:c}=this;return[e,t,n,i,a,o,s,c]}set(e,t,n,i,a,o,s,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)Su[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const y=Su[h-15],m=Su[h-2],b=Es(y,7)^Es(y,18)^y>>>3,v=Es(m,17)^Es(m,19)^m>>>10;Su[h]=v+Su[h-7]+b+Su[h-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:c,G:l,H:d}=this;for(let h=0;h<64;h++){const y=Es(s,6)^Es(s,11)^Es(s,25),m=d+y+NH(s,c,l)+$H[h]+Su[h]|0,v=(Es(n,2)^Es(n,13)^Es(n,22))+BH(n,i,a)|0;d=l,l=c,c=s,s=o+m|0,o=a,a=i,i=n,n=m+v|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,a,o,s,c,l,d)}roundClean(){Bd(Su)}destroy(){this.set(0,0,0,0,0,0,0,0),Bd(this.buffer)}};const pD=DH(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),zH=pD[0],VH=pD[1],Mu=new Uint32Array(80),Tu=new Uint32Array(80);class yD extends hD{constructor(e=64){super(128,e,16,!1),this.Ah=ti[0]|0,this.Al=ti[1]|0,this.Bh=ti[2]|0,this.Bl=ti[3]|0,this.Ch=ti[4]|0,this.Cl=ti[5]|0,this.Dh=ti[6]|0,this.Dl=ti[7]|0,this.Eh=ti[8]|0,this.El=ti[9]|0,this.Fh=ti[10]|0,this.Fl=ti[11]|0,this.Gh=ti[12]|0,this.Gl=ti[13]|0,this.Hh=ti[14]|0,this.Hl=ti[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:a,Cl:o,Dh:s,Dl:c,Eh:l,El:d,Fh:h,Fl:y,Gh:m,Gl:b,Hh:v,Hl:E}=this;return[e,t,n,i,a,o,s,c,l,d,h,y,m,b,v,E]}set(e,t,n,i,a,o,s,c,l,d,h,y,m,b,v,E){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=a|0,this.Cl=o|0,this.Dh=s|0,this.Dl=c|0,this.Eh=l|0,this.El=d|0,this.Fh=h|0,this.Fl=y|0,this.Gh=m|0,this.Gl=b|0,this.Hh=v|0,this.Hl=E|0}process(e,t){for(let N=0;N<16;N++,t+=4)Mu[N]=e.getUint32(t),Tu[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){const B=Mu[N-15]|0,k=Tu[N-15]|0,F=Of(B,k,1)^Of(B,k,8)^Z9(B,k,7),T=Cf(B,k,1)^Cf(B,k,8)^Y9(B,k,7),z=Mu[N-2]|0,Z=Tu[N-2]|0,Y=Of(z,Z,19)^Em(z,Z,61)^Z9(z,Z,6),W=Cf(z,Z,19)^xm(z,Z,61)^Y9(z,Z,6),M=kH(T,W,Tu[N-7],Tu[N-16]),C=qH(M,F,Y,Mu[N-7],Mu[N-16]);Mu[N]=C|0,Tu[N]=M|0}let{Ah:n,Al:i,Bh:a,Bl:o,Ch:s,Cl:c,Dh:l,Dl:d,Eh:h,El:y,Fh:m,Fl:b,Gh:v,Gl:E,Hh:x,Hl:D}=this;for(let N=0;N<80;N++){const B=Of(h,y,14)^Of(h,y,18)^Em(h,y,41),k=Cf(h,y,14)^Cf(h,y,18)^xm(h,y,41),F=h&m^~h&v,T=y&b^~y&E,z=LH(D,k,T,VH[N],Tu[N]),Z=jH(z,x,B,F,zH[N],Mu[N]),Y=z|0,W=Of(n,i,28)^Em(n,i,34)^Em(n,i,39),M=Cf(n,i,28)^xm(n,i,34)^xm(n,i,39),C=n&a^n&s^a&s,R=i&o^i&c^o&c;x=v|0,D=E|0,v=m|0,E=b|0,m=h|0,b=y|0,{h,l:y}=Eo(l|0,d|0,Z|0,Y|0),l=s|0,d=c|0,s=a|0,c=o|0,a=n|0,o=i|0;const S=PH(Y,M,R);n=UH(S,Z,W,C),i=S|0}({h:n,l:i}=Eo(this.Ah|0,this.Al|0,n|0,i|0)),{h:a,l:o}=Eo(this.Bh|0,this.Bl|0,a|0,o|0),{h:s,l:c}=Eo(this.Ch|0,this.Cl|0,s|0,c|0),{h:l,l:d}=Eo(this.Dh|0,this.Dl|0,l|0,d|0),{h,l:y}=Eo(this.Eh|0,this.El|0,h|0,y|0),{h:m,l:b}=Eo(this.Fh|0,this.Fl|0,m|0,b|0),{h:v,l:E}=Eo(this.Gh|0,this.Gl|0,v|0,E|0),{h:x,l:D}=Eo(this.Hh|0,this.Hl|0,x|0,D|0),this.set(n,i,a,o,s,c,l,d,h,y,m,b,v,E,x,D)}roundClean(){Bd(Mu,Tu)}destroy(){Bd(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class HH extends yD{constructor(){super(48),this.Ah=ei[0]|0,this.Al=ei[1]|0,this.Bh=ei[2]|0,this.Bl=ei[3]|0,this.Ch=ei[4]|0,this.Cl=ei[5]|0,this.Dh=ei[6]|0,this.Dl=ei[7]|0,this.Eh=ei[8]|0,this.El=ei[9]|0,this.Fh=ei[10]|0,this.Fl=ei[11]|0,this.Gh=ei[12]|0,this.Gl=ei[13]|0,this.Hh=ei[14]|0,this.Hl=ei[15]|0}}const W8=K8(()=>new FH),mD=K8(()=>new yD),KH=K8(()=>new HH);let gD=class extends dD{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,lD(e);const n=H8(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),Bd(a)}update(e){return wv(this),this.iHash.update(e),this}digestInto(e){wv(this),Ll(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const vD=(r,e,t)=>new gD(r,e).update(t).digest();vD.create=(r,e)=>new gD(r,e);const Z8=BigInt(0),Dx=BigInt(1);function Ul(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function cs(r,e,t=""){const n=q0(r),i=r?.length,a=e!==void 0;if(!n||a&&i!==e){const o=t&&`"${t}" `,s=a?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+s+", got "+c)}return r}function Am(r){const e=r.toString(16);return e.length&1?"0"+e:e}function bD(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Z8:BigInt("0x"+r)}function mb(r){return bD(pl(r))}function d0(r){return Ll(r),bD(pl(Uint8Array.from(r).reverse()))}function Y8(r,e){return _v(r.toString(16).padStart(e*2,"0"))}function wD(r,e){return Y8(r,e).reverse()}function $r(r,e,t){let n;if(typeof e=="string")try{n=_v(e)}catch(a){throw new Error(r+" must be hex string or Uint8Array, cause: "+a)}else if(q0(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function Q9(r){return Uint8Array.from(r)}const H_=r=>typeof r=="bigint"&&Z8<=r;function GH(r,e,t){return H_(r)&&H_(e)&&H_(t)&&e<=r&&r<t}function Px(r,e,t,n){if(!GH(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function _D(r){let e;for(e=0;r>Z8;r>>=Dx,e+=1);return e}const L0=r=>(Dx<<BigInt(r))-Dx;function WH(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=m=>new Uint8Array(m),i=m=>Uint8Array.of(m);let a=n(r),o=n(r),s=0;const c=()=>{a.fill(1),o.fill(0),s=0},l=(...m)=>t(o,a,...m),d=(m=n(0))=>{o=l(i(0),m),a=l(),m.length!==0&&(o=l(i(1),m),a=l())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const b=[];for(;m<e;){a=l();const v=a.slice();b.push(v),m+=a.length}return Bs(...b)};return(m,b)=>{c(),d(m);let v;for(;!(v=b(h()));)d();return c(),v}}function j0(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,a,o){const s=r[i];if(o&&s===void 0)return;const c=typeof s;if(c!==a||s===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${c}`)}Object.entries(e).forEach(([i,a])=>n(i,a,!1)),Object.entries(t).forEach(([i,a])=>n(i,a,!0))}function Ev(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const a=r(t,...n);return e.set(t,a),a}}const $i=BigInt(0),Hn=BigInt(1),sl=BigInt(2),ED=BigInt(3),xD=BigInt(4),AD=BigInt(5),ZH=BigInt(7),SD=BigInt(8),YH=BigInt(9),MD=BigInt(16);function on(r,e){const t=r%e;return t>=$i?t:e+t}function Lr(r,e,t){let n=r;for(;e-- >$i;)n*=n,n%=t;return n}function J9(r,e){if(r===$i)throw new Error("invert: expected non-zero number");if(e<=$i)throw new Error("invert: expected positive modulus, got "+e);let t=on(r,e),n=e,i=$i,a=Hn;for(;t!==$i;){const s=n/t,c=n%t,l=i-a*s;n=t,t=c,i=a,a=l}if(n!==Hn)throw new Error("invert: does not exist");return on(i,e)}function Q8(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function TD(r,e){const t=(r.ORDER+Hn)/xD,n=r.pow(e,t);return Q8(r,n,e),n}function QH(r,e){const t=(r.ORDER-AD)/SD,n=r.mul(e,sl),i=r.pow(n,t),a=r.mul(e,i),o=r.mul(r.mul(a,sl),i),s=r.mul(a,r.sub(o,r.ONE));return Q8(r,s,e),s}function JH(r){const e=Qs(r),t=RD(r),n=t(e,e.neg(e.ONE)),i=t(e,n),a=t(e,e.neg(n)),o=(r+ZH)/MD;return(s,c)=>{let l=s.pow(c,o),d=s.mul(l,n);const h=s.mul(l,i),y=s.mul(l,a),m=s.eql(s.sqr(d),c),b=s.eql(s.sqr(h),c);l=s.cmov(l,d,m),d=s.cmov(y,h,b);const v=s.eql(s.sqr(d),c),E=s.cmov(l,d,v);return Q8(s,E,c),E}}function RD(r){if(r<ED)throw new Error("sqrt is not defined for small field");let e=r-Hn,t=0;for(;e%sl===$i;)e/=sl,t++;let n=sl;const i=Qs(r);for(;X9(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return TD;let a=i.pow(n,e);const o=(e+Hn)/sl;return function(c,l){if(c.is0(l))return l;if(X9(c,l)!==1)throw new Error("Cannot find square root");let d=t,h=c.mul(c.ONE,a),y=c.pow(l,e),m=c.pow(l,o);for(;!c.eql(y,c.ONE);){if(c.is0(y))return c.ZERO;let b=1,v=c.sqr(y);for(;!c.eql(v,c.ONE);)if(b++,v=c.sqr(v),b===d)throw new Error("Cannot find square root");const E=Hn<<BigInt(d-b-1),x=c.pow(h,E);d=b,h=c.sqr(x),y=c.mul(y,h),m=c.mul(m,x)}return m}}function XH(r){return r%xD===ED?TD:r%SD===AD?QH:r%MD===YH?JH(r):RD(r)}const eK=(r,e)=>(on(r,e)&Hn)===Hn,tK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rK(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=tK.reduce((n,i)=>(n[i]="function",n),e);return j0(r,t),r}function nK(r,e,t){if(t<$i)throw new Error("invalid exponent, negatives unsupported");if(t===$i)return r.ONE;if(t===Hn)return e;let n=r.ONE,i=e;for(;t>$i;)t&Hn&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Hn;return n}function OD(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((o,s,c)=>r.is0(s)?o:(n[c]=o,r.mul(o,s)),r.ONE),a=r.inv(i);return e.reduceRight((o,s,c)=>r.is0(s)?o:(n[c]=r.mul(o,n[c]),r.mul(o,s)),a),n}function X9(r,e){const t=(r.ORDER-Hn)/sl,n=r.pow(e,t),i=r.eql(n,r.ONE),a=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!i&&!a&&!o)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function CD(r,e){e!==void 0&&Ix(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Qs(r,e,t=!1,n={}){if(r<=$i)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,a,o=!1,s;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const y=e;y.BITS&&(i=y.BITS),y.sqrt&&(a=y.sqrt),typeof y.isLE=="boolean"&&(t=y.isLE),typeof y.modFromBytes=="boolean"&&(o=y.modFromBytes),s=y.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(a=n.sqrt);const{nBitLength:c,nByteLength:l}=CD(r,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const h=Object.freeze({ORDER:r,isLE:t,BITS:c,BYTES:l,MASK:L0(c),ZERO:$i,ONE:Hn,allowedLengths:s,create:y=>on(y,r),isValid:y=>{if(typeof y!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof y);return $i<=y&&y<r},is0:y=>y===$i,isValidNot0:y=>!h.is0(y)&&h.isValid(y),isOdd:y=>(y&Hn)===Hn,neg:y=>on(-y,r),eql:(y,m)=>y===m,sqr:y=>on(y*y,r),add:(y,m)=>on(y+m,r),sub:(y,m)=>on(y-m,r),mul:(y,m)=>on(y*m,r),pow:(y,m)=>nK(h,y,m),div:(y,m)=>on(y*J9(m,r),r),sqrN:y=>y*y,addN:(y,m)=>y+m,subN:(y,m)=>y-m,mulN:(y,m)=>y*m,inv:y=>J9(y,r),sqrt:a||(y=>(d||(d=XH(r)),d(h,y))),toBytes:y=>t?wD(y,l):Y8(y,l),fromBytes:(y,m=!0)=>{if(s){if(!s.includes(y.length)||y.length>l)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+y.length);const v=new Uint8Array(l);v.set(y,t?0:v.length-y.length),y=v}if(y.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+y.length);let b=t?d0(y):mb(y);if(o&&(b=on(b,r)),!m&&!h.isValid(b))throw new Error("invalid field element: outside of range 0..ORDER");return b},invertBatch:y=>OD(h,y),cmov:(y,m,b)=>b?m:y});return Object.freeze(h)}function ND(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function BD(r){const e=ND(r);return e+Math.ceil(e/2)}function iK(r,e,t=!1){const n=r.length,i=ND(e),a=BD(e);if(n<16||n<a||n>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+n);const o=t?d0(r):mb(r),s=on(o,e-Hn)+Hn;return t?wD(s,i):Y8(s,i)}const Id=BigInt(0),ol=BigInt(1);function xv(r,e){const t=e.negate();return r?t:e}function ul(r,e){const t=OD(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function ID(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function K_(r,e){ID(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,a=L0(r),o=BigInt(r);return{windows:t,windowSize:n,mask:a,maxNumber:i,shiftBy:o}}function e7(r,e,t){const{windowSize:n,mask:i,maxNumber:a,shiftBy:o}=t;let s=Number(r&i),c=r>>o;s>n&&(s-=a,c+=ol);const l=e*n,d=l+Math.abs(s)-1,h=s===0,y=s<0,m=e%2!==0;return{nextN:c,offset:d,isZero:h,isNeg:y,isNegF:m,offsetF:l}}function aK(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function sK(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const G_=new WeakMap,DD=new WeakMap;function W_(r){return DD.get(r)||1}function t7(r){if(r!==Id)throw new Error("invalid wNAF")}let PD=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>Id;)t&ol&&(n=n.add(i)),i=i.double(),t>>=ol;return n}precomputeWindow(e,t){const{windows:n,windowSize:i}=K_(t,this.bits),a=[];let o=e,s=o;for(let c=0;c<n;c++){s=o,a.push(s);for(let l=1;l<i;l++)s=s.add(o),a.push(s);o=s.double()}return a}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,a=this.BASE;const o=K_(e,this.bits);for(let s=0;s<o.windows;s++){const{nextN:c,offset:l,isZero:d,isNeg:h,isNegF:y,offsetF:m}=e7(n,s,o);n=c,d?a=a.add(xv(y,t[m])):i=i.add(xv(h,t[l]))}return t7(n),{p:i,f:a}}wNAFUnsafe(e,t,n,i=this.ZERO){const a=K_(e,this.bits);for(let o=0;o<a.windows&&n!==Id;o++){const{nextN:s,offset:c,isZero:l,isNeg:d}=e7(n,o,a);if(n=s,!l){const h=t[c];i=i.add(d?h.negate():h)}}return t7(n),i}getPrecomputes(e,t,n){let i=G_.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),G_.set(t,i))),i}cached(e,t,n){const i=W_(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){const a=W_(e);return a===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(a,this.getPrecomputes(a,e,n),t,i)}createCache(e,t){ID(t,this.bits),DD.set(e,t),G_.delete(e)}hasCache(e){return W_(e)!==1}};function oK(r,e,t,n){let i=e,a=r.ZERO,o=r.ZERO;for(;t>Id||n>Id;)t&ol&&(a=a.add(i)),n&ol&&(o=o.add(i)),i=i.double(),t>>=ol,n>>=ol;return{p1:a,p2:o}}function UD(r,e,t,n){aK(t,r),sK(n,e);const i=t.length,a=n.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,s=_D(BigInt(i));let c=1;s>12?c=s-3:s>4?c=s-2:s>0&&(c=2);const l=L0(c),d=new Array(Number(l)+1).fill(o),h=Math.floor((e.BITS-1)/c)*c;let y=o;for(let m=h;m>=0;m-=c){d.fill(o);for(let v=0;v<a;v++){const E=n[v],x=Number(E>>BigInt(m)&l);d[x]=d[x].add(t[v])}let b=o;for(let v=d.length-1,E=o;v>0;v--)E=E.add(d[v]),b=b.add(E);if(y=y.add(b),m!==0)for(let v=0;v<c;v++)y=y.double()}return y}function r7(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return rK(e),e}else return Qs(r,{isLE:t})}function kD(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const l=e[c];if(!(typeof l=="bigint"&&l>Id))throw new Error(`CURVE.${c} must be positive bigint`)}const i=r7(e.p,t.Fp,n),a=r7(e.n,t.Fn,n),s=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const c of s)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:a}}const n7=(r,e)=>(r+(r>=0?e:-e)/qD)/e;function uK(r,e,t){const[[n,i],[a,o]]=e,s=n7(o*r,t),c=n7(-i*r,t);let l=r-s*n-c*a,d=-s*i-c*o;const h=l<Lo,y=d<Lo;h&&(l=-l),y&&(d=-d);const m=L0(Math.ceil(_D(t)/2))+yd;if(l<Lo||l>=m||d<Lo||d>=m)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:h,k1:l,k2neg:y,k2:d}}function Ux(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Z_(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return Ul(t.lowS,"lowS"),Ul(t.prehash,"prehash"),t.format!==void 0&&Ux(t.format),t}class cK extends Error{constructor(e=""){super(e)}}const Bo={Err:cK,_tlv:{encode:(r,e)=>{const{Err:t}=Bo;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=Am(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const a=n>127?Am(i.length/2|128):"";return Am(r)+a+i+e},decode(r,e){const{Err:t}=Bo;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],a=!!(i&128);let o=0;if(!a)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const l=e.subarray(n,n+c);if(l.length!==c)throw new t("tlv.decode: length bytes not complete");if(l[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const d of l)o=o<<8|d;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const s=e.subarray(n,n+o);if(s.length!==o)throw new t("tlv.decode: wrong value length");return{v:s,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Bo;if(r<Lo)throw new e("integer: negative integers are not allowed");let t=Am(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Bo;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return mb(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Bo,i=$r("signature",r),{v:a,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:s,l:c}=n.decode(2,a),{v:l,l:d}=n.decode(2,c);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(s),s:t.decode(l)}},hexFromSig(r){const{_tlv:e,_int:t}=Bo,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),a=n+i;return e.encode(48,a)}},Lo=BigInt(0),yd=BigInt(1),qD=BigInt(2),Sm=BigInt(3),lK=BigInt(4);function nd(r,e){const{BYTES:t}=r;let n;if(typeof e=="bigint")n=e;else{let i=$r("private key",e);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function fK(r,e={}){const t=kD("weierstrass",r,e),{Fp:n,Fn:i}=t;let a=t.CURVE;const{h:o,n:s}=a;j0(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(a.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=jD(n,i);function d(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(M,C,R){const{x:S,y:_}=C.toAffine(),U=n.toBytes(S);if(Ul(R,"isCompressed"),R){d();const H=!n.isOdd(_);return Bs(LD(H),U)}else return Bs(Uint8Array.of(4),U,n.toBytes(_))}function y(M){cs(M,void 0,"Point");const{publicKey:C,publicKeyUncompressed:R}=l,S=M.length,_=M[0],U=M.subarray(1);if(S===C&&(_===2||_===3)){const H=n.fromBytes(U);if(!n.isValid(H))throw new Error("bad point: is not on curve, wrong x");const V=v(H);let P;try{P=n.sqrt(V)}catch(ae){const ce=ae instanceof Error?": "+ae.message:"";throw new Error("bad point: is not on curve, sqrt error"+ce)}d();const $=n.isOdd(P);return(_&1)===1!==$&&(P=n.neg(P)),{x:H,y:P}}else if(S===R&&_===4){const H=n.BYTES,V=n.fromBytes(U.subarray(0,H)),P=n.fromBytes(U.subarray(H,H*2));if(!E(V,P))throw new Error("bad point: is not on curve");return{x:V,y:P}}else throw new Error(`bad point: got length ${S}, expected compressed=${C} or uncompressed=${R}`)}const m=e.toBytes||h,b=e.fromBytes||y;function v(M){const C=n.sqr(M),R=n.mul(C,M);return n.add(n.add(R,n.mul(M,a.a)),a.b)}function E(M,C){const R=n.sqr(C),S=v(M);return n.eql(R,S)}if(!E(a.Gx,a.Gy))throw new Error("bad curve params: generator point");const x=n.mul(n.pow(a.a,Sm),lK),D=n.mul(n.sqr(a.b),BigInt(27));if(n.is0(n.add(x,D)))throw new Error("bad curve params: a or b");function N(M,C,R=!1){if(!n.isValid(C)||R&&n.is0(C))throw new Error(`bad point coordinate ${M}`);return C}function B(M){if(!(M instanceof Z))throw new Error("ProjectivePoint expected")}function k(M){if(!c||!c.basises)throw new Error("no endo");return uK(M,c.basises,i.ORDER)}const F=Ev((M,C)=>{const{X:R,Y:S,Z:_}=M;if(n.eql(_,n.ONE))return{x:R,y:S};const U=M.is0();C==null&&(C=U?n.ONE:n.inv(_));const H=n.mul(R,C),V=n.mul(S,C),P=n.mul(_,C);if(U)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:H,y:V}}),T=Ev(M=>{if(M.is0()){if(e.allowInfinityPoint&&!n.is0(M.Y))return;throw new Error("bad point: ZERO")}const{x:C,y:R}=M.toAffine();if(!n.isValid(C)||!n.isValid(R))throw new Error("bad point: x or y not field elements");if(!E(C,R))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function z(M,C,R,S,_){return R=new Z(n.mul(R.X,M),R.Y,R.Z),C=xv(S,C),R=xv(_,R),C.add(R)}class Z{constructor(C,R,S){this.X=N("x",C),this.Y=N("y",R,!0),this.Z=N("z",S),Object.freeze(this)}static CURVE(){return a}static fromAffine(C){const{x:R,y:S}=C||{};if(!C||!n.isValid(R)||!n.isValid(S))throw new Error("invalid affine point");if(C instanceof Z)throw new Error("projective point not allowed");return n.is0(R)&&n.is0(S)?Z.ZERO:new Z(R,S,n.ONE)}static fromBytes(C){const R=Z.fromAffine(b(cs(C,void 0,"point")));return R.assertValidity(),R}static fromHex(C){return Z.fromBytes($r("pointHex",C))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,R=!0){return W.createCache(this,C),R||this.multiply(Sm),this}assertValidity(){T(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){B(C);const{X:R,Y:S,Z:_}=this,{X:U,Y:H,Z:V}=C,P=n.eql(n.mul(R,V),n.mul(U,_)),$=n.eql(n.mul(S,V),n.mul(H,_));return P&&$}negate(){return new Z(this.X,n.neg(this.Y),this.Z)}double(){const{a:C,b:R}=a,S=n.mul(R,Sm),{X:_,Y:U,Z:H}=this;let V=n.ZERO,P=n.ZERO,$=n.ZERO,te=n.mul(_,_),ae=n.mul(U,U),ce=n.mul(H,H),fe=n.mul(_,U);return fe=n.add(fe,fe),$=n.mul(_,H),$=n.add($,$),V=n.mul(C,$),P=n.mul(S,ce),P=n.add(V,P),V=n.sub(ae,P),P=n.add(ae,P),P=n.mul(V,P),V=n.mul(fe,V),$=n.mul(S,$),ce=n.mul(C,ce),fe=n.sub(te,ce),fe=n.mul(C,fe),fe=n.add(fe,$),$=n.add(te,te),te=n.add($,te),te=n.add(te,ce),te=n.mul(te,fe),P=n.add(P,te),ce=n.mul(U,H),ce=n.add(ce,ce),te=n.mul(ce,fe),V=n.sub(V,te),$=n.mul(ce,ae),$=n.add($,$),$=n.add($,$),new Z(V,P,$)}add(C){B(C);const{X:R,Y:S,Z:_}=this,{X:U,Y:H,Z:V}=C;let P=n.ZERO,$=n.ZERO,te=n.ZERO;const ae=a.a,ce=n.mul(a.b,Sm);let fe=n.mul(R,U),oe=n.mul(S,H),ye=n.mul(_,V),me=n.add(R,S),ve=n.add(U,H);me=n.mul(me,ve),ve=n.add(fe,oe),me=n.sub(me,ve),ve=n.add(R,_);let we=n.add(U,V);return ve=n.mul(ve,we),we=n.add(fe,ye),ve=n.sub(ve,we),we=n.add(S,_),P=n.add(H,V),we=n.mul(we,P),P=n.add(oe,ye),we=n.sub(we,P),te=n.mul(ae,ve),P=n.mul(ce,ye),te=n.add(P,te),P=n.sub(oe,te),te=n.add(oe,te),$=n.mul(P,te),oe=n.add(fe,fe),oe=n.add(oe,fe),ye=n.mul(ae,ye),ve=n.mul(ce,ve),oe=n.add(oe,ye),ye=n.sub(fe,ye),ye=n.mul(ae,ye),ve=n.add(ve,ye),fe=n.mul(oe,ve),$=n.add($,fe),fe=n.mul(we,ve),P=n.mul(me,P),P=n.sub(P,fe),fe=n.mul(me,oe),te=n.mul(we,te),te=n.add(te,fe),new Z(P,$,te)}subtract(C){return this.add(C.negate())}is0(){return this.equals(Z.ZERO)}multiply(C){const{endo:R}=e;if(!i.isValidNot0(C))throw new Error("invalid scalar: out of range");let S,_;const U=H=>W.cached(this,H,V=>ul(Z,V));if(R){const{k1neg:H,k1:V,k2neg:P,k2:$}=k(C),{p:te,f:ae}=U(V),{p:ce,f:fe}=U($);_=ae.add(fe),S=z(R.beta,te,ce,H,P)}else{const{p:H,f:V}=U(C);S=H,_=V}return ul(Z,[S,_])[0]}multiplyUnsafe(C){const{endo:R}=e,S=this;if(!i.isValid(C))throw new Error("invalid scalar: out of range");if(C===Lo||S.is0())return Z.ZERO;if(C===yd)return S;if(W.hasCache(this))return this.multiply(C);if(R){const{k1neg:_,k1:U,k2neg:H,k2:V}=k(C),{p1:P,p2:$}=oK(Z,S,U,V);return z(R.beta,P,$,_,H)}else return W.unsafe(S,C)}multiplyAndAddUnsafe(C,R,S){const _=this.multiplyUnsafe(R).add(C.multiplyUnsafe(S));return _.is0()?void 0:_}toAffine(C){return F(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return o===yd?!0:C?C(Z,this):W.unsafe(this,s).is0()}clearCofactor(){const{clearCofactor:C}=e;return o===yd?this:C?C(Z,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(C=!0){return Ul(C,"isCompressed"),this.assertValidity(),m(Z,this,C)}toHex(C=!0){return pl(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(C=!0){return this.toBytes(C)}_setWindowSize(C){this.precompute(C)}static normalizeZ(C){return ul(Z,C)}static msm(C,R){return UD(Z,i,C,R)}static fromPrivateKey(C){return Z.BASE.multiply(nd(i,C))}}Z.BASE=new Z(a.Gx,a.Gy,n.ONE),Z.ZERO=new Z(n.ZERO,n.ONE,n.ZERO),Z.Fp=n,Z.Fn=i;const Y=i.BITS,W=new PD(Z,e.endo?Math.ceil(Y/2):Y);return Z.BASE.precompute(8),Z}function LD(r){return Uint8Array.of(r?2:3)}function jD(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function dK(r,e={}){const{Fn:t}=r,n=e.randomBytes||G8,i=Object.assign(jD(r.Fp,t),{seed:BD(t.ORDER)});function a(m){try{return!!nd(t,m)}catch{return!1}}function o(m,b){const{publicKey:v,publicKeyUncompressed:E}=i;try{const x=m.length;return b===!0&&x!==v||b===!1&&x!==E?!1:!!r.fromBytes(m)}catch{return!1}}function s(m=n(i.seed)){return iK(cs(m,i.seed,"seed"),t.ORDER)}function c(m,b=!0){return r.BASE.multiply(nd(t,m)).toBytes(b)}function l(m){const b=s(m);return{secretKey:b,publicKey:c(b)}}function d(m){if(typeof m=="bigint")return!1;if(m instanceof r)return!0;const{secretKey:b,publicKey:v,publicKeyUncompressed:E}=i;if(t.allowedLengths||b===v)return;const x=$r("key",m).length;return x===v||x===E}function h(m,b,v=!0){if(d(m)===!0)throw new Error("first arg must be private key");if(d(b)===!1)throw new Error("second arg must be public key");const E=nd(t,m);return r.fromHex(b).multiply(E).toBytes(v)}return Object.freeze({getPublicKey:c,getSharedSecret:h,keygen:l,Point:r,utils:{isValidSecretKey:a,isValidPublicKey:o,randomSecretKey:s,isValidPrivateKey:a,randomPrivateKey:s,normPrivateKeyToScalar:m=>nd(t,m),precompute(m=8,b=r.BASE){return b.precompute(m,!1)}},lengths:i})}function hK(r,e,t={}){lD(e),j0(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||G8,i=t.hmac||((R,...S)=>vD(e,R,Bs(...S))),{Fp:a,Fn:o}=r,{ORDER:s,BITS:c}=o,{keygen:l,getPublicKey:d,getSharedSecret:h,utils:y,lengths:m}=dK(r,t),b={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function E(R){const S=s>>yd;return R>S}function x(R,S){if(!o.isValidNot0(S))throw new Error(`invalid signature ${R}: out of range 1..Point.Fn.ORDER`);return S}function D(R,S){Ux(S);const _=m.signature,U=S==="compact"?_:S==="recovered"?_+1:void 0;return cs(R,U,`${S} signature`)}class N{constructor(S,_,U){this.r=x("r",S),this.s=x("s",_),U!=null&&(this.recovery=U),Object.freeze(this)}static fromBytes(S,_=v){D(S,_);let U;if(_==="der"){const{r:$,s:te}=Bo.toSig(cs(S));return new N($,te)}_==="recovered"&&(U=S[0],_="compact",S=S.subarray(1));const H=o.BYTES,V=S.subarray(0,H),P=S.subarray(H,H*2);return new N(o.fromBytes(V),o.fromBytes(P),U)}static fromHex(S,_){return this.fromBytes(_v(S),_)}addRecoveryBit(S){return new N(this.r,this.s,S)}recoverPublicKey(S){const _=a.ORDER,{r:U,s:H,recovery:V}=this;if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");if(s*qD<_&&V>1)throw new Error("recovery id is ambiguous for h>1 curve");const $=V===2||V===3?U+s:U;if(!a.isValid($))throw new Error("recovery id 2 or 3 invalid");const te=a.toBytes($),ae=r.fromBytes(Bs(LD((V&1)===0),te)),ce=o.inv($),fe=k($r("msgHash",S)),oe=o.create(-fe*ce),ye=o.create(H*ce),me=r.BASE.multiplyUnsafe(oe).add(ae.multiplyUnsafe(ye));if(me.is0())throw new Error("point at infinify");return me.assertValidity(),me}hasHighS(){return E(this.s)}toBytes(S=v){if(Ux(S),S==="der")return _v(Bo.hexFromSig(this));const _=o.toBytes(this.r),U=o.toBytes(this.s);if(S==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Bs(Uint8Array.of(this.recovery),_,U)}return Bs(_,U)}toHex(S){return pl(this.toBytes(S))}assertValidity(){}static fromCompact(S){return N.fromBytes($r("sig",S),"compact")}static fromDER(S){return N.fromBytes($r("sig",S),"der")}normalizeS(){return this.hasHighS()?new N(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return pl(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return pl(this.toBytes("compact"))}}const B=t.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");const _=mb(S),U=S.length*8-c;return U>0?_>>BigInt(U):_},k=t.bits2int_modN||function(S){return o.create(B(S))},F=L0(c);function T(R){return Px("num < 2^"+c,R,Lo,F),o.toBytes(R)}function z(R,S){return cs(R,void 0,"message"),S?cs(e(R),void 0,"prehashed message"):R}function Z(R,S,_){if(["recovered","canonical"].some(oe=>oe in _))throw new Error("sign() legacy options not supported");const{lowS:U,prehash:H,extraEntropy:V}=Z_(_,b);R=z(R,H);const P=k(R),$=nd(o,S),te=[T($),T(P)];if(V!=null&&V!==!1){const oe=V===!0?n(m.secretKey):V;te.push($r("extraEntropy",oe))}const ae=Bs(...te),ce=P;function fe(oe){const ye=B(oe);if(!o.isValidNot0(ye))return;const me=o.inv(ye),ve=r.BASE.multiply(ye).toAffine(),we=o.create(ve.x);if(we===Lo)return;const De=o.create(me*o.create(ce+we*$));if(De===Lo)return;let Te=(ve.x===we?0:2)|Number(ve.y&yd),Se=De;return U&&E(De)&&(Se=o.neg(De),Te^=1),new N(we,Se,Te)}return{seed:ae,k2sig:fe}}function Y(R,S,_={}){R=$r("message",R);const{seed:U,k2sig:H}=Z(R,S,_);return WH(e.outputLen,o.BYTES,i)(U,H)}function W(R){let S;const _=typeof R=="string"||q0(R),U=!_&&R!==null&&typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!_&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(U)S=new N(R.r,R.s);else if(_){try{S=N.fromBytes($r("sig",R),"der")}catch(H){if(!(H instanceof Bo.Err))throw H}if(!S)try{S=N.fromBytes($r("sig",R),"compact")}catch{return!1}}return S||!1}function M(R,S,_,U={}){const{lowS:H,prehash:V,format:P}=Z_(U,b);if(_=$r("publicKey",_),S=z($r("message",S),V),"strict"in U)throw new Error("options.strict was renamed to lowS");const $=P===void 0?W(R):N.fromBytes($r("sig",R),P);if($===!1)return!1;try{const te=r.fromBytes(_);if(H&&$.hasHighS())return!1;const{r:ae,s:ce}=$,fe=k(S),oe=o.inv(ce),ye=o.create(fe*oe),me=o.create(ae*oe),ve=r.BASE.multiplyUnsafe(ye).add(te.multiplyUnsafe(me));return ve.is0()?!1:o.create(ve.x)===ae}catch{return!1}}function C(R,S,_={}){const{prehash:U}=Z_(_,b);return S=z(S,U),N.fromBytes(R,"recovered").recoverPublicKey(S).toBytes()}return Object.freeze({keygen:l,getPublicKey:d,getSharedSecret:h,utils:y,lengths:m,Point:r,sign:Y,verify:M,recoverPublicKey:C,Signature:N,hash:e})}function pK(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=Qs(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),a={Fp:t,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:a}}function yK(r){const{CURVE:e,curveOpts:t}=pK(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function mK(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,CD(t.Fn.ORDER,t.Fn.BITS))})}function gK(r){const{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:i}=yK(r),a=fK(e,t),o=hK(a,n,i);return mK(r,o)}function gb(r,e){const t=n=>gK({...r,hash:n});return{...t(e),create:t}}const J8={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},vK={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},i7=BigInt(2);function bK(r){const e=J8.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),c=BigInt(88),l=r*r*r%e,d=l*l*r%e,h=Lr(d,t,e)*d%e,y=Lr(h,t,e)*d%e,m=Lr(y,i7,e)*l%e,b=Lr(m,i,e)*m%e,v=Lr(b,a,e)*b%e,E=Lr(v,s,e)*v%e,x=Lr(E,c,e)*E%e,D=Lr(x,s,e)*v%e,N=Lr(D,t,e)*d%e,B=Lr(N,o,e)*b%e,k=Lr(B,n,e)*l%e,F=Lr(k,i7,e);if(!kx.eql(kx.sqr(F),r))throw new Error("Cannot find square root");return F}const kx=Qs(J8.p,{sqrt:bK}),$D=gb({...J8,Fp:kx,lowS:!0,endo:vK},W8);const FD={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},zD={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},VD={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},wK=Qs(FD.p),_K=Qs(zD.p),EK=Qs(VD.p),xK=gb({...FD,Fp:wK,lowS:!1},W8);gb({...zD,Fp:_K,lowS:!1},KH);gb({...VD,Fp:EK,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},mD);const HD=xK;function X8(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function KD(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?X8(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function AK(r,e){e||(e=r.reduce((i,a)=>i+a.length,0));const t=KD(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return X8(t)}function SK(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),o=a.charCodeAt(0);if(t[o]!==255)throw new TypeError(a+" is ambiguous");t[o]=i}var s=r.length,c=r.charAt(0),l=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function h(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var v=0,E=0,x=0,D=b.length;x!==D&&b[x]===0;)x++,v++;for(var N=(D-x)*d+1>>>0,B=new Uint8Array(N);x!==D;){for(var k=b[x],F=0,T=N-1;(k!==0||F<E)&&T!==-1;T--,F++)k+=256*B[T]>>>0,B[T]=k%s>>>0,k=k/s>>>0;if(k!==0)throw new Error("Non-zero carry");E=F,x++}for(var z=N-E;z!==N&&B[z]===0;)z++;for(var Z=c.repeat(v);z<N;++z)Z+=r.charAt(B[z]);return Z}function y(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var v=0;if(b[v]!==" "){for(var E=0,x=0;b[v]===c;)E++,v++;for(var D=(b.length-v)*l+1>>>0,N=new Uint8Array(D);b[v];){var B=t[b.charCodeAt(v)];if(B===255)return;for(var k=0,F=D-1;(B!==0||k<x)&&F!==-1;F--,k++)B+=s*N[F]>>>0,N[F]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");x=k,v++}if(b[v]!==" "){for(var T=D-x;T!==D&&N[T]===0;)T++;for(var z=new Uint8Array(E+(D-T)),Z=E;T!==D;)z[Z++]=N[T++];return z}}}function m(b){var v=y(b);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:y,decode:m}}var MK=SK,TK=MK;const RK=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},OK=r=>new TextEncoder().encode(r),CK=r=>new TextDecoder().decode(r);let NK=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},BK=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return GD(this,e)}},IK=class{constructor(e){this.decoders=e}or(e){return GD(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const GD=(r,e)=>new IK({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let DK=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new NK(e,t,n),this.decoder=new BK(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const vb=({name:r,prefix:e,encode:t,decode:n})=>new DK(r,e,t,n),$0=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=TK(t,e);return vb({prefix:r,name:e,encode:n,decode:a=>RK(i(a))})},PK=(r,e,t,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const o=new Uint8Array(a*t/8|0);let s=0,c=0,l=0;for(let d=0;d<a;++d){const h=i[r[d]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,s+=t,s>=8&&(s-=8,o[l++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return o},UK=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let a="",o=0,s=0;for(let c=0;c<r.length;++c)for(s=s<<8|r[c],o+=8;o>t;)o-=t,a+=e[i&s>>o];if(o&&(a+=e[i&s<<t-o]),n)for(;a.length*t&7;)a+="=";return a},Zn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>vb({prefix:e,name:r,encode(i){return UK(i,n,t)},decode(i){return PK(i,n,t,r)}}),kK=vb({prefix:"\0",name:"identity",encode:r=>CK(r),decode:r=>OK(r)}),qK=Object.freeze(Object.defineProperty({__proto__:null,identity:kK},Symbol.toStringTag,{value:"Module"})),LK=Zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),jK=Object.freeze(Object.defineProperty({__proto__:null,base2:LK},Symbol.toStringTag,{value:"Module"})),$K=Zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),FK=Object.freeze(Object.defineProperty({__proto__:null,base8:$K},Symbol.toStringTag,{value:"Module"})),zK=$0({prefix:"9",name:"base10",alphabet:"0123456789"}),VK=Object.freeze(Object.defineProperty({__proto__:null,base10:zK},Symbol.toStringTag,{value:"Module"})),HK=Zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),KK=Zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),GK=Object.freeze(Object.defineProperty({__proto__:null,base16:HK,base16upper:KK},Symbol.toStringTag,{value:"Module"})),WK=Zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ZK=Zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),YK=Zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),QK=Zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JK=Zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XK=Zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eG=Zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tG=Zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rG=Zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),nG=Object.freeze(Object.defineProperty({__proto__:null,base32:WK,base32hex:JK,base32hexpad:eG,base32hexpadupper:tG,base32hexupper:XK,base32pad:YK,base32padupper:QK,base32upper:ZK,base32z:rG},Symbol.toStringTag,{value:"Module"})),iG=$0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),aG=$0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),sG=Object.freeze(Object.defineProperty({__proto__:null,base36:iG,base36upper:aG},Symbol.toStringTag,{value:"Module"})),oG=$0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),uG=$0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),cG=Object.freeze(Object.defineProperty({__proto__:null,base58btc:oG,base58flickr:uG},Symbol.toStringTag,{value:"Module"})),lG=Zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),fG=Zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dG=Zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hG=Zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),pG=Object.freeze(Object.defineProperty({__proto__:null,base64:lG,base64pad:fG,base64url:dG,base64urlpad:hG},Symbol.toStringTag,{value:"Module"})),WD=Array.from(""),yG=WD.reduce((r,e,t)=>(r[t]=e,r),[]),mG=WD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function gG(r){return r.reduce((e,t)=>(e+=yG[t],e),"")}function vG(r){const e=[];for(const t of r){const n=mG[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const bG=vb({prefix:"",name:"base256emoji",encode:gG,decode:vG}),wG=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:bG},Symbol.toStringTag,{value:"Module"}));var _G=ZD,a7=128,EG=-128,xG=Math.pow(2,31);function ZD(r,e,t){e=e||[],t=t||0;for(var n=t;r>=xG;)e[t++]=r&255|a7,r/=128;for(;r&EG;)e[t++]=r&255|a7,r>>>=7;return e[t]=r|0,ZD.bytes=t-n+1,e}var AG=qx,SG=128,s7=127;function qx(r,n){var t=0,n=n||0,i=0,a=n,o,s=r.length;do{if(a>=s)throw qx.bytes=0,new RangeError("Could not decode varint");o=r[a++],t+=i<28?(o&s7)<<i:(o&s7)*Math.pow(2,i),i+=7}while(o>=SG);return qx.bytes=a-n,t}var MG=Math.pow(2,7),TG=Math.pow(2,14),RG=Math.pow(2,21),OG=Math.pow(2,28),CG=Math.pow(2,35),NG=Math.pow(2,42),BG=Math.pow(2,49),IG=Math.pow(2,56),DG=Math.pow(2,63),PG=function(r){return r<MG?1:r<TG?2:r<RG?3:r<OG?4:r<CG?5:r<NG?6:r<BG?7:r<IG?8:r<DG?9:10},UG={encode:_G,decode:AG,encodingLength:PG},Av=UG;const kG=(r,e=0)=>[Av.decode(r,e),Av.decode.bytes],qG=(r,e,t=0)=>(Av.encode(r,e,t),e),LG=r=>Av.encodingLength(r);new TextEncoder;new TextDecoder;const o7={...qK,...jK,...FK,...VK,...GK,...nG,...sG,...cG,...pG,...wG};function YD(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const u7=YD("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Y_=YD("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=KD(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),QD={utf8:u7,"utf-8":u7,hex:o7.base16,latin1:Y_,ascii:Y_,binary:Y_,...o7};function jG(r,e="utf8"){const t=QD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?X8(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function $G(r,e="utf8"){const t=QD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const Ru=BigInt(0),_n=BigInt(1),Q_=BigInt(2),FG=BigInt(8);function zG(r,e,t,n){const i=r.sqr(t),a=r.sqr(n),o=r.add(r.mul(e.a,i),a),s=r.add(r.ONE,r.mul(e.d,r.mul(i,a)));return r.eql(o,s)}function VG(r,e={}){const t=kD("edwards",r,e,e.FpFnLE),{Fp:n,Fn:i}=t;let a=t.CURVE;const{h:o}=a;j0(e,{},{uvRatio:"function"});const s=Q_<<BigInt(i.BYTES*8)-_n,c=E=>n.create(E),l=e.uvRatio||((E,x)=>{try{return{isValid:!0,value:n.sqrt(n.div(E,x))}}catch{return{isValid:!1,value:Ru}}});if(!zG(n,a,a.Gx,a.Gy))throw new Error("bad curve params: generator point");function d(E,x,D=!1){const N=D?_n:Ru;return Px("coordinate "+E,x,N,s),x}function h(E){if(!(E instanceof b))throw new Error("ExtendedPoint expected")}const y=Ev((E,x)=>{const{X:D,Y:N,Z:B}=E,k=E.is0();x==null&&(x=k?FG:n.inv(B));const F=c(D*x),T=c(N*x),z=n.mul(B,x);if(k)return{x:Ru,y:_n};if(z!==_n)throw new Error("invZ was invalid");return{x:F,y:T}}),m=Ev(E=>{const{a:x,d:D}=a;if(E.is0())throw new Error("bad point: ZERO");const{X:N,Y:B,Z:k,T:F}=E,T=c(N*N),z=c(B*B),Z=c(k*k),Y=c(Z*Z),W=c(T*x),M=c(Z*c(W+z)),C=c(Y+c(D*c(T*z)));if(M!==C)throw new Error("bad point: equation left != right (1)");const R=c(N*B),S=c(k*F);if(R!==S)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(x,D,N,B){this.X=d("x",x),this.Y=d("y",D),this.Z=d("z",N,!0),this.T=d("t",B),Object.freeze(this)}static CURVE(){return a}static fromAffine(x){if(x instanceof b)throw new Error("extended point not allowed");const{x:D,y:N}=x||{};return d("x",D),d("y",N),new b(D,N,_n,c(D*N))}static fromBytes(x,D=!1){const N=n.BYTES,{a:B,d:k}=a;x=Q9(cs(x,N,"point")),Ul(D,"zip215");const F=Q9(x),T=x[N-1];F[N-1]=T&-129;const z=d0(F),Z=D?s:n.ORDER;Px("point.y",z,Ru,Z);const Y=c(z*z),W=c(Y-_n),M=c(k*Y-B);let{isValid:C,value:R}=l(W,M);if(!C)throw new Error("bad point: invalid y coordinate");const S=(R&_n)===_n,_=(T&128)!==0;if(!D&&R===Ru&&_)throw new Error("bad point: x=0 and x_0=1");return _!==S&&(R=c(-R)),b.fromAffine({x:R,y:z})}static fromHex(x,D=!1){return b.fromBytes($r("point",x),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(x=8,D=!0){return v.createCache(this,x),D||this.multiply(Q_),this}assertValidity(){m(this)}equals(x){h(x);const{X:D,Y:N,Z:B}=this,{X:k,Y:F,Z:T}=x,z=c(D*T),Z=c(k*B),Y=c(N*T),W=c(F*B);return z===Z&&Y===W}is0(){return this.equals(b.ZERO)}negate(){return new b(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:x}=a,{X:D,Y:N,Z:B}=this,k=c(D*D),F=c(N*N),T=c(Q_*c(B*B)),z=c(x*k),Z=D+N,Y=c(c(Z*Z)-k-F),W=z+F,M=W-T,C=z-F,R=c(Y*M),S=c(W*C),_=c(Y*C),U=c(M*W);return new b(R,S,U,_)}add(x){h(x);const{a:D,d:N}=a,{X:B,Y:k,Z:F,T}=this,{X:z,Y:Z,Z:Y,T:W}=x,M=c(B*z),C=c(k*Z),R=c(T*N*W),S=c(F*Y),_=c((B+k)*(z+Z)-M-C),U=S-R,H=S+R,V=c(C-D*M),P=c(_*U),$=c(H*V),te=c(_*V),ae=c(U*H);return new b(P,$,ae,te)}subtract(x){return this.add(x.negate())}multiply(x){if(!i.isValidNot0(x))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:N}=v.cached(this,x,B=>ul(b,B));return ul(b,[D,N])[0]}multiplyUnsafe(x,D=b.ZERO){if(!i.isValid(x))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return x===Ru?b.ZERO:this.is0()||x===_n?this:v.unsafe(this,x,N=>ul(b,N),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.unsafe(this,a.n).is0()}toAffine(x){return y(this,x)}clearCofactor(){return o===_n?this:this.multiplyUnsafe(o)}toBytes(){const{x,y:D}=this.toAffine(),N=n.toBytes(D);return N[N.length-1]|=x&_n?128:0,N}toHex(){return pl(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(x){return ul(b,x)}static msm(x,D){return UD(b,i,x,D)}_setWindowSize(x){this.precompute(x)}toRawBytes(){return this.toBytes()}}b.BASE=new b(a.Gx,a.Gy,_n,c(a.Gx*a.Gy)),b.ZERO=new b(Ru,_n,_n,Ru),b.Fp=n,b.Fn=i;const v=new PD(b,i.BITS);return b.BASE.precompute(8),b}function HG(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');j0(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=t,{BASE:i,Fp:a,Fn:o}=r,s=t.randomBytes||G8,c=t.adjustScalarBytes||(Z=>Z),l=t.domain||((Z,Y,W)=>{if(Ul(W,"phflag"),Y.length||W)throw new Error("Contexts/pre-hash are not supported");return Z});function d(Z){return o.create(d0(Z))}function h(Z){const Y=N.secretKey;Z=$r("private key",Z,Y);const W=$r("hashed private key",e(Z),2*Y),M=c(W.slice(0,Y)),C=W.slice(Y,2*Y),R=d(M);return{head:M,prefix:C,scalar:R}}function y(Z){const{head:Y,prefix:W,scalar:M}=h(Z),C=i.multiply(M),R=C.toBytes();return{head:Y,prefix:W,scalar:M,point:C,pointBytes:R}}function m(Z){return y(Z).pointBytes}function b(Z=Uint8Array.of(),...Y){const W=Bs(...Y);return d(e(l(W,$r("context",Z),!!n)))}function v(Z,Y,W={}){Z=$r("message",Z),n&&(Z=n(Z));const{prefix:M,scalar:C,pointBytes:R}=y(Y),S=b(W.context,M,Z),_=i.multiply(S).toBytes(),U=b(W.context,_,R,Z),H=o.create(S+U*C);if(!o.isValid(H))throw new Error("sign failed: invalid s");const V=Bs(_,o.toBytes(H));return cs(V,N.signature,"result")}const E={zip215:!0};function x(Z,Y,W,M=E){const{context:C,zip215:R}=M,S=N.signature;Z=$r("signature",Z,S),Y=$r("message",Y),W=$r("publicKey",W,N.publicKey),R!==void 0&&Ul(R,"zip215"),n&&(Y=n(Y));const _=S/2,U=Z.subarray(0,_),H=d0(Z.subarray(_,S));let V,P,$;try{V=r.fromBytes(W,R),P=r.fromBytes(U,R),$=i.multiplyUnsafe(H)}catch{return!1}if(!R&&V.isSmallOrder())return!1;const te=b(C,P.toBytes(),V.toBytes(),Y);return P.add(V.multiplyUnsafe(te)).subtract($).clearCofactor().is0()}const D=a.BYTES,N={secretKey:D,publicKey:D,signature:2*D,seed:D};function B(Z=s(N.seed)){return cs(Z,N.seed,"seed")}function k(Z){const Y=z.randomSecretKey(Z);return{secretKey:Y,publicKey:m(Y)}}function F(Z){return q0(Z)&&Z.length===o.BYTES}function T(Z,Y){try{return!!r.fromBytes(Z,Y)}catch{return!1}}const z={getExtendedPublicKey:y,randomSecretKey:B,isValidSecretKey:F,isValidPublicKey:T,toMontgomery(Z){const{y:Y}=r.fromBytes(Z),W=N.publicKey,M=W===32;if(!M&&W!==57)throw new Error("only defined for 25519 and 448");const C=M?a.div(_n+Y,_n-Y):a.div(Y-_n,Y+_n);return a.toBytes(C)},toMontgomerySecret(Z){const Y=N.secretKey;cs(Z,Y);const W=e(Z.subarray(0,Y));return c(W).subarray(0,Y)},randomPrivateKey:B,precompute(Z=8,Y=r.BASE){return Y.precompute(Z,!1)}};return Object.freeze({keygen:k,getPublicKey:m,sign:v,verify:x,utils:z,Point:r,lengths:N})}function KG(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Qs(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},a={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,hash:r.hash,eddsaOpts:a}}function GG(r,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function WG(r){const{CURVE:e,curveOpts:t,hash:n,eddsaOpts:i}=KG(r),a=VG(e,t),o=HG(a,n,i);return GG(r,o)}const ZG=BigInt(1),c7=BigInt(2);BigInt(3);const YG=BigInt(5),QG=BigInt(8),eA=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),JD={p:eA,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:QG,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function JG(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),a=eA,s=r*r%a*r%a,c=Lr(s,c7,a)*s%a,l=Lr(c,ZG,a)*r%a,d=Lr(l,YG,a)*l%a,h=Lr(d,e,a)*d%a,y=Lr(h,t,a)*h%a,m=Lr(y,n,a)*y%a,b=Lr(m,i,a)*m%a,v=Lr(b,i,a)*m%a,E=Lr(v,e,a)*d%a;return{pow_p_5_8:Lr(E,c7,a)*r%a,b2:s}}function XG(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const l7=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function eW(r,e){const t=eA,n=on(e*e*e,t),i=on(n*n*e,t),a=JG(r*i).pow_p_5_8;let o=on(r*n*a,t);const s=on(e*o*o,t),c=o,l=on(o*l7,t),d=s===r,h=s===on(-r,t),y=s===on(-r*l7,t);return d&&(o=c),(h||y)&&(o=l),eK(o,t)&&(o=on(-o,t)),{isValid:d||h,value:o}}const tW=Qs(JD.p,{isLE:!0}),rW={...JD,Fp:tW,hash:mD,adjustScalarBytes:XG,uvRatio:eW},f7=WG(rW);var Mm={exports:{}},J_,d7;function nW(){if(d7)return J_;d7=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),o=a.charCodeAt(0);if(t[o]!==255)throw new TypeError(a+" is ambiguous");t[o]=i}var s=e.length,c=e.charAt(0),l=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function h(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var v=0,E=0,x=0,D=b.length;x!==D&&b[x]===0;)x++,v++;for(var N=(D-x)*d+1>>>0,B=new Uint8Array(N);x!==D;){for(var k=b[x],F=0,T=N-1;(k!==0||F<E)&&T!==-1;T--,F++)k+=256*B[T]>>>0,B[T]=k%s>>>0,k=k/s>>>0;if(k!==0)throw new Error("Non-zero carry");E=F,x++}for(var z=N-E;z!==N&&B[z]===0;)z++;for(var Z=c.repeat(v);z<N;++z)Z+=e.charAt(B[z]);return Z}function y(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var v=0;if(b[v]!==" "){for(var E=0,x=0;b[v]===c;)E++,v++;for(var D=(b.length-v)*l+1>>>0,N=new Uint8Array(D);b[v];){var B=t[b.charCodeAt(v)];if(B===255)return;for(var k=0,F=D-1;(B!==0||k<x)&&F!==-1;F--,k++)B+=s*N[F]>>>0,N[F]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");x=k,v++}if(b[v]!==" "){for(var T=D-x;T!==D&&N[T]===0;)T++;for(var z=new Uint8Array(E+(D-T)),Z=E;T!==D;)z[Z++]=N[T++];return z}}}function m(b){var v=y(b);if(v)return v;throw new Error("Non-base"+s+" character")}return{encode:h,decodeUnsafe:y,decode:m}}return J_=r,J_}var X_,h7;function tA(){if(h7)return X_;h7=1;const r=new TextDecoder,e=a=>r.decode(a),t=new TextEncoder,n=a=>t.encode(a);function i(a,o){const s=new Uint8Array(o);let c=0;for(const l of a)s.set(l,c),c+=l.length;return s}return X_={decodeText:e,encodeText:n,concat:i},X_}var e3,p7;function iW(){if(p7)return e3;p7=1;const{encodeText:r}=tA();class e{constructor(n,i,a,o){this.name=n,this.code=i,this.codeBuf=r(this.code),this.alphabet=o,this.codec=a(o)}encode(n){return this.codec.encode(n)}decode(n){for(const i of n)if(this.alphabet&&this.alphabet.indexOf(i)<0)throw new Error(`invalid character '${i}' in '${n}'`);return this.codec.decode(n)}}return e3=e,e3}var t3,y7;function aW(){if(y7)return t3;y7=1;const r=(n,i,a)=>{const o={};for(let y=0;y<i.length;++y)o[i[y]]=y;let s=n.length;for(;n[s-1]==="=";)--s;const c=new Uint8Array(s*a/8|0);let l=0,d=0,h=0;for(let y=0;y<s;++y){const m=o[n[y]];if(m===void 0)throw new SyntaxError("Invalid character "+n[y]);d=d<<a|m,l+=a,l>=8&&(l-=8,c[h++]=255&d>>l)}if(l>=a||255&d<<8-l)throw new SyntaxError("Unexpected end of data");return c},e=(n,i,a)=>{const o=i[i.length-1]==="=",s=(1<<a)-1;let c="",l=0,d=0;for(let h=0;h<n.length;++h)for(d=d<<8|n[h],l+=8;l>a;)l-=a,c+=i[s&d>>l];if(l&&(c+=i[s&d<<a-l]),o)for(;c.length*a&7;)c+="=";return c};return t3={rfc4648:n=>i=>({encode(a){return e(a,i,n)},decode(a){return r(a,i,n)}})},t3}var r3,m7;function sW(){if(m7)return r3;m7=1;const r=nW(),e=iW(),{rfc4648:t}=aW(),{decodeText:n,encodeText:i}=tA(),o=[["identity","\0",()=>({encode:n,decode:i}),""],["base2","0",t(1),"01"],["base8","7",t(3),"01234567"],["base10","9",r,"0123456789"],["base16","f",t(4),"0123456789abcdef"],["base16upper","F",t(4),"0123456789ABCDEF"],["base32hex","v",t(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",t(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",t(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",t(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",t(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",t(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",t(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",r,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",r,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",r,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",r,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",t(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],s=o.reduce((l,d)=>(l[d[0]]=new e(d[0],d[1],d[2],d[3]),l),{}),c=o.reduce((l,d)=>(l[d[1]]=s[d[0]],l),{});return r3={names:s,codes:c},r3}var g7;function oW(){return g7||(g7=1,(function(r,e){const t=sW(),{encodeText:n,decodeText:i,concat:a}=tA();function o(v,E){if(!E)throw new Error("requires an encoded Uint8Array");const{name:x,codeBuf:D}=h(v);return d(x,E),a([D,E],D.length+E.length)}function s(v,E){const x=h(v),D=n(x.encode(E));return a([x.codeBuf,D],x.codeBuf.length+D.length)}function c(v){v instanceof Uint8Array&&(v=i(v));const E=v[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(E)&&(v=v.toLowerCase()),h(v[0]).decode(v.substring(1))}function l(v){if(v instanceof Uint8Array&&(v=i(v)),Object.prototype.toString.call(v)!=="[object String]")return!1;try{return h(v[0]).name}catch{return!1}}function d(v,E){h(v).decode(i(E))}function h(v){if(Object.prototype.hasOwnProperty.call(t.names,v))return t.names[v];if(Object.prototype.hasOwnProperty.call(t.codes,v))return t.codes[v];throw new Error(`Unsupported encoding: ${v}`)}function y(v){return v instanceof Uint8Array&&(v=i(v)),h(v[0])}e=r.exports=o,e.encode=s,e.decode=c,e.isEncoded=l,e.encoding=h,e.encodingFromData=y;const m=Object.freeze(t.names),b=Object.freeze(t.codes);e.names=m,e.codes=b})(Mm,Mm.exports)),Mm.exports}var XD=oW();const uW=W8,bb={toString:$G,fromString:jG,concat:AK};function Hu(r){return bb.toString(r,"base64url")}function Lx(r){return bb.toString(r,"base58btc")}const eP={"ed25519-pub":237,"x25519-pub":236,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"p256-pub":4608},cW={"bls12_381-g1-pub":"Bls12381G1","bls12_381-g2-pub":"Bls12381G2","ed25519-pub":"Ed25519","p256-pub":"P-256","secp256k1-pub":"Secp256k1","x25519-pub":"X25519"};function lW(r,e="base58btc",t){{const n=eP[t],i=LG(n),a=new Uint8Array(i+r.length);return qG(n,a),a.set(r,i),bb.toString(XD.encode(e,a),"utf-8")}}function rA(r){const e=XD.decode(r);if([32,33,48,64,65,96].includes(e.length))return{keyBytes:e};try{const[t,n]=kG(e),i=Object.entries(eP).filter(([,a])=>a===t)?.[0][0]??"";return{keyBytes:e.slice(n),keyType:cW[i]}}catch{return{keyBytes:e}}}function Xc(r,e){let t=r.startsWith("0x")?r.substring(2):r;return t.length%2!==0&&(t=`0${t}`),bb.fromString(t.toLowerCase(),"base16")}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));function v7(r,e){return Xc(r.toString(16))}function fW(r){const{jwkCurve:e}=nA(r),t=dW(r);return{crv:e,kty:"EC",x:Hu(v7(t.x)),y:Hu(v7(t.y)),kid:r.toString()}}function nA(r){const e=r.type;switch(e){case _t.K1:return{jwkCurve:"secp256k1",verificationMethodType:"EcdsaSecp256k1VerificationKey2019"};case _t.R1:return{jwkCurve:"P-256",verificationMethodType:"JsonWebKey2020"};case _t.WA:return{jwkCurve:"P-256",verificationMethodType:"JsonWebKey2020"};default:throw new Error(`Unsupported key type: ${e}`)}}function dW(r){const{jwkCurve:e}=nA(r);switch(e){case"secp256k1":return $D.ProjectivePoint.fromHex(r.data.array);case"P-256":return HD.ProjectivePoint.fromHex(r.data.array);default:throw new Error(`Unsupported curve: ${e}`)}}var hW={chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",service:[{id:"https://eos.greymass.com",type:"LinkedDomains",serviceEndpoint:"https://eos.greymass.com"},{id:"https://eos.dfuse.eosnation.io",type:"LinkedDomains",serviceEndpoint:"https://eos.dfuse.eosnation.io"}]},pW={chainId:"4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11",service:[{id:"https://telos.greymass.com",type:"LinkedDomains",serviceEndpoint:"https://telos.greymass.com"}]},yW={chainId:"f778f7d2f124b110e0a71245b310c1d0ac1a0edd21f131c5ecb2e2bc03e8fe2e",service:[{id:"https://api.xec.cryptolions.io",type:"LinkedDomains",serviceEndpoint:"https://api.xec.cryptolions.io"}]},mW={chainId:"66d565f72ac08f8321a3036e2d92eea7f96ddc90599bdbfc2d025d810c74c248",service:[{id:"https://pangea.eosusa.io",type:"LinkedDomains",serviceEndpoint:"https://pangea.eosusa.io"}]},gW={eos:hW,"eos:testnet:jungle":{chainId:"2a02a0053e5a8cf73a56ba0fda11e4d92e0238a4a2aa74fccf46d5a910746840",service:[{id:"https://jungle4.cryptolions.io",type:"LinkedDomains",serviceEndpoint:"https://jungle4.cryptolions.io"}]},telos:pW,europechain:yW,pangea:mW};function vW(r){const e=r.fetch?new Gp(r.url,{fetch:r.fetch}):new Gp(r.url);return new db({url:r.url,provider:e})}const b7=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function hi(r,e,t){if(!r.s){if(t instanceof Dd)if(t.s)e&1&&(e=t.s),t=t.v;else{t.o=hi.bind(null,r,e);return}if(t&&t.then){t.then(hi.bind(null,r,e),hi.bind(null,r,2));return}r.s=e,r.v=t;const n=r.o;n&&n(r)}}const Dd=(function(){function r(){}return r.prototype.then=function(e,t){const n=new r,i=this.s;if(i){const a=i&1?e:t;if(a){try{hi(n,1,a(this.v))}catch(o){hi(n,2,o)}return n}else return this}return this.o=function(a){try{const o=a.v;a.s&1?hi(n,1,e?e(o):o):t?hi(n,1,t(o)):hi(n,2,o)}catch(o){hi(n,2,o)}},n},r})();function tP(r){return r instanceof Dd&&r.s&1}function bW(r,e,t){var n=-1,i,a;function o(s){try{for(;++n<r.length&&(!t||!t());)if(s=e(n),s&&s.then)if(tP(s))s=s.v;else{s.then(o,a||(a=hi.bind(null,i=new Dd,2)));return}i?hi(i,1,s):i=s}catch(c){hi(i||(i=new Dd),2,c)}}return o(),i}function wW(r,e,t){if(typeof r[b7]=="function"){let h=function(y){try{for(;!(i=n.next()).done&&(!t||!t());)if(y=e(i.value),y&&y.then)if(tP(y))y=y.v;else{y.then(h,o||(o=hi.bind(null,a=new Dd,2)));return}a?hi(a,1,y):a=y}catch(m){hi(a||(a=new Dd),2,m)}};var d=h,n=r[b7](),i,a,o;if(h(),n.return){var s=function(y){try{i.done||n.return()}catch{}return y};if(a&&a.then)return a.then(s,function(y){throw s(y)});s()}return a}if(!("length"in r))throw new TypeError("Object is not iterable");for(var c=[],l=0;l<r.length;l++)c.push(r[l]);return bW(c,function(h){return e(c[h])},t)}function _W(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}const EW=function(r,e,t,n){try{const i={...gW,...n.antelopeChainRegistry};let a=RW(e,i);if(n.antelopeChainUrl){const[o,s]=e.id.split(":");a={chain:{chainId:o,service:[]},subject:s}}return a?Promise.resolve(xW(a,r,e,n)).then(function(o){if(!o)return _7("notFound");const s=NW(a,e.did,o);return{didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:s,didDocumentMetadata:{}}}):Promise.resolve(_7("invalidDid"))}catch(i){return Promise.reject(i)}},w7=function(r,e){try{return Promise.resolve(_W(function(){return Promise.resolve(vW(e).v1.chain.get_account(r.subject))},function(t){if(t instanceof U0&&t.message.startsWith("Account Query Exception at /v1/chain/get_account"))return null;throw t}))}catch(t){return Promise.reject(t)}},xW=function(r,e,t,n){try{let o=function(l){let d;if(a)return l;const h=OW(r.chain.service,s),y=wW(h,function(m){return Promise.resolve(w7(r,{url:m.serviceEndpoint,fetch:n.fetch})).then(function(b){return d=1,b})},function(){return d});return y&&y.then?y.then(function(m){return d?m:null}):d?y:null};var i=o;let a;const s="LinkedDomains",c=(function(){if(n.antelopeChainUrl)return Promise.resolve(w7(r,{url:n.antelopeChainUrl,fetch:n.fetch})).then(function(l){return a=1,l})})();return Promise.resolve(c&&c.then?c.then(o):o(c))}catch(a){return Promise.reject(a)}},rP="([a-z1-5.]{0,12}[a-z1-5])",AW="([A-Fa-f0-9]{64})",SW="(([a-z1-5.]{0,12}[a-z1-5])((:[a-z1-5.]{0,12}[a-z1-5])+)?)";function nP(r){return new RegExp(`^${r}$`)}const MW=nP(`${AW}:${rP}`),TW=nP(`${SW}:${rP}`),iP="ConditionalProof2022";function _7(r){return{didResolutionMetadata:{error:r},didDocument:null,didDocumentMetadata:{}}}function RW(r,e){const t=r.id.match(TW);if(t){const i=e[t[1]];return i?{chain:i,subject:t[t.length-1]}:void 0}const n=r.id.match(MW);if(n)for(const i of Object.keys(e)){const a=e[i];if(a.chainId===n[1])return{chain:a,subject:n[n.length-1]}}}function OW(r,e){return r.filter(t=>Array.isArray(t.type)?t.type.includes(e):t.type===e)}function E7(r,e,t,n){const{verificationMethodType:i}=nA(n);return{id:r+"-"+e,controller:t,type:i,publicKeyJwk:fW(n)}}function CW(r,e,t,n,i){const a=r.slice(0,r.lastIndexOf(e.subject)-1);return{id:r+"-"+t,controller:n,type:iP,conditionDelegated:a+":"+i.permission.actor+"#"+i.permission.permission}}function NW(r,e,t){const n=[];for(const a of t.permissions){const o=e+"#"+a.perm_name;a.required_auth.accounts=a.required_auth.accounts.filter(c=>c.permission.permission.toString()!=="eosio.code");let s;if(a.required_auth.keys.length===1&&a.required_auth.accounts.length===0)s=E7(o,0,e,a.required_auth.keys[0].key),s.id=o;else{s={id:o,controller:e,type:iP,threshold:a.required_auth.threshold.toNumber(),conditionWeightedThreshold:[]},a.parent.toString()!==""&&(s.relationshipParent=[e+"#"+a.parent.toString()]);let c=0;for(const l of a.required_auth.keys)s.conditionWeightedThreshold.push({condition:E7(o,c,e,l.key),weight:l.weight.toNumber()}),c++;for(const l of a.required_auth.accounts)s.conditionWeightedThreshold.push({condition:CW(o,r,c,e,l),weight:l.weight.toNumber()}),c++}n.push(s)}return{"@context":["https://www.w3.org/ns/did/v1","https://w3c-ccg.github.io/verifiable-conditions/contexts/verifiable-conditions-2021-v1.json"],id:e,verificationMethod:n,service:r.chain.service}}function x7(r={}){return function(e,t,n,i){return EW(e,t,n,{...i,...r})}}function BW(r){return{eosio:x7(r),antelope:x7(r)}}var id;(function(r){r.Secp256r1="Secp256r1",r.Secp256k1="Secp256k1",r.Ed25519="Ed25519",r.X25519="X25519"})(id||(id={}));function IW(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function iA(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function DW(r){return new TextEncoder().encode(r)}function PW(r){return new TextDecoder().decode(r)}function UW(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),o=a.charCodeAt(0);if(t[o]!==255)throw new TypeError(a+" is ambiguous");t[o]=i}var s=r.length,c=r.charAt(0),l=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function h(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var v=0,E=0,x=0,D=b.length;x!==D&&b[x]===0;)x++,v++;for(var N=(D-x)*d+1>>>0,B=new Uint8Array(N);x!==D;){for(var k=b[x],F=0,T=N-1;(k!==0||F<E)&&T!==-1;T--,F++)k+=256*B[T]>>>0,B[T]=k%s>>>0,k=k/s>>>0;if(k!==0)throw new Error("Non-zero carry");E=F,x++}for(var z=N-E;z!==N&&B[z]===0;)z++;for(var Z=c.repeat(v);z<N;++z)Z+=r.charAt(B[z]);return Z}function y(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var v=0;if(b[v]!==" "){for(var E=0,x=0;b[v]===c;)E++,v++;for(var D=(b.length-v)*l+1>>>0,N=new Uint8Array(D);b[v];){var B=t[b.charCodeAt(v)];if(B===255)return;for(var k=0,F=D-1;(B!==0||k<x)&&F!==-1;F--,k++)B+=s*N[F]>>>0,N[F]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");x=k,v++}if(b[v]!==" "){for(var T=D-x;T!==D&&N[T]===0;)T++;for(var z=new Uint8Array(E+(D-T)),Z=E;T!==D;)z[Z++]=N[T++];return z}}}function m(b){var v=y(b);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:y,decode:m}}var kW=UW,qW=kW;let LW=class{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},jW=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return aP(this,e)}},$W=class{decoders;constructor(e){this.decoders=e}or(e){return aP(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function aP(r,e){return new $W({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let FW=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new LW(e,t,n),this.decoder=new jW(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function wb({name:r,prefix:e,encode:t,decode:n}){return new FW(r,e,t,n)}function F0({name:r,prefix:e,alphabet:t}){const{encode:n,decode:i}=qW(t,r);return wb({prefix:e,name:r,encode:n,decode:a=>iA(i(a))})}function zW(r,e,t,n){let i=r.length;for(;r[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let o=0,s=0,c=0;for(let l=0;l<i;++l){const d=e[r[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);s=s<<t|d,o+=t,o>=8&&(o-=8,a[c++]=255&s>>o)}if(o>=t||(255&s<<8-o)!==0)throw new SyntaxError("Unexpected end of data");return a}function VW(r,e,t){const n=e[e.length-1]==="=",i=(1<<t)-1;let a="",o=0,s=0;for(let c=0;c<r.length;++c)for(s=s<<8|r[c],o+=8;o>t;)o-=t,a+=e[i&s>>o];if(o!==0&&(a+=e[i&s<<t-o]),n)for(;(a.length*t&7)!==0;)a+="=";return a}function HW(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function Yn({name:r,prefix:e,bitsPerChar:t,alphabet:n}){const i=HW(n);return wb({prefix:e,name:r,encode(a){return VW(a,n,t)},decode(a){return zW(a,i,t,r)}})}const Sp=Yn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),KW=Yn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GW=Yn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),WW=Yn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZW=Yn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YW=Yn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),QW=Yn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),JW=Yn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),XW=Yn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eZ=Object.freeze(Object.defineProperty({__proto__:null,base32:Sp,base32hex:ZW,base32hexpad:QW,base32hexpadupper:JW,base32hexupper:YW,base32pad:GW,base32padupper:WW,base32upper:KW,base32z:XW},Symbol.toStringTag,{value:"Module"})),Y1=F0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tZ=F0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rZ=Object.freeze(Object.defineProperty({__proto__:null,base36:Y1,base36upper:tZ},Symbol.toStringTag,{value:"Module"})),Io=F0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nZ=F0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),iZ=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Io,base58flickr:nZ},Symbol.toStringTag,{value:"Module"}));var aZ=sP,A7=128,sZ=-128,oZ=Math.pow(2,31);function sP(r,e,t){e=e||[],t=t||0;for(var n=t;r>=oZ;)e[t++]=r&255|A7,r/=128;for(;r&sZ;)e[t++]=r&255|A7,r>>>=7;return e[t]=r|0,sP.bytes=t-n+1,e}var uZ=jx,cZ=128,S7=127;function jx(r,n){var t=0,n=n||0,i=0,a=n,o,s=r.length;do{if(a>=s)throw jx.bytes=0,new RangeError("Could not decode varint");o=r[a++],t+=i<28?(o&S7)<<i:(o&S7)*Math.pow(2,i),i+=7}while(o>=cZ);return jx.bytes=a-n,t}var lZ=Math.pow(2,7),fZ=Math.pow(2,14),dZ=Math.pow(2,21),hZ=Math.pow(2,28),pZ=Math.pow(2,35),yZ=Math.pow(2,42),mZ=Math.pow(2,49),gZ=Math.pow(2,56),vZ=Math.pow(2,63),bZ=function(r){return r<lZ?1:r<fZ?2:r<dZ?3:r<hZ?4:r<pZ?5:r<yZ?6:r<mZ?7:r<gZ?8:r<vZ?9:10},wZ={encode:aZ,decode:uZ,encodingLength:bZ},Sv=wZ;function $x(r,e=0){return[Sv.decode(r,e),Sv.decode.bytes]}function Mv(r,e,t=0){return Sv.encode(r,e,t),e}function Tv(r){return Sv.encodingLength(r)}function oP(r,e){const t=e.byteLength,n=Tv(r),i=n+Tv(t),a=new Uint8Array(i+t);return Mv(r,a,0),Mv(t,a,n),a.set(e,i),new aA(r,t,e,a)}function _Z(r){const e=iA(r),[t,n]=$x(e),[i,a]=$x(e.subarray(n)),o=e.subarray(n+a);if(o.byteLength!==i)throw new Error("Incorrect length");return new aA(t,i,o,e)}function EZ(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&IW(r.bytes,t.bytes)}}class aA{code;size;digest;bytes;constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}function M7(r,e){const{bytes:t,version:n}=r;return n===0?AZ(t,Fx(r),e??Io.encoder):SZ(t,Fx(r),e??Sp.encoder)}const T7=new WeakMap;function Fx(r){const e=T7.get(r);if(e==null){const t=new Map;return T7.set(r,t),t}return e}class Zr{code;version;multihash;bytes;"/";constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Yh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==MZ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Zr.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=oP(e,t);return Zr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Zr.equals(this,e)}static equals(e,t){const n=t;return n!=null&&e.code===n.code&&e.version===n.version&&EZ(e.multihash,n.multihash)}toString(e){return M7(this,e)}toJSON(){return{"/":M7(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof Zr)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:i,multihash:a,bytes:o}=t;return new Zr(n,i,a,o??R7(n,i,a.bytes))}else if(t[TZ]===!0){const{version:n,multihash:i,code:a}=t,o=_Z(i);return Zr.create(n,a,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Yh)throw new Error(`Version 0 CID must use dag-pb (code: ${Yh}) block encoding`);return new Zr(e,t,n,n.bytes)}case 1:{const i=R7(e,t,n.bytes);return new Zr(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Zr.create(0,Yh,e)}static createV1(e,t){return Zr.create(1,e,t)}static decode(e){const[t,n]=Zr.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Zr.inspectBytes(e),n=t.size-t.multihashSize,i=iA(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const a=i.subarray(t.multihashSize-t.digestSize),o=new aA(t.multihashCode,t.digestSize,a,i);return[t.version===0?Zr.createV0(o):Zr.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[h,y]=$x(e.subarray(t));return t+=y,h};let i=n(),a=Yh;if(i===18?(i=0,t=0):a=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=t,s=n(),c=n(),l=t+c,d=l-o;return{version:i,codec:a,multihashCode:s,digestSize:c,multihashSize:d,size:l}}static parse(e,t){const[n,i]=xZ(e,t),a=Zr.decode(i);if(a.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Fx(a).set(n,e),a}}function xZ(r,e){switch(r[0]){case"Q":{const t=e??Io;return[Io.prefix,t.decode(`${Io.prefix}${r}`)]}case Io.prefix:{const t=e??Io;return[Io.prefix,t.decode(r)]}case Sp.prefix:{const t=e??Sp;return[Sp.prefix,t.decode(r)]}case Y1.prefix:{const t=e??Y1;return[Y1.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function AZ(r,e,t){const{prefix:n}=t;if(n!==Io.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(n);if(i==null){const a=t.encode(r).slice(1);return e.set(n,a),a}else return i}function SZ(r,e,t){const{prefix:n}=t,i=e.get(n);if(i==null){const a=t.encode(r);return e.set(n,a),a}else return i}const Yh=112,MZ=18;function R7(r,e,t){const n=Tv(r),i=n+Tv(e),a=new Uint8Array(i+t.byteLength);return Mv(r,a,0),Mv(e,a,n),a.set(t,i),a}const TZ=Symbol.for("@ipld/js-cid/CID");new TextDecoder;const uP=new TextEncoder,O7=2**32,RZ=2**31;function OZ(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Mp(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){const n=uP.encode(r.Name);t-=n.length,e.set(n,t),t=Mp(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Mp(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function CZ(r){const e=BZ(r),t=new Uint8Array(e);let n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Mp(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){const a=OZ(r.Links[i],t.subarray(0,n));n-=a,n=Mp(t,n,a)-1,t[n]=18}return t}function NZ(r){let e=0;if(r.Hash){const t=r.Hash.length;e+=1+t+md(t)}if(typeof r.Name=="string"){const t=uP.encode(r.Name).length;e+=1+t+md(t)}return typeof r.Tsize=="number"&&(e+=1+md(r.Tsize)),e}function BZ(r){let e=0;if(r.Data){const t=r.Data.length;e+=1+t+md(t)}if(r.Links)for(const t of r.Links){const n=NZ(t);e+=1+n+md(n)}return e}function Mp(r,e,t){e-=md(t);const n=e;for(;t>=RZ;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function md(r){return r%2===0&&r++,Math.floor((IZ(r)+6)/7)}function IZ(r){let e=0;return r>=O7&&(r=Math.floor(r/O7),e=32),r>=65536&&(r>>>=16,e+=16),r>=256&&(r>>>=8,e+=8),e+DZ[r]}const DZ=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],PZ=["Data","Links"],UZ=["Hash","Name","Tsize"],zx=new TextEncoder;function cP(r,e){if(r===e)return 0;const t=r.Name?zx.encode(r.Name):[],n=e.Name?zx.encode(e.Name):[];let i=t.length,a=n.length;for(let o=0,s=Math.min(i,a);o<s;++o)if(t[o]!==n[o]){i=t[o],a=n[o];break}return i<a?-1:a<i?1:0}function C7(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function kZ(r){if(typeof r.asCID=="object"){const t=Zr.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Hash){let t=Zr.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=Zr.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=Zr.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function qZ(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=zx.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(kZ),e.Links.sort(cP);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function LZ(r){if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form");if(!C7(r,PZ))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<r.Links.length;e++){const t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!C7(t,UZ))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&cP(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}const jZ=112;function $Z(r){LZ(r);const e={};return r.Links&&(e.Links=r.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),CZ(e)}class h0 extends Error{static name="InvalidTypeError";static code="ERR_INVALID_TYPE";name=h0.name;code=h0.code;constructor(e="Invalid type"){super(e)}}class Rv extends Error{static name="InvalidUnixFSMessageError";static code="ERR_INVALID_MESSAGE";name=Rv.name;code=Rv.code;constructor(e="Invalid message"){super(e)}}const FZ=Math.pow(2,7),zZ=Math.pow(2,14),VZ=Math.pow(2,21),lP=Math.pow(2,28),fP=Math.pow(2,35),dP=Math.pow(2,42),hP=Math.pow(2,49),di=128,Ou=127;function sA(r){if(r<FZ)return 1;if(r<zZ)return 2;if(r<VZ)return 3;if(r<lP)return 4;if(r<fP)return 5;if(r<dP)return 6;if(r<hP)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function HZ(r,e,t=0){switch(sA(r)){case 8:e[t++]=r&255|di,r/=128;case 7:e[t++]=r&255|di,r/=128;case 6:e[t++]=r&255|di,r/=128;case 5:e[t++]=r&255|di,r/=128;case 4:e[t++]=r&255|di,r>>>=7;case 3:e[t++]=r&255|di,r>>>=7;case 2:e[t++]=r&255|di,r>>>=7;case 1:{e[t++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return e}function KZ(r,e){let t=r[e],n=0;if(n+=t&Ou,t<di||(t=r[e+1],n+=(t&Ou)<<7,t<di)||(t=r[e+2],n+=(t&Ou)<<14,t<di)||(t=r[e+3],n+=(t&Ou)<<21,t<di)||(t=r[e+4],n+=(t&Ou)*lP,t<di)||(t=r[e+5],n+=(t&Ou)*fP,t<di)||(t=r[e+6],n+=(t&Ou)*dP,t<di)||(t=r[e+7],n+=(t&Ou)*hP,t<di))return n;throw new RangeError("Could not decode varint")}const oA=new Float32Array([-0]),Xu=new Uint8Array(oA.buffer);function GZ(r,e,t){oA[0]=r,e[t]=Xu[0],e[t+1]=Xu[1],e[t+2]=Xu[2],e[t+3]=Xu[3]}function WZ(r,e){return Xu[0]=r[e],Xu[1]=r[e+1],Xu[2]=r[e+2],Xu[3]=r[e+3],oA[0]}const uA=new Float64Array([-0]),ri=new Uint8Array(uA.buffer);function ZZ(r,e,t){uA[0]=r,e[t]=ri[0],e[t+1]=ri[1],e[t+2]=ri[2],e[t+3]=ri[3],e[t+4]=ri[4],e[t+5]=ri[5],e[t+6]=ri[6],e[t+7]=ri[7]}function YZ(r,e){return ri[0]=r[e],ri[1]=r[e+1],ri[2]=r[e+2],ri[3]=r[e+3],ri[4]=r[e+4],ri[5]=r[e+5],ri[6]=r[e+6],ri[7]=r[e+7],uA[0]}const QZ=BigInt(Number.MAX_SAFE_INTEGER),JZ=BigInt(Number.MIN_SAFE_INTEGER);class ni{lo;hi;constructor(e,t){this.lo=e|0,this.hi=t|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return yl;if(e<QZ&&e>JZ)return this.fromNumber(Number(e));const t=e<0n;t&&(e=-e);let n=e>>32n,i=e-(n<<32n);return t&&(n=~n|0n,i=~i|0n,++i>N7&&(i=0n,++n>N7&&(n=0n))),new ni(Number(i),Number(n))}static fromNumber(e){if(e===0)return yl;const t=e<0;t&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new ni(n,i)}static from(e){return typeof e=="number"?ni.fromNumber(e):typeof e=="bigint"?ni.fromBigInt(e):typeof e=="string"?ni.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new ni(e.low>>>0,e.high>>>0):yl}}const yl=new ni(0,0);yl.toBigInt=function(){return 0n};yl.zzEncode=yl.zzDecode=function(){return this};yl.length=function(){return 1};const N7=4294967296n;function XZ(r){let e=0,t=0;for(let n=0;n<r.length;++n)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function eY(r,e,t){if(t-e<1)return"";let i;const a=[];let o=0,s;for(;e<t;)s=r[e++],s<128?a[o++]=s:s>191&&s<224?a[o++]=(s&31)<<6|r[e++]&63:s>239&&s<365?(s=((s&7)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,a[o++]=55296+(s>>10),a[o++]=56320+(s&1023)):a[o++]=(s&15)<<12|(r[e++]&63)<<6|r[e++]&63,o>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,a)),o=0);return i!=null?(o>0&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))}function pP(r,e,t){const n=t;let i,a;for(let o=0;o<r.length;++o)i=r.charCodeAt(o),i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&((a=r.charCodeAt(o+1))&64512)===56320?(i=65536+((i&1023)<<10)+(a&1023),++o,e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128);return t-n}function es(r,e){return RangeError(`index out of range: ${r.pos} + ${e??1} > ${r.len}`)}function Tm(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}class tY{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,es(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw es(this,4);return Tm(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw es(this,4);return Tm(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw es(this,4);const e=WZ(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw es(this,4);const e=YZ(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw es(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const e=this.bytes();return eY(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw es(this,e);this.pos+=e}else do if(this.pos>=this.len)throw es(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new ni(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw es(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw es(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw es(this,8);const e=Tm(this.buf,this.pos+=4),t=Tm(this.buf,this.pos+=4);return new ni(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=KZ(this.buf,this.pos);return this.pos+=sA(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function rY(r){return new tY(r instanceof Uint8Array?r:r.subarray())}function cA(r,e,t){const n=rY(r);return e.decode(n,void 0,t)}function Ov(r=0){return new Uint8Array(r)}const nY=F0({prefix:"9",name:"base10",alphabet:"0123456789"}),iY=Object.freeze(Object.defineProperty({__proto__:null,base10:nY},Symbol.toStringTag,{value:"Module"})),aY=Yn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sY=Yn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),oY=Object.freeze(Object.defineProperty({__proto__:null,base16:aY,base16upper:sY},Symbol.toStringTag,{value:"Module"})),uY=Yn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),cY=Object.freeze(Object.defineProperty({__proto__:null,base2:uY},Symbol.toStringTag,{value:"Module"})),yP=Array.from(""),lY=yP.reduce((r,e,t)=>(r[t]=e,r),[]),fY=yP.reduce((r,e,t)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return r[n]=t,r},[]);function dY(r){return r.reduce((e,t)=>(e+=lY[t],e),"")}function hY(r){const e=[];for(const t of r){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const i=fY[n];if(i==null)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const pY=wb({prefix:"",name:"base256emoji",encode:dY,decode:hY}),yY=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:pY},Symbol.toStringTag,{value:"Module"})),mY=Yn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),gY=Yn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vY=Yn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bY=Yn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),wY=Object.freeze(Object.defineProperty({__proto__:null,base64:mY,base64pad:gY,base64url:vY,base64urlpad:bY},Symbol.toStringTag,{value:"Module"})),_Y=Yn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),EY=Object.freeze(Object.defineProperty({__proto__:null,base8:_Y},Symbol.toStringTag,{value:"Module"})),xY=wb({prefix:"\0",name:"identity",encode:r=>PW(r),decode:r=>DW(r)}),AY=Object.freeze(Object.defineProperty({__proto__:null,identity:xY},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const B7={...AY,...cY,...EY,...iY,...oY,...eZ,...rZ,...iZ,...wY,...yY};function mP(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const I7=mP("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),n3=mP("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Ov(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),SY={utf8:I7,"utf-8":I7,hex:B7.base16,latin1:n3,ascii:n3,binary:n3,...B7};function MY(r,e="utf8"){const t=SY[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}function TY(r){let n,i=8192;return function(o){if(o<1||o>4096)return Ov(o);i+o>8192&&(n=Ov(8192),i=0);const s=n.subarray(i,i+=o);return(i&7)!==0&&(i=(i|7)+1),s}}class yp{fn;len;next;val;constructor(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}}function i3(){}class RY{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const OY=TY();function CY(r){return globalThis.Buffer!=null?Ov(r):OY(r)}class Vx{len;head;tail;states;constructor(){this.len=0,this.head=new yp(i3,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new yp(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new BY((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Rm,10,ni.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const t=ni.fromBigInt(e);return this._push(Rm,t.length(),t)}uint64Number(e){return this._push(HZ,sA(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const t=ni.fromBigInt(e).zzEncode();return this._push(Rm,t.length(),t)}sint64Number(e){const t=ni.fromNumber(e).zzEncode();return this._push(Rm,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(a3,1,e?1:0)}fixed32(e){return this._push(Qh,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const t=ni.fromBigInt(e);return this._push(Qh,4,t.lo)._push(Qh,4,t.hi)}fixed64Number(e){const t=ni.fromNumber(e);return this._push(Qh,4,t.lo)._push(Qh,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(GZ,4,e)}double(e){return this._push(ZZ,8,e)}bytes(e){const t=e.length>>>0;return t===0?this._push(a3,1,0):this.uint32(t)._push(IY,t,e)}string(e){const t=XZ(e);return t!==0?this.uint32(t)._push(pP,t,e):this._push(a3,1,0)}fork(){return this.states=new RY(this),this.head=this.tail=new yp(i3,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new yp(i3,0,0),this.len=0),this}ldelim(){const e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next;const t=CY(this.len);let n=0;for(;e!=null;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t}}function a3(r,e,t){e[t]=r&255}function NY(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}class BY extends yp{next;constructor(e,t){super(NY,e,t),this.next=void 0}}function Rm(r,e,t){for(;r.hi!==0;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}function Qh(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function IY(r,e,t){e.set(r,t)}globalThis.Buffer!=null&&(Vx.prototype.bytes=function(r){const e=r.length>>>0;return this.uint32(e),e>0&&this._push(DY,e,r),this},Vx.prototype.string=function(r){const e=globalThis.Buffer.byteLength(r);return this.uint32(e),e>0&&this._push(PY,e,r),this});function DY(r,e,t){e.set(r,t)}function PY(r,e,t){r.length<40?pP(r,e,t):e.utf8Write!=null?e.utf8Write(r,t):e.set(MY(r),t)}function UY(){return new Vx}function lA(r,e){const t=UY();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var Cv;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(Cv||(Cv={}));function gP(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function kY(r){function e(i){if(r[i.toString()]==null)throw new Error("Invalid enum value");return r[i]}const t=function(a,o){const s=e(a);o.int32(s)},n=function(a){const o=a.int32();return e(o)};return gP("enum",Cv.VARINT,t,n)}function fA(r,e){return gP("message",Cv.LENGTH_DELIMITED,r,e)}var Rs;(function(r){(function(n){n.Raw="Raw",n.Directory="Directory",n.File="File",n.Metadata="Metadata",n.Symlink="Symlink",n.HAMTShard="HAMTShard"})(r.DataType||(r.DataType={}));let e;(function(n){n[n.Raw=0]="Raw",n[n.Directory=1]="Directory",n[n.File=2]="File",n[n.Metadata=3]="Metadata",n[n.Symlink=4]="Symlink",n[n.HAMTShard=5]="HAMTShard"})(e||(e={})),(function(n){n.codec=()=>kY(e)})(r.DataType||(r.DataType={}));let t;r.codec=()=>(t==null&&(t=fA((n,i,a={})=>{if(a.lengthDelimited!==!1&&i.fork(),n.Type!=null&&(i.uint32(8),r.DataType.codec().encode(n.Type,i)),n.Data!=null&&(i.uint32(18),i.bytes(n.Data)),n.filesize!=null&&(i.uint32(24),i.uint64(n.filesize)),n.blocksizes!=null)for(const o of n.blocksizes)i.uint32(32),i.uint64(o);n.hashType!=null&&(i.uint32(40),i.uint64(n.hashType)),n.fanout!=null&&(i.uint32(48),i.uint64(n.fanout)),n.mode!=null&&(i.uint32(56),i.uint32(n.mode)),n.mtime!=null&&(i.uint32(66),Nv.codec().encode(n.mtime,i)),a.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const a={blocksizes:[]},o=i==null?n.len:n.pos+i;for(;n.pos<o;){const s=n.uint32();switch(s>>>3){case 1:a.Type=r.DataType.codec().decode(n);break;case 2:a.Data=n.bytes();break;case 3:a.filesize=n.uint64();break;case 4:a.blocksizes.push(n.uint64());break;case 5:a.hashType=n.uint64();break;case 6:a.fanout=n.uint64();break;case 7:a.mode=n.uint32();break;case 8:a.mtime=Nv.codec().decode(n,n.uint32());break;default:n.skipType(s&7);break}}return a})),t),r.encode=n=>lA(n,r.codec()),r.decode=n=>cA(n,r.codec())})(Rs||(Rs={}));var Nv;(function(r){let e;r.codec=()=>(e==null&&(e=fA((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.Seconds!=null&&(n.uint32(8),n.int64(t.Seconds)),t.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(t.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const o=t.uint32();switch(o>>>3){case 1:i.Seconds=t.int64();break;case 2:i.FractionalNanoseconds=t.fixed32();break;default:t.skipType(o&7);break}}return i})),e),r.encode=t=>lA(t,r.codec()),r.decode=t=>cA(t,r.codec())})(Nv||(Nv={}));var D7;(function(r){let e;r.codec=()=>(e==null&&(e=fA((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.MimeType!=null&&(n.uint32(10),n.string(t.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const o=t.uint32();o>>>3===1?i.MimeType=t.string():t.skipType(o&7)}return i})),e),r.encode=t=>lA(t,r.codec()),r.decode=t=>cA(t,r.codec())})(D7||(D7={}));const P7={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},qY=["directory","hamt-sharded-directory"],U7=parseInt("0644",8),k7=parseInt("0755",8),q7=BigInt(1024);class dA{static unmarshal(e){const t=Rs.decode(e);if(t.fanout!=null&&t.fanout>q7)throw new Rv(`Fanout size was too large - ${t.fanout} > ${q7}`);const n=new dA({type:P7[t.Type!=null?t.Type.toString():"File"],data:t.Data,blockSizes:t.blocksizes,mode:t.mode,mtime:t.mtime!=null?{secs:t.mtime.Seconds??0n,nsecs:t.mtime.FractionalNanoseconds}:void 0,fanout:t.fanout});return n._originalMode=t.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){const{type:t,data:n,blockSizes:i,hashType:a,fanout:o,mtime:s,mode:c}=e;if(t!=null&&!Object.values(P7).includes(t))throw new h0("Type: "+t+" is not valid");this.type=t??"file",this.data=n,this.hashType=a,this.fanout=o,this.blockSizes=i??[],this._originalMode=0,this.mode=c,this.mtime=s}set mode(e){e==null?this._mode=this.isDirectory()?k7:U7:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return qY.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(t=>{e+=t}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Rs.DataType.Raw;break;case"directory":e=Rs.DataType.Directory;break;case"file":e=Rs.DataType.File;break;case"metadata":e=Rs.DataType.Metadata;break;case"symlink":e=Rs.DataType.Symlink;break;case"hamt-sharded-directory":e=Rs.DataType.HAMTShard;break;default:throw new h0(`Type: ${e} is not valid`)}let t=this.data;(this.data==null||this.data.length===0)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===U7&&!this.isDirectory()&&(n=void 0),n===k7&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Rs.encode({Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}}function hA(r){let e;if(typeof r=="string")try{e=JSON.parse(r)?.proof?.jwt||r}catch{e=r}else r?.proof?.jwt?e=r.proof.jwt:e=JSON.stringify(r);const t=new dA({type:"file",data:new TextEncoder().encode(e)}),n=$Z(qZ({Data:t.marshal()})),i=oP(18,uW(n));return Zr.create(0,jZ,i).toString()}const LY="6.16.0";function L7(r,e,t){for(let n in e){let i=e[n];Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function ad(r,e){if(r==null)return"null";if(e==null&&(e=new Set),typeof r=="object"){if(e.has(r))return"[Circular]";e.add(r)}if(Array.isArray(r))return"[ "+r.map(t=>ad(t,e)).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let i=0;i<r.length;i++)n+=t[r[i]>>4],n+=t[r[i]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return ad(r.toJSON(),e);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(n=>`${ad(n,e)}: ${ad(r[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function jY(r,e,t){let n=r;{const a=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${ad(t)}`);for(const o in t){if(o==="shortMessage")continue;const s=t[o];a.push(o+"="+ad(s))}}a.push(`code=${e}`),a.push(`version=${LY}`),a.length&&(r+=" ("+a.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return L7(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&L7(i,{shortMessage:n}),i}function z0(r,e,t,n){if(!r)throw jY(e,t,n)}function Qr(r,e,t,n){z0(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(e)}catch{}return r},[]);function $Y(r,e,t){if(r!==e){let n=t,i="new";n+=".",i+=" "+t,z0(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function vP(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.length%2===0&&r.match(/^0x[0-9a-f]*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let a=0;a<n.length;a++)n[a]=parseInt(r.substring(i,i+2),16),i+=2;return n}Qr(!1,"invalid BytesLike value",e||"value",r)}function jo(r,e){return vP(r,e,!1)}function Jh(r,e){return vP(r,e,!0)}function Hx(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}const j7="0123456789abcdef";function ki(r){const e=jo(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=j7[(i&240)>>4]+j7[i&15]}return t}function Kx(r){return"0x"+r.map(e=>ki(e).substring(2)).join("")}function Tp(r){return Hx(r,!0)?(r.length-2)/2:jo(r).length}function FY(r,e,t){const n=jo(r);z0(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),i.set(n,e-n.length),ki(i)}function zY(r,e){return FY(r,e)}const pA=BigInt(0);BigInt(1);const sd=9007199254740991;function mp(r,e){switch(typeof r){case"bigint":return r;case"number":return Qr(Number.isInteger(r),"underflow",e||"value",r),Qr(r>=-sd&&r<=sd,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){Qr(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}Qr(!1,"invalid BigNumberish value",e||"value",r)}function bP(r,e){const t=mp(r,e);return z0(t>=pA,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}function Rp(r,e){switch(typeof r){case"bigint":return Qr(r>=-sd&&r<=sd,"overflow",e||"value",r),Number(r);case"number":return Qr(Number.isInteger(r),"underflow",e||"value",r),Qr(r>=-sd&&r<=sd,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Rp(BigInt(r),e)}catch(t){Qr(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}Qr(!1,"invalid numeric value",e||"value",r)}function $7(r,e){const t=bP(r,"value");let n=t.toString(16);{const i=Rp(e,"width");if(i===0&&t===pA)return"0x";for(z0(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function VY(r,e){const t=bP(r,"value");if(t===pA)return new Uint8Array(0);let n=t.toString(16);n.length%2&&(n="0"+n);const i=new Uint8Array(n.length/2);for(let a=0;a<i.length;a++){const o=a*2;i[a]=parseInt(n.substring(o,o+2),16)}return i}function F7(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function wP(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function HY(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");F7(r.outputLen),F7(r.blockLen)}function Bv(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function KY(r,e){wP(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const s3=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const _P=r=>r instanceof Uint8Array,o3=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),xs=(r,e)=>r<<32-e|r>>>e,GY=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!GY)throw new Error("Non little-endian hardware is not supported");function WY(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function yA(r){if(typeof r=="string"&&(r=WY(r)),!_P(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function ZY(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!_P(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}class EP{clone(){return this._cloneInto()}}function YY(r){const e=n=>r().update(yA(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function QY(r=32){if(s3&&typeof s3.getRandomValues=="function")return s3.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class xP extends EP{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,HY(e);const n=yA(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(e){return Bv(this),this.iHash.update(e),this}digestInto(e){Bv(this),wP(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return e=e,e.finished=i,e.destroyed=a,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const AP=(r,e,t)=>new xP(r,e).update(t).digest();AP.create=(r,e)=>new xP(r,e);function JY(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),a=BigInt(4294967295),o=Number(t>>i&a),s=Number(t&a),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,s,n)}class XY extends EP{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=o3(this.buffer)}update(e){Bv(this);const{view:t,buffer:n,blockLen:i}=this;e=yA(e);const a=e.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const c=o3(e);for(;i<=a-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bv(this),KY(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;JY(n,i-8,BigInt(this.length*8),a),this.process(n,0);const s=o3(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)s.setUint32(4*h,d[h],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%t&&e.buffer.set(n),e}}const eQ=(r,e,t)=>r&e^~r&t,tQ=(r,e,t)=>r&e^r&t^e&t,rQ=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Nu=new Uint32Array(64);class nQ extends XY{constructor(){super(64,32,8,!1),this.A=Cu[0]|0,this.B=Cu[1]|0,this.C=Cu[2]|0,this.D=Cu[3]|0,this.E=Cu[4]|0,this.F=Cu[5]|0,this.G=Cu[6]|0,this.H=Cu[7]|0}get(){const{A:e,B:t,C:n,D:i,E:a,F:o,G:s,H:c}=this;return[e,t,n,i,a,o,s,c]}set(e,t,n,i,a,o,s,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)Nu[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const y=Nu[h-15],m=Nu[h-2],b=xs(y,7)^xs(y,18)^y>>>3,v=xs(m,17)^xs(m,19)^m>>>10;Nu[h]=v+Nu[h-7]+b+Nu[h-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:c,G:l,H:d}=this;for(let h=0;h<64;h++){const y=xs(s,6)^xs(s,11)^xs(s,25),m=d+y+eQ(s,c,l)+rQ[h]+Nu[h]|0,v=(xs(n,2)^xs(n,13)^xs(n,22))+tQ(n,i,a)|0;d=l,l=c,c=s,s=o+m|0,o=a,a=i,i=n,n=m+v|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,a,o,s,c,l,d)}roundClean(){Nu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const iQ=YY(()=>new nQ);const SP=BigInt(0),_b=BigInt(1),aQ=BigInt(2),Eb=r=>r instanceof Uint8Array,sQ=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Pd(r){if(!Eb(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=sQ[r[t]];return e}function MP(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function mA(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Ud(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const i=n*2,a=r.slice(i,i+2),o=Number.parseInt(a,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ml(r){return mA(Pd(r))}function gA(r){if(!Eb(r))throw new Error("Uint8Array expected");return mA(Pd(Uint8Array.from(r).reverse()))}function kd(r,e){return Ud(r.toString(16).padStart(e*2,"0"))}function vA(r,e){return kd(r,e).reverse()}function oQ(r){return Ud(MP(r))}function is(r,e,t){let n;if(typeof e=="string")try{n=Ud(e)}catch(a){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${a}`)}else if(Eb(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function p0(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!Eb(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function uQ(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function cQ(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function lQ(r){let e;for(e=0;r>SP;r>>=_b,e+=1);return e}function fQ(r,e){return r>>BigInt(e)&_b}const dQ=(r,e,t)=>r|(t?_b:SP)<<BigInt(e),bA=r=>(aQ<<BigInt(r-1))-_b,u3=r=>new Uint8Array(r),z7=r=>Uint8Array.from(r);function TP(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=u3(r),i=u3(r),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=(...h)=>t(i,n,...h),c=(h=u3())=>{i=s(z7([0]),h),n=s(),h.length!==0&&(i=s(z7([1]),h),n=s())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const y=[];for(;h<e;){n=s();const m=n.slice();y.push(m),h+=n.length}return p0(...y)};return(h,y)=>{o(),c(h);let m;for(;!(m=y(l()));)c();return o(),m}}const hQ={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function V0(r,e,t={}){const n=(i,a,o)=>{const s=hQ[a];if(typeof s!="function")throw new Error(`Invalid validator "${a}", expected function`);const c=r[i];if(!(o&&c===void 0)&&!s(c,r))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${a}`)};for(const[i,a]of Object.entries(e))n(i,a,!1);for(const[i,a]of Object.entries(t))n(i,a,!0);return r}const pQ=Object.freeze(Object.defineProperty({__proto__:null,bitGet:fQ,bitLen:lQ,bitMask:bA,bitSet:dQ,bytesToHex:Pd,bytesToNumberBE:ml,bytesToNumberLE:gA,concatBytes:p0,createHmacDrbg:TP,ensureBytes:is,equalBytes:uQ,hexToBytes:Ud,hexToNumber:mA,numberToBytesBE:kd,numberToBytesLE:vA,numberToHexUnpadded:MP,numberToVarBytesBE:oQ,utf8ToBytes:cQ,validateObject:V0},Symbol.toStringTag,{value:"Module"}));const Tn=BigInt(0),Jr=BigInt(1),el=BigInt(2),yQ=BigInt(3),Gx=BigInt(4),V7=BigInt(5),H7=BigInt(8);BigInt(9);BigInt(16);function qi(r,e){const t=r%e;return t>=Tn?t:e+t}function mQ(r,e,t){if(t<=Tn||e<Tn)throw new Error("Expected power/modulo > 0");if(t===Jr)return Tn;let n=Jr;for(;e>Tn;)e&Jr&&(n=n*r%t),r=r*r%t,e>>=Jr;return n}function xa(r,e,t){let n=r;for(;e-- >Tn;)n*=n,n%=t;return n}function Wx(r,e){if(r===Tn||e<=Tn)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=qi(r,e),n=e,i=Tn,a=Jr;for(;t!==Tn;){const s=n/t,c=n%t,l=i-a*s;n=t,t=c,i=a,a=l}if(n!==Jr)throw new Error("invert: does not exist");return qi(i,e)}function gQ(r){const e=(r-Jr)/el;let t,n,i;for(t=r-Jr,n=0;t%el===Tn;t/=el,n++);for(i=el;i<r&&mQ(i,e,r)!==r-Jr;i++);if(n===1){const o=(r+Jr)/Gx;return function(c,l){const d=c.pow(l,o);if(!c.eql(c.sqr(d),l))throw new Error("Cannot find square root");return d}}const a=(t+Jr)/el;return function(s,c){if(s.pow(c,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let l=n,d=s.pow(s.mul(s.ONE,i),t),h=s.pow(c,a),y=s.pow(c,t);for(;!s.eql(y,s.ONE);){if(s.eql(y,s.ZERO))return s.ZERO;let m=1;for(let v=s.sqr(y);m<l&&!s.eql(v,s.ONE);m++)v=s.sqr(v);const b=s.pow(d,Jr<<BigInt(l-m-1));d=s.sqr(b),h=s.mul(h,b),y=s.mul(y,d),l=m}return h}}function vQ(r){if(r%Gx===yQ){const e=(r+Jr)/Gx;return function(n,i){const a=n.pow(i,e);if(!n.eql(n.sqr(a),i))throw new Error("Cannot find square root");return a}}if(r%H7===V7){const e=(r-V7)/H7;return function(n,i){const a=n.mul(i,el),o=n.pow(a,e),s=n.mul(i,o),c=n.mul(n.mul(s,el),o),l=n.mul(s,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),i))throw new Error("Cannot find square root");return l}}return gQ(r)}const bQ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wQ(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=bQ.reduce((n,i)=>(n[i]="function",n),e);return V0(r,t)}function _Q(r,e,t){if(t<Tn)throw new Error("Expected power > 0");if(t===Tn)return r.ONE;if(t===Jr)return e;let n=r.ONE,i=e;for(;t>Tn;)t&Jr&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Jr;return n}function EQ(r,e){const t=new Array(e.length),n=e.reduce((a,o,s)=>r.is0(o)?a:(t[s]=a,r.mul(a,o)),r.ONE),i=r.inv(n);return e.reduceRight((a,o,s)=>r.is0(o)?a:(t[s]=r.mul(a,t[s]),r.mul(a,o)),i),t}function RP(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function xQ(r,e,t=!1,n={}){if(r<=Tn)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:a}=RP(r,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=vQ(r),s=Object.freeze({ORDER:r,BITS:i,BYTES:a,MASK:bA(i),ZERO:Tn,ONE:Jr,create:c=>qi(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Tn<=c&&c<r},is0:c=>c===Tn,isOdd:c=>(c&Jr)===Jr,neg:c=>qi(-c,r),eql:(c,l)=>c===l,sqr:c=>qi(c*c,r),add:(c,l)=>qi(c+l,r),sub:(c,l)=>qi(c-l,r),mul:(c,l)=>qi(c*l,r),pow:(c,l)=>_Q(s,c,l),div:(c,l)=>qi(c*Wx(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Wx(c,r),sqrt:n.sqrt||(c=>o(s,c)),invertBatch:c=>EQ(s,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>t?vA(c,a):kd(c,a),fromBytes:c=>{if(c.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${c.length}`);return t?gA(c):ml(c)}});return Object.freeze(s)}function OP(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function CP(r){const e=OP(r);return e+Math.ceil(e/2)}function AQ(r,e,t=!1){const n=r.length,i=OP(e),a=CP(e);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);const o=t?ml(r):gA(r),s=qi(o,e-Jr)+Jr;return t?vA(s,i):kd(s,i)}const SQ=BigInt(0),c3=BigInt(1);function MQ(r,e){const t=(i,a)=>{const o=a.negate();return i?o:a},n=i=>{const a=Math.ceil(e/i)+1,o=2**(i-1);return{windows:a,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,a){let o=r.ZERO,s=i;for(;a>SQ;)a&c3&&(o=o.add(s)),s=s.double(),a>>=c3;return o},precomputeWindow(i,a){const{windows:o,windowSize:s}=n(a),c=[];let l=i,d=l;for(let h=0;h<o;h++){d=l,c.push(d);for(let y=1;y<s;y++)d=d.add(l),c.push(d);l=d.double()}return c},wNAF(i,a,o){const{windows:s,windowSize:c}=n(i);let l=r.ZERO,d=r.BASE;const h=BigInt(2**i-1),y=2**i,m=BigInt(i);for(let b=0;b<s;b++){const v=b*c;let E=Number(o&h);o>>=m,E>c&&(E-=y,o+=c3);const x=v,D=v+Math.abs(E)-1,N=b%2!==0,B=E<0;E===0?d=d.add(t(N,a[x])):l=l.add(t(B,a[D]))}return{p:l,f:d}},wNAFCached(i,a,o,s){const c=i._WINDOW_SIZE||1;let l=a.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&a.set(i,s(l))),this.wNAF(c,l,o)}}}function NP(r){return wQ(r.Fp),V0(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...RP(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}function TQ(r){const e=NP(r);V0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:RQ,hexToBytes:OQ}=pQ,cl={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=cl;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:RQ(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=cl,t=typeof r=="string"?OQ(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=cl._parseInt(t.subarray(2)),{d:o,l:s}=cl._parseInt(a);if(s.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{const d=l.toString(16);return d.length&1?`0${d}`:d},n=e(t(r.s)),i=e(t(r.r)),a=n.length/2,o=i.length/2,s=t(a),c=t(o);return`30${t(o+a+4)}02${c}${i}02${s}${n}`}},Do=BigInt(0),Ma=BigInt(1);BigInt(2);const K7=BigInt(3);BigInt(4);function CQ(r){const e=TQ(r),{Fp:t}=e,n=e.toBytes||((b,v,E)=>{const x=v.toAffine();return p0(Uint8Array.from([4]),t.toBytes(x.x),t.toBytes(x.y))}),i=e.fromBytes||(b=>{const v=b.subarray(1),E=t.fromBytes(v.subarray(0,t.BYTES)),x=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:E,y:x}});function a(b){const{a:v,b:E}=e,x=t.sqr(b),D=t.mul(x,b);return t.add(t.add(D,t.mul(b,v)),E)}if(!t.eql(t.sqr(e.Gy),a(e.Gx)))throw new Error("bad generator point: equation left != right");function o(b){return typeof b=="bigint"&&Do<b&&b<e.n}function s(b){if(!o(b))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(b){const{allowedPrivateKeyLengths:v,nByteLength:E,wrapPrivateKey:x,n:D}=e;if(v&&typeof b!="bigint"){if(b instanceof Uint8Array&&(b=Pd(b)),typeof b!="string"||!v.includes(b.length))throw new Error("Invalid key");b=b.padStart(E*2,"0")}let N;try{N=typeof b=="bigint"?b:ml(is("private key",b,E))}catch{throw new Error(`private key must be ${E} bytes, hex or bigint, not ${typeof b}`)}return x&&(N=qi(N,D)),s(N),N}const l=new Map;function d(b){if(!(b instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(v,E,x){if(this.px=v,this.py=E,this.pz=x,v==null||!t.isValid(v))throw new Error("x required");if(E==null||!t.isValid(E))throw new Error("y required");if(x==null||!t.isValid(x))throw new Error("z required")}static fromAffine(v){const{x:E,y:x}=v||{};if(!v||!t.isValid(E)||!t.isValid(x))throw new Error("invalid affine point");if(v instanceof h)throw new Error("projective point not allowed");const D=N=>t.eql(N,t.ZERO);return D(E)&&D(x)?h.ZERO:new h(E,x,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const E=t.invertBatch(v.map(x=>x.pz));return v.map((x,D)=>x.toAffine(E[D])).map(h.fromAffine)}static fromHex(v){const E=h.fromAffine(i(is("pointHex",v)));return E.assertValidity(),E}static fromPrivateKey(v){return h.BASE.multiply(c(v))}_setWindowSize(v){this._WINDOW_SIZE=v,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:v,y:E}=this.toAffine();if(!t.isValid(v)||!t.isValid(E))throw new Error("bad point: x or y not FE");const x=t.sqr(E),D=a(v);if(!t.eql(x,D))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){d(v);const{px:E,py:x,pz:D}=this,{px:N,py:B,pz:k}=v,F=t.eql(t.mul(E,k),t.mul(N,D)),T=t.eql(t.mul(x,k),t.mul(B,D));return F&&T}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:E}=e,x=t.mul(E,K7),{px:D,py:N,pz:B}=this;let k=t.ZERO,F=t.ZERO,T=t.ZERO,z=t.mul(D,D),Z=t.mul(N,N),Y=t.mul(B,B),W=t.mul(D,N);return W=t.add(W,W),T=t.mul(D,B),T=t.add(T,T),k=t.mul(v,T),F=t.mul(x,Y),F=t.add(k,F),k=t.sub(Z,F),F=t.add(Z,F),F=t.mul(k,F),k=t.mul(W,k),T=t.mul(x,T),Y=t.mul(v,Y),W=t.sub(z,Y),W=t.mul(v,W),W=t.add(W,T),T=t.add(z,z),z=t.add(T,z),z=t.add(z,Y),z=t.mul(z,W),F=t.add(F,z),Y=t.mul(N,B),Y=t.add(Y,Y),z=t.mul(Y,W),k=t.sub(k,z),T=t.mul(Y,Z),T=t.add(T,T),T=t.add(T,T),new h(k,F,T)}add(v){d(v);const{px:E,py:x,pz:D}=this,{px:N,py:B,pz:k}=v;let F=t.ZERO,T=t.ZERO,z=t.ZERO;const Z=e.a,Y=t.mul(e.b,K7);let W=t.mul(E,N),M=t.mul(x,B),C=t.mul(D,k),R=t.add(E,x),S=t.add(N,B);R=t.mul(R,S),S=t.add(W,M),R=t.sub(R,S),S=t.add(E,D);let _=t.add(N,k);return S=t.mul(S,_),_=t.add(W,C),S=t.sub(S,_),_=t.add(x,D),F=t.add(B,k),_=t.mul(_,F),F=t.add(M,C),_=t.sub(_,F),z=t.mul(Z,S),F=t.mul(Y,C),z=t.add(F,z),F=t.sub(M,z),z=t.add(M,z),T=t.mul(F,z),M=t.add(W,W),M=t.add(M,W),C=t.mul(Z,C),S=t.mul(Y,S),M=t.add(M,C),C=t.sub(W,C),C=t.mul(Z,C),S=t.add(S,C),W=t.mul(M,S),T=t.add(T,W),W=t.mul(_,S),F=t.mul(R,F),F=t.sub(F,W),W=t.mul(R,M),z=t.mul(_,z),z=t.add(z,W),new h(F,T,z)}subtract(v){return this.add(v.negate())}is0(){return this.equals(h.ZERO)}wNAF(v){return m.wNAFCached(this,l,v,E=>{const x=t.invertBatch(E.map(D=>D.pz));return E.map((D,N)=>D.toAffine(x[N])).map(h.fromAffine)})}multiplyUnsafe(v){const E=h.ZERO;if(v===Do)return E;if(s(v),v===Ma)return this;const{endo:x}=e;if(!x)return m.unsafeLadder(this,v);let{k1neg:D,k1:N,k2neg:B,k2:k}=x.splitScalar(v),F=E,T=E,z=this;for(;N>Do||k>Do;)N&Ma&&(F=F.add(z)),k&Ma&&(T=T.add(z)),z=z.double(),N>>=Ma,k>>=Ma;return D&&(F=F.negate()),B&&(T=T.negate()),T=new h(t.mul(T.px,x.beta),T.py,T.pz),F.add(T)}multiply(v){s(v);let E=v,x,D;const{endo:N}=e;if(N){const{k1neg:B,k1:k,k2neg:F,k2:T}=N.splitScalar(E);let{p:z,f:Z}=this.wNAF(k),{p:Y,f:W}=this.wNAF(T);z=m.constTimeNegate(B,z),Y=m.constTimeNegate(F,Y),Y=new h(t.mul(Y.px,N.beta),Y.py,Y.pz),x=z.add(Y),D=Z.add(W)}else{const{p:B,f:k}=this.wNAF(E);x=B,D=k}return h.normalizeZ([x,D])[0]}multiplyAndAddUnsafe(v,E,x){const D=h.BASE,N=(k,F)=>F===Do||F===Ma||!k.equals(D)?k.multiplyUnsafe(F):k.multiply(F),B=N(this,E).add(N(v,x));return B.is0()?void 0:B}toAffine(v){const{px:E,py:x,pz:D}=this,N=this.is0();v==null&&(v=N?t.ONE:t.inv(D));const B=t.mul(E,v),k=t.mul(x,v),F=t.mul(D,v);if(N)return{x:t.ZERO,y:t.ZERO};if(!t.eql(F,t.ONE))throw new Error("invZ was invalid");return{x:B,y:k}}isTorsionFree(){const{h:v,isTorsionFree:E}=e;if(v===Ma)return!0;if(E)return E(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:E}=e;return v===Ma?this:E?E(h,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return this.assertValidity(),n(h,this,v)}toHex(v=!0){return Pd(this.toRawBytes(v))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,m=MQ(h,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:a,isWithinCurveOrder:o}}function NQ(r){const e=NP(r);return V0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function BQ(r){const e=NQ(r),{Fp:t,n}=e,i=t.BYTES+1,a=2*t.BYTES+1;function o(S){return Do<S&&S<t.ORDER}function s(S){return qi(S,n)}function c(S){return Wx(S,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:h,isWithinCurveOrder:y}=CQ({...e,toBytes(S,_,U){const H=_.toAffine(),V=t.toBytes(H.x),P=p0;return U?P(Uint8Array.from([_.hasEvenY()?2:3]),V):P(Uint8Array.from([4]),V,t.toBytes(H.y))},fromBytes(S){const _=S.length,U=S[0],H=S.subarray(1);if(_===i&&(U===2||U===3)){const V=ml(H);if(!o(V))throw new Error("Point is not on curve");const P=h(V);let $=t.sqrt(P);const te=($&Ma)===Ma;return(U&1)===1!==te&&($=t.neg($)),{x:V,y:$}}else if(_===a&&U===4){const V=t.fromBytes(H.subarray(0,t.BYTES)),P=t.fromBytes(H.subarray(t.BYTES,2*t.BYTES));return{x:V,y:P}}else throw new Error(`Point of length ${_} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),m=S=>Pd(kd(S,e.nByteLength));function b(S){const _=n>>Ma;return S>_}function v(S){return b(S)?s(-S):S}const E=(S,_,U)=>ml(S.slice(_,U));class x{constructor(_,U,H){this.r=_,this.s=U,this.recovery=H,this.assertValidity()}static fromCompact(_){const U=e.nByteLength;return _=is("compactSignature",_,U*2),new x(E(_,0,U),E(_,U,2*U))}static fromDER(_){const{r:U,s:H}=cl.toSig(is("DER",_));return new x(U,H)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(_){return new x(this.r,this.s,_)}recoverPublicKey(_){const{r:U,s:H,recovery:V}=this,P=T(is("msgHash",_));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const $=V===2||V===3?U+e.n:U;if($>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=(V&1)===0?"02":"03",ae=l.fromHex(te+m($)),ce=c($),fe=s(-P*ce),oe=s(H*ce),ye=l.BASE.multiplyAndAddUnsafe(ae,fe,oe);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Ud(this.toDERHex())}toDERHex(){return cl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ud(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}const D={isValidPrivateKey(S){try{return d(S),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const S=CP(e.n);return AQ(e.randomBytes(S),e.n)},precompute(S=8,_=l.BASE){return _._setWindowSize(S),_.multiply(BigInt(3)),_}};function N(S,_=!0){return l.fromPrivateKey(S).toRawBytes(_)}function B(S){const _=S instanceof Uint8Array,U=typeof S=="string",H=(_||U)&&S.length;return _?H===i||H===a:U?H===2*i||H===2*a:S instanceof l}function k(S,_,U=!0){if(B(S))throw new Error("first arg must be private key");if(!B(_))throw new Error("second arg must be public key");return l.fromHex(_).multiply(d(S)).toRawBytes(U)}const F=e.bits2int||function(S){const _=ml(S),U=S.length*8-e.nBitLength;return U>0?_>>BigInt(U):_},T=e.bits2int_modN||function(S){return s(F(S))},z=bA(e.nBitLength);function Z(S){if(typeof S!="bigint")throw new Error("bigint expected");if(!(Do<=S&&S<z))throw new Error(`bigint expected < 2^${e.nBitLength}`);return kd(S,e.nByteLength)}function Y(S,_,U=W){if(["recovered","canonical"].some(ve=>ve in U))throw new Error("sign() legacy options not supported");const{hash:H,randomBytes:V}=e;let{lowS:P,prehash:$,extraEntropy:te}=U;P==null&&(P=!0),S=is("msgHash",S),$&&(S=is("prehashed msgHash",H(S)));const ae=T(S),ce=d(_),fe=[Z(ce),Z(ae)];if(te!=null){const ve=te===!0?V(t.BYTES):te;fe.push(is("extraEntropy",ve))}const oe=p0(...fe),ye=ae;function me(ve){const we=F(ve);if(!y(we))return;const De=c(we),Te=l.BASE.multiply(we).toAffine(),Se=s(Te.x);if(Se===Do)return;const Le=s(De*s(ye+Se*ce));if(Le===Do)return;let $e=(Te.x===Se?0:2)|Number(Te.y&Ma),ie=Le;return P&&b(Le)&&(ie=v(Le),$e^=1),new x(Se,ie,$e)}return{seed:oe,k2sig:me}}const W={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function C(S,_,U=W){const{seed:H,k2sig:V}=Y(S,_,U),P=e;return TP(P.hash.outputLen,P.nByteLength,P.hmac)(H,V)}l.BASE._setWindowSize(8);function R(S,_,U,H=M){const V=S;if(_=is("msgHash",_),U=is("publicKey",U),"strict"in H)throw new Error("options.strict was renamed to lowS");const{lowS:P,prehash:$}=H;let te,ae;try{if(typeof V=="string"||V instanceof Uint8Array)try{te=x.fromDER(V)}catch(Te){if(!(Te instanceof cl.Err))throw Te;te=x.fromCompact(V)}else if(typeof V=="object"&&typeof V.r=="bigint"&&typeof V.s=="bigint"){const{r:Te,s:Se}=V;te=new x(Te,Se)}else throw new Error("PARSE");ae=l.fromHex(U)}catch(Te){if(Te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(P&&te.hasHighS())return!1;$&&(_=e.hash(_));const{r:ce,s:fe}=te,oe=T(_),ye=c(fe),me=s(oe*ye),ve=s(ce*ye),we=l.BASE.multiplyAndAddUnsafe(ae,me,ve)?.toAffine();return we?s(we.x)===ce:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:k,sign:C,verify:R,ProjectivePoint:l,Signature:x,utils:D}}function IQ(r){return{hash:r,hmac:(e,...t)=>AP(r,e,ZY(...t)),randomBytes:QY}}function DQ(r,e){const t=n=>BQ({...r,...IQ(n)});return Object.freeze({...t(e),create:t})}const BP=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),G7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),PQ=BigInt(1),Zx=BigInt(2),W7=(r,e)=>(r+e/Zx)/e;function UQ(r){const e=BP,t=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),c=BigInt(88),l=r*r*r%e,d=l*l*r%e,h=xa(d,t,e)*d%e,y=xa(h,t,e)*d%e,m=xa(y,Zx,e)*l%e,b=xa(m,i,e)*m%e,v=xa(b,a,e)*b%e,E=xa(v,s,e)*v%e,x=xa(E,c,e)*E%e,D=xa(x,s,e)*v%e,N=xa(D,t,e)*d%e,B=xa(N,o,e)*b%e,k=xa(B,n,e)*l%e,F=xa(k,Zx,e);if(!Yx.eql(Yx.sqr(F),r))throw new Error("Cannot find square root");return F}const Yx=xQ(BP,void 0,void 0,{sqrt:UQ}),Fu=DQ({a:BigInt(0),b:BigInt(7),Fp:Yx,n:G7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=G7,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-PQ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,o=BigInt("0x100000000000000000000000000000000"),s=W7(a*r,e),c=W7(-n*r,e);let l=qi(r-s*t-c*i,e),d=qi(-s*n-c*a,e);const h=l>o,y=d>o;if(h&&(l=e-l),y&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:h,k1:l,k2neg:y,k2:d}}}},iQ);BigInt(0);Fu.ProjectivePoint;const Z7="0x0000000000000000000000000000000000000000000000000000000000000000",Y7=BigInt(0),Q7=BigInt(1),Qx=BigInt(2),J7=BigInt(27),X7=BigInt(28),Om=BigInt(35),IP=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),kQ=IP/Qx,qQ=Symbol.for("nodejs.util.inspect.custom"),Hc={};function l3(r){return zY(VY(r),32)}class sa{#e;#t;#n;#r;get r(){return this.#e}set r(e){Qr(Tp(e)===32,"invalid r","value",e),this.#e=ki(e)}get s(){return Qr(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){Qr(Tp(e)===32,"invalid s","value",e),this.#t=ki(e)}get _s(){return this.#t}isValid(){return BigInt(this.#t)<=kQ}get v(){return this.#n}set v(e){const t=Rp(e,"value");Qr(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#r}get legacyChainId(){const e=this.networkV;return e==null?null:sa.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=jo(this.s);return this.yParity&&(e[0]|=128),ki(e)}get compactSerialized(){return Kx([this.r,this.yParityAndS])}get serialized(){return Kx([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,i){$Y(e,Hc,"Signature"),this.#e=t,this.#t=n,this.#n=i,this.#r=null}getCanonical(){if(this.isValid())return this;const e=IP-BigInt(this._s),t=55-this.v,n=new sa(Hc,this.r,l3(e),t);return this.networkV&&(n.#r=this.networkV),n}clone(){const e=new sa(Hc,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[qQ](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const t=mp(e,"v");return t==J7||t==X7?Y7:(Qr(t>=Om,"invalid EIP-155 v","v",e),(t-Om)/Qx)}static getChainIdV(e,t){return mp(e)*Qx+BigInt(35+t-27)}static getNormalizedV(e){const t=mp(e);return t===Y7||t===J7?27:t===Q7||t===X7?28:(Qr(t>=Om,"invalid v","v",e),t&Q7?27:28)}static from(e){function t(l,d){Qr(l,d,"signature",e)}if(e==null)return new sa(Hc,Z7,Z7,27);if(typeof e=="string"){const l=jo(e,"signature");if(l.length===64){const d=ki(l.slice(0,32)),h=l.slice(32,64),y=h[0]&128?28:27;return h[0]&=127,new sa(Hc,d,ki(h),y)}if(l.length===65){const d=ki(l.slice(0,32)),h=ki(l.slice(32,64)),y=sa.getNormalizedV(l[64]);return new sa(Hc,d,h,y)}t(!1,"invalid raw signature length")}if(e instanceof sa)return e.clone();const n=e.r;t(n!=null,"missing r");const i=l3(n),a=(function(l,d){if(l!=null)return l3(l);if(d!=null){t(Hx(d,32),"invalid yParityAndS");const h=jo(d);return h[0]&=127,ki(h)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:s}=(function(l,d,h){if(l!=null){const y=mp(l);return{networkV:y>=Om?y:void 0,v:sa.getNormalizedV(y)}}if(d!=null)return t(Hx(d,32),"invalid yParityAndS"),{v:jo(d)[0]&128?28:27};if(h!=null){switch(Rp(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new sa(Hc,i,a,s);return o&&(c.#r=o),t(e.yParity==null||Rp(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}class tl{#e;constructor(e){Qr(Tp(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=ki(e)}get privateKey(){return this.#e}get publicKey(){return tl.computePublicKey(this.#e)}get compressedPublicKey(){return tl.computePublicKey(this.#e,!0)}sign(e){Qr(Tp(e)===32,"invalid digest length","digest",e);const t=Fu.sign(Jh(e),Jh(this.#e),{lowS:!0});return sa.from({r:$7(t.r,32),s:$7(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=tl.computePublicKey(e);return ki(Fu.getSharedSecret(Jh(this.#e),jo(t),!1))}static computePublicKey(e,t){let n=jo(e,"key");if(n.length===32){const a=Fu.getPublicKey(n,!!t);return ki(a)}if(n.length===64){const a=new Uint8Array(65);a[0]=4,a.set(n,1),n=a}const i=Fu.ProjectivePoint.fromHex(n);return ki(i.toRawBytes(t))}static recoverPublicKey(e,t){Qr(Tp(e)===32,"invalid digest length","digest",e);const n=sa.from(t);let i=Fu.Signature.fromCompact(Jh(Kx([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const a=i.recoverPublicKey(Jh(e));return Qr(a!=null,"invalid signature for digest","signature",t),"0x"+a.toHex(!1)}static addPoints(e,t,n){const i=Fu.ProjectivePoint.fromHex(tl.computePublicKey(e).substring(2)),a=Fu.ProjectivePoint.fromHex(tl.computePublicKey(t).substring(2));return"0x"+i.add(a).toHex(!!n)}}function LQ(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var a=r.charAt(i),o=a.charCodeAt(0);if(t[o]!==255)throw new TypeError(a+" is ambiguous");t[o]=i}var s=r.length,c=r.charAt(0),l=Math.log(s)/Math.log(256),d=Math.log(256)/Math.log(s);function h(b){if(b instanceof Uint8Array||(ArrayBuffer.isView(b)?b=new Uint8Array(b.buffer,b.byteOffset,b.byteLength):Array.isArray(b)&&(b=Uint8Array.from(b))),!(b instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(b.length===0)return"";for(var v=0,E=0,x=0,D=b.length;x!==D&&b[x]===0;)x++,v++;for(var N=(D-x)*d+1>>>0,B=new Uint8Array(N);x!==D;){for(var k=b[x],F=0,T=N-1;(k!==0||F<E)&&T!==-1;T--,F++)k+=256*B[T]>>>0,B[T]=k%s>>>0,k=k/s>>>0;if(k!==0)throw new Error("Non-zero carry");E=F,x++}for(var z=N-E;z!==N&&B[z]===0;)z++;for(var Z=c.repeat(v);z<N;++z)Z+=r.charAt(B[z]);return Z}function y(b){if(typeof b!="string")throw new TypeError("Expected String");if(b.length===0)return new Uint8Array;var v=0;if(b[v]!==" "){for(var E=0,x=0;b[v]===c;)E++,v++;for(var D=(b.length-v)*l+1>>>0,N=new Uint8Array(D);b[v];){var B=t[b.charCodeAt(v)];if(B===255)return;for(var k=0,F=D-1;(B!==0||k<x)&&F!==-1;F--,k++)B+=s*N[F]>>>0,N[F]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");x=k,v++}if(b[v]!==" "){for(var T=D-x;T!==D&&N[T]===0;)T++;for(var z=new Uint8Array(E+(D-T)),Z=E;T!==D;)z[Z++]=N[T++];return z}}}function m(b){var v=y(b);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:y,decode:m}}var jQ=LQ,$Q=jQ;const FQ=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},zQ=r=>new TextEncoder().encode(r),VQ=r=>new TextDecoder().decode(r);let HQ=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},KQ=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return DP(this,e)}};class GQ{constructor(e){this.decoders=e}or(e){return DP(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const DP=(r,e)=>new GQ({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class WQ{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new HQ(e,t,n),this.decoder=new KQ(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xb=({name:r,prefix:e,encode:t,decode:n})=>new WQ(r,e,t,n),H0=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=$Q(t,e);return xb({prefix:r,name:e,encode:n,decode:a=>FQ(i(a))})},ZQ=(r,e,t,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let a=r.length;for(;r[a-1]==="=";)--a;const o=new Uint8Array(a*t/8|0);let s=0,c=0,l=0;for(let d=0;d<a;++d){const h=i[r[d]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|h,s+=t,s>=8&&(s-=8,o[l++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return o},YQ=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let a="",o=0,s=0;for(let c=0;c<r.length;++c)for(s=s<<8|r[c],o+=8;o>t;)o-=t,a+=e[i&s>>o];if(o&&(a+=e[i&s<<t-o]),n)for(;a.length*t&7;)a+="=";return a},Qn=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>xb({prefix:e,name:r,encode(i){return YQ(i,n,t)},decode(i){return ZQ(i,n,t,r)}});H0({prefix:"9",name:"base10",alphabet:"0123456789"});Qn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});Qn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});Qn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});const PP=Array.from(""),QQ=PP.reduce((r,e,t)=>(r[t]=e,r),[]),JQ=PP.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function XQ(r){return r.reduce((e,t)=>(e+=QQ[t],e),"")}function eJ(r){const e=[];for(const t of r){const n=JQ[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}xb({prefix:"",name:"base256emoji",encode:XQ,decode:eJ});Qn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});Qn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});Qn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});Qn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});Qn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});Qn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});Qn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});Qn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});Qn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});H0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});H0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});H0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});H0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});Qn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});Qn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});Qn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});Qn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});Qn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});xb({prefix:"\0",name:"identity",encode:r=>VQ(r),decode:r=>zQ(r)});new TextEncoder;new TextDecoder;qt("veramo:utils");function tJ(r){const e=f7.CURVE.Fp,{y:t}=f7.ExtendedPoint.fromHex(r),n=BigInt(1);return e.toBytes(e.create((n+t)*e.inv(n-t)))}function rJ(r,e){if(e){if(e!=="sig"&&e!=="enc")throw new Error("illegal_argument: Key use must be sig or enc");if(e==="sig"&&r==="X25519")throw new Error("illegal_argument: X25519 keys cannot be used for signing");if(e==="enc"&&r==="Ed25519")throw new Error("illegal_argument: Ed25519 keys cannot be used for encryption");return e}switch(r){case"Secp256k1":case"Secp256r1":case"Ed25519":return"sig";case"X25519":return"enc";default:throw new Error("illegal_argument: Unknown key type")}}function Iv(r,e,t){try{const n=rJ(r,t);switch(r){case id.Secp256k1:{const i=$D.ProjectivePoint.fromHex(e).toAffine();return{alg:"ES256K",crv:"secp256k1",kty:"EC",...n&&{use:n},x:Hu(Xc(i.x.toString(16))),y:Hu(Xc(i.y.toString(16)))}}case id.Secp256r1:{const i=HD.ProjectivePoint.fromHex(e).toAffine();return{alg:"ES256",crv:"P-256",kty:"EC",...n&&{use:n},x:Hu(Xc(i.x.toString(16))),y:Hu(Xc(i.y.toString(16)))}}case id.Ed25519:return{alg:"EdDSA",crv:"Ed25519",kty:"OKP",...n&&{use:n},x:Hu(typeof e=="string"?Xc(e):e)};case id.X25519:return{alg:"ECDH-ES",crv:"X25519",kty:"OKP",...n&&{use:n},x:Hu(typeof e=="string"?Xc(e):e)};default:throw new Error(`not_supported: Failed to create JWK using ${r}`)}}catch(n){throw n}}qt("veramo:did-key:identifier-provider");var eT;(function(r){r[r.JsonWebKey2020=0]="JsonWebKey2020",r[r.Multikey=1]="Multikey",r[r.EcdsaSecp256k1VerificationKey2019=2]="EcdsaSecp256k1VerificationKey2019",r[r.EcdsaSecp256k1VerificationKey2020=3]="EcdsaSecp256k1VerificationKey2020",r[r.Ed25519VerificationKey2020=4]="Ed25519VerificationKey2020",r[r.Ed25519VerificationKey2018=5]="Ed25519VerificationKey2018",r[r.X25519KeyAgreementKey2020=6]="X25519KeyAgreementKey2020",r[r.X25519KeyAgreementKey2019=7]="X25519KeyAgreementKey2019",r[r.EcdsaSecp256r1VerificationKey2019=8]="EcdsaSecp256r1VerificationKey2019"})(eT||(eT={}));const Op={JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",Multikey:"https://w3id.org/security/multikey/v1",EcdsaSecp256k1VerificationKey2020:"https://w3id.org/security/suites/secp256k1-2020/v1",EcdsaSecp256k1VerificationKey2019:"https://w3id.org/security/suites/secp256k1-2019/v1",Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",Ed25519VerificationKey2018:"https://w3id.org/security/suites/ed25519-2018/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1",X25519KeyAgreementKey2019:"https://w3id.org/security/suites/x25519-2019/v1",EcdsaSecp256r1VerificationKey2019:{EcdsaSecp256r1VerificationKey2019:"https://w3id.org/security#EcdsaSecp256r1VerificationKey2019",publicKeyJwk:{"@id":"https://w3id.org/security#publicKeyJwk","@type":"@json"}}};function f3(r,e){const t=e?.publicKeyFormat??"JsonWebKey2020",n=r.substring(8),{keyBytes:i,keyType:a}=rA(n);if(!a)throw new Error(`invalidDid: the key type cannot be deduced for ${r}`);const o=a==="P-256"?"Secp256r1":a;let s={id:`${r}#${n}`,type:t,controller:r};switch(t){case"JsonWebKey2020":case"EcdsaSecp256r1VerificationKey2019":s.publicKeyJwk=Iv(o,i,"sig");break;case"Multikey":case"EcdsaSecp256k1VerificationKey2019":case"EcdsaSecp256k1VerificationKey2020":s.publicKeyMultibase=n;break;default:throw new Error(`invalidPublicKeyType: Unsupported public key format ${t}`)}let c={};const l=e.accept??"application/did+ld+json";if(e.accept==="application/did+json")c={};else if(l==="application/did+ld+json")c={"@context":["https://www.w3.org/ns/did/v1",Op[t]]};else throw new Error(`unsupportedFormat: The DID resolver does not support the requested 'accept' format: ${e.accept}`);return{didResolutionMetadata:{},didDocumentMetadata:{contentType:e.accept??"application/did+ld+json"},didDocument:{...c,id:r,verificationMethod:[s],authentication:[s.id],assertionMethod:[s.id],capabilityDelegation:[s.id],capabilityInvocation:[s.id]}}}function nJ(r,e){const t=e?.publicKeyFormat??"JsonWebKey2020",n=r.substring(8),{keyBytes:i,keyType:a}=rA(n);if(!a||a!=="Ed25519")throw new Error(`invalidDid: the key type cannot be deduced for ${r}`);let o={id:`${r}#${n}`,type:t,controller:r},s=t;switch(t){case"JsonWebKey2020":o.publicKeyJwk=Iv(a,i,"sig");break;case"Multikey":o.publicKeyMultibase=n;break;case"Ed25519VerificationKey2020":s="X25519KeyAgreementKey2020",o.publicKeyMultibase=n;break;case"Ed25519VerificationKey2018":s="X25519KeyAgreementKey2019",o.publicKeyBase58=Lx(i);break;default:throw new Error(`invalidPublicKeyType: Unsupported public key format ${t}`)}const c=["https://www.w3.org/ns/did/v1",Op[t]],l={didResolutionMetadata:{},didDocumentMetadata:{contentType:e.accept??"application/did+ld+json"},didDocument:{id:r,verificationMethod:[o],authentication:[o.id],assertionMethod:[o.id],capabilityDelegation:[o.id],capabilityInvocation:[o.id]}};if(e.enableEncryptionKeyDerivation??!0){const m=tJ(i),b=lW(m,"base58btc","x25519-pub"),v={id:`${r}#${b}`,type:s,controller:r};s==="JsonWebKey2020"?v.publicKeyJwk=Iv("X25519",m,"enc"):s==="X25519KeyAgreementKey2019"?(c.push(Op[s]),v.publicKeyBase58=Lx(m)):(s==="X25519KeyAgreementKey2020"&&c.push(Op[s]),v.publicKeyMultibase=b),l.didDocument?.verificationMethod?.push(v),l.didDocument.keyAgreement=[v.id]}let h={};const y=e.accept??"application/did+ld+json";if(e.accept==="application/did+json")h={};else if(y==="application/did+ld+json")h={"@context":c};else throw new Error(`unsupportedFormat: The DID resolver does not support the requested 'accept' format: ${e.accept}`);return l.didDocument={...l.didDocument,...h},l}function iJ(r,e){const t=e?.publicKeyFormat??"JsonWebKey2020",n=r.substring(8),{keyBytes:i,keyType:a}=rA(n);if(!a||a!=="X25519")throw new Error(`invalidDid: the key type cannot be deduced for ${r}`);let o={id:`${r}#${n}`,type:t,controller:r};switch(t){case"JsonWebKey2020":o.publicKeyJwk=Iv(a,i,"enc");break;case"Multikey":case"X25519KeyAgreementKey2020":o.publicKeyMultibase=n;break;case"X25519KeyAgreementKey2019":o.publicKeyBase58=Lx(i);break;default:throw new Error(`invalidPublicKeyType: Unsupported public key format ${t}`)}const s=["https://www.w3.org/ns/did/v1",Op[t]],c={didResolutionMetadata:{},didDocumentMetadata:{contentType:e.accept??"application/did+ld+json"},didDocument:{id:r,verificationMethod:[o],keyAgreement:[o.id]}};let l={};const d=e.accept??"application/did+ld+json";if(e.accept==="application/did+json")l={};else if(d==="application/did+ld+json")l={"@context":s};else throw new Error(`unsupportedFormat: The DID resolver does not support the requested 'accept' format: ${e.accept}`);return c.didDocument={...c.didDocument,...l},c}const tT={"did:key:z6Mk":nJ,"did:key:z6LS":iJ,"did:key:zQ3s":f3,"did:key:z7r8":f3,"did:key:zDn":f3},aJ=async(r,e,t,n)=>{try{const i=Object.keys(tT).filter(a=>r.startsWith(a)).shift();if(i){const a=await tT[i](r,n);return{didDocumentMetadata:{},didResolutionMetadata:{},...a}}else return{didDocumentMetadata:{},didResolutionMetadata:{error:"invalidDid",message:"unsupported key type for did:key"},didDocument:null}}catch(i){return{didDocumentMetadata:{},didResolutionMetadata:{error:"invalidDid",message:i.toString()},didDocument:null}}};function sJ(){return{key:aJ}}var Xh={},ep={},rT;function oJ(){if(rT)return ep;rT=1,Object.defineProperty(ep,"__esModule",{value:!0});function r(i){return String.fromCharCode(parseInt(i.slice(1),16))}function e(i){return btoa(encodeURIComponent(i).replace(/%[0-9A-F]{2}/g,r))}ep.encode=e;function t(i){return`%${`00${i.charCodeAt(0).toString(16)}`.slice(-2)}`}function n(i){return decodeURIComponent(Array.from(atob(i),t).join(""))}return ep.decode=n,ep}var nT;function uJ(){if(nT)return Xh;nT=1,Object.defineProperty(Xh,"__esModule",{value:!0});const r=oJ();function e(n){return r.decode(n.replace(/\-/g,"+").replace(/_/g,"/"))}Xh.decode=e;function t(n){return r.encode(n).replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}return Xh.encode=t,Xh}var UP=uJ();const Ks=Object.create(null);Ks.open="0";Ks.close="1";Ks.ping="2";Ks.pong="3";Ks.message="4";Ks.upgrade="5";Ks.noop="6";const Q1=Object.create(null);Object.keys(Ks).forEach(r=>{Q1[Ks[r]]=r});const Jx={type:"error",data:"parser error"},kP=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qP=typeof ArrayBuffer=="function",LP=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,wA=({type:r,data:e},t,n)=>kP&&e instanceof Blob?t?n(e):iT(e,n):qP&&(e instanceof ArrayBuffer||LP(e))?t?n(e):iT(new Blob([e]),n):n(Ks[r]+(e||"")),iT=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)};function aT(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let d3;function cJ(r,e){if(kP&&r.data instanceof Blob)return r.data.arrayBuffer().then(aT).then(e);if(qP&&(r.data instanceof ArrayBuffer||LP(r.data)))return e(aT(r.data));wA(r,!1,t=>{d3||(d3=new TextEncoder),e(d3.encode(t))})}const sT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<sT.length;r++)gp[sT.charCodeAt(r)]=r;const lJ=r=>{let e=r.length*.75,t=r.length,n,i=0,a,o,s,c;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const l=new ArrayBuffer(e),d=new Uint8Array(l);for(n=0;n<t;n+=4)a=gp[r.charCodeAt(n)],o=gp[r.charCodeAt(n+1)],s=gp[r.charCodeAt(n+2)],c=gp[r.charCodeAt(n+3)],d[i++]=a<<2|o>>4,d[i++]=(o&15)<<4|s>>2,d[i++]=(s&3)<<6|c&63;return l},fJ=typeof ArrayBuffer=="function",_A=(r,e)=>{if(typeof r!="string")return{type:"message",data:jP(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:dJ(r.substring(1),e)}:Q1[t]?r.length>1?{type:Q1[t],data:r.substring(1)}:{type:Q1[t]}:Jx},dJ=(r,e)=>{if(fJ){const t=lJ(r);return jP(t,e)}else return{base64:!0,data:r}},jP=(r,e)=>e==="blob"?r instanceof Blob?r:new Blob([r]):r instanceof ArrayBuffer?r:r.buffer,$P="",hJ=(r,e)=>{const t=r.length,n=new Array(t);let i=0;r.forEach((a,o)=>{wA(a,!1,s=>{n[o]=s,++i===t&&e(n.join($P))})})},pJ=(r,e)=>{const t=r.split($P),n=[];for(let i=0;i<t.length;i++){const a=_A(t[i],e);if(n.push(a),a.type==="error")break}return n};function yJ(){return new TransformStream({transform(r,e){cJ(r,t=>{const n=t.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let h3;function Cm(r){return r.reduce((e,t)=>e+t.length,0)}function Nm(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)t[i]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),t}function mJ(r,e){h3||(h3=new TextDecoder);const t=[];let n=0,i=-1,a=!1;return new TransformStream({transform(o,s){for(t.push(o);;){if(n===0){if(Cm(t)<1)break;const c=Nm(t,1);a=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(Cm(t)<2)break;const c=Nm(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Cm(t)<8)break;const c=Nm(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),d=l.getUint32(0);if(d>Math.pow(2,21)-1){s.enqueue(Jx);break}i=d*Math.pow(2,32)+l.getUint32(4),n=3}else{if(Cm(t)<i)break;const c=Nm(t,i);s.enqueue(_A(a?c:h3.decode(c),e)),n=0}if(i===0||i>r){s.enqueue(Jx);break}}}})}const FP=4;function un(r){if(r)return gJ(r)}function gJ(r){for(var e in un.prototype)r[e]=un.prototype[e];return r}un.prototype.on=un.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};un.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};un.prototype.off=un.prototype.removeListener=un.prototype.removeAllListeners=un.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,i=0;i<t.length;i++)if(n=t[i],n===e||n.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+r],this};un.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,i=t.length;n<i;++n)t[n].apply(this,e)}return this};un.prototype.emitReserved=un.prototype.emit;un.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};un.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Ab=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ta=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),vJ="arraybuffer";function zP(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const bJ=Ta.setTimeout,wJ=Ta.clearTimeout;function Sb(r,e){e.useNativeTimers?(r.setTimeoutFn=bJ.bind(Ta),r.clearTimeoutFn=wJ.bind(Ta)):(r.setTimeoutFn=Ta.setTimeout.bind(Ta),r.clearTimeoutFn=Ta.clearTimeout.bind(Ta))}const _J=1.33;function EJ(r){return typeof r=="string"?xJ(r):Math.ceil((r.byteLength||r.size)*_J)}function xJ(r){let e=0,t=0;for(let n=0,i=r.length;n<i;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function VP(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function AJ(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function SJ(r){let e={},t=r.split("&");for(let n=0,i=t.length;n<i;n++){let a=t[n].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}class MJ extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class EA extends un{constructor(e){super(),this.writable=!1,Sb(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new MJ(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=_A(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=AJ(e);return t.length?"?"+t:""}}class TJ extends EA{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};pJ(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,hJ(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=VP()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let HP=!1;try{HP=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const RJ=HP;function OJ(){}class CJ extends TJ{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class $s extends un{constructor(e,t,n){super(),this.createRequest=e,Sb(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=zP(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=$s.requestsCount++,$s.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=OJ,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $s.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$s.requestsCount=0;$s.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",oT);else if(typeof addEventListener=="function"){const r="onpagehide"in Ta?"pagehide":"unload";addEventListener(r,oT,!1)}}function oT(){for(let r in $s.requests)$s.requests.hasOwnProperty(r)&&$s.requests[r].abort()}const NJ=(function(){const r=KP({xdomain:!1});return r&&r.responseType!==null})();class BJ extends CJ{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=NJ&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $s(KP,this.uri(),e)}}function KP(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||RJ))return new XMLHttpRequest}catch{}if(!e)try{return new Ta[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const GP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class IJ extends EA{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=GP?{}:zP(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;wA(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&Ab(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=VP()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const p3=Ta.WebSocket||Ta.MozWebSocket;class DJ extends IJ{createSocket(e,t,n){return GP?new p3(e,t,n):t?new p3(e,t):new p3(e)}doWrite(e,t){this.ws.send(t)}}class PJ extends EA{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=mJ(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=yJ();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:s,value:c})=>{s||(this.onPacket(c),a())}).catch(s=>{})};a();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then(()=>{i&&Ab(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const UJ={websocket:DJ,webtransport:PJ,polling:BJ},kJ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,qJ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xx(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let i=kJ.exec(r||""),a={},o=14;for(;o--;)a[qJ[o]]=i[o]||"";return t!=-1&&n!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=LJ(a,a.path),a.queryKey=jJ(a,a.query),a}function LJ(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function jJ(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(t[i]=a)}),t}const e8=typeof addEventListener=="function"&&typeof removeEventListener=="function",J1=[];e8&&addEventListener("offline",()=>{J1.forEach(r=>r())},!1);class oc extends un{constructor(e,t){if(super(),this.binaryType=vJ,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=Xx(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Xx(t.host).host);Sb(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=SJ(this.opts.query)),e8&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},J1.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=FP,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&oc.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",oc.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=EJ(i)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ab(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if(typeof t=="function"&&(i=t,t=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:e,data:t,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(oc.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),e8&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=J1.indexOf(this._offlineEventListener);n!==-1&&J1.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}oc.protocol=FP;class $J extends oc{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;oc.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;oc.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=t.name,this.emitReserved("upgradeError",y)}}))};function a(){n||(n=!0,d(),t.close(),t=null)}const o=h=>{const y=new Error("probe error: "+h);y.transport=t.name,a(),this.emitReserved("upgradeError",y)};function s(){o("transport closed")}function c(){o("socket closed")}function l(h){t&&h.name!==t.name&&a()}const d=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",c),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let FJ=class extends $J{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>UJ[i]).filter(i=>!!i)),super(e,n)}};function zJ(r,e="",t){let n=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),n=Xx(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+e,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}const VJ=typeof ArrayBuffer=="function",HJ=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,WP=Object.prototype.toString,KJ=typeof Blob=="function"||typeof Blob<"u"&&WP.call(Blob)==="[object BlobConstructor]",GJ=typeof File=="function"||typeof File<"u"&&WP.call(File)==="[object FileConstructor]";function xA(r){return VJ&&(r instanceof ArrayBuffer||HJ(r))||KJ&&r instanceof Blob||GJ&&r instanceof File}function X1(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(X1(r[t]))return!0;return!1}if(xA(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return X1(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&X1(r[t]))return!0;return!1}function WJ(r){const e=[],t=r.data,n=r;return n.data=t8(t,e),n.attachments=e.length,{packet:n,buffers:e}}function t8(r,e){if(!r)return r;if(xA(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=t8(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=t8(r[n],e));return t}return r}function ZJ(r,e){return r.data=r8(r.data,e),delete r.attachments,r}function r8(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=r8(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=r8(r[t],e));return r}const ZP=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],YJ=5;var Mt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Mt||(Mt={}));class QJ{constructor(e){this.replacer=e}encode(e){return(e.type===Mt.EVENT||e.type===Mt.ACK)&&X1(e)?this.encodeAsBinary({type:e.type===Mt.EVENT?Mt.BINARY_EVENT:Mt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Mt.BINARY_EVENT||e.type===Mt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=WJ(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}class AA extends un{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Mt.BINARY_EVENT;n||t.type===Mt.BINARY_ACK?(t.type=n?Mt.EVENT:Mt.ACK,this.reconstructor=new JJ(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(xA(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Mt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Mt.BINARY_EVENT||n.type===Mt.BINARY_ACK){const a=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(a,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(t+1)==="/"){const a=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(a,t)}else n.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const a=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}n.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(AA.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Mt.CONNECT:return Dv(t);case Mt.DISCONNECT:return t===void 0;case Mt.CONNECT_ERROR:return typeof t=="string"||Dv(t);case Mt.EVENT:case Mt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&ZP.indexOf(t[0])===-1);case Mt.ACK:case Mt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class JJ{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=ZJ(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function XJ(r){return typeof r=="string"}const eX=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r};function tX(r){return r===void 0||eX(r)}function Dv(r){return Object.prototype.toString.call(r)==="[object Object]"}function rX(r,e){switch(r){case Mt.CONNECT:return e===void 0||Dv(e);case Mt.DISCONNECT:return e===void 0;case Mt.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&ZP.indexOf(e[0])===-1);case Mt.ACK:return Array.isArray(e);case Mt.CONNECT_ERROR:return typeof e=="string"||Dv(e);default:return!1}}function nX(r){return XJ(r.nsp)&&tX(r.id)&&rX(r.type,r.data)}const iX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:AA,Encoder:QJ,get PacketType(){return Mt},isPacketValid:nX,protocol:YJ},Symbol.toStringTag,{value:"Module"}));function as(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const aX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class YP extends un{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[as(e,"open",this.onopen.bind(this)),as(e,"packet",this.onpacket.bind(this)),as(e,"error",this.onerror.bind(this)),as(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,i,a;if(aX.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:Mt.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,h=t.pop();this._registerAckCallback(d,h),o.id=d}const s=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!s||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===e&&this.sendBuffer.splice(s,1);t.call(this,new Error("operation has timed out"))},i),o=(...s)=>{this.io.clearTimeoutFn(a),t.apply(this,s)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,i)=>{const a=(o,s)=>o?i(o):n(s);a.withError=!0,t.push(a),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...a)=>(this._queue[0],i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Mt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Mt.EVENT:case Mt.BINARY_EVENT:this.onevent(e);break;case Mt.ACK:case Mt.BINARY_ACK:this.onack(e);break;case Mt.DISCONNECT:this.ondisconnect();break;case Mt.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:Mt.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Jd(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Jd.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};Jd.prototype.reset=function(){this.attempts=0};Jd.prototype.setMin=function(r){this.ms=r};Jd.prototype.setMax=function(r){this.max=r};Jd.prototype.setJitter=function(r){this.jitter=r};class n8 extends un{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Sb(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Jd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||iX;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new FJ(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=as(t,"open",function(){n.onopen(),e&&e()}),a=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),e?e(s):this.maybeReconnectOnOpen()},o=as(t,"error",a);if(this._timeout!==!1){const s=this._timeout,c=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),t.close()},s);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(as(e,"ping",this.onping.bind(this)),as(e,"data",this.ondata.bind(this)),as(e,"error",this.onerror.bind(this)),as(e,"close",this.onclose.bind(this)),as(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ab(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new YP(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const tp={};function ev(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=zJ(r,e.path||"/socket.io"),n=t.source,i=t.id,a=t.path,o=tp[i]&&a in tp[i].nsps,s=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return s?c=new n8(n,e):(tp[i]||(tp[i]=new n8(n,e)),c=tp[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(ev,{Manager:n8,Socket:YP,io:ev,connect:ev});let sX=class{static getInheritanceTree(e){const t=[e],n=i=>{const a=Object.getPrototypeOf(i);a&&a.name&&(t.push(a),n(a))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter(n=>n.target&&t.indexOf(n.target)!==-1):e}},oX=class{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.propertyName===t)}findTree(e){return this.trees.find(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterUniques(e){return this.uniques.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterChecks(e){return this.checks.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterExclusions(e){return this.exclusions.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find(n=>n.target===e&&n.propertyName===t)}filterJoinColumns(e,t){return this.joinColumns.filter(n=>n.target===e&&n.propertyName===t)}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterTransactionRepository(e,t){return this.transactionRepositories.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterSingleTableChildren(e){return this.tables.filter(t=>typeof t.target=="function"&&typeof e=="function"&&sX.isInherited(t.target,e)&&t.type==="entity-child")}findInheritanceType(e){return this.inheritances.find(t=>t.target===e)}findDiscriminatorValue(e){return this.discriminatorValues.find(t=>t.target===e)}filterByTarget(e,t){return e.filter(n=>Array.isArray(t)?t.indexOf(n.target)!==-1:n.target===t)}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(o=>o.propertyName===i.propertyName)||n.push(i))}),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach(i=>{if(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t){const o=n.findIndex(s=>s.propertyName===i.propertyName);if(Array.isArray(t)&&o!==-1&&t.indexOf(i.target)<t.indexOf(n[o].target)){const s=Object.create(n[o]);s.type=i.type,n[o]=s}else o===-1&&n.push(i)}}),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(s=>s.prefix===i.prefix&&s.propertyName===i.propertyName)||n.push(i))}),n}};var y3={},rp={},uT;function SA(){if(uT)return rp;uT=1,rp.byteLength=s,rp.toByteArray=l,rp.fromByteArray=y;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=n.length;i<a;++i)r[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(m){var b=m.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=m.indexOf("=");v===-1&&(v=b);var E=v===b?0:4-v%4;return[v,E]}function s(m){var b=o(m),v=b[0],E=b[1];return(v+E)*3/4-E}function c(m,b,v){return(b+v)*3/4-v}function l(m){var b,v=o(m),E=v[0],x=v[1],D=new t(c(m,E,x)),N=0,B=x>0?E-4:E,k;for(k=0;k<B;k+=4)b=e[m.charCodeAt(k)]<<18|e[m.charCodeAt(k+1)]<<12|e[m.charCodeAt(k+2)]<<6|e[m.charCodeAt(k+3)],D[N++]=b>>16&255,D[N++]=b>>8&255,D[N++]=b&255;return x===2&&(b=e[m.charCodeAt(k)]<<2|e[m.charCodeAt(k+1)]>>4,D[N++]=b&255),x===1&&(b=e[m.charCodeAt(k)]<<10|e[m.charCodeAt(k+1)]<<4|e[m.charCodeAt(k+2)]>>2,D[N++]=b>>8&255,D[N++]=b&255),D}function d(m){return r[m>>18&63]+r[m>>12&63]+r[m>>6&63]+r[m&63]}function h(m,b,v){for(var E,x=[],D=b;D<v;D+=3)E=(m[D]<<16&16711680)+(m[D+1]<<8&65280)+(m[D+2]&255),x.push(d(E));return x.join("")}function y(m){for(var b,v=m.length,E=v%3,x=[],D=16383,N=0,B=v-E;N<B;N+=D)x.push(h(m,N,N+D>B?B:N+D));return E===1?(b=m[v-1],x.push(r[b>>2]+r[b<<4&63]+"==")):E===2&&(b=(m[v-2]<<8)+m[v-1],x.push(r[b>>10]+r[b>>4&63]+r[b<<2&63]+"=")),x.join("")}return rp}var Bm={};var cT;function MA(){return cT||(cT=1,Bm.read=function(r,e,t,n,i){var a,o,s=i*8-n-1,c=(1<<s)-1,l=c>>1,d=-7,h=t?i-1:0,y=t?-1:1,m=r[e+h];for(h+=y,a=m&(1<<-d)-1,m>>=-d,d+=s;d>0;a=a*256+r[e+h],h+=y,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=n;d>0;o=o*256+r[e+h],h+=y,d-=8);if(a===0)a=1-l;else{if(a===c)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-l}return(m?-1:1)*o*Math.pow(2,a-n)},Bm.write=function(r,e,t,n,i,a){var o,s,c,l=a*8-i-1,d=(1<<l)-1,h=d>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:a-1,b=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=y/c:e+=y*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=d?(s=0,o=d):o+h>=1?(s=(e*c-1)*Math.pow(2,i),o=o+h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;r[t+m]=s&255,m+=b,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;r[t+m]=o&255,m+=b,o/=256,l-=8);r[t+m-b]|=v*128}),Bm}var lT;function uX(){return lT||(lT=1,(function(r){const e=SA(),t=MA(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const q=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(q,w),q.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(q){if(q>i)throw new RangeError('The value "'+q+'" is invalid for option "size"');const w=new Uint8Array(q);return Object.setPrototypeOf(w,s.prototype),w}function s(q,w,A){if(typeof q=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(q)}return c(q,w,A)}s.poolSize=8192;function c(q,w,A){if(typeof q=="string")return y(q,w);if(ArrayBuffer.isView(q))return b(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(de(q,ArrayBuffer)||q&&de(q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(q,SharedArrayBuffer)||q&&de(q.buffer,SharedArrayBuffer)))return v(q,w,A);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=q.valueOf&&q.valueOf();if(K!=null&&K!==q)return s.from(K,w,A);const G=E(q);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return s.from(q[Symbol.toPrimitive]("string"),w,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}s.from=function(q,w,A){return c(q,w,A)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function d(q,w,A){return l(q),q<=0?o(q):w!==void 0?typeof A=="string"?o(q).fill(w,A):o(q).fill(w):o(q)}s.alloc=function(q,w,A){return d(q,w,A)};function h(q){return l(q),o(q<0?0:x(q)|0)}s.allocUnsafe=function(q){return h(q)},s.allocUnsafeSlow=function(q){return h(q)};function y(q,w){if((typeof w!="string"||w==="")&&(w="utf8"),!s.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const A=N(q,w)|0;let K=o(A);const G=K.write(q,w);return G!==A&&(K=K.slice(0,G)),K}function m(q){const w=q.length<0?0:x(q.length)|0,A=o(w);for(let K=0;K<w;K+=1)A[K]=q[K]&255;return A}function b(q){if(de(q,Uint8Array)){const w=new Uint8Array(q);return v(w.buffer,w.byteOffset,w.byteLength)}return m(q)}function v(q,w,A){if(w<0||q.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<w+(A||0))throw new RangeError('"length" is outside of buffer bounds');let K;return w===void 0&&A===void 0?K=new Uint8Array(q):A===void 0?K=new Uint8Array(q,w):K=new Uint8Array(q,w,A),Object.setPrototypeOf(K,s.prototype),K}function E(q){if(s.isBuffer(q)){const w=x(q.length)|0,A=o(w);return A.length===0||q.copy(A,0,0,w),A}if(q.length!==void 0)return typeof q.length!="number"||Be(q.length)?o(0):m(q);if(q.type==="Buffer"&&Array.isArray(q.data))return m(q.data)}function x(q){if(q>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return q|0}function D(q){return+q!=q&&(q=0),s.alloc(+q)}s.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==s.prototype},s.compare=function(w,A){if(de(w,Uint8Array)&&(w=s.from(w,w.offset,w.byteLength)),de(A,Uint8Array)&&(A=s.from(A,A.offset,A.byteLength)),!s.isBuffer(w)||!s.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===A)return 0;let K=w.length,G=A.length;for(let ee=0,ne=Math.min(K,G);ee<ne;++ee)if(w[ee]!==A[ee]){K=w[ee],G=A[ee];break}return K<G?-1:G<K?1:0},s.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(w,A){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return s.alloc(0);let K;if(A===void 0)for(A=0,K=0;K<w.length;++K)A+=w[K].length;const G=s.allocUnsafe(A);let ee=0;for(K=0;K<w.length;++K){let ne=w[K];if(de(ne,Uint8Array))ee+ne.length>G.length?(s.isBuffer(ne)||(ne=s.from(ne)),ne.copy(G,ee)):Uint8Array.prototype.set.call(G,ne,ee);else if(s.isBuffer(ne))ne.copy(G,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=ne.length}return G};function N(q,w){if(s.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||de(q,ArrayBuffer))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const A=q.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&A===0)return 0;let G=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return L(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return ue(q).length;default:if(G)return K?-1:L(q).length;w=(""+w).toLowerCase(),G=!0}}s.byteLength=N;function B(q,w,A){let K=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,w>>>=0,A<=w))return"";for(q||(q="utf8");;)switch(q){case"hex":return V(this,w,A);case"utf8":case"utf-8":return R(this,w,A);case"ascii":return U(this,w,A);case"latin1":case"binary":return H(this,w,A);case"base64":return C(this,w,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,w,A);default:if(K)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),K=!0}}s.prototype._isBuffer=!0;function k(q,w,A){const K=q[w];q[w]=q[A],q[A]=K}s.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<w;A+=2)k(this,A,A+1);return this},s.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<w;A+=4)k(this,A,A+3),k(this,A+1,A+2);return this},s.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<w;A+=8)k(this,A,A+7),k(this,A+1,A+6),k(this,A+2,A+5),k(this,A+3,A+4);return this},s.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?R(this,0,w):B.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(w){if(!s.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:s.compare(this,w)===0},s.prototype.inspect=function(){let w="";const A=r.INSPECT_MAX_BYTES;return w=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(w+=" ... "),"<Buffer "+w+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(w,A,K,G,ee){if(de(w,Uint8Array)&&(w=s.from(w,w.offset,w.byteLength)),!s.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(A===void 0&&(A=0),K===void 0&&(K=w?w.length:0),G===void 0&&(G=0),ee===void 0&&(ee=this.length),A<0||K>w.length||G<0||ee>this.length)throw new RangeError("out of range index");if(G>=ee&&A>=K)return 0;if(G>=ee)return-1;if(A>=K)return 1;if(A>>>=0,K>>>=0,G>>>=0,ee>>>=0,this===w)return 0;let ne=ee-G,be=K-A;const Ue=Math.min(ne,be),pe=this.slice(G,ee),Ee=w.slice(A,K);for(let Ce=0;Ce<Ue;++Ce)if(pe[Ce]!==Ee[Ce]){ne=pe[Ce],be=Ee[Ce];break}return ne<be?-1:be<ne?1:0};function F(q,w,A,K,G){if(q.length===0)return-1;if(typeof A=="string"?(K=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Be(A)&&(A=G?0:q.length-1),A<0&&(A=q.length+A),A>=q.length){if(G)return-1;A=q.length-1}else if(A<0)if(G)A=0;else return-1;if(typeof w=="string"&&(w=s.from(w,K)),s.isBuffer(w))return w.length===0?-1:T(q,w,A,K,G);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(q,w,A):Uint8Array.prototype.lastIndexOf.call(q,w,A):T(q,[w],A,K,G);throw new TypeError("val must be string, number or Buffer")}function T(q,w,A,K,G){let ee=1,ne=q.length,be=w.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(q.length<2||w.length<2)return-1;ee=2,ne/=2,be/=2,A/=2}function Ue(Ee,Ce){return ee===1?Ee[Ce]:Ee.readUInt16BE(Ce*ee)}let pe;if(G){let Ee=-1;for(pe=A;pe<ne;pe++)if(Ue(q,pe)===Ue(w,Ee===-1?0:pe-Ee)){if(Ee===-1&&(Ee=pe),pe-Ee+1===be)return Ee*ee}else Ee!==-1&&(pe-=pe-Ee),Ee=-1}else for(A+be>ne&&(A=ne-be),pe=A;pe>=0;pe--){let Ee=!0;for(let Ce=0;Ce<be;Ce++)if(Ue(q,pe+Ce)!==Ue(w,Ce)){Ee=!1;break}if(Ee)return pe}return-1}s.prototype.includes=function(w,A,K){return this.indexOf(w,A,K)!==-1},s.prototype.indexOf=function(w,A,K){return F(this,w,A,K,!0)},s.prototype.lastIndexOf=function(w,A,K){return F(this,w,A,K,!1)};function z(q,w,A,K){A=Number(A)||0;const G=q.length-A;K?(K=Number(K),K>G&&(K=G)):K=G;const ee=w.length;K>ee/2&&(K=ee/2);let ne;for(ne=0;ne<K;++ne){const be=parseInt(w.substr(ne*2,2),16);if(Be(be))return ne;q[A+ne]=be}return ne}function Z(q,w,A,K){return le(L(w,q.length-A),q,A,K)}function Y(q,w,A,K){return le(j(w),q,A,K)}function W(q,w,A,K){return le(ue(w),q,A,K)}function M(q,w,A,K){return le(X(w,q.length-A),q,A,K)}s.prototype.write=function(w,A,K,G){if(A===void 0)G="utf8",K=this.length,A=0;else if(K===void 0&&typeof A=="string")G=A,K=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(K)?(K=K>>>0,G===void 0&&(G="utf8")):(G=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-A;if((K===void 0||K>ee)&&(K=ee),w.length>0&&(K<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let ne=!1;for(;;)switch(G){case"hex":return z(this,w,A,K);case"utf8":case"utf-8":return Z(this,w,A,K);case"ascii":case"latin1":case"binary":return Y(this,w,A,K);case"base64":return W(this,w,A,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,w,A,K);default:if(ne)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),ne=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(q,w,A){return w===0&&A===q.length?e.fromByteArray(q):e.fromByteArray(q.slice(w,A))}function R(q,w,A){A=Math.min(q.length,A);const K=[];let G=w;for(;G<A;){const ee=q[G];let ne=null,be=ee>239?4:ee>223?3:ee>191?2:1;if(G+be<=A){let Ue,pe,Ee,Ce;switch(be){case 1:ee<128&&(ne=ee);break;case 2:Ue=q[G+1],(Ue&192)===128&&(Ce=(ee&31)<<6|Ue&63,Ce>127&&(ne=Ce));break;case 3:Ue=q[G+1],pe=q[G+2],(Ue&192)===128&&(pe&192)===128&&(Ce=(ee&15)<<12|(Ue&63)<<6|pe&63,Ce>2047&&(Ce<55296||Ce>57343)&&(ne=Ce));break;case 4:Ue=q[G+1],pe=q[G+2],Ee=q[G+3],(Ue&192)===128&&(pe&192)===128&&(Ee&192)===128&&(Ce=(ee&15)<<18|(Ue&63)<<12|(pe&63)<<6|Ee&63,Ce>65535&&Ce<1114112&&(ne=Ce))}}ne===null?(ne=65533,be=1):ne>65535&&(ne-=65536,K.push(ne>>>10&1023|55296),ne=56320|ne&1023),K.push(ne),G+=be}return _(K)}const S=4096;function _(q){const w=q.length;if(w<=S)return String.fromCharCode.apply(String,q);let A="",K=0;for(;K<w;)A+=String.fromCharCode.apply(String,q.slice(K,K+=S));return A}function U(q,w,A){let K="";A=Math.min(q.length,A);for(let G=w;G<A;++G)K+=String.fromCharCode(q[G]&127);return K}function H(q,w,A){let K="";A=Math.min(q.length,A);for(let G=w;G<A;++G)K+=String.fromCharCode(q[G]);return K}function V(q,w,A){const K=q.length;(!w||w<0)&&(w=0),(!A||A<0||A>K)&&(A=K);let G="";for(let ee=w;ee<A;++ee)G+=Me[q[ee]];return G}function P(q,w,A){const K=q.slice(w,A);let G="";for(let ee=0;ee<K.length-1;ee+=2)G+=String.fromCharCode(K[ee]+K[ee+1]*256);return G}s.prototype.slice=function(w,A){const K=this.length;w=~~w,A=A===void 0?K:~~A,w<0?(w+=K,w<0&&(w=0)):w>K&&(w=K),A<0?(A+=K,A<0&&(A=0)):A>K&&(A=K),A<w&&(A=w);const G=this.subarray(w,A);return Object.setPrototypeOf(G,s.prototype),G};function $(q,w,A){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+w>A)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=this[w],ee=1,ne=0;for(;++ne<A&&(ee*=256);)G+=this[w+ne]*ee;return G},s.prototype.readUintBE=s.prototype.readUIntBE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=this[w+--A],ee=1;for(;A>0&&(ee*=256);)G+=this[w+--A]*ee;return G},s.prototype.readUint8=s.prototype.readUInt8=function(w,A){return w=w>>>0,A||$(w,1,this.length),this[w]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(w,A){return w=w>>>0,A||$(w,2,this.length),this[w]|this[w+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(w,A){return w=w>>>0,A||$(w,2,this.length),this[w]<<8|this[w+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(w,A){return w=w>>>0,A||$(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(w,A){return w=w>>>0,A||$(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},s.prototype.readBigUInt64LE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=A+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,ee=this[++w]+this[++w]*2**8+this[++w]*2**16+K*2**24;return BigInt(G)+(BigInt(ee)<<BigInt(32))}),s.prototype.readBigUInt64BE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=A*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],ee=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+K;return(BigInt(G)<<BigInt(32))+BigInt(ee)}),s.prototype.readIntLE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=this[w],ee=1,ne=0;for(;++ne<A&&(ee*=256);)G+=this[w+ne]*ee;return ee*=128,G>=ee&&(G-=Math.pow(2,8*A)),G},s.prototype.readIntBE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=A,ee=1,ne=this[w+--G];for(;G>0&&(ee*=256);)ne+=this[w+--G]*ee;return ee*=128,ne>=ee&&(ne-=Math.pow(2,8*A)),ne},s.prototype.readInt8=function(w,A){return w=w>>>0,A||$(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},s.prototype.readInt16LE=function(w,A){w=w>>>0,A||$(w,2,this.length);const K=this[w]|this[w+1]<<8;return K&32768?K|4294901760:K},s.prototype.readInt16BE=function(w,A){w=w>>>0,A||$(w,2,this.length);const K=this[w+1]|this[w]<<8;return K&32768?K|4294901760:K},s.prototype.readInt32LE=function(w,A){return w=w>>>0,A||$(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},s.prototype.readInt32BE=function(w,A){return w=w>>>0,A||$(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},s.prototype.readBigInt64LE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(K<<24);return(BigInt(G)<<BigInt(32))+BigInt(A+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),s.prototype.readBigInt64BE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=(A<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(G)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+K)}),s.prototype.readFloatLE=function(w,A){return w=w>>>0,A||$(w,4,this.length),t.read(this,w,!0,23,4)},s.prototype.readFloatBE=function(w,A){return w=w>>>0,A||$(w,4,this.length),t.read(this,w,!1,23,4)},s.prototype.readDoubleLE=function(w,A){return w=w>>>0,A||$(w,8,this.length),t.read(this,w,!0,52,8)},s.prototype.readDoubleBE=function(w,A){return w=w>>>0,A||$(w,8,this.length),t.read(this,w,!1,52,8)};function te(q,w,A,K,G,ee){if(!s.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>G||w<ee)throw new RangeError('"value" argument is out of bounds');if(A+K>q.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(w,A,K,G){if(w=+w,A=A>>>0,K=K>>>0,!G){const be=Math.pow(2,8*K)-1;te(this,w,A,K,be,0)}let ee=1,ne=0;for(this[A]=w&255;++ne<K&&(ee*=256);)this[A+ne]=w/ee&255;return A+K},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(w,A,K,G){if(w=+w,A=A>>>0,K=K>>>0,!G){const be=Math.pow(2,8*K)-1;te(this,w,A,K,be,0)}let ee=K-1,ne=1;for(this[A+ee]=w&255;--ee>=0&&(ne*=256);)this[A+ee]=w/ne&255;return A+K},s.prototype.writeUint8=s.prototype.writeUInt8=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,1,255,0),this[A]=w&255,A+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,65535,0),this[A]=w&255,this[A+1]=w>>>8,A+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,65535,0),this[A]=w>>>8,this[A+1]=w&255,A+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,4294967295,0),this[A+3]=w>>>24,this[A+2]=w>>>16,this[A+1]=w>>>8,this[A]=w&255,A+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,4294967295,0),this[A]=w>>>24,this[A+1]=w>>>16,this[A+2]=w>>>8,this[A+3]=w&255,A+4};function ae(q,w,A,K,G){Te(w,K,G,q,A,7);let ee=Number(w&BigInt(4294967295));q[A++]=ee,ee=ee>>8,q[A++]=ee,ee=ee>>8,q[A++]=ee,ee=ee>>8,q[A++]=ee;let ne=Number(w>>BigInt(32)&BigInt(4294967295));return q[A++]=ne,ne=ne>>8,q[A++]=ne,ne=ne>>8,q[A++]=ne,ne=ne>>8,q[A++]=ne,A}function ce(q,w,A,K,G){Te(w,K,G,q,A,7);let ee=Number(w&BigInt(4294967295));q[A+7]=ee,ee=ee>>8,q[A+6]=ee,ee=ee>>8,q[A+5]=ee,ee=ee>>8,q[A+4]=ee;let ne=Number(w>>BigInt(32)&BigInt(4294967295));return q[A+3]=ne,ne=ne>>8,q[A+2]=ne,ne=ne>>8,q[A+1]=ne,ne=ne>>8,q[A]=ne,A+8}s.prototype.writeBigUInt64LE=Pe(function(w,A=0){return ae(this,w,A,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Pe(function(w,A=0){return ce(this,w,A,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(w,A,K,G){if(w=+w,A=A>>>0,!G){const Ue=Math.pow(2,8*K-1);te(this,w,A,K,Ue-1,-Ue)}let ee=0,ne=1,be=0;for(this[A]=w&255;++ee<K&&(ne*=256);)w<0&&be===0&&this[A+ee-1]!==0&&(be=1),this[A+ee]=(w/ne>>0)-be&255;return A+K},s.prototype.writeIntBE=function(w,A,K,G){if(w=+w,A=A>>>0,!G){const Ue=Math.pow(2,8*K-1);te(this,w,A,K,Ue-1,-Ue)}let ee=K-1,ne=1,be=0;for(this[A+ee]=w&255;--ee>=0&&(ne*=256);)w<0&&be===0&&this[A+ee+1]!==0&&(be=1),this[A+ee]=(w/ne>>0)-be&255;return A+K},s.prototype.writeInt8=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,1,127,-128),w<0&&(w=255+w+1),this[A]=w&255,A+1},s.prototype.writeInt16LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,32767,-32768),this[A]=w&255,this[A+1]=w>>>8,A+2},s.prototype.writeInt16BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,32767,-32768),this[A]=w>>>8,this[A+1]=w&255,A+2},s.prototype.writeInt32LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,2147483647,-2147483648),this[A]=w&255,this[A+1]=w>>>8,this[A+2]=w>>>16,this[A+3]=w>>>24,A+4},s.prototype.writeInt32BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[A]=w>>>24,this[A+1]=w>>>16,this[A+2]=w>>>8,this[A+3]=w&255,A+4},s.prototype.writeBigInt64LE=Pe(function(w,A=0){return ae(this,w,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Pe(function(w,A=0){return ce(this,w,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(q,w,A,K,G,ee){if(A+K>q.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function oe(q,w,A,K,G){return w=+w,A=A>>>0,G||fe(q,w,A,4),t.write(q,w,A,K,23,4),A+4}s.prototype.writeFloatLE=function(w,A,K){return oe(this,w,A,!0,K)},s.prototype.writeFloatBE=function(w,A,K){return oe(this,w,A,!1,K)};function ye(q,w,A,K,G){return w=+w,A=A>>>0,G||fe(q,w,A,8),t.write(q,w,A,K,52,8),A+8}s.prototype.writeDoubleLE=function(w,A,K){return ye(this,w,A,!0,K)},s.prototype.writeDoubleBE=function(w,A,K){return ye(this,w,A,!1,K)},s.prototype.copy=function(w,A,K,G){if(!s.isBuffer(w))throw new TypeError("argument should be a Buffer");if(K||(K=0),!G&&G!==0&&(G=this.length),A>=w.length&&(A=w.length),A||(A=0),G>0&&G<K&&(G=K),G===K||w.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),w.length-A<G-K&&(G=w.length-A+K);const ee=G-K;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,K,G):Uint8Array.prototype.set.call(w,this.subarray(K,G),A),ee},s.prototype.fill=function(w,A,K,G){if(typeof w=="string"){if(typeof A=="string"?(G=A,A=0,K=this.length):typeof K=="string"&&(G=K,K=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!s.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(w.length===1){const ne=w.charCodeAt(0);(G==="utf8"&&ne<128||G==="latin1")&&(w=ne)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(A<0||this.length<A||this.length<K)throw new RangeError("Out of range index");if(K<=A)return this;A=A>>>0,K=K===void 0?this.length:K>>>0,w||(w=0);let ee;if(typeof w=="number")for(ee=A;ee<K;++ee)this[ee]=w;else{const ne=s.isBuffer(w)?w:s.from(w,G),be=ne.length;if(be===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(ee=0;ee<K-A;++ee)this[ee+A]=ne[ee%be]}return this};const me={};function ve(q,w,A){me[q]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(q,w){return`The "${q}" argument must be of type number. Received type ${typeof w}`},TypeError),ve("ERR_OUT_OF_RANGE",function(q,w,A){let K=`The value of "${q}" is out of range.`,G=A;return Number.isInteger(A)&&Math.abs(A)>2**32?G=we(String(A)):typeof A=="bigint"&&(G=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(G=we(G)),G+="n"),K+=` It must be ${w}. Received ${G}`,K},RangeError);function we(q){let w="",A=q.length;const K=q[0]==="-"?1:0;for(;A>=K+4;A-=3)w=`_${q.slice(A-3,A)}${w}`;return`${q.slice(0,A)}${w}`}function De(q,w,A){Se(w,"offset"),(q[w]===void 0||q[w+A]===void 0)&&Le(w,q.length-(A+1))}function Te(q,w,A,K,G,ee){if(q>A||q<w){const ne=typeof w=="bigint"?"n":"";let be;throw w===0||w===BigInt(0)?be=`>= 0${ne} and < 2${ne} ** ${(ee+1)*8}${ne}`:be=`>= -(2${ne} ** ${(ee+1)*8-1}${ne}) and < 2 ** ${(ee+1)*8-1}${ne}`,new me.ERR_OUT_OF_RANGE("value",be,q)}De(K,G,ee)}function Se(q,w){if(typeof q!="number")throw new me.ERR_INVALID_ARG_TYPE(w,"number",q)}function Le(q,w,A){throw Math.floor(q)!==q?(Se(q,A),new me.ERR_OUT_OF_RANGE("offset","an integer",q)):w<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,q)}const $e=/[^+/0-9A-Za-z-_]/g;function ie(q){if(q=q.split("=")[0],q=q.trim().replace($e,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function L(q,w){w=w||1/0;let A;const K=q.length;let G=null;const ee=[];for(let ne=0;ne<K;++ne){if(A=q.charCodeAt(ne),A>55295&&A<57344){if(!G){if(A>56319){(w-=3)>-1&&ee.push(239,191,189);continue}else if(ne+1===K){(w-=3)>-1&&ee.push(239,191,189);continue}G=A;continue}if(A<56320){(w-=3)>-1&&ee.push(239,191,189),G=A;continue}A=(G-55296<<10|A-56320)+65536}else G&&(w-=3)>-1&&ee.push(239,191,189);if(G=null,A<128){if((w-=1)<0)break;ee.push(A)}else if(A<2048){if((w-=2)<0)break;ee.push(A>>6|192,A&63|128)}else if(A<65536){if((w-=3)<0)break;ee.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((w-=4)<0)break;ee.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return ee}function j(q){const w=[];for(let A=0;A<q.length;++A)w.push(q.charCodeAt(A)&255);return w}function X(q,w){let A,K,G;const ee=[];for(let ne=0;ne<q.length&&!((w-=2)<0);++ne)A=q.charCodeAt(ne),K=A>>8,G=A%256,ee.push(G),ee.push(K);return ee}function ue(q){return e.toByteArray(ie(q))}function le(q,w,A,K){let G;for(G=0;G<K&&!(G+A>=w.length||G>=q.length);++G)w[G+A]=q[G];return G}function de(q,w){return q instanceof w||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===w.name}function Be(q){return q!==q}const Me=(function(){const q="0123456789abcdef",w=new Array(256);for(let A=0;A<16;++A){const K=A*16;for(let G=0;G<16;++G)w[K+G]=q[A]+q[G]}return w})();function Pe(q){return typeof BigInt>"u"?Qe:q}function Qe(){throw new Error("BigInt not supported")}})(y3)),y3}var cX=uX();let QP=class{static getGlobalVariable(){return typeof window<"u"?window:globalThis}static load(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: require("${e}").`);return""}static pathNormalize(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize("${e}").`);return""}static pathExtname(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname("${e}").`);return""}static pathResolve(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve("${e}").`);return""}static fileExist(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync("${e}").`);return!1}static dotenv(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "${e}" }).`)}static getEnvVariable(e){}static readFileSync(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("${e}").`);return null}static appendFileSync(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("${e}").`)}static writeFile(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile("${e}").`);return Promise.reject(null)}static highlightSql(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}};QP.type="browser";typeof window<"u"&&(window.Buffer=cX.Buffer);typeof globalThis<"u"&&typeof require<"u"&&(globalThis.Buffer=require("buffer/").Buffer);let Pr=class{static isObject(e){return e!==null&&typeof e=="object"}static isObjectWithName(e){return e!==null&&typeof e=="object"&&e.name!==void 0}static assign(e,...t){for(const n of t)for(const i of Object.getOwnPropertyNames(n))e[i]=n[i]}static mixedListToArray(e){return e!==null&&typeof e=="object"?Object.keys(e).map(t=>e[t]):e}},rt=class extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}},Nf=class extends rt{constructor(){super("Locking not supported on given driver.")}},i8=class extends rt{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}},dr=class{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return typeof e=="function"&&typeof e.hasId=="function"&&typeof e.save=="function"&&typeof e.useDataSource=="function"}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return typeof e=="object"&&e!==null&&e["@instanceof"]===Symbol.for(t)}},lX=class extends rt{constructor(e,t){super(),this.entityClass=e,this.criteria=t,this.message=`Could not find any entity of type "${this.stringifyTarget(e)}" matching: ${this.stringifyCriteria(t)}`}stringifyTarget(e){return dr.isEntitySchema(e)?e.options.name:typeof e=="function"||Pr.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch{}return""+e}},fT=class extends rt{constructor(e,t,n){super(`The optimistic lock on entity ${e} failed, version ${t} was expected, but is actually ${n}.`)}},JP=class extends rt{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}},fX=class extends rt{constructor(e,t){super(`Primary column ${e.constructor.name}#${t} cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.`)}},dX=class extends rt{constructor(e){super(`Entity "${e.name}" does not have delete date columns.`)}},Mb=class extends rt{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}},Wu=class XP extends rt{constructor(e,t){super(e),Object.setPrototypeOf(this,XP.prototype),this.message=`Property "${e}" was not found in "${t.targetName}". Make sure your query is correct.`}},hX=class extends rt{constructor(e){super(`Entity ${e} does not have version or update date columns.`)}},pX=class extends rt{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}},np=class extends rt{constructor(){super("The optimistic lock can be used only with getOne() method.")}},yX=class extends rt{constructor(e){super(),e.length===1?this.message=`Relation "${e[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${e.map(t=>`"${t}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}},mX=class extends rt{constructor(){super("An open transaction is required for pessimistic lock.")}},eU=class extends rt{constructor(e,t){super(`Column type for ${e.constructor.name}#${t} is not defined and cannot be guessed. Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.`)}},gX=class extends rt{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}},dT=class{constructor(e){Pr.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new rt(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}},Us=class{static isAliasProperty(e){if(typeof e!="string"||e.indexOf(".")===-1)return!1;const[t,n]=e.split(".");return!(!t||!n||e.indexOf("(")!==-1||e.indexOf(")")!==-1)}};var m3={exports:{}},Im={exports:{}},g3={};var hT;function vX(){return hT||(hT=1,(function(r){var e=SA(),t=MA(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var ie=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(ie,L),ie.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(ie){if(ie>i)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var L=new Uint8Array(ie);return Object.setPrototypeOf(L,s.prototype),L}function s(ie,L,j){if(typeof ie=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(ie)}return c(ie,L,j)}s.poolSize=8192;function c(ie,L,j){if(typeof ie=="string")return y(ie,L);if(ArrayBuffer.isView(ie))return b(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Se(ie,ArrayBuffer)||ie&&Se(ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Se(ie,SharedArrayBuffer)||ie&&Se(ie.buffer,SharedArrayBuffer)))return v(ie,L,j);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=ie.valueOf&&ie.valueOf();if(X!=null&&X!==ie)return s.from(X,L,j);var ue=E(ie);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return s.from(ie[Symbol.toPrimitive]("string"),L,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}s.from=function(ie,L,j){return c(ie,L,j)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function d(ie,L,j){return l(ie),ie<=0?o(ie):L!==void 0?typeof j=="string"?o(ie).fill(L,j):o(ie).fill(L):o(ie)}s.alloc=function(ie,L,j){return d(ie,L,j)};function h(ie){return l(ie),o(ie<0?0:x(ie)|0)}s.allocUnsafe=function(ie){return h(ie)},s.allocUnsafeSlow=function(ie){return h(ie)};function y(ie,L){if((typeof L!="string"||L==="")&&(L="utf8"),!s.isEncoding(L))throw new TypeError("Unknown encoding: "+L);var j=N(ie,L)|0,X=o(j),ue=X.write(ie,L);return ue!==j&&(X=X.slice(0,ue)),X}function m(ie){for(var L=ie.length<0?0:x(ie.length)|0,j=o(L),X=0;X<L;X+=1)j[X]=ie[X]&255;return j}function b(ie){if(Se(ie,Uint8Array)){var L=new Uint8Array(ie);return v(L.buffer,L.byteOffset,L.byteLength)}return m(ie)}function v(ie,L,j){if(L<0||ie.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<L+(j||0))throw new RangeError('"length" is outside of buffer bounds');var X;return L===void 0&&j===void 0?X=new Uint8Array(ie):j===void 0?X=new Uint8Array(ie,L):X=new Uint8Array(ie,L,j),Object.setPrototypeOf(X,s.prototype),X}function E(ie){if(s.isBuffer(ie)){var L=x(ie.length)|0,j=o(L);return j.length===0||ie.copy(j,0,0,L),j}if(ie.length!==void 0)return typeof ie.length!="number"||Le(ie.length)?o(0):m(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return m(ie.data)}function x(ie){if(ie>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ie|0}function D(ie){return+ie!=ie&&(ie=0),s.alloc(+ie)}s.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==s.prototype},s.compare=function(L,j){if(Se(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),Se(j,Uint8Array)&&(j=s.from(j,j.offset,j.byteLength)),!s.isBuffer(L)||!s.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===j)return 0;for(var X=L.length,ue=j.length,le=0,de=Math.min(X,ue);le<de;++le)if(L[le]!==j[le]){X=L[le],ue=j[le];break}return X<ue?-1:ue<X?1:0},s.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(L,j){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return s.alloc(0);var X;if(j===void 0)for(j=0,X=0;X<L.length;++X)j+=L[X].length;var ue=s.allocUnsafe(j),le=0;for(X=0;X<L.length;++X){var de=L[X];if(Se(de,Uint8Array))le+de.length>ue.length?s.from(de).copy(ue,le):Uint8Array.prototype.set.call(ue,de,le);else if(s.isBuffer(de))de.copy(ue,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=de.length}return ue};function N(ie,L){if(s.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||Se(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var j=ie.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&j===0)return 0;for(var ue=!1;;)switch(L){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return me(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return De(ie).length;default:if(ue)return X?-1:me(ie).length;L=(""+L).toLowerCase(),ue=!0}}s.byteLength=N;function B(ie,L,j){var X=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,L>>>=0,j<=L))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return V(this,L,j);case"utf8":case"utf-8":return R(this,L,j);case"ascii":return U(this,L,j);case"latin1":case"binary":return H(this,L,j);case"base64":return C(this,L,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,L,j);default:if(X)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),X=!0}}s.prototype._isBuffer=!0;function k(ie,L,j){var X=ie[L];ie[L]=ie[j],ie[j]=X}s.prototype.swap16=function(){var L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var j=0;j<L;j+=2)k(this,j,j+1);return this},s.prototype.swap32=function(){var L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var j=0;j<L;j+=4)k(this,j,j+3),k(this,j+1,j+2);return this},s.prototype.swap64=function(){var L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var j=0;j<L;j+=8)k(this,j,j+7),k(this,j+1,j+6),k(this,j+2,j+5),k(this,j+3,j+4);return this},s.prototype.toString=function(){var L=this.length;return L===0?"":arguments.length===0?R(this,0,L):B.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(L){if(!s.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:s.compare(this,L)===0},s.prototype.inspect=function(){var L="",j=r.INSPECT_MAX_BYTES;return L=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(L+=" ... "),"<Buffer "+L+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(L,j,X,ue,le){if(Se(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),!s.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(j===void 0&&(j=0),X===void 0&&(X=L?L.length:0),ue===void 0&&(ue=0),le===void 0&&(le=this.length),j<0||X>L.length||ue<0||le>this.length)throw new RangeError("out of range index");if(ue>=le&&j>=X)return 0;if(ue>=le)return-1;if(j>=X)return 1;if(j>>>=0,X>>>=0,ue>>>=0,le>>>=0,this===L)return 0;for(var de=le-ue,Be=X-j,Me=Math.min(de,Be),Pe=this.slice(ue,le),Qe=L.slice(j,X),q=0;q<Me;++q)if(Pe[q]!==Qe[q]){de=Pe[q],Be=Qe[q];break}return de<Be?-1:Be<de?1:0};function F(ie,L,j,X,ue){if(ie.length===0)return-1;if(typeof j=="string"?(X=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,Le(j)&&(j=ue?0:ie.length-1),j<0&&(j=ie.length+j),j>=ie.length){if(ue)return-1;j=ie.length-1}else if(j<0)if(ue)j=0;else return-1;if(typeof L=="string"&&(L=s.from(L,X)),s.isBuffer(L))return L.length===0?-1:T(ie,L,j,X,ue);if(typeof L=="number")return L=L&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(ie,L,j):Uint8Array.prototype.lastIndexOf.call(ie,L,j):T(ie,[L],j,X,ue);throw new TypeError("val must be string, number or Buffer")}function T(ie,L,j,X,ue){var le=1,de=ie.length,Be=L.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(ie.length<2||L.length<2)return-1;le=2,de/=2,Be/=2,j/=2}function Me(A,K){return le===1?A[K]:A.readUInt16BE(K*le)}var Pe;if(ue){var Qe=-1;for(Pe=j;Pe<de;Pe++)if(Me(ie,Pe)===Me(L,Qe===-1?0:Pe-Qe)){if(Qe===-1&&(Qe=Pe),Pe-Qe+1===Be)return Qe*le}else Qe!==-1&&(Pe-=Pe-Qe),Qe=-1}else for(j+Be>de&&(j=de-Be),Pe=j;Pe>=0;Pe--){for(var q=!0,w=0;w<Be;w++)if(Me(ie,Pe+w)!==Me(L,w)){q=!1;break}if(q)return Pe}return-1}s.prototype.includes=function(L,j,X){return this.indexOf(L,j,X)!==-1},s.prototype.indexOf=function(L,j,X){return F(this,L,j,X,!0)},s.prototype.lastIndexOf=function(L,j,X){return F(this,L,j,X,!1)};function z(ie,L,j,X){j=Number(j)||0;var ue=ie.length-j;X?(X=Number(X),X>ue&&(X=ue)):X=ue;var le=L.length;X>le/2&&(X=le/2);for(var de=0;de<X;++de){var Be=parseInt(L.substr(de*2,2),16);if(Le(Be))return de;ie[j+de]=Be}return de}function Z(ie,L,j,X){return Te(me(L,ie.length-j),ie,j,X)}function Y(ie,L,j,X){return Te(ve(L),ie,j,X)}function W(ie,L,j,X){return Te(De(L),ie,j,X)}function M(ie,L,j,X){return Te(we(L,ie.length-j),ie,j,X)}s.prototype.write=function(L,j,X,ue){if(j===void 0)ue="utf8",X=this.length,j=0;else if(X===void 0&&typeof j=="string")ue=j,X=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(X)?(X=X>>>0,ue===void 0&&(ue="utf8")):(ue=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var le=this.length-j;if((X===void 0||X>le)&&(X=le),L.length>0&&(X<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");for(var de=!1;;)switch(ue){case"hex":return z(this,L,j,X);case"utf8":case"utf-8":return Z(this,L,j,X);case"ascii":case"latin1":case"binary":return Y(this,L,j,X);case"base64":return W(this,L,j,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,L,j,X);default:if(de)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),de=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(ie,L,j){return L===0&&j===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(L,j))}function R(ie,L,j){j=Math.min(ie.length,j);for(var X=[],ue=L;ue<j;){var le=ie[ue],de=null,Be=le>239?4:le>223?3:le>191?2:1;if(ue+Be<=j){var Me,Pe,Qe,q;switch(Be){case 1:le<128&&(de=le);break;case 2:Me=ie[ue+1],(Me&192)===128&&(q=(le&31)<<6|Me&63,q>127&&(de=q));break;case 3:Me=ie[ue+1],Pe=ie[ue+2],(Me&192)===128&&(Pe&192)===128&&(q=(le&15)<<12|(Me&63)<<6|Pe&63,q>2047&&(q<55296||q>57343)&&(de=q));break;case 4:Me=ie[ue+1],Pe=ie[ue+2],Qe=ie[ue+3],(Me&192)===128&&(Pe&192)===128&&(Qe&192)===128&&(q=(le&15)<<18|(Me&63)<<12|(Pe&63)<<6|Qe&63,q>65535&&q<1114112&&(de=q))}}de===null?(de=65533,Be=1):de>65535&&(de-=65536,X.push(de>>>10&1023|55296),de=56320|de&1023),X.push(de),ue+=Be}return _(X)}var S=4096;function _(ie){var L=ie.length;if(L<=S)return String.fromCharCode.apply(String,ie);for(var j="",X=0;X<L;)j+=String.fromCharCode.apply(String,ie.slice(X,X+=S));return j}function U(ie,L,j){var X="";j=Math.min(ie.length,j);for(var ue=L;ue<j;++ue)X+=String.fromCharCode(ie[ue]&127);return X}function H(ie,L,j){var X="";j=Math.min(ie.length,j);for(var ue=L;ue<j;++ue)X+=String.fromCharCode(ie[ue]);return X}function V(ie,L,j){var X=ie.length;(!L||L<0)&&(L=0),(!j||j<0||j>X)&&(j=X);for(var ue="",le=L;le<j;++le)ue+=$e[ie[le]];return ue}function P(ie,L,j){for(var X=ie.slice(L,j),ue="",le=0;le<X.length-1;le+=2)ue+=String.fromCharCode(X[le]+X[le+1]*256);return ue}s.prototype.slice=function(L,j){var X=this.length;L=~~L,j=j===void 0?X:~~j,L<0?(L+=X,L<0&&(L=0)):L>X&&(L=X),j<0?(j+=X,j<0&&(j=0)):j>X&&(j=X),j<L&&(j=L);var ue=this.subarray(L,j);return Object.setPrototypeOf(ue,s.prototype),ue};function $(ie,L,j){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+L>j)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(L,j,X){L=L>>>0,j=j>>>0,X||$(L,j,this.length);for(var ue=this[L],le=1,de=0;++de<j&&(le*=256);)ue+=this[L+de]*le;return ue},s.prototype.readUintBE=s.prototype.readUIntBE=function(L,j,X){L=L>>>0,j=j>>>0,X||$(L,j,this.length);for(var ue=this[L+--j],le=1;j>0&&(le*=256);)ue+=this[L+--j]*le;return ue},s.prototype.readUint8=s.prototype.readUInt8=function(L,j){return L=L>>>0,j||$(L,1,this.length),this[L]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(L,j){return L=L>>>0,j||$(L,2,this.length),this[L]|this[L+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(L,j){return L=L>>>0,j||$(L,2,this.length),this[L]<<8|this[L+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(L,j){return L=L>>>0,j||$(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(L,j){return L=L>>>0,j||$(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},s.prototype.readIntLE=function(L,j,X){L=L>>>0,j=j>>>0,X||$(L,j,this.length);for(var ue=this[L],le=1,de=0;++de<j&&(le*=256);)ue+=this[L+de]*le;return le*=128,ue>=le&&(ue-=Math.pow(2,8*j)),ue},s.prototype.readIntBE=function(L,j,X){L=L>>>0,j=j>>>0,X||$(L,j,this.length);for(var ue=j,le=1,de=this[L+--ue];ue>0&&(le*=256);)de+=this[L+--ue]*le;return le*=128,de>=le&&(de-=Math.pow(2,8*j)),de},s.prototype.readInt8=function(L,j){return L=L>>>0,j||$(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},s.prototype.readInt16LE=function(L,j){L=L>>>0,j||$(L,2,this.length);var X=this[L]|this[L+1]<<8;return X&32768?X|4294901760:X},s.prototype.readInt16BE=function(L,j){L=L>>>0,j||$(L,2,this.length);var X=this[L+1]|this[L]<<8;return X&32768?X|4294901760:X},s.prototype.readInt32LE=function(L,j){return L=L>>>0,j||$(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},s.prototype.readInt32BE=function(L,j){return L=L>>>0,j||$(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},s.prototype.readFloatLE=function(L,j){return L=L>>>0,j||$(L,4,this.length),t.read(this,L,!0,23,4)},s.prototype.readFloatBE=function(L,j){return L=L>>>0,j||$(L,4,this.length),t.read(this,L,!1,23,4)},s.prototype.readDoubleLE=function(L,j){return L=L>>>0,j||$(L,8,this.length),t.read(this,L,!0,52,8)},s.prototype.readDoubleBE=function(L,j){return L=L>>>0,j||$(L,8,this.length),t.read(this,L,!1,52,8)};function te(ie,L,j,X,ue,le){if(!s.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ue||L<le)throw new RangeError('"value" argument is out of bounds');if(j+X>ie.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(L,j,X,ue){if(L=+L,j=j>>>0,X=X>>>0,!ue){var le=Math.pow(2,8*X)-1;te(this,L,j,X,le,0)}var de=1,Be=0;for(this[j]=L&255;++Be<X&&(de*=256);)this[j+Be]=L/de&255;return j+X},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(L,j,X,ue){if(L=+L,j=j>>>0,X=X>>>0,!ue){var le=Math.pow(2,8*X)-1;te(this,L,j,X,le,0)}var de=X-1,Be=1;for(this[j+de]=L&255;--de>=0&&(Be*=256);)this[j+de]=L/Be&255;return j+X},s.prototype.writeUint8=s.prototype.writeUInt8=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,1,255,0),this[j]=L&255,j+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,2,65535,0),this[j]=L&255,this[j+1]=L>>>8,j+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,2,65535,0),this[j]=L>>>8,this[j+1]=L&255,j+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,4,4294967295,0),this[j+3]=L>>>24,this[j+2]=L>>>16,this[j+1]=L>>>8,this[j]=L&255,j+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,4,4294967295,0),this[j]=L>>>24,this[j+1]=L>>>16,this[j+2]=L>>>8,this[j+3]=L&255,j+4},s.prototype.writeIntLE=function(L,j,X,ue){if(L=+L,j=j>>>0,!ue){var le=Math.pow(2,8*X-1);te(this,L,j,X,le-1,-le)}var de=0,Be=1,Me=0;for(this[j]=L&255;++de<X&&(Be*=256);)L<0&&Me===0&&this[j+de-1]!==0&&(Me=1),this[j+de]=(L/Be>>0)-Me&255;return j+X},s.prototype.writeIntBE=function(L,j,X,ue){if(L=+L,j=j>>>0,!ue){var le=Math.pow(2,8*X-1);te(this,L,j,X,le-1,-le)}var de=X-1,Be=1,Me=0;for(this[j+de]=L&255;--de>=0&&(Be*=256);)L<0&&Me===0&&this[j+de+1]!==0&&(Me=1),this[j+de]=(L/Be>>0)-Me&255;return j+X},s.prototype.writeInt8=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,1,127,-128),L<0&&(L=255+L+1),this[j]=L&255,j+1},s.prototype.writeInt16LE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,2,32767,-32768),this[j]=L&255,this[j+1]=L>>>8,j+2},s.prototype.writeInt16BE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,2,32767,-32768),this[j]=L>>>8,this[j+1]=L&255,j+2},s.prototype.writeInt32LE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,4,2147483647,-2147483648),this[j]=L&255,this[j+1]=L>>>8,this[j+2]=L>>>16,this[j+3]=L>>>24,j+4},s.prototype.writeInt32BE=function(L,j,X){return L=+L,j=j>>>0,X||te(this,L,j,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[j]=L>>>24,this[j+1]=L>>>16,this[j+2]=L>>>8,this[j+3]=L&255,j+4};function ae(ie,L,j,X,ue,le){if(j+X>ie.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function ce(ie,L,j,X,ue){return L=+L,j=j>>>0,ue||ae(ie,L,j,4),t.write(ie,L,j,X,23,4),j+4}s.prototype.writeFloatLE=function(L,j,X){return ce(this,L,j,!0,X)},s.prototype.writeFloatBE=function(L,j,X){return ce(this,L,j,!1,X)};function fe(ie,L,j,X,ue){return L=+L,j=j>>>0,ue||ae(ie,L,j,8),t.write(ie,L,j,X,52,8),j+8}s.prototype.writeDoubleLE=function(L,j,X){return fe(this,L,j,!0,X)},s.prototype.writeDoubleBE=function(L,j,X){return fe(this,L,j,!1,X)},s.prototype.copy=function(L,j,X,ue){if(!s.isBuffer(L))throw new TypeError("argument should be a Buffer");if(X||(X=0),!ue&&ue!==0&&(ue=this.length),j>=L.length&&(j=L.length),j||(j=0),ue>0&&ue<X&&(ue=X),ue===X||L.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),L.length-j<ue-X&&(ue=L.length-j+X);var le=ue-X;return this===L&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,X,ue):Uint8Array.prototype.set.call(L,this.subarray(X,ue),j),le},s.prototype.fill=function(L,j,X,ue){if(typeof L=="string"){if(typeof j=="string"?(ue=j,j=0,X=this.length):typeof X=="string"&&(ue=X,X=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!s.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(L.length===1){var le=L.charCodeAt(0);(ue==="utf8"&&le<128||ue==="latin1")&&(L=le)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(j<0||this.length<j||this.length<X)throw new RangeError("Out of range index");if(X<=j)return this;j=j>>>0,X=X===void 0?this.length:X>>>0,L||(L=0);var de;if(typeof L=="number")for(de=j;de<X;++de)this[de]=L;else{var Be=s.isBuffer(L)?L:s.from(L,ue),Me=Be.length;if(Me===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(de=0;de<X-j;++de)this[de+j]=Be[de%Me]}return this};var oe=/[^+/0-9A-Za-z-_]/g;function ye(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(oe,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function me(ie,L){L=L||1/0;for(var j,X=ie.length,ue=null,le=[],de=0;de<X;++de){if(j=ie.charCodeAt(de),j>55295&&j<57344){if(!ue){if(j>56319){(L-=3)>-1&&le.push(239,191,189);continue}else if(de+1===X){(L-=3)>-1&&le.push(239,191,189);continue}ue=j;continue}if(j<56320){(L-=3)>-1&&le.push(239,191,189),ue=j;continue}j=(ue-55296<<10|j-56320)+65536}else ue&&(L-=3)>-1&&le.push(239,191,189);if(ue=null,j<128){if((L-=1)<0)break;le.push(j)}else if(j<2048){if((L-=2)<0)break;le.push(j>>6|192,j&63|128)}else if(j<65536){if((L-=3)<0)break;le.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((L-=4)<0)break;le.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return le}function ve(ie){for(var L=[],j=0;j<ie.length;++j)L.push(ie.charCodeAt(j)&255);return L}function we(ie,L){for(var j,X,ue,le=[],de=0;de<ie.length&&!((L-=2)<0);++de)j=ie.charCodeAt(de),X=j>>8,ue=j%256,le.push(ue),le.push(X);return le}function De(ie){return e.toByteArray(ye(ie))}function Te(ie,L,j,X){for(var ue=0;ue<X&&!(ue+j>=L.length||ue>=ie.length);++ue)L[ue+j]=ie[ue];return ue}function Se(ie,L){return ie instanceof L||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===L.name}function Le(ie){return ie!==ie}var $e=(function(){for(var ie="0123456789abcdef",L=new Array(256),j=0;j<16;++j)for(var X=j*16,ue=0;ue<16;++ue)L[X+ue]=ie[j]+ie[ue];return L})()})(g3)),g3}var pT;function _c(){return pT||(pT=1,(function(r,e){var t=vX(),n=t.Buffer;function i(o,s){for(var c in o)s[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=a);function a(o,s,c){return n(o,s,c)}a.prototype=Object.create(n.prototype),i(n,a),a.from=function(o,s,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,s,c)},a.alloc=function(o,s,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var l=n(o);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(Im,Im.exports)),Im.exports}var v3,yT;function bX(){if(yT)return v3;yT=1;var r={}.toString;return v3=Array.isArray||function(e){return r.call(e)=="[object Array]"},v3}var b3,mT;function K0(){return mT||(mT=1,b3=TypeError),b3}var w3,gT;function tU(){return gT||(gT=1,w3=Object),w3}var _3,vT;function wX(){return vT||(vT=1,_3=Error),_3}var E3,bT;function _X(){return bT||(bT=1,E3=EvalError),E3}var x3,wT;function EX(){return wT||(wT=1,x3=RangeError),x3}var A3,_T;function xX(){return _T||(_T=1,A3=ReferenceError),A3}var S3,ET;function rU(){return ET||(ET=1,S3=SyntaxError),S3}var M3,xT;function AX(){return xT||(xT=1,M3=URIError),M3}var T3,AT;function SX(){return AT||(AT=1,T3=Math.abs),T3}var R3,ST;function MX(){return ST||(ST=1,R3=Math.floor),R3}var O3,MT;function TX(){return MT||(MT=1,O3=Math.max),O3}var C3,TT;function RX(){return TT||(TT=1,C3=Math.min),C3}var N3,RT;function OX(){return RT||(RT=1,N3=Math.pow),N3}var B3,OT;function CX(){return OT||(OT=1,B3=Math.round),B3}var I3,CT;function NX(){return CT||(CT=1,I3=Number.isNaN||function(e){return e!==e}),I3}var D3,NT;function BX(){if(NT)return D3;NT=1;var r=NX();return D3=function(t){return r(t)||t===0?t:t<0?-1:1},D3}var P3,BT;function IX(){return BT||(BT=1,P3=Object.getOwnPropertyDescriptor),P3}var U3,IT;function G0(){if(IT)return U3;IT=1;var r=IX();if(r)try{r([],"length")}catch{r=null}return U3=r,U3}var k3,DT;function Tb(){if(DT)return k3;DT=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return k3=r,k3}var q3,PT;function nU(){return PT||(PT=1,q3=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),q3}var L3,UT;function DX(){if(UT)return L3;UT=1;var r=typeof Symbol<"u"&&Symbol,e=nU();return L3=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},L3}var j3,kT;function iU(){return kT||(kT=1,j3=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),j3}var $3,qT;function aU(){if(qT)return $3;qT=1;var r=tU();return $3=r.getPrototypeOf||null,$3}var F3,LT;function PX(){if(LT)return F3;LT=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(c,l){for(var d=[],h=0;h<c.length;h+=1)d[h]=c[h];for(var y=0;y<l.length;y+=1)d[y+c.length]=l[y];return d},a=function(c,l){for(var d=[],h=l,y=0;h<c.length;h+=1,y+=1)d[y]=c[h];return d},o=function(s,c){for(var l="",d=0;d<s.length;d+=1)l+=s[d],d+1<s.length&&(l+=c);return l};return F3=function(c){var l=this;if(typeof l!="function"||e.apply(l)!==n)throw new TypeError(r+l);for(var d=a(arguments,1),h,y=function(){if(this instanceof h){var x=l.apply(this,i(d,arguments));return Object(x)===x?x:this}return l.apply(c,i(d,arguments))},m=t(0,l.length-d.length),b=[],v=0;v<m;v++)b[v]="$"+v;if(h=Function("binder","return function ("+o(b,",")+"){ return binder.apply(this,arguments); }")(y),l.prototype){var E=function(){};E.prototype=l.prototype,h.prototype=new E,E.prototype=null}return h},F3}var z3,jT;function W0(){if(jT)return z3;jT=1;var r=PX();return z3=Function.prototype.bind||r,z3}var V3,$T;function TA(){return $T||($T=1,V3=Function.prototype.call),V3}var H3,FT;function RA(){return FT||(FT=1,H3=Function.prototype.apply),H3}var K3,zT;function UX(){return zT||(zT=1,K3=typeof Reflect<"u"&&Reflect&&Reflect.apply),K3}var G3,VT;function sU(){if(VT)return G3;VT=1;var r=W0(),e=RA(),t=TA(),n=UX();return G3=n||r.call(t,e),G3}var W3,HT;function OA(){if(HT)return W3;HT=1;var r=W0(),e=K0(),t=TA(),n=sU();return W3=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return n(r,t,a)},W3}var Z3,KT;function kX(){if(KT)return Z3;KT=1;var r=OA(),e=G0(),t;try{t=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,a=i.getPrototypeOf;return Z3=n&&typeof n.get=="function"?r([n.get]):typeof a=="function"?function(s){return a(s==null?s:i(s))}:!1,Z3}var Y3,GT;function oU(){if(GT)return Y3;GT=1;var r=iU(),e=aU(),t=kX();return Y3=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,Y3}var Q3,WT;function qX(){if(WT)return Q3;WT=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=W0();return Q3=t.call(r,e),Q3}var J3,ZT;function uU(){if(ZT)return J3;ZT=1;var r,e=tU(),t=wX(),n=_X(),i=EX(),a=xX(),o=rU(),s=K0(),c=AX(),l=SX(),d=MX(),h=TX(),y=RX(),m=OX(),b=CX(),v=BX(),E=Function,x=function(ve){try{return E('"use strict"; return ('+ve+").constructor;")()}catch{}},D=G0(),N=Tb(),B=function(){throw new s},k=D?(function(){try{return arguments.callee,B}catch{try{return D(arguments,"callee").get}catch{return B}}})():B,F=DX()(),T=oU(),z=aU(),Z=iU(),Y=RA(),W=TA(),M={},C=typeof Uint8Array>"u"||!T?r:T(Uint8Array),R={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":F&&T?T([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":E,"%GeneratorFunction%":M,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":F&&T?T(T([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!F||!T?r:T(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":D,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":i,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!F||!T?r:T(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":F&&T?T(""[Symbol.iterator]()):r,"%Symbol%":F?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":k,"%TypedArray%":C,"%TypeError%":s,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":c,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":W,"%Function.prototype.apply%":Y,"%Object.defineProperty%":N,"%Object.getPrototypeOf%":z,"%Math.abs%":l,"%Math.floor%":d,"%Math.max%":h,"%Math.min%":y,"%Math.pow%":m,"%Math.round%":b,"%Math.sign%":v,"%Reflect.getPrototypeOf%":Z};if(T)try{null.error}catch(ve){var S=T(T(ve));R["%Error.prototype%"]=S}var _=function ve(we){var De;if(we==="%AsyncFunction%")De=x("async function () {}");else if(we==="%GeneratorFunction%")De=x("function* () {}");else if(we==="%AsyncGeneratorFunction%")De=x("async function* () {}");else if(we==="%AsyncGenerator%"){var Te=ve("%AsyncGeneratorFunction%");Te&&(De=Te.prototype)}else if(we==="%AsyncIteratorPrototype%"){var Se=ve("%AsyncGenerator%");Se&&T&&(De=T(Se.prototype))}return R[we]=De,De},U={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},H=W0(),V=qX(),P=H.call(W,Array.prototype.concat),$=H.call(Y,Array.prototype.splice),te=H.call(W,String.prototype.replace),ae=H.call(W,String.prototype.slice),ce=H.call(W,RegExp.prototype.exec),fe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,oe=/\\(\\)?/g,ye=function(we){var De=ae(we,0,1),Te=ae(we,-1);if(De==="%"&&Te!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(Te==="%"&&De!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var Se=[];return te(we,fe,function(Le,$e,ie,L){Se[Se.length]=ie?te(L,oe,"$1"):$e||Le}),Se},me=function(we,De){var Te=we,Se;if(V(U,Te)&&(Se=U[Te],Te="%"+Se[0]+"%"),V(R,Te)){var Le=R[Te];if(Le===M&&(Le=_(Te)),typeof Le>"u"&&!De)throw new s("intrinsic "+we+" exists, but is not available. Please file an issue!");return{alias:Se,name:Te,value:Le}}throw new o("intrinsic "+we+" does not exist!")};return J3=function(we,De){if(typeof we!="string"||we.length===0)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof De!="boolean")throw new s('"allowMissing" argument must be a boolean');if(ce(/^%?[^%]*%?$/,we)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Te=ye(we),Se=Te.length>0?Te[0]:"",Le=me("%"+Se+"%",De),$e=Le.name,ie=Le.value,L=!1,j=Le.alias;j&&(Se=j[0],$(Te,P([0,1],j)));for(var X=1,ue=!0;X<Te.length;X+=1){var le=Te[X],de=ae(le,0,1),Be=ae(le,-1);if((de==='"'||de==="'"||de==="`"||Be==='"'||Be==="'"||Be==="`")&&de!==Be)throw new o("property names with quotes must have matching quotes");if((le==="constructor"||!ue)&&(L=!0),Se+="."+le,$e="%"+Se+"%",V(R,$e))ie=R[$e];else if(ie!=null){if(!(le in ie)){if(!De)throw new s("base intrinsic for "+we+" exists, but the property is not available.");return}if(D&&X+1>=Te.length){var Me=D(ie,le);ue=!!Me,ue&&"get"in Me&&!("originalValue"in Me.get)?ie=Me.get:ie=ie[le]}else ue=V(ie,le),ie=ie[le];ue&&!L&&(R[$e]=ie)}}return ie},J3}var X3,YT;function cU(){if(YT)return X3;YT=1;var r=uU(),e=OA(),t=e([r("%String.prototype.indexOf%")]);return X3=function(i,a){var o=r(i,!!a);return typeof o=="function"&&t(i,".prototype.")>-1?e([o]):o},X3}var eE,QT;function LX(){if(QT)return eE;QT=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(D){D!==n&&(e=null)}else e=null;var i=/^\s*class\b/,a=function(N){try{var B=r.call(N);return i.test(B)}catch{return!1}},o=function(N){try{return a(N)?!1:(r.call(N),!0)}catch{return!1}},s=Object.prototype.toString,c="[object Object]",l="[object Function]",d="[object GeneratorFunction]",h="[object HTMLAllCollection]",y="[object HTML document.all class]",m="[object HTMLCollection]",b=typeof Symbol=="function"&&!!Symbol.toStringTag,v=!(0 in[,]),E=function(){return!1};if(typeof document=="object"){var x=document.all;s.call(x)===s.call(document.all)&&(E=function(N){if((v||!N)&&(typeof N>"u"||typeof N=="object"))try{var B=s.call(N);return(B===h||B===y||B===m||B===c)&&N("")==null}catch{}return!1})}return eE=e?function(N){if(E(N))return!0;if(!N||typeof N!="function"&&typeof N!="object")return!1;try{e(N,null,t)}catch(B){if(B!==n)return!1}return!a(N)&&o(N)}:function(N){if(E(N))return!0;if(!N||typeof N!="function"&&typeof N!="object")return!1;if(b)return o(N);if(a(N))return!1;var B=s.call(N);return B!==l&&B!==d&&!/^\[object HTML/.test(B)?!1:o(N)},eE}var tE,JT;function jX(){if(JT)return tE;JT=1;var r=LX(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(c,l,d){for(var h=0,y=c.length;h<y;h++)t.call(c,h)&&(d==null?l(c[h],h,c):l.call(d,c[h],h,c))},i=function(c,l,d){for(var h=0,y=c.length;h<y;h++)d==null?l(c.charAt(h),h,c):l.call(d,c.charAt(h),h,c)},a=function(c,l,d){for(var h in c)t.call(c,h)&&(d==null?l(c[h],h,c):l.call(d,c[h],h,c))};function o(s){return e.call(s)==="[object Array]"}return tE=function(c,l,d){if(!r(l))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=d),o(c)?n(c,l,h):typeof c=="string"?i(c,l,h):a(c,l,h)},tE}var rE,XT;function $X(){return XT||(XT=1,rE=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),rE}var nE,eR;function FX(){if(eR)return nE;eR=1;var r=$X(),e=globalThis;return nE=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},nE}var iE={exports:{}},aE,tR;function zX(){if(tR)return aE;tR=1;var r=Tb(),e=rU(),t=K0(),n=G0();return aE=function(a,o,s){if(!a||typeof a!="object"&&typeof a!="function")throw new t("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,y=!!n&&n(a,o);if(r)r(a,o,{configurable:d===null&&y?y.configurable:!d,enumerable:c===null&&y?y.enumerable:!c,value:s,writable:l===null&&y?y.writable:!l});else if(h||!c&&!l&&!d)a[o]=s;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},aE}var sE,rR;function VX(){if(rR)return sE;rR=1;var r=Tb(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},sE=e,sE}var oE,nR;function HX(){if(nR)return oE;nR=1;var r=uU(),e=zX(),t=VX()(),n=G0(),i=K0(),a=r("%Math.floor%");return oE=function(s,c){if(typeof s!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||a(c)!==c)throw new i("`length` must be a positive 32-bit integer");var l=arguments.length>2&&!!arguments[2],d=!0,h=!0;if("length"in s&&n){var y=n(s,"length");y&&!y.configurable&&(d=!1),y&&!y.writable&&(h=!1)}return(d||h||!l)&&(t?e(s,"length",c,!0,!0):e(s,"length",c)),s},oE}var uE,iR;function KX(){if(iR)return uE;iR=1;var r=W0(),e=RA(),t=sU();return uE=function(){return t(r,e,arguments)},uE}var aR;function GX(){return aR||(aR=1,(function(r){var e=HX(),t=Tb(),n=OA(),i=KX();r.exports=function(o){var s=n(arguments),c=o.length-(arguments.length-1);return e(s,1+(c>0?c:0),!0)},t?t(r.exports,"apply",{value:i}):r.exports.apply=i})(iE)),iE.exports}var cE,sR;function WX(){if(sR)return cE;sR=1;var r=nU();return cE=function(){return r()&&!!Symbol.toStringTag},cE}var lE,oR;function ZX(){if(oR)return lE;oR=1;var r=jX(),e=FX(),t=GX(),n=cU(),i=G0(),a=oU(),o=n("Object.prototype.toString"),s=WX()(),c=globalThis,l=e(),d=n("String.prototype.slice"),h=n("Array.prototype.indexOf",!0)||function(E,x){for(var D=0;D<E.length;D+=1)if(E[D]===x)return D;return-1},y={__proto__:null};s&&i&&a?r(l,function(v){var E=new c[v];if(Symbol.toStringTag in E&&a){var x=a(E),D=i(x,Symbol.toStringTag);if(!D&&x){var N=a(x);D=i(N,Symbol.toStringTag)}y["$"+v]=t(D.get)}}):r(l,function(v){var E=new c[v],x=E.slice||E.set;x&&(y["$"+v]=t(x))});var m=function(E){var x=!1;return r(y,function(D,N){if(!x)try{"$"+D(E)===N&&(x=d(N,1))}catch{}}),x},b=function(E){var x=!1;return r(y,function(D,N){if(!x)try{D(E),x=d(N,1)}catch{}}),x};return lE=function(E){if(!E||typeof E!="object")return!1;if(!s){var x=d(o(E),8,-1);return h(l,x)>-1?x:x!=="Object"?!1:b(E)}return i?m(E):null},lE}var fE,uR;function YX(){if(uR)return fE;uR=1;var r=ZX();return fE=function(t){return!!r(t)},fE}var dE,cR;function QX(){if(cR)return dE;cR=1;var r=K0(),e=cU(),t=e("TypedArray.prototype.buffer",!0),n=YX();return dE=t||function(a){if(!n(a))throw new r("Not a Typed Array");return a.buffer},dE}var hE,lR;function JX(){if(lR)return hE;lR=1;var r=_c().Buffer,e=bX(),t=QX(),n=ArrayBuffer.isView||function(c){try{return t(c),!0}catch{return!1}},i=typeof Uint8Array<"u",a=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o=a&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);return hE=function(c,l){if(r.isBuffer(c))return c.constructor&&!("isBuffer"in c)?r.from(c):c;if(typeof c=="string")return r.from(c,l);if(a&&n(c)){if(c.byteLength===0)return r.alloc(0);if(o){var d=r.from(c.buffer,c.byteOffset,c.byteLength);if(d.byteLength===c.byteLength)return d}var h=c instanceof Uint8Array?c:new Uint8Array(c.buffer,c.byteOffset,c.byteLength),y=r.from(h);if(y.length===c.byteLength)return y}if(i&&c instanceof Uint8Array)return r.from(c);var m=e(c);if(m)for(var b=0;b<c.length;b+=1){var v=c[b];if(typeof v!="number"||v<0||v>255||~~v!==v)throw new RangeError("Array items must be numbers in the range 0-255.")}if(m||r.isBuffer(c)&&c.constructor&&typeof c.constructor.isBuffer=="function"&&c.constructor.isBuffer(c))return r.from(c);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},hE}var pE,fR;function Xd(){if(fR)return pE;fR=1;var r=_c().Buffer,e=JX();function t(n,i){this._block=r.alloc(n),this._finalSize=i,this._blockSize=n,this._len=0}return t.prototype.update=function(n,i){n=e(n,i||"utf8");for(var a=this._block,o=this._blockSize,s=n.length,c=this._len,l=0;l<s;){for(var d=c%o,h=Math.min(s-l,o-d),y=0;y<h;y++)a[d+y]=n[l+y];c+=h,l+=h,c%o===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var o=(a&4294967295)>>>0,s=(a-o)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(o,this._blockSize-4)}this._update(this._block);var c=this._hash();return n?c.toString(n):c},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},pE=t,pE}var yE,dR;function XX(){if(dR)return yE;dR=1;var r=Ws(),e=Xd(),t=_c().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function a(){this.init(),this._w=i,e.call(this,64,56)}r(a,e),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(l){return l<<5|l>>>27}function s(l){return l<<30|l>>>2}function c(l,d,h,y){return l===0?d&h|~d&y:l===2?d&h|d&y|h&y:d^h^y}return a.prototype._update=function(l){for(var d=this._w,h=this._a|0,y=this._b|0,m=this._c|0,b=this._d|0,v=this._e|0,E=0;E<16;++E)d[E]=l.readInt32BE(E*4);for(;E<80;++E)d[E]=d[E-3]^d[E-8]^d[E-14]^d[E-16];for(var x=0;x<80;++x){var D=~~(x/20),N=o(h)+c(D,y,m,b)+v+d[x]+n[D]|0;v=b,b=m,m=s(y),y=h,h=N}this._a=h+this._a|0,this._b=y+this._b|0,this._c=m+this._c|0,this._d=b+this._d|0,this._e=v+this._e|0},a.prototype._hash=function(){var l=t.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},yE=a,yE}var mE,hR;function eee(){if(hR)return mE;hR=1;var r=Ws(),e=Xd(),t=_c().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],i=new Array(80);function a(){this.init(),this._w=i,e.call(this,64,56)}r(a,e),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(d){return d<<1|d>>>31}function s(d){return d<<5|d>>>27}function c(d){return d<<30|d>>>2}function l(d,h,y,m){return d===0?h&y|~h&m:d===2?h&y|h&m|y&m:h^y^m}return a.prototype._update=function(d){for(var h=this._w,y=this._a|0,m=this._b|0,b=this._c|0,v=this._d|0,E=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var D=0;D<80;++D){var N=~~(D/20),B=s(y)+l(N,m,b,v)+E+h[D]+n[N]|0;E=v,v=b,b=c(m),m=y,y=B}this._a=y+this._a|0,this._b=m+this._b|0,this._c=b+this._c|0,this._d=v+this._d|0,this._e=E+this._e|0},a.prototype._hash=function(){var d=t.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},mE=a,mE}var gE,pR;function lU(){if(pR)return gE;pR=1;var r=Ws(),e=Xd(),t=_c().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=new Array(64);function a(){this.init(),this._w=i,e.call(this,64,56)}r(a,e),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function o(y,m,b){return b^y&(m^b)}function s(y,m,b){return y&m|b&(y|m)}function c(y){return(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10)}function l(y){return(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7)}function d(y){return(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3}function h(y){return(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10}return a.prototype._update=function(y){for(var m=this._w,b=this._a|0,v=this._b|0,E=this._c|0,x=this._d|0,D=this._e|0,N=this._f|0,B=this._g|0,k=this._h|0,F=0;F<16;++F)m[F]=y.readInt32BE(F*4);for(;F<64;++F)m[F]=h(m[F-2])+m[F-7]+d(m[F-15])+m[F-16]|0;for(var T=0;T<64;++T){var z=k+l(D)+o(D,N,B)+n[T]+m[T]|0,Z=c(b)+s(b,v,E)|0;k=B,B=N,N=D,D=x+z|0,x=E,E=v,v=b,b=z+Z|0}this._a=b+this._a|0,this._b=v+this._b|0,this._c=E+this._c|0,this._d=x+this._d|0,this._e=D+this._e|0,this._f=N+this._f|0,this._g=B+this._g|0,this._h=k+this._h|0},a.prototype._hash=function(){var y=t.allocUnsafe(32);return y.writeInt32BE(this._a,0),y.writeInt32BE(this._b,4),y.writeInt32BE(this._c,8),y.writeInt32BE(this._d,12),y.writeInt32BE(this._e,16),y.writeInt32BE(this._f,20),y.writeInt32BE(this._g,24),y.writeInt32BE(this._h,28),y},gE=a,gE}var vE,yR;function tee(){if(yR)return vE;yR=1;var r=Ws(),e=lU(),t=Xd(),n=_c().Buffer,i=new Array(64);function a(){this.init(),this._w=i,t.call(this,64,56)}return r(a,e),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var o=n.allocUnsafe(28);return o.writeInt32BE(this._a,0),o.writeInt32BE(this._b,4),o.writeInt32BE(this._c,8),o.writeInt32BE(this._d,12),o.writeInt32BE(this._e,16),o.writeInt32BE(this._f,20),o.writeInt32BE(this._g,24),o},vE=a,vE}var bE,mR;function fU(){if(mR)return bE;mR=1;var r=Ws(),e=Xd(),t=_c().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],i=new Array(160);function a(){this.init(),this._w=i,e.call(this,128,112)}r(a,e),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function o(v,E,x){return x^v&(E^x)}function s(v,E,x){return v&E|x&(v|E)}function c(v,E){return(v>>>28|E<<4)^(E>>>2|v<<30)^(E>>>7|v<<25)}function l(v,E){return(v>>>14|E<<18)^(v>>>18|E<<14)^(E>>>9|v<<23)}function d(v,E){return(v>>>1|E<<31)^(v>>>8|E<<24)^v>>>7}function h(v,E){return(v>>>1|E<<31)^(v>>>8|E<<24)^(v>>>7|E<<25)}function y(v,E){return(v>>>19|E<<13)^(E>>>29|v<<3)^v>>>6}function m(v,E){return(v>>>19|E<<13)^(E>>>29|v<<3)^(v>>>6|E<<26)}function b(v,E){return v>>>0<E>>>0?1:0}return a.prototype._update=function(v){for(var E=this._w,x=this._ah|0,D=this._bh|0,N=this._ch|0,B=this._dh|0,k=this._eh|0,F=this._fh|0,T=this._gh|0,z=this._hh|0,Z=this._al|0,Y=this._bl|0,W=this._cl|0,M=this._dl|0,C=this._el|0,R=this._fl|0,S=this._gl|0,_=this._hl|0,U=0;U<32;U+=2)E[U]=v.readInt32BE(U*4),E[U+1]=v.readInt32BE(U*4+4);for(;U<160;U+=2){var H=E[U-30],V=E[U-30+1],P=d(H,V),$=h(V,H);H=E[U-4],V=E[U-4+1];var te=y(H,V),ae=m(V,H),ce=E[U-14],fe=E[U-14+1],oe=E[U-32],ye=E[U-32+1],me=$+fe|0,ve=P+ce+b(me,$)|0;me=me+ae|0,ve=ve+te+b(me,ae)|0,me=me+ye|0,ve=ve+oe+b(me,ye)|0,E[U]=ve,E[U+1]=me}for(var we=0;we<160;we+=2){ve=E[we],me=E[we+1];var De=s(x,D,N),Te=s(Z,Y,W),Se=c(x,Z),Le=c(Z,x),$e=l(k,C),ie=l(C,k),L=n[we],j=n[we+1],X=o(k,F,T),ue=o(C,R,S),le=_+ie|0,de=z+$e+b(le,_)|0;le=le+ue|0,de=de+X+b(le,ue)|0,le=le+j|0,de=de+L+b(le,j)|0,le=le+me|0,de=de+ve+b(le,me)|0;var Be=Le+Te|0,Me=Se+De+b(Be,Le)|0;z=T,_=S,T=F,S=R,F=k,R=C,C=M+le|0,k=B+de+b(C,M)|0,B=N,M=W,N=D,W=Y,D=x,Y=Z,Z=le+Be|0,x=de+Me+b(Z,le)|0}this._al=this._al+Z|0,this._bl=this._bl+Y|0,this._cl=this._cl+W|0,this._dl=this._dl+M|0,this._el=this._el+C|0,this._fl=this._fl+R|0,this._gl=this._gl+S|0,this._hl=this._hl+_|0,this._ah=this._ah+x+b(this._al,Z)|0,this._bh=this._bh+D+b(this._bl,Y)|0,this._ch=this._ch+N+b(this._cl,W)|0,this._dh=this._dh+B+b(this._dl,M)|0,this._eh=this._eh+k+b(this._el,C)|0,this._fh=this._fh+F+b(this._fl,R)|0,this._gh=this._gh+T+b(this._gl,S)|0,this._hh=this._hh+z+b(this._hl,_)|0},a.prototype._hash=function(){var v=t.allocUnsafe(64);function E(x,D,N){v.writeInt32BE(x,N),v.writeInt32BE(D,N+4)}return E(this._ah,this._al,0),E(this._bh,this._bl,8),E(this._ch,this._cl,16),E(this._dh,this._dl,24),E(this._eh,this._el,32),E(this._fh,this._fl,40),E(this._gh,this._gl,48),E(this._hh,this._hl,56),v},bE=a,bE}var wE,gR;function ree(){if(gR)return wE;gR=1;var r=Ws(),e=fU(),t=Xd(),n=_c().Buffer,i=new Array(160);function a(){this.init(),this._w=i,t.call(this,128,112)}return r(a,e),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var o=n.allocUnsafe(48);function s(c,l,d){o.writeInt32BE(c,d),o.writeInt32BE(l,d+4)}return s(this._ah,this._al,0),s(this._bh,this._bl,8),s(this._ch,this._cl,16),s(this._dh,this._dl,24),s(this._eh,this._el,32),s(this._fh,this._fl,40),o},wE=a,wE}var vR;function nee(){return vR||(vR=1,(function(r){r.exports=function(t){var n=t.toLowerCase(),i=r.exports[n];if(!i)throw new Error(n+" is not supported (we accept pull requests)");return new i},r.exports.sha=XX(),r.exports.sha1=eee(),r.exports.sha224=tee(),r.exports.sha256=lU(),r.exports.sha384=ree(),r.exports.sha512=fU()})(m3)),m3.exports}var iee=nee();const dU=Zo(iee);function aee(r,e={}){const{segmentLength:t=4,separator:n="__",termLength:i=2}=e;return r.split(n).reduce((s,c)=>{const l=c.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),d=l.length>1?i:t,h=l.map(y=>y.substr(0,d)).join("");return s.push(h),s},[]).join(n)}function see(r,e={}){const t=dU("sha1");t.update(r,"utf8");const n=t.digest("hex");return e.length?n.slice(0,e.length):n}let oee=class{static isGreaterOrEqual(e,t){if(!e)return!1;const n=bR(e),i=bR(t);for(let a=0;a<n.length&&a<i.length;a++){if(n[a]>i[a])return!0;if(n[a]<i[a])return!1}return!0}};function bR(r){return r.split(".").map(e=>parseInt(e,10))}let it=class{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return oee.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){const i=t&&t.joiner?t.joiner:"_",a=n.length===1?n[0]:n.join(i);if(e&&e>0&&a.length>e){if(t&&t.shorten===!0){const o=aee(a);if(o.length<e)return o}return see(a,{length:e})}return a}static buildColumnAlias({maxAliasLength:e},t,...n){return typeof t=="string"?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),a=i.indexOf("/"),o=a!==-1?i.substr(0,a):i;let s=a!==-1?i.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=o.lastIndexOf("@"),l=o.substr(0,c),d=o.substr(c+1);let h=l,y="";const m=l.indexOf(":");m!==-1&&(h=l.substr(0,m),y=l.substr(m+1));const[b,v]=d.split(":");return{type:t,host:b,username:decodeURIComponent(h),password:decodeURIComponent(y),port:v?parseInt(v):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),a=i.indexOf("/"),o=a!==-1?i.substr(0,a):i;let s=a!==-1?i.substr(a+1):void 0,c="",l,d,h,y;const m={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const k=c.split("&");let F,T;k.forEach(z=>{F=z.split("=")[0],T=z.split("=")[1],m[F]=T}),y=m.replicaSet,s=s.substr(0,s.indexOf("?"))}const b=o.lastIndexOf("@"),v=o.substr(0,b),E=o.substr(b+1);let x=v,D="";const N=v.indexOf(":");N!==-1&&(x=v.substr(0,N),D=v.substr(N+1)),y?h=E:[l,d]=E.split(":");const B={type:t,host:l,hostReplicaSet:h,username:decodeURIComponent(x),password:decodeURIComponent(D),port:d?parseInt(d):void 0,database:s||void 0};for(const[k,F]of Object.entries(m))B[k]=F;return B}},hU=class{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,n&&Pr.assign(this,n)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){const e=()=>{for(const t of this.queryExpressionMap.selects)if(t.selection===this.alias.name||this.metadata&&this.metadata.columns.find(n=>t.selection===this.alias.name+"."+n.propertyPath))return!0;return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Us.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Us.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){const e=()=>{if(!Us.isAliasProperty(this.entityOrProperty))return;const t=this.queryExpressionMap.findAliasByName(this.parentAlias);let n=t.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(n||t.metadata.parentEntityMetadata&&(n=t.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),n))return n;throw new rt(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new rt("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new rt("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?it.buildAlias(this.connection.driver,void 0,e,this.alias.name):it.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}},CA=class{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,Pr.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new rt(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}},NA=class{constructor(e,t){this.expressionMap=e,Pr.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),i=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!i)throw new rt(`Relation with property path ${t} in entity was not found.`);return i}get metadata(){if(!Us.isAliasProperty(this.relationName))throw new rt("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}},uee=class pU{constructor(e){this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=e.options?.timeTravelQueries||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&typeof e.target=="function"&&(t=e.target.name),!t&&typeof e.target=="string"&&(t=e.target);const n=new dT;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find(n=>n.name===e);if(!t)throw new rt(`"${e}" alias was not found. Maybe you forgot to join it?`);return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new rt("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new rt(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return e}clone(){const e=new pU(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map(t=>t),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(t=>e.aliases.push(new dT(t))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map(t=>new hU(this.connection,this,t)),e.relationIdAttributes=this.relationIdAttributes.map(t=>new CA(this,t)),e.relationCountAttributes=this.relationCountAttributes.map(t=>new NA(this,t)),e.wheres=this.wheres.map(t=>({...t})),e.havings=this.havings.map(t=>({...t})),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map(t=>t),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map(t=>({alias:t.alias,queryBuilder:typeof t.queryBuilder=="string"?t.queryBuilder:t.queryBuilder.clone(),options:t.options})),e}},wR=class{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}},a8=class{static transformFrom(e,t){return Array.isArray(e)?e.slice().reverse().reduce((i,a)=>a.from(i),t):e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce((n,i)=>i.to(n),t):e.to(t)}},Pv=class yU{constructor(e,t,n=!0,i=!1,a,o){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=i,this._getSql=a,this._objectLiteralParameters=o}get useParameter(){return dr.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return dr.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return dr.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return dr.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(dr.isFindOperator(this._value))return this._value}get getSql(){return dr.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof yU?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(t=>e&&a8.transformTo(e,t)):a8.transformTo(e,this._value)}};function cee(r){return new Pv("in",r,!0,!0)}const lee=/[.*+\-?^${}()|[\]\\]/g,fee=r=>r.replace(lee,"\\$&");let oa=class Oo{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,dr.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new uee(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}static registerQueryBuilderClass(e,t){Oo.queryBuilderRegistry[e]=t}get alias(){if(!this.expressionMap.mainAlias)throw new rt("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){return this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map(n=>({selection:n})):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]),dr.isSelectQueryBuilder(this)?this:Oo.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",dr.isInsertQueryBuilder(this)?this:Oo.queryBuilderRegistry.InsertQueryBuilder(this)}update(e,t){const n=t||e;if(e=dr.isEntitySchema(e)?e.options.name:e,typeof e=="function"||typeof e=="string"){const i=this.createFromAlias(e);this.expressionMap.setMainAlias(i)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=n,dr.isUpdateQueryBuilder(this)?this:Oo.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",dr.isDeleteQueryBuilder(this)?this:Oo.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",dr.isSoftDeleteQueryBuilder(this)?this:Oo.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",dr.isSoftDeleteQueryBuilder(this)?this:Oo.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(e,t){const n=arguments.length===2?e:void 0,i=arguments.length===2?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=i,n){const a=this.createFromAlias(n);this.expressionMap.setMainAlias(a)}return dr.isRelationQueryBuilder(this)?this:Oo.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every(a=>!!n.findRelationWithPropertyPath(a))}hasParameter(e){return this.parentQueryBuilder?.hasParameter(e)||e in this.expressionMap.parameters}setParameter(e,t){if(typeof t=="function")throw new rt(`Function parameter isn't supported in the parameters. Please check "${e}" parameter.`);if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new rt("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do t=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(t));return this.setParameter(t,e),`:${t}`}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach(t=>{this.expressionMap.nativeParameters[t]=e[t]}),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter(i=>i.discriminatorColumn).map(i=>i.discriminatorValue);n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(e){return new this.constructor(this.connection,e??this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map(t=>t===""?t:this.escape(t)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new rt('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}else{if(typeof e=="string"){const a=e.substr(0,1)==="("&&e.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:t,tablePath:a?void 0:e,subQuery:a?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const i=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:i})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const o=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";t[o]||(t[o]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(t[o][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const d=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;t[o][d]=l.databaseName}}for(const s of a.metadata.columns)t[o][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)t[o][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)t[o][s.propertyPath]=s.databaseName}const n=Object.keys(t),i=n.map(a=>fee(a)).join("|");return n.length>0&&(e=e.replace(new RegExp(`([ =(]|^.{0})${i?"("+i+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let o,s,c;if(i){if(o=a[0],s=a[1],c=a[3],t[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(t[a[2]][c])}`}else if(o=a[0],s=a[1],c=a[2],t[""][c])return`${s}${this.escape(t[""][c])}`;return o})),e}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&t!=="1=1"&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&i.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.deleteDateColumn.propertyName:i.deleteDateColumn.propertyName,o=`${this.replacePropertyNames(a)} IS NULL`;e.push(o)}if(i.discriminatorColumn&&i.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.discriminatorColumn.databaseName:i.discriminatorColumn.databaseName,o=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;e.push(o)}}if(this.expressionMap.extraAppendedAndWhereCondition){const i=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(i)}let n="";return n+=this.createTimeTravelQuery(),e.length?e.length===1?n+=` WHERE ${e[0]}`:n+=` WHERE ( ${e.join(" ) AND ( ")} )`:n+="",n}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter(i=>t.indexOf(i)===-1)),t.length){let i=t.map(a=>{const o=this.escape(a.databaseName);return n.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+o:this.escape(this.getMainTableName())+"."+o:o}).join(", ");return n.options.type==="oracle"&&(i+=" INTO "+t.map(a=>this.createParameter({type:n.columnTypeToNativeParameter(a.type),dir:n.oracle.BIND_OUT})).join(", ")),n.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(i+=" INTO @OutputTable"),i}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))}),e}createWhereClausesExpression(e){return e.map((t,n)=>{const i=this.createWhereConditionExpression(t.condition);switch(t.type){case"and":return(n>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(n>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`}return i}).join(" ").trim()}createWhereConditionExpression(e,t=!1){if(typeof e=="string")return e;if(Array.isArray(e))return e.length===0?"1=1":e.length===1&&!t?this.createWhereClausesExpression(e):"("+this.createWhereClausesExpression(e)+")";const{driver:n}=this.connection;switch(e.operator){case"lessThan":return`${e.parameters[0]} < ${e.parameters[1]}`;case"lessThanOrEqual":return`${e.parameters[0]} <= ${e.parameters[1]}`;case"arrayContains":return`${e.parameters[0]} @> ${e.parameters[1]}`;case"jsonContains":return`${e.parameters[0]} ::jsonb @> ${e.parameters[1]}`;case"arrayContainedBy":return`${e.parameters[0]} <@ ${e.parameters[1]}`;case"arrayOverlap":return`${e.parameters[0]} && ${e.parameters[1]}`;case"moreThan":return`${e.parameters[0]} > ${e.parameters[1]}`;case"moreThanOrEqual":return`${e.parameters[0]} >= ${e.parameters[1]}`;case"notEqual":return`${e.parameters[0]} != ${e.parameters[1]}`;case"equal":return`${e.parameters[0]} = ${e.parameters[1]}`;case"ilike":return n.options.type==="postgres"||n.options.type==="cockroachdb"?`${e.parameters[0]} ILIKE ${e.parameters[1]}`:`UPPER(${e.parameters[0]}) LIKE UPPER(${e.parameters[1]})`;case"like":return`${e.parameters[0]} LIKE ${e.parameters[1]}`;case"between":return`${e.parameters[0]} BETWEEN ${e.parameters[1]} AND ${e.parameters[2]}`;case"in":return e.parameters.length<=1?"0=1":`${e.parameters[0]} IN (${e.parameters.slice(1).join(", ")})`;case"any":return n.options.type==="cockroachdb"?`${e.parameters[0]}::STRING = ANY(${e.parameters[1]}::STRING[])`:`${e.parameters[0]} = ANY(${e.parameters[1]})`;case"isNull":return`${e.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(e.condition)})`;case"brackets":return`${this.createWhereConditionExpression(e.condition,!0)}`;case"and":return"("+e.parameters.join(" AND ")+")";case"or":return"("+e.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${Pv.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{let i=typeof n.queryBuilder=="string"?n.queryBuilder:"";if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new rt(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(i=n.queryBuilder.getQuery(),!this.connection.driver.cteCapabilities.writable&&!dr.isSelectQueryBuilder(n.queryBuilder))throw new rt(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let a=this.escape(n.alias);if(n.options.columnNames){const c=n.options.columnNames.map(l=>this.escape(l));if(dr.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new rt(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);a+=`(${c.join(", ")})`}const o=n.options.recursive&&e?"RECURSIVE":"";let s="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(s=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[o,a,"AS",s,`(${i})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map(i=>t.ensureEntityIdMap(i));if(!t.hasMultiplePrimaryKeys){const i=t.primaryColumns[0];if(!i.transformer&&!i.relationMetadata&&!i.embeddedMetadata)return{[i.propertyName]:cee(n.map(a=>i.getEntityValue(a,!1)))}}return new wR(i=>{for(const a of n)i.orWhere(new wR(o=>o.where(a)))})}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${t.getQuery()})`,t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],i=e.split(".");for(;i.length>1;){const s=i[0];if(!t?.hasMetadata)break;if(t.metadata.hasEmbeddedWithPropertyPath(s)){i.unshift(`${i.shift()}.${i.shift()}`);continue}if(t.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!c?.alias){const l=n.length>0?`${n.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}t=c.alias,n.push(...s.split(".")),i.shift();continue}break}if(!t)throw new Error(`Cannot find alias for property ${e}`);const a=i.join("."),o=t.metadata.findColumnsWithPropertyPath(a);if(!o.length)throw new Wu(e,t.metadata);return[t,n,o]}createPropertyPath(e,t,n=""){const i=[];for(const a of Object.keys(t)){const o=n?`${n}.${a}`:a;if(t[a]===null||typeof t[a]!="object"||dr.isFindOperator(t[a])){i.push(o);continue}if(e.hasEmbeddedWithPropertyPath(o)){const s=this.createPropertyPath(e,t[a],o);i.push(...s);continue}if(e.hasRelationWithPropertyPath(o)){const s=e.findRelationWithPropertyPath(o);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const h=s.joinColumns.map(m=>m.referencedColumn).filter(m=>!!m);if(h.length>0&&h.every(m=>m.getEntityValue(t[a],!1))){i.push(o);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${o}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(h=>h.getEntityValue(t[a],!1))){const h=c.map(y=>`${o}.${y.propertyPath}`);i.push(...h);continue}const d=this.createPropertyPath(s.inverseEntityMetadata,t[a]).map(h=>`${o}.${h}`);i.push(...d);continue}i.push(o)}return i}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[i,a,o]=this.findColumnsForPropertyPath(n);for(const s of o){let c=e;for(const h of a){if(!c||!(h in c)){c={};break}c=c[h]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${i.name}.${s.propertyPath}`:s.propertyPath,d=s.getEntityValue(c,!0);yield[l,d]}}}else for(const t of Object.keys(e)){const n=e[t];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${t}`:t,n]}}getWherePredicateCondition(e,t){if(dr.isFindOperator(t)){const n=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const i of t.value)n.push(this.createParameter(i));else n.push(this.createParameter(t.value));if(t.type==="raw")return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if(t.type==="not")return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...n]};if(t.type==="and"){const i=t.value;return{operator:t.type,parameters:i.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,a)))}}else if(t.type==="or"){const i=t.value;return{operator:t.type,parameters:i.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,a)))}}else return{operator:t.type,parameters:[e,...n]}}else return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if(typeof e=="string")return e;if(dr.isBrackets(e)){const i=this.createQueryBuilder();return i.parentQueryBuilder=this,i.expressionMap.mainAlias=this.expressionMap.mainAlias,i.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,i.expressionMap.parameters=this.expressionMap.parameters,i.expressionMap.nativeParameters=this.expressionMap.nativeParameters,i.expressionMap.wheres=[],e.whereFactory(i),{operator:dr.isNotBrackets(e)?"not":"brackets",condition:i.expressionMap.wheres}}if(typeof e=="function")return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const i of t){const a=[];for(const[o,s]of this.getPredicates(i))a.push({type:"and",condition:this.getWherePredicateCondition(o,s)});n.push({type:"or",condition:a})}return n.length===1?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}};oa.queryBuilderRegistry={};let dee=class{static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}},hee=class extends oa{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await n.query(e,t,!0),o=dee.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),i&&await n.commitTransaction(),o}catch(a){if(i)try{await n.rollbackTransaction()}catch{}throw a}finally{n!==this.queryRunner&&await n.release()}}from(e,t){e=dr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new Mb;return this.expressionMap.returning=e,this}createDeleteExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createWhereExpression(),n=this.createReturningExpression("delete");return n===""?`DELETE FROM ${e}${t}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${e} OUTPUT ${n}${t}`:`DELETE FROM ${e}${t} RETURNING ${n}`}};const kn=[];for(let r=0;r<256;++r)kn.push((r+256).toString(16).slice(1));function pee(r,e=0){return(kn[r[e+0]]+kn[r[e+1]]+kn[r[e+2]]+kn[r[e+3]]+"-"+kn[r[e+4]]+kn[r[e+5]]+"-"+kn[r[e+6]]+kn[r[e+7]]+"-"+kn[r[e+8]]+kn[r[e+9]]+"-"+kn[r[e+10]]+kn[r[e+11]]+kn[r[e+12]]+kn[r[e+13]]+kn[r[e+14]]+kn[r[e+15]]).toLowerCase()}let _E;const yee=new Uint8Array(16);function mee(){if(!_E){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");_E=crypto.getRandomValues.bind(crypto)}return _E(yee)}const gee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_R={randomUUID:gee};function vee(r,e,t){if(_R.randomUUID&&!r)return _R.randomUUID();r=r||{};const n=r.random??r.rng?.()??mee();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,pee(n)}let ER=class{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}},xR=class{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.raw,t}},BA=class{constructor(e,t){this.queryRunner=e,this.expressionMap=t}async update(e,t){const n=this.expressionMap.mainAlias.metadata;await Promise.all(t.map(async(i,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce((c,l,d)=>(c[this.expressionMap.extraReturningColumns[d].databaseName]=l[0],c),{}));const o=Array.isArray(e.raw)?e.raw[a]:e.raw,s=this.queryRunner.connection.driver.createGeneratedMap(n,o);s&&(this.queryRunner.manager.merge(n.target,i,s),e.generatedMaps.push(s))}else{const o=this.expressionMap.extraReturningColumns;if(o.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(i);if(!s)throw new rt("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(l=>n.targetName+"."+l.propertyPath)).addSelect(o.map(l=>n.targetName+"."+l.propertyPath)).from(n.target,n.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(n.target,i,c),e.generatedMaps.push(c))}}}))}async insert(e,t){const n=this.expressionMap.mainAlias.metadata;let i=n.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");i=i.filter(s=>s.isGenerated?a===!0:!0);const o=t.map((s,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce((h,y,m)=>(h[this.expressionMap.extraReturningColumns[m].databaseName]=y[0],h),{}));const l=Array.isArray(e.raw)?e.raw[c]:e.raw,d=this.queryRunner.connection.driver.createGeneratedMap(n,l,c,t.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(n.target,d,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(n.target,s,d),d});if(i.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=t.map(l=>{const d=n.getEntityIdMap(l);if(!d)throw new rt("Cannot update entity because entity id is not set in the entity.");return d}),c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(l=>n.targetName+"."+l.propertyPath)).addSelect(i.map(l=>n.targetName+"."+l.propertyPath)).from(n.target,n.targetName).where(s).setOption("create-pojo").getMany();t.forEach((l,d)=>{this.queryRunner.manager.merge(n.target,o[d],c[d]),this.queryRunner.manager.merge(n.target,l,c[d])})}t.forEach((s,c)=>{const l=n.getEntityIdMap(s);e.identifiers.push(l),e.generatedMaps.push(o[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion||e.isDeleteDate)}},bee=class extends oa{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.getValueSets();if(e.length===0)return new xR;const t=this.obtainQueryRunner();let n=!1;try{if(this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const b=new ER;e.forEach(v=>{t.broadcaster.broadcastBeforeInsertEvent(b,this.expressionMap.mainAlias.metadata,v)}),await b.wait()}let i=null,a=null;const o=new BA(t,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const b of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(b));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(e.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(b=>!s.includes(b)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(i=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),h=[i,c,a].filter(b=>b!=null).join(`;

`),y=await t.query(h,l,!0),m=xR.from(y);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await o.insert(m,e),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const b=new ER;e.forEach(v=>{t.broadcaster.broadcastAfterInsertEvent(b,this.expressionMap.mainAlias.metadata,v)}),await b.wait()}return n&&await t.commitTransaction(),m}catch(i){if(n)try{await t.rollbackTransaction()}catch{}throw i}finally{t!==this.queryRunner&&await t.release()}}into(e,t){e=dr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e);return this.expressionMap.setMainAlias(n),this.expressionMap.insertColumns=t||[],this}values(e){return this.expressionMap.valuesSet=e,this}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new Mb;return this.expressionMap.returning=e,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}onConflict(e){return this.expressionMap.onConflict=e,this}orIgnore(e=!0){return this.expressionMap.onIgnore=!!e,this}orUpdate(e,t,n){return Array.isArray(e)?(this.expressionMap.onUpdate={overwrite:e,conflict:t,skipUpdateIfNoValuesChanged:n?.skipUpdateIfNoValuesChanged,indexPredicate:n?.indexPredicate,upsertType:n?.upsertType},this):(this.expressionMap.onUpdate={conflict:e?.conflict_target,columns:e?.columns,overwrite:e?.overwrite,skipUpdateIfNoValuesChanged:n?.skipUpdateIfNoValuesChanged,upsertType:n?.upsertType},this)}createInsertExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createValuesExpression(),n=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),i=this.createColumnNamesExpression();let a="INSERT ";if(this.expressionMap.onUpdate?.upsertType==="primary-key"&&(a="UPSERT "),(it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${e}`,this.alias!==this.getMainTableName()&&it.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),i?a+=`(${i})`:!t&&(it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),n&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${n}`),t?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${t}`:a+=` VALUES ${t}`:it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",this.expressionMap.onUpdate?.upsertType!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:o,columns:s,conflict:c,skipUpdateIfNoValuesChanged:l,indexPredicate:d}=this.expressionMap.onUpdate;let h="ON CONFLICT";if(Array.isArray(c)){if(h+=` ( ${c.map(m=>this.escape(m)).join(", ")} )`,d&&!it.isPostgresFamily(this.connection.driver))throw new rt("indexPredicate option is not supported by the current database driver");d&&it.isPostgresFamily(this.connection.driver)&&(h+=` WHERE ( ${d} )`)}else c&&(h+=` ON CONSTRAINT ${this.escape(c)}`);const y=[];Array.isArray(o)?y.push(...o.map(m=>`${this.escape(m)} = EXCLUDED.${this.escape(m)}`)):s&&y.push(...s.map(m=>`${this.escape(m)} = :${m}`)),y.length>0&&(a+=` ${h} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(m=>m.isUpdateDate&&!o?.includes(m.databaseName)&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||it.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(m=>`${this.escape(m.databaseName)} = DEFAULT`)),a+=y.join(", ")),Array.isArray(o)&&l&&it.isPostgresFamily(this.connection.driver)&&(a+=" WHERE (",a+=o.map(m=>`${this.escape(this.alias)}.${this.escape(m)} IS DISTINCT FROM EXCLUDED.${this.escape(m)}`).join(" OR "),a+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:o,columns:s}=this.expressionMap.onUpdate;Array.isArray(o)?(a+=" ON DUPLICATE KEY UPDATE ",a+=o.map(c=>`${this.escape(c)} = VALUES(${this.escape(c)})`).join(", "),a+=" "):Array.isArray(s)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=s.map(c=>`${this.escape(c)} = :${c}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new rt("onUpdate is not supported by the current database driver")}return n&&(it.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||it.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${n}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(o=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(o.propertyPath)!==-1:o.isInsert).some(o=>this.isOverridingAutoIncrementBehavior(o))&&(a=`SET IDENTITY_INSERT ${e} ON; ${a}; SET IDENTITY_INSERT ${e} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(e=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(e.propertyPath)!==-1:!(!e.isInsert||e.isGenerated&&e.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!it.isSQLiteFamily(this.connection.driver)&&!it.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(e)))):[]}createColumnNamesExpression(){const e=this.getInsertedColumns();if(e.length>0)return e.map(t=>this.escape(t.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const t=this.getValueSets();if(t.length===1)return Object.keys(t[0]).map(n=>this.escape(n)).join(", ")}return this.expressionMap.insertColumns.map(t=>this.escape(t)).join(", ")}createValuesExpression(){const e=this.getValueSets(),t=this.getInsertedColumns();if(t.length>0){let n="";return e.forEach((i,a)=>{t.forEach((o,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&e.length>1||this.connection.driver.options.type==="sap"&&e.length>1?n+=" SELECT ":n+="(");let c=o.getEntityValue(i);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,o)),o.isVersion&&c===void 0)n+="1";else if(o.isDiscriminator)n+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(o.isGenerated&&o.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=vee(),n+=this.createParameter(c),a in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[a]={}),o.setEntityValue(this.expressionMap.locallyGenerated[a],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&e.length>1||it.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?o.default!==void 0&&o.default!==null?n+=this.connection.driver.normalizeDefault(o):n+="NULL":n+="DEFAULT";else if(c===null&&(this.connection.driver.options.type==="spanner"||this.connection.driver.options.type==="oracle"))n+="NULL";else if(typeof c=="function")n+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(o,c));const l=this.createParameter(c);if((it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(o.type)!==-1){const h=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";o.srid!=null?n+=`${h}(${l}, ${o.srid})`:n+=`${h}(${l})`}else it.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(o.type)!==-1?o.srid!=null?n+=`ST_SetSRID(ST_GeomFromGeoJSON(${l}), ${o.srid})::${o.type}`:n+=`ST_GeomFromGeoJSON(${l})::${o.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(o.type)!==-1?n+=o.type+"::STGeomFromText("+l+", "+(o.srid||"0")+")":n+=l}s===t.length-1?a===e.length-1?this.connection.driver.options.type==="oracle"&&e.length>1?n+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&e.length>1?n+=" FROM dummy ":n+=")":this.connection.driver.options.type==="oracle"&&e.length>1?n+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&e.length>1?n+=" FROM dummy UNION ALL ":n+="), ":n+=", "})}),n==="()"?"":n}else{let n="";return e.forEach((i,a)=>{Object.keys(i).forEach((s,c)=>{c===0&&(n+="(");const l=i[s];typeof l=="function"?n+=l():l===void 0?this.connection.driver.options.type==="oracle"&&e.length>1||it.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?n+="NULL":n+="DEFAULT":l===null&&this.connection.driver.options.type==="spanner"||(n+=this.createParameter(l)),c===Object.keys(i).length-1?a===e.length-1?n+=")":n+="), ":n+=", "})}),n==="()"?"":n}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(Pr.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new pX}isOverridingAutoIncrementBehavior(e){return e.isPrimary&&e.isGenerated&&e.generationStrategy==="increment"&&this.getValueSets().some(t=>e.getEntityValue(t)!==void 0&&e.getEntityValue(t)!==null)}},AR=class{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async update(e){const t=this.expressionMap.relationMetadata;if(t.isManyToOne||t.isOneToOneOwner){const n=t.joinColumns.reduce((i,a)=>{const o=Pr.isObject(e)?a.referencedColumn.getEntityValue(e):e;return a.setEntityValue(i,o),i},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(t.entityMetadata.target).set(n).whereInIds(this.expressionMap.of).execute()}else if((t.isOneToOneNotOwner||t.isOneToMany)&&e===null){const n={};t.inverseRelation.joinColumns.forEach(c=>{n[c.propertyName]=null});const i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},o=[];i.forEach((c,l)=>{t.inverseRelation.joinColumns.map((d,h)=>{const y="joinColumn_"+l+"_"+h;a[y]=Pr.isObject(c)?d.referencedColumn.getEntityValue(c):c,o.push(`${d.propertyPath} = :${y}`)})});const s=o.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(n).where(s).setParameters(a).execute()}else if(t.isOneToOneNotOwner||t.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new rt("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const n=this.expressionMap.of,i=t.inverseRelation.joinColumns.reduce((a,o)=>{const s=Pr.isObject(n)?o.referencedColumn.getEntityValue(n):n;return o.setEntityValue(a,s),a},{});if(!e||Array.isArray(e)&&!e.length)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(i).whereInIds(e).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(e)?e:[e],o=t.isManyToManyOwner?i:a,s=t.isManyToManyOwner?a:i,c=[];if(o.forEach(l=>{s.forEach(d=>{const h={};n.ownerColumns.forEach(y=>{h[y.databaseName]=Pr.isObject(l)?y.referencedColumn.getEntityValue(l):l}),n.inverseColumns.forEach(y=>{h[y.databaseName]=Pr.isObject(d)?y.referencedColumn.getEntityValue(d):d}),c.push(h)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(c).execute()}}},wee=class{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async remove(e){const t=this.expressionMap.relationMetadata;if(t.isOneToMany){const n=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(e)?e:[e],a={};t.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const o={},s=[];n.forEach((l,d)=>{s.push(...i.map((h,y)=>[...t.inverseRelation.joinColumns.map((m,b)=>{const v="joinColumn_"+d+"_"+y+"_"+b;return o[v]=Pr.isObject(l)?m.referencedColumn.getEntityValue(l):l,`${m.propertyPath} = :${v}`}),...t.inverseRelation.entityMetadata.primaryColumns.map((m,b)=>{const v="primaryColumn_"+y+"_"+y+"_"+b;return o[v]=Pr.isObject(h)?m.getEntityValue(h):h,`${m.propertyPath} = :${v}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(a).where(c).setParameters(o).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(e)?e:[e],o=t.isManyToManyOwner?i:a,s=t.isManyToManyOwner?a:i,c={},l=[];o.forEach((h,y)=>{l.push(...s.map((m,b)=>[...n.ownerColumns.map((v,E)=>{const x="firstValue_"+y+"_"+b+"_"+E;return c[x]=Pr.isObject(h)?v.referencedColumn.getEntityValue(h):h,`${v.databaseName} = :${x}`}),...n.inverseColumns.map((v,E)=>{const x="secondValue_"+y+"_"+b+"_"+E;return c[x]=Pr.isObject(m)?v.referencedColumn.getEntityValue(m):m,`${v.databaseName} = :${x}`})].join(" AND ")))});const d=l.map(h=>"("+h+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(n.tableName).where(d).setParameters(c).execute()}}},_ee=class extends oa{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(e){return this.expressionMap.of=e,this}async set(e){const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new rt("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToMany||t.isOneToMany)throw new rt(`Set operation is only supported for many-to-one and one-to-one relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .add() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!Pr.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new rt('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new AR(this,this.expressionMap).update(e)}async add(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new rt("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new rt(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!Pr.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new rt('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new AR(this,this.expressionMap).update(e)}async remove(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new rt("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new rt(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set(null) method instead.`);return new wee(this,this.expressionMap).remove(e)}async addAndRemove(e,t){await this.remove(t),await this.add(e)}async loadOne(){return this.loadMany().then(e=>e[0])}async loadMany(){let e=this.expressionMap.of;if(!Pr.isObject(e)){const t=this.expressionMap.mainAlias.metadata;if(t.hasMultiplePrimaryKeys)throw new rt("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");e=t.primaryColumns[0].createValueMap(e)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,e,this.queryRunner)}},Ui=class s8{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),(n,i)=>e.slice(i*t,i*t+t))}static splitClassesAndStrings(e){return[e.filter(t=>typeof t!="string"),e.filter(t=>typeof t=="string")]}static groupBy(e,t){return e.reduce((n,i)=>{const a=t(i);let o=n.find(s=>s.id===a);return o||(o={id:a,items:[]},n.push(o)),o.items.push(i),n},[])}static uniq(e,t){return e.reduce((n,i)=>{let a=!1;if(typeof t=="function"){const o=t(i);a=!!n.find(s=>t(s)===o)}else typeof t=="string"?a=!!n.find(o=>o[t]===i[t]):a=n.indexOf(i)!==-1;return a||n.push(i),n},[])}static isPlainObject(e){return e==null?!1:!e.constructor||e.constructor===Object}static mergeArrayKey(e,t,n,i){if(i.has(n)){e[t]=i.get(n);return}if(!(n instanceof Promise)){if(!this.isPlainObject(n)&&!Array.isArray(n)){e[t]=n;return}e[t]||(e[t]=Array.isArray(n)?[]:{}),i.set(n,e[t]),this.merge(e[t],n,i),i.delete(n)}}static mergeObjectKey(e,t,n,i){if(i.has(n)){Object.assign(e,{[t]:i.get(n)});return}if(!(n instanceof Promise)){if(!this.isPlainObject(n)&&!Array.isArray(n)){Object.assign(e,{[t]:n});return}e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),i.set(n,e[t]),this.merge(e[t],n,i),i.delete(n)}}static merge(e,t,n=new Map){if(this.isPlainObject(e)&&this.isPlainObject(t))for(const i of Object.keys(t))i!=="__proto__"&&this.mergeObjectKey(e,i,t[i],n);if(Array.isArray(e)&&Array.isArray(t))for(let i=0;i<t.length;i++)this.mergeArrayKey(e,i,t[i],n)}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)s8.merge(e,n);return e}static deepCompare(...e){let t,n,i,a;if(arguments.length<1)return!0;for(t=1,n=arguments.length;t<n;t++)if(i=[],a=[],!this.compare2Objects(i,a,arguments[0],arguments[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let i=0,a=n.length;i<a;i++)e=e[n[i]];return e}static replaceEmptyObjectsWithBooleans(e){for(const t in e)e[t]&&typeof e[t]=="object"&&(Object.keys(e[t]).length===0?e[t]=!0:this.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){const t={};for(const n of e){const i=n.split(".");if(!i.length)continue;(!t[i[0]]||t[i[0]]===!0)&&(t[i[0]]={});let a=t[i[0]];for(const[o,s]of i.entries())o!==0&&(a[s]?a=a[s]:o===i.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return this.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return e==null||t===void 0||t===null?!1:(typeof e.id=="string"&&typeof t.id=="string"||typeof e.id=="number"&&typeof t.id=="number")&&Object.keys(e).length===1&&Object.keys(t).length===1?e.id===t.id:s8.deepCompare(e,t)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e==="true"||e==="1":typeof e=="number"?e>0:!1}static zipObject(e,t){return e.reduce((n,i,a)=>(n[i]=t[a],n),{})}static isArraysEqual(e,t){return e.length!==t.length?!1:e.every(n=>t.indexOf(n)!==-1)}static areMutuallyExclusive(...e){return!e.some(n=>{const i=e.filter(a=>a!==n);return n.some(a=>i.some(o=>o.includes(a)))})}static parseSqlCheckExpression(e,t){const n=e.match(new RegExp(`"${t}" varchar CHECK\\s*\\(\\s*"${t}"\\s+IN\\s*`));if(n&&n.index){const a=e.substring(n.index+n[0].length);let o="",s="";const c=[];for(let l=0;l<a.length;l++){const d=a[l];switch(d){case",":o==""?(c.push(s),s=""):s+=d;break;case"'":o==d?a[l+1]===d?(s+=d,l+=1):o="":o=d;break;case")":if(o=="")return c.push(s),c;s+=d;break;default:o!=""&&(s+=d)}}}}static compare2Objects(e,t,n,i){let a;if(Number.isNaN(n)&&Number.isNaN(i)||n===i)return!0;if(n===null||i===null||n===void 0||i===void 0)return!1;if((typeof n.equals=="function"||typeof n.equals=="function")&&n.equals(i))return!0;if(typeof n=="function"&&typeof i=="function"||n instanceof Date&&i instanceof Date||n instanceof RegExp&&i instanceof RegExp||typeof n=="string"&&typeof i=="string"||typeof n=="number"&&typeof i=="number")return n.toString()===i.toString();if(!(typeof n=="object"&&typeof i=="object")||Object.prototype.isPrototypeOf.call(n,i)||Object.prototype.isPrototypeOf.call(i,n)||n.constructor!==i.constructor||n.prototype!==i.prototype||e.indexOf(n)>-1||t.indexOf(i)>-1)return!1;for(a in i){if(i.hasOwnProperty(a)!==n.hasOwnProperty(a))return!1;if(typeof i[a]!=typeof n[a])return!1}for(a in n){if(i.hasOwnProperty(a)!==n.hasOwnProperty(a))return!1;if(typeof i[a]!=typeof n[a])return!1;switch(typeof n[a]){case"object":case"function":if(e.push(n),t.push(i),!this.compare2Objects(e,t,n[a],i[a]))return!1;e.pop(),t.pop();break;default:if(n[a]!==i[a])return!1;break}}return!0}},Eee=class{constructor(e,t,n,i,a){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=i,this.queryRunner=a,this.pojo=this.expressionMap.options.includes("create-pojo"),this.selections=new Set(this.expressionMap.selects.map(o=>o.selection)),this.aliasCache=new Map,this.columnsCache=new Map}transform(e,t){const n=this.group(e,t),i=[];for(const a of n.values()){const o=this.transformRawResultsGroup(a,t);o!==void 0&&i.push(o)}return i}buildAlias(e,t){let n=this.aliasCache.get(e);n||(n=new Map,this.aliasCache.set(e,n));let i=n.get(t);return i||(i=it.buildAlias(this.driver,void 0,e,t),n.set(t,i)),i}group(e,t){const n=new Map,i=[];t.metadata.tableType==="view"?i.push(...t.metadata.columns.map(a=>this.buildAlias(t.name,a.databaseName))):i.push(...t.metadata.primaryColumns.map(a=>this.buildAlias(t.name,a.databaseName)));for(const a of e){const o=i.map(c=>{const l=a[c];return Buffer.isBuffer(l)?l.toString("hex"):Pr.isObject(l)?JSON.stringify(l):l}).join("_"),s=n.get(o);s?s.push(a):n.set(o,[a])}return n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const d=e.map(y=>y[this.buildAlias(t.name,t.metadata.discriminatorColumn.databaseName)]),h=n.childEntityMetadatas.find(y=>typeof d.find(m=>m===y.discriminatorValue)<"u");h&&(n=h)}const i=n.create(this.queryRunner,{fromDeserializer:!0,pojo:this.pojo}),a=this.transformColumns(e,t,i,n),o=this.transformJoins(e,i,t,n),s=this.transformRelationIds(e,t,i,n),c=this.transformRelationCounts(e,t,i);if(a||n.primaryColumns.every(d=>d.isVirtual===!0)&&(o||s||c))return i}transformColumns(e,t,n,i){let a=!1;const o=e[0];for(const[s,c]of this.getColumnsToProcess(t.name,i)){const l=o[s];l!==void 0&&(l!==null&&!c.isVirtualProperty&&(a=!0),c.setEntityValue(n,this.driver.prepareHydratedValue(l,c)))}return a}transformJoins(e,t,n,i){let a=!1;for(const o of this.expressionMap.joinAttributes){if(!o.metadata||!o.isSelected||o.relation&&!i.relations.find(c=>c===o.relation))continue;if(o.mapToProperty){if(o.mapToPropertyParentAlias!==n.name)continue}else if(!o.relation||o.parentAlias!==n.name||o.relationPropertyPath!==o.relation.propertyPath)continue;let s=this.transform(e,o.alias);s=o.isMany?s:s[0],s=!o.isMany&&s===void 0?null:s,s!==void 0&&(o.mapToPropertyPropertyName?t[o.mapToPropertyPropertyName]=s:o.relation.setEntityValue(t,s),a=!0)}return a}transformRelationIds(e,t,n,i){let a=!1;for(const[o,s]of this.rawRelationIdResults.entries()){if(s.relationIdAttribute.parentAlias!==t.name)continue;const c=s.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,s.relationIdAttribute.parentAlias,e);if(l==null)continue;this.prepareDataForTransformRelationIds();const d=this.hashEntityIds(c,l),h=this.relationIdMaps[o][d]||[],y=s.relationIdAttribute.mapToPropertyPropertyPath.split("."),m=(b,v,E)=>{const x=b.shift();if(x&&b.length===0)return v[x]=E,v;if(x&&b.length>0)m(b,v[x],E);else return v};c.isOneToOne||c.isManyToOne?h[0]!==void 0&&(m(y,n,h[0]),a=!0):(m(y,n,h),a=a||h.length>0)}return a}transformRelationCounts(e,t,n){let i=!1;for(const a of this.rawRelationCountResults){if(a.relationCountAttribute.parentAlias!==t.name)continue;const o=a.relationCountAttribute.relation;let s;o.isOneToMany?s=o.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=o.isOwning?o.joinColumns[0].referencedColumn.databaseName:o.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=e[0][this.buildAlias(t.name,s)];if(c!=null){n[a.relationCountAttribute.mapToPropertyPropertyName]=0;for(const l of a.results)l.parentId===c&&(n[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),i=!0)}}return i}getColumnsToProcess(e,t){let n=this.columnsCache.get(e);n||(n=new Map,this.columnsCache.set(e,n));let i=n.get(t);return i||(i=t.columns.filter(a=>!a.isVirtual&&(this.selections.has(e)||this.selections.has(`${e}.${a.propertyPath}`))&&!t.childEntityMetadatas.some(o=>o.target===a.target)).map(a=>[this.buildAlias(e,a.databaseName),a]),n.set(t,i)),i}createValueMapFromJoinColumns(e,t,n){let i;return e.isManyToOne||e.isOneToOneOwner?i=e.entityMetadata.primaryColumns.map(a=>a):e.isOneToMany||e.isOneToOneNotOwner?i=e.inverseRelation.joinColumns.map(a=>a):e.isOwning?i=e.joinColumns.map(a=>a):i=e.inverseRelation.inverseJoinColumns.map(a=>a),i.reduce((a,o)=>{for(const s of n)e.isManyToOne||e.isOneToOneOwner?a[o.databaseName]=this.driver.prepareHydratedValue(s[this.buildAlias(t,o.databaseName)],o):a[o.databaseName]=this.driver.prepareHydratedValue(s[this.buildAlias(t,o.referencedColumn.databaseName)],o.referencedColumn);return a},{})}extractEntityPrimaryIds(e,t){let n;return e.isManyToOne||e.isOneToOneOwner?n=e.entityMetadata.primaryColumns.map(i=>i):e.isOneToMany||e.isOneToOneNotOwner?n=e.inverseRelation.joinColumns.map(i=>i):e.isOwning?n=e.joinColumns.map(i=>i):n=e.inverseRelation.inverseJoinColumns.map(i=>i),n.reduce((i,a)=>(i[a.databaseName]=t[a.databaseName],i),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(e=>{const t=e.relationIdAttribute.relation;let n;return t.isManyToOne||t.isOneToOneOwner?n=t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?n=t.inverseEntityMetadata.primaryColumns:t.isOwning?n=t.inverseJoinColumns:n=t.inverseRelation.joinColumns,e.results.reduce((i,a)=>{let o=n.reduce((s,c)=>{let l=a[c.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Ui.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Ui.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(n.length===1&&!e.relationIdAttribute.disableMixedMap&&(t.isOneToMany||t.isOneToOneNotOwner?o=n[0].getEntityValue(o):o=n[0].referencedColumn.getEntityValue(o)),o!==void 0){const s=this.hashEntityIds(t,a);i[s]?i[s].push(o):i[s]=[o]}return i},{})}))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}},xee=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new rt("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const i={},a=e.map(o=>{const s={},c=[];n.relation.joinColumns.forEach(d=>{s[d.databaseName]=this.connection.driver.prepareHydratedValue(o[it.buildAlias(this.connection.driver,void 0,n.parentAlias,d.databaseName)],d.referencedColumn);const h=`${d.databaseName}:${s[d.databaseName]}`;c.indexOf(h)===-1&&c.push(h)}),n.relation.entityMetadata.primaryColumns.forEach(d=>{s[d.databaseName]=this.connection.driver.prepareHydratedValue(o[it.buildAlias(this.connection.driver,void 0,n.parentAlias,d.databaseName)],d);const h=`${d.databaseName}:${s[d.databaseName]}`;c.indexOf(h)===-1&&c.push(h)}),c.sort();const l=c.join("::");return i[l]?null:(i[l]=!0,s)}).filter(o=>o);return{relationIdAttribute:n,results:a}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const i=n.relation,a=i.isOwning?i.joinColumns:i.inverseRelation.joinColumns,o=i.inverseEntityMetadata.target,s=i.inverseEntityMetadata.tableName,c=n.alias||s,l={},d={},h=e.map((v,E)=>{const x=[],D={},N=a.map(k=>{const F=k.databaseName+E,T=v[it.buildAlias(this.connection.driver,void 0,n.parentAlias,k.referencedColumn.databaseName)],z=`${c}:${k.propertyPath}:${T}`;return x.indexOf(z)!==-1?"":(x.push(z),D[F]=T,c+"."+k.propertyPath+" = :"+F)}).filter(k=>k).join(" AND ");x.sort();const B=x.join("::");return l[B]?"":(l[B]=!0,Object.assign(d,D),N)}).filter(v=>v).map(v=>"("+v+")").join(" OR ");if(!h)return{relationIdAttribute:n,results:[]};const y=this.connection.createQueryBuilder(this.queryRunner);Ui.uniq([...a,...i.inverseRelation.entityMetadata.primaryColumns],v=>v.propertyPath).forEach(v=>{y.addSelect(c+"."+v.propertyPath,v.databaseName)}),y.from(o,c).where("("+h+")").setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(y);const b=await y.getRawMany();return b.forEach(v=>{a.forEach(E=>{v[E.databaseName]=this.connection.driver.prepareHydratedValue(v[E.databaseName],E.referencedColumn)}),i.inverseRelation.entityMetadata.primaryColumns.forEach(E=>{v[E.databaseName]=this.connection.driver.prepareHydratedValue(v[E.databaseName],E)})}),{relationIdAttribute:n,results:b}}else{const i=n.relation,a=i.isOwning?i.joinColumns:i.inverseRelation.inverseJoinColumns,o=i.isOwning?i.inverseJoinColumns:i.inverseRelation.joinColumns,s=n.junctionAlias,c=n.joinInverseSideMetadata.tableName,l=n.alias||c,d=i.isOwning?i.junctionEntityMetadata.tableName:i.inverseRelation.junctionEntityMetadata.tableName,h=e.map(N=>a.reduce((B,k)=>(B[k.propertyPath]=N[it.buildAlias(this.connection.driver,void 0,n.parentAlias,k.referencedColumn.databaseName)],B),{}));if(h.length===0)return{relationIdAttribute:n,results:[]};const y={},m={},b=h.map((N,B)=>{const k=[],F={},T=Object.keys(N).map(Z=>{const Y=Z+B,W=N[Z],M=`${s}:${Z}:${W}`;return k.indexOf(M)!==-1?"":(k.push(M),F[Y]=W,s+"."+Z+" = :"+Y)}).filter(Z=>Z).join(" AND ");k.sort();const z=k.join("::");return m[z]?"":(m[z]=!0,Object.assign(y,F),T)}).filter(N=>N),v=o.map(N=>s+"."+N.propertyPath+" = "+l+"."+N.referencedColumn.propertyPath).join(" AND "),E=b.map(N=>"("+N+" AND "+v+")").join(" OR "),x=this.connection.createQueryBuilder(this.queryRunner);o.forEach(N=>{x.addSelect(s+"."+N.propertyPath,N.databaseName).addOrderBy(s+"."+N.propertyPath)}),a.forEach(N=>{x.addSelect(s+"."+N.propertyPath,N.databaseName).addOrderBy(s+"."+N.propertyPath)}),x.from(c,l).innerJoin(d,s,E).setParameters(y),n.queryBuilderFactory&&n.queryBuilderFactory(x);const D=await x.getRawMany();return D.forEach(N=>{[...a,...o].forEach(B=>{N[B.databaseName]=this.connection.driver.prepareHydratedValue(N[B.databaseName],B.referencedColumn)})}),{relationIdAttribute:n,results:D}}});return Promise.all(t)}},Aee=class{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,n){const i=Array.isArray(t)?t:[t],a=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,i,a):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,i,a):this.loadForOneToManyAndOneToOneNotOwner(e,i,a)}async loadManyToManyRelationIdsAndGroup(e,t,n,i){const a=e.isManyToMany||e.isOneToMany,o=Array.isArray(t)?t:[t];if(!n&&(n=await this.connection.relationLoader.load(e,t,this.queryRunner,i),!n.length))return o.map(h=>({entity:h,related:a?[]:void 0}));const s=await this.load(e,t,n),c=Array.isArray(n)?n:[n];let l=[],d=[];return e.isManyToManyOwner?(l=e.junctionEntityMetadata.inverseColumns.map(h=>h.referencedColumn),d=e.junctionEntityMetadata.ownerColumns.map(h=>h.referencedColumn)):e.isManyToManyNotOwner?(l=e.junctionEntityMetadata.ownerColumns.map(h=>h.referencedColumn),d=e.junctionEntityMetadata.inverseColumns.map(h=>h.referencedColumn)):e.isManyToOne||e.isOneToOneOwner?(l=e.joinColumns.map(h=>h.referencedColumn),d=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(l=e.inverseRelation.entityMetadata.primaryColumns,d=e.inverseRelation.joinColumns.map(h=>h.referencedColumn)),o.map(h=>{const y={entity:h,related:a?[]:void 0},m=s.filter(b=>d.every(v=>v.compareEntityValue(h,b[v.entityMetadata.name+"_"+v.propertyAliasName])));return m.length&&c.forEach(b=>{m.forEach(v=>{l.every(x=>x.compareEntityValue(b,v[it.buildAlias(this.connection.driver,void 0,x.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+x.propertyPath.replace(".","_"))]))&&(a?y.related.push(b):y.related=b)})}),y})}loadForManyToMany(e,t,n){const i=e.junctionEntityMetadata,a=i.name,o=e.isOwning?i.ownerColumns:i.inverseColumns,s=e.isOwning?i.inverseColumns:i.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);o.forEach(y=>{const m=it.buildAlias(this.connection.driver,void 0,y.referencedColumn.entityMetadata.name+"_"+y.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+y.propertyPath,m)}),s.forEach(y=>{const m=it.buildAlias(this.connection.driver,void 0,y.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+y.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+y.propertyPath,m)});let l="";if(o.length===1){const y=t.map(b=>o[0].referencedColumn.getEntityValue(b));y.every(b=>typeof b=="number")?l=`${a}.${o[0].propertyPath} IN (${y.join(", ")})`:(c.setParameter("values1",y),l=a+"."+o[0].propertyPath+" IN (:...values1)")}else l="("+t.map((y,m)=>o.map(b=>{const v="entity1_"+m+"_"+b.propertyName;return c.setParameter(v,b.referencedColumn.getEntityValue(y)),a+"."+b.propertyPath+" = :"+v}).join(" AND ")).map(y=>"("+y+")").join(" OR ")+")";let d="";if(n)if(s.length===1){const y=n.map(b=>s[0].referencedColumn.getEntityValue(b));y.every(b=>typeof b=="number")?d=`${a}.${s[0].propertyPath} IN (${y.join(", ")})`:(c.setParameter("values2",y),d=a+"."+s[0].propertyPath+" IN (:...values2)")}else d="("+n.map((y,m)=>s.map(b=>{const v="entity2_"+m+"_"+b.propertyName;return c.setParameter(v,b.referencedColumn.getEntityValue(y)),a+"."+b.propertyPath+" = :"+v}).join(" AND ")).map(y=>"("+y+")").join(" OR ")+")";const h=[l,d].filter(y=>y.length>0).join(" AND ");return c.from(i.target,a).where(h).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const i=e.entityMetadata.targetName,a=e.joinColumns.every(c=>!!e.entityMetadata.nonVirtualColumns.find(l=>l===c));if(n&&a){const c=[];if(t.forEach(l=>{const d={};e.entityMetadata.primaryColumns.forEach(h=>{const y=h.entityMetadata.name+"_"+h.propertyPath.replace(".","_");d[y]=h.getEntityValue(l)}),n.forEach(h=>{e.joinColumns.forEach(y=>{const m=y.getEntityValue(l),b=y.referencedColumn.getEntityValue(h);if(!(m===void 0||b===void 0)&&m===b){const v=y.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+y.referencedColumn.propertyPath.replace(".","_");d[v]=b}})}),Object.keys(d).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&c.push(d)}),c.length===t.length)return Promise.resolve(c)}const o=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const l=it.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));o.addSelect(i+"."+c.propertyPath,l)}),e.joinColumns.forEach(c=>{const l=it.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));o.addSelect(i+"."+c.propertyPath,l)});let s="";if(e.entityMetadata.primaryColumns.length===1){const c=t.map(d=>e.entityMetadata.primaryColumns[0].getEntityValue(d));c.every(d=>typeof d=="number")?s=`${i}.${e.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(o.setParameter("values",c),s=i+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=t.map((c,l)=>e.entityMetadata.primaryColumns.map((d,h)=>{const y="entity"+l+"_"+h;return o.setParameter(y,d.getEntityValue(c)),i+"."+d.propertyPath+" = :"+y}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return o.from(e.entityMetadata.target,i).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){const i=e;if(e=e.inverseRelation,e.entityMetadata.primaryColumns.length===e.joinColumns.length&&e.entityMetadata.primaryColumns.every(l=>e.joinColumns.indexOf(l)!==-1))return Promise.resolve(t.map(l=>{const d={};return e.joinColumns.forEach(function(h){const y=h.referencedColumn.getEntityValue(l),m=h.referencedColumn.entityMetadata.name+"_"+h.referencedColumn.propertyPath.replace(".","_"),b=h.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+h.propertyPath.replace(".","_");d[m]=y,d[b]=y}),d}));const a=e.entityMetadata.targetName,o=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const l=it.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+c.propertyPath.replace(".","_"));o.addSelect(a+"."+c.propertyPath,l)}),e.joinColumns.forEach(c=>{const l=it.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+c.referencedColumn.propertyPath.replace(".","_"));o.addSelect(a+"."+c.propertyPath,l)});let s="";if(e.joinColumns.length===1){const c=t.map(d=>e.joinColumns[0].referencedColumn.getEntityValue(d));c.every(d=>typeof d=="number")?s=`${a}.${e.joinColumns[0].propertyPath} IN (${c.join(", ")})`:(o.setParameter("values",c),s=a+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else s=t.map((c,l)=>e.joinColumns.map((d,h)=>{const y="entity"+l+"_"+h;return o.setParameter(y,d.referencedColumn.getEntityValue(c)),a+"."+d.propertyPath+" = :"+y}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return o.from(e.entityMetadata.target,a).where(s).getRawMany()}},See=class{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)})})}metadataToAttribute(e,t){return new CA(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}},Mee=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(i,a,o)=>o.indexOf(i)===a,n=this.relationCountAttributes.map(async i=>{if(i.relation.isOneToMany){const a=i.relation,o=a.inverseRelation,s=o.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,d=i.alias||l,h=o.propertyName;let y=e.map(b=>b[i.parentAlias+"_"+s]).filter(b=>!!b);if(y=y.filter(t),y.length===0)return{relationCountAttribute:i,results:[]};const m=this.connection.createQueryBuilder(this.queryRunner);return m.select(d+"."+h,"parentId").addSelect("COUNT(*)","cnt").from(c,d).where(d+"."+h+" IN (:...ids)").addGroupBy(d+"."+h).setParameter("ids",y),i.queryBuilderFactory&&i.queryBuilderFactory(m),{relationCountAttribute:i,results:await m.getRawMany()}}else{let a,o,s,c;i.relation.isOwning?(a=i.relation.joinColumns[0].referencedColumn.databaseName,o=i.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=i.relation.junctionEntityMetadata.columns[0],c=i.relation.junctionEntityMetadata.columns[1]):(a=i.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,o=i.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=i.relation.junctionEntityMetadata.columns[1],c=i.relation.junctionEntityMetadata.columns[0]);let l=e.map(E=>E[i.parentAlias+"_"+a]).filter(E=>!!E);if(l=l.filter(t),l.length===0)return{relationCountAttribute:i,results:[]};const d=i.junctionAlias,h=i.joinInverseSideMetadata.tableName,y=i.alias||h,m=i.relation.junctionEntityMetadata.tableName,b=d+"."+s.propertyName+" IN ("+l.map(E=>isNaN(E)?"'"+E+"'":E)+") AND "+d+"."+c.propertyName+" = "+y+"."+o,v=this.connection.createQueryBuilder(this.queryRunner);return v.select(d+"."+s.propertyName,"parentId").addSelect("COUNT("+v.escape(y)+"."+v.escape(o)+")","cnt").from(h,y).innerJoin(m,d,b).addGroupBy(d+"."+s.propertyName),i.queryBuilderFactory&&i.queryBuilderFactory(v),{relationCountAttribute:i,results:await v.getRawMany()}}});return Promise.all(n)}},Tee=class{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)})})}metadataToAttribute(e,t){return new NA(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}},Ree=class mU{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||typeof t.select=="object"||typeof t.relations=="object"||typeof t.where=="object"||typeof t.join=="object"||typeof t.order=="object"||typeof t.cache=="object"||typeof t.cache=="boolean"||typeof t.cache=="number"||typeof t.comment=="string"||typeof t.lock=="object"||typeof t.loadRelationIds=="object"||typeof t.loadRelationIds=="boolean"||typeof t.loadEagerRelations=="boolean"||typeof t.withDeleted=="boolean"||typeof t.relationLoadStrategy=="string"||typeof t.transaction=="boolean")}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||typeof t.skip=="number"||typeof t.take=="number"||typeof t.skip=="string"||typeof t.take=="string")}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(t?.relations){const n=[...t.relations];if(mU.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new yX(n)}return e}static applyRelationsRecursively(e,t,n,i,a){let o=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");o=t.filter(c=>c.match(s)).map(c=>i.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else o=t.map(s=>i.findRelationWithPropertyPath(s)).filter(s=>s);o.forEach(s=>{const c=it.buildAlias(e.connection.driver,{joiner:"__"},n,s.propertyPath),l=n+"."+s.propertyPath;e.expressionMap.relationLoadStrategy==="query"?e.concatRelationMetadata(s):e.leftJoinAndSelect(l,c),t.splice(t.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let d,h;if(e.expressionMap.relationLoadStrategy==="query")d=s.inverseEntityMetadata,h=c;else{const y=e.expressionMap.joinAttributes.find(m=>m.entityOrProperty===l);d=y.metadata,h=y.alias.name}if(!h||!d)throw new Wu(s.propertyPath,i);if(this.applyRelationsRecursively(e,t,h,d,a?a+"."+s.propertyPath:s.propertyPath),e.expressionMap.relationLoadStrategy==="join"){const y=i.relations.find(m=>m.propertyName===s.propertyPath);y&&this.joinEagerRelations(e,c,y.inverseEntityMetadata)}})}static joinEagerRelations(e,t,n){n.eagerRelations.forEach(i=>{let a=it.buildAlias(e.connection.driver,{joiner:"__"},t,i.propertyName),o=!0;for(const l of e.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${t}.${i.propertyPath}`)){o=!1,a=l.alias.name;break}const s=!!e.expressionMap.joinAttributes.find(l=>l.alias.name===a);o&&!s&&e.leftJoin(t+"."+i.propertyPath,a);let c=!0;for(const l of e.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&e.addSelect(a),this.joinEagerRelations(e,a,i.inverseEntityMetadata)})}},Oee=class gU extends oa{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map(n=>({selection:n}));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map(n=>({selection:n})));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,i){return this.join("INNER",e,t,n,i),this}leftJoin(e,t,n,i){return this.join("LEFT",e,t,n,i),this}innerJoinAndSelect(e,t,n,i){return this.addSelect(t),this.innerJoin(e,t,n,i),this}leftJoinAndSelect(e,t,n,i){return this.addSelect(t),this.leftJoin(e,t,n,i),this}innerJoinAndMapMany(e,t,n,i,a){return this.addSelect(n),this.join("INNER",t,n,i,a,e,!0),this}innerJoinAndMapOne(e,t,n,i,a,o){return this.addSelect(n),this.join("INNER",t,n,i,a,e,!1,o),this}leftJoinAndMapMany(e,t,n,i,a){return this.addSelect(n),this.join("LEFT",t,n,i,a,e,!0),this}leftJoinAndMapOne(e,t,n,i,a,o){return this.addSelect(n),this.join("LEFT",t,n,i,a,e,!1,o),this}loadRelationIdAndMap(e,t,n,i){const a=new CA(this.expressionMap);return a.mapToProperty=e,a.relationName=t,typeof n=="string"&&(a.alias=n),typeof n=="object"&&n.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=i,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,i){const a=new NA(this.expressionMap);return a.mapToProperty=e,a.relationName=t,a.alias=n,a.queryBuilderFactory=i,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach(t=>{e!==void 0&&e.relations!==void 0&&e.relations.indexOf(t.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)}),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return e?this.expressionMap.groupBys=[e]:this.expressionMap.groupBys=[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return this.connection.driver.options.type==="cockroachdb"&&(e===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=e),this}orderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new rt('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new rt('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new rt('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new rt('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new rt('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new rt('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new rt('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new rt('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new np;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const i=n.updateDateColumn.getEntityValue(t);if(i.getTime()!==this.expressionMap.lockVersion.getTime())throw new fT(n.name,this.expressionMap.lockVersion,i)}else{const i=n.versionColumn.getEntityValue(t);if(i!==this.expressionMap.lockVersion)throw new fT(n.name,this.expressionMap.lockVersion,i)}}return t===void 0?null:t}async getOneOrFail(){const e=await this.getOne();if(!e)throw new lX(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new np;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new np;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new np;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new np;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;const i=this.expressionMap.cacheId;this.expressionMap.cacheId=i&&`${i}-count`;const a=await this.executeCountQuery(e),o=[n.entities,a];return t&&await e.commitTransaction(),o}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0);const a=()=>{if(n!==this.queryRunner)return n.release()},o=n.stream(e,t,a,a);return i&&await n.commitTransaction(),o}catch(a){if(i)try{await n.rollbackTransaction()}catch{}throw a}}cache(e,t){return typeof e=="boolean"?this.expressionMap.cache=e:typeof e=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):(typeof e=="string"||typeof e=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,i,a,o,s,c){a&&this.setParameters(a);const l=new hU(this.connection,this.expressionMap);l.direction=e,l.mapAsEntity=c,l.mapToProperty=o,l.isMappingMany=s,l.entityOrProperty=t,l.condition=i,this.expressionMap.joinAttributes.push(l);const d=l.metadata;if(d){if(d.deleteDateColumn&&!this.expressionMap.withDeleted){const h=`${n}.${d.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${h}`:`${h}`}l.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:d}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let h="";if(typeof t=="function"){const m=t(this.subQuery());this.setParameters(m.getParameters()),h=m.getQuery()}else h=t;const y=typeof t=="function"||t.substr(0,1)==="("&&t.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:y===!1?t:void 0,subQuery:y===!0?h:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new rt("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)e.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),t.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(l=>l.selection===s.alias.name)){e.push({selection:this.escape(s.alias.name)+".*"});const l=this.expressionMap.selects.find(d=>d.selection===s.alias.name);t.push(l)}}),this.expressionMap.selects.filter(s=>t.indexOf(s)===-1).forEach(s=>e.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),e.length===0&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&it.isMySQLFamily(this.connection.driver)&&(n=` USE INDEX (${this.expressionMap.useIndex})`);const i=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),o=e.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+o+" FROM "+i.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:i}=this.connection;let a="SELECT ";return n>0&&it.isMySQLFamily(i)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),it.isPostgresFamily(i)&&t.length>0?a=`SELECT DISTINCT ON (${t.map(s=>this.replacePropertyNames(s)).join(", ")}) `:e&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,i=t.tablePath,a=t.alias.name;let o=t.condition?" AND ("+t.condition+")":"";const s=t.parentAlias;if(!s||!n){const c=t.alias.subQuery?t.alias.subQuery:this.getTableName(i);return" "+t.direction+" JOIN "+c+" "+this.escape(a)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const c=n.joinColumns.map(l=>a+"."+l.referencedColumn.propertyPath+"="+s+"."+n.propertyPath+"."+l.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(a)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+o)}else if(n.isOneToMany||n.isOneToOneNotOwner){const c=n.inverseRelation.joinColumns.map(l=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(o+=" AND "+a+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),a+"."+n.inverseRelation.propertyPath+"."+l.referencedColumn.propertyPath+"="+s+"."+l.referencedColumn.propertyPath)).join(" AND ");if(!c)throw new rt(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(a)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+o)}else{const c=n.junctionEntityMetadata.tablePath,l=t.junctionAlias;let d="",h="";return n.isOwning?(d=n.joinColumns.map(y=>l+"."+y.propertyPath+"="+s+"."+y.referencedColumn.propertyPath).join(" AND "),h=n.inverseJoinColumns.map(y=>a+"."+y.referencedColumn.propertyPath+"="+l+"."+y.propertyPath).join(" AND ")):(d=n.inverseRelation.inverseJoinColumns.map(y=>l+"."+y.propertyPath+"="+s+"."+y.referencedColumn.propertyPath).join(" AND "),h=n.inverseRelation.joinColumns.map(y=>a+"."+y.referencedColumn.propertyPath+"="+l+"."+y.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(c)+" "+this.escape(l)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(d)+" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(a)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(h+o)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length===0?"":" ORDER BY "+Object.keys(e).map(t=>{const n=typeof e[t]=="string"?e[t]:e[t].order+" "+e[t].nulls,i=this.expressionMap.selects.find(a=>a.selection===t);if(i&&!i.aliasName&&t.indexOf(".")!==-1){const a=t.split("."),o=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===o);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const d=it.buildAlias(this.connection.driver,void 0,o,l.databaseName);return this.escape(d)+" "+n}}}return this.replacePropertyNames(t)+" "+n}).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;if(!e&&!t&&this.expressionMap.joinAttributes.length===0&&(e=this.expressionMap.skip,t=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let n="";if((t||e)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(n=" ORDER BY (SELECT NULL)"),t&&e)return n+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return n+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return n+" OFFSET "+e+" ROWS"}else if(it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new gX}else if(it.isSQLiteFamily(this.connection.driver)){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else if(this.connection.driver.options.type==="oracle"){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!(it.isPostgresFamily(e)||e.options.type==="cockroachdb"))throw new rt("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new rt("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch(this.expressionMap.onLocked==="nowait"?n=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(e.options.type==="mysql"||e.options.type==="aurora-mysql")return it.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if(e.options.type==="mariadb")return" LOCK IN SHARE MODE";if(it.isPostgresFamily(e))return" FOR SHARE"+t+n;if(e.options.type==="oracle")return" FOR UPDATE";if(e.options.type==="mssql")return"";throw new Nf;case"pessimistic_write":if(it.isMySQLFamily(e)||e.options.type==="aurora-mysql"||e.options.type==="oracle")return" FOR UPDATE"+n;if(it.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+n;if(e.options.type==="mssql")return"";throw new Nf;case"pessimistic_partial_write":if(it.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(it.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new Nf;case"pessimistic_write_or_fail":if(it.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+" NOWAIT";if(it.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new Nf;case"for_no_key_update":if(it.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+t+n;throw new Nf;case"for_key_share":if(it.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new Nf;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map((t,n)=>{switch(t.type){case"and":return(n>0?"AND ":"")+this.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+this.replacePropertyNames(t.condition);default:return this.replacePropertyNames(t.condition)}}).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some(l=>l.selection===e),i=[];if(n&&i.push(...t.columns.filter(l=>l.isSelect===!0)),i.push(...t.columns.filter(l=>this.expressionMap.selects.some(d=>d.selection===e+"."+l.propertyPath))),i.length===0)return[];const a=this.expressionMap.queryEntity?t.primaryColumns.filter(l=>i.indexOf(l)===-1):[],o=[...i,...a],s=[],c=this.escape(e);return o.forEach(l=>{let d=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(d=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(d=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${d})`),it.isPostgresFamily(this.connection.driver)&&(l.precision?d=`ST_AsGeoJSON(${d}, ${l.precision})::json`:d=`ST_AsGeoJSON(${d})::json`),this.connection.driver.options.type==="mssql"&&(d=`${d}.ToString()`));const h=this.expressionMap.selects.filter(y=>y.selection===e+"."+l.propertyPath);h.length?h.forEach(y=>{s.push({selection:d,aliasName:y.aliasName?y.aliasName:it.buildAlias(this.connection.driver,void 0,e,l.databaseName),virtual:y.virtual})}):s.push({selection:d,aliasName:it.buildAlias(this.connection.driver,void 0,e,l.databaseName),virtual:n})}),s}findEntityColumnSelects(e,t){const n=this.expressionMap.selects.find(i=>i.selection===e);return n?[n]:this.expressionMap.selects.filter(i=>t.columns.some(a=>i.selection===e+"."+a.propertyPath))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,i=this.escape(e);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||it.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(", ")+"))";if(it.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const a=n.map(o=>`${i}.${this.escape(o.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${a}))`:`COUNT(DISTINCT(CONCAT(${a})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${i}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${i}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return!n||!n[0]||!n[0].cnt?0:parseInt(n[0].cnt)}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?Ui.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?Ui.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(e=>{e.select&&!e.selection?e.type==="inner"?this.innerJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):e.type==="inner"?this.innerJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map(t=>{const n=this.expressionMap.aliases.find(i=>i.metadata.tableNameWithoutPrefix===t);if(!n)throw new rt(`"${t}" is not part of this query`);return this.escape(n.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&Ree.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new rt('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!e.isTransactionActive)throw new mX;if(this.expressionMap.lockMode==="optimistic"){const c=this.expressionMap.mainAlias.metadata;if(!c.versionColumn&&!c.updateDateColumn)throw new hX(c.name)}const t=new xee(this.connection,e,this.expressionMap.relationIdAttributes),n=new Mee(this.connection,e,this.expressionMap.relationCountAttributes);new See(this.expressionMap).transform(),new Tee(this.expressionMap).transform();let o=[],s=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[c,l]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),d=this.expressionMap.mainAlias.metadata,h=this.expressionMap.mainAlias.name,y=d.primaryColumns.map(v=>{const E=this.escape("distinctAlias"),x=this.escape(it.buildAlias(this.connection.driver,void 0,h,v.databaseName));l[x]||(l[x]="ASC");const D=it.buildAlias(this.connection.driver,void 0,"ids_"+h,v.databaseName);return`${E}.${x} AS ${this.escape(D)}`}),m=this.clone(),b=m.expressionMap.timeTravel;if(o=await new gU(this.connection,e).select(`DISTINCT ${y.join(", ")}`).addSelect(c).from(`(${m.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(b).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(l).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let v="";const E={};if(d.hasMultiplePrimaryKeys)v=o.map((x,D)=>d.primaryColumns.map(N=>{const B=`orm_distinct_ids_${D}_${N.databaseName}`,k=it.buildAlias(this.connection.driver,void 0,"ids_"+h,N.databaseName);return E[B]=x[k],`${h}.${N.propertyPath}=:${B}`}).join(" AND ")).join(" OR ");else{const x=it.buildAlias(this.connection.driver,void 0,"ids_"+h,d.primaryColumns[0].databaseName),D=o.map(B=>B[x]);D.every(B=>typeof B=="number")?v=`${h}.${d.primaryColumns[0].propertyPath} IN (${D.join(", ")})`:(E.orm_distinct_ids=D,v=h+"."+d.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:v}).setParameters(E).loadRawResults(e)}}else o=await this.loadRawResults(e);if(o.length>0){const c=await t.load(o),l=await n.load(o);s=new Eee(this.expressionMap,this.connection.driver,c,l,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,s)}if(this.expressionMap.relationLoadStrategy==="query"){const c=new Aee(this.connection,e);await Promise.all(this.relationMetadatas.map(async l=>{const d=l.inverseEntityMetadata.target,h=l.inverseEntityMetadata.targetName,y=Array.isArray(this.findOptions.select)?Ui.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,m=Array.isArray(this.findOptions.relations)?Ui.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,b=this.createQueryBuilder(e).select(h).from(d,h).setFindOptions({select:y?Ui.deepValue(y,l.propertyPath):void 0,order:this.findOptions.order?Ui.deepValue(this.findOptions.order,l.propertyPath):void 0,relations:m?Ui.deepValue(m,l.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(s.length>0){const v=await c.loadManyToManyRelationIdsAndGroup(l,s,void 0,b);s.forEach(E=>{const x=v.find(D=>D.entity===E);if(x){const D=x.related===void 0?null:x.related;l.setEntityValue(E,D)}})}}))}return{raw:o,entities:s}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map(a=>{if(a.indexOf(".")!==-1){const o=a.split("."),s=o[0],c=o.slice(1).join("."),d=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(e)+"."+this.escape(it.buildAlias(this.connection.driver,void 0,s,d.databaseName))}else return this.expressionMap.selects.find(o=>o.selection===a||o.aliasName===a)?this.escape(e)+"."+this.escape(a):""}).join(", "),i={};return Object.keys(t).forEach(a=>{if(a.indexOf(".")!==-1){const o=a.split("."),s=o[0],c=o.slice(1).join("."),d=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);i[this.escape(e)+"."+this.escape(it.buildAlias(this.connection.driver,void 0,s,d.databaseName))]=t[a]}else this.expressionMap.selects.find(o=>o.selection===a||o.aliasName===a)?i[this.escape(e)+"."+this.escape(a)]=t[a]:i[a]=t[a]}),[n,i]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),i=t+" -- PARAMETERS: "+JSON.stringify(n,(d,h)=>typeof h=="bigint"?h.toString():h),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let o;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(o=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:i,duration:this.expressionMap.cacheDuration||a.duration||1e3},e),o&&!this.connection.queryResultCache.isExpired(o))return JSON.parse(o.result)}catch(d){if(!a.ignoreErrors)throw d;c=!0}const l=await e.query(t,n,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:i,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},o,e)}catch(d){if(!a.ignoreErrors)throw d}return l.records}mergeExpressionMap(e){return Pr.assign(this.expressionMap,e),this}normalizeNumber(e){return typeof e=="number"||e===void 0||e===null?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(e,t,n,i){for(const a in e){if(e[a]===void 0||e[a]===!1)continue;const o=i?i+"."+a:a,s=t.findColumnWithPropertyPathStrict(o),c=t.findEmbeddedWithPropertyPath(o),l=t.findRelationWithPropertyPath(o);if(!c&&!s&&!l)throw new Wu(o,t);s?this.selects.push(n+"."+o):c&&this.buildSelect(e[a],t,n,o)}}buildRelations(e,t,n,i,a){e&&Object.keys(e).forEach(o=>{const s=e[o],c=a?a+"."+o:o,l=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!l&&!d)throw new Wu(c,n);if(l)this.buildRelations(s,typeof t=="object"?Ui.deepValue(t,l.propertyPath):void 0,n,i,c);else if(d){let h=i+"_"+c.replace(".","_");h=it.buildAlias(this.connection.driver,{joiner:"__"},i,h),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(d):(this.joins.push({type:"left",select:!0,selection:t&&typeof t[o]=="object"?t[o]:void 0,alias:h,parentAlias:i,relationMetadata:d}),t&&typeof t[o]=="object"&&this.buildSelect(t[o],d.inverseEntityMetadata,h))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof t=="object"?Ui.deepValue(t,d.propertyPath):void 0,d.inverseEntityMetadata,h,void 0)}})}buildEagerRelations(e,t,n,i,a){e&&Object.keys(e).forEach(o=>{const s=e[o],c=a?a+"."+o:o,l=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!l&&!d)throw new Wu(c,n);if(l)this.buildEagerRelations(s,typeof t=="object"?Ui.deepValue(t,l.propertyPath):void 0,n,i,c);else if(d){let h=i+"_"+c.replace(".","_");h=it.buildAlias(this.connection.driver,{joiner:"__"},i,h),(s===!0||typeof s=="object")&&d.inverseEntityMetadata.eagerRelations.forEach(y=>{let m=h+"_"+y.propertyPath.replace(".","_");m=it.buildAlias(this.connection.driver,{joiner:"__"},h,m),this.joins.find(v=>v.alias===m)||this.joins.push({type:"left",select:!0,alias:m,parentAlias:h,selection:void 0,relationMetadata:y}),t&&typeof t[o]=="object"&&this.buildSelect(t[o],d.inverseEntityMetadata,h)}),typeof s=="object"&&this.buildEagerRelations(s,typeof t=="object"?Ui.deepValue(t,d.propertyPath):void 0,d.inverseEntityMetadata,h,void 0)}})}buildOrder(e,t,n,i){for(const a in e){if(e[a]===void 0)continue;const o=i?i+"."+a:a,s=t.findColumnWithPropertyPathStrict(o),c=t.findEmbeddedWithPropertyPath(o),l=t.findRelationWithPropertyPath(o);if(!c&&!s&&!l)throw new Wu(o,t);if(s){let d=typeof e[a]=="object"?e[a].direction:e[a];d=d==="DESC"||d==="desc"||d===-1?"DESC":"ASC";let h=typeof e[a]=="object"?e[a].nulls:void 0;h=h?.toLowerCase()==="first"?"NULLS FIRST":h?.toLowerCase()==="last"?"NULLS LAST":void 0;const y=`${n}.${o}`;this.addOrderBy(y,d,h)}else if(c)this.buildOrder(e[a],t,n,o);else if(l){let d=n+"_"+o.replace(".","_");d=it.buildAlias(this.connection.driver,{joiner:"__"},n,d),this.joins.find(y=>y.alias===d)||this.joins.push({type:"left",select:!1,alias:d,parentAlias:n,selection:void 0,relationMetadata:l}),this.buildOrder(e[a],l.inverseEntityMetadata,d)}}}buildWhere(e,t,n,i){let a="";if(Array.isArray(e))e.length&&(a=e.map(o=>this.buildWhere(o,t,n,i)).filter(o=>!!o).map(o=>"("+o+")").join(" OR "));else{const o=[];for(const s in e){if(e[s]===void 0||e[s]===null)continue;const c=i?i+"."+s:s,l=t.findColumnWithPropertyPathStrict(c),d=t.findEmbeddedWithPropertyPath(c),h=t.findRelationWithPropertyPath(c);if(!d&&!l&&!h)throw new Wu(c,t);if(l){let y=`${n}.${c}`;l.isVirtualProperty&&l.query&&(y=`(${l.query(this.escape(n))})`);let m=e[s];if(dr.isEqualOperator(e[s])&&(m=e[s].value),l.transformer&&(m instanceof Pv?m.transformValue(l.transformer):m=a8.transformTo(l.transformer,m)),this.connection.driver.options.type==="mssql"){const b=this.connection.driver;m instanceof Pv?m.type!=="raw"&&m.transformValue({to:v=>b.parametrizeValue(l,v),from:v=>v}):m=b.parametrizeValue(l,m)}o.push(this.createWhereConditionExpression(this.getWherePredicateCondition(y,m)))}else if(d){const y=this.buildWhere(e[s],t,n,c);y&&o.push(y)}else if(h){if(typeof e[s]=="object"&&Object.keys(e[s]).every(m=>e[s][m]===void 0))continue;if(dr.isFindOperator(e[s]))if(e[s].type==="moreThan"||e[s].type==="lessThan"||e[s].type==="moreThanOrEqual"||e[s].type==="lessThanOrEqual"){let y="";e[s].type==="moreThan"?y=">":e[s].type==="lessThan"?y="<":e[s].type==="moreThanOrEqual"?y=">=":e[s].type==="lessThanOrEqual"&&(y="<=");const m=this.subQuery();if(h.isManyToManyOwner)m.select("COUNT(*)").from(h.joinTableName,h.joinTableName).where(h.joinColumns.map(b=>`${h.joinTableName}.${b.propertyName} = ${n}.${b.referencedColumn.propertyName}`).join(" AND "));else if(h.isManyToManyNotOwner)m.select("COUNT(*)").from(h.inverseRelation.joinTableName,h.inverseRelation.joinTableName).where(h.inverseRelation.inverseJoinColumns.map(b=>`${h.inverseRelation.joinTableName}.${b.propertyName} = ${n}.${b.referencedColumn.propertyName}`).join(" AND "));else if(h.isOneToMany)m.select("COUNT(*)").from(h.inverseEntityMetadata.target,h.inverseEntityMetadata.tableName).where(h.inverseRelation.joinColumns.map(b=>`${h.inverseEntityMetadata.tableName}.${b.propertyName} = ${n}.${b.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(m.getSql()+" "+y+" "+parseInt(e[s].value))}else if(h.isManyToOne||h.isOneToOne&&h.isOneToOneOwner){const y=`${n}.${c}`;o.push(this.createWhereConditionExpression(this.getWherePredicateCondition(y,e[s])))}else throw new Error("This relation isn't supported by given find operator");else{let y=n+"_"+h.propertyPath.replace(".","_");y=it.buildAlias(this.connection.driver,{joiner:"__"},n,y),this.joins.find(v=>v.alias===y)||this.joins.push({type:"left",select:!1,selection:void 0,alias:y,parentAlias:n,relationMetadata:h});const b=this.buildWhere(e[s],h.inverseEntityMetadata,y);b&&o.push(b)}}}a=o.length?"("+o.join(") AND (")+")":o.join(" AND ")}return a.length?"("+a+")":a}},vU=class{constructor(){this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}},Cee=class extends oa{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createUpdateExpression();return e+=this.createCteExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const n=new BA(e,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=n.getSoftDeletionReturningColumns());const[i,a]=this.getQueryAndParameters(),o=await e.query(i,a,!0),s=vU.from(o);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await n.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),t&&await e.commitTransaction(),s}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}from(e,t){e=dr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Mb;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new rt(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new rt("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!e)throw new rt(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!e.deleteDateColumn)throw new dX(e);const t=[];switch(this.expressionMap.queryType){case"soft-delete":t.push(this.escape(e.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":t.push(this.escape(e.deleteDateColumn.databaseName)+" = NULL");break;default:throw new rt('The queryType must be "soft-delete" or "restore"')}if(e.versionColumn&&t.push(this.escape(e.versionColumn.databaseName)+" = "+this.escape(e.versionColumn.databaseName)+" + 1"),e.updateDateColumn&&t.push(this.escape(e.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),t.length<=0)throw new i8;const n=this.createWhereExpression(),i=this.createReturningExpression("update");return i===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")} OUTPUT ${i}${n}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n} RETURNING ${i}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(it.isMySQLFamily(this.connection.driver))return" LIMIT "+e;throw new JP}return""}},Nee=class extends oa{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createUpdateExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let n=null,i=null;const a=new BA(e,this.expressionMap),o=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const y of this.expressionMap.returning)o.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(y));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),o.push(...this.expressionMap.extraReturningColumns.filter(y=>!o.includes(y)))),o.length>0&&this.connection.driver.options.type==="mssql"&&(n=this.connection.driver.buildTableVariableDeclaration("@OutputTable",o),i="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[n,s,i],d=await e.query(l.filter(y=>y!=null).join(`;

`),c,!0),h=vU.from(d);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(h,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),t&&await e.commitTransaction(),h}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}set(e){return this.expressionMap.valuesSet=e,this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Mb;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new rt(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new rt("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.getValueSet(),t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,n={};for(const c in e)e[c]!==void 0&&(n[c]=e[c]);const i=[],a=[];if(t?(this.createPropertyPath(t,n).forEach(c=>{const l=t.findColumnsWithPropertyPath(c);if(l.length<=0)throw new Wu(c,t);l.forEach(d=>{if(!d.isUpdate||a.includes(d))return;a.push(d);let h=d.getEntityValue(n);if(d.referencedColumn&&typeof h=="object"&&!(h instanceof Date)&&h!==null&&!Buffer.isBuffer(h)?h=d.referencedColumn.getEntityValue(h):typeof h!="function"&&(h=this.connection.driver.preparePersistentValue(h,d)),typeof h=="function")i.push(this.escape(d.databaseName)+" = "+h());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&h===null)i.push(this.escape(d.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(h=this.connection.driver.parametrizeValue(d,h));const y=this.createParameter(h);let m=null;if((it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(d.type)!==-1){const v=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";d.srid!=null?m=`${v}(${y}, ${d.srid})`:m=`${v}(${y})`}else it.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(d.type)!==-1?d.srid!=null?m=`ST_SetSRID(ST_GeomFromGeoJSON(${y}), ${d.srid})::${d.type}`:m=`ST_GeomFromGeoJSON(${y})::${d.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(d.type)!==-1?m=d.type+"::STGeomFromText("+y+", "+(d.srid||"0")+")":m=y;i.push(this.escape(d.databaseName)+" = "+m)}})}),(i.length>0||Object.keys(n).length===0)&&(t.versionColumn&&a.indexOf(t.versionColumn)===-1&&i.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&a.indexOf(t.updateDateColumn)===-1&&i.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(n).map(c=>{const l=n[c];if(typeof l=="function")i.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)i.push(this.escape(c)+" = NULL");else{const d=this.createParameter(l);i.push(this.escape(c)+" = "+d)}}),i.length<=0)throw new i8;const o=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${o}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")} OUTPUT ${s}${o}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${o} RETURNING ${s}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(it.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+e;throw new JP}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new i8}};function Bee(){oa.registerQueryBuilderClass("DeleteQueryBuilder",r=>new hee(r)),oa.registerQueryBuilderClass("InsertQueryBuilder",r=>new bee(r)),oa.registerQueryBuilderClass("RelationQueryBuilder",r=>new _ee(r)),oa.registerQueryBuilderClass("SelectQueryBuilder",r=>new Oee(r)),oa.registerQueryBuilderClass("SoftDeleteQueryBuilder",r=>new Cee(r)),oa.registerQueryBuilderClass("UpdateQueryBuilder",r=>new Nee(r))}var tv={exports:{}},Iee=tv.exports,SR;function Dee(){return SR||(SR=1,(function(r,e){(function(t,n){r.exports=n()})(Iee,(function(){var t=1e3,n=6e4,i=36e5,a="millisecond",o="second",s="minute",c="hour",l="day",d="week",h="month",y="quarter",m="year",b="date",v="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var S=["th","st","nd","rd"],_=R%100;return"["+R+(S[(_-20)%10]||S[_]||S[0])+"]"}},N=function(R,S,_){var U=String(R);return!U||U.length>=S?R:""+Array(S+1-U.length).join(_)+R},B={s:N,z:function(R){var S=-R.utcOffset(),_=Math.abs(S),U=Math.floor(_/60),H=_%60;return(S<=0?"+":"-")+N(U,2,"0")+":"+N(H,2,"0")},m:function R(S,_){if(S.date()<_.date())return-R(_,S);var U=12*(_.year()-S.year())+(_.month()-S.month()),H=S.clone().add(U,h),V=_-H<0,P=S.clone().add(U+(V?-1:1),h);return+(-(U+(_-H)/(V?H-P:P-H))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:h,y:m,w:d,d:l,D:b,h:c,m:s,s:o,ms:a,Q:y}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},k="en",F={};F[k]=D;var T="$isDayjsObject",z=function(R){return R instanceof M||!(!R||!R[T])},Z=function R(S,_,U){var H;if(!S)return k;if(typeof S=="string"){var V=S.toLowerCase();F[V]&&(H=V),_&&(F[V]=_,H=V);var P=S.split("-");if(!H&&P.length>1)return R(P[0])}else{var $=S.name;F[$]=S,H=$}return!U&&H&&(k=H),H||!U&&k},Y=function(R,S){if(z(R))return R.clone();var _=typeof S=="object"?S:{};return _.date=R,_.args=arguments,new M(_)},W=B;W.l=Z,W.i=z,W.w=function(R,S){return Y(R,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var M=(function(){function R(_){this.$L=Z(_.locale,null,!0),this.parse(_),this.$x=this.$x||_.x||{},this[T]=!0}var S=R.prototype;return S.parse=function(_){this.$d=(function(U){var H=U.date,V=U.utc;if(H===null)return new Date(NaN);if(W.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var P=H.match(E);if(P){var $=P[2]-1||0,te=(P[7]||"0").substring(0,3);return V?new Date(Date.UTC(P[1],$,P[3]||1,P[4]||0,P[5]||0,P[6]||0,te)):new Date(P[1],$,P[3]||1,P[4]||0,P[5]||0,P[6]||0,te)}}return new Date(H)})(_),this.init()},S.init=function(){var _=this.$d;this.$y=_.getFullYear(),this.$M=_.getMonth(),this.$D=_.getDate(),this.$W=_.getDay(),this.$H=_.getHours(),this.$m=_.getMinutes(),this.$s=_.getSeconds(),this.$ms=_.getMilliseconds()},S.$utils=function(){return W},S.isValid=function(){return this.$d.toString()!==v},S.isSame=function(_,U){var H=Y(_);return this.startOf(U)<=H&&H<=this.endOf(U)},S.isAfter=function(_,U){return Y(_)<this.startOf(U)},S.isBefore=function(_,U){return this.endOf(U)<Y(_)},S.$g=function(_,U,H){return W.u(_)?this[U]:this.set(H,_)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(_,U){var H=this,V=!!W.u(U)||U,P=W.p(_),$=function(ve,we){var De=W.w(H.$u?Date.UTC(H.$y,we,ve):new Date(H.$y,we,ve),H);return V?De:De.endOf(l)},te=function(ve,we){return W.w(H.toDate()[ve].apply(H.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(we)),H)},ae=this.$W,ce=this.$M,fe=this.$D,oe="set"+(this.$u?"UTC":"");switch(P){case m:return V?$(1,0):$(31,11);case h:return V?$(1,ce):$(0,ce+1);case d:var ye=this.$locale().weekStart||0,me=(ae<ye?ae+7:ae)-ye;return $(V?fe-me:fe+(6-me),ce);case l:case b:return te(oe+"Hours",0);case c:return te(oe+"Minutes",1);case s:return te(oe+"Seconds",2);case o:return te(oe+"Milliseconds",3);default:return this.clone()}},S.endOf=function(_){return this.startOf(_,!1)},S.$set=function(_,U){var H,V=W.p(_),P="set"+(this.$u?"UTC":""),$=(H={},H[l]=P+"Date",H[b]=P+"Date",H[h]=P+"Month",H[m]=P+"FullYear",H[c]=P+"Hours",H[s]=P+"Minutes",H[o]=P+"Seconds",H[a]=P+"Milliseconds",H)[V],te=V===l?this.$D+(U-this.$W):U;if(V===h||V===m){var ae=this.clone().set(b,1);ae.$d[$](te),ae.init(),this.$d=ae.set(b,Math.min(this.$D,ae.daysInMonth())).$d}else $&&this.$d[$](te);return this.init(),this},S.set=function(_,U){return this.clone().$set(_,U)},S.get=function(_){return this[W.p(_)]()},S.add=function(_,U){var H,V=this;_=Number(_);var P=W.p(U),$=function(ce){var fe=Y(V);return W.w(fe.date(fe.date()+Math.round(ce*_)),V)};if(P===h)return this.set(h,this.$M+_);if(P===m)return this.set(m,this.$y+_);if(P===l)return $(1);if(P===d)return $(7);var te=(H={},H[s]=n,H[c]=i,H[o]=t,H)[P]||1,ae=this.$d.getTime()+_*te;return W.w(ae,this)},S.subtract=function(_,U){return this.add(-1*_,U)},S.format=function(_){var U=this,H=this.$locale();if(!this.isValid())return H.invalidDate||v;var V=_||"YYYY-MM-DDTHH:mm:ssZ",P=W.z(this),$=this.$H,te=this.$m,ae=this.$M,ce=H.weekdays,fe=H.months,oe=H.meridiem,ye=function(we,De,Te,Se){return we&&(we[De]||we(U,V))||Te[De].slice(0,Se)},me=function(we){return W.s($%12||12,we,"0")},ve=oe||function(we,De,Te){var Se=we<12?"AM":"PM";return Te?Se.toLowerCase():Se};return V.replace(x,(function(we,De){return De||(function(Te){switch(Te){case"YY":return String(U.$y).slice(-2);case"YYYY":return W.s(U.$y,4,"0");case"M":return ae+1;case"MM":return W.s(ae+1,2,"0");case"MMM":return ye(H.monthsShort,ae,fe,3);case"MMMM":return ye(fe,ae);case"D":return U.$D;case"DD":return W.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return ye(H.weekdaysMin,U.$W,ce,2);case"ddd":return ye(H.weekdaysShort,U.$W,ce,3);case"dddd":return ce[U.$W];case"H":return String($);case"HH":return W.s($,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return ve($,te,!0);case"A":return ve($,te,!1);case"m":return String(te);case"mm":return W.s(te,2,"0");case"s":return String(U.$s);case"ss":return W.s(U.$s,2,"0");case"SSS":return W.s(U.$ms,3,"0");case"Z":return P}return null})(we)||P.replace(":","")}))},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(_,U,H){var V,P=this,$=W.p(U),te=Y(_),ae=(te.utcOffset()-this.utcOffset())*n,ce=this-te,fe=function(){return W.m(P,te)};switch($){case m:V=fe()/12;break;case h:V=fe();break;case y:V=fe()/3;break;case d:V=(ce-ae)/6048e5;break;case l:V=(ce-ae)/864e5;break;case c:V=ce/i;break;case s:V=ce/n;break;case o:V=ce/t;break;default:V=ce}return H?V:W.a(V)},S.daysInMonth=function(){return this.endOf(h).$D},S.$locale=function(){return F[this.$L]},S.locale=function(_,U){if(!_)return this.$L;var H=this.clone(),V=Z(_,U,!0);return V&&(H.$L=V),H},S.clone=function(){return W.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},R})(),C=M.prototype;return Y.prototype=C,[["$ms",a],["$s",o],["$m",s],["$H",c],["$W",l],["$M",h],["$y",m],["$D",b]].forEach((function(R){C[R[1]]=function(S){return this.$g(S,R[0],R[1])}})),Y.extend=function(R,S){return R.$i||(R(S,M,Y),R.$i=!0),Y},Y.locale=Z,Y.isDayjs=z,Y.unix=function(R){return Y(1e3*R)},Y.en=F[k],Y.Ls=F,Y.p={},Y}))})(tv)),tv.exports}Dee();var MR;(function(r){r.VIEW="VIEW",r.MATERIALIZED_VIEW="MATERIALIZED_VIEW",r.GENERATED_COLUMN="GENERATED_COLUMN"})(MR||(MR={}));Bee();function ec(){const r=QP.getGlobalVariable();return r.typeormMetadataArgsStorage||(r.typeormMetadataArgsStorage=new oX),r.typeormMetadataArgsStorage}function xo(r,e){return function(t,n){let i;typeof r=="string"||typeof r=="function"?i=r:r&&(e=r,i=r.type),e||(e={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&a&&(i=a),!e.type&&i&&(e.type=i),e.type==="hstore"&&!e.hstoreType&&(e.hstoreType=a===Object?"object":"string"),typeof r=="function")ec().embeddeds.push({target:t.constructor,propertyName:n,isArray:a===Array||e.array===!0,prefix:e.prefix!==void 0?e.prefix:void 0,type:r});else{if(!e.type)throw new eU(t,n);e.unique===!0&&ec().uniques.push({target:t.constructor,columns:[n]}),ec().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&ec().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}}function Pee(r,e){return function(t,n){let i;typeof r=="string"||r===String||r===Boolean||r===Number?i=r:e=Object.assign({},r),e||(e={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&a&&(i=a),!e.type&&i&&(e.type=i),!e.type)throw new eU(t,n);if(e.nullable)throw new fX(t,n);e.primary=!0,ec().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&ec().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}function Uee(r,e){const t=(Pr.isObject(r)?r:e)||{},n=r;return function(i){ec().tables.push({target:i,name:n,type:"regular",orderBy:t.orderBy?t.orderBy:void 0,engine:t.engine?t.engine:void 0,database:t.database?t.database:void 0,schema:t.schema?t.schema:void 0,synchronize:t.synchronize,withoutRowid:t.withoutRowid,comment:t.comment?t.comment:void 0})}}function EE(r,e,t){const i=r;let a=Pr.isObject(r)&&!Array.isArray(r)?r:t;return a||(a=Pr.isObject(e)&&!Array.isArray(e)?e:t),function(o,s){ec().indices.push({target:s?o.constructor:o,name:void 0,columns:s?[s]:i,synchronize:!(a&&a.synchronize===!1),where:a?a.where:void 0,unique:!!(a&&a.unique),spatial:!!(a&&a.spatial),fulltext:!!(a&&a.fulltext),nullFiltered:!!(a&&a.nullFiltered),parser:a?a.parser:void 0,sparse:!!(a&&a.sparse),background:!!(a&&a.background),concurrent:!!(a&&a.concurrent),expireAfterSeconds:a?a.expireAfterSeconds:void 0})}}var TR={},RR;function kee(){return RR||(RR=1,typeof Number.isFinite!="function"&&(Number.isFinite=function(e){return!(typeof e!="number"||e!==e||e===1/0||e===-1/0)})),TR}var xE,OR;function bU(){if(OR)return xE;OR=1;var r="Expected a function",e="__lodash_hash_undefined__",t="[object Function]",n="[object GeneratorFunction]",i="[object Symbol]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/[\\^$.*+?()[\]{}|]/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,y=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,m=typeof self=="object"&&self&&self.Object===Object&&self,b=y||m||Function("return this")();function v(pe,Ee){return pe?.[Ee]}function E(pe){var Ee=!1;if(pe!=null&&typeof pe.toString!="function")try{Ee=!!(pe+"")}catch{}return Ee}var x=Array.prototype,D=Function.prototype,N=Object.prototype,B=b["__core-js_shared__"],k=(function(){var pe=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||"");return pe?"Symbol(src)_1."+pe:""})(),F=D.toString,T=N.hasOwnProperty,z=N.toString,Z=RegExp("^"+F.call(T).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=b.Symbol,W=x.splice,M=ue(b,"Map"),C=ue(Object,"create"),R=Y?Y.prototype:void 0,S=R?R.toString:void 0;function _(pe){var Ee=-1,Ce=pe?pe.length:0;for(this.clear();++Ee<Ce;){var ke=pe[Ee];this.set(ke[0],ke[1])}}function U(){this.__data__=C?C(null):{}}function H(pe){return this.has(pe)&&delete this.__data__[pe]}function V(pe){var Ee=this.__data__;if(C){var Ce=Ee[pe];return Ce===e?void 0:Ce}return T.call(Ee,pe)?Ee[pe]:void 0}function P(pe){var Ee=this.__data__;return C?Ee[pe]!==void 0:T.call(Ee,pe)}function $(pe,Ee){var Ce=this.__data__;return Ce[pe]=C&&Ee===void 0?e:Ee,this}_.prototype.clear=U,_.prototype.delete=H,_.prototype.get=V,_.prototype.has=P,_.prototype.set=$;function te(pe){var Ee=-1,Ce=pe?pe.length:0;for(this.clear();++Ee<Ce;){var ke=pe[Ee];this.set(ke[0],ke[1])}}function ae(){this.__data__=[]}function ce(pe){var Ee=this.__data__,Ce=Le(Ee,pe);if(Ce<0)return!1;var ke=Ee.length-1;return Ce==ke?Ee.pop():W.call(Ee,Ce,1),!0}function fe(pe){var Ee=this.__data__,Ce=Le(Ee,pe);return Ce<0?void 0:Ee[Ce][1]}function oe(pe){return Le(this.__data__,pe)>-1}function ye(pe,Ee){var Ce=this.__data__,ke=Le(Ce,pe);return ke<0?Ce.push([pe,Ee]):Ce[ke][1]=Ee,this}te.prototype.clear=ae,te.prototype.delete=ce,te.prototype.get=fe,te.prototype.has=oe,te.prototype.set=ye;function me(pe){var Ee=-1,Ce=pe?pe.length:0;for(this.clear();++Ee<Ce;){var ke=pe[Ee];this.set(ke[0],ke[1])}}function ve(){this.__data__={hash:new _,map:new(M||te),string:new _}}function we(pe){return X(this,pe).delete(pe)}function De(pe){return X(this,pe).get(pe)}function Te(pe){return X(this,pe).has(pe)}function Se(pe,Ee){return X(this,pe).set(pe,Ee),this}me.prototype.clear=ve,me.prototype.delete=we,me.prototype.get=De,me.prototype.has=Te,me.prototype.set=Se;function Le(pe,Ee){for(var Ce=pe.length;Ce--;)if(w(pe[Ce][0],Ee))return Ce;return-1}function $e(pe,Ee){Ee=le(Ee,pe)?[Ee]:j(Ee);for(var Ce=0,ke=Ee.length;pe!=null&&Ce<ke;)pe=pe[Pe(Ee[Ce++])];return Ce&&Ce==ke?pe:void 0}function ie(pe){if(!G(pe)||Be(pe))return!1;var Ee=K(pe)||E(pe)?Z:h;return Ee.test(Qe(pe))}function L(pe){if(typeof pe=="string")return pe;if(ne(pe))return S?S.call(pe):"";var Ee=pe+"";return Ee=="0"&&1/pe==-1/0?"-0":Ee}function j(pe){return A(pe)?pe:Me(pe)}function X(pe,Ee){var Ce=pe.__data__;return de(Ee)?Ce[typeof Ee=="string"?"string":"hash"]:Ce.map}function ue(pe,Ee){var Ce=v(pe,Ee);return ie(Ce)?Ce:void 0}function le(pe,Ee){if(A(pe))return!1;var Ce=typeof pe;return Ce=="number"||Ce=="symbol"||Ce=="boolean"||pe==null||ne(pe)?!0:o.test(pe)||!a.test(pe)||Ee!=null&&pe in Object(Ee)}function de(pe){var Ee=typeof pe;return Ee=="string"||Ee=="number"||Ee=="symbol"||Ee=="boolean"?pe!=="__proto__":pe===null}function Be(pe){return!!k&&k in pe}var Me=q(function(pe){pe=be(pe);var Ee=[];return s.test(pe)&&Ee.push(""),pe.replace(c,function(Ce,ke,Ke,et){Ee.push(Ke?et.replace(d,"$1"):ke||Ce)}),Ee});function Pe(pe){if(typeof pe=="string"||ne(pe))return pe;var Ee=pe+"";return Ee=="0"&&1/pe==-1/0?"-0":Ee}function Qe(pe){if(pe!=null){try{return F.call(pe)}catch{}try{return pe+""}catch{}}return""}function q(pe,Ee){if(typeof pe!="function"||Ee&&typeof Ee!="function")throw new TypeError(r);var Ce=function(){var ke=arguments,Ke=Ee?Ee.apply(this,ke):ke[0],et=Ce.cache;if(et.has(Ke))return et.get(Ke);var Ze=pe.apply(this,ke);return Ce.cache=et.set(Ke,Ze),Ze};return Ce.cache=new(q.Cache||me),Ce}q.Cache=me;function w(pe,Ee){return pe===Ee||pe!==pe&&Ee!==Ee}var A=Array.isArray;function K(pe){var Ee=G(pe)?z.call(pe):"";return Ee==t||Ee==n}function G(pe){var Ee=typeof pe;return!!pe&&(Ee=="object"||Ee=="function")}function ee(pe){return!!pe&&typeof pe=="object"}function ne(pe){return typeof pe=="symbol"||ee(pe)&&z.call(pe)==i}function be(pe){return pe==null?"":L(pe)}function Ue(pe,Ee,Ce){var ke=pe==null?void 0:$e(pe,Ee);return ke===void 0?Ce:ke}return xE=Ue,xE}var AE,CR;function qee(){return CR||(CR=1,AE={INVALID_TYPE:"Expected type {0} but found type {1}",INVALID_FORMAT:"Object didn't pass validation for format {0}: {1}",ENUM_MISMATCH:"No enum match for: {0}",ENUM_CASE_MISMATCH:"Enum does not match case for: {0}",ANY_OF_MISSING:"Data does not match any schemas from 'anyOf'",ONE_OF_MISSING:"Data does not match any schemas from 'oneOf'",ONE_OF_MULTIPLE:"Data is valid against more than one schema from 'oneOf'",NOT_PASSED:"Data matches schema from 'not'",ARRAY_LENGTH_SHORT:"Array is too short ({0}), minimum {1}",ARRAY_LENGTH_LONG:"Array is too long ({0}), maximum {1}",ARRAY_UNIQUE:"Array items are not unique (indexes {0} and {1})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",MULTIPLE_OF:"Value {0} is not a multiple of {1}",MINIMUM:"Value {0} is less than minimum {1}",MINIMUM_EXCLUSIVE:"Value {0} is equal or less than exclusive minimum {1}",MAXIMUM:"Value {0} is greater than maximum {1}",MAXIMUM_EXCLUSIVE:"Value {0} is equal or greater than exclusive maximum {1}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({0}), minimum {1}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({0}), maximum {1}",OBJECT_MISSING_REQUIRED_PROPERTY:"Missing required property: {0}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed: {0}",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {0} (due to key: {1})",MIN_LENGTH:"String is too short ({0} chars), minimum {1}",MAX_LENGTH:"String is too long ({0} chars), maximum {1}",PATTERN:"String does not match pattern {0}: {1}",KEYWORD_TYPE_EXPECTED:"Keyword '{0}' is expected to be of type '{1}'",KEYWORD_UNDEFINED_STRICT:"Keyword '{0}' must be defined in strict mode",KEYWORD_UNEXPECTED:"Keyword '{0}' is not expected to appear in the schema",KEYWORD_MUST_BE:"Keyword '{0}' must be {1}",KEYWORD_DEPENDENCY:"Keyword '{0}' requires keyword '{1}'",KEYWORD_PATTERN:"Keyword '{0}' is not a valid RegExp pattern: {1}",KEYWORD_VALUE_TYPE:"Each element of keyword '{0}' array must be a '{1}'",UNKNOWN_FORMAT:"There is no validation function for format '{0}'",CUSTOM_MODE_FORCE_PROPERTIES:"{0} must define at least one property if present",REF_UNRESOLVED:"Reference has not been resolved during compilation: {0}",UNRESOLVABLE_REFERENCE:"Reference could not be resolved: {0}",SCHEMA_NOT_REACHABLE:"Validator was not able to read schema with uri: {0}",SCHEMA_TYPE_EXPECTED:"Schema is expected to be of type 'object'",SCHEMA_NOT_AN_OBJECT:"Schema is not an object: {0}",ASYNC_TIMEOUT:"{0} asynchronous task(s) have timed out after {1} ms",PARENT_SCHEMA_VALIDATION_FAILED:"Schema failed to validate against its parent schema, see inner errors for details.",REMOTE_NOT_VALID:"Remote reference didn't compile successfully: {0}"}),AE}var SE={},NR;function eh(){return NR||(NR=1,(function(r){r.jsonSymbol=Symbol.for("z-schema/json"),r.schemaSymbol=Symbol.for("z-schema/schema");var e=r.sortedKeys=function(t){return Object.keys(t).sort()};r.isAbsoluteUri=function(t){return/^https?:\/\//.test(t)},r.isRelativeUri=function(t){return/.+#/.test(t)},r.whatIs=function(t){var n=typeof t;return n==="object"?t===null?"null":Array.isArray(t)?"array":"object":n==="number"?Number.isFinite(t)?t%1===0?"integer":"number":Number.isNaN(t)?"not-a-number":"unknown-number":n},r.areEqual=function t(n,i,a){a=a||{};var o=a.caseInsensitiveComparison||!1;if(n===i||o===!0&&typeof n=="string"&&typeof i=="string"&&n.toUpperCase()===i.toUpperCase())return!0;var s,c;if(Array.isArray(n)&&Array.isArray(i)){if(n.length!==i.length)return!1;for(c=n.length,s=0;s<c;s++)if(!t(n[s],i[s],{caseInsensitiveComparison:o}))return!1;return!0}if(r.whatIs(n)==="object"&&r.whatIs(i)==="object"){var l=e(n),d=e(i);if(!t(l,d,{caseInsensitiveComparison:o}))return!1;for(c=l.length,s=0;s<c;s++)if(!t(n[l[s]],i[l[s]],{caseInsensitiveComparison:o}))return!1;return!0}return!1},r.isUniqueArray=function(t,n){var i,a,o=t.length;for(i=0;i<o;i++)for(a=i+1;a<o;a++)if(r.areEqual(t[i],t[a]))return n&&n.push(i,a),!1;return!0},r.difference=function(t,n){for(var i=[],a=t.length;a--;)n.indexOf(t[a])===-1&&i.push(t[a]);return i},r.clone=function(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)return t;var n,i;if(Array.isArray(t))for(n=[],i=t.length;i--;)n[i]=t[i];else{n={};var a=Object.keys(t);for(i=a.length;i--;){var o=a[i];n[o]=t[o]}}return n}},r.cloneDeep=function(t){var n=0,i=new Map,a=[];function o(s){if(typeof s!="object"||s===null)return s;var c,l,d;if(d=i.get(s),d!==void 0)return a[d];if(i.set(s,n++),Array.isArray(s))for(c=[],a.push(c),l=s.length;l--;)c[l]=o(s[l]);else{c={},a.push(c);var h=Object.keys(s);for(l=h.length;l--;){var y=h[l];c[y]=o(s[y])}}return c}return o(t)},r.ucs2decode=function(t){for(var n=[],i=0,a=t.length,o,s;i<a;)o=t.charCodeAt(i++),o>=55296&&o<=56319&&i<a?(s=t.charCodeAt(i++),(s&64512)==56320?n.push(((o&1023)<<10)+(s&1023)+65536):(n.push(o),i--)):n.push(o);return n}})(SE)),SE}var ME,BR;function Z0(){if(BR)return ME;BR=1;var r=bU(),e=qee(),t=eh();function n(i,a){this.parentReport=i instanceof n?i:void 0,this.options=i instanceof n?i.options:i||{},this.reportOptions=a||{},this.errors=[],this.path=[],this.asyncTasks=[],this.rootSchema=void 0,this.commonErrorMessage=void 0,this.json=void 0}return n.prototype.isValid=function(){if(this.asyncTasks.length>0)throw new Error("Async tasks pending, can't answer isValid");return this.errors.length===0},n.prototype.addAsyncTask=function(i,a,o){this.asyncTasks.push([i,a,o])},n.prototype.getAncestor=function(i){if(this.parentReport)return this.parentReport.getSchemaId()===i?this.parentReport:this.parentReport.getAncestor(i)},n.prototype.processAsyncTasks=function(i,a){var o=i||2e3,s=this.asyncTasks.length,c=s,l=!1,d=this;function h(){process.nextTick(function(){var b=d.errors.length===0,v=b?null:d.errors;a(v,b)})}function y(b){return function(v){l||(b(v),--s===0&&h())}}if(s===0||this.errors.length>0&&this.options.breakOnFirstError){h();return}for(;c--;){var m=this.asyncTasks[c];m[0].apply(null,m[1].concat(y(m[2])))}setTimeout(function(){s>0&&(l=!0,d.addError("ASYNC_TIMEOUT",[s,o]),a(d.errors,!1))},o)},n.prototype.getPath=function(i){var a=[];return this.parentReport&&(a=a.concat(this.parentReport.path)),a=a.concat(this.path),i!==!0&&(a="#/"+a.map(function(o){return o=o.toString(),t.isAbsoluteUri(o)?"uri("+o+")":o.replace(/\~/g,"~0").replace(/\//g,"~1")}).join("/")),a},n.prototype.getSchemaId=function(){if(!this.rootSchema)return null;var i=[];for(this.parentReport&&(i=i.concat(this.parentReport.path)),i=i.concat(this.path);i.length>0;){var a=r(this.rootSchema,i);if(a&&a.id)return a.id;i.pop()}return this.rootSchema.id},n.prototype.hasError=function(i,a){for(var o=this.errors.length;o--;)if(this.errors[o].code===i){for(var s=!0,c=this.errors[o].params.length;c--;)this.errors[o].params[c]!==a[c]&&(s=!1);if(s)return s}return!1},n.prototype.addError=function(i,a,o,s){if(!i)throw new Error("No errorCode passed into addError()");this.addCustomError(i,e[i],a,o,s)},n.prototype.getJson=function(){for(var i=this;i.json===void 0;)if(i=i.parentReport,i===void 0)return;return i.json},n.prototype.addCustomError=function(i,a,o,s,c){if(!(this.errors.length>=this.reportOptions.maxErrors)){if(!a)throw new Error("No errorMessage known for code "+i);o=o||[];for(var l=o.length;l--;){var d=t.whatIs(o[l]),h=d==="object"||d==="null"?JSON.stringify(o[l]):o[l];a=a.replace("{"+l+"}",h)}var y={code:i,params:o,message:a,path:this.getPath(this.options.reportPathAsArray),schemaId:this.getSchemaId()};if(y[t.schemaSymbol]=c,y[t.jsonSymbol]=this.getJson(),c&&typeof c=="string"?y.description=c:c&&typeof c=="object"&&(c.title&&(y.title=c.title),c.description&&(y.description=c.description)),s!=null){for(Array.isArray(s)||(s=[s]),y.inner=[],l=s.length;l--;)for(var m=s[l],b=m.errors.length;b--;)y.inner.push(m.errors[b]);y.inner.length===0&&(y.inner=void 0)}this.errors.push(y)}},ME=n,ME}var Dm={exports:{}},Pm={exports:{}},Um={exports:{}},IR;function We(){return IR||(IR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){if(n==null)throw new TypeError("Expected a string but received a ".concat(n));if(n.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(n.constructor.name))}r.exports=e.default,r.exports.default=e.default})(Um,Um.exports)),Um.exports}var DR;function IA(){return DR||(DR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a),a=Date.parse(a),isNaN(a)?null:new Date(a)}r.exports=e.default,r.exports.default=e.default})(Pm,Pm.exports)),Pm.exports}var km={exports:{}},Bf={},qm={exports:{}},PR;function wU(){return PR||(PR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return n==null}r.exports=e.default,r.exports.default=e.default})(qm,qm.exports)),qm.exports}var Wr={},UR;function Y0(){if(UR)return Wr;UR=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.farsiLocales=Wr.englishLocales=Wr.dotDecimal=Wr.decimal=Wr.commaDecimal=Wr.bengaliLocales=Wr.arabicLocales=Wr.alphanumeric=Wr.alpha=void 0;for(var r=Wr.alpha={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZ]+$/i,"bg-BG":/^[-]+$/i,"cs-CZ":/^[A-Z]+$/i,"da-DK":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"el-GR":/^[-]+$/i,"es-ES":/^[A-Z]+$/i,"fa-IR":/^[]+$/i,"fi-FI":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"it-IT":/^[A-Z]+$/i,"ja-JP":/^[----]+$/i,"nb-NO":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"nn-NO":/^[A-Z]+$/i,"hu-HU":/^[A-Z]+$/i,"pl-PL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[-]+$/i,"kk-KZ":/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-Z]+$/i,"sk-SK":/^[A-Z]+$/i,"sr-RS@latin":/^[A-Z]+$/i,"sr-RS":/^[-]+$/i,"sv-SE":/^[A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[A-Z]+$/i,"uk-UA":/^[-I]+$/i,"vi-VN":/^[A-Z]+$/i,"ko-KR":/^[---]*$/,"ku-IQ":/^[]+$/i,ar:/^[]+$/,he:/^[-]+$/,fa:/^['']+$/i,bn:/^['']+$/,eo:/^[ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/,"ta-IN":/^[\u0B80-\u0BFF]+$/i,"te-IN":/^[\u0C00-\u0C7F]+$/i,"kn-IN":/^[\u0C80-\u0CFF]+$/i,"ml-IN":/^[\u0D00-\u0D7F]+$/i,"gu-IN":/^[\u0A80-\u0AFF]+$/i,"pa-IN":/^[\u0A00-\u0A7F]+$/i,"or-IN":/^[\u0B00-\u0B7F]+$/i},e=Wr.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZ]+$/i,"bg-BG":/^[0-9-]+$/i,"cs-CZ":/^[0-9A-Z]+$/i,"da-DK":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"el-GR":/^[0-9-]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fi-FI":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"it-IT":/^[0-9A-Z]+$/i,"ja-JP":/^[0-9-----]+$/i,"hu-HU":/^[0-9A-Z]+$/i,"nb-NO":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"nn-NO":/^[0-9A-Z]+$/i,"pl-PL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9-]+$/i,"kk-KZ":/^[0-9-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-Z]+$/i,"sk-SK":/^[0-9A-Z]+$/i,"sr-RS@latin":/^[0-9A-Z]+$/i,"sr-RS":/^[0-9-]+$/i,"sv-SE":/^[0-9A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[0-9A-Z]+$/i,"uk-UA":/^[0-9-I]+$/i,"ko-KR":/^[0-9---]*$/,"ku-IQ":/^[0-9]+$/i,"vi-VN":/^[0-9A-Z]+$/i,ar:/^[0-9]+$/,he:/^[0-9-]+$/,fa:/^['0-9']+$/i,bn:/^['']+$/,eo:/^[0-9ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/,"ta-IN":/^[0-9\u0B80-\u0BFF.]+$/i,"te-IN":/^[0-9\u0C00-\u0C7F.]+$/i,"kn-IN":/^[0-9\u0C80-\u0CFF.]+$/i,"ml-IN":/^[0-9\u0D00-\u0D7F.]+$/i,"gu-IN":/^[0-9\u0A80-\u0AFF.]+$/i,"pa-IN":/^[0-9\u0A00-\u0A7F.]+$/i,"or-IN":/^[0-9\u0B00-\u0B7F.]+$/i},t=Wr.decimal={"en-US":".",ar:""},n=Wr.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"],i,a=0;a<n.length;a++)i="en-".concat(n[a]),r[i]=r["en-US"],e[i]=e["en-US"],t[i]=t["en-US"];for(var o=Wr.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"],s,c=0;c<o.length;c++)s="ar-".concat(o[c]),r[s]=r.ar,e[s]=e.ar,t[s]=t.ar;for(var l=Wr.farsiLocales=["IR","AF"],d,h=0;h<l.length;h++)d="fa-".concat(l[h]),e[d]=e.fa,t[d]=t.ar;for(var y=Wr.bengaliLocales=["BD","IN"],m,b=0;b<y.length;b++)m="bn-".concat(y[b]),r[m]=r.bn,e[m]=e.bn,t[m]=t["en-US"];for(var v=Wr.dotDecimal=["ar-EG","ar-LB","ar-LY"],E=Wr.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","gu-IN","hi-IN","hu-HU","id-ID","it-IT","kk-KZ","kn-IN","ku-IQ","ml-IN","nb-NO","nl-NL","nn-NO","or-IN","pa-IN","pl-PL","pt-PT","ru-RU","si-LK","sl-SI","sr-RS","sr-RS@latin","sv-SE","ta-IN","te-IN","tr-TR","uk-UA","vi-VN"],x=0;x<v.length;x++)t[v[x]]=t["en-US"];for(var D=0;D<E.length;D++)t[E[D]]=",";return r["fr-CA"]=r["fr-FR"],e["fr-CA"]=e["fr-FR"],r["pt-BR"]=r["pt-PT"],e["pt-BR"]=e["pt-PT"],t["pt-BR"]=t["pt-PT"],r["pl-Pl"]=r["pl-PL"],e["pl-Pl"]=e["pl-PL"],t["pl-Pl"]=t["pl-PL"],r["fa-AF"]=r.fa,Wr}var kR;function _U(){if(kR)return Bf;kR=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.default=i,Bf.locales=void 0;var r=n(We()),e=n(wU()),t=Y0();function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){(0,r.default)(a),o=o||{};var s=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(o.locale?t.decimal[o.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(a===""||a==="."||a===","||a==="-"||a==="+")return!1;var c=parseFloat(a.replace(",","."));return s.test(a)&&(!o.hasOwnProperty("min")||(0,e.default)(o.min)||c>=o.min)&&(!o.hasOwnProperty("max")||(0,e.default)(o.max)||c<=o.max)&&(!o.hasOwnProperty("lt")||(0,e.default)(o.lt)||c<o.lt)&&(!o.hasOwnProperty("gt")||(0,e.default)(o.gt)||c>o.gt)}return Bf.locales=Object.keys(t.decimal),Bf}var qR;function EU(){return qR||(qR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(_U());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a)?parseFloat(a):NaN}r.exports=e.default,r.exports.default=e.default})(km,km.exports)),km.exports}var Lm={exports:{}},LR;function Lee(){return LR||(LR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){return(0,t.default)(a),parseInt(a,o||10)}r.exports=e.default,r.exports.default=e.default})(Lm,Lm.exports)),Lm.exports}var jm={exports:{}},jR;function jee(){return jR||(jR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){return(0,t.default)(a),o?a==="1"||/^true$/i.test(a):a!=="0"&&!/^false$/i.test(a)&&a!==""}r.exports=e.default,r.exports.default=e.default})(jm,jm.exports)),jm.exports}var $m={exports:{}},$R;function $ee(){return $R||($R=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){return(0,t.default)(a),a===o}r.exports=e.default,r.exports.default=e.default})($m,$m.exports)),$m.exports}var Fm={exports:{}},zm={exports:{}},FR;function xU(){return FR||(FR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(i){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},t(i)}function n(i){return t(i)==="object"&&i!==null?typeof i.toString=="function"?i=i.toString():i="[object Object]":(i===null||typeof i>"u"||isNaN(i)&&!i.length)&&(i=""),String(i)}r.exports=e.default,r.exports.default=e.default})(zm,zm.exports)),zm.exports}var Vm={exports:{}},zR;function oi(){return zR||(zR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var a in i)typeof n[a]>"u"&&(n[a]=i[a]);return n}r.exports=e.default,r.exports.default=e.default})(Vm,Vm.exports)),Vm.exports}var VR;function Fee(){return VR||(VR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=a(We()),n=a(xU()),i=a(oi());function a(c){return c&&c.__esModule?c:{default:c}}var o={ignoreCase:!1,minOccurrences:1};function s(c,l,d){return(0,t.default)(c),d=(0,i.default)(d,o),d.ignoreCase?c.toLowerCase().split((0,n.default)(l).toLowerCase()).length>d.minOccurrences:c.split((0,n.default)(l)).length>d.minOccurrences}r.exports=e.default,r.exports.default=e.default})(Fm,Fm.exports)),Fm.exports}var Hm={exports:{}},HR;function zee(){return HR||(HR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o,s){return(0,t.default)(a),Object.prototype.toString.call(o)!=="[object RegExp]"&&(o=new RegExp(o,s)),!!a.match(o)}r.exports=e.default,r.exports.default=e.default})(Hm,Hm.exports)),Hm.exports}var Km={exports:{}},Gm={exports:{}},KR;function AU(){return KR||(KR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(i){return Object.prototype.toString.call(i)==="[object RegExp]"}function n(i,a){for(var o=0;o<a.length;o++){var s=a[o];if(i===s||t(s)&&s.test(i))return!0}return!1}r.exports=e.default,r.exports.default=e.default})(Gm,Gm.exports)),Gm.exports}var Wm={exports:{}},GR;function SU(){return GR||(GR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i(o)}function a(o,s){(0,t.default)(o);var c,l;i(s)==="object"?(c=s.min||0,l=s.max):(c=arguments[1],l=arguments[2]);var d=encodeURI(o).split(/%..|./).length-1;return d>=c&&(typeof l>"u"||d<=l)}r.exports=e.default,r.exports.default=e.default})(Wm,Wm.exports)),Wm.exports}var Zm={exports:{}},WR;function DA(){return WR||(WR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(We()),n=i(oi());function i(s){return s&&s.__esModule?s:{default:s}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function o(s,c){(0,t.default)(s),c=(0,n.default)(c,a),c.allow_trailing_dot&&s[s.length-1]==="."&&(s=s.substring(0,s.length-1)),c.allow_wildcard===!0&&s.indexOf("*.")===0&&(s=s.substring(2));var l=s.split("."),d=l[l.length-1];return c.require_tld&&(l.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(d)||/\s/.test(d))||!c.allow_numeric_tld&&/^\d+$/.test(d)?!1:l.every(function(h){return!(h.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(h)||/[\uff01-\uff5e]/.test(h)||/^-|-$/.test(h)||!c.allow_underscores&&/_/.test(h))})}r.exports=e.default,r.exports.default=e.default})(Zm,Zm.exports)),Zm.exports}var Ym={exports:{}},ZR;function Rb(){return ZR||(ZR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var t=n(We());function n(h){return h&&h.__esModule?h:{default:h}}function i(h){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(h)}var a="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",o="(".concat(a,"[.]){3}").concat(a),s=new RegExp("^".concat(o,"$")),c="(?:[0-9a-fA-F]{1,4})",l=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(o,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(o,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(o,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(o,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(o,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(o,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(o,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function d(h){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(h);var m=(i(y)==="object"?y.version:arguments[1])||"";return m?m.toString()==="4"?s.test(h):m.toString()==="6"?l.test(h):!1:d(h,{version:4})||d(h,{version:6})}r.exports=e.default,r.exports.default=e.default})(Ym,Ym.exports)),Ym.exports}var YR;function MU(){return YR||(YR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=D;var t=c(We()),n=c(AU()),i=c(SU()),a=c(DA()),o=c(Rb()),s=c(oi());function c(N){return N&&N.__esModule?N:{default:N}}var l={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},d=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,h=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,y=/^[a-z\d]+$/,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,b=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,v=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,E=254;function x(N){var B=N.replace(/^"(.+)"$/,"$1");if(!B.trim())return!1;var k=/[\.";<>]/.test(B);if(k){if(B===N)return!1;var F=B.split('"').length===B.split('\\"').length;if(!F)return!1}return!0}function D(N,B){if((0,t.default)(N),B=(0,s.default)(B,l),B.require_display_name||B.allow_display_name){var k=N.match(d);if(k){var F=k[1];if(N=N.replace(F,"").replace(/(^<|>$)/g,""),F.endsWith(" ")&&(F=F.slice(0,-1)),!x(F))return!1}else if(B.require_display_name)return!1}if(!B.ignore_max_length&&N.length>E)return!1;var T=N.split("@"),z=T.pop(),Z=z.toLowerCase();if(B.host_blacklist.length>0&&(0,n.default)(Z,B.host_blacklist)||B.host_whitelist.length>0&&!(0,n.default)(Z,B.host_whitelist))return!1;var Y=T.join("@");if(B.domain_specific_validation&&(Z==="gmail.com"||Z==="googlemail.com")){Y=Y.toLowerCase();var W=Y.split("+")[0];if(!(0,i.default)(W.replace(/\./g,""),{min:6,max:30}))return!1;for(var M=W.split("."),C=0;C<M.length;C++)if(!y.test(M[C]))return!1}if(B.ignore_max_length===!1&&(!(0,i.default)(Y,{max:64})||!(0,i.default)(z,{max:254})))return!1;if(!(0,a.default)(z,{require_tld:B.require_tld,ignore_max_length:B.ignore_max_length,allow_underscores:B.allow_underscores})){if(!B.allow_ip_domain)return!1;if(!(0,o.default)(z)){if(!z.startsWith("[")||!z.endsWith("]"))return!1;var R=z.slice(1,-1);if(R.length===0||!(0,o.default)(R))return!1}}if(B.blacklisted_chars&&Y.search(new RegExp("[".concat(B.blacklisted_chars,"]+"),"g"))!==-1)return!1;if(Y[0]==='"'&&Y[Y.length-1]==='"')return Y=Y.slice(1,Y.length-1),B.allow_utf8_local_part?v.test(Y):m.test(Y);for(var S=B.allow_utf8_local_part?b:h,_=Y.split("."),U=0;U<_.length;U++)if(!S.test(_[U]))return!1;return!0}r.exports=e.default,r.exports.default=e.default})(Km,Km.exports)),Km.exports}var Qm={exports:{}},Jm={exports:{}},QR;function TU(){return QR||(QR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(i,a){return i.indexOf(a)!==-1};e.default=t,r.exports=e.default,r.exports.default=e.default})(Jm,Jm.exports)),Jm.exports}var JR;function Vee(){return JR||(JR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=x;var t=c(We()),n=c(AU()),i=c(TU()),a=c(DA()),o=c(Rb()),s=c(oi());function c(D){return D&&D.__esModule?D:{default:D}}function l(D,N){return b(D)||m(D,N)||h(D,N)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(D,N){if(D){if(typeof D=="string")return y(D,N);var B={}.toString.call(D).slice(8,-1);return B==="Object"&&D.constructor&&(B=D.constructor.name),B==="Map"||B==="Set"?Array.from(D):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?y(D,N):void 0}}function y(D,N){(N==null||N>D.length)&&(N=D.length);for(var B=0,k=Array(N);B<N;B++)k[B]=D[B];return k}function m(D,N){var B=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(B!=null){var k,F,T,z,Z=[],Y=!0,W=!1;try{if(T=(B=B.call(D)).next,N!==0)for(;!(Y=(k=T.call(B)).done)&&(Z.push(k.value),Z.length!==N);Y=!0);}catch(M){W=!0,F=M}finally{try{if(!Y&&B.return!=null&&(z=B.return(),Object(z)!==z))return}finally{if(W)throw F}}return Z}}function b(D){if(Array.isArray(D))return D}var v={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},E=/^\[([^\]]+)\](?::([0-9]+))?$/;function x(D,N){if((0,t.default)(D),!D||/[\s<>]/.test(D)||D.indexOf("mailto:")===0||(N=(0,s.default)(N,v),N.validate_length&&D.length>N.max_allowed_length)||!N.allow_fragments&&(0,i.default)(D,"#")||!N.allow_query_components&&((0,i.default)(D,"?")||(0,i.default)(D,"&")))return!1;var B,k,F,T,z,Z,Y,W;Y=D.split("#"),D=Y.shift(),Y=D.split("?"),D=Y.shift();var M=D.match(/^([a-z][a-z0-9+\-.]*):/i),C=!1,R=function(Te){return C=!0,B=Te.toLowerCase(),N.require_valid_protocol&&N.protocols.indexOf(B)===-1?!1:D.substring(M[0].length)};if(M){var S=M[1],_=D.substring(M[0].length),U=_.slice(0,2)==="//";if(U){if(D=R(S),D===!1)return!1}else{var H=_.indexOf("/"),V=H===-1?_:_.substring(0,H),P=V.indexOf("@");if(P!==-1){var $=V.substring(0,P),te=/^[a-zA-Z0-9\-_.%:]*$/,ae=te.test($),ce=/%[0-9a-fA-F]{2}/.test($);if(ae&&!ce){if(N.require_protocol)return!1}else if(D=R(S),D===!1)return!1}else{var fe=/^[0-9]/.test(_);if(fe){if(N.require_protocol)return!1}else if(D=R(S),D===!1)return!1}}}else if(N.require_protocol)return!1;if(D.slice(0,2)==="//"){if(!C&&!N.allow_protocol_relative_urls)return!1;D=D.slice(2)}if(D==="")return!1;if(Y=D.split("/"),D=Y.shift(),D===""&&!N.require_host)return!0;if(Y=D.split("@"),Y.length>1){if(N.disallow_auth||Y[0]===""||(k=Y.shift(),k.indexOf(":")>=0&&k.split(":").length>2))return!1;var oe=k.split(":"),ye=l(oe,2),me=ye[0],ve=ye[1];if(me===""&&ve==="")return!1}T=Y.join("@"),Z=null,W=null;var we=T.match(E);if(we?(F="",W=we[1],Z=we[2]||null):(Y=T.split(":"),F=Y.shift(),Y.length&&(Z=Y.join(":"))),Z!==null&&Z.length>0){if(z=parseInt(Z,10),!/^[0-9]+$/.test(Z)||z<=0||z>65535)return!1}else if(N.require_port)return!1;return N.host_whitelist?(0,n.default)(F,N.host_whitelist):F===""&&!N.require_host?!0:!(!(0,o.default)(F)&&!(0,a.default)(F,N)&&(!W||!(0,o.default)(W,6))||(F=F||W,N.host_blacklist&&(0,n.default)(F,N.host_blacklist)))}r.exports=e.default,r.exports.default=e.default})(Qm,Qm.exports)),Qm.exports}var Xm={exports:{}},XR;function Hee(){return XR||(XR=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var t=n(We());function n(h){return h&&h.__esModule?h:{default:h}}var i=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,a=/^([0-9a-fA-F]){12}$/,o=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,s=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,c=/^([0-9a-fA-F]){16}$/,l=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;function d(h,y){return(0,t.default)(h),y!=null&&y.eui&&(y.eui=String(y.eui)),y!=null&&y.no_colons||y!=null&&y.no_separators?y.eui==="48"?a.test(h):y.eui==="64"?c.test(h):a.test(h)||c.test(h):y?.eui==="48"?i.test(h)||o.test(h):y?.eui==="64"?s.test(h)||l.test(h):d(h,{eui:"48"})||d(h,{eui:"64"})}r.exports=e.default,r.exports.default=e.default})(Xm,Xm.exports)),Xm.exports}var eg={exports:{}},eO;function Kee(){return eO||(eO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(We()),n=i(Rb());function i(l){return l&&l.__esModule?l:{default:l}}var a=/^\d{1,3}$/,o=32,s=128;function c(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(0,t.default)(l);var h=l.split("/");if(h.length!==2||!a.test(h[1])||h[1].length>1&&h[1].startsWith("0"))return!1;var y=(0,n.default)(h[0],d);if(!y)return!1;var m=null;switch(String(d)){case"4":m=o;break;case"6":m=s;break;default:m=(0,n.default)(h[0],"6")?s:o}return h[1]<=m&&h[1]>=0}r.exports=e.default,r.exports.default=e.default})(eg,eg.exports)),eg.exports}var tg={exports:{}},tO;function RU(){return tO||(tO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var t=n(oi());function n(v){return v&&v.__esModule?v:{default:v}}function i(v,E){return s(v)||o(v,E)||l(v,E)||a()}function a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o(v,E){var x=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(x!=null){var D,N,B,k,F=[],T=!0,z=!1;try{if(B=(x=x.call(v)).next,E!==0)for(;!(T=(D=B.call(x)).done)&&(F.push(D.value),F.length!==E);T=!0);}catch(Z){z=!0,N=Z}finally{try{if(!T&&x.return!=null&&(k=x.return(),Object(k)!==k))return}finally{if(z)throw N}}return F}}function s(v){if(Array.isArray(v))return v}function c(v,E){var x=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!x){if(Array.isArray(v)||(x=l(v))||E){x&&(v=x);var D=0,N=function(){};return{s:N,n:function(){return D>=v.length?{done:!0}:{done:!1,value:v[D++]}},e:function(z){throw z},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,k=!0,F=!1;return{s:function(){x=x.call(v)},n:function(){var z=x.next();return k=z.done,z},e:function(z){F=!0,B=z},f:function(){try{k||x.return==null||x.return()}finally{if(F)throw B}}}}function l(v,E){if(v){if(typeof v=="string")return d(v,E);var x={}.toString.call(v).slice(8,-1);return x==="Object"&&v.constructor&&(x=v.constructor.name),x==="Map"||x==="Set"?Array.from(v):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?d(v,E):void 0}}function d(v,E){(E==null||E>v.length)&&(E=v.length);for(var x=0,D=Array(E);x<E;x++)D[x]=v[x];return D}var h={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function y(v){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(v)}function m(v,E){for(var x=[],D=Math.max(v.length,E.length),N=0;N<D;N++)x.push([v[N],E[N]]);return x}function b(v,E){if(typeof E=="string"?E=(0,t.default)({format:E},h):E=(0,t.default)(E,h),typeof v=="string"&&y(E.format)){if(E.strictMode&&v.length!==E.format.length)return!1;var x=E.delimiters.find(function(S){return E.format.indexOf(S)!==-1}),D=E.strictMode?x:E.delimiters.find(function(S){return v.indexOf(S)!==-1}),N=m(v.split(D),E.format.toLowerCase().split(x)),B={},k=c(N),F;try{for(k.s();!(F=k.n()).done;){var T=i(F.value,2),z=T[0],Z=T[1];if(!z||!Z||z.length!==Z.length)return!1;B[Z.charAt(0)]=z}}catch(S){k.e(S)}finally{k.f()}var Y=B.y;if(Y.startsWith("-"))return!1;if(B.y.length===2){var W=parseInt(B.y,10);if(isNaN(W))return!1;var M=new Date().getFullYear()%100;W<M?Y="20".concat(B.y):Y="19".concat(B.y)}var C=B.m;B.m.length===1&&(C="0".concat(B.m));var R=B.d;return B.d.length===1&&(R="0".concat(B.d)),new Date("".concat(Y,"-").concat(C,"-").concat(R,"T00:00:00.000Z")).getUTCDate()===+B.d}return E.strictMode?!1:Object.prototype.toString.call(v)==="[object Date]"&&isFinite(v)}r.exports=e.default,r.exports.default=e.default})(tg,tg.exports)),tg.exports}var rg={exports:{}},rO;function Gee(){return rO||(rO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(oi());function n(s){return s&&s.__esModule?s:{default:s}}var i={hourFormat:"hour24",mode:"default"},a={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,withOptionalSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/,withOptionalSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9])(?::([0-5][0-9]))? (A|P)M$/}};function o(s,c){return c=(0,t.default)(c,i),typeof s!="string"?!1:a[c.hourFormat][c.mode].test(s)}r.exports=e.default,r.exports.default=e.default})(rg,rg.exports)),rg.exports}var ng={exports:{}},ig={exports:{}},nO;function Q0(){return nO||(nO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(i,a){return i.some(function(o){return a===o})};e.default=t,r.exports=e.default,r.exports.default=e.default})(ig,ig.exports)),ig.exports}var iO;function Wee(){return iO||(iO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(We()),n=i(Q0());function i(l){return l&&l.__esModule?l:{default:l}}var a={loose:!1},o=["true","false","1","0"],s=[].concat(o,["yes","no"]);function c(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;return(0,t.default)(l),d.loose?(0,n.default)(s,l.toLowerCase()):(0,n.default)(o,l)}r.exports=e.default,r.exports.default=e.default})(ng,ng.exports)),ng.exports}var ag={exports:{}},aO;function Zee(){return aO||(aO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=D;var t=n(We());function n(N){return N&&N.__esModule?N:{default:N}}var i="([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",a="(([a-zA-Z]{2,3}(-".concat(i,")?)|([a-zA-Z]{5,8}))"),o="([A-Za-z]{4})",s="([A-Za-z]{2}|\\d{3})",c="([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",l="(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])",d="(".concat(l,"(-[A-Za-z0-9]{2,8})+)"),h="(x(-[A-Za-z0-9]{1,8})+)",y="((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))",m="((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",b="(".concat(y,"|").concat(m,")"),v="(-|_)",E="".concat(a,"(").concat(v).concat(o,")?(").concat(v).concat(s,")?(").concat(v).concat(c,")*(").concat(v).concat(d,")*(").concat(v).concat(h,")?"),x=new RegExp("(^".concat(h,"$)|(^").concat(b,"$)|(^").concat(E,"$)"));function D(N){return(0,t.default)(N),x.test(N)}r.exports=e.default,r.exports.default=e.default})(ag,ag.exports)),ag.exports}var sg={exports:{}},sO;function Yee(){return sO||(sO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;function a(o){if((0,t.default)(o),!i.test(o))return!1;for(var s=0,c=0;c<o.length;c++)c%3===0?s+=o[c]*3:c%3===1?s+=o[c]*7:s+=o[c]*1;return s%10===0}r.exports=e.default,r.exports.default=e.default})(sg,sg.exports)),sg.exports}var If={},oO;function Qee(){if(oO)return If;oO=1,Object.defineProperty(If,"__esModule",{value:!0}),If.default=n,If.locales=void 0;var r=t(We()),e=Y0();function t(i){return i&&i.__esModule?i:{default:i}}function n(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,r.default)(i);var s=i,c=o.ignore;if(c)if(c instanceof RegExp)s=s.replace(c,"");else if(typeof c=="string")s=s.replace(new RegExp("[".concat(c.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(a in e.alpha)return e.alpha[a].test(s);throw new Error("Invalid locale '".concat(a,"'"))}return If.locales=Object.keys(e.alpha),If}var Df={},uO;function Jee(){if(uO)return Df;uO=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.default=n,Df.locales=void 0;var r=t(We()),e=Y0();function t(i){return i&&i.__esModule?i:{default:i}}function n(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,r.default)(i);var s=i,c=o.ignore;if(c)if(c instanceof RegExp)s=s.replace(c,"");else if(typeof c=="string")s=s.replace(new RegExp("[".concat(c.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(a in e.alphanumeric)return e.alphanumeric[a].test(s);throw new Error("Invalid locale '".concat(a,"'"))}return Df.locales=Object.keys(e.alphanumeric),Df}var og={exports:{}},cO;function Xee(){return cO||(cO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(We()),n=Y0();function i(s){return s&&s.__esModule?s:{default:s}}var a=/^[0-9]+$/;function o(s,c){return(0,t.default)(s),c&&c.no_symbols?a.test(s):new RegExp("^[+-]?([0-9]*[".concat((c||{}).locale?n.decimal[c.locale]:".","])?[0-9]+$")).test(s)}r.exports=e.default,r.exports.default=e.default})(og,og.exports)),og.exports}var Pf={},lO;function ete(){if(lO)return Pf;lO=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.default=n,Pf.locales=void 0;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$|^[A-Z]\d{6}[A-Z]{2}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$|^[A-Z]\d{8}$/,ZA:/^[TAMD]\d{8}$/};Pf.locales=Object.keys(t);function n(i,a){(0,r.default)(i);var o=i.replace(/\s/g,"").toUpperCase();return a.toUpperCase()in t&&t[a].test(o)}return Pf}var ug={exports:{}},cg={exports:{}},fO;function PA(){return fO||(fO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(We()),n=i(wU());function i(c){return c&&c.__esModule?c:{default:c}}var a=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,o=/^[-+]?[0-9]+$/;function s(c,l){(0,t.default)(c),l=l||{};var d=l.allow_leading_zeroes===!1?a:o,h=!l.hasOwnProperty("min")||(0,n.default)(l.min)||c>=l.min,y=!l.hasOwnProperty("max")||(0,n.default)(l.max)||c<=l.max,m=!l.hasOwnProperty("lt")||(0,n.default)(l.lt)||c<l.lt,b=!l.hasOwnProperty("gt")||(0,n.default)(l.gt)||c>l.gt;return d.test(c)&&h&&y&&m&&b}r.exports=e.default,r.exports.default=e.default})(cg,cg.exports)),cg.exports}var dO;function tte(){return dO||(dO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(PA());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a,{allow_leading_zeroes:!1,min:0,max:65535})}r.exports=e.default,r.exports.default=e.default})(ug,ug.exports)),ug.exports}var lg={exports:{}},hO;function rte(){return hO||(hO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a),a===a.toLowerCase()}r.exports=e.default,r.exports.default=e.default})(lg,lg.exports)),lg.exports}var fg={exports:{}},pO;function nte(){return pO||(pO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a),a===a.toUpperCase()}r.exports=e.default,r.exports.default=e.default})(fg,fg.exports)),fg.exports}var dg={exports:{}},yO;function ite(){return yO||(yO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(We());function n(s){return s&&s.__esModule?s:{default:s}}var i=/^[0-9]{15}$/,a=/^\d{2}-\d{6}-\d{6}-\d{1}$/;function o(s,c){(0,t.default)(s),c=c||{};var l=i;if(c.allow_hyphens&&(l=a),!l.test(s))return!1;s=s.replace(/-/g,"");for(var d=0,h=2,y=14,m=0;m<y;m++){var b=s.substring(y-m-1,y-m),v=parseInt(b,10)*h;v>=10?d+=v%10+1:d+=v,h===1?h+=1:h-=1}var E=(10-d%10)%10;return E===parseInt(s.substring(14,15),10)}r.exports=e.default,r.exports.default=e.default})(dg,dg.exports)),dg.exports}var hg={exports:{}},mO;function ate(){return mO||(mO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[\x00-\x7F]+$/;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(hg,hg.exports)),hg.exports}var Uf={},gO;function OU(){if(gO)return Uf;gO=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.default=n,Uf.fullWidth=void 0;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t=Uf.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function n(i){return(0,r.default)(i),t.test(i)}return Uf}var kf={},vO;function CU(){if(vO)return kf;vO=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.default=n,kf.halfWidth=void 0;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t=kf.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function n(i){return(0,r.default)(i),t.test(i)}return kf}var pg={exports:{}},bO;function ste(){return bO||(bO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=a(We()),n=OU(),i=CU();function a(s){return s&&s.__esModule?s:{default:s}}function o(s){return(0,t.default)(s),n.fullWidth.test(s)&&i.halfWidth.test(s)}r.exports=e.default,r.exports.default=e.default})(pg,pg.exports)),pg.exports}var yg={exports:{}},wO;function ote(){return wO||(wO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/[^\x00-\x7F]/;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(yg,yg.exports)),yg.exports}var mg={exports:{}},gg={exports:{}},_O;function ute(){return _O||(_O=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,i){var a=n.join("");return new RegExp(a,i)}r.exports=e.default,r.exports.default=e.default})(gg,gg.exports)),gg.exports}var EO;function cte(){return EO||(EO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(We()),n=i(ute());function i(s){return s&&s.__esModule?s:{default:s}}var a=(0,n.default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");function o(s){return(0,t.default)(s),a.test(s)}r.exports=e.default,r.exports.default=e.default})(mg,mg.exports)),mg.exports}var vg={exports:{}},xO;function lte(){return xO||(xO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(vg,vg.exports)),vg.exports}var bg={exports:{}},AO;function fte(){return AO||(AO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var t=o(oi()),n=o(We()),i=o(Q0()),a=Y0();function o(h){return h&&h.__esModule?h:{default:h}}function s(h){var y=new RegExp("^[-+]?([0-9]+)?(\\".concat(a.decimal[h.locale],"[0-9]{").concat(h.decimal_digits,"})").concat(h.force_decimal?"":"?","$"));return y}var c={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},l=["","-","+"];function d(h,y){if((0,n.default)(h),y=(0,t.default)(y,c),y.locale in a.decimal)return!(0,i.default)(l,h.replace(/ /g,""))&&s(y).test(h);throw new Error("Invalid locale '".concat(y.locale,"'"))}r.exports=e.default,r.exports.default=e.default})(bg,bg.exports)),bg.exports}var wg={exports:{}},SO;function NU(){return SO||(SO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^(0x|0h)?[0-9A-F]+$/i;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(wg,wg.exports)),wg.exports}var _g={exports:{}},MO;function dte(){return MO||(MO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^(0o)?[0-7]+$/i;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(_g,_g.exports)),_g.exports}var Eg={exports:{}},TO;function hte(){return TO||(TO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(We()),n=i(EU());function i(o){return o&&o.__esModule?o:{default:o}}function a(o,s){return(0,t.default)(o),(0,n.default)(o)%parseInt(s,10)===0}r.exports=e.default,r.exports.default=e.default})(Eg,Eg.exports)),Eg.exports}var xg={exports:{}},RO;function pte(){return RO||(RO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(We()),n=i(oi());function i(l){return l&&l.__esModule?l:{default:l}}var a=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i,o=/^#([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i,s={require_hashtag:!1};function c(l,d){(0,t.default)(l),d=(0,n.default)(d,s);var h=d.require_hashtag?o:a;return h.test(l)}r.exports=e.default,r.exports.default=e.default})(xg,xg.exports)),xg.exports}var Ag={exports:{}},OO;function yte(){return OO||(OO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var t=n(We());function n(h){return h&&h.__esModule?h:{default:h}}function i(h){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},i(h)}var a=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,o=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d\d?|1(\.0)?|0(\.0)?)\)$/,s=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,c=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d\d?|1(\.0)?|0(\.0)?)\)$/,l=/^rgba?/;function d(h,y){(0,t.default)(h);var m=!1,b=!0;if(i(y)!=="object"?arguments.length>=2&&(b=arguments[1]):(m=y.allowSpaces!==void 0?y.allowSpaces:m,b=y.includePercentValues!==void 0?y.includePercentValues:b),m){if(!l.test(h))return!1;h=h.replace(/\s/g,"")}return b?a.test(h)||o.test(h)||s.test(h)||c.test(h):a.test(h)||o.test(h)}r.exports=e.default,r.exports.default=e.default})(Ag,Ag.exports)),Ag.exports}var Sg={exports:{}},CO;function mte(){return CO||(CO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(We());function n(s){return s&&s.__esModule?s:{default:s}}var i=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,a=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;function o(s){(0,t.default)(s);var c=s.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/ig,"$1");return c.indexOf(",")!==-1?i.test(c):a.test(c)}r.exports=e.default,r.exports.default=e.default})(Sg,Sg.exports)),Sg.exports}var Mg={exports:{}},NO;function gte(){return NO||(NO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(Mg,Mg.exports)),Mg.exports}var qf={},BO;function vte(){if(BO)return qf;BO=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.default=s,qf.locales=void 0;var r=t(We()),e=t(Q0());function t(c){return c&&c.__esModule?c:{default:c}}var n={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})\d{22}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function i(c){var l=c.filter(function(d){return!(d in n)});return!(l.length>0)}function a(c,l){var d=c.replace(/[\s\-]+/gi,"").toUpperCase(),h=d.slice(0,2).toUpperCase(),y=h in n;if(l.whitelist){if(!i(l.whitelist))return!1;var m=(0,e.default)(l.whitelist,h);if(!m)return!1}if(l.blacklist){var b=(0,e.default)(l.blacklist,h);if(b)return!1}return y&&n[h].test(d)}function o(c){var l=c.replace(/[^A-Z0-9]+/gi,"").toUpperCase(),d=l.slice(4)+l.slice(0,4),h=d.replace(/[A-Z]/g,function(m){return m.charCodeAt(0)-55}),y=h.match(/\d{1,7}/g).reduce(function(m,b){return Number(m+b)%97},"");return y===1}function s(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,r.default)(c),a(c,l)&&o(c)}return qf.locales=Object.keys(n),qf}var Tg={exports:{}},Lf={},IO;function BU(){if(IO)return Lf;IO=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.CountryCodes=void 0,Lf.default=n;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function n(i){return(0,r.default)(i),t.has(i.toUpperCase())}return Lf.CountryCodes=t,Lf}var DO;function bte(){return DO||(DO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(We()),n=BU();function i(s){return s&&s.__esModule?s:{default:s}}var a=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;function o(s){(0,t.default)(s);var c=s.slice(4,6).toUpperCase();return!n.CountryCodes.has(c)&&c!=="XK"?!1:a.test(s)}r.exports=e.default,r.exports.default=e.default})(Tg,Tg.exports)),Tg.exports}var Rg={exports:{}},PO;function wte(){return PO||(PO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[a-f0-9]{32}$/;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(Rg,Rg.exports)),Rg.exports}var Og={exports:{}},UO;function _te(){return UO||(UO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};function a(o,s){(0,t.default)(o);var c=new RegExp("^[a-fA-F0-9]{".concat(i[s],"}$"));return c.test(o)}r.exports=e.default,r.exports.default=e.default})(Og,Og.exports)),Og.exports}var Cg={exports:{}},Ng={exports:{}},kO;function IU(){return kO||(kO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=i(We()),n=i(oi());function i(d){return d&&d.__esModule?d:{default:d}}var a=/^[A-Za-z0-9+/]+={0,2}$/,o=/^[A-Za-z0-9+/]+$/,s=/^[A-Za-z0-9_-]+={0,2}$/,c=/^[A-Za-z0-9_-]+$/;function l(d,h){var y;if((0,t.default)(d),h=(0,n.default)(h,{urlSafe:!1,padding:!((y=h)!==null&&y!==void 0&&y.urlSafe)}),d==="")return!0;if(h.padding&&d.length%4!==0)return!1;var m;return h.urlSafe?m=h.padding?s:c:m=h.padding?a:o,(!h.padding||d.length%4===0)&&m.test(d)}r.exports=e.default,r.exports.default=e.default})(Ng,Ng.exports)),Ng.exports}var qO;function Ete(){return qO||(qO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(We()),n=i(IU());function i(o){return o&&o.__esModule?o:{default:o}}function a(o){(0,t.default)(o);var s=o.split("."),c=s.length;return c!==3?!1:s.reduce(function(l,d){return l&&(0,n.default)(d,{urlSafe:!0})},!0)}r.exports=e.default,r.exports.default=e.default})(Cg,Cg.exports)),Cg.exports}var Bg={exports:{}},LO;function xte(){return LO||(LO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=a(We()),n=a(Q0()),i=a(oi());function a(l){return l&&l.__esModule?l:{default:l}}function o(l){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},o(l)}var s={allow_primitives:!1};function c(l,d){(0,t.default)(l);try{d=(0,i.default)(d,s);var h=[];d.allow_primitives&&(h=[null,!1,!0]);var y=JSON.parse(l);return(0,n.default)(h,y)||!!y&&o(y)==="object"}catch{}return!1}r.exports=e.default,r.exports.default=e.default})(Bg,Bg.exports)),Bg.exports}var Ig={exports:{}},jO;function Ate(){return jO||(jO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(We()),n=i(oi());function i(s){return s&&s.__esModule?s:{default:s}}var a={ignore_whitespace:!1};function o(s,c){return(0,t.default)(s),c=(0,n.default)(c,a),(c.ignore_whitespace?s.trim().length:s.length)===0}r.exports=e.default,r.exports.default=e.default})(Ig,Ig.exports)),Ig.exports}var Dg={exports:{}},$O;function Ste(){return $O||($O=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i(o)}function a(o,s){(0,t.default)(o);var c,l;i(s)==="object"?(c=s.min||0,l=s.max):(c=arguments[1]||0,l=arguments[2]);var d=o.match(/[^\uFE0F\uFE0E][\uFE0F\uFE0E]/g)||[],h=o.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],y=o.length-d.length-h.length,m=y>=c&&(typeof l>"u"||y<=l);return m&&Array.isArray(s?.discreteLengths)?s.discreteLengths.some(function(b){return b===y}):m}r.exports=e.default,r.exports.default=e.default})(Dg,Dg.exports)),Dg.exports}var Pg={exports:{}},FO;function Mte(){return FO||(FO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a),/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i.test(a)}r.exports=e.default,r.exports.default=e.default})(Pg,Pg.exports)),Pg.exports}var Ug={exports:{}},zO;function Tte(){return zO||(zO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,6:/^[0-9A-F]{8}-[0-9A-F]{4}-6[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,8:/^[0-9A-F]{8}-[0-9A-F]{4}-8[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,nil:/^00000000-0000-0000-0000-000000000000$/i,max:/^ffffffff-ffff-ffff-ffff-ffffffffffff$/i,loose:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,all:/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i};function a(o,s){return(0,t.default)(o),s==null&&(s="all"),s in i?i[s].test(o):!1}r.exports=e.default,r.exports.default=e.default})(Ug,Ug.exports)),Ug.exports}var kg={exports:{}},VO;function Rte(){return VO||(VO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(We()),n=i(NU());function i(o){return o&&o.__esModule?o:{default:o}}function a(o){return(0,t.default)(o),(0,n.default)(o)&&o.length===24}r.exports=e.default,r.exports.default=e.default})(kg,kg.exports)),kg.exports}var qg={exports:{}},HO;function Ote(){return HO||(HO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(IA());function n(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i(o)}function a(o,s){var c=(i(s)==="object"?s.comparisonDate:s)||Date().toString(),l=(0,t.default)(c),d=(0,t.default)(o);return!!(d&&l&&d>l)}r.exports=e.default,r.exports.default=e.default})(qg,qg.exports)),qg.exports}var Lg={exports:{}},KO;function Cte(){return KO||(KO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(IA());function n(o){return o&&o.__esModule?o:{default:o}}function i(o){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},i(o)}function a(o,s){var c=(i(s)==="object"?s.comparisonDate:s)||Date().toString(),l=(0,t.default)(c),d=(0,t.default)(o);return!!(d&&l&&d<l)}r.exports=e.default,r.exports.default=e.default})(Lg,Lg.exports)),Lg.exports}var jg={exports:{}},GO;function Nte(){return GO||(GO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(We()),n=i(xU());function i(s){return s&&s.__esModule?s:{default:s}}function a(s){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},a(s)}function o(s,c){(0,t.default)(s);var l;if(Object.prototype.toString.call(c)==="[object Array]"){var d=[];for(l in c)({}).hasOwnProperty.call(c,l)&&(d[l]=(0,n.default)(c[l]));return d.indexOf(s)>=0}else{if(a(c)==="object")return c.hasOwnProperty(s);if(c&&typeof c.indexOf=="function")return c.indexOf(s)>=0}return!1}r.exports=e.default,r.exports.default=e.default})(jg,jg.exports)),jg.exports}var $g={exports:{}},WO;function DU(){return WO||(WO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){(0,t.default)(a);for(var o=a.replace(/[- ]+/g,""),s=0,c,l,d,h=o.length-1;h>=0;h--)c=o.substring(h,h+1),l=parseInt(c,10),d?(l*=2,l>=10?s+=l%10+1:s+=l):s+=l,d=!d;return!!(s%10===0&&o)}r.exports=e.default,r.exports.default=e.default})($g,$g.exports)),$g.exports}var Fg={exports:{}},ZO;function Bte(){return ZO||(ZO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(We()),n=i(DU());function i(c){return c&&c.__esModule?c:{default:c}}var a={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},o=(function(){var c=[];for(var l in a)a.hasOwnProperty(l)&&c.push(a[l]);return c})();function s(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(c);var d=l.provider,h=c.replace(/[- ]+/g,"");if(d&&d.toLowerCase()in a){if(!a[d.toLowerCase()].test(h))return!1}else{if(d&&!(d.toLowerCase()in a))throw new Error("".concat(d," is not a valid credit card provider."));if(!o.some(function(y){return y.test(h)}))return!1}return(0,n.default)(c)}r.exports=e.default,r.exports.default=e.default})(Fg,Fg.exports)),Fg.exports}var zg={exports:{}},YO;function Ite(){return YO||(YO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=a(We()),n=a(Q0()),i=a(PA());function a(c){return c&&c.__esModule?c:{default:c}}var o={PL:function(l){(0,t.default)(l);var d={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(l!=null&&l.length===11&&(0,i.default)(l,{allow_leading_zeroes:!0})){var h=l.split("").slice(0,-1),y=h.reduce(function(v,E,x){return v+Number(E)*d[x+1]},0),m=y%10,b=Number(l.charAt(l.length-1));if(m===0&&b===0||b===10-m)return!0}return!1},ES:function(l){(0,t.default)(l);var d=/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/,h={X:0,Y:1,Z:2},y=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"],m=l.trim().toUpperCase();if(!d.test(m))return!1;var b=m.slice(0,-1).replace(/[X,Y,Z]/g,function(v){return h[v]});return m.endsWith(y[b%23])},FI:function(l){if((0,t.default)(l),l.length!==11||!l.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;var d="0123456789ABCDEFHJKLMNPRSTUVWXY",h=parseInt(l.slice(0,6),10)*1e3+parseInt(l.slice(7,10),10),y=h%31,m=d[y];return m===l.slice(10,11)},IN:function(l){var d=/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/,h=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],y=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],m=l.trim();if(!d.test(m))return!1;var b=0,v=m.replace(/\s/g,"").split("").map(Number).reverse();return v.forEach(function(E,x){b=h[b][y[x%8][E]]}),b===0},IR:function(l){if(!l.match(/^\d{10}$/)||(l="0000".concat(l).slice(l.length-6),parseInt(l.slice(3,9),10)===0))return!1;for(var d=parseInt(l.slice(9,10),10),h=0,y=0;y<9;y++)h+=parseInt(l.slice(y,y+1),10)*(10-y);return h%=11,h<2&&d===h||h>=2&&d===11-h},IT:function(l){return l.length!==9||l==="CA00000AA"?!1:l.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1},NO:function(l){var d=l.trim();if(isNaN(Number(d))||d.length!==11||d==="00000000000")return!1;var h=d.split("").map(Number),y=(11-(3*h[0]+7*h[1]+6*h[2]+1*h[3]+8*h[4]+9*h[5]+4*h[6]+5*h[7]+2*h[8])%11)%11,m=(11-(5*h[0]+4*h[1]+3*h[2]+2*h[3]+7*h[4]+6*h[5]+5*h[6]+4*h[7]+3*h[8]+2*y)%11)%11;return!(y!==h[9]||m!==h[10])},TH:function(l){if(!l.match(/^[1-8]\d{12}$/))return!1;for(var d=0,h=0;h<12;h++)d+=parseInt(l[h],10)*(13-h);return l[12]===((11-d%11)%10).toString()},LK:function(l){var d=/^[1-9]\d{8}[vx]$/i,h=/^[1-9]\d{11}$/i;return l.length===10&&d.test(l)?!0:!!(l.length===12&&h.test(l))},"he-IL":function(l){var d=/^\d{9}$/,h=l.trim();if(!d.test(h))return!1;for(var y=h,m=0,b,v=0;v<y.length;v++)b=Number(y[v])*(v%2+1),m+=b>9?b-9:b;return m%10===0},"ar-LY":function(l){var d=/^(1|2)\d{11}$/,h=l.trim();return!!d.test(h)},"ar-TN":function(l){var d=/^\d{8}$/,h=l.trim();return!!d.test(h)},"zh-CN":function(l){var d=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],h=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],y=["1","0","X","9","8","7","6","5","4","3","2"],m=function(k){return(0,n.default)(d,k)},b=function(k){var F=parseInt(k.substring(0,4),10),T=parseInt(k.substring(4,6),10),z=parseInt(k.substring(6),10),Z=new Date(F,T-1,z);return Z>new Date?!1:Z.getFullYear()===F&&Z.getMonth()===T-1&&Z.getDate()===z},v=function(k){for(var F=k.substring(0,17),T=0,z=0;z<17;z++)T+=parseInt(F.charAt(z),10)*parseInt(h[z],10);var Z=T%11;return y[Z]},E=function(k){return v(k)===k.charAt(17).toUpperCase()},x=function(k){var F=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(k);if(!F)return!1;var T=k.substring(0,2);if(F=m(T),!F)return!1;var z="19".concat(k.substring(6,12));return F=b(z),!!F},D=function(k){var F=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(k);if(!F)return!1;var T=k.substring(0,2);if(F=m(T),!F)return!1;var z=k.substring(6,14);return F=b(z),F?E(k):!1},N=function(k){var F=/^\d{15}|(\d{17}(\d|x|X))$/.test(k);return F?k.length===15?x(k):D(k):!1};return N(l)},"zh-HK":function(l){l=l.trim();var d=/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/,h=/^[0-9]$/;if(l=l.toUpperCase(),!d.test(l))return!1;l=l.replace(/\[|\]|\(|\)/g,""),l.length===8&&(l="3".concat(l));for(var y=0,m=0;m<=7;m++){var b=void 0;h.test(l[m])?b=l[m]:b=(l[m].charCodeAt(0)-55)%11,y+=b*(9-m)}y%=11;var v;return y===0?v="0":y===1?v="A":v=String(11-y),v===l[l.length-1]},"zh-TW":function(l){var d={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},h=l.trim().toUpperCase();return/^[A-Z][0-9]{9}$/.test(h)?Array.from(h).reduce(function(y,m,b){if(b===0){var v=d[m];return v%10*9+Math.floor(v/10)}return b===9?(10-y%10-Number(m))%10===0:y+Number(m)*(9-b)},0):!1},PK:function(l){var d=/^[1-7][0-9]{4}-[0-9]{7}-[1-9]$/,h=l.trim();return d.test(h)}};function s(c,l){if((0,t.default)(c),l in o)return o[l](c);if(l==="any"){for(var d in o)if(o.hasOwnProperty(d)){var h=o[d];if(h(c))return!0}return!1}throw new Error("Invalid locale '".concat(l,"'"))}r.exports=e.default,r.exports.default=e.default})(zg,zg.exports)),zg.exports}var Vg={exports:{}},QO;function Dte(){return QO||(QO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=n(We());function n(d){return d&&d.__esModule?d:{default:d}}var i=8,a=14,o=/^(\d{8}|\d{13}|\d{14})$/;function s(d,h){return d===i||d===a?h%2===0?3:1:h%2===0?1:3}function c(d){var h=d.slice(0,-1).split("").map(function(m,b){return Number(m)*s(d.length,b)}).reduce(function(m,b){return m+b},0),y=10-h%10;return y<10?y:0}function l(d){(0,t.default)(d);var h=Number(d.slice(-1));return o.test(d)&&h===c(d)}r.exports=e.default,r.exports.default=e.default})(Vg,Vg.exports)),Vg.exports}var Hg={exports:{}},JO;function Pte(){return JO||(JO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;function a(o){if((0,t.default)(o),!i.test(o))return!1;for(var s=!0,c=0,l=o.length-2;l>=0;l--)if(o[l]>="A"&&o[l]<="Z")for(var d=o[l].charCodeAt(0)-55,h=d%10,y=Math.trunc(d/10),m=0,b=[h,y];m<b.length;m++){var v=b[m];s?v>=5?c+=1+(v-5)*2:c+=v*2:c+=v,s=!s}else{var E=o[l].charCodeAt(0)-48;s?E>=5?c+=1+(E-5)*2:c+=E*2:c+=E,s=!s}var x=Math.trunc((c+9)/10)*10-c;return+o[o.length-1]===x}r.exports=e.default,r.exports.default=e.default})(Hg,Hg.exports)),Hg.exports}var Kg={exports:{}},XO;function Ute(){return XO||(XO=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(We());function n(c){return c&&c.__esModule?c:{default:c}}var i=/^(?:[0-9]{9}X|[0-9]{10})$/,a=/^(?:[0-9]{13})$/,o=[1,3];function s(c,l){(0,t.default)(c);var d=String(l?.version||l);if(!(l!=null&&l.version||l))return s(c,{version:10})||s(c,{version:13});var h=c.replace(/[\s-]+/g,""),y=0;if(d==="10"){if(!i.test(h))return!1;for(var m=0;m<d-1;m++)y+=(m+1)*h.charAt(m);if(h.charAt(9)==="X"?y+=100:y+=10*h.charAt(9),y%11===0)return!0}else if(d==="13"){if(!a.test(h))return!1;for(var b=0;b<12;b++)y+=o[b%2]*h.charAt(b);if(h.charAt(12)-(10-y%10)%10===0)return!0}return!1}r.exports=e.default,r.exports.default=e.default})(Kg,Kg.exports)),Kg.exports}var Gg={exports:{}},eC;function kte(){return eC||(eC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i="^\\d{4}-?\\d{3}[\\dX]$";function a(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(o);var c=i;if(c=s.require_hyphen?c.replace("?",""):c,c=s.case_sensitive?new RegExp(c):new RegExp(c,"i"),!c.test(o))return!1;for(var l=o.replace("-","").toUpperCase(),d=0,h=0;h<l.length;h++){var y=l[h];d+=(y==="X"?10:+y)*(8-h)}return d%11===0}r.exports=e.default,r.exports.default=e.default})(Gg,Gg.exports)),Gg.exports}var Wg={exports:{}},Kc={},tC;function PU(){if(tC)return Kc;tC=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.iso7064Check=r,Kc.luhnCheck=e,Kc.reverseMultiplyAndSum=t,Kc.verhoeffCheck=n;function r(i){for(var a=10,o=0;o<i.length-1;o++)a=(parseInt(i[o],10)+a)%10===0?20%11:(parseInt(i[o],10)+a)%10*2%11;return a=a===1?0:11-a,a===parseInt(i[10],10)}function e(i){for(var a=0,o=!1,s=i.length-1;s>=0;s--){if(o){var c=parseInt(i[s],10)*2;c>9?a+=c.toString().split("").map(function(l){return parseInt(l,10)}).reduce(function(l,d){return l+d},0):a+=c}else a+=parseInt(i[s],10);o=!o}return a%10===0}function t(i,a){for(var o=0,s=0;s<i.length;s++)o+=i[s]*(a-s);return o}function n(i){for(var a=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],o=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],s=i.split("").reverse().join(""),c=0,l=0;l<s.length;l++)c=a[c][o[l%8][parseInt(s[l],10)]];return c===0}return Kc}var rC;function qte(){return rC||(rC=1,(function(r,e){function t(L){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},t(L)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=ie;var n=s(We()),i=o(PU()),a=s(RU());function o(L,j){if(typeof WeakMap=="function")var X=new WeakMap,ue=new WeakMap;return(o=function(de,Be){if(!Be&&de&&de.__esModule)return de;var Me,Pe,Qe={__proto__:null,default:de};if(de===null||t(de)!="object"&&typeof de!="function")return Qe;if(Me=Be?ue:X){if(Me.has(de))return Me.get(de);Me.set(de,Qe)}for(var q in de)q!=="default"&&{}.hasOwnProperty.call(de,q)&&((Pe=(Me=Object.defineProperty)&&Object.getOwnPropertyDescriptor(de,q))&&(Pe.get||Pe.set)?Me(Qe,q,Pe):Qe[q]=de[q]);return Qe})(L,j)}function s(L){return L&&L.__esModule?L:{default:L}}function c(L){return y(L)||h(L)||d(L)||l()}function l(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(L,j){if(L){if(typeof L=="string")return m(L,j);var X={}.toString.call(L).slice(8,-1);return X==="Object"&&L.constructor&&(X=L.constructor.name),X==="Map"||X==="Set"?Array.from(L):X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)?m(L,j):void 0}}function h(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}function y(L){if(Array.isArray(L))return m(L)}function m(L,j){(j==null||j>L.length)&&(j=L.length);for(var X=0,ue=Array(j);X<j;X++)ue[X]=L[X];return ue}function b(L){var j=L.slice(0,2),X=parseInt(L.slice(2,4),10);X>40?(X-=40,j="20".concat(j)):X>20?(X-=20,j="18".concat(j)):j="19".concat(j),X<10&&(X="0".concat(X));var ue="".concat(j,"/").concat(X,"/").concat(L.slice(4,6));if(!(0,a.default)(ue,"YYYY/MM/DD"))return!1;for(var le=L.split("").map(function(Pe){return parseInt(Pe,10)}),de=[2,4,8,5,10,9,7,3,6],Be=0,Me=0;Me<de.length;Me++)Be+=le[Me]*de[Me];return Be=Be%11===10?0:Be%11,Be===le[9]}function v(L){var j=L.split(""),X=j.filter(function(le,de){return de%2}).map(function(le){return Number(le)*2}).join("").split(""),ue=j.filter(function(le,de){return!(de%2)}).concat(X).map(function(le){return Number(le)}).reduce(function(le,de){return le+de});return ue%10===0}function E(L){L=L.replace(/\W/,"");var j=parseInt(L.slice(0,2),10);if(L.length===10)j<54?j="20".concat(j):j="19".concat(j);else{if(L.slice(6)==="000")return!1;if(j<54)j="19".concat(j);else return!1}j.length===3&&(j=[j.slice(0,2),"0",j.slice(2)].join(""));var X=parseInt(L.slice(2,4),10);if(X>50&&(X-=50),X>20){if(parseInt(j,10)<2004)return!1;X-=20}X<10&&(X="0".concat(X));var ue="".concat(j,"/").concat(X,"/").concat(L.slice(4,6));if(!(0,a.default)(ue,"YYYY/MM/DD"))return!1;if(L.length===10&&parseInt(L,10)%11!==0){var le=parseInt(L.slice(0,9),10)%11;if(parseInt(j,10)<1986&&le===10){if(parseInt(L.slice(9),10)!==0)return!1}else return!1}return!0}function x(L){return i.luhnCheck(L)}function D(L){for(var j=L.split("").map(function(Pe){return parseInt(Pe,10)}),X=[],ue=0;ue<j.length-1;ue++){X.push("");for(var le=0;le<j.length-1;le++)j[ue]===j[le]&&(X[ue]+=le)}if(X=X.filter(function(Pe){return Pe.length>1}),X.length!==2&&X.length!==3)return!1;if(X[0].length===3){for(var de=X[0].split("").map(function(Pe){return parseInt(Pe,10)}),Be=0,Me=0;Me<de.length-1;Me++)de[Me]+1===de[Me+1]&&(Be+=1);if(Be===2)return!1}return i.iso7064Check(L)}function N(L){L=L.replace(/\W/,"");var j=parseInt(L.slice(4,6),10),X=L.slice(6,7);switch(X){case"0":case"1":case"2":case"3":j="19".concat(j);break;case"4":case"9":j<37?j="20".concat(j):j="19".concat(j);break;default:if(j<37)j="20".concat(j);else if(j>58)j="18".concat(j);else return!1;break}j.length===3&&(j=[j.slice(0,2),"0",j.slice(2)].join(""));var ue="".concat(j,"/").concat(L.slice(2,4),"/").concat(L.slice(0,2));if(!(0,a.default)(ue,"YYYY/MM/DD"))return!1;for(var le=L.split("").map(function(Pe){return parseInt(Pe,10)}),de=0,Be=4,Me=0;Me<9;Me++)de+=le[Me]*Be,Be-=1,Be===1&&(Be=7);return de%=11,de===1?!1:de===0?le[9]===0:le[9]===11-de}function B(L){for(var j=L.slice(0,8).split("").map(function(de){return parseInt(de,10)}),X=0,ue=1;ue<j.length;ue+=2)X+=j[ue];for(var le=0;le<j.length;le+=2)j[le]<2?X+=1-j[le]:(X+=2*(j[le]-2)+5,j[le]>4&&(X+=2));return String.fromCharCode(X%26+65)===L.charAt(8)}function k(L){for(var j=L.split("").map(function(le){return parseInt(le,10)}),X=0,ue=0;ue<8;ue++)X+=j[ue]*Math.pow(2,8-ue);return X%11%10===j[8]}function F(L){var j=i.reverseMultiplyAndSum(L.split("").slice(0,7).map(function(X){return parseInt(X,10)}),8);return L.length===9&&L[8]!=="W"&&(j+=(L[8].charCodeAt(0)-64)*9),j%=23,j===0?L[7].toUpperCase()==="W":L[7].toUpperCase()===String.fromCharCode(64+j)}var T={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function z(){var L=[];for(var j in T)T.hasOwnProperty(j)&&L.push.apply(L,c(T[j]));return L}function Z(L){return z().indexOf(L.slice(0,2))!==-1}function Y(L){for(var j=0,X=L.split(""),ue=parseInt(X.pop(),10),le=0;le<X.length;le++)j+=X[9-le]*(2+le%6);var de=11-j%11;return de===11?de=0:de===10&&(de=9),ue===de}function W(L){var j=L.toUpperCase().split("");if(isNaN(parseInt(j[0],10))&&j.length>1){var X=0;switch(j[0]){case"Y":X=1;break;case"Z":X=2;break}j.splice(0,1,X)}else for(;j.length<9;)j.unshift(0);var ue=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"];j=j.join("");var le=parseInt(j.slice(0,8),10)%23;return j[8]===ue[le]}function M(L){var j=L.slice(1,3),X=L.slice(0,1);switch(X){case"1":case"2":j="18".concat(j);break;case"3":case"4":j="19".concat(j);break;default:j="20".concat(j);break}var ue="".concat(j,"/").concat(L.slice(3,5),"/").concat(L.slice(5,7));if(!(0,a.default)(ue,"YYYY/MM/DD"))return!1;for(var le=L.split("").map(function(Qe){return parseInt(Qe,10)}),de=0,Be=1,Me=0;Me<10;Me++)de+=le[Me]*Be,Be+=1,Be===10&&(Be=1);if(de%11===10){de=0,Be=3;for(var Pe=0;Pe<10;Pe++)de+=le[Pe]*Be,Be+=1,Be===10&&(Be=1);if(de%11===10)return le[10]===0}return de%11===le[10]}function C(L){var j=L.slice(4,6),X=L.slice(6,7);switch(X){case"+":j="18".concat(j);break;case"-":j="19".concat(j);break;default:j="20".concat(j);break}var ue="".concat(j,"/").concat(L.slice(2,4),"/").concat(L.slice(0,2));if(!(0,a.default)(ue,"YYYY/MM/DD"))return!1;var le=parseInt(L.slice(0,6)+L.slice(7,10),10)%31;if(le<10)return le===parseInt(L.slice(10),10);le-=10;var de=["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return de[le]===L.slice(10)}function R(L){if(L.slice(2,4)!=="00"||L.slice(4,6)!=="00"){var j="".concat(L.slice(0,2),"/").concat(L.slice(2,4),"/").concat(L.slice(4,6));if(!(0,a.default)(j,"YY/MM/DD"))return!1}var X=97-parseInt(L.slice(0,9),10)%97,ue=parseInt(L.slice(9,11),10);return!(X!==ue&&(X=97-parseInt("2".concat(L.slice(0,9)),10)%97,X!==ue))}function S(L){L=L.replace(/\s/g,"");var j=parseInt(L.slice(0,10),10)%511,X=parseInt(L.slice(10,13),10);return j===X}function _(L){var j="".concat(L.slice(0,4),"/").concat(L.slice(4,6),"/").concat(L.slice(6,8));return!(0,a.default)(j,"YYYY/MM/DD")||!i.luhnCheck(L.slice(0,12))?!1:i.verhoeffCheck("".concat(L.slice(0,11)).concat(L[12]))}function U(L){return i.iso7064Check(L)}function H(L){for(var j=L.split("").map(function(le){return parseInt(le,10)}),X=8,ue=1;ue<9;ue++)X+=j[ue]*(ue+1);return X%11===j[9]}function V(L){for(var j=!1,X=!1,ue=0;ue<3;ue++)if(!j&&/[AEIOU]/.test(L[ue]))j=!0;else if(!X&&j&&L[ue]==="X")X=!0;else if(ue>0&&(j&&!X&&!/[AEIOU]/.test(L[ue])||X&&!/X/.test(L[ue])))return!1;return!0}function P(L){var j=L.toUpperCase().split("");if(!V(j.slice(0,3))||!V(j.slice(3,6)))return!1;for(var X=[6,7,9,10,12,13,14],ue={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},le=0,de=X;le<de.length;le++){var Be=de[le];j[Be]in ue&&j.splice(Be,1,ue[j[Be]])}var Me={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},Pe=Me[j[8]],Qe=parseInt(j[9]+j[10],10);Qe>40&&(Qe-=40),Qe<10&&(Qe="0".concat(Qe));var q="".concat(j[6]).concat(j[7],"/").concat(Pe,"/").concat(Qe);if(!(0,a.default)(q,"YY/MM/DD"))return!1;for(var w=0,A=1;A<j.length-1;A+=2){var K=parseInt(j[A],10);isNaN(K)&&(K=j[A].charCodeAt(0)-65),w+=K}for(var G={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},ee=0;ee<j.length-1;ee+=2){var ne=0;if(j[ee]in G)ne=G[j[ee]];else{var be=parseInt(j[ee],10);ne=2*be+1,be>4&&(ne+=2)}w+=ne}return String.fromCharCode(65+w%26)===j[15]}function $(L){L=L.replace(/\W/,"");var j=L.slice(0,2);if(j!=="32"){var X=L.slice(2,4);if(X!=="00"){var ue=L.slice(4,6);switch(L[6]){case"0":ue="18".concat(ue);break;case"1":ue="19".concat(ue);break;default:ue="20".concat(ue);break}var le="".concat(ue,"/").concat(L.slice(2,4),"/").concat(j);if(!(0,a.default)(le,"YYYY/MM/DD"))return!1}for(var de=1101,Be=[1,6,3,7,9,10,5,8,4,2],Me=0;Me<L.length-1;Me++)de-=parseInt(L[Me],10)*Be[Me];return parseInt(L[10],10)===de%11}return!0}function te(L){if(L.length!==9){for(var j=L.toUpperCase().split("");j.length<8;)j.unshift(0);switch(L[7]){case"A":case"P":if(parseInt(j[6],10)===0)return!1;break;default:{var X=parseInt(j.join("").slice(0,5),10);if(X>32e3)return!1;var ue=parseInt(j.join("").slice(5,7),10);if(X===ue)return!1}}}return!0}function ae(L){return i.reverseMultiplyAndSum(L.split("").slice(0,8).map(function(j){return parseInt(j,10)}),9)%11===parseInt(L[8],10)}function ce(L){if(L.length===10){for(var j=[6,5,7,2,3,4,5,6,7],X=0,ue=0;ue<j.length;ue++)X+=parseInt(L[ue],10)*j[ue];return X%=11,X===10?!1:X===parseInt(L[9],10)}var le=L.slice(0,2),de=parseInt(L.slice(2,4),10);de>80?(le="18".concat(le),de-=80):de>60?(le="22".concat(le),de-=60):de>40?(le="21".concat(le),de-=40):de>20?(le="20".concat(le),de-=20):le="19".concat(le),de<10&&(de="0".concat(de));var Be="".concat(le,"/").concat(de,"/").concat(L.slice(4,6));if(!(0,a.default)(Be,"YYYY/MM/DD"))return!1;for(var Me=0,Pe=1,Qe=0;Qe<L.length-1;Qe++)Me+=parseInt(L[Qe],10)*Pe%10,Pe+=2,Pe>10?Pe=1:Pe===5&&(Pe+=2);return Me=10-Me%10,Me===parseInt(L[10],10)}function fe(L){if(L.length===11){var j,X;if(j=0,L==="11111111111"||L==="22222222222"||L==="33333333333"||L==="44444444444"||L==="55555555555"||L==="66666666666"||L==="77777777777"||L==="88888888888"||L==="99999999999"||L==="00000000000")return!1;for(var ue=1;ue<=9;ue++)j+=parseInt(L.substring(ue-1,ue),10)*(11-ue);if(X=j*10%11,X===10&&(X=0),X!==parseInt(L.substring(9,10),10))return!1;j=0;for(var le=1;le<=10;le++)j+=parseInt(L.substring(le-1,le),10)*(12-le);return X=j*10%11,X===10&&(X=0),X===parseInt(L.substring(10,11),10)}if(L==="00000000000000"||L==="11111111111111"||L==="22222222222222"||L==="33333333333333"||L==="44444444444444"||L==="55555555555555"||L==="66666666666666"||L==="77777777777777"||L==="88888888888888"||L==="99999999999999")return!1;for(var de=L.length-2,Be=L.substring(0,de),Me=L.substring(de),Pe=0,Qe=de-7,q=de;q>=1;q--)Pe+=Be.charAt(de-q)*Qe,Qe-=1,Qe<2&&(Qe=9);var w=Pe%11<2?0:11-Pe%11;if(w!==parseInt(Me.charAt(0),10))return!1;de+=1,Be=L.substring(0,de),Pe=0,Qe=de-7;for(var A=de;A>=1;A--)Pe+=Be.charAt(de-A)*Qe,Qe-=1,Qe<2&&(Qe=9);return w=Pe%11<2?0:11-Pe%11,w===parseInt(Me.charAt(1),10)}function oe(L){var j=11-i.reverseMultiplyAndSum(L.split("").slice(0,8).map(function(X){return parseInt(X,10)}),9)%11;return j>9?parseInt(L[8],10)===0:j===parseInt(L[8],10)}function ye(L){if(L.slice(0,4)!=="9000"){var j=L.slice(1,3);switch(L[0]){case"1":case"2":j="19".concat(j);break;case"3":case"4":j="18".concat(j);break;case"5":case"6":j="20".concat(j);break}var X="".concat(j,"/").concat(L.slice(3,5),"/").concat(L.slice(5,7));if(X.length===8){if(!(0,a.default)(X,"YY/MM/DD"))return!1}else if(!(0,a.default)(X,"YYYY/MM/DD"))return!1;for(var ue=L.split("").map(function(Me){return parseInt(Me,10)}),le=[2,7,9,1,4,6,3,5,8,2,7,9],de=0,Be=0;Be<le.length;Be++)de+=ue[Be]*le[Be];return de%11===10?ue[12]===1:ue[12]===de%11}return!0}function me(L){if(L.length===9){if(L=L.replace(/\W/,""),L.slice(6)==="000")return!1;var j=parseInt(L.slice(0,2),10);if(j>53)return!1;j<10?j="190".concat(j):j="19".concat(j);var X=parseInt(L.slice(2,4),10);X>50&&(X-=50),X<10&&(X="0".concat(X));var ue="".concat(j,"/").concat(X,"/").concat(L.slice(4,6));if(!(0,a.default)(ue,"YYYY/MM/DD"))return!1}return!0}function ve(L){var j=11-i.reverseMultiplyAndSum(L.split("").slice(0,7).map(function(X){return parseInt(X,10)}),8)%11;return j===10?parseInt(L[7],10)===0:j===parseInt(L[7],10)}function we(L){var j=L.slice(0);L.length>11&&(j=j.slice(2));var X="",ue=j.slice(2,4),le=parseInt(j.slice(4,6),10);if(L.length>11)X=L.slice(0,4);else if(X=L.slice(0,2),L.length===11&&le<60){var de=new Date().getFullYear().toString(),Be=parseInt(de.slice(0,2),10);if(de=parseInt(de,10),L[6]==="-")parseInt("".concat(Be).concat(X),10)>de?X="".concat(Be-1).concat(X):X="".concat(Be).concat(X);else if(X="".concat(Be-1).concat(X),de-parseInt(X,10)<100)return!1}le>60&&(le-=60),le<10&&(le="0".concat(le));var Me="".concat(X,"/").concat(ue,"/").concat(le);if(Me.length===8){if(!(0,a.default)(Me,"YY/MM/DD"))return!1}else if(!(0,a.default)(Me,"YYYY/MM/DD"))return!1;return i.luhnCheck(L.replace(/\W/,""))}function De(L){for(var j=L.split("").map(function(de){return parseInt(de,10)}),X=[-1,5,7,9,4,6,10,5,7],ue=0,le=0;le<X.length;le++)ue+=j[le]*X[le];return ue%11===10?j[9]===0:j[9]===ue%11}var Te={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};Te["lb-LU"]=Te["fr-LU"],Te["lt-LT"]=Te["et-EE"],Te["nl-BE"]=Te["fr-BE"],Te["fr-CA"]=Te["en-CA"];var Se={"bg-BG":b,"cs-CZ":E,"de-AT":x,"de-DE":D,"dk-DK":N,"el-CY":B,"el-GR":k,"en-CA":v,"en-IE":F,"en-US":Z,"es-AR":Y,"es-ES":W,"et-EE":M,"fi-FI":C,"fr-BE":R,"fr-FR":S,"fr-LU":_,"hr-HR":U,"hu-HU":H,"it-IT":P,"lv-LV":$,"mt-MT":te,"nl-NL":ae,"pl-PL":ce,"pt-BR":fe,"pt-PT":oe,"ro-RO":ye,"sk-SK":me,"sl-SI":ve,"sv-SE":we,"uk-UA":De};Se["lb-LU"]=Se["fr-LU"],Se["lt-LT"]=Se["et-EE"],Se["nl-BE"]=Se["fr-BE"],Se["fr-CA"]=Se["en-CA"];var Le=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,$e={"de-AT":Le,"de-DE":/[\/\\]/g,"fr-BE":Le};$e["nl-BE"]=$e["fr-BE"];function ie(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US";(0,n.default)(L);var X=L.slice(0);if(j in Te)return j in $e&&(X=X.replace($e[j],"")),Te[j].test(X)?j in Se?Se[j](X):!0:!1;throw new Error("Invalid locale '".concat(j,"'"))}r.exports=e.default,r.exports.default=e.default})(Wg,Wg.exports)),Wg.exports}var jf={},nC;function Lte(){if(nC)return jf;nC=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.default=n,jf.locales=void 0;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?([79][1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"ar-QA":/^(\+?974|0)?([3567]\d{7})$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|7|6|5|4)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+?244)?9\d{8}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};t["en-CA"]=t["en-US"],t["fr-CA"]=t["en-CA"],t["fr-BE"]=t["nl-BE"],t["zh-HK"]=t["en-HK"],t["zh-MO"]=t["en-MO"],t["ga-IE"]=t["en-IE"],t["fr-CH"]=t["de-CH"],t["it-CH"]=t["fr-CH"];function n(i,a,o){if((0,r.default)(i),o&&o.strictMode&&!i.startsWith("+"))return!1;if(Array.isArray(a))return a.some(function(l){if(t.hasOwnProperty(l)){var d=t[l];if(d.test(i))return!0}return!1});if(a in t)return t[a].test(i);if(!a||a==="any"){for(var s in t)if(t.hasOwnProperty(s)){var c=t[s];if(c.test(i))return!0}return!1}throw new Error("Invalid locale '".concat(a,"'"))}return jf.locales=Object.keys(t),jf}var Zg={exports:{}},iC;function jte(){return iC||(iC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^(0x)[0-9a-f]{40}$/i;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(Zg,Zg.exports)),Zg.exports}var Yg={exports:{}},aC;function $te(){return aC||(aC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(oi()),n=i(We());function i(c){return c&&c.__esModule?c:{default:c}}function a(c){var l="\\d{".concat(c.digits_after_decimal[0],"}");c.digits_after_decimal.forEach(function(D,N){N!==0&&(l="".concat(l,"|\\d{").concat(D,"}"))});var d="(".concat(c.symbol.replace(/\W/,function(D){return"\\".concat(D)}),")").concat(c.require_symbol?"":"?"),h="-?",y="[1-9]\\d*",m="[1-9]\\d{0,2}(\\".concat(c.thousands_separator,"\\d{3})*"),b=["0",y,m],v="(".concat(b.join("|"),")?"),E="(\\".concat(c.decimal_separator,"(").concat(l,"))").concat(c.require_decimal?"":"?"),x=v+(c.allow_decimal||c.require_decimal?E:"");return c.allow_negatives&&!c.parens_for_negatives&&(c.negative_sign_after_digits?x+=h:c.negative_sign_before_digits&&(x=h+x)),c.allow_negative_sign_placeholder?x="( (?!\\-))?".concat(x):c.allow_space_after_symbol?x=" ?".concat(x):c.allow_space_after_digits&&(x+="( (?!$))?"),c.symbol_after_digits?x+=d:x=d+x,c.allow_negatives&&(c.parens_for_negatives?x="(\\(".concat(x,"\\)|").concat(x,")"):c.negative_sign_before_digits||c.negative_sign_after_digits||(x=h+x)),new RegExp("^(?!-? )(?=.*\\d)".concat(x,"$"))}var o={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};function s(c,l){return(0,n.default)(c),l=(0,t.default)(l,o),a(l).test(c)}r.exports=e.default,r.exports.default=e.default})(Yg,Yg.exports)),Yg.exports}var Qg={exports:{}},sC;function Fte(){return sC||(sC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(We());function n(s){return s&&s.__esModule?s:{default:s}}var i=/^(bc1|tb1|bc1p|tb1p)[ac-hj-np-z02-9]{39,58}$/,a=/^(1|2|3|m)[A-HJ-NP-Za-km-z1-9]{25,39}$/;function o(s){return(0,t.default)(s),i.test(s)||a.test(s)}r.exports=e.default,r.exports.default=e.default})(Qg,Qg.exports)),Qg.exports}var $f={},oC;function zte(){if(oC)return $f;oC=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.isFreightContainerID=void 0,$f.isISO6346=i;var r=e(We());function e(a){return a&&a.__esModule?a:{default:a}}var t=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,n=/^[0-9]$/;function i(a){if((0,r.default)(a),a=a.toUpperCase(),!t.test(a))return!1;if(a.length===11){for(var o=0,s=0;s<a.length-1;s++)if(n.test(a[s]))o+=a[s]*Math.pow(2,s);else{var c=void 0,l=a.charCodeAt(s)-55;l<11?c=l:l>=11&&l<=20?c=12+l%11:l>=21&&l<=30?c=23+l%21:c=34+l%31,o+=c*Math.pow(2,s)}var d=o%11;return d===10&&(d=0),Number(a[a.length-1])===d}return!0}return $f.isFreightContainerID=i,$f}var Jg={exports:{}},uC;function Vte(){return uC||(uC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);function a(o){return(0,t.default)(o),i.has(o)}r.exports=e.default,r.exports.default=e.default})(Jg,Jg.exports)),Jg.exports}var Xg={exports:{}},cC;function Hte(){return cC||(cC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(We());function n(c){return c&&c.__esModule?c:{default:c}}var i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,a=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,o=function(l){var d=l.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(d){var h=Number(d[1]),y=Number(d[2]);return h%4===0&&h%100!==0||h%400===0?y<=366:y<=365}var m=l.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),b=m[1],v=m[2],E=m[3],x=v&&"0".concat(v).slice(-2),D=E&&"0".concat(E).slice(-2),N=new Date("".concat(b,"-").concat(x||"01","-").concat(D||"01"));return v&&E?N.getUTCFullYear()===b&&N.getUTCMonth()+1===v&&N.getUTCDate()===E:!0};function s(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(c);var d=l.strictSeparator?a.test(c):i.test(c);return d&&l.strict?o(c):d}r.exports=e.default,r.exports.default=e.default})(Xg,Xg.exports)),Xg.exports}var e1={exports:{}},lC;function Kte(){return lC||(lC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=x;var t=n(We());function n(D){return D&&D.__esModule?D:{default:D}}var i=/[0-9]{4}/,a=/(0[1-9]|1[0-2])/,o=/([12]\d|0[1-9]|3[01])/,s=/([01][0-9]|2[0-3])/,c=/[0-5][0-9]/,l=/([0-5][0-9]|60)/,d=/(\.[0-9]+)?/,h=new RegExp("[-+]".concat(s.source,":").concat(c.source)),y=new RegExp("([zZ]|".concat(h.source,")")),m=new RegExp("".concat(s.source,":").concat(c.source,":").concat(l.source).concat(d.source)),b=new RegExp("".concat(i.source,"-").concat(a.source,"-").concat(o.source)),v=new RegExp("".concat(m.source).concat(y.source)),E=new RegExp("^".concat(b.source,"[ tT]").concat(v.source,"$"));function x(D){return(0,t.default)(D),E.test(D)}r.exports=e.default,r.exports.default=e.default})(e1,e1.exports)),e1.exports}var Ff={},fC;function Gte(){if(fC)return Ff;fC=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.ScriptCodes=void 0,Ff.default=n;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t=new Set(["Adlm","Afak","Aghb","Ahom","Arab","Aran","Armi","Armn","Avst","Bali","Bamu","Bass","Batk","Beng","Bhks","Blis","Bopo","Brah","Brai","Bugi","Buhd","Cakm","Cans","Cari","Cham","Cher","Chis","Chrs","Cirt","Copt","Cpmn","Cprt","Cyrl","Cyrs","Deva","Diak","Dogr","Dsrt","Dupl","Egyd","Egyh","Egyp","Elba","Elym","Ethi","Gara","Geok","Geor","Glag","Gong","Gonm","Goth","Gran","Grek","Gujr","Gukh","Guru","Hanb","Hang","Hani","Hano","Hans","Hant","Hatr","Hebr","Hira","Hluw","Hmng","Hmnp","Hrkt","Hung","Inds","Ital","Jamo","Java","Jpan","Jurc","Kali","Kana","Kawi","Khar","Khmr","Khoj","Kitl","Kits","Knda","Kore","Kpel","Krai","Kthi","Lana","Laoo","Latf","Latg","Latn","Leke","Lepc","Limb","Lina","Linb","Lisu","Loma","Lyci","Lydi","Mahj","Maka","Mand","Mani","Marc","Maya","Medf","Mend","Merc","Mero","Mlym","Modi","Mong","Moon","Mroo","Mtei","Mult","Mymr","Nagm","Nand","Narb","Nbat","Newa","Nkdb","Nkgb","Nkoo","Nshu","Ogam","Olck","Onao","Orkh","Orya","Osge","Osma","Ougr","Palm","Pauc","Pcun","Pelm","Perm","Phag","Phli","Phlp","Phlv","Phnx","Plrd","Piqd","Prti","Psin","Qaaa","Qaab","Qaac","Qaad","Qaae","Qaaf","Qaag","Qaah","Qaai","Qaaj","Qaak","Qaal","Qaam","Qaan","Qaao","Qaap","Qaaq","Qaar","Qaas","Qaat","Qaau","Qaav","Qaaw","Qaax","Qaay","Qaaz","Qaba","Qabb","Qabc","Qabd","Qabe","Qabf","Qabg","Qabh","Qabi","Qabj","Qabk","Qabl","Qabm","Qabn","Qabo","Qabp","Qabq","Qabr","Qabs","Qabt","Qabu","Qabv","Qabw","Qabx","Ranj","Rjng","Rohg","Roro","Runr","Samr","Sara","Sarb","Saur","Sgnw","Shaw","Shrd","Shui","Sidd","Sidt","Sind","Sinh","Sogd","Sogo","Sora","Soyo","Sund","Sunu","Sylo","Syrc","Syre","Syrj","Syrn","Tagb","Takr","Tale","Talu","Taml","Tang","Tavt","Tayo","Telu","Teng","Tfng","Tglg","Thaa","Thai","Tibt","Tirh","Tnsa","Todr","Tols","Toto","Tutg","Ugar","Vaii","Visp","Vith","Wara","Wcho","Wole","Xpeo","Xsux","Yezi","Yiii","Zanb","Zinh","Zmth","Zsye","Zsym","Zxxx","Zyyy","Zzzz"]);function n(i){return(0,r.default)(i),t.has(i)}return Ff.ScriptCodes=t,Ff}var t1={exports:{}},dC;function Wte(){return dC||(dC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);function a(o){return(0,t.default)(o),i.has(o.toUpperCase())}r.exports=e.default,r.exports.default=e.default})(t1,t1.exports)),t1.exports}var r1={exports:{}},hC;function Zte(){return hC||(hC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=new Set(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]);function a(o){return(0,t.default)(o),i.has(o)}r.exports=e.default,r.exports.default=e.default})(r1,r1.exports)),r1.exports}var zf={},pC;function Yte(){if(pC)return zf;pC=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.CurrencyCodes=void 0,zf.default=n;var r=e(We());function e(i){return i&&i.__esModule?i:{default:i}}var t=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VED","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);function n(i){return(0,r.default)(i),t.has(i.toUpperCase())}return zf.CurrencyCodes=t,zf}var n1={exports:{}},yC;function Qte(){return yC||(yC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(We()),n=i(oi());function i(l){return l&&l.__esModule?l:{default:l}}var a=/^[A-Z2-7]+=*$/,o=/^[A-HJKMNP-TV-Z0-9]+$/,s={crockford:!1};function c(l,d){if((0,t.default)(l),d=(0,n.default)(d,s),d.crockford)return o.test(l);var h=l.length;return!!(h%8===0&&a.test(l))}r.exports=e.default,r.exports.default=e.default})(n1,n1.exports)),n1.exports}var i1={exports:{}},mC;function Jte(){return mC||(mC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[A-HJ-NP-Za-km-z1-9]*$/;function a(o){return(0,t.default)(o),!!i.test(o)}r.exports=e.default,r.exports.default=e.default})(i1,i1.exports)),i1.exports}var a1={exports:{}},gC;function Xte(){return gC||(gC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(We());function n(c){return c&&c.__esModule?c:{default:c}}var i=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,a=/^[a-z\-]+=[a-z0-9\-]+$/i,o=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;function s(c){(0,t.default)(c);var l=c.split(",");if(l.length<2)return!1;var d=l.shift().trim().split(";"),h=d.shift();if(h.slice(0,5)!=="data:")return!1;var y=h.slice(5);if(y!==""&&!i.test(y))return!1;for(var m=0;m<d.length;m++)if(!(m===d.length-1&&d[m].toLowerCase()==="base64")&&!a.test(d[m]))return!1;for(var b=0;b<l.length;b++)if(!o.test(l[b]))return!1;return!0}r.exports=e.default,r.exports.default=e.default})(a1,a1.exports)),a1.exports}var s1={exports:{}},vC;function ere(){return vC||(vC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function a(o){return(0,t.default)(o),o.indexOf("magnet:?")!==0?!1:i.test(o)}r.exports=e.default,r.exports.default=e.default})(s1,s1.exports)),s1.exports}var o1={exports:{}},u1={exports:{}},c1={exports:{}},bC;function UU(){return bC||(bC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){if((0,t.default)(a),o){var s=new RegExp("[".concat(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return a.replace(s,"")}for(var c=a.length-1;/\s/.test(a.charAt(c));)c-=1;return a.slice(0,c+1)}r.exports=e.default,r.exports.default=e.default})(c1,c1.exports)),c1.exports}var l1={exports:{}},wC;function kU(){return wC||(wC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){(0,t.default)(a);var s=o?new RegExp("^[".concat(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return a.replace(s,"")}r.exports=e.default,r.exports.default=e.default})(l1,l1.exports)),l1.exports}var _C;function qU(){return _C||(_C=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(UU()),n=i(kU());function i(o){return o&&o.__esModule?o:{default:o}}function a(o,s){return(0,t.default)((0,n.default)(o,s),s)}r.exports=e.default,r.exports.default=e.default})(u1,u1.exports)),u1.exports}var EC;function tre(){return EC||(EC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=b;var t=a(qU()),n=a(MU()),i=a(We());function a(v){return v&&v.__esModule?v:{default:v}}function o(v,E){return l(v)||c(v,E)||h(v,E)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(v,E){var x=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(x!=null){var D,N,B,k,F=[],T=!0,z=!1;try{if(B=(x=x.call(v)).next,E!==0)for(;!(T=(D=B.call(x)).done)&&(F.push(D.value),F.length!==E);T=!0);}catch(Z){z=!0,N=Z}finally{try{if(!T&&x.return!=null&&(k=x.return(),Object(k)!==k))return}finally{if(z)throw N}}return F}}function l(v){if(Array.isArray(v))return v}function d(v,E){var x=typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(!x){if(Array.isArray(v)||(x=h(v))||E){x&&(v=x);var D=0,N=function(){};return{s:N,n:function(){return D>=v.length?{done:!0}:{done:!1,value:v[D++]}},e:function(z){throw z},f:N}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,k=!0,F=!1;return{s:function(){x=x.call(v)},n:function(){var z=x.next();return k=z.done,z},e:function(z){F=!0,B=z},f:function(){try{k||x.return==null||x.return()}finally{if(F)throw B}}}}function h(v,E){if(v){if(typeof v=="string")return y(v,E);var x={}.toString.call(v).slice(8,-1);return x==="Object"&&v.constructor&&(x=v.constructor.name),x==="Map"||x==="Set"?Array.from(v):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?y(v,E):void 0}}function y(v,E){(E==null||E>v.length)&&(E=v.length);for(var x=0,D=Array(E);x<E;x++)D[x]=v[x];return D}function m(v){var E=new Set(["subject","body","cc","bcc"]),x={cc:"",bcc:""},D=!1,N=v.split("&");if(N.length>4)return!1;var B=d(N),k;try{for(B.s();!(k=B.n()).done;){var F=k.value,T=F.split("="),z=o(T,2),Z=z[0],Y=z[1];if(Z&&!E.has(Z)){D=!0;break}Y&&(Z==="cc"||Z==="bcc")&&(x[Z]=Y),Z&&E.delete(Z)}}catch(W){B.e(W)}finally{B.f()}return D?!1:x}function b(v,E){if((0,i.default)(v),v.indexOf("mailto:")!==0)return!1;var x=v.replace("mailto:","").split("?"),D=o(x,2),N=D[0],B=D[1],k=B===void 0?"":B;if(!N&&!k)return!0;var F=m(k);return F?"".concat(N,",").concat(F.cc,",").concat(F.bcc).split(",").every(function(T){return T=(0,t.default)(T," "),T?(0,n.default)(T,E):!0}):!1}r.exports=e.default,r.exports.default=e.default})(o1,o1.exports)),o1.exports}var f1={exports:{}},xC;function rre(){return xC||(xC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(We());function n(c){return c&&c.__esModule?c:{default:c}}var i=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,a=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,o=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;function s(c){return(0,t.default)(c),i.test(c)||a.test(c)||o.test(c)}r.exports=e.default,r.exports.default=e.default})(f1,f1.exports)),f1.exports}var d1={exports:{}},AC;function nre(){return AC||(AC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var t=a(We()),n=a(oi()),i=a(TU());function a(y){return y&&y.__esModule?y:{default:y}}var o=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,s=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,c=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,l=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,d={checkDMS:!1};function h(y,m){if((0,t.default)(y),m=(0,n.default)(m,d),!(0,i.default)(y,","))return!1;var b=y.split(",");return b[0].startsWith("(")&&!b[1].endsWith(")")||b[1].endsWith(")")&&!b[0].startsWith("(")?!1:m.checkDMS?c.test(b[0])&&l.test(b[1]):o.test(b[0])&&s.test(b[1])}r.exports=e.default,r.exports.default=e.default})(d1,d1.exports)),d1.exports}var Vf={},SC;function ire(){if(SC)return Vf;SC=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.default=s,Vf.locales=void 0;var r=e(We());function e(c){return c&&c.__esModule?c:{default:c}}var t=/^\d{3}$/,n=/^\d{4}$/,i=/^\d{5}$/,a=/^\d{6}$/,o={AD:/^AD\d{3}$/,AT:n,AU:n,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BD:/^([1-8][0-9]{3}|9[0-4][0-9]{2})$/,BE:n,BG:n,BR:/^\d{5}-?\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:n,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CO:/^(05|08|11|13|15|17|18|19|20|23|25|27|41|44|47|50|52|54|63|66|68|70|73|76|81|85|86|88|91|94|95|97|99)(\d{4})$/,CZ:/^\d{3}\s?\d{2}$/,DE:i,DK:n,DO:i,DZ:i,EE:i,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:i,FR:/^(?:(?:0[1-9]|[1-8]\d|9[0-5])\d{3}|97[1-46]\d{2})$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:n,ID:i,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:t,IT:i,JP:/^\d{3}\-\d{4}$/,KE:i,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:n,LV:/^LV\-\d{4}$/,LK:i,MG:t,MX:i,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:i,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:n,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:n,PK:i,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:a,RU:a,SA:i,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:a,SI:n,SK:/^\d{3}\s?\d{2}$/,TH:i,TN:n,TW:/^\d{3}(\d{2,3})?$/,UA:i,US:/^\d{5}(-\d{4})?$/,ZA:n,ZM:i};Vf.locales=Object.keys(o);function s(c,l){if((0,r.default)(c),l in o)return o[l].test(c);if(l==="any"){for(var d in o)if(o.hasOwnProperty(d)){var h=o[d];if(h.test(c))return!0}return!1}throw new Error("Invalid locale '".concat(l,"'"))}return Vf}var h1={exports:{}},MC;function are(){return MC||(MC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a),a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}r.exports=e.default,r.exports.default=e.default})(h1,h1.exports)),h1.exports}var p1={exports:{}},TC;function sre(){return TC||(TC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a){return(0,t.default)(a),a.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")}r.exports=e.default,r.exports.default=e.default})(p1,p1.exports)),p1.exports}var y1={exports:{}},m1={exports:{}},RC;function LU(){return RC||(RC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){return(0,t.default)(a),a.replace(new RegExp("[".concat(o,"]+"),"g"),"")}r.exports=e.default,r.exports.default=e.default})(m1,m1.exports)),m1.exports}var OC;function ore(){return OC||(OC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(We()),n=i(LU());function i(o){return o&&o.__esModule?o:{default:o}}function a(o,s){(0,t.default)(o);var c=s?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,n.default)(o,c)}r.exports=e.default,r.exports.default=e.default})(y1,y1.exports)),y1.exports}var g1={exports:{}},CC;function ure(){return CC||(CC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){return(0,t.default)(a),a.replace(new RegExp("[^".concat(o,"]+"),"g"),"")}r.exports=e.default,r.exports.default=e.default})(g1,g1.exports)),g1.exports}var v1={exports:{}},NC;function cre(){return NC||(NC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(We());function n(a){return a&&a.__esModule?a:{default:a}}function i(a,o){(0,t.default)(a);for(var s=a.length-1;s>=0;s--)if(o.indexOf(a[s])===-1)return!1;return!0}r.exports=e.default,r.exports.default=e.default})(v1,v1.exports)),v1.exports}var b1={exports:{}},BC;function lre(){return BC||(BC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var t=n(oi());function n(h){return h&&h.__esModule?h:{default:h}}var i={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,yandex_convert_yandexru:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},a=["icloud.com","me.com"],o=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],s=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],c=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function l(h){return h.length>1?h:""}function d(h,y){y=(0,t.default)(y,i);var m=h.split("@"),b=m.pop(),v=m.join("@"),E=[v,b];if(E[1]=E[1].toLowerCase(),E[1]==="gmail.com"||E[1]==="googlemail.com"){if(y.gmail_remove_subaddress&&(E[0]=E[0].split("+")[0]),y.gmail_remove_dots&&(E[0]=E[0].replace(/\.+/g,l)),!E[0].length)return!1;(y.all_lowercase||y.gmail_lowercase)&&(E[0]=E[0].toLowerCase()),E[1]=y.gmail_convert_googlemaildotcom?"gmail.com":E[1]}else if(a.indexOf(E[1])>=0){if(y.icloud_remove_subaddress&&(E[0]=E[0].split("+")[0]),!E[0].length)return!1;(y.all_lowercase||y.icloud_lowercase)&&(E[0]=E[0].toLowerCase())}else if(o.indexOf(E[1])>=0){if(y.outlookdotcom_remove_subaddress&&(E[0]=E[0].split("+")[0]),!E[0].length)return!1;(y.all_lowercase||y.outlookdotcom_lowercase)&&(E[0]=E[0].toLowerCase())}else if(s.indexOf(E[1])>=0){if(y.yahoo_remove_subaddress){var x=E[0].split("-");E[0]=x.length>1?x.slice(0,-1).join("-"):x[0]}if(!E[0].length)return!1;(y.all_lowercase||y.yahoo_lowercase)&&(E[0]=E[0].toLowerCase())}else c.indexOf(E[1])>=0?((y.all_lowercase||y.yandex_lowercase)&&(E[0]=E[0].toLowerCase()),E[1]=y.yandex_convert_yandexru?"yandex.ru":E[1]):y.all_lowercase&&(E[0]=E[0].toLowerCase());return E.join("@")}r.exports=e.default,r.exports.default=e.default})(b1,b1.exports)),b1.exports}var w1={exports:{}},IC;function fre(){return IC||(IC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;function a(o){return(0,t.default)(o),i.test(o)}r.exports=e.default,r.exports.default=e.default})(w1,w1.exports)),w1.exports}var _1={exports:{}},DC;function dre(){return DC||(DC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(We());function n(o){return o&&o.__esModule?o:{default:o}}var i={"cs-CZ":function(s){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(s)},"de-DE":function(s){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|A|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|B|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|F|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|G|GP|GR|GS|GT|G|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|L|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|M|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|N|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|T|B|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|W|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BD|BUL|BR|BS|BZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FL|FOR|FRG|FRI|FRW|FTL|FS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HM|HOG|HOH|HOL|HOM|HOR|HS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JL|KEH|KEL|KEM|KIB|KLE|KLZ|KN|KT|KZ|KRU|KN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LB|LOS|LRO|LSZ|LN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MB|MR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|HR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PL|PR|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RD|RG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SL|SLZ|SM|SOB|SOG|SOK|SM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SW|SWA|SZB|TBB|TDO|TET|TIR|TL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(s)},"de-LI":function(s){return/^FL[- ]?\d{1,5}[UZ]?$/.test(s)},"en-IN":function(s){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(s)},"en-SG":function(s){return/^[A-Z]{3}[ -]?[\d]{4}[ -]?[A-Z]{1}$/.test(s)},"es-AR":function(s){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(s)},"fi-FI":function(s){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(s)},"hu-HU":function(s){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(s)},"pt-BR":function(s){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(s)},"pt-PT":function(s){return/^(([A-Z]{2}[ -]?[0-9]{2}[ -]?[0-9]{2})|([0-9]{2}[ -]?[A-Z]{2}[ -]?[0-9]{2})|([0-9]{2}[ -]?[0-9]{2}[ -]?[A-Z]{2})|([A-Z]{2}[ -]?[0-9]{2}[ -]?[A-Z]{2}))$/.test(s)},"sq-AL":function(s){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(s)},"sv-SE":function(s){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-Z ]{2,7}$)/.test(s.trim())},"en-PK":function(s){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(s.trim())}};function a(o,s){if((0,t.default)(o),s in i)return i[s](o);if(s==="any"){for(var c in i){var l=i[c];if(l(o))return!0}return!1}throw new Error("Invalid locale '".concat(s,"'"))}r.exports=e.default,r.exports.default=e.default})(_1,_1.exports)),_1.exports}var E1={exports:{}},PC;function hre(){return PC||(PC=1,(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=i(oi()),n=i(We());function i(b){return b&&b.__esModule?b:{default:b}}var a=/^[A-Z]$/,o=/^[a-z]$/,s=/^[0-9]$/,c=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,l={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function d(b){var v={};return Array.from(b).forEach(function(E){var x=v[E];x?v[E]+=1:v[E]=1}),v}function h(b){var v=d(b),E={length:b.length,uniqueChars:Object.keys(v).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(v).forEach(function(x){a.test(x)?E.uppercaseCount+=v[x]:o.test(x)?E.lowercaseCount+=v[x]:s.test(x)?E.numberCount+=v[x]:c.test(x)&&(E.symbolCount+=v[x])}),E}function y(b,v){var E=0;return E+=b.uniqueChars*v.pointsPerUnique,E+=(b.length-b.uniqueChars)*v.pointsPerRepeat,b.lowercaseCount>0&&(E+=v.pointsForContainingLower),b.uppercaseCount>0&&(E+=v.pointsForContainingUpper),b.numberCount>0&&(E+=v.pointsForContainingNumber),b.symbolCount>0&&(E+=v.pointsForContainingSymbol),E}function m(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;(0,n.default)(b);var E=h(b);return v=(0,t.default)(v||{},l),v.returnScore?y(E,v):E.length>=v.minLength&&E.lowercaseCount>=v.minLowercase&&E.uppercaseCount>=v.minUppercase&&E.numberCount>=v.minNumbers&&E.symbolCount>=v.minSymbols}r.exports=e.default,r.exports.default=e.default})(E1,E1.exports)),E1.exports}var Hf={},UC;function pre(){if(UC)return Hf;UC=1;function r(d){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},r(d)}Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.default=l,Hf.vatMatchers=void 0;var e=i(We()),t=n(PU());function n(d,h){if(typeof WeakMap=="function")var y=new WeakMap,m=new WeakMap;return(n=function(v,E){if(!E&&v&&v.__esModule)return v;var x,D,N={__proto__:null,default:v};if(v===null||r(v)!="object"&&typeof v!="function")return N;if(x=E?m:y){if(x.has(v))return x.get(v);x.set(v,N)}for(var B in v)B!=="default"&&{}.hasOwnProperty.call(v,B)&&((D=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(v,B))&&(D.get||D.set)?x(N,B,D):N[B]=v[B]);return N})(d,h)}function i(d){return d&&d.__esModule?d:{default:d}}var a=function(h){var y=h.match(/^(AU)?(\d{11})$/);if(!y)return!1;var m=[10,1,3,5,7,9,11,13,15,17,19];h=h.replace(/^AU/,"");for(var b=(parseInt(h.slice(0,1),10)-1).toString()+h.slice(1),v=0,E=0;E<11;E++)v+=m[E]*b.charAt(E);return v!==0&&v%89===0},o=function(h){var y=function(b){var v=b.pop(),E=[5,4,3,2,7,6,5,4],x=(11-b.reduce(function(D,N,B){return D+N*E[B]},0)%11)%11;return v===x};return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(h)&&y(h.match(/\d/g).map(function(m){return+m}))},s=function(h){var y=h.match(/^(PT)?(\d{9})$/);if(!y)return!1;var m=y[2],b=11-t.reverseMultiplyAndSum(m.split("").slice(0,8).map(function(v){return parseInt(v,10)}),9)%11;return b>9?parseInt(m[8],10)===0:b===parseInt(m[8],10)},c=Hf.vatMatchers={AT:function(h){return/^(AT)?U\d{8}$/.test(h)},BE:function(h){return/^(BE)?\d{10}$/.test(h)},BG:function(h){return/^(BG)?\d{9,10}$/.test(h)},HR:function(h){return/^(HR)?\d{11}$/.test(h)},CY:function(h){return/^(CY)?\w{9}$/.test(h)},CZ:function(h){return/^(CZ)?\d{8,10}$/.test(h)},DK:function(h){return/^(DK)?\d{8}$/.test(h)},EE:function(h){return/^(EE)?\d{9}$/.test(h)},FI:function(h){return/^(FI)?\d{8}$/.test(h)},FR:function(h){return/^(FR)([A-Z0-9]{2}\d{9})$/.test(h)},DE:function(h){return/^(DE)?\d{9}$/.test(h)},EL:function(h){return/^(EL)?\d{9}$/.test(h)},HU:function(h){return/^(HU)?\d{8}$/.test(h)},IE:function(h){return/^(IE)?\d{7}\w{1}(W)?$/.test(h)},IT:function(h){return/^(IT)?\d{11}$/.test(h)},LV:function(h){return/^(LV)?\d{11}$/.test(h)},LT:function(h){return/^(LT)?\d{9,12}$/.test(h)},LU:function(h){return/^(LU)?\d{8}$/.test(h)},MT:function(h){return/^(MT)?\d{8}$/.test(h)},NL:function(h){return/^(NL)?\d{9}B\d{2}$/.test(h)},PL:function(h){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(h)},PT:s,RO:function(h){return/^(RO)?\d{2,10}$/.test(h)},SK:function(h){return/^(SK)?\d{10}$/.test(h)},SI:function(h){return/^(SI)?\d{8}$/.test(h)},ES:function(h){return/^(ES)?\w\d{7}[A-Z]$/.test(h)},SE:function(h){return/^(SE)?\d{12}$/.test(h)},AL:function(h){return/^(AL)?\w{9}[A-Z]$/.test(h)},MK:function(h){return/^(MK)?\d{13}$/.test(h)},AU:a,BY:function(h){return/^( )?\d{9}$/.test(h)},CA:function(h){return/^(CA)?\d{9}$/.test(h)},IS:function(h){return/^(IS)?\d{5,6}$/.test(h)},IN:function(h){return/^(IN)?\d{15}$/.test(h)},ID:function(h){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(h)},IL:function(h){return/^(IL)?\d{9}$/.test(h)},KZ:function(h){return/^(KZ)?\d{12}$/.test(h)},NZ:function(h){return/^(NZ)?\d{9}$/.test(h)},NG:function(h){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(h)},NO:function(h){return/^(NO)?\d{9}MVA$/.test(h)},PH:function(h){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(h)},RU:function(h){return/^(RU)?(\d{10}|\d{12})$/.test(h)},SM:function(h){return/^(SM)?\d{5}$/.test(h)},SA:function(h){return/^(SA)?\d{15}$/.test(h)},RS:function(h){return/^(RS)?\d{9}$/.test(h)},CH:o,TR:function(h){return/^(TR)?\d{10}$/.test(h)},UA:function(h){return/^(UA)?\d{12}$/.test(h)},GB:function(h){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(h)},UZ:function(h){return/^(UZ)?\d{9}$/.test(h)},AR:function(h){return/^(AR)?\d{11}$/.test(h)},BO:function(h){return/^(BO)?\d{7}$/.test(h)},BR:function(h){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(h)},CL:function(h){return/^(CL)?\d{8}-\d{1}$/.test(h)},CO:function(h){return/^(CO)?\d{10}$/.test(h)},CR:function(h){return/^(CR)?\d{9,12}$/.test(h)},EC:function(h){return/^(EC)?\d{13}$/.test(h)},SV:function(h){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(h)},GT:function(h){return/^(GT)?\d{7}-\d{1}$/.test(h)},HN:function(h){return/^(HN)?$/.test(h)},MX:function(h){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(h)},NI:function(h){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(h)},PA:function(h){return/^(PA)?$/.test(h)},PY:function(h){return/^(PY)?\d{6,8}-\d{1}$/.test(h)},PE:function(h){return/^(PE)?\d{11}$/.test(h)},DO:function(h){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(h)},UY:function(h){return/^(UY)?\d{12}$/.test(h)},VE:function(h){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(h)}};function l(d,h){if((0,e.default)(d),(0,e.default)(h),h in c)return c[h](d);throw new Error("Invalid country code: '".concat(h,"'"))}return Hf}var kC;function yre(){return kC||(kC=1,(function(r,e){function t(Cn){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(en){return typeof en}:function(en){return en&&typeof Symbol=="function"&&en.constructor===Symbol&&en!==Symbol.prototype?"symbol":typeof en},t(Cn)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Ve(IA()),i=Ve(EU()),a=Ve(Lee()),o=Ve(jee()),s=Ve($ee()),c=Ve(Fee()),l=Ve(zee()),d=Ve(MU()),h=Ve(Vee()),y=Ve(Hee()),m=Ve(Rb()),b=Ve(Kee()),v=Ve(DA()),E=Ve(RU()),x=Ve(Gee()),D=Ve(Wee()),N=Ve(Zee()),B=Ve(Yee()),k=Vr(Qee()),F=Vr(Jee()),T=Ve(Xee()),z=Vr(ete()),Z=Ve(tte()),Y=Ve(rte()),W=Ve(nte()),M=Ve(ite()),C=Ve(ate()),R=Ve(OU()),S=Ve(CU()),_=Ve(ste()),U=Ve(ote()),H=Ve(cte()),V=Ve(lte()),P=Ve(PA()),$=Vr(_U()),te=Ve(fte()),ae=Ve(NU()),ce=Ve(dte()),fe=Ve(hte()),oe=Ve(pte()),ye=Ve(yte()),me=Ve(mte()),ve=Ve(gte()),we=Vr(vte()),De=Ve(bte()),Te=Ve(wte()),Se=Ve(_te()),Le=Ve(Ete()),$e=Ve(xte()),ie=Ve(Ate()),L=Ve(Ste()),j=Ve(SU()),X=Ve(Mte()),ue=Ve(Tte()),le=Ve(Rte()),de=Ve(Ote()),Be=Ve(Cte()),Me=Ve(Nte()),Pe=Ve(DU()),Qe=Ve(Bte()),q=Ve(Ite()),w=Ve(Dte()),A=Ve(Pte()),K=Ve(Ute()),G=Ve(kte()),ee=Ve(qte()),ne=Vr(Lte()),be=Ve(jte()),Ue=Ve($te()),pe=Ve(Fte()),Ee=zte(),Ce=Ve(Vte()),ke=Ve(Hte()),Ke=Ve(Kte()),et=Ve(Gte()),Ze=Ve(BU()),nt=Ve(Wte()),xt=Ve(Zte()),pt=Ve(Yte()),St=Ve(Qte()),Ai=Ve(Jte()),kt=Ve(IU()),Ft=Ve(Xte()),Jo=Ve(ere()),or=Ve(tre()),ur=Ve(rre()),eo=Ve(nre()),Yt=Vr(ire()),Qt=Ve(kU()),ui=Ve(UU()),cr=Ve(qU()),Lt=Ve(are()),Sr=Ve(sre()),Tt=Ve(ore()),Kt=Ve(ure()),fn=Ve(LU()),to=Ve(cre()),ro=Ve(lre()),ps=Ve(fre()),Gi=Ve(dre()),Fa=Ve(hre()),Xr=Ve(pre());function Vr(Cn,en){if(typeof WeakMap=="function")var ci=new WeakMap,Mi=new WeakMap;return(Vr=function(Br,za){if(!za&&Br&&Br.__esModule)return Br;var Ti,Va,ha={__proto__:null,default:Br};if(Br===null||t(Br)!="object"&&typeof Br!="function")return ha;if(Ti=za?Mi:ci){if(Ti.has(Br))return Ti.get(Br);Ti.set(Br,ha)}for(var bn in Br)bn!=="default"&&{}.hasOwnProperty.call(Br,bn)&&((Va=(Ti=Object.defineProperty)&&Object.getOwnPropertyDescriptor(Br,bn))&&(Va.get||Va.set)?Ti(ha,bn,Va):ha[bn]=Br[bn]);return ha})(Cn,en)}function Ve(Cn){return Cn&&Cn.__esModule?Cn:{default:Cn}}var Si="13.15.26",gr={version:Si,toDate:n.default,toFloat:i.default,toInt:a.default,toBoolean:o.default,equals:s.default,contains:c.default,matches:l.default,isEmail:d.default,isURL:h.default,isMACAddress:y.default,isIP:m.default,isIPRange:b.default,isFQDN:v.default,isBoolean:D.default,isIBAN:we.default,isBIC:De.default,isAbaRouting:B.default,isAlpha:k.default,isAlphaLocales:k.locales,isAlphanumeric:F.default,isAlphanumericLocales:F.locales,isNumeric:T.default,isPassportNumber:z.default,passportNumberLocales:z.locales,isPort:Z.default,isLowercase:Y.default,isUppercase:W.default,isAscii:C.default,isFullWidth:R.default,isHalfWidth:S.default,isVariableWidth:_.default,isMultibyte:U.default,isSemVer:H.default,isSurrogatePair:V.default,isInt:P.default,isIMEI:M.default,isFloat:$.default,isFloatLocales:$.locales,isDecimal:te.default,isHexadecimal:ae.default,isOctal:ce.default,isDivisibleBy:fe.default,isHexColor:oe.default,isRgbColor:ye.default,isHSL:me.default,isISRC:ve.default,isMD5:Te.default,isHash:Se.default,isJWT:Le.default,isJSON:$e.default,isEmpty:ie.default,isLength:L.default,isLocale:N.default,isByteLength:j.default,isULID:X.default,isUUID:ue.default,isMongoId:le.default,isAfter:de.default,isBefore:Be.default,isIn:Me.default,isLuhnNumber:Pe.default,isCreditCard:Qe.default,isIdentityCard:q.default,isEAN:w.default,isISIN:A.default,isISBN:K.default,isISSN:G.default,isMobilePhone:ne.default,isMobilePhoneLocales:ne.locales,isPostalCode:Yt.default,isPostalCodeLocales:Yt.locales,isEthereumAddress:be.default,isCurrency:Ue.default,isBtcAddress:pe.default,isISO6346:Ee.isISO6346,isFreightContainerID:Ee.isFreightContainerID,isISO6391:Ce.default,isISO8601:ke.default,isISO15924:et.default,isRFC3339:Ke.default,isISO31661Alpha2:Ze.default,isISO31661Alpha3:nt.default,isISO31661Numeric:xt.default,isISO4217:pt.default,isBase32:St.default,isBase58:Ai.default,isBase64:kt.default,isDataURI:Ft.default,isMagnetURI:Jo.default,isMailtoURI:or.default,isMimeType:ur.default,isLatLong:eo.default,ltrim:Qt.default,rtrim:ui.default,trim:cr.default,escape:Lt.default,unescape:Sr.default,stripLow:Tt.default,whitelist:Kt.default,blacklist:fn.default,isWhitelisted:to.default,normalizeEmail:ro.default,toString,isSlug:ps.default,isStrongPassword:Fa.default,isTaxID:ee.default,isDate:E.default,isTime:x.default,isLicensePlate:Gi.default,isVAT:Xr.default,ibanLocales:we.locales};e.default=gr,r.exports=e.default,r.exports.default=e.default})(Dm,Dm.exports)),Dm.exports}var TE,qC;function UA(){if(qC)return TE;qC=1;var r=yre(),e={date:function(t){if(typeof t!="string")return!0;var n=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(t);return!(n===null||n[2]<"01"||n[2]>"12"||n[3]<"01"||n[3]>"31")},"date-time":function(t){if(typeof t!="string")return!0;var n=t.toLowerCase().split("t");if(!e.date(n[0]))return!1;var i=/^([0-9]{2}):([0-9]{2}):([0-9]{2})(.[0-9]+)?(z|([+-][0-9]{2}:[0-9]{2}))$/.exec(n[1]);return!(i===null||i[1]>"23"||i[2]>"59"||i[3]>"59")},email:function(t){return typeof t!="string"?!0:r.isEmail(t,{require_tld:!0})},hostname:function(t){if(typeof t!="string")return!0;var n=/^[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?(\.[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?)*$/.test(t);if(n){if(t.length>255)return!1;for(var i=t.split("."),a=0;a<i.length;a++)if(i[a].length>63)return!1}return n},"host-name":function(t){return e.hostname.call(this,t)},ipv4:function(t){return typeof t!="string"?!0:r.isIP(t,4)},ipv6:function(t){return typeof t!="string"?!0:r.isIP(t,6)},regex:function(t){try{return RegExp(t),!0}catch{return!1}},uri:function(t){return this.options.strictUris?e["strict-uri"].apply(this,arguments):typeof t!="string"||RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?").test(t)},"strict-uri":function(t){return typeof t!="string"||r.isURL(t)}};return TE=e,TE}var RE={},LC;function jU(){return LC||(LC=1,(function(r){var e=UA(),t=Z0(),n=eh(),i=function(c,l){return c&&Array.isArray(c.includeErrors)&&c.includeErrors.length>0&&!l.some(function(d){return c.includeErrors.includes(d)})},a={multipleOf:function(c,l,d){if(!i(this.validateOptions,["MULTIPLE_OF"])&&typeof d=="number"){var h=String(l.multipleOf),y=Math.pow(10,h.length-h.indexOf(".")-1);n.whatIs(d*y/(l.multipleOf*y))!=="integer"&&c.addError("MULTIPLE_OF",[d,l.multipleOf],null,l)}},maximum:function(c,l,d){i(this.validateOptions,["MAXIMUM","MAXIMUM_EXCLUSIVE"])||typeof d=="number"&&(l.exclusiveMaximum!==!0?d>l.maximum&&c.addError("MAXIMUM",[d,l.maximum],null,l):d>=l.maximum&&c.addError("MAXIMUM_EXCLUSIVE",[d,l.maximum],null,l))},exclusiveMaximum:function(){},minimum:function(c,l,d){i(this.validateOptions,["MINIMUM","MINIMUM_EXCLUSIVE"])||typeof d=="number"&&(l.exclusiveMinimum!==!0?d<l.minimum&&c.addError("MINIMUM",[d,l.minimum],null,l):d<=l.minimum&&c.addError("MINIMUM_EXCLUSIVE",[d,l.minimum],null,l))},exclusiveMinimum:function(){},maxLength:function(c,l,d){i(this.validateOptions,["MAX_LENGTH"])||typeof d=="string"&&n.ucs2decode(d).length>l.maxLength&&c.addError("MAX_LENGTH",[d.length,l.maxLength],null,l)},minLength:function(c,l,d){i(this.validateOptions,["MIN_LENGTH"])||typeof d=="string"&&n.ucs2decode(d).length<l.minLength&&c.addError("MIN_LENGTH",[d.length,l.minLength],null,l)},pattern:function(c,l,d){i(this.validateOptions,["PATTERN"])||typeof d=="string"&&RegExp(l.pattern).test(d)===!1&&c.addError("PATTERN",[l.pattern,d],null,l)},additionalItems:function(c,l,d){i(this.validateOptions,["ARRAY_ADDITIONAL_ITEMS"])||Array.isArray(d)&&l.additionalItems===!1&&Array.isArray(l.items)&&d.length>l.items.length&&c.addError("ARRAY_ADDITIONAL_ITEMS",null,null,l)},items:function(){},maxItems:function(c,l,d){i(this.validateOptions,["ARRAY_LENGTH_LONG"])||Array.isArray(d)&&d.length>l.maxItems&&c.addError("ARRAY_LENGTH_LONG",[d.length,l.maxItems],null,l)},minItems:function(c,l,d){i(this.validateOptions,["ARRAY_LENGTH_SHORT"])||Array.isArray(d)&&d.length<l.minItems&&c.addError("ARRAY_LENGTH_SHORT",[d.length,l.minItems],null,l)},uniqueItems:function(c,l,d){if(!i(this.validateOptions,["ARRAY_UNIQUE"])&&Array.isArray(d)&&l.uniqueItems===!0){var h=[];n.isUniqueArray(d,h)===!1&&c.addError("ARRAY_UNIQUE",h,null,l)}},maxProperties:function(c,l,d){if(!i(this.validateOptions,["OBJECT_PROPERTIES_MAXIMUM"])&&n.whatIs(d)==="object"){var h=Object.keys(d).length;h>l.maxProperties&&c.addError("OBJECT_PROPERTIES_MAXIMUM",[h,l.maxProperties],null,l)}},minProperties:function(c,l,d){if(!i(this.validateOptions,["OBJECT_PROPERTIES_MINIMUM"])&&n.whatIs(d)==="object"){var h=Object.keys(d).length;h<l.minProperties&&c.addError("OBJECT_PROPERTIES_MINIMUM",[h,l.minProperties],null,l)}},required:function(c,l,d){if(!i(this.validateOptions,["OBJECT_MISSING_REQUIRED_PROPERTY"])&&n.whatIs(d)==="object")for(var h=l.required.length;h--;){var y=l.required[h];d[y]===void 0&&c.addError("OBJECT_MISSING_REQUIRED_PROPERTY",[y],null,l)}},additionalProperties:function(c,l,d){if(l.properties===void 0&&l.patternProperties===void 0)return a.properties.call(this,c,l,d)},patternProperties:function(c,l,d){if(l.properties===void 0)return a.properties.call(this,c,l,d)},properties:function(c,l,d){if(!i(this.validateOptions,["OBJECT_ADDITIONAL_PROPERTIES"])&&n.whatIs(d)==="object"){var h=l.properties!==void 0?l.properties:{},y=l.patternProperties!==void 0?l.patternProperties:{};if(l.additionalProperties===!1){var m=Object.keys(d),b=Object.keys(h),v=Object.keys(y);m=n.difference(m,b);for(var E=v.length;E--;)for(var x=RegExp(v[E]),D=m.length;D--;)x.test(m[D])===!0&&m.splice(D,1);if(m.length>0){var N=this.options.assumeAdditional.length;if(N)for(;N--;){var B=m.indexOf(this.options.assumeAdditional[N]);B!==-1&&m.splice(B,1)}var k=m.length;if(k)for(;k--;)c.addError("OBJECT_ADDITIONAL_PROPERTIES",[m[k]],null,l)}}}},dependencies:function(c,l,d){if(!i(this.validateOptions,["OBJECT_DEPENDENCY_KEY"])&&n.whatIs(d)==="object")for(var h=Object.keys(l.dependencies),y=h.length;y--;){var m=h[y];if(d[m]){var b=l.dependencies[m];if(n.whatIs(b)==="object")r.validate.call(this,c,b,d);else for(var v=b.length;v--;){var E=b[v];d[E]===void 0&&c.addError("OBJECT_DEPENDENCY_KEY",[E,m],null,l)}}}},enum:function(c,l,d){if(!i(this.validateOptions,["ENUM_CASE_MISMATCH","ENUM_MISMATCH"])){for(var h=!1,y=!1,m=l.enum.length;m--;)if(n.areEqual(d,l.enum[m])){h=!0;break}else n.areEqual(d,l.enum[m]),y=!0;if(h===!1){var b=y&&this.options.enumCaseInsensitiveComparison?"ENUM_CASE_MISMATCH":"ENUM_MISMATCH";c.addError(b,[d],null,l)}}},type:function(c,l,d){if(!i(this.validateOptions,["INVALID_TYPE"])){var h=n.whatIs(d);typeof l.type=="string"?h!==l.type&&(h!=="integer"||l.type!=="number")&&c.addError("INVALID_TYPE",[l.type,h],null,l):l.type.indexOf(h)===-1&&(h!=="integer"||l.type.indexOf("number")===-1)&&c.addError("INVALID_TYPE",[l.type,h],null,l)}},allOf:function(c,l,d){for(var h=l.allOf.length;h--;){var y=r.validate.call(this,c,l.allOf[h],d);if(this.options.breakOnFirstError&&y===!1)break}},anyOf:function(c,l,d){for(var h=[],y=!1,m=l.anyOf.length;m--&&y===!1;){var b=new t(c);h.push(b),y=r.validate.call(this,b,l.anyOf[m],d)}y===!1&&c.addError("ANY_OF_MISSING",void 0,h,l)},oneOf:function(c,l,d){for(var h=0,y=[],m=l.oneOf.length;m--;){var b=new t(c,{maxErrors:1});y.push(b),r.validate.call(this,b,l.oneOf[m],d)===!0&&h++}h===0?c.addError("ONE_OF_MISSING",void 0,y,l):h>1&&c.addError("ONE_OF_MULTIPLE",null,null,l)},not:function(c,l,d){var h=new t(c);r.validate.call(this,h,l.not,d)===!0&&c.addError("NOT_PASSED",null,null,l)},definitions:function(){},format:function(c,l,d){var h=e[l.format];if(typeof h=="function"){if(i(this.validateOptions,["INVALID_FORMAT"])||c.hasError("INVALID_TYPE",[l.type,n.whatIs(d)]))return;if(h.length===2){var y=n.clone(c.path);c.addAsyncTask(h,[d],function(m){if(m!==!0){var b=c.path;c.path=y,c.addError("INVALID_FORMAT",[l.format,d],null,l),c.path=b}})}else h.call(this,d)!==!0&&c.addError("INVALID_FORMAT",[l.format,d],null,l)}else this.options.ignoreUnknownFormats!==!0&&c.addError("UNKNOWN_FORMAT",[l.format],null,l)}},o=function(c,l,d){var h=d.length;if(Array.isArray(l.items))for(;h--;)h<l.items.length?(c.path.push(h),r.validate.call(this,c,l.items[h],d[h]),c.path.pop()):typeof l.additionalItems=="object"&&(c.path.push(h),r.validate.call(this,c,l.additionalItems,d[h]),c.path.pop());else if(typeof l.items=="object")for(;h--;)c.path.push(h),r.validate.call(this,c,l.items,d[h]),c.path.pop()},s=function(c,l,d){var h=l.additionalProperties;(h===!0||h===void 0)&&(h={});for(var y=l.properties?Object.keys(l.properties):[],m=l.patternProperties?Object.keys(l.patternProperties):[],b=Object.keys(d),v=b.length;v--;){var E=b[v],x=d[E],D=[];y.indexOf(E)!==-1&&D.push(l.properties[E]);for(var N=m.length;N--;){var B=m[N];RegExp(B).test(E)===!0&&D.push(l.patternProperties[B])}for(D.length===0&&h!==!1&&D.push(h),N=D.length;N--;)c.path.push(E),r.validate.call(this,c,D[N],x),c.path.pop()}};r.JsonValidators=a,r.validate=function(c,l,d){c.commonErrorMessage="JSON_OBJECT_VALIDATION_FAILED";var h=n.whatIs(l);if(h!=="object")return c.addError("SCHEMA_NOT_AN_OBJECT",[h],null,l),!1;var y=Object.keys(l);if(y.length===0)return!0;var m=!1;if(c.rootSchema||(c.rootSchema=l,m=!0),l.$ref!==void 0){for(var b=99;l.$ref&&b>0;){if(l.__$refResolved){if(l.__$refResolved===l)break;l=l.__$refResolved,y=Object.keys(l)}else{c.addError("REF_UNRESOLVED",[l.$ref],null,l);break}b--}if(b===0)throw new Error("Circular dependency by $ref references!")}var v=n.whatIs(d);if(l.type&&(y.splice(y.indexOf("type"),1),a.type.call(this,c,l,d),c.errors.length&&this.options.breakOnFirstError))return!1;for(var E=y.length;E--&&!(a[y[E]]&&(a[y[E]].call(this,c,l,d),c.errors.length&&this.options.breakOnFirstError)););return(c.errors.length===0||this.options.breakOnFirstError===!1)&&(v==="array"?o.call(this,c,l,d):v==="object"&&s.call(this,c,l,d)),typeof this.options.customValidator=="function"&&this.options.customValidator.call(this,c,l,d),m&&(c.rootSchema=void 0),c.errors.length===0}})(RE)),RE}var OE={},vp={exports:{}};vp.exports;var jC;function mre(){return jC||(jC=1,(function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,a=2,o=9007199254740991,s="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",h="[object Date]",y="[object Error]",m="[object Function]",b="[object GeneratorFunction]",v="[object Map]",E="[object Number]",x="[object Null]",D="[object Object]",N="[object Promise]",B="[object Proxy]",k="[object RegExp]",F="[object Set]",T="[object String]",z="[object Symbol]",Z="[object Undefined]",Y="[object WeakMap]",W="[object ArrayBuffer]",M="[object DataView]",C="[object Float32Array]",R="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",U="[object Int32Array]",H="[object Uint8Array]",V="[object Uint8ClampedArray]",P="[object Uint16Array]",$="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,fe={};fe[C]=fe[R]=fe[S]=fe[_]=fe[U]=fe[H]=fe[V]=fe[P]=fe[$]=!0,fe[s]=fe[c]=fe[W]=fe[d]=fe[M]=fe[h]=fe[y]=fe[m]=fe[v]=fe[E]=fe[D]=fe[k]=fe[F]=fe[T]=fe[Y]=!1;var oe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,ye=typeof self=="object"&&self&&self.Object===Object&&self,me=oe||ye||Function("return this")(),ve=e&&!e.nodeType&&e,we=ve&&!0&&r&&!r.nodeType&&r,De=we&&we.exports===ve,Te=De&&oe.process,Se=(function(){try{return Te&&Te.binding&&Te.binding("util")}catch{}})(),Le=Se&&Se.isTypedArray;function $e(he,xe){for(var ze=-1,tt=he==null?0:he.length,jt=0,gt=[];++ze<tt;){var rr=he[ze];xe(rr,ze,he)&&(gt[jt++]=rr)}return gt}function ie(he,xe){for(var ze=-1,tt=xe.length,jt=he.length;++ze<tt;)he[jt+ze]=xe[ze];return he}function L(he,xe){for(var ze=-1,tt=he==null?0:he.length;++ze<tt;)if(xe(he[ze],ze,he))return!0;return!1}function j(he,xe){for(var ze=-1,tt=Array(he);++ze<he;)tt[ze]=xe(ze);return tt}function X(he){return function(xe){return he(xe)}}function ue(he,xe){return he.has(xe)}function le(he,xe){return he?.[xe]}function de(he){var xe=-1,ze=Array(he.size);return he.forEach(function(tt,jt){ze[++xe]=[jt,tt]}),ze}function Be(he,xe){return function(ze){return he(xe(ze))}}function Me(he){var xe=-1,ze=Array(he.size);return he.forEach(function(tt){ze[++xe]=tt}),ze}var Pe=Array.prototype,Qe=Function.prototype,q=Object.prototype,w=me["__core-js_shared__"],A=Qe.toString,K=q.hasOwnProperty,G=(function(){var he=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||"");return he?"Symbol(src)_1."+he:""})(),ee=q.toString,ne=RegExp("^"+A.call(K).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=De?me.Buffer:void 0,Ue=me.Symbol,pe=me.Uint8Array,Ee=q.propertyIsEnumerable,Ce=Pe.splice,ke=Ue?Ue.toStringTag:void 0,Ke=Object.getOwnPropertySymbols,et=be?be.isBuffer:void 0,Ze=Be(Object.keys,Object),nt=Wi(me,"DataView"),xt=Wi(me,"Map"),pt=Wi(me,"Promise"),St=Wi(me,"Set"),Ai=Wi(me,"WeakMap"),kt=Wi(Object,"create"),Ft=Ga(nt),Jo=Ga(xt),or=Ga(pt),ur=Ga(St),eo=Ga(Ai),Yt=Ue?Ue.prototype:void 0,Qt=Yt?Yt.valueOf:void 0;function ui(he){var xe=-1,ze=he==null?0:he.length;for(this.clear();++xe<ze;){var tt=he[xe];this.set(tt[0],tt[1])}}function cr(){this.__data__=kt?kt(null):{},this.size=0}function Lt(he){var xe=this.has(he)&&delete this.__data__[he];return this.size-=xe?1:0,xe}function Sr(he){var xe=this.__data__;if(kt){var ze=xe[he];return ze===n?void 0:ze}return K.call(xe,he)?xe[he]:void 0}function Tt(he){var xe=this.__data__;return kt?xe[he]!==void 0:K.call(xe,he)}function Kt(he,xe){var ze=this.__data__;return this.size+=this.has(he)?0:1,ze[he]=kt&&xe===void 0?n:xe,this}ui.prototype.clear=cr,ui.prototype.delete=Lt,ui.prototype.get=Sr,ui.prototype.has=Tt,ui.prototype.set=Kt;function fn(he){var xe=-1,ze=he==null?0:he.length;for(this.clear();++xe<ze;){var tt=he[xe];this.set(tt[0],tt[1])}}function to(){this.__data__=[],this.size=0}function ro(he){var xe=this.__data__,ze=Nn(xe,he);if(ze<0)return!1;var tt=xe.length-1;return ze==tt?xe.pop():Ce.call(xe,ze,1),--this.size,!0}function ps(he){var xe=this.__data__,ze=Nn(xe,he);return ze<0?void 0:xe[ze][1]}function Gi(he){return Nn(this.__data__,he)>-1}function Fa(he,xe){var ze=this.__data__,tt=Nn(ze,he);return tt<0?(++this.size,ze.push([he,xe])):ze[tt][1]=xe,this}fn.prototype.clear=to,fn.prototype.delete=ro,fn.prototype.get=ps,fn.prototype.has=Gi,fn.prototype.set=Fa;function Xr(he){var xe=-1,ze=he==null?0:he.length;for(this.clear();++xe<ze;){var tt=he[xe];this.set(tt[0],tt[1])}}function Vr(){this.size=0,this.__data__={hash:new ui,map:new(xt||fn),string:new ui}}function Ve(he){var xe=Mc(this,he).delete(he);return this.size-=xe?1:0,xe}function Si(he){return Mc(this,he).get(he)}function gr(he){return Mc(this,he).has(he)}function Cn(he,xe){var ze=Mc(this,he),tt=ze.size;return ze.set(he,xe),this.size+=ze.size==tt?0:1,this}Xr.prototype.clear=Vr,Xr.prototype.delete=Ve,Xr.prototype.get=Si,Xr.prototype.has=gr,Xr.prototype.set=Cn;function en(he){var xe=-1,ze=he==null?0:he.length;for(this.__data__=new Xr;++xe<ze;)this.add(he[xe])}function ci(he){return this.__data__.set(he,n),this}function Mi(he){return this.__data__.has(he)}en.prototype.add=en.prototype.push=ci,en.prototype.has=Mi;function li(he){var xe=this.__data__=new fn(he);this.size=xe.size}function Br(){this.__data__=new fn,this.size=0}function za(he){var xe=this.__data__,ze=xe.delete(he);return this.size=xe.size,ze}function Ti(he){return this.__data__.get(he)}function Va(he){return this.__data__.has(he)}function ha(he,xe){var ze=this.__data__;if(ze instanceof fn){var tt=ze.__data__;if(!xt||tt.length<t-1)return tt.push([he,xe]),this.size=++ze.size,this;ze=this.__data__=new Xr(tt)}return ze.set(he,xe),this.size=ze.size,this}li.prototype.clear=Br,li.prototype.delete=za,li.prototype.get=Ti,li.prototype.has=Va,li.prototype.set=ha;function bn(he,xe){var ze=Wa(he),tt=!ze&&eu(he),jt=!ze&&!tt&&Tc(he),gt=!ze&&!tt&&!jt&&Ya(he),rr=ze||tt||jt||gt,tn=rr?j(he.length,String):[],Hr=tn.length;for(var lr in he)K.call(he,lr)&&!(rr&&(lr=="length"||jt&&(lr=="offset"||lr=="parent")||gt&&(lr=="buffer"||lr=="byteLength"||lr=="byteOffset")||uh(lr,Hr)))&&tn.push(lr);return tn}function Nn(he,xe){for(var ze=he.length;ze--;)if(Hl(he[ze][0],xe))return ze;return-1}function ry(he,xe,ze){var tt=xe(he);return Wa(he)?tt:ie(tt,ze(he))}function Sc(he){return he==null?he===void 0?Z:x:ke&&ke in Object(he)?Kb(he):Ka(he)}function Fl(he){return Za(he)&&Sc(he)==s}function nh(he,xe,ze,tt,jt){return he===xe?!0:he==null||xe==null||!Za(he)&&!Za(xe)?he!==he&&xe!==xe:zl(he,xe,ze,tt,nh,jt)}function zl(he,xe,ze,tt,jt,gt){var rr=Wa(he),tn=Wa(xe),Hr=rr?c:Ha(he),lr=tn?c:Ha(xe);Hr=Hr==s?D:Hr,lr=lr==s?D:lr;var dn=Hr==D,Jn=lr==D,hn=Hr==lr;if(hn&&Tc(he)){if(!Tc(xe))return!1;rr=!0,dn=!1}if(hn&&!dn)return gt||(gt=new li),rr||Ya(he)?ah(he,xe,ze,tt,jt,gt):sh(he,xe,Hr,ze,tt,jt,gt);if(!(ze&i)){var Oi=dn&&K.call(he,"__wrapped__"),Ci=Jn&&K.call(xe,"__wrapped__");if(Oi||Ci){var ys=Oi?he.value():he,Zi=Ci?xe.value():xe;return gt||(gt=new li),jt(ys,Zi,ze,tt,gt)}}return hn?(gt||(gt=new li),Xo(he,xe,ze,tt,jt,gt)):!1}function Hb(he){if(!Kl(he)||Wb(he))return!1;var xe=tu(he)?ne:ae;return xe.test(Ga(he))}function Ri(he){return Za(he)&&pa(he.length)&&!!fe[Sc(he)]}function ih(he){if(!Vl(he))return Ze(he);var xe=[];for(var ze in Object(he))K.call(he,ze)&&ze!="constructor"&&xe.push(ze);return xe}function ah(he,xe,ze,tt,jt,gt){var rr=ze&i,tn=he.length,Hr=xe.length;if(tn!=Hr&&!(rr&&Hr>tn))return!1;var lr=gt.get(he);if(lr&&gt.get(xe))return lr==xe;var dn=-1,Jn=!0,hn=ze&a?new en:void 0;for(gt.set(he,xe),gt.set(xe,he);++dn<tn;){var Oi=he[dn],Ci=xe[dn];if(tt)var ys=rr?tt(Ci,Oi,dn,xe,he,gt):tt(Oi,Ci,dn,he,xe,gt);if(ys!==void 0){if(ys)continue;Jn=!1;break}if(hn){if(!L(xe,function(Zi,no){if(!ue(hn,no)&&(Oi===Zi||jt(Oi,Zi,ze,tt,gt)))return hn.push(no)})){Jn=!1;break}}else if(!(Oi===Ci||jt(Oi,Ci,ze,tt,gt))){Jn=!1;break}}return gt.delete(he),gt.delete(xe),Jn}function sh(he,xe,ze,tt,jt,gt,rr){switch(ze){case M:if(he.byteLength!=xe.byteLength||he.byteOffset!=xe.byteOffset)return!1;he=he.buffer,xe=xe.buffer;case W:return!(he.byteLength!=xe.byteLength||!gt(new pe(he),new pe(xe)));case d:case h:case E:return Hl(+he,+xe);case y:return he.name==xe.name&&he.message==xe.message;case k:case T:return he==xe+"";case v:var tn=de;case F:var Hr=tt&i;if(tn||(tn=Me),he.size!=xe.size&&!Hr)return!1;var lr=rr.get(he);if(lr)return lr==xe;tt|=a,rr.set(he,xe);var dn=ah(tn(he),tn(xe),tt,jt,gt,rr);return rr.delete(he),dn;case z:if(Qt)return Qt.call(he)==Qt.call(xe)}return!1}function Xo(he,xe,ze,tt,jt,gt){var rr=ze&i,tn=oh(he),Hr=tn.length,lr=oh(xe),dn=lr.length;if(Hr!=dn&&!rr)return!1;for(var Jn=Hr;Jn--;){var hn=tn[Jn];if(!(rr?hn in xe:K.call(xe,hn)))return!1}var Oi=gt.get(he);if(Oi&&gt.get(xe))return Oi==xe;var Ci=!0;gt.set(he,xe),gt.set(xe,he);for(var ys=rr;++Jn<Hr;){hn=tn[Jn];var Zi=he[hn],no=xe[hn];if(tt)var oy=rr?tt(no,Zi,hn,xe,he,gt):tt(Zi,no,hn,he,xe,gt);if(!(oy===void 0?Zi===no||jt(Zi,no,ze,tt,gt):oy)){Ci=!1;break}ys||(ys=hn=="constructor")}if(Ci&&!ys){var Wl=he.constructor,Zl=xe.constructor;Wl!=Zl&&"constructor"in he&&"constructor"in xe&&!(typeof Wl=="function"&&Wl instanceof Wl&&typeof Zl=="function"&&Zl instanceof Zl)&&(Ci=!1)}return gt.delete(he),gt.delete(xe),Ci}function oh(he){return ry(he,ch,ny)}function Mc(he,xe){var ze=he.__data__;return Gb(xe)?ze[typeof xe=="string"?"string":"hash"]:ze.map}function Wi(he,xe){var ze=le(he,xe);return Hb(ze)?ze:void 0}function Kb(he){var xe=K.call(he,ke),ze=he[ke];try{he[ke]=void 0;var tt=!0}catch{}var jt=ee.call(he);return tt&&(xe?he[ke]=ze:delete he[ke]),jt}var ny=Ke?function(he){return he==null?[]:(he=Object(he),$e(Ke(he),function(xe){return Ee.call(he,xe)}))}:Gl,Ha=Sc;(nt&&Ha(new nt(new ArrayBuffer(1)))!=M||xt&&Ha(new xt)!=v||pt&&Ha(pt.resolve())!=N||St&&Ha(new St)!=F||Ai&&Ha(new Ai)!=Y)&&(Ha=function(he){var xe=Sc(he),ze=xe==D?he.constructor:void 0,tt=ze?Ga(ze):"";if(tt)switch(tt){case Ft:return M;case Jo:return v;case or:return N;case ur:return F;case eo:return Y}return xe});function uh(he,xe){return xe=xe??o,!!xe&&(typeof he=="number"||ce.test(he))&&he>-1&&he%1==0&&he<xe}function Gb(he){var xe=typeof he;return xe=="string"||xe=="number"||xe=="symbol"||xe=="boolean"?he!=="__proto__":he===null}function Wb(he){return!!G&&G in he}function Vl(he){var xe=he&&he.constructor,ze=typeof xe=="function"&&xe.prototype||q;return he===ze}function Ka(he){return ee.call(he)}function Ga(he){if(he!=null){try{return A.call(he)}catch{}try{return he+""}catch{}}return""}function Hl(he,xe){return he===xe||he!==he&&xe!==xe}var eu=Fl((function(){return arguments})())?Fl:function(he){return Za(he)&&K.call(he,"callee")&&!Ee.call(he,"callee")},Wa=Array.isArray;function iy(he){return he!=null&&pa(he.length)&&!tu(he)}var Tc=et||sy;function ay(he,xe){return nh(he,xe)}function tu(he){if(!Kl(he))return!1;var xe=Sc(he);return xe==m||xe==b||xe==l||xe==B}function pa(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=o}function Kl(he){var xe=typeof he;return he!=null&&(xe=="object"||xe=="function")}function Za(he){return he!=null&&typeof he=="object"}var Ya=Le?X(Le):Ri;function ch(he){return iy(he)?bn(he):ih(he)}function Gl(){return[]}function sy(){return!1}r.exports=ay})(vp,vp.exports)),vp.exports}var CE={},$C;function $U(){return $C||($C=1,(function(r){var e=Z0(),t=zU(),n=eh();function i(l,d){if(n.isAbsoluteUri(d))return d;var h=l.join(""),y=n.isAbsoluteUri(h),m=n.isRelativeUri(h),b=n.isRelativeUri(d),v;y&&b?(v=h.match(/\/[^\/]*$/),v&&(h=h.slice(0,v.index+1))):m&&b?h="":(v=h.match(/[^#/]+$/),v&&(h=h.slice(0,v.index)));var E=h+d;return E=E.replace(/##/,"#"),E}function a(l,d,h,y){if(d=d||[],h=h||[],y=y||[],typeof l!="object"||l===null)return d;typeof l.id=="string"&&h.push(l.id),typeof l.$ref=="string"&&typeof l.__$refResolved>"u"&&d.push({ref:i(h,l.$ref),key:"$ref",obj:l,path:y.slice(0)}),typeof l.$schema=="string"&&typeof l.__$schemaResolved>"u"&&d.push({ref:i(h,l.$schema),key:"$schema",obj:l,path:y.slice(0)});var m;if(Array.isArray(l))for(m=l.length;m--;)y.push(m.toString()),a(l[m],d,h,y),y.pop();else{var b=Object.keys(l);for(m=b.length;m--;)b[m].indexOf("__$")!==0&&(y.push(b[m]),a(l[b[m]],d,h,y),y.pop())}return typeof l.id=="string"&&h.pop(),d}var o=function(l,d){for(var h=d.length,y=0;h--;){var m=new e(l),b=r.compileSchema.call(this,m,d[h]);b&&y++,l.errors=l.errors.concat(m.errors)}return y};function s(l,d){for(var h=l.length;h--;)if(l[h].id===d)return l[h];return null}var c=function(l,d){var h=0,y;do{for(var m=l.errors.length;m--;)l.errors[m].code==="UNRESOLVABLE_REFERENCE"&&l.errors.splice(m,1);for(y=h,h=o.call(this,l,d),m=d.length;m--;){var b=d[m];if(b.__$missingReferences){for(var v=b.__$missingReferences.length;v--;){var E=b.__$missingReferences[v],x=s(d,E.ref);x&&(E.obj["__"+E.key+"Resolved"]=x,b.__$missingReferences.splice(v,1))}b.__$missingReferences.length===0&&delete b.__$missingReferences}}}while(h!==d.length&&h!==y);return l.isValid()};r.compileSchema=function(l,d){if(l.commonErrorMessage="SCHEMA_COMPILATION_FAILED",typeof d=="string"){var h=t.getSchemaByUri.call(this,l,d);if(!h)return l.addError("SCHEMA_NOT_REACHABLE",[d]),!1;d=h}if(Array.isArray(d))return c.call(this,l,d);if(d.__$compiled&&d.id&&t.checkCacheForUri.call(this,d.id)===!1&&(d.__$compiled=void 0),d.__$compiled)return!0;d.id&&typeof d.id=="string"&&t.cacheSchemaByUri.call(this,d.id,d);var y=!1;l.rootSchema||(l.rootSchema=d,y=!0);var m=l.isValid();delete d.__$missingReferences;for(var b=a.call(this,d),v=b.length;v--;){var E=b[v],x=t.getSchemaByUri.call(this,l,E.ref,d);if(!x){var D=this.getSchemaReader();if(D){var N=D(E.ref);if(N){N.id=E.ref;var B=new e(l);r.compileSchema.call(this,B,N)?x=t.getSchemaByUri.call(this,l,E.ref,d):l.errors=l.errors.concat(B.errors)}}}if(!x){var k=l.hasError("REMOTE_NOT_VALID",[E.ref]),F=n.isAbsoluteUri(E.ref),T=!1,z=this.options.ignoreUnresolvableReferences===!0;F&&(T=t.checkCacheForUri.call(this,E.ref)),k||z&&F||T||(Array.prototype.push.apply(l.path,E.path),l.addError("UNRESOLVABLE_REFERENCE",[E.ref]),l.path=l.path.slice(0,-E.path.length),m&&(d.__$missingReferences=d.__$missingReferences||[],d.__$missingReferences.push(E)))}E.obj["__"+E.key+"Resolved"]=x}var Z=l.isValid();return Z?d.__$compiled=!0:d.id&&typeof d.id=="string"&&t.removeFromCacheByUri.call(this,d.id),y&&(l.rootSchema=void 0),Z}})(CE)),CE}var NE={},FC;function FU(){return FC||(FC=1,(function(r){var e=UA(),t=jU(),n=Z0(),i=eh(),a={$ref:function(s,c){typeof c.$ref!="string"&&s.addError("KEYWORD_TYPE_EXPECTED",["$ref","string"])},$schema:function(s,c){typeof c.$schema!="string"&&s.addError("KEYWORD_TYPE_EXPECTED",["$schema","string"])},multipleOf:function(s,c){typeof c.multipleOf!="number"?s.addError("KEYWORD_TYPE_EXPECTED",["multipleOf","number"]):c.multipleOf<=0&&s.addError("KEYWORD_MUST_BE",["multipleOf","strictly greater than 0"])},maximum:function(s,c){typeof c.maximum!="number"&&s.addError("KEYWORD_TYPE_EXPECTED",["maximum","number"])},exclusiveMaximum:function(s,c){typeof c.exclusiveMaximum!="boolean"?s.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMaximum","boolean"]):c.maximum===void 0&&s.addError("KEYWORD_DEPENDENCY",["exclusiveMaximum","maximum"])},minimum:function(s,c){typeof c.minimum!="number"&&s.addError("KEYWORD_TYPE_EXPECTED",["minimum","number"])},exclusiveMinimum:function(s,c){typeof c.exclusiveMinimum!="boolean"?s.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMinimum","boolean"]):c.minimum===void 0&&s.addError("KEYWORD_DEPENDENCY",["exclusiveMinimum","minimum"])},maxLength:function(s,c){i.whatIs(c.maxLength)!=="integer"?s.addError("KEYWORD_TYPE_EXPECTED",["maxLength","integer"]):c.maxLength<0&&s.addError("KEYWORD_MUST_BE",["maxLength","greater than, or equal to 0"])},minLength:function(s,c){i.whatIs(c.minLength)!=="integer"?s.addError("KEYWORD_TYPE_EXPECTED",["minLength","integer"]):c.minLength<0&&s.addError("KEYWORD_MUST_BE",["minLength","greater than, or equal to 0"])},pattern:function(s,c){if(typeof c.pattern!="string")s.addError("KEYWORD_TYPE_EXPECTED",["pattern","string"]);else try{RegExp(c.pattern)}catch{s.addError("KEYWORD_PATTERN",["pattern",c.pattern])}},additionalItems:function(s,c){var l=i.whatIs(c.additionalItems);l!=="boolean"&&l!=="object"?s.addError("KEYWORD_TYPE_EXPECTED",["additionalItems",["boolean","object"]]):l==="object"&&(s.path.push("additionalItems"),r.validateSchema.call(this,s,c.additionalItems),s.path.pop())},items:function(s,c){var l=i.whatIs(c.items);if(l==="object")s.path.push("items"),r.validateSchema.call(this,s,c.items),s.path.pop();else if(l==="array")for(var d=c.items.length;d--;)s.path.push("items"),s.path.push(d.toString()),r.validateSchema.call(this,s,c.items[d]),s.path.pop(),s.path.pop();else s.addError("KEYWORD_TYPE_EXPECTED",["items",["array","object"]]);this.options.forceAdditional===!0&&c.additionalItems===void 0&&Array.isArray(c.items)&&s.addError("KEYWORD_UNDEFINED_STRICT",["additionalItems"]),this.options.assumeAdditional&&c.additionalItems===void 0&&Array.isArray(c.items)&&(c.additionalItems=!1)},maxItems:function(s,c){typeof c.maxItems!="number"?s.addError("KEYWORD_TYPE_EXPECTED",["maxItems","integer"]):c.maxItems<0&&s.addError("KEYWORD_MUST_BE",["maxItems","greater than, or equal to 0"])},minItems:function(s,c){i.whatIs(c.minItems)!=="integer"?s.addError("KEYWORD_TYPE_EXPECTED",["minItems","integer"]):c.minItems<0&&s.addError("KEYWORD_MUST_BE",["minItems","greater than, or equal to 0"])},uniqueItems:function(s,c){typeof c.uniqueItems!="boolean"&&s.addError("KEYWORD_TYPE_EXPECTED",["uniqueItems","boolean"])},maxProperties:function(s,c){i.whatIs(c.maxProperties)!=="integer"?s.addError("KEYWORD_TYPE_EXPECTED",["maxProperties","integer"]):c.maxProperties<0&&s.addError("KEYWORD_MUST_BE",["maxProperties","greater than, or equal to 0"])},minProperties:function(s,c){i.whatIs(c.minProperties)!=="integer"?s.addError("KEYWORD_TYPE_EXPECTED",["minProperties","integer"]):c.minProperties<0&&s.addError("KEYWORD_MUST_BE",["minProperties","greater than, or equal to 0"])},required:function(s,c){if(i.whatIs(c.required)!=="array")s.addError("KEYWORD_TYPE_EXPECTED",["required","array"]);else if(c.required.length===0)s.addError("KEYWORD_MUST_BE",["required","an array with at least one element"]);else{for(var l=c.required.length;l--;)typeof c.required[l]!="string"&&s.addError("KEYWORD_VALUE_TYPE",["required","string"]);i.isUniqueArray(c.required)===!1&&s.addError("KEYWORD_MUST_BE",["required","an array with unique items"])}},additionalProperties:function(s,c){var l=i.whatIs(c.additionalProperties);l!=="boolean"&&l!=="object"?s.addError("KEYWORD_TYPE_EXPECTED",["additionalProperties",["boolean","object"]]):l==="object"&&(s.path.push("additionalProperties"),r.validateSchema.call(this,s,c.additionalProperties),s.path.pop())},properties:function(s,c){if(i.whatIs(c.properties)!=="object"){s.addError("KEYWORD_TYPE_EXPECTED",["properties","object"]);return}for(var l=Object.keys(c.properties),d=l.length;d--;){var h=l[d],y=c.properties[h];s.path.push("properties"),s.path.push(h),r.validateSchema.call(this,s,y),s.path.pop(),s.path.pop()}this.options.forceAdditional===!0&&c.additionalProperties===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["additionalProperties"]),this.options.assumeAdditional&&c.additionalProperties===void 0&&(c.additionalProperties=!1),this.options.forceProperties===!0&&l.length===0&&s.addError("CUSTOM_MODE_FORCE_PROPERTIES",["properties"])},patternProperties:function(s,c){if(i.whatIs(c.patternProperties)!=="object"){s.addError("KEYWORD_TYPE_EXPECTED",["patternProperties","object"]);return}for(var l=Object.keys(c.patternProperties),d=l.length;d--;){var h=l[d],y=c.patternProperties[h];try{RegExp(h)}catch{s.addError("KEYWORD_PATTERN",["patternProperties",h])}s.path.push("patternProperties"),s.path.push(h.toString()),r.validateSchema.call(this,s,y),s.path.pop(),s.path.pop()}this.options.forceProperties===!0&&l.length===0&&s.addError("CUSTOM_MODE_FORCE_PROPERTIES",["patternProperties"])},dependencies:function(s,c){if(i.whatIs(c.dependencies)!=="object")s.addError("KEYWORD_TYPE_EXPECTED",["dependencies","object"]);else for(var l=Object.keys(c.dependencies),d=l.length;d--;){var h=l[d],y=c.dependencies[h],m=i.whatIs(y);if(m==="object")s.path.push("dependencies"),s.path.push(h),r.validateSchema.call(this,s,y),s.path.pop(),s.path.pop();else if(m==="array"){var b=y.length;for(b===0&&s.addError("KEYWORD_MUST_BE",["dependencies","not empty array"]);b--;)typeof y[b]!="string"&&s.addError("KEYWORD_VALUE_TYPE",["dependensices","string"]);i.isUniqueArray(y)===!1&&s.addError("KEYWORD_MUST_BE",["dependencies","an array with unique items"])}else s.addError("KEYWORD_VALUE_TYPE",["dependencies","object or array"])}},enum:function(s,c){Array.isArray(c.enum)===!1?s.addError("KEYWORD_TYPE_EXPECTED",["enum","array"]):c.enum.length===0?s.addError("KEYWORD_MUST_BE",["enum","an array with at least one element"]):i.isUniqueArray(c.enum)===!1&&s.addError("KEYWORD_MUST_BE",["enum","an array with unique elements"])},type:function(s,c){var l=["array","boolean","integer","number","null","object","string"],d=l.join(","),h=Array.isArray(c.type);if(h){for(var y=c.type.length;y--;)l.indexOf(c.type[y])===-1&&s.addError("KEYWORD_TYPE_EXPECTED",["type",d]);i.isUniqueArray(c.type)===!1&&s.addError("KEYWORD_MUST_BE",["type","an object with unique properties"])}else typeof c.type=="string"?l.indexOf(c.type)===-1&&s.addError("KEYWORD_TYPE_EXPECTED",["type",d]):s.addError("KEYWORD_TYPE_EXPECTED",["type",["string","array"]]);this.options.noEmptyStrings===!0&&(c.type==="string"||h&&c.type.indexOf("string")!==-1)&&c.minLength===void 0&&c.enum===void 0&&c.format===void 0&&(c.minLength=1),this.options.noEmptyArrays===!0&&(c.type==="array"||h&&c.type.indexOf("array")!==-1)&&c.minItems===void 0&&(c.minItems=1),this.options.forceProperties===!0&&(c.type==="object"||h&&c.type.indexOf("object")!==-1)&&c.properties===void 0&&c.patternProperties===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["properties"]),this.options.forceItems===!0&&(c.type==="array"||h&&c.type.indexOf("array")!==-1)&&c.items===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["items"]),this.options.forceMinItems===!0&&(c.type==="array"||h&&c.type.indexOf("array")!==-1)&&c.minItems===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["minItems"]),this.options.forceMaxItems===!0&&(c.type==="array"||h&&c.type.indexOf("array")!==-1)&&c.maxItems===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["maxItems"]),this.options.forceMinLength===!0&&(c.type==="string"||h&&c.type.indexOf("string")!==-1)&&c.minLength===void 0&&c.format===void 0&&c.enum===void 0&&c.pattern===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["minLength"]),this.options.forceMaxLength===!0&&(c.type==="string"||h&&c.type.indexOf("string")!==-1)&&c.maxLength===void 0&&c.format===void 0&&c.enum===void 0&&c.pattern===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["maxLength"])},allOf:function(s,c){if(Array.isArray(c.allOf)===!1)s.addError("KEYWORD_TYPE_EXPECTED",["allOf","array"]);else if(c.allOf.length===0)s.addError("KEYWORD_MUST_BE",["allOf","an array with at least one element"]);else for(var l=c.allOf.length;l--;)s.path.push("allOf"),s.path.push(l.toString()),r.validateSchema.call(this,s,c.allOf[l]),s.path.pop(),s.path.pop()},anyOf:function(s,c){if(Array.isArray(c.anyOf)===!1)s.addError("KEYWORD_TYPE_EXPECTED",["anyOf","array"]);else if(c.anyOf.length===0)s.addError("KEYWORD_MUST_BE",["anyOf","an array with at least one element"]);else for(var l=c.anyOf.length;l--;)s.path.push("anyOf"),s.path.push(l.toString()),r.validateSchema.call(this,s,c.anyOf[l]),s.path.pop(),s.path.pop()},oneOf:function(s,c){if(Array.isArray(c.oneOf)===!1)s.addError("KEYWORD_TYPE_EXPECTED",["oneOf","array"]);else if(c.oneOf.length===0)s.addError("KEYWORD_MUST_BE",["oneOf","an array with at least one element"]);else for(var l=c.oneOf.length;l--;)s.path.push("oneOf"),s.path.push(l.toString()),r.validateSchema.call(this,s,c.oneOf[l]),s.path.pop(),s.path.pop()},not:function(s,c){i.whatIs(c.not)!=="object"?s.addError("KEYWORD_TYPE_EXPECTED",["not","object"]):(s.path.push("not"),r.validateSchema.call(this,s,c.not),s.path.pop())},definitions:function(s,c){if(i.whatIs(c.definitions)!=="object")s.addError("KEYWORD_TYPE_EXPECTED",["definitions","object"]);else for(var l=Object.keys(c.definitions),d=l.length;d--;){var h=l[d],y=c.definitions[h];s.path.push("definitions"),s.path.push(h),r.validateSchema.call(this,s,y),s.path.pop(),s.path.pop()}},format:function(s,c){typeof c.format!="string"?s.addError("KEYWORD_TYPE_EXPECTED",["format","string"]):e[c.format]===void 0&&this.options.ignoreUnknownFormats!==!0&&s.addError("UNKNOWN_FORMAT",[c.format])},id:function(s,c){typeof c.id!="string"&&s.addError("KEYWORD_TYPE_EXPECTED",["id","string"])},title:function(s,c){typeof c.title!="string"&&s.addError("KEYWORD_TYPE_EXPECTED",["title","string"])},description:function(s,c){typeof c.description!="string"&&s.addError("KEYWORD_TYPE_EXPECTED",["description","string"])},default:function(){}},o=function(s,c){for(var l=c.length;l--;)r.validateSchema.call(this,s,c[l]);return s.isValid()};r.validateSchema=function(s,c){if(s.commonErrorMessage="SCHEMA_VALIDATION_FAILED",Array.isArray(c))return o.call(this,s,c);if(c.__$validated)return!0;var l=c.$schema&&c.id!==c.$schema;if(l)if(c.__$schemaResolved&&c.__$schemaResolved!==c){var d=new n(s),h=t.validate.call(this,d,c.__$schemaResolved,c);h===!1&&s.addError("PARENT_SCHEMA_VALIDATION_FAILED",null,d)}else this.options.ignoreUnresolvableReferences!==!0&&s.addError("REF_UNRESOLVED",[c.$schema]);if(this.options.noTypeless===!0){if(c.type!==void 0){var y=[];Array.isArray(c.anyOf)&&(y=y.concat(c.anyOf)),Array.isArray(c.oneOf)&&(y=y.concat(c.oneOf)),Array.isArray(c.allOf)&&(y=y.concat(c.allOf)),y.forEach(function(D){D.type||(D.type=c.type)})}c.enum===void 0&&c.type===void 0&&c.anyOf===void 0&&c.oneOf===void 0&&c.not===void 0&&c.$ref===void 0&&s.addError("KEYWORD_UNDEFINED_STRICT",["type"])}for(var m=Object.keys(c),b=m.length;b--;){var v=m[b];v.indexOf("__")!==0&&(a[v]!==void 0?a[v].call(this,s,c):l||this.options.noExtraKeywords===!0&&s.addError("KEYWORD_UNEXPECTED",[v]))}if(this.options.pedanticCheck===!0){if(c.enum){var E=i.clone(c);for(delete E.enum,delete E.default,s.path.push("enum"),b=c.enum.length;b--;)s.path.push(b.toString()),t.validate.call(this,s,E,c.enum[b]),s.path.pop();s.path.pop()}c.default&&(s.path.push("default"),t.validate.call(this,s,c,c.default),s.path.pop())}var x=s.isValid();return x&&(c.__$validated=!0),x}})(NE)),NE}var zC;function zU(){return zC||(zC=1,(function(r){var e=mre(),t=Z0(),n=$U(),i=FU(),a=eh();function o(d){return decodeURIComponent(d).replace(/~[0-1]/g,function(h){return h==="~1"?"/":"~"})}function s(d){var h=d.indexOf("#");return h===-1?d:d.slice(0,h)}function c(d){var h=d.indexOf("#"),y=h===-1?void 0:d.slice(h+1);return y}function l(d,h){if(!(typeof d!="object"||d===null)){if(!h||d.id&&(d.id===h||d.id[0]==="#"&&d.id.substring(1)===h))return d;var y,m;if(Array.isArray(d)){for(y=d.length;y--;)if(m=l(d[y],h),m)return m}else{var b=Object.keys(d);for(y=b.length;y--;){var v=b[y];if(v.indexOf("__$")!==0&&(m=l(d[v],h),m))return m}}}}r.cacheSchemaByUri=function(d,h){var y=s(d);y&&(this.cache[y]=h)},r.removeFromCacheByUri=function(d){var h=s(d);h&&delete this.cache[h]},r.checkCacheForUri=function(d){var h=s(d);return h?this.cache[h]!=null:!1},r.getSchema=function(d,h){return typeof h=="object"&&(h=r.getSchemaByReference.call(this,d,h)),typeof h=="string"&&(h=r.getSchemaByUri.call(this,d,h)),h},r.getSchemaByReference=function(d,h){for(var y=this.referenceCache.length;y--;)if(e(this.referenceCache[y][0],h))return this.referenceCache[y][1];var m=a.cloneDeep(h);return this.referenceCache.push([h,m]),m},r.getSchemaByUri=function(d,h,y){var m=s(h),b=c(h),v=m?this.cache[m]:y;if(v&&m){var E=v!==y;if(E){d.path.push(m);var x,D=d.getAncestor(v.id);if(D)x=D;else if(x=new t(d),n.compileSchema.call(this,x,v)){var N=this.options;try{this.options=v.__$validationOptions||this.options,i.validateSchema.call(this,x,v)}finally{this.options=N}}var B=x.isValid();if(B||d.addError("REMOTE_NOT_VALID",[h],x),d.path.pop(),!B)return}}if(v&&b)for(var k=b.split("/"),F=0,T=k.length;v&&F<T;F++){var z=o(k[F]);F===0?v=l(v,z):v=v[z]}return v},r.getRemotePath=s})(OE)),OE}const gre="http://json-schema.org/draft-04/schema#",vre="http://json-schema.org/draft-04/schema#",bre="Core schema meta-schema",wre={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},_re="object",Ere={id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},xre={exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},Are={id:gre,$schema:vre,description:bre,definitions:wre,type:_re,properties:Ere,dependencies:xre,default:{}},Sre="http://json-schema.org/draft-04/hyper-schema#",Mre="http://json-schema.org/draft-04/hyper-schema#",Tre="JSON Hyper-Schema",Rre=[{$ref:"http://json-schema.org/draft-04/schema#"}],Ore={additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}]},dependencies:{additionalProperties:{anyOf:[{$ref:"#"},{type:"array"}]}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}]},definitions:{additionalProperties:{$ref:"#"}},patternProperties:{additionalProperties:{$ref:"#"}},properties:{additionalProperties:{$ref:"#"}},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},links:{type:"array",items:{$ref:"#/definitions/linkDescription"}},fragmentResolution:{type:"string"},media:{type:"object",properties:{type:{description:"A media type, as described in RFC 2046",type:"string"},binaryEncoding:{description:"A content encoding scheme, as described in RFC 2045",type:"string"}}},pathStart:{description:"Instances' URIs must start with this value for this schema to apply to them",type:"string",format:"uri"}},Cre={schemaArray:{type:"array",items:{$ref:"#"}},linkDescription:{title:"Link Description Object",type:"object",required:["href","rel"],properties:{href:{description:"a URI template, as defined by RFC 6570, with the addition of the $, ( and ) characters for pre-processing",type:"string"},rel:{description:"relation to the target resource of the link",type:"string"},title:{description:"a title for the link",type:"string"},targetSchema:{description:"JSON Schema describing the link target",$ref:"#"},mediaType:{description:"media type (as defined by RFC 2046) describing the link target",type:"string"},method:{description:'method for requesting the target of the link (e.g. for HTTP this might be "GET" or "DELETE")',type:"string"},encType:{description:"The media type in which to submit data along with the request",type:"string",default:"application/json"},schema:{description:"Schema describing the data to submit along with the request",$ref:"#"}}}},Nre={$schema:Sre,id:Mre,title:Tre,allOf:Rre,properties:Ore,definitions:Cre};var BE,VC;function Bre(){if(VC)return BE;VC=1,kee();var r=bU(),e=Z0(),t=UA(),n=jU(),i=zU(),a=$U(),o=FU(),s=eh(),c=Are,l=Nre,d={asyncTimeout:2e3,forceAdditional:!1,assumeAdditional:!1,enumCaseInsensitiveComparison:!1,forceItems:!1,forceMinItems:!1,forceMaxItems:!1,forceMinLength:!1,forceMaxLength:!1,forceProperties:!1,ignoreUnresolvableReferences:!1,noExtraKeywords:!1,noTypeless:!1,noEmptyStrings:!1,noEmptyArrays:!1,strictUris:!1,strictMode:!1,reportPathAsArray:!1,breakOnFirstError:!1,pedanticCheck:!1,ignoreUnknownFormats:!1,customValidator:null};function h(m){var b;if(typeof m=="object"){for(var v=Object.keys(m),E=v.length,x;E--;)if(x=v[E],d[x]===void 0)throw new Error("Unexpected option passed to constructor: "+x);for(v=Object.keys(d),E=v.length;E--;)x=v[E],m[x]===void 0&&(m[x]=s.clone(d[x]));b=m}else b=s.clone(d);return b.strictMode===!0&&(b.forceAdditional=!0,b.forceItems=!0,b.forceMaxLength=!0,b.forceProperties=!0,b.noExtraKeywords=!0,b.noTypeless=!0,b.noEmptyStrings=!0,b.noEmptyArrays=!0),b}function y(m){this.cache={},this.referenceCache=[],this.validateOptions={},this.options=h(m);var b=h({});this.setRemoteReference("http://json-schema.org/draft-04/schema",c,b),this.setRemoteReference("http://json-schema.org/draft-04/hyper-schema",l,b)}return y.prototype.compileSchema=function(m){var b=new e(this.options);return m=i.getSchema.call(this,b,m),a.compileSchema.call(this,b,m),this.lastReport=b,b.isValid()},y.prototype.validateSchema=function(m){if(Array.isArray(m)&&m.length===0)throw new Error(".validateSchema was called with an empty array");var b=new e(this.options);m=i.getSchema.call(this,b,m);var v=a.compileSchema.call(this,b,m);return v&&o.validateSchema.call(this,b,m),this.lastReport=b,b.isValid()},y.prototype.validate=function(m,b,v,E){s.whatIs(v)==="function"&&(E=v,v={}),v||(v={}),this.validateOptions=v;var x=s.whatIs(b);if(x!=="string"&&x!=="object"){var D=new Error("Invalid .validate call - schema must be a string or object but "+x+" was passed!");if(E){process.nextTick(function(){E(D,!1)});return}throw D}var N=!1,B=new e(this.options);if(B.json=m,typeof b=="string"){var k=b;if(b=i.getSchema.call(this,B,k),!b)throw new Error("Schema with id '"+k+"' wasn't found in the validator cache!")}else b=i.getSchema.call(this,B,b);var F=!1;N||(F=a.compileSchema.call(this,B,b)),F||(this.lastReport=B,N=!0);var T=!1;if(N||(T=o.validateSchema.call(this,B,b)),T||(this.lastReport=B,N=!0),v.schemaPath&&(B.rootSchema=b,b=r(b,v.schemaPath),!b))throw new Error("Schema path '"+v.schemaPath+"' wasn't found in the schema!");if(N||n.validate.call(this,B,b,m),E){B.processAsyncTasks(this.options.asyncTimeout,E);return}else if(B.asyncTasks.length>0)throw new Error("This validation has async tasks and cannot be done in sync mode, please provide callback argument.");return this.lastReport=B,B.isValid()},y.prototype.getLastError=function(){if(this.lastReport.errors.length===0)return null;var m=new Error;return m.name="z-schema validation error",m.message=this.lastReport.commonErrorMessage,m.details=this.lastReport.errors,m},y.prototype.getLastErrors=function(){return this.lastReport&&this.lastReport.errors.length>0?this.lastReport.errors:null},y.prototype.getMissingReferences=function(m){m=m||this.lastReport.errors;for(var b=[],v=m.length;v--;){var E=m[v];if(E.code==="UNRESOLVABLE_REFERENCE"){var x=E.params[0];b.indexOf(x)===-1&&b.push(x)}E.inner&&(b=b.concat(this.getMissingReferences(E.inner)))}return b},y.prototype.getMissingRemoteReferences=function(){for(var m=this.getMissingReferences(),b=[],v=m.length;v--;){var E=i.getRemotePath(m[v]);E&&b.indexOf(E)===-1&&b.push(E)}return b},y.prototype.setRemoteReference=function(m,b,v){typeof b=="string"?b=JSON.parse(b):b=s.cloneDeep(b),v&&(b.__$validationOptions=h(v)),i.cacheSchemaByUri.call(this,m,b)},y.prototype.getResolvedSchema=function(m){var b=new e(this.options);m=i.getSchema.call(this,b,m),m=s.cloneDeep(m);var v=[],E=function(x){var D,N=s.whatIs(x);if(!(N!=="object"&&N!=="array")&&!x.___$visited){if(x.___$visited=!0,v.push(x),x.$ref&&x.__$refResolved){var B=x.__$refResolved,k=x;delete x.$ref,delete x.__$refResolved;for(D in B)B.hasOwnProperty(D)&&(k[D]=B[D])}for(D in x)x.hasOwnProperty(D)&&(D.indexOf("__$")===0?delete x[D]:E(x[D]))}};if(E(m),v.forEach(function(x){delete x.___$visited}),this.lastReport=b,b.isValid())return m;throw this.getLastError()},y.prototype.setSchemaReader=function(m){return y.setSchemaReader(m)},y.prototype.getSchemaReader=function(){return y.schemaReader},y.schemaReader=void 0,y.setSchemaReader=function(m){y.schemaReader=m},y.registerFormat=function(m,b){t[m]=b},y.unregisterFormat=function(m){delete t[m]},y.getRegisteredFormats=function(){return Object.keys(t)},y.getDefaultOptions=function(){return s.cloneDeep(d)},y.schemaSymbol=s.schemaSymbol,y.jsonSymbol=s.jsonSymbol,BE=y,BE}var Ire=Bre();const Dre=Zo(Ire),Pre=new Dre({});Pre.setRemoteReference("http://json-schema.org/draft-07/schema#",{type:["array","boolean","integer","number","object","string"]});var x1={exports:{}},HC;function Ure(){if(HC)return x1.exports;HC=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(k,F,T){return Function.prototype.apply.call(k,F,T)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:t=function(k){return Object.getOwnPropertyNames(k)};function n(B){console&&console.warn&&console.warn(B)}var i=Number.isNaN||function(k){return k!==k};function a(){a.init.call(this)}x1.exports=a,x1.exports.once=x,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(B){if(typeof B!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof B)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(B){if(typeof B!="number"||B<0||i(B))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+B+".");o=B}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||i(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function c(B){return B._maxListeners===void 0?a.defaultMaxListeners:B._maxListeners}a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(k){for(var F=[],T=1;T<arguments.length;T++)F.push(arguments[T]);var z=k==="error",Z=this._events;if(Z!==void 0)z=z&&Z.error===void 0;else if(!z)return!1;if(z){var Y;if(F.length>0&&(Y=F[0]),Y instanceof Error)throw Y;var W=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw W.context=Y,W}var M=Z[k];if(M===void 0)return!1;if(typeof M=="function")e(M,this,F);else for(var C=M.length,R=b(M,C),T=0;T<C;++T)e(R[T],this,F);return!0};function l(B,k,F,T){var z,Z,Y;if(s(F),Z=B._events,Z===void 0?(Z=B._events=Object.create(null),B._eventsCount=0):(Z.newListener!==void 0&&(B.emit("newListener",k,F.listener?F.listener:F),Z=B._events),Y=Z[k]),Y===void 0)Y=Z[k]=F,++B._eventsCount;else if(typeof Y=="function"?Y=Z[k]=T?[F,Y]:[Y,F]:T?Y.unshift(F):Y.push(F),z=c(B),z>0&&Y.length>z&&!Y.warned){Y.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+Y.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=B,W.type=k,W.count=Y.length,n(W)}return B}a.prototype.addListener=function(k,F){return l(this,k,F,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(k,F){return l(this,k,F,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(B,k,F){var T={fired:!1,wrapFn:void 0,target:B,type:k,listener:F},z=d.bind(T);return z.listener=F,T.wrapFn=z,z}a.prototype.once=function(k,F){return s(F),this.on(k,h(this,k,F)),this},a.prototype.prependOnceListener=function(k,F){return s(F),this.prependListener(k,h(this,k,F)),this},a.prototype.removeListener=function(k,F){var T,z,Z,Y,W;if(s(F),z=this._events,z===void 0)return this;if(T=z[k],T===void 0)return this;if(T===F||T.listener===F)--this._eventsCount===0?this._events=Object.create(null):(delete z[k],z.removeListener&&this.emit("removeListener",k,T.listener||F));else if(typeof T!="function"){for(Z=-1,Y=T.length-1;Y>=0;Y--)if(T[Y]===F||T[Y].listener===F){W=T[Y].listener,Z=Y;break}if(Z<0)return this;Z===0?T.shift():v(T,Z),T.length===1&&(z[k]=T[0]),z.removeListener!==void 0&&this.emit("removeListener",k,W||F)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(k){var F,T,z;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[k]),this;if(arguments.length===0){var Z=Object.keys(T),Y;for(z=0;z<Z.length;++z)Y=Z[z],Y!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(F=T[k],typeof F=="function")this.removeListener(k,F);else if(F!==void 0)for(z=F.length-1;z>=0;z--)this.removeListener(k,F[z]);return this};function y(B,k,F){var T=B._events;if(T===void 0)return[];var z=T[k];return z===void 0?[]:typeof z=="function"?F?[z.listener||z]:[z]:F?E(z):b(z,z.length)}a.prototype.listeners=function(k){return y(this,k,!0)},a.prototype.rawListeners=function(k){return y(this,k,!1)},a.listenerCount=function(B,k){return typeof B.listenerCount=="function"?B.listenerCount(k):m.call(B,k)},a.prototype.listenerCount=m;function m(B){var k=this._events;if(k!==void 0){var F=k[B];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function b(B,k){for(var F=new Array(k),T=0;T<k;++T)F[T]=B[T];return F}function v(B,k){for(;k+1<B.length;k++)B[k]=B[k+1];B.pop()}function E(B){for(var k=new Array(B.length),F=0;F<k.length;++F)k[F]=B[F].listener||B[F];return k}function x(B,k){return new Promise(function(F,T){function z(Y){B.removeListener(k,Z),T(Y)}function Z(){typeof B.removeListener=="function"&&B.removeListener("error",z),F([].slice.call(arguments))}N(B,k,Z,{once:!0}),k!=="error"&&D(B,z,{once:!0})})}function D(B,k,F){typeof B.on=="function"&&N(B,"error",k,F)}function N(B,k,F,T){if(typeof B.on=="function")T.once?B.once(k,F):B.on(k,F);else if(typeof B.addEventListener=="function")B.addEventListener(k,function z(Z){T.once&&B.removeEventListener(k,z),F(Z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof B)}return x1.exports}Ure();var KC;(function(r){r.veriKey="veriKey",r.sigAuth="sigAuth",r.enc="enc"})(KC||(KC={}));qt("veramo:did-provider-ethr");qt("veramo:key-manager");let A1;const kre=new Uint8Array(16);function qre(){if(!A1&&(A1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!A1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return A1(kre)}const qn=[];for(let r=0;r<256;++r)qn.push((r+256).toString(16).slice(1));function Lre(r,e=0){return qn[r[e+0]]+qn[r[e+1]]+qn[r[e+2]]+qn[r[e+3]]+"-"+qn[r[e+4]]+qn[r[e+5]]+"-"+qn[r[e+6]]+qn[r[e+7]]+"-"+qn[r[e+8]]+qn[r[e+9]]+"-"+qn[r[e+10]]+qn[r[e+11]]+qn[r[e+12]]+qn[r[e+13]]+qn[r[e+14]]+qn[r[e+15]]}const jre=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),GC={randomUUID:jre};function $re(r,e,t){if(GC.randomUUID&&!r)return GC.randomUUID();r=r||{};const n=r.random||(r.rng||qre)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Lre(n)}qt("veramo:kms:local");var Gc={},IE={},DE={},PE={},ip={},ap={},WC;function Fre(){if(WC)return ap;WC=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.BrowserRandomSource=void 0;const r=65536;class e{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const n=typeof self<"u"?self.crypto||self.msCrypto:null;n&&n.getRandomValues!==void 0&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const i=new Uint8Array(n);for(let a=0;a<i.length;a+=r)this._crypto.getRandomValues(i.subarray(a,a+Math.min(i.length-a,r)));return i}}return ap.BrowserRandomSource=e,ap}function zre(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sp={},S1={},ZC;function Ec(){if(ZC)return S1;ZC=1,Object.defineProperty(S1,"__esModule",{value:!0});function r(e){for(var t=0;t<e.length;t++)e[t]=0;return e}return S1.wipe=r,S1}var YC;function Vre(){if(YC)return sp;YC=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.NodeRandomSource=void 0;const r=Ec();class e{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof zre<"u"){const n=Jv;n&&n.randomBytes&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let i=this._crypto.randomBytes(n);if(i.length!==n)throw new Error("NodeRandomSource: got fewer bytes than requested");const a=new Uint8Array(n);for(let o=0;o<a.length;o++)a[o]=i[o];return(0,r.wipe)(i),a}}return sp.NodeRandomSource=e,sp}var QC;function Hre(){if(QC)return ip;QC=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.SystemRandomSource=void 0;const r=Fre(),e=Vre();class t{constructor(){if(this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new e.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(i){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(i)}}return ip.SystemRandomSource=t,ip}var Rt={},UE={},JC;function Kre(){return JC||(JC=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(s,c){var l=s>>>16&65535,d=s&65535,h=c>>>16&65535,y=c&65535;return d*y+(l*y+d*h<<16>>>0)|0}r.mul=Math.imul||e;function t(s,c){return s+c|0}r.add=t;function n(s,c){return s-c|0}r.sub=n;function i(s,c){return s<<c|s>>>32-c}r.rotl=i;function a(s,c){return s<<32-c|s>>>c}r.rotr=a;function o(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}r.isInteger=Number.isInteger||o,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(s){return r.isInteger(s)&&s>=-r.MAX_SAFE_INTEGER&&s<=r.MAX_SAFE_INTEGER}})(UE)),UE}var XC;function kA(){if(XC)return Rt;XC=1,Object.defineProperty(Rt,"__esModule",{value:!0});var r=Kre();function e(S,_){return _===void 0&&(_=0),(S[_+0]<<8|S[_+1])<<16>>16}Rt.readInt16BE=e;function t(S,_){return _===void 0&&(_=0),(S[_+0]<<8|S[_+1])>>>0}Rt.readUint16BE=t;function n(S,_){return _===void 0&&(_=0),(S[_+1]<<8|S[_])<<16>>16}Rt.readInt16LE=n;function i(S,_){return _===void 0&&(_=0),(S[_+1]<<8|S[_])>>>0}Rt.readUint16LE=i;function a(S,_,U){return _===void 0&&(_=new Uint8Array(2)),U===void 0&&(U=0),_[U+0]=S>>>8,_[U+1]=S>>>0,_}Rt.writeUint16BE=a,Rt.writeInt16BE=a;function o(S,_,U){return _===void 0&&(_=new Uint8Array(2)),U===void 0&&(U=0),_[U+0]=S>>>0,_[U+1]=S>>>8,_}Rt.writeUint16LE=o,Rt.writeInt16LE=o;function s(S,_){return _===void 0&&(_=0),S[_]<<24|S[_+1]<<16|S[_+2]<<8|S[_+3]}Rt.readInt32BE=s;function c(S,_){return _===void 0&&(_=0),(S[_]<<24|S[_+1]<<16|S[_+2]<<8|S[_+3])>>>0}Rt.readUint32BE=c;function l(S,_){return _===void 0&&(_=0),S[_+3]<<24|S[_+2]<<16|S[_+1]<<8|S[_]}Rt.readInt32LE=l;function d(S,_){return _===void 0&&(_=0),(S[_+3]<<24|S[_+2]<<16|S[_+1]<<8|S[_])>>>0}Rt.readUint32LE=d;function h(S,_,U){return _===void 0&&(_=new Uint8Array(4)),U===void 0&&(U=0),_[U+0]=S>>>24,_[U+1]=S>>>16,_[U+2]=S>>>8,_[U+3]=S>>>0,_}Rt.writeUint32BE=h,Rt.writeInt32BE=h;function y(S,_,U){return _===void 0&&(_=new Uint8Array(4)),U===void 0&&(U=0),_[U+0]=S>>>0,_[U+1]=S>>>8,_[U+2]=S>>>16,_[U+3]=S>>>24,_}Rt.writeUint32LE=y,Rt.writeInt32LE=y;function m(S,_){_===void 0&&(_=0);var U=s(S,_),H=s(S,_+4);return U*4294967296+H-(H>>31)*4294967296}Rt.readInt64BE=m;function b(S,_){_===void 0&&(_=0);var U=c(S,_),H=c(S,_+4);return U*4294967296+H}Rt.readUint64BE=b;function v(S,_){_===void 0&&(_=0);var U=l(S,_),H=l(S,_+4);return H*4294967296+U-(U>>31)*4294967296}Rt.readInt64LE=v;function E(S,_){_===void 0&&(_=0);var U=d(S,_),H=d(S,_+4);return H*4294967296+U}Rt.readUint64LE=E;function x(S,_,U){return _===void 0&&(_=new Uint8Array(8)),U===void 0&&(U=0),h(S/4294967296>>>0,_,U),h(S>>>0,_,U+4),_}Rt.writeUint64BE=x,Rt.writeInt64BE=x;function D(S,_,U){return _===void 0&&(_=new Uint8Array(8)),U===void 0&&(U=0),y(S>>>0,_,U),y(S/4294967296>>>0,_,U+4),_}Rt.writeUint64LE=D,Rt.writeInt64LE=D;function N(S,_,U){if(U===void 0&&(U=0),S%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(S/8>_.length-U)throw new Error("readUintBE: array is too short for the given bitLength");for(var H=0,V=1,P=S/8+U-1;P>=U;P--)H+=_[P]*V,V*=256;return H}Rt.readUintBE=N;function B(S,_,U){if(U===void 0&&(U=0),S%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(S/8>_.length-U)throw new Error("readUintLE: array is too short for the given bitLength");for(var H=0,V=1,P=U;P<U+S/8;P++)H+=_[P]*V,V*=256;return H}Rt.readUintLE=B;function k(S,_,U,H){if(U===void 0&&(U=new Uint8Array(S/8)),H===void 0&&(H=0),S%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(_))throw new Error("writeUintBE value must be an integer");for(var V=1,P=S/8+H-1;P>=H;P--)U[P]=_/V&255,V*=256;return U}Rt.writeUintBE=k;function F(S,_,U,H){if(U===void 0&&(U=new Uint8Array(S/8)),H===void 0&&(H=0),S%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(_))throw new Error("writeUintLE value must be an integer");for(var V=1,P=H;P<H+S/8;P++)U[P]=_/V&255,V*=256;return U}Rt.writeUintLE=F;function T(S,_){_===void 0&&(_=0);var U=new DataView(S.buffer,S.byteOffset,S.byteLength);return U.getFloat32(_)}Rt.readFloat32BE=T;function z(S,_){_===void 0&&(_=0);var U=new DataView(S.buffer,S.byteOffset,S.byteLength);return U.getFloat32(_,!0)}Rt.readFloat32LE=z;function Z(S,_){_===void 0&&(_=0);var U=new DataView(S.buffer,S.byteOffset,S.byteLength);return U.getFloat64(_)}Rt.readFloat64BE=Z;function Y(S,_){_===void 0&&(_=0);var U=new DataView(S.buffer,S.byteOffset,S.byteLength);return U.getFloat64(_,!0)}Rt.readFloat64LE=Y;function W(S,_,U){_===void 0&&(_=new Uint8Array(4)),U===void 0&&(U=0);var H=new DataView(_.buffer,_.byteOffset,_.byteLength);return H.setFloat32(U,S),_}Rt.writeFloat32BE=W;function M(S,_,U){_===void 0&&(_=new Uint8Array(4)),U===void 0&&(U=0);var H=new DataView(_.buffer,_.byteOffset,_.byteLength);return H.setFloat32(U,S,!0),_}Rt.writeFloat32LE=M;function C(S,_,U){_===void 0&&(_=new Uint8Array(8)),U===void 0&&(U=0);var H=new DataView(_.buffer,_.byteOffset,_.byteLength);return H.setFloat64(U,S),_}Rt.writeFloat64BE=C;function R(S,_,U){_===void 0&&(_=new Uint8Array(8)),U===void 0&&(U=0);var H=new DataView(_.buffer,_.byteOffset,_.byteLength);return H.setFloat64(U,S,!0),_}return Rt.writeFloat64LE=R,Rt}var eN;function qA(){return eN||(eN=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=Hre(),t=kA(),n=Ec();r.defaultRandomSource=new e.SystemRandomSource;function i(l,d=r.defaultRandomSource){return d.randomBytes(l)}r.randomBytes=i;function a(l=r.defaultRandomSource){const d=i(4,l),h=(0,t.readUint32LE)(d);return(0,n.wipe)(d),h}r.randomUint32=a;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(l,d=o,h=r.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let y="";const m=d.length,b=256-256%m;for(;l>0;){const v=i(Math.ceil(l*256/b),h);for(let E=0;E<v.length&&l>0;E++){const x=v[E];x<b&&(y+=d.charAt(x%m),l--)}(0,n.wipe)(v)}return y}r.randomString=s;function c(l,d=o,h=r.defaultRandomSource){const y=Math.ceil(l/(Math.log(d.length)/Math.LN2));return s(y,d,h)}r.randomStringForEntropy=c})(PE)),PE}var tN;function rN(){return tN||(tN=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=qA(),t=Ec();r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function n(B){const k=new Float64Array(16);if(B)for(let F=0;F<B.length;F++)k[F]=B[F];return k}const i=new Uint8Array(32);i[0]=9;const a=n([56129,1]);function o(B){let k=1;for(let F=0;F<16;F++){let T=B[F]+k+65535;k=Math.floor(T/65536),B[F]=T-k*65536}B[0]+=k-1+37*(k-1)}function s(B,k,F){const T=~(F-1);for(let z=0;z<16;z++){const Z=T&(B[z]^k[z]);B[z]^=Z,k[z]^=Z}}function c(B,k){const F=n(),T=n();for(let z=0;z<16;z++)T[z]=k[z];o(T),o(T),o(T);for(let z=0;z<2;z++){F[0]=T[0]-65517;for(let Y=1;Y<15;Y++)F[Y]=T[Y]-65535-(F[Y-1]>>16&1),F[Y-1]&=65535;F[15]=T[15]-32767-(F[14]>>16&1);const Z=F[15]>>16&1;F[14]&=65535,s(T,F,1-Z)}for(let z=0;z<16;z++)B[2*z]=T[z]&255,B[2*z+1]=T[z]>>8}function l(B,k){for(let F=0;F<16;F++)B[F]=k[2*F]+(k[2*F+1]<<8);B[15]&=32767}function d(B,k,F){for(let T=0;T<16;T++)B[T]=k[T]+F[T]}function h(B,k,F){for(let T=0;T<16;T++)B[T]=k[T]-F[T]}function y(B,k,F){let T,z,Z=0,Y=0,W=0,M=0,C=0,R=0,S=0,_=0,U=0,H=0,V=0,P=0,$=0,te=0,ae=0,ce=0,fe=0,oe=0,ye=0,me=0,ve=0,we=0,De=0,Te=0,Se=0,Le=0,$e=0,ie=0,L=0,j=0,X=0,ue=F[0],le=F[1],de=F[2],Be=F[3],Me=F[4],Pe=F[5],Qe=F[6],q=F[7],w=F[8],A=F[9],K=F[10],G=F[11],ee=F[12],ne=F[13],be=F[14],Ue=F[15];T=k[0],Z+=T*ue,Y+=T*le,W+=T*de,M+=T*Be,C+=T*Me,R+=T*Pe,S+=T*Qe,_+=T*q,U+=T*w,H+=T*A,V+=T*K,P+=T*G,$+=T*ee,te+=T*ne,ae+=T*be,ce+=T*Ue,T=k[1],Y+=T*ue,W+=T*le,M+=T*de,C+=T*Be,R+=T*Me,S+=T*Pe,_+=T*Qe,U+=T*q,H+=T*w,V+=T*A,P+=T*K,$+=T*G,te+=T*ee,ae+=T*ne,ce+=T*be,fe+=T*Ue,T=k[2],W+=T*ue,M+=T*le,C+=T*de,R+=T*Be,S+=T*Me,_+=T*Pe,U+=T*Qe,H+=T*q,V+=T*w,P+=T*A,$+=T*K,te+=T*G,ae+=T*ee,ce+=T*ne,fe+=T*be,oe+=T*Ue,T=k[3],M+=T*ue,C+=T*le,R+=T*de,S+=T*Be,_+=T*Me,U+=T*Pe,H+=T*Qe,V+=T*q,P+=T*w,$+=T*A,te+=T*K,ae+=T*G,ce+=T*ee,fe+=T*ne,oe+=T*be,ye+=T*Ue,T=k[4],C+=T*ue,R+=T*le,S+=T*de,_+=T*Be,U+=T*Me,H+=T*Pe,V+=T*Qe,P+=T*q,$+=T*w,te+=T*A,ae+=T*K,ce+=T*G,fe+=T*ee,oe+=T*ne,ye+=T*be,me+=T*Ue,T=k[5],R+=T*ue,S+=T*le,_+=T*de,U+=T*Be,H+=T*Me,V+=T*Pe,P+=T*Qe,$+=T*q,te+=T*w,ae+=T*A,ce+=T*K,fe+=T*G,oe+=T*ee,ye+=T*ne,me+=T*be,ve+=T*Ue,T=k[6],S+=T*ue,_+=T*le,U+=T*de,H+=T*Be,V+=T*Me,P+=T*Pe,$+=T*Qe,te+=T*q,ae+=T*w,ce+=T*A,fe+=T*K,oe+=T*G,ye+=T*ee,me+=T*ne,ve+=T*be,we+=T*Ue,T=k[7],_+=T*ue,U+=T*le,H+=T*de,V+=T*Be,P+=T*Me,$+=T*Pe,te+=T*Qe,ae+=T*q,ce+=T*w,fe+=T*A,oe+=T*K,ye+=T*G,me+=T*ee,ve+=T*ne,we+=T*be,De+=T*Ue,T=k[8],U+=T*ue,H+=T*le,V+=T*de,P+=T*Be,$+=T*Me,te+=T*Pe,ae+=T*Qe,ce+=T*q,fe+=T*w,oe+=T*A,ye+=T*K,me+=T*G,ve+=T*ee,we+=T*ne,De+=T*be,Te+=T*Ue,T=k[9],H+=T*ue,V+=T*le,P+=T*de,$+=T*Be,te+=T*Me,ae+=T*Pe,ce+=T*Qe,fe+=T*q,oe+=T*w,ye+=T*A,me+=T*K,ve+=T*G,we+=T*ee,De+=T*ne,Te+=T*be,Se+=T*Ue,T=k[10],V+=T*ue,P+=T*le,$+=T*de,te+=T*Be,ae+=T*Me,ce+=T*Pe,fe+=T*Qe,oe+=T*q,ye+=T*w,me+=T*A,ve+=T*K,we+=T*G,De+=T*ee,Te+=T*ne,Se+=T*be,Le+=T*Ue,T=k[11],P+=T*ue,$+=T*le,te+=T*de,ae+=T*Be,ce+=T*Me,fe+=T*Pe,oe+=T*Qe,ye+=T*q,me+=T*w,ve+=T*A,we+=T*K,De+=T*G,Te+=T*ee,Se+=T*ne,Le+=T*be,$e+=T*Ue,T=k[12],$+=T*ue,te+=T*le,ae+=T*de,ce+=T*Be,fe+=T*Me,oe+=T*Pe,ye+=T*Qe,me+=T*q,ve+=T*w,we+=T*A,De+=T*K,Te+=T*G,Se+=T*ee,Le+=T*ne,$e+=T*be,ie+=T*Ue,T=k[13],te+=T*ue,ae+=T*le,ce+=T*de,fe+=T*Be,oe+=T*Me,ye+=T*Pe,me+=T*Qe,ve+=T*q,we+=T*w,De+=T*A,Te+=T*K,Se+=T*G,Le+=T*ee,$e+=T*ne,ie+=T*be,L+=T*Ue,T=k[14],ae+=T*ue,ce+=T*le,fe+=T*de,oe+=T*Be,ye+=T*Me,me+=T*Pe,ve+=T*Qe,we+=T*q,De+=T*w,Te+=T*A,Se+=T*K,Le+=T*G,$e+=T*ee,ie+=T*ne,L+=T*be,j+=T*Ue,T=k[15],ce+=T*ue,fe+=T*le,oe+=T*de,ye+=T*Be,me+=T*Me,ve+=T*Pe,we+=T*Qe,De+=T*q,Te+=T*w,Se+=T*A,Le+=T*K,$e+=T*G,ie+=T*ee,L+=T*ne,j+=T*be,X+=T*Ue,Z+=38*fe,Y+=38*oe,W+=38*ye,M+=38*me,C+=38*ve,R+=38*we,S+=38*De,_+=38*Te,U+=38*Se,H+=38*Le,V+=38*$e,P+=38*ie,$+=38*L,te+=38*j,ae+=38*X,z=1,T=Z+z+65535,z=Math.floor(T/65536),Z=T-z*65536,T=Y+z+65535,z=Math.floor(T/65536),Y=T-z*65536,T=W+z+65535,z=Math.floor(T/65536),W=T-z*65536,T=M+z+65535,z=Math.floor(T/65536),M=T-z*65536,T=C+z+65535,z=Math.floor(T/65536),C=T-z*65536,T=R+z+65535,z=Math.floor(T/65536),R=T-z*65536,T=S+z+65535,z=Math.floor(T/65536),S=T-z*65536,T=_+z+65535,z=Math.floor(T/65536),_=T-z*65536,T=U+z+65535,z=Math.floor(T/65536),U=T-z*65536,T=H+z+65535,z=Math.floor(T/65536),H=T-z*65536,T=V+z+65535,z=Math.floor(T/65536),V=T-z*65536,T=P+z+65535,z=Math.floor(T/65536),P=T-z*65536,T=$+z+65535,z=Math.floor(T/65536),$=T-z*65536,T=te+z+65535,z=Math.floor(T/65536),te=T-z*65536,T=ae+z+65535,z=Math.floor(T/65536),ae=T-z*65536,T=ce+z+65535,z=Math.floor(T/65536),ce=T-z*65536,Z+=z-1+37*(z-1),z=1,T=Z+z+65535,z=Math.floor(T/65536),Z=T-z*65536,T=Y+z+65535,z=Math.floor(T/65536),Y=T-z*65536,T=W+z+65535,z=Math.floor(T/65536),W=T-z*65536,T=M+z+65535,z=Math.floor(T/65536),M=T-z*65536,T=C+z+65535,z=Math.floor(T/65536),C=T-z*65536,T=R+z+65535,z=Math.floor(T/65536),R=T-z*65536,T=S+z+65535,z=Math.floor(T/65536),S=T-z*65536,T=_+z+65535,z=Math.floor(T/65536),_=T-z*65536,T=U+z+65535,z=Math.floor(T/65536),U=T-z*65536,T=H+z+65535,z=Math.floor(T/65536),H=T-z*65536,T=V+z+65535,z=Math.floor(T/65536),V=T-z*65536,T=P+z+65535,z=Math.floor(T/65536),P=T-z*65536,T=$+z+65535,z=Math.floor(T/65536),$=T-z*65536,T=te+z+65535,z=Math.floor(T/65536),te=T-z*65536,T=ae+z+65535,z=Math.floor(T/65536),ae=T-z*65536,T=ce+z+65535,z=Math.floor(T/65536),ce=T-z*65536,Z+=z-1+37*(z-1),B[0]=Z,B[1]=Y,B[2]=W,B[3]=M,B[4]=C,B[5]=R,B[6]=S,B[7]=_,B[8]=U,B[9]=H,B[10]=V,B[11]=P,B[12]=$,B[13]=te,B[14]=ae,B[15]=ce}function m(B,k){y(B,k,k)}function b(B,k){const F=n();for(let T=0;T<16;T++)F[T]=k[T];for(let T=253;T>=0;T--)m(F,F),T!==2&&T!==4&&y(F,F,k);for(let T=0;T<16;T++)B[T]=F[T]}function v(B,k){const F=new Uint8Array(32),T=new Float64Array(80),z=n(),Z=n(),Y=n(),W=n(),M=n(),C=n();for(let U=0;U<31;U++)F[U]=B[U];F[31]=B[31]&127|64,F[0]&=248,l(T,k);for(let U=0;U<16;U++)Z[U]=T[U];z[0]=W[0]=1;for(let U=254;U>=0;--U){const H=F[U>>>3]>>>(U&7)&1;s(z,Z,H),s(Y,W,H),d(M,z,Y),h(z,z,Y),d(Y,Z,W),h(Z,Z,W),m(W,M),m(C,z),y(z,Y,z),y(Y,Z,M),d(M,z,Y),h(z,z,Y),m(Z,z),h(Y,W,C),y(z,Y,a),d(z,z,W),y(Y,Y,z),y(z,W,C),y(W,Z,T),m(Z,M),s(z,Z,H),s(Y,W,H)}for(let U=0;U<16;U++)T[U+16]=z[U],T[U+32]=Y[U],T[U+48]=Z[U],T[U+64]=W[U];const R=T.subarray(32),S=T.subarray(16);b(R,R),y(S,S,R);const _=new Uint8Array(32);return c(_,S),_}r.scalarMult=v;function E(B){return v(B,i)}r.scalarMultBase=E;function x(B){if(B.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const k=new Uint8Array(B);return{publicKey:E(k),secretKey:k}}r.generateKeyPairFromSeed=x;function D(B){const k=(0,e.randomBytes)(32,B),F=x(k);return(0,t.wipe)(k),F}r.generateKeyPair=D;function N(B,k,F=!1){if(B.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(k.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const T=v(B,k);if(F){let z=0;for(let Z=0;Z<T.length;Z++)z|=T[Z];if(z===0)throw new Error("X25519: invalid shared key")}return T}r.sharedKey=N})(DE)),DE}var Kf={},op={},nN;function Gre(){if(nN)return op;nN=1,Object.defineProperty(op,"__esModule",{value:!0});var r=kA(),e=Ec(),t=20;function n(s,c,l){for(var d=1634760805,h=l[3]<<24|l[2]<<16|l[1]<<8|l[0],y=l[7]<<24|l[6]<<16|l[5]<<8|l[4],m=l[11]<<24|l[10]<<16|l[9]<<8|l[8],b=l[15]<<24|l[14]<<16|l[13]<<8|l[12],v=857760878,E=c[3]<<24|c[2]<<16|c[1]<<8|c[0],x=c[7]<<24|c[6]<<16|c[5]<<8|c[4],D=c[11]<<24|c[10]<<16|c[9]<<8|c[8],N=c[15]<<24|c[14]<<16|c[13]<<8|c[12],B=2036477234,k=l[19]<<24|l[18]<<16|l[17]<<8|l[16],F=l[23]<<24|l[22]<<16|l[21]<<8|l[20],T=l[27]<<24|l[26]<<16|l[25]<<8|l[24],z=l[31]<<24|l[30]<<16|l[29]<<8|l[28],Z=1797285236,Y=d,W=h,M=y,C=m,R=b,S=v,_=E,U=x,H=D,V=N,P=B,$=k,te=F,ae=T,ce=z,fe=Z,oe,ye=0;ye<t;ye+=2)oe=Y+te|0,R^=oe<<7|oe>>>25,oe=R+Y|0,H^=oe<<9|oe>>>23,oe=H+R|0,te^=oe<<13|oe>>>19,oe=te+H|0,Y^=oe<<18|oe>>>14,oe=S+W|0,V^=oe<<7|oe>>>25,oe=V+S|0,ae^=oe<<9|oe>>>23,oe=ae+V|0,W^=oe<<13|oe>>>19,oe=W+ae|0,S^=oe<<18|oe>>>14,oe=P+_|0,ce^=oe<<7|oe>>>25,oe=ce+P|0,M^=oe<<9|oe>>>23,oe=M+ce|0,_^=oe<<13|oe>>>19,oe=_+M|0,P^=oe<<18|oe>>>14,oe=fe+$|0,C^=oe<<7|oe>>>25,oe=C+fe|0,U^=oe<<9|oe>>>23,oe=U+C|0,$^=oe<<13|oe>>>19,oe=$+U|0,fe^=oe<<18|oe>>>14,oe=Y+C|0,W^=oe<<7|oe>>>25,oe=W+Y|0,M^=oe<<9|oe>>>23,oe=M+W|0,C^=oe<<13|oe>>>19,oe=C+M|0,Y^=oe<<18|oe>>>14,oe=S+R|0,_^=oe<<7|oe>>>25,oe=_+S|0,U^=oe<<9|oe>>>23,oe=U+_|0,R^=oe<<13|oe>>>19,oe=R+U|0,S^=oe<<18|oe>>>14,oe=P+V|0,$^=oe<<7|oe>>>25,oe=$+P|0,H^=oe<<9|oe>>>23,oe=H+$|0,V^=oe<<13|oe>>>19,oe=V+H|0,P^=oe<<18|oe>>>14,oe=fe+ce|0,te^=oe<<7|oe>>>25,oe=te+fe|0,ae^=oe<<9|oe>>>23,oe=ae+te|0,ce^=oe<<13|oe>>>19,oe=ce+ae|0,fe^=oe<<18|oe>>>14;r.writeUint32LE(Y+d|0,s,0),r.writeUint32LE(W+h|0,s,4),r.writeUint32LE(M+y|0,s,8),r.writeUint32LE(C+m|0,s,12),r.writeUint32LE(R+b|0,s,16),r.writeUint32LE(S+v|0,s,20),r.writeUint32LE(_+E|0,s,24),r.writeUint32LE(U+x|0,s,28),r.writeUint32LE(H+D|0,s,32),r.writeUint32LE(V+N|0,s,36),r.writeUint32LE(P+B|0,s,40),r.writeUint32LE($+k|0,s,44),r.writeUint32LE(te+F|0,s,48),r.writeUint32LE(ae+T|0,s,52),r.writeUint32LE(ce+z|0,s,56),r.writeUint32LE(fe+Z|0,s,60)}function i(s,c,l,d,h){if(h===void 0&&(h=0),s.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(d.length<l.length)throw new Error("Salsa20: destination is shorter than source");var y,m;if(h===0){if(c.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");y=new Uint8Array(16),y.set(c),m=c.length}else{if(c.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");y=c,m=16-h}for(var b=new Uint8Array(64),v=0;v<l.length;v+=64){n(b,y,s);for(var E=v;E<v+64&&E<l.length;E++)d[E]=l[E]^b[E-v];o(y,m,y.length-m)}return e.wipe(b),h===0&&e.wipe(y),d}op.streamXOR=i;function a(s,c,l,d){return d===void 0&&(d=0),e.wipe(l),i(s,c,l,l,d)}op.stream=a;function o(s,c,l){for(var d=1;l--;)d=d+(s[c]&255)|0,s[c]=d&255,d>>>=8,c++;if(d>0)throw new Error("Salsa20: counter overflow")}return op}var iN;function VU(){if(iN)return Kf;iN=1,Object.defineProperty(Kf,"__esModule",{value:!0});var r=kA(),e=Gre(),t=Ec();function n(s,c,l,d,h){if(h===void 0&&(h=0),h===0){if(c.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(c.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var y=o(s,c.subarray(0,16),new Uint8Array(32)),m=e.streamXOR(y,c.subarray(16),l,d,h);return t.wipe(y),m}Kf.streamXOR=n;function i(s,c,l,d){return d===void 0&&(d=0),t.wipe(l),n(s,c,l,l,d)}Kf.stream=i;var a=20;function o(s,c,l){for(var d=1634760805,h=s[3]<<24|s[2]<<16|s[1]<<8|s[0],y=s[7]<<24|s[6]<<16|s[5]<<8|s[4],m=s[11]<<24|s[10]<<16|s[9]<<8|s[8],b=s[15]<<24|s[14]<<16|s[13]<<8|s[12],v=857760878,E=c[3]<<24|c[2]<<16|c[1]<<8|c[0],x=c[7]<<24|c[6]<<16|c[5]<<8|c[4],D=c[11]<<24|c[10]<<16|c[9]<<8|c[8],N=c[15]<<24|c[14]<<16|c[13]<<8|c[12],B=2036477234,k=s[19]<<24|s[18]<<16|s[17]<<8|s[16],F=s[23]<<24|s[22]<<16|s[21]<<8|s[20],T=s[27]<<24|s[26]<<16|s[25]<<8|s[24],z=s[31]<<24|s[30]<<16|s[29]<<8|s[28],Z=1797285236,Y,W=0;W<a;W+=2)Y=d+F|0,b^=Y<<7|Y>>>25,Y=b+d|0,D^=Y<<9|Y>>>23,Y=D+b|0,F^=Y<<13|Y>>>19,Y=F+D|0,d^=Y<<18|Y>>>14,Y=v+h|0,N^=Y<<7|Y>>>25,Y=N+v|0,T^=Y<<9|Y>>>23,Y=T+N|0,h^=Y<<13|Y>>>19,Y=h+T|0,v^=Y<<18|Y>>>14,Y=B+E|0,z^=Y<<7|Y>>>25,Y=z+B|0,y^=Y<<9|Y>>>23,Y=y+z|0,E^=Y<<13|Y>>>19,Y=E+y|0,B^=Y<<18|Y>>>14,Y=Z+k|0,m^=Y<<7|Y>>>25,Y=m+Z|0,x^=Y<<9|Y>>>23,Y=x+m|0,k^=Y<<13|Y>>>19,Y=k+x|0,Z^=Y<<18|Y>>>14,Y=d+m|0,h^=Y<<7|Y>>>25,Y=h+d|0,y^=Y<<9|Y>>>23,Y=y+h|0,m^=Y<<13|Y>>>19,Y=m+y|0,d^=Y<<18|Y>>>14,Y=v+b|0,E^=Y<<7|Y>>>25,Y=E+v|0,x^=Y<<9|Y>>>23,Y=x+E|0,b^=Y<<13|Y>>>19,Y=b+x|0,v^=Y<<18|Y>>>14,Y=B+N|0,k^=Y<<7|Y>>>25,Y=k+B|0,D^=Y<<9|Y>>>23,Y=D+k|0,N^=Y<<13|Y>>>19,Y=N+D|0,B^=Y<<18|Y>>>14,Y=Z+z|0,F^=Y<<7|Y>>>25,Y=F+Z|0,T^=Y<<9|Y>>>23,Y=T+F|0,z^=Y<<13|Y>>>19,Y=z+T|0,Z^=Y<<18|Y>>>14;return r.writeUint32LE(d,l,0),r.writeUint32LE(v,l,4),r.writeUint32LE(B,l,8),r.writeUint32LE(Z,l,12),r.writeUint32LE(E,l,16),r.writeUint32LE(x,l,20),r.writeUint32LE(D,l,24),r.writeUint32LE(N,l,28),l}return Kf.hsalsa=o,Kf}var Ao={},kE={},Wc={},aN;function Wre(){if(aN)return Wc;aN=1,Object.defineProperty(Wc,"__esModule",{value:!0});function r(i,a,o){return~(i-1)&a|i-1&o}Wc.select=r;function e(i,a){return(i|0)-(a|0)-1>>>31&1}Wc.lessOrEqual=e;function t(i,a){if(i.length!==a.length)return 0;for(var o=0,s=0;s<i.length;s++)o|=i[s]^a[s];return 1&o-1>>>8}Wc.compare=t;function n(i,a){return i.length===0||a.length===0?!1:t(i,a)!==0}return Wc.equal=n,Wc}var sN;function Zre(){return sN||(sN=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Wre(),t=Ec();r.DIGEST_LENGTH=16;var n=(function(){function o(s){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=s[0]|s[1]<<8;this._r[0]=c&8191;var l=s[2]|s[3]<<8;this._r[1]=(c>>>13|l<<3)&8191;var d=s[4]|s[5]<<8;this._r[2]=(l>>>10|d<<6)&7939;var h=s[6]|s[7]<<8;this._r[3]=(d>>>7|h<<9)&8191;var y=s[8]|s[9]<<8;this._r[4]=(h>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var m=s[10]|s[11]<<8;this._r[6]=(y>>>14|m<<2)&8191;var b=s[12]|s[13]<<8;this._r[7]=(m>>>11|b<<5)&8065;var v=s[14]|s[15]<<8;this._r[8]=(b>>>8|v<<8)&8191,this._r[9]=v>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return o.prototype._blocks=function(s,c,l){for(var d=this._fin?0:2048,h=this._h[0],y=this._h[1],m=this._h[2],b=this._h[3],v=this._h[4],E=this._h[5],x=this._h[6],D=this._h[7],N=this._h[8],B=this._h[9],k=this._r[0],F=this._r[1],T=this._r[2],z=this._r[3],Z=this._r[4],Y=this._r[5],W=this._r[6],M=this._r[7],C=this._r[8],R=this._r[9];l>=16;){var S=s[c+0]|s[c+1]<<8;h+=S&8191;var _=s[c+2]|s[c+3]<<8;y+=(S>>>13|_<<3)&8191;var U=s[c+4]|s[c+5]<<8;m+=(_>>>10|U<<6)&8191;var H=s[c+6]|s[c+7]<<8;b+=(U>>>7|H<<9)&8191;var V=s[c+8]|s[c+9]<<8;v+=(H>>>4|V<<12)&8191,E+=V>>>1&8191;var P=s[c+10]|s[c+11]<<8;x+=(V>>>14|P<<2)&8191;var $=s[c+12]|s[c+13]<<8;D+=(P>>>11|$<<5)&8191;var te=s[c+14]|s[c+15]<<8;N+=($>>>8|te<<8)&8191,B+=te>>>5|d;var ae=0,ce=ae;ce+=h*k,ce+=y*(5*R),ce+=m*(5*C),ce+=b*(5*M),ce+=v*(5*W),ae=ce>>>13,ce&=8191,ce+=E*(5*Y),ce+=x*(5*Z),ce+=D*(5*z),ce+=N*(5*T),ce+=B*(5*F),ae+=ce>>>13,ce&=8191;var fe=ae;fe+=h*F,fe+=y*k,fe+=m*(5*R),fe+=b*(5*C),fe+=v*(5*M),ae=fe>>>13,fe&=8191,fe+=E*(5*W),fe+=x*(5*Y),fe+=D*(5*Z),fe+=N*(5*z),fe+=B*(5*T),ae+=fe>>>13,fe&=8191;var oe=ae;oe+=h*T,oe+=y*F,oe+=m*k,oe+=b*(5*R),oe+=v*(5*C),ae=oe>>>13,oe&=8191,oe+=E*(5*M),oe+=x*(5*W),oe+=D*(5*Y),oe+=N*(5*Z),oe+=B*(5*z),ae+=oe>>>13,oe&=8191;var ye=ae;ye+=h*z,ye+=y*T,ye+=m*F,ye+=b*k,ye+=v*(5*R),ae=ye>>>13,ye&=8191,ye+=E*(5*C),ye+=x*(5*M),ye+=D*(5*W),ye+=N*(5*Y),ye+=B*(5*Z),ae+=ye>>>13,ye&=8191;var me=ae;me+=h*Z,me+=y*z,me+=m*T,me+=b*F,me+=v*k,ae=me>>>13,me&=8191,me+=E*(5*R),me+=x*(5*C),me+=D*(5*M),me+=N*(5*W),me+=B*(5*Y),ae+=me>>>13,me&=8191;var ve=ae;ve+=h*Y,ve+=y*Z,ve+=m*z,ve+=b*T,ve+=v*F,ae=ve>>>13,ve&=8191,ve+=E*k,ve+=x*(5*R),ve+=D*(5*C),ve+=N*(5*M),ve+=B*(5*W),ae+=ve>>>13,ve&=8191;var we=ae;we+=h*W,we+=y*Y,we+=m*Z,we+=b*z,we+=v*T,ae=we>>>13,we&=8191,we+=E*F,we+=x*k,we+=D*(5*R),we+=N*(5*C),we+=B*(5*M),ae+=we>>>13,we&=8191;var De=ae;De+=h*M,De+=y*W,De+=m*Y,De+=b*Z,De+=v*z,ae=De>>>13,De&=8191,De+=E*T,De+=x*F,De+=D*k,De+=N*(5*R),De+=B*(5*C),ae+=De>>>13,De&=8191;var Te=ae;Te+=h*C,Te+=y*M,Te+=m*W,Te+=b*Y,Te+=v*Z,ae=Te>>>13,Te&=8191,Te+=E*z,Te+=x*T,Te+=D*F,Te+=N*k,Te+=B*(5*R),ae+=Te>>>13,Te&=8191;var Se=ae;Se+=h*R,Se+=y*C,Se+=m*M,Se+=b*W,Se+=v*Y,ae=Se>>>13,Se&=8191,Se+=E*Z,Se+=x*z,Se+=D*T,Se+=N*F,Se+=B*k,ae+=Se>>>13,Se&=8191,ae=(ae<<2)+ae|0,ae=ae+ce|0,ce=ae&8191,ae=ae>>>13,fe+=ae,h=ce,y=fe,m=oe,b=ye,v=me,E=ve,x=we,D=De,N=Te,B=Se,c+=16,l-=16}this._h[0]=h,this._h[1]=y,this._h[2]=m,this._h[3]=b,this._h[4]=v,this._h[5]=E,this._h[6]=x,this._h[7]=D,this._h[8]=N,this._h[9]=B},o.prototype.finish=function(s,c){c===void 0&&(c=0);var l=new Uint16Array(10),d,h,y,m;if(this._leftover){for(m=this._leftover,this._buffer[m++]=1;m<16;m++)this._buffer[m]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,m=2;m<10;m++)this._h[m]+=d,d=this._h[m]>>>13,this._h[m]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,l[0]=this._h[0]+5,d=l[0]>>>13,l[0]&=8191,m=1;m<10;m++)l[m]=this._h[m]+d,d=l[m]>>>13,l[m]&=8191;for(l[9]-=8192,h=(d^1)-1,m=0;m<10;m++)l[m]&=h;for(h=~h,m=0;m<10;m++)this._h[m]=this._h[m]&h|l[m];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,m=1;m<8;m++)y=(this._h[m]+this._pad[m]|0)+(y>>>16)|0,this._h[m]=y&65535;return s[c+0]=this._h[0]>>>0,s[c+1]=this._h[0]>>>8,s[c+2]=this._h[1]>>>0,s[c+3]=this._h[1]>>>8,s[c+4]=this._h[2]>>>0,s[c+5]=this._h[2]>>>8,s[c+6]=this._h[3]>>>0,s[c+7]=this._h[3]>>>8,s[c+8]=this._h[4]>>>0,s[c+9]=this._h[4]>>>8,s[c+10]=this._h[5]>>>0,s[c+11]=this._h[5]>>>8,s[c+12]=this._h[6]>>>0,s[c+13]=this._h[6]>>>8,s[c+14]=this._h[7]>>>0,s[c+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(s){var c=0,l=s.length,d;if(this._leftover){d=16-this._leftover,d>l&&(d=l);for(var h=0;h<d;h++)this._buffer[this._leftover+h]=s[c+h];if(l-=d,c+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(d=l-l%16,this._blocks(s,c,d),c+=d,l-=d),l){for(var h=0;h<l;h++)this._buffer[this._leftover+h]=s[c+h];this._leftover+=l}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},o.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o})();r.Poly1305=n;function i(o,s){var c=new n(o);c.update(s);var l=c.digest();return c.clean(),l}r.oneTimeAuth=i;function a(o,s){return o.length!==r.DIGEST_LENGTH||s.length!==r.DIGEST_LENGTH?!1:e.equal(o,s)}r.equal=a})(kE)),kE}var oN;function HU(){if(oN)return Ao;oN=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.generateKey=Ao.openSecretBox=Ao.secretBox=void 0;const r=VU(),e=Zre(),t=Ec(),n=qA();function i(s,c,l){if(c.length!==24)throw new Error("secretBox nonce must be 24 bytes");const d=new Uint8Array(64),h=new Uint8Array(32);h.set(c),(0,r.stream)(s,h,d,8);const y=new Uint8Array(16+l.length);for(let b=0;b<32&&b<l.length;b++)y[16+b]=l[b]^d[32+b];l.length>32&&(0,r.streamXOR)(s,h,l.subarray(32),y.subarray(48),8);const m=(0,e.oneTimeAuth)(d.subarray(0,32),y.subarray(16));for(let b=0;b<m.length;b++)y[b]=m[b];return(0,t.wipe)(m),(0,t.wipe)(d),(0,t.wipe)(h),y}Ao.secretBox=i;function a(s,c,l){if(c.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(l.length<16)throw new Error("secretBox data must be at least 16 bytes");const d=new Uint8Array(64),h=new Uint8Array(32);h.set(c),(0,r.stream)(s,h,d,8);const y=(0,e.oneTimeAuth)(d.subarray(0,32),l.subarray(16));if(!(0,e.equal)(y,l.subarray(0,16)))return null;const m=l.subarray(16),b=new Uint8Array(m.length);for(let v=0;v<32&&v<m.length;v++)b[v]=m[v]^d[32+v];return m.length>32&&(0,r.streamXOR)(s,h,m.subarray(32),b.subarray(32),8),(0,t.wipe)(y),(0,t.wipe)(d),(0,t.wipe)(h),b}Ao.openSecretBox=a;function o(s){return(0,n.randomBytes)(32,s)}return Ao.generateKey=o,Ao}var uN;function Yre(){return uN||(uN=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.openBox=r.box=r.precomputeSharedKey=r.generateKeyPair=void 0;const e=rN(),t=VU(),n=HU(),i=Ec();var a=rN();Object.defineProperty(r,"generateKeyPair",{enumerable:!0,get:function(){return a.generateKeyPair}});const o=new Uint8Array(16);function s(d,h){const y=(0,e.scalarMult)(h,d);return(0,t.hsalsa)(y,o,y),y}r.precomputeSharedKey=s;function c(d,h,y,m){const b=s(d,h),v=(0,n.secretBox)(b,y,m);return(0,i.wipe)(b),v}r.box=c;function l(d,h,y,m){const b=s(d,h),v=(0,n.openSecretBox)(b,y,m);return(0,i.wipe)(b),v}r.openBox=l})(IE)),IE}var cN;function Qre(){return cN||(cN=1,(function(r){var e=Gc&&Gc.__createBinding||(Object.create?(function(n,i,a,o){o===void 0&&(o=a);var s=Object.getOwnPropertyDescriptor(i,a);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(n,o,s)}):(function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]})),t=Gc&&Gc.__exportStar||function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,n,a)};Object.defineProperty(r,"__esModule",{value:!0}),t(Yre(),r),t(HU(),r)})(Gc)),Gc}Qre();qA();qt("veramo:message-handler");qt("veramo:message-handler");qt("veramo:w3c:message-handler");var lN;(function(r){r[r.JWT=0]="JWT",r[r.JSONLD=1]="JSONLD",r[r.EIP712=2]="EIP712"})(lN||(lN={}));qt("veramo:w3c:action-handler");qt("veramo:resolver");class Jre{static getInheritanceTree(e){const t=[e],n=i=>{const a=Object.getPrototypeOf(i);a&&a.name&&(t.push(a),n(a))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter(n=>n.target&&t.indexOf(n.target)!==-1):e}}class Xre{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.foreignKeys=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.propertyName===t)}findTree(e){return this.trees.find(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterForeignKeys(e){return this.foreignKeys.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterUniques(e){return this.uniques.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterChecks(e){return this.checks.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterExclusions(e){return this.exclusions.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find(n=>n.target===e&&n.propertyName===t)}filterJoinColumns(e,t){return this.joinColumns.filter(n=>n.target===e&&n.propertyName===t)}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterTransactionRepository(e,t){return this.transactionRepositories.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterSingleTableChildren(e){return this.tables.filter(t=>typeof t.target=="function"&&typeof e=="function"&&Jre.isInherited(t.target,e)&&t.type==="entity-child")}findInheritanceType(e){return this.inheritances.find(t=>t.target===e)}findDiscriminatorValue(e){return this.discriminatorValues.find(t=>t.target===e)}filterByTarget(e,t){return e.filter(n=>Array.isArray(t)?t.indexOf(n.target)!==-1:n.target===t)}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(o=>o.propertyName===i.propertyName)||n.push(i))}),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach(i=>{if(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t){const o=n.findIndex(s=>s.propertyName===i.propertyName);if(Array.isArray(t)&&o!==-1&&t.indexOf(i.target)<t.indexOf(n[o].target)){const s=Object.create(n[o]);s.type=i.type,n[o]=s}else o===-1&&n.push(i)}}),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(s=>s.prefix===i.prefix&&s.propertyName===i.propertyName)||n.push(i))}),n}}var qE={};var fN;function ene(){return fN||(fN=1,(function(r){const e=SA(),t=MA(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=D,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const q=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(q,w),q.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(q){if(q>i)throw new RangeError('The value "'+q+'" is invalid for option "size"');const w=new Uint8Array(q);return Object.setPrototypeOf(w,s.prototype),w}function s(q,w,A){if(typeof q=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(q)}return c(q,w,A)}s.poolSize=8192;function c(q,w,A){if(typeof q=="string")return y(q,w);if(ArrayBuffer.isView(q))return b(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(de(q,ArrayBuffer)||q&&de(q.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(q,SharedArrayBuffer)||q&&de(q.buffer,SharedArrayBuffer)))return v(q,w,A);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=q.valueOf&&q.valueOf();if(K!=null&&K!==q)return s.from(K,w,A);const G=E(q);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return s.from(q[Symbol.toPrimitive]("string"),w,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}s.from=function(q,w,A){return c(q,w,A)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function d(q,w,A){return l(q),q<=0?o(q):w!==void 0?typeof A=="string"?o(q).fill(w,A):o(q).fill(w):o(q)}s.alloc=function(q,w,A){return d(q,w,A)};function h(q){return l(q),o(q<0?0:x(q)|0)}s.allocUnsafe=function(q){return h(q)},s.allocUnsafeSlow=function(q){return h(q)};function y(q,w){if((typeof w!="string"||w==="")&&(w="utf8"),!s.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const A=N(q,w)|0;let K=o(A);const G=K.write(q,w);return G!==A&&(K=K.slice(0,G)),K}function m(q){const w=q.length<0?0:x(q.length)|0,A=o(w);for(let K=0;K<w;K+=1)A[K]=q[K]&255;return A}function b(q){if(de(q,Uint8Array)){const w=new Uint8Array(q);return v(w.buffer,w.byteOffset,w.byteLength)}return m(q)}function v(q,w,A){if(w<0||q.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<w+(A||0))throw new RangeError('"length" is outside of buffer bounds');let K;return w===void 0&&A===void 0?K=new Uint8Array(q):A===void 0?K=new Uint8Array(q,w):K=new Uint8Array(q,w,A),Object.setPrototypeOf(K,s.prototype),K}function E(q){if(s.isBuffer(q)){const w=x(q.length)|0,A=o(w);return A.length===0||q.copy(A,0,0,w),A}if(q.length!==void 0)return typeof q.length!="number"||Be(q.length)?o(0):m(q);if(q.type==="Buffer"&&Array.isArray(q.data))return m(q.data)}function x(q){if(q>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return q|0}function D(q){return+q!=q&&(q=0),s.alloc(+q)}s.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==s.prototype},s.compare=function(w,A){if(de(w,Uint8Array)&&(w=s.from(w,w.offset,w.byteLength)),de(A,Uint8Array)&&(A=s.from(A,A.offset,A.byteLength)),!s.isBuffer(w)||!s.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===A)return 0;let K=w.length,G=A.length;for(let ee=0,ne=Math.min(K,G);ee<ne;++ee)if(w[ee]!==A[ee]){K=w[ee],G=A[ee];break}return K<G?-1:G<K?1:0},s.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(w,A){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return s.alloc(0);let K;if(A===void 0)for(A=0,K=0;K<w.length;++K)A+=w[K].length;const G=s.allocUnsafe(A);let ee=0;for(K=0;K<w.length;++K){let ne=w[K];if(de(ne,Uint8Array))ee+ne.length>G.length?(s.isBuffer(ne)||(ne=s.from(ne)),ne.copy(G,ee)):Uint8Array.prototype.set.call(G,ne,ee);else if(s.isBuffer(ne))ne.copy(G,ee);else throw new TypeError('"list" argument must be an Array of Buffers');ee+=ne.length}return G};function N(q,w){if(s.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||de(q,ArrayBuffer))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const A=q.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&A===0)return 0;let G=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return L(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return ue(q).length;default:if(G)return K?-1:L(q).length;w=(""+w).toLowerCase(),G=!0}}s.byteLength=N;function B(q,w,A){let K=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,w>>>=0,A<=w))return"";for(q||(q="utf8");;)switch(q){case"hex":return V(this,w,A);case"utf8":case"utf-8":return R(this,w,A);case"ascii":return U(this,w,A);case"latin1":case"binary":return H(this,w,A);case"base64":return C(this,w,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,w,A);default:if(K)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),K=!0}}s.prototype._isBuffer=!0;function k(q,w,A){const K=q[w];q[w]=q[A],q[A]=K}s.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<w;A+=2)k(this,A,A+1);return this},s.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<w;A+=4)k(this,A,A+3),k(this,A+1,A+2);return this},s.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<w;A+=8)k(this,A,A+7),k(this,A+1,A+6),k(this,A+2,A+5),k(this,A+3,A+4);return this},s.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?R(this,0,w):B.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(w){if(!s.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:s.compare(this,w)===0},s.prototype.inspect=function(){let w="";const A=r.INSPECT_MAX_BYTES;return w=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(w+=" ... "),"<Buffer "+w+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(w,A,K,G,ee){if(de(w,Uint8Array)&&(w=s.from(w,w.offset,w.byteLength)),!s.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(A===void 0&&(A=0),K===void 0&&(K=w?w.length:0),G===void 0&&(G=0),ee===void 0&&(ee=this.length),A<0||K>w.length||G<0||ee>this.length)throw new RangeError("out of range index");if(G>=ee&&A>=K)return 0;if(G>=ee)return-1;if(A>=K)return 1;if(A>>>=0,K>>>=0,G>>>=0,ee>>>=0,this===w)return 0;let ne=ee-G,be=K-A;const Ue=Math.min(ne,be),pe=this.slice(G,ee),Ee=w.slice(A,K);for(let Ce=0;Ce<Ue;++Ce)if(pe[Ce]!==Ee[Ce]){ne=pe[Ce],be=Ee[Ce];break}return ne<be?-1:be<ne?1:0};function F(q,w,A,K,G){if(q.length===0)return-1;if(typeof A=="string"?(K=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,Be(A)&&(A=G?0:q.length-1),A<0&&(A=q.length+A),A>=q.length){if(G)return-1;A=q.length-1}else if(A<0)if(G)A=0;else return-1;if(typeof w=="string"&&(w=s.from(w,K)),s.isBuffer(w))return w.length===0?-1:T(q,w,A,K,G);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(q,w,A):Uint8Array.prototype.lastIndexOf.call(q,w,A):T(q,[w],A,K,G);throw new TypeError("val must be string, number or Buffer")}function T(q,w,A,K,G){let ee=1,ne=q.length,be=w.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(q.length<2||w.length<2)return-1;ee=2,ne/=2,be/=2,A/=2}function Ue(Ee,Ce){return ee===1?Ee[Ce]:Ee.readUInt16BE(Ce*ee)}let pe;if(G){let Ee=-1;for(pe=A;pe<ne;pe++)if(Ue(q,pe)===Ue(w,Ee===-1?0:pe-Ee)){if(Ee===-1&&(Ee=pe),pe-Ee+1===be)return Ee*ee}else Ee!==-1&&(pe-=pe-Ee),Ee=-1}else for(A+be>ne&&(A=ne-be),pe=A;pe>=0;pe--){let Ee=!0;for(let Ce=0;Ce<be;Ce++)if(Ue(q,pe+Ce)!==Ue(w,Ce)){Ee=!1;break}if(Ee)return pe}return-1}s.prototype.includes=function(w,A,K){return this.indexOf(w,A,K)!==-1},s.prototype.indexOf=function(w,A,K){return F(this,w,A,K,!0)},s.prototype.lastIndexOf=function(w,A,K){return F(this,w,A,K,!1)};function z(q,w,A,K){A=Number(A)||0;const G=q.length-A;K?(K=Number(K),K>G&&(K=G)):K=G;const ee=w.length;K>ee/2&&(K=ee/2);let ne;for(ne=0;ne<K;++ne){const be=parseInt(w.substr(ne*2,2),16);if(Be(be))return ne;q[A+ne]=be}return ne}function Z(q,w,A,K){return le(L(w,q.length-A),q,A,K)}function Y(q,w,A,K){return le(j(w),q,A,K)}function W(q,w,A,K){return le(ue(w),q,A,K)}function M(q,w,A,K){return le(X(w,q.length-A),q,A,K)}s.prototype.write=function(w,A,K,G){if(A===void 0)G="utf8",K=this.length,A=0;else if(K===void 0&&typeof A=="string")G=A,K=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(K)?(K=K>>>0,G===void 0&&(G="utf8")):(G=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ee=this.length-A;if((K===void 0||K>ee)&&(K=ee),w.length>0&&(K<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let ne=!1;for(;;)switch(G){case"hex":return z(this,w,A,K);case"utf8":case"utf-8":return Z(this,w,A,K);case"ascii":case"latin1":case"binary":return Y(this,w,A,K);case"base64":return W(this,w,A,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,w,A,K);default:if(ne)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),ne=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(q,w,A){return w===0&&A===q.length?e.fromByteArray(q):e.fromByteArray(q.slice(w,A))}function R(q,w,A){A=Math.min(q.length,A);const K=[];let G=w;for(;G<A;){const ee=q[G];let ne=null,be=ee>239?4:ee>223?3:ee>191?2:1;if(G+be<=A){let Ue,pe,Ee,Ce;switch(be){case 1:ee<128&&(ne=ee);break;case 2:Ue=q[G+1],(Ue&192)===128&&(Ce=(ee&31)<<6|Ue&63,Ce>127&&(ne=Ce));break;case 3:Ue=q[G+1],pe=q[G+2],(Ue&192)===128&&(pe&192)===128&&(Ce=(ee&15)<<12|(Ue&63)<<6|pe&63,Ce>2047&&(Ce<55296||Ce>57343)&&(ne=Ce));break;case 4:Ue=q[G+1],pe=q[G+2],Ee=q[G+3],(Ue&192)===128&&(pe&192)===128&&(Ee&192)===128&&(Ce=(ee&15)<<18|(Ue&63)<<12|(pe&63)<<6|Ee&63,Ce>65535&&Ce<1114112&&(ne=Ce))}}ne===null?(ne=65533,be=1):ne>65535&&(ne-=65536,K.push(ne>>>10&1023|55296),ne=56320|ne&1023),K.push(ne),G+=be}return _(K)}const S=4096;function _(q){const w=q.length;if(w<=S)return String.fromCharCode.apply(String,q);let A="",K=0;for(;K<w;)A+=String.fromCharCode.apply(String,q.slice(K,K+=S));return A}function U(q,w,A){let K="";A=Math.min(q.length,A);for(let G=w;G<A;++G)K+=String.fromCharCode(q[G]&127);return K}function H(q,w,A){let K="";A=Math.min(q.length,A);for(let G=w;G<A;++G)K+=String.fromCharCode(q[G]);return K}function V(q,w,A){const K=q.length;(!w||w<0)&&(w=0),(!A||A<0||A>K)&&(A=K);let G="";for(let ee=w;ee<A;++ee)G+=Me[q[ee]];return G}function P(q,w,A){const K=q.slice(w,A);let G="";for(let ee=0;ee<K.length-1;ee+=2)G+=String.fromCharCode(K[ee]+K[ee+1]*256);return G}s.prototype.slice=function(w,A){const K=this.length;w=~~w,A=A===void 0?K:~~A,w<0?(w+=K,w<0&&(w=0)):w>K&&(w=K),A<0?(A+=K,A<0&&(A=0)):A>K&&(A=K),A<w&&(A=w);const G=this.subarray(w,A);return Object.setPrototypeOf(G,s.prototype),G};function $(q,w,A){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+w>A)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=this[w],ee=1,ne=0;for(;++ne<A&&(ee*=256);)G+=this[w+ne]*ee;return G},s.prototype.readUintBE=s.prototype.readUIntBE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=this[w+--A],ee=1;for(;A>0&&(ee*=256);)G+=this[w+--A]*ee;return G},s.prototype.readUint8=s.prototype.readUInt8=function(w,A){return w=w>>>0,A||$(w,1,this.length),this[w]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(w,A){return w=w>>>0,A||$(w,2,this.length),this[w]|this[w+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(w,A){return w=w>>>0,A||$(w,2,this.length),this[w]<<8|this[w+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(w,A){return w=w>>>0,A||$(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(w,A){return w=w>>>0,A||$(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},s.prototype.readBigUInt64LE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=A+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,ee=this[++w]+this[++w]*2**8+this[++w]*2**16+K*2**24;return BigInt(G)+(BigInt(ee)<<BigInt(32))}),s.prototype.readBigUInt64BE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=A*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],ee=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+K;return(BigInt(G)<<BigInt(32))+BigInt(ee)}),s.prototype.readIntLE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=this[w],ee=1,ne=0;for(;++ne<A&&(ee*=256);)G+=this[w+ne]*ee;return ee*=128,G>=ee&&(G-=Math.pow(2,8*A)),G},s.prototype.readIntBE=function(w,A,K){w=w>>>0,A=A>>>0,K||$(w,A,this.length);let G=A,ee=1,ne=this[w+--G];for(;G>0&&(ee*=256);)ne+=this[w+--G]*ee;return ee*=128,ne>=ee&&(ne-=Math.pow(2,8*A)),ne},s.prototype.readInt8=function(w,A){return w=w>>>0,A||$(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},s.prototype.readInt16LE=function(w,A){w=w>>>0,A||$(w,2,this.length);const K=this[w]|this[w+1]<<8;return K&32768?K|4294901760:K},s.prototype.readInt16BE=function(w,A){w=w>>>0,A||$(w,2,this.length);const K=this[w+1]|this[w]<<8;return K&32768?K|4294901760:K},s.prototype.readInt32LE=function(w,A){return w=w>>>0,A||$(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},s.prototype.readInt32BE=function(w,A){return w=w>>>0,A||$(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},s.prototype.readBigInt64LE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(K<<24);return(BigInt(G)<<BigInt(32))+BigInt(A+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),s.prototype.readBigInt64BE=Pe(function(w){w=w>>>0,Se(w,"offset");const A=this[w],K=this[w+7];(A===void 0||K===void 0)&&Le(w,this.length-8);const G=(A<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(G)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+K)}),s.prototype.readFloatLE=function(w,A){return w=w>>>0,A||$(w,4,this.length),t.read(this,w,!0,23,4)},s.prototype.readFloatBE=function(w,A){return w=w>>>0,A||$(w,4,this.length),t.read(this,w,!1,23,4)},s.prototype.readDoubleLE=function(w,A){return w=w>>>0,A||$(w,8,this.length),t.read(this,w,!0,52,8)},s.prototype.readDoubleBE=function(w,A){return w=w>>>0,A||$(w,8,this.length),t.read(this,w,!1,52,8)};function te(q,w,A,K,G,ee){if(!s.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>G||w<ee)throw new RangeError('"value" argument is out of bounds');if(A+K>q.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(w,A,K,G){if(w=+w,A=A>>>0,K=K>>>0,!G){const be=Math.pow(2,8*K)-1;te(this,w,A,K,be,0)}let ee=1,ne=0;for(this[A]=w&255;++ne<K&&(ee*=256);)this[A+ne]=w/ee&255;return A+K},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(w,A,K,G){if(w=+w,A=A>>>0,K=K>>>0,!G){const be=Math.pow(2,8*K)-1;te(this,w,A,K,be,0)}let ee=K-1,ne=1;for(this[A+ee]=w&255;--ee>=0&&(ne*=256);)this[A+ee]=w/ne&255;return A+K},s.prototype.writeUint8=s.prototype.writeUInt8=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,1,255,0),this[A]=w&255,A+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,65535,0),this[A]=w&255,this[A+1]=w>>>8,A+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,65535,0),this[A]=w>>>8,this[A+1]=w&255,A+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,4294967295,0),this[A+3]=w>>>24,this[A+2]=w>>>16,this[A+1]=w>>>8,this[A]=w&255,A+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,4294967295,0),this[A]=w>>>24,this[A+1]=w>>>16,this[A+2]=w>>>8,this[A+3]=w&255,A+4};function ae(q,w,A,K,G){Te(w,K,G,q,A,7);let ee=Number(w&BigInt(4294967295));q[A++]=ee,ee=ee>>8,q[A++]=ee,ee=ee>>8,q[A++]=ee,ee=ee>>8,q[A++]=ee;let ne=Number(w>>BigInt(32)&BigInt(4294967295));return q[A++]=ne,ne=ne>>8,q[A++]=ne,ne=ne>>8,q[A++]=ne,ne=ne>>8,q[A++]=ne,A}function ce(q,w,A,K,G){Te(w,K,G,q,A,7);let ee=Number(w&BigInt(4294967295));q[A+7]=ee,ee=ee>>8,q[A+6]=ee,ee=ee>>8,q[A+5]=ee,ee=ee>>8,q[A+4]=ee;let ne=Number(w>>BigInt(32)&BigInt(4294967295));return q[A+3]=ne,ne=ne>>8,q[A+2]=ne,ne=ne>>8,q[A+1]=ne,ne=ne>>8,q[A]=ne,A+8}s.prototype.writeBigUInt64LE=Pe(function(w,A=0){return ae(this,w,A,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Pe(function(w,A=0){return ce(this,w,A,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(w,A,K,G){if(w=+w,A=A>>>0,!G){const Ue=Math.pow(2,8*K-1);te(this,w,A,K,Ue-1,-Ue)}let ee=0,ne=1,be=0;for(this[A]=w&255;++ee<K&&(ne*=256);)w<0&&be===0&&this[A+ee-1]!==0&&(be=1),this[A+ee]=(w/ne>>0)-be&255;return A+K},s.prototype.writeIntBE=function(w,A,K,G){if(w=+w,A=A>>>0,!G){const Ue=Math.pow(2,8*K-1);te(this,w,A,K,Ue-1,-Ue)}let ee=K-1,ne=1,be=0;for(this[A+ee]=w&255;--ee>=0&&(ne*=256);)w<0&&be===0&&this[A+ee+1]!==0&&(be=1),this[A+ee]=(w/ne>>0)-be&255;return A+K},s.prototype.writeInt8=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,1,127,-128),w<0&&(w=255+w+1),this[A]=w&255,A+1},s.prototype.writeInt16LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,32767,-32768),this[A]=w&255,this[A+1]=w>>>8,A+2},s.prototype.writeInt16BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,2,32767,-32768),this[A]=w>>>8,this[A+1]=w&255,A+2},s.prototype.writeInt32LE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,2147483647,-2147483648),this[A]=w&255,this[A+1]=w>>>8,this[A+2]=w>>>16,this[A+3]=w>>>24,A+4},s.prototype.writeInt32BE=function(w,A,K){return w=+w,A=A>>>0,K||te(this,w,A,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[A]=w>>>24,this[A+1]=w>>>16,this[A+2]=w>>>8,this[A+3]=w&255,A+4},s.prototype.writeBigInt64LE=Pe(function(w,A=0){return ae(this,w,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Pe(function(w,A=0){return ce(this,w,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(q,w,A,K,G,ee){if(A+K>q.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function oe(q,w,A,K,G){return w=+w,A=A>>>0,G||fe(q,w,A,4),t.write(q,w,A,K,23,4),A+4}s.prototype.writeFloatLE=function(w,A,K){return oe(this,w,A,!0,K)},s.prototype.writeFloatBE=function(w,A,K){return oe(this,w,A,!1,K)};function ye(q,w,A,K,G){return w=+w,A=A>>>0,G||fe(q,w,A,8),t.write(q,w,A,K,52,8),A+8}s.prototype.writeDoubleLE=function(w,A,K){return ye(this,w,A,!0,K)},s.prototype.writeDoubleBE=function(w,A,K){return ye(this,w,A,!1,K)},s.prototype.copy=function(w,A,K,G){if(!s.isBuffer(w))throw new TypeError("argument should be a Buffer");if(K||(K=0),!G&&G!==0&&(G=this.length),A>=w.length&&(A=w.length),A||(A=0),G>0&&G<K&&(G=K),G===K||w.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),w.length-A<G-K&&(G=w.length-A+K);const ee=G-K;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,K,G):Uint8Array.prototype.set.call(w,this.subarray(K,G),A),ee},s.prototype.fill=function(w,A,K,G){if(typeof w=="string"){if(typeof A=="string"?(G=A,A=0,K=this.length):typeof K=="string"&&(G=K,K=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!s.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(w.length===1){const ne=w.charCodeAt(0);(G==="utf8"&&ne<128||G==="latin1")&&(w=ne)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(A<0||this.length<A||this.length<K)throw new RangeError("Out of range index");if(K<=A)return this;A=A>>>0,K=K===void 0?this.length:K>>>0,w||(w=0);let ee;if(typeof w=="number")for(ee=A;ee<K;++ee)this[ee]=w;else{const ne=s.isBuffer(w)?w:s.from(w,G),be=ne.length;if(be===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(ee=0;ee<K-A;++ee)this[ee+A]=ne[ee%be]}return this};const me={};function ve(q,w,A){me[q]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(q,w){return`The "${q}" argument must be of type number. Received type ${typeof w}`},TypeError),ve("ERR_OUT_OF_RANGE",function(q,w,A){let K=`The value of "${q}" is out of range.`,G=A;return Number.isInteger(A)&&Math.abs(A)>2**32?G=we(String(A)):typeof A=="bigint"&&(G=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(G=we(G)),G+="n"),K+=` It must be ${w}. Received ${G}`,K},RangeError);function we(q){let w="",A=q.length;const K=q[0]==="-"?1:0;for(;A>=K+4;A-=3)w=`_${q.slice(A-3,A)}${w}`;return`${q.slice(0,A)}${w}`}function De(q,w,A){Se(w,"offset"),(q[w]===void 0||q[w+A]===void 0)&&Le(w,q.length-(A+1))}function Te(q,w,A,K,G,ee){if(q>A||q<w){const ne=typeof w=="bigint"?"n":"";let be;throw w===0||w===BigInt(0)?be=`>= 0${ne} and < 2${ne} ** ${(ee+1)*8}${ne}`:be=`>= -(2${ne} ** ${(ee+1)*8-1}${ne}) and < 2 ** ${(ee+1)*8-1}${ne}`,new me.ERR_OUT_OF_RANGE("value",be,q)}De(K,G,ee)}function Se(q,w){if(typeof q!="number")throw new me.ERR_INVALID_ARG_TYPE(w,"number",q)}function Le(q,w,A){throw Math.floor(q)!==q?(Se(q,A),new me.ERR_OUT_OF_RANGE("offset","an integer",q)):w<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,q)}const $e=/[^+/0-9A-Za-z-_]/g;function ie(q){if(q=q.split("=")[0],q=q.trim().replace($e,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function L(q,w){w=w||1/0;let A;const K=q.length;let G=null;const ee=[];for(let ne=0;ne<K;++ne){if(A=q.charCodeAt(ne),A>55295&&A<57344){if(!G){if(A>56319){(w-=3)>-1&&ee.push(239,191,189);continue}else if(ne+1===K){(w-=3)>-1&&ee.push(239,191,189);continue}G=A;continue}if(A<56320){(w-=3)>-1&&ee.push(239,191,189),G=A;continue}A=(G-55296<<10|A-56320)+65536}else G&&(w-=3)>-1&&ee.push(239,191,189);if(G=null,A<128){if((w-=1)<0)break;ee.push(A)}else if(A<2048){if((w-=2)<0)break;ee.push(A>>6|192,A&63|128)}else if(A<65536){if((w-=3)<0)break;ee.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((w-=4)<0)break;ee.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return ee}function j(q){const w=[];for(let A=0;A<q.length;++A)w.push(q.charCodeAt(A)&255);return w}function X(q,w){let A,K,G;const ee=[];for(let ne=0;ne<q.length&&!((w-=2)<0);++ne)A=q.charCodeAt(ne),K=A>>8,G=A%256,ee.push(G),ee.push(K);return ee}function ue(q){return e.toByteArray(ie(q))}function le(q,w,A,K){let G;for(G=0;G<K&&!(G+A>=w.length||G>=q.length);++G)w[G+A]=q[G];return G}function de(q,w){return q instanceof w||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===w.name}function Be(q){return q!==q}const Me=(function(){const q="0123456789abcdef",w=new Array(256);for(let A=0;A<16;++A){const K=A*16;for(let G=0;G<16;++G)w[K+G]=q[A]+q[G]}return w})();function Pe(q){return typeof BigInt>"u"?Qe:q}function Qe(){throw new Error("BigInt not supported")}})(qE)),qE}var KU=ene();class GU{static getGlobalVariable(){return typeof window<"u"?window:globalThis}static load(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: require("${e}").`);return""}static pathNormalize(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize("${e}").`);return""}static pathExtname(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname("${e}").`);return""}static pathResolve(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve("${e}").`);return""}static fileExist(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync("${e}").`);return!1}static dotenv(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "${e}" }).`)}static getEnvVariable(e){}static readFileSync(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("${e}").`);return null}static appendFileSync(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("${e}").`)}static writeFile(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile("${e}").`);return Promise.reject(null)}static highlightSql(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}}GU.type="browser";typeof window<"u"&&(window.Buffer=KU.Buffer);typeof globalThis<"u"&&(globalThis.Buffer=KU.Buffer);typeof globalThis<"u"&&typeof require<"u"&&(globalThis.Buffer=require("buffer/").Buffer);class vr{static isObject(e){return e!==null&&typeof e=="object"}static isObjectWithName(e){return e!==null&&typeof e=="object"&&e.name!==void 0}static assign(e,...t){for(const n of t)for(const i of Object.getOwnPropertyNames(n))e[i]=n[i]}static mixedListToArray(e){return e!==null&&typeof e=="object"?Object.keys(e).map(t=>e[t]):e}}class Je extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class Gf extends Je{constructor(){super("Locking not supported on given driver.")}}class o8 extends Je{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class hr{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return typeof e=="function"&&typeof e.hasId=="function"&&typeof e.save=="function"&&typeof e.useDataSource=="function"}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return typeof e=="object"&&e!==null&&e["@instanceof"]===Symbol.for(t)}}class tne extends Je{constructor(e,t){super(),this.entityClass=e,this.criteria=t,this.message=`Could not find any entity of type "${this.stringifyTarget(e)}" matching: ${this.stringifyCriteria(t)}`}stringifyTarget(e){return hr.isEntitySchema(e)?e.options.name:typeof e=="function"||vr.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch{}return""+e}}class dN extends Je{constructor(e,t,n){super(`The optimistic lock on entity ${e} failed, version ${t} was expected, but is actually ${n}.`)}}class WU extends Je{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class rne extends Je{constructor(e,t){super(`Primary column ${e.constructor.name}#${t} cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.`)}}class nne extends Je{constructor(e){super(`Entity "${e.name}" does not have delete date columns.`)}}class Ob extends Je{constructor(){super("OUTPUT or RETURNING clause only supported by PostgreSQL, MariaDB, Microsoft SqlServer or Google Spanner.")}}class Is extends Je{constructor(e,t){super(e),Object.setPrototypeOf(this,Is.prototype),this.message=`Property "${e}" was not found in "${t.targetName}". Make sure your query is correct.`}}class ine extends Je{constructor(e){super(`Entity ${e} does not have version or update date columns.`)}}class ane extends Je{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class up extends Je{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class sne extends Je{constructor(e){super(),e.length===1?this.message=`Relation "${e[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${e.map(t=>`"${t}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class one extends Je{constructor(){super("An open transaction is required for pessimistic lock.")}}class ZU extends Je{constructor(e,t){super(`Column type for ${e.constructor.name}#${t} is not defined and cannot be guessed. Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.`)}}class une extends Je{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class hN{constructor(e){vr.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new Je(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class ks{static isAliasProperty(e){if(typeof e!="string"||e.indexOf(".")===-1)return!1;const[t,n]=e.split(".");return!(!t||!n||e.indexOf("(")!==-1||e.indexOf(")")!==-1)}}function cne(r,e={}){const{segmentLength:t=4,separator:n="__",termLength:i=2}=e;return r.split(n).reduce((s,c)=>{const l=c.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),d=l.length>1?i:t,h=l.map(y=>y.substr(0,d)).join("");return s.push(h),s},[]).join(n)}function lne(r,e={}){const t=dU("sha1");t.update(r,"utf8");const n=t.digest("hex");return e.length&&e.length>0?n.slice(0,e.length):n}class fne{static isGreaterOrEqual(e,t){if(!e)return!1;const n=pN(e),i=pN(t);for(let a=0;a<n.length&&a<i.length;a++){if(n[a]>i[a])return!0;if(n[a]<i[a])return!1}return!0}}function pN(r){return r.split(".").map(e=>parseInt(e,10))}class at{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return fne.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){const i=t&&t.joiner?t.joiner:"_",a=n.length===1?n[0]:n.join(i);if(e&&e>0&&a.length>e){if(t&&t.shorten===!0){const o=cne(a);if(o.length<e)return o}return lne(a,{length:e})}return a}static buildColumnAlias({maxAliasLength:e},t,...n){return typeof t=="string"?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),a=i.indexOf("/"),o=a!==-1?i.substr(0,a):i;let s=a!==-1?i.substr(a+1):void 0;s&&s.indexOf("?")!==-1&&(s=s.substr(0,s.indexOf("?")));const c=o.lastIndexOf("@"),l=o.substr(0,c),d=o.substr(c+1);let h=l,y="";const m=l.indexOf(":");m!==-1&&(h=l.substr(0,m),y=l.substr(m+1));const[b,v]=d.split(":");return{type:t,host:b,username:decodeURIComponent(h),password:decodeURIComponent(y),port:v?parseInt(v):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),a=i.indexOf("/"),o=a!==-1?i.substr(0,a):i;let s=a!==-1?i.substr(a+1):void 0,c="",l,d,h,y;const m={};if(s&&s.indexOf("?")!==-1){c=s.substr(s.indexOf("?")+1,s.length);const k=c.split("&");let F,T;k.forEach(z=>{F=z.split("=")[0],T=z.split("=")[1],m[F]=T}),y=m.replicaSet,s=s.substr(0,s.indexOf("?"))}const b=o.lastIndexOf("@"),v=o.substr(0,b),E=o.substr(b+1);let x=v,D="";const N=v.indexOf(":");N!==-1&&(x=v.substr(0,N),D=v.substr(N+1)),y?h=E:[l,d]=E.split(":");const B={type:t,host:l,hostReplicaSet:h,username:decodeURIComponent(x),password:decodeURIComponent(D),port:d?parseInt(d):void 0,database:s||void 0};for(const[k,F]of Object.entries(m))B[k]=F;return B}}class YU{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,n&&vr.assign(this,n)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){const e=()=>{for(const t of this.queryExpressionMap.selects)if(t.selection===this.alias.name||this.metadata&&this.metadata.columns.find(n=>t.selection===this.alias.name+"."+n.propertyPath))return!0;return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(ks.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(ks.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){const e=()=>{if(!ks.isAliasProperty(this.entityOrProperty))return;const t=this.queryExpressionMap.findAliasByName(this.parentAlias);let n=t.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(n||t.metadata.parentEntityMetadata&&(n=t.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),n))return n;throw new Je(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new Je("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new Je("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?at.buildAlias(this.connection.driver,void 0,e,this.alias.name):at.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class LA{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,vr.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new Je(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class jA{constructor(e,t){this.expressionMap=e,vr.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),i=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!i)throw new Je(`Relation with property path ${t} in entity was not found.`);return i}get metadata(){if(!ks.isAliasProperty(this.relationName))throw new Je("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class $A{constructor(e){this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=e.options?.timeTravelQueries||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&typeof e.target=="function"&&(t=e.target.name),!t&&typeof e.target=="string"&&(t=e.target);const n=new hN;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find(n=>n.name===e);if(!t)throw new Je(`"${e}" alias was not found. Maybe you forgot to join it?`);return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new Je("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new Je(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return e}clone(){const e=new $A(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map(t=>t),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(t=>e.aliases.push(new hN(t))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map(t=>new YU(this.connection,this,t)),e.relationIdAttributes=this.relationIdAttributes.map(t=>new LA(this,t)),e.relationCountAttributes=this.relationCountAttributes.map(t=>new jA(this,t)),e.wheres=this.wheres.map(t=>({...t})),e.havings=this.havings.map(t=>({...t})),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map(t=>t),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.useIndex=this.useIndex,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map(t=>({alias:t.alias,queryBuilder:typeof t.queryBuilder=="string"?t.queryBuilder:t.queryBuilder.clone(),options:t.options})),e}}class yN{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}}class u8{static transformFrom(e,t){return Array.isArray(e)?e.slice().reverse().reduce((i,a)=>a.from(i),t):e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce((n,i)=>i.to(n),t):e.to(t)}}class J0{constructor(e,t,n=!0,i=!1,a,o){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=i,this._getSql=a,this._objectLiteralParameters=o}get useParameter(){return hr.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return hr.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return hr.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return hr.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(hr.isFindOperator(this._value))return this._value}get getSql(){return hr.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof J0?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(t=>e&&u8.transformTo(e,t)):u8.transformTo(e,this._value)}}function dne(r){return new J0("in",r,!0,!0)}const hne=/[.*+\-?^${}()|[\]\\]/g,pne=r=>r.replace(hne,"\\$&");class Fr{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,hr.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new $A(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}static registerQueryBuilderClass(e,t){Fr.queryBuilderRegistry[e]=t}get alias(){if(!this.expressionMap.mainAlias)throw new Je("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){return this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map(n=>({selection:n})):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]),hr.isSelectQueryBuilder(this)?this:Fr.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",hr.isInsertQueryBuilder(this)?this:Fr.queryBuilderRegistry.InsertQueryBuilder(this)}update(e,t){const n=t||e;if(e=hr.isEntitySchema(e)?e.options.name:e,typeof e=="function"||typeof e=="string"){const i=this.createFromAlias(e);this.expressionMap.setMainAlias(i)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=n,hr.isUpdateQueryBuilder(this)?this:Fr.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",hr.isDeleteQueryBuilder(this)?this:Fr.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",hr.isSoftDeleteQueryBuilder(this)?this:Fr.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",hr.isSoftDeleteQueryBuilder(this)?this:Fr.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(e,t){const n=arguments.length===2?e:void 0,i=arguments.length===2?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=i,n){const a=this.createFromAlias(n);this.expressionMap.setMainAlias(a)}return hr.isRelationQueryBuilder(this)?this:Fr.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every(a=>!!n.findRelationWithPropertyPath(a))}hasParameter(e){return this.parentQueryBuilder?.hasParameter(e)||e in this.expressionMap.parameters}setParameter(e,t){if(typeof t=="function")throw new Je(`Function parameter isn't supported in the parameters. Please check "${e}" parameter.`);if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new Je("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do t=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(t));return this.setParameter(t,e),`:${t}`}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach(t=>{this.expressionMap.nativeParameters[t]=e[t]}),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter(i=>i.discriminatorColumn).map(i=>i.discriminatorValue);n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(e){return new this.constructor(this.connection,e??this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map(t=>t===""?t:this.escape(t)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new Je('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}else{if(typeof e=="string"){const a=e.substr(0,1)==="("&&e.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:t,tablePath:a?void 0:e,subQuery:a?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const i=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:i})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const a of this.expressionMap.aliases){if(!a.hasMetadata)continue;const o=this.expressionMap.aliasNamePrefixingEnabled&&a.name?`${a.name}.`:"";t[o]||(t[o]={});for(const s of a.metadata.relations)s.joinColumns.length>0&&(t[o][s.propertyPath]=s.joinColumns[0].databaseName);for(const s of a.metadata.relations){const c=[...s.joinColumns,...s.inverseJoinColumns];for(const l of c){const d=`${s.propertyPath}.${l.referencedColumn.propertyPath}`;t[o][d]=l.databaseName}}for(const s of a.metadata.columns)t[o][s.databaseName]=s.databaseName;for(const s of a.metadata.columns)t[o][s.propertyName]=s.databaseName;for(const s of a.metadata.columns)t[o][s.propertyPath]=s.databaseName}const n=Object.keys(t),i=n.map(a=>pne(a)).join("|");return n.length>0&&(e=e.replace(new RegExp(`([ =(]|^.{0})${i?"("+i+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...a)=>{let o,s,c;if(i){if(o=a[0],s=a[1],c=a[3],t[a[2]][c])return`${s}${this.escape(a[2].substring(0,a[2].length-1))}.${this.escape(t[a[2]][c])}`}else if(o=a[0],s=a[1],c=a[2],t[""][c])return`${s}${this.escape(t[""][c])}`;return o})),e}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&t!=="1=1"&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&i.deleteDateColumn){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.deleteDateColumn.propertyName:i.deleteDateColumn.propertyName,o=`${this.replacePropertyNames(a)} IS NULL`;e.push(o)}if(i.discriminatorColumn&&i.parentEntityMetadata){const a=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.discriminatorColumn.databaseName:i.discriminatorColumn.databaseName,o=`${this.replacePropertyNames(a)} IN (:...discriminatorColumnValues)`;e.push(o)}}if(this.expressionMap.extraAppendedAndWhereCondition){const i=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(i)}let n="";return n+=this.createTimeTravelQuery(),e.length?e.length===1?n+=` WHERE ${e[0]}`:n+=` WHERE ( ${e.join(" ) AND ( ")} )`:n+="",n}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter(i=>t.indexOf(i)===-1)),t.length){let i=t.map(a=>{const o=this.escape(a.databaseName);return n.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+o:this.escape(this.getMainTableName())+"."+o:o}).join(", ");return n.options.type==="oracle"&&(i+=" INTO "+t.map(a=>this.createParameter({type:n.columnTypeToNativeParameter(a.type),dir:n.oracle.BIND_OUT})).join(", ")),n.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(i+=" INTO @OutputTable"),i}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))}),e}createWhereClausesExpression(e){return e.map((t,n)=>{const i=this.createWhereConditionExpression(t.condition);switch(t.type){case"and":return(n>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(n>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`}return i}).join(" ").trim()}createWhereConditionExpression(e,t=!1){if(typeof e=="string")return e;if(Array.isArray(e))return e.length===0?"1=1":e.length===1&&!t?this.createWhereClausesExpression(e):"("+this.createWhereClausesExpression(e)+")";const{driver:n}=this.connection;switch(e.operator){case"lessThan":return`${e.parameters[0]} < ${e.parameters[1]}`;case"lessThanOrEqual":return`${e.parameters[0]} <= ${e.parameters[1]}`;case"arrayContains":return`${e.parameters[0]} @> ${e.parameters[1]}`;case"jsonContains":return`${e.parameters[0]} ::jsonb @> ${e.parameters[1]}`;case"arrayContainedBy":return`${e.parameters[0]} <@ ${e.parameters[1]}`;case"arrayOverlap":return`${e.parameters[0]} && ${e.parameters[1]}`;case"moreThan":return`${e.parameters[0]} > ${e.parameters[1]}`;case"moreThanOrEqual":return`${e.parameters[0]} >= ${e.parameters[1]}`;case"notEqual":return`${e.parameters[0]} != ${e.parameters[1]}`;case"equal":return`${e.parameters[0]} = ${e.parameters[1]}`;case"ilike":return n.options.type==="postgres"||n.options.type==="cockroachdb"?`${e.parameters[0]} ILIKE ${e.parameters[1]}`:`UPPER(${e.parameters[0]}) LIKE UPPER(${e.parameters[1]})`;case"like":return`${e.parameters[0]} LIKE ${e.parameters[1]}`;case"between":return`${e.parameters[0]} BETWEEN ${e.parameters[1]} AND ${e.parameters[2]}`;case"in":return e.parameters.length<=1?"0=1":`${e.parameters[0]} IN (${e.parameters.slice(1).join(", ")})`;case"any":return n.options.type==="cockroachdb"?`${e.parameters[0]}::STRING = ANY(${e.parameters[1]}::STRING[])`:`${e.parameters[0]} = ANY(${e.parameters[1]})`;case"isNull":return`${e.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(e.condition)})`;case"brackets":return`${this.createWhereConditionExpression(e.condition,!0)}`;case"and":return"("+e.parameters.join(" AND ")+")";case"or":return"("+e.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${J0.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{let i=typeof n.queryBuilder=="string"?n.queryBuilder:"";if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new Je(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(i=n.queryBuilder.getQuery(),!this.connection.driver.cteCapabilities.writable&&!hr.isSelectQueryBuilder(n.queryBuilder))throw new Je(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let a=this.escape(n.alias);if(n.options.columnNames){const c=n.options.columnNames.map(l=>this.escape(l));if(hr.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new Je(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);a+=`(${c.join(", ")})`}const o=n.options.recursive&&e?"RECURSIVE":"";let s="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(s=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[o,a,"AS",s,`(${i})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map(i=>t.ensureEntityIdMap(i));if(!t.hasMultiplePrimaryKeys){const i=t.primaryColumns[0];if(!i.transformer&&!i.relationMetadata&&!i.embeddedMetadata)return{[i.propertyName]:dne(n.map(a=>i.getEntityValue(a,!1)))}}return new yN(i=>{for(const a of n)i.orWhere(new yN(o=>o.where(a)))})}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${t.getQuery()})`,t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],i=e.split(".");for(;i.length>1;){const s=i[0];if(!t?.hasMetadata)break;if(t.metadata.hasEmbeddedWithPropertyPath(s)){i.unshift(`${i.shift()}.${i.shift()}`);continue}if(t.metadata.hasRelationWithPropertyPath(s)){const c=this.expressionMap.joinAttributes.find(l=>l.relationPropertyPath===s);if(!c?.alias){const l=n.length>0?`${n.join(".")}.${s}`:s;throw new Error(`Cannot find alias for relation at ${l}`)}t=c.alias,n.push(...s.split(".")),i.shift();continue}break}if(!t)throw new Error(`Cannot find alias for property ${e}`);const a=i.join("."),o=t.metadata.findColumnsWithPropertyPath(a);if(!o.length)throw new Is(e,t.metadata);return[t,n,o]}createPropertyPath(e,t,n=""){const i=[];for(const a of Object.keys(t)){const o=n?`${n}.${a}`:a;if(t[a]===null||typeof t[a]!="object"||hr.isFindOperator(t[a])){i.push(o);continue}if(e.hasEmbeddedWithPropertyPath(o)){const s=this.createPropertyPath(e,t[a],o);i.push(...s);continue}if(e.hasRelationWithPropertyPath(o)){const s=e.findRelationWithPropertyPath(o);if(s.relationType==="one-to-one"||s.relationType==="many-to-one"){const h=s.joinColumns.map(m=>m.referencedColumn).filter(m=>!!m);if(h.length>0&&h.every(m=>m.getEntityValue(t[a],!1))){i.push(o);continue}}if(s.relationType==="one-to-many"||s.relationType==="many-to-many")throw new Error(`Cannot query across ${s.relationType} for property ${o}`);const c=s.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(h=>h.getEntityValue(t[a],!1))){const h=c.map(y=>`${o}.${y.propertyPath}`);i.push(...h);continue}const d=this.createPropertyPath(s.inverseEntityMetadata,t[a]).map(h=>`${o}.${h}`);i.push(...d);continue}i.push(o)}return i}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[i,a,o]=this.findColumnsForPropertyPath(n);for(const s of o){let c=e;for(const h of a){if(!c||!(h in c)){c={};break}c=c[h]}const l=this.expressionMap.aliasNamePrefixingEnabled?`${i.name}.${s.propertyPath}`:s.propertyPath,d=s.getEntityValue(c,!0);yield[l,d]}}}else for(const t of Object.keys(e)){const n=e[t];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${t}`:t,n]}}getWherePredicateCondition(e,t){if(hr.isFindOperator(t)){const n=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const i of t.value)n.push(this.createParameter(i));else n.push(this.createParameter(t.value));if(t.type==="raw")return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if(t.type==="not")return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...n]};if(t.type==="and"){const i=t.value;return{operator:t.type,parameters:i.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,a)))}}else if(t.type==="or"){const i=t.value;return{operator:t.type,parameters:i.map(a=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,a)))}}else return{operator:t.type,parameters:[e,...n]}}else if(t===null){const n=this.connection.options.invalidWhereValuesBehavior?.null||"ignore";if(n==="sql-null")return{operator:"isNull",parameters:[e]};if(n==="throw")throw new Je(`Null value encountered in property '${e}' of a where condition. To match with SQL NULL, the IsNull() operator must be used. Set 'invalidWhereValuesBehavior.null' to 'ignore' or 'sql-null' in connection options to skip or handle null values.`)}else if(t===void 0&&(this.connection.options.invalidWhereValuesBehavior?.undefined||"ignore")==="throw")throw new Je(`Undefined value encountered in property '${e}' of a where condition. Set 'invalidWhereValuesBehavior.undefined' to 'ignore' in connection options to skip properties with undefined values.`);return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if(typeof e=="string")return e;if(hr.isBrackets(e)){const i=this.createQueryBuilder();return i.parentQueryBuilder=this,i.expressionMap.mainAlias=this.expressionMap.mainAlias,i.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,i.expressionMap.parameters=this.expressionMap.parameters,i.expressionMap.nativeParameters=this.expressionMap.nativeParameters,i.expressionMap.wheres=[],e.whereFactory(i),{operator:hr.isNotBrackets(e)?"not":"brackets",condition:i.expressionMap.wheres}}if(typeof e=="function")return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const i of t){const a=[];for(const[o,s]of this.getPredicates(i))a.push({type:"and",condition:this.getWherePredicateCondition(o,s)});n.push({type:"or",condition:a})}return n.length===1?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}Fr.queryBuilderRegistry={};class yne{static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}}class mne extends Fr{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await n.query(e,t,!0),o=yne.from(a);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),i&&await n.commitTransaction(),o}catch(a){if(i)try{await n.rollbackTransaction()}catch{}throw a}finally{n!==this.queryRunner&&await n.release()}}from(e,t){e=hr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new Ob;return this.expressionMap.returning=e,this}createDeleteExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createWhereExpression(),n=this.createReturningExpression("delete");return n===""?`DELETE FROM ${e}${t}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${e} OUTPUT ${n}${t}`:this.connection.driver.options.type==="spanner"?`DELETE FROM ${e}${t} THEN RETURN ${n}`:`DELETE FROM ${e}${t} RETURNING ${n}`}}const Ln=[];for(let r=0;r<256;++r)Ln.push((r+256).toString(16).slice(1));function gne(r,e=0){return(Ln[r[e+0]]+Ln[r[e+1]]+Ln[r[e+2]]+Ln[r[e+3]]+"-"+Ln[r[e+4]]+Ln[r[e+5]]+"-"+Ln[r[e+6]]+Ln[r[e+7]]+"-"+Ln[r[e+8]]+Ln[r[e+9]]+"-"+Ln[r[e+10]]+Ln[r[e+11]]+Ln[r[e+12]]+Ln[r[e+13]]+Ln[r[e+14]]+Ln[r[e+15]]).toLowerCase()}let LE;const vne=new Uint8Array(16);function bne(){if(!LE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");LE=crypto.getRandomValues.bind(crypto)}return LE(vne)}const wne=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mN={randomUUID:wne};function _ne(r,e,t){if(mN.randomUUID&&!r)return mN.randomUUID();r=r||{};const n=r.random??r.rng?.()??bne();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,gne(n)}class gN{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class vN{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.raw,t}}class FA{constructor(e,t){this.queryRunner=e,this.expressionMap=t}async update(e,t){const n=this.expressionMap.mainAlias.metadata;await Promise.all(t.map(async(i,a)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce((c,l,d)=>(c[this.expressionMap.extraReturningColumns[d].databaseName]=l[0],c),{}));const o=Array.isArray(e.raw)?e.raw[a]:e.raw,s=this.queryRunner.connection.driver.createGeneratedMap(n,o);s&&(this.queryRunner.manager.merge(n.target,i,s),e.generatedMaps.push(s))}else{const o=this.expressionMap.extraReturningColumns;if(o.length>0){const s=this.expressionMap.mainAlias.metadata.getEntityIdMap(i);if(!s)throw new Je("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(l=>n.targetName+"."+l.propertyPath)).addSelect(o.map(l=>n.targetName+"."+l.propertyPath)).from(n.target,n.targetName).where(s).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(n.target,i,c),e.generatedMaps.push(c))}}}))}async insert(e,t){const n=this.expressionMap.mainAlias.metadata;let i=n.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");i=i.filter(s=>s.isGenerated?a===!0:!0);const o=t.map((s,c)=>{Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(this.queryRunner.connection.driver.options.type==="oracle"?e.raw=e.raw.reduce((h,y,m)=>(h[this.expressionMap.extraReturningColumns[m].databaseName]=y[0],h),{}):this.queryRunner.connection.driver.options.type==="spanner"&&(e.raw=e.raw[0]));const l=Array.isArray(e.raw)?e.raw[c]:e.raw,d=this.queryRunner.connection.driver.createGeneratedMap(n,l,c,t.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(n.target,d,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(n.target,s,d),d});if(i.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const s=t.map(l=>{const d=n.getEntityIdMap(l);if(!d)throw new Je("Cannot update entity because entity id is not set in the entity.");return d}),c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(l=>n.targetName+"."+l.propertyPath)).addSelect(i.map(l=>n.targetName+"."+l.propertyPath)).from(n.target,n.targetName).where(s).setOption("create-pojo").getMany();t.forEach((l,d)=>{this.queryRunner.manager.merge(n.target,o[d],c[d]),this.queryRunner.manager.merge(n.target,l,c[d])})}t.forEach((s,c)=>{const l=n.getEntityIdMap(s);e.identifiers.push(l),e.generatedMaps.push(o[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion||e.isDeleteDate)}}class Ene extends Fr{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.getValueSets();if(e.length===0)return new vN;const t=this.obtainQueryRunner();let n=!1;try{if(this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const b=new gN;e.forEach(v=>{t.broadcaster.broadcastBeforeInsertEvent(b,this.expressionMap.mainAlias.metadata,v)}),await b.wait()}let i=null,a=null;const o=new FA(t,this.expressionMap),s=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const b of this.expressionMap.returning)s.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(b));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(e.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),s.push(...this.expressionMap.extraReturningColumns.filter(b=>!s.includes(b)))),s.length>0&&this.connection.driver.options.type==="mssql"&&(i=this.connection.driver.buildTableVariableDeclaration("@OutputTable",s),a="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),h=[i,c,a].filter(b=>b!=null).join(`;

`),y=await t.query(h,l,!0),m=vN.from(y);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await o.insert(m,e),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const b=new gN;e.forEach(v=>{t.broadcaster.broadcastAfterInsertEvent(b,this.expressionMap.mainAlias.metadata,v)}),await b.wait()}return n&&await t.commitTransaction(),m}catch(i){if(n)try{await t.rollbackTransaction()}catch{}throw i}finally{t!==this.queryRunner&&await t.release()}}into(e,t){e=hr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e);return this.expressionMap.setMainAlias(n),this.expressionMap.insertColumns=t||[],this}values(e){return this.expressionMap.valuesSet=e,this}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new Ob;return this.expressionMap.returning=e,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}onConflict(e){return this.expressionMap.onConflict=e,this}orIgnore(e=!0){return this.expressionMap.onIgnore=!!e,this}orUpdate(e,t,n){const{where:i,parameters:a}=n?.overwriteCondition??{};let o;if(i){const s=this.getWhereCondition(i);(Array.isArray(s)?s.length!==0:s)&&(o=[{type:"simple",condition:s}])}return a&&this.setParameters(a),Array.isArray(e)?(this.expressionMap.onUpdate={overwrite:e,conflict:t,skipUpdateIfNoValuesChanged:n?.skipUpdateIfNoValuesChanged,indexPredicate:n?.indexPredicate,upsertType:n?.upsertType,overwriteCondition:o},this):(this.expressionMap.onUpdate={conflict:e?.conflict_target,columns:e?.columns,overwrite:e?.overwrite,skipUpdateIfNoValuesChanged:n?.skipUpdateIfNoValuesChanged,upsertType:n?.upsertType,overwriteCondition:o},this)}createInsertExpression(){if((this.expressionMap.onUpdate||this.expressionMap.onIgnore)&&(this.expressionMap.onUpdate?.upsertType??"merge-into")==="merge-into"&&this.connection.driver.supportedUpsertTypes.includes("merge-into"))return this.createMergeExpression();const e=this.getTableName(this.getMainTableName()),t=this.alias!==this.getMainTableName()?this.escape(this.alias):e,n=this.createValuesExpression(),i=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),a=this.createColumnNamesExpression();let o="INSERT ";if(this.expressionMap.onUpdate?.upsertType==="primary-key"&&(o="UPSERT "),(at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(o+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),o+=`INTO ${e}`,this.alias!==this.getMainTableName()&&at.isPostgresFamily(this.connection.driver)&&(o+=` AS "${this.alias}"`),a?o+=`(${a})`:!n&&(at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(o+="()"),i&&this.connection.driver.options.type==="mssql"&&(o+=` OUTPUT ${i}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?o+=` ${n}`:o+=` VALUES ${n}`:at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?o+=" VALUES ()":o+=" DEFAULT VALUES",this.expressionMap.onUpdate?.upsertType!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)o+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)o+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:s,columns:c,conflict:l,skipUpdateIfNoValuesChanged:d,indexPredicate:h}=this.expressionMap.onUpdate;let y="ON CONFLICT";if(Array.isArray(l)){if(y+=` ( ${l.map(b=>this.escape(b)).join(", ")} )`,h&&!at.isPostgresFamily(this.connection.driver))throw new Je("indexPredicate option is not supported by the current database driver");h&&at.isPostgresFamily(this.connection.driver)&&(y+=` WHERE ( ${h} )`)}else l&&(y+=` ON CONSTRAINT ${this.escape(l)}`);const m=[];if(Array.isArray(s)?m.push(...s.map(b=>`${this.escape(b)} = EXCLUDED.${this.escape(b)}`)):c&&m.push(...c.map(b=>`${this.escape(b)} = :${b}`)),m.length>0&&(o+=` ${y} DO UPDATE SET `,m.push(...this.expressionMap.mainAlias.metadata.columns.filter(b=>b.isUpdateDate&&!s?.includes(b.databaseName)&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||at.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(b=>`${this.escape(b.databaseName)} = DEFAULT`)),o+=m.join(", ")),Array.isArray(s)&&d){this.expressionMap.onUpdate.overwriteCondition??=[];const b=s.map(v=>({type:"or",condition:`${t}.${this.escape(v)} IS DISTINCT FROM EXCLUDED.${this.escape(v)}`}));this.expressionMap.onUpdate.overwriteCondition.push({type:"and",condition:b})}at.isPostgresFamily(this.connection.driver)&&this.expressionMap.onUpdate.overwriteCondition&&this.expressionMap.onUpdate.overwriteCondition.length>0&&(o+=` WHERE ${this.createUpsertConditionExpression()}`)}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:s,columns:c}=this.expressionMap.onUpdate;Array.isArray(s)?(o+=" ON DUPLICATE KEY UPDATE ",o+=s.map(l=>`${this.escape(l)} = VALUES(${this.escape(l)})`).join(", "),o+=" "):Array.isArray(c)&&(o+=" ON DUPLICATE KEY UPDATE ",o+=c.map(l=>`${this.escape(l)} = :${l}`).join(", "),o+=" ")}}else if(this.expressionMap.onUpdate)throw new Je("onUpdate is not supported by the current database driver")}return i&&(at.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||at.isMySQLFamily(this.connection.driver))&&(o+=` RETURNING ${i}`),i&&this.connection.driver.options.type==="spanner"&&(o+=` THEN RETURN ${i}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(s=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(s.propertyPath)!==-1:s.isInsert).some(s=>this.isOverridingAutoIncrementBehavior(s))&&(o=`SET IDENTITY_INSERT ${e} ON; ${o}; SET IDENTITY_INSERT ${e} OFF`),o}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(e=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(e.propertyPath)!==-1:!(!e.isInsert||e.isGenerated&&e.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!at.isSQLiteFamily(this.connection.driver)&&!at.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(e)))):[]}createColumnNamesExpression(){const e=this.getInsertedColumns();if(e.length>0)return e.map(t=>this.escape(t.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const t=this.getValueSets();if(t.length===1)return Object.keys(t[0]).map(n=>this.escape(n)).join(", ")}return this.expressionMap.insertColumns.map(t=>this.escape(t)).join(", ")}createValuesExpression(){const e=this.getValueSets(),t=this.getInsertedColumns();if(t.length>0){let n="";return e.forEach((i,a)=>{t.forEach((o,s)=>{s===0&&(this.connection.driver.options.type==="oracle"&&e.length>1||this.connection.driver.options.type==="sap"&&e.length>1?n+=" SELECT ":n+="("),n+=this.createColumnValueExpression(e,a,o),s===t.length-1?a===e.length-1?["oracle","sap"].includes(this.connection.driver.options.type)&&e.length>1?n+=" FROM "+this.connection.driver.dummyTableName:n+=")":["oracle","sap"].includes(this.connection.driver.options.type)&&e.length>1?n+=" FROM "+this.connection.driver.dummyTableName+" UNION ALL ":n+="), ":n+=", "})}),n==="()"?"":n}else{let n="";return e.forEach((i,a)=>{Object.keys(i).forEach((s,c)=>{c===0&&(n+="(");const l=i[s];typeof l=="function"?n+=l():l===void 0?this.connection.driver.options.type==="oracle"&&e.length>1||at.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?n+="NULL":n+="DEFAULT":l===null&&this.connection.driver.options.type==="spanner"||(n+=this.createParameter(l)),c===Object.keys(i).length-1?a===e.length-1?n+=")":n+="), ":n+=", "})}),n==="()"?"":n}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(vr.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new ane}isOverridingAutoIncrementBehavior(e){return e.isPrimary&&e.isGenerated&&e.generationStrategy==="increment"&&this.getValueSets().some(t=>e.getEntityValue(t)!==void 0&&e.getEntityValue(t)!==null)}createMergeExpression(){if(!this.connection.driver.supportedUpsertTypes.includes("merge-into"))throw new Je('Upsert type "merge-into" is not supported by current database driver');if(this.expressionMap.onUpdate?.upsertType&&this.expressionMap.onUpdate.upsertType!=="merge-into")throw new Je(`Upsert type "${this.expressionMap.onUpdate.upsertType}" is not supported by current database driver`);const e=this.getTableName(this.getMainTableName()),t=this.escape(this.alias),n=this.getInsertedColumns(),i=this.createColumnNamesExpression();let a=`MERGE INTO ${e} ${this.escape(this.alias)}`;const o=this.escape("mergeIntoSource"),s=this.createMergeIntoSourceExpression(o);if(a+=` ${s}`,this.expressionMap.onIgnore){const d=n.find(h=>h.isPrimary);d?a+=` ON (${t}.${this.escape(d.databaseName)} = ${o}.${this.escape(d.databaseName)})`:a+=`ON (${this.expressionMap.mainAlias.metadata.uniques.map(h=>`(${h.columns.map(y=>`${t}.${this.escape(y.databaseName)} = ${o}.${this.escape(y.databaseName)}`).join(" AND ")})`).join(" OR ")})`}else if(this.expressionMap.onUpdate){const{conflict:d,indexPredicate:h}=this.expressionMap.onUpdate;if(h)throw new Je('indexPredicate option is not supported by upsert type "merge-into"');Array.isArray(d)?a+=` ON (${d.map(y=>`${t}.${this.escape(y)} = ${o}.${this.escape(y)}`).join(" AND ")})`:d?a+=` ON (${t}.${this.escape(d)} = ${o}.${this.escape(d)})`:a+=`ON (${this.expressionMap.mainAlias.metadata.uniques.map(y=>`(${y.columns.map(m=>`${t}.${this.escape(m.databaseName)} = ${o}.${this.escape(m.databaseName)}`).join(" AND ")})`).join(" OR ")})`}if(this.expressionMap.onUpdate){const{overwrite:d,columns:h,conflict:y,skipUpdateIfNoValuesChanged:m}=this.expressionMap.onUpdate;let b="";if(Array.isArray(d)&&(b+=(d||h)?.filter(E=>!y?.includes(E)).map(E=>`${t}.${this.escape(E)} = ${o}.${this.escape(E)}`).join(", ")),Array.isArray(d)&&m){this.expressionMap.onUpdate.overwriteCondition??=[];const E=d.map(x=>({type:"or",condition:{operator:"notEqual",parameters:[`${t}.${this.escape(x)}`,`${o}.${this.escape(x)}`]}}));this.expressionMap.onUpdate.overwriteCondition.push({type:"and",condition:E})}const v=this.createUpsertConditionExpression();b.trim()&&((this.connection.driver.options.type==="mssql"||this.connection.driver.options.type==="sap")&&v!=""?a+=` WHEN MATCHED AND ${v} THEN UPDATE SET ${b}`:(a+=` WHEN MATCHED THEN UPDATE SET ${b}`,v!=""&&(a+=` WHERE ${v}`)))}const c=this.createMergeIntoInsertValuesExpression(o),l=this.connection.driver.options.type==="mssql"?this.createReturningExpression("insert"):null;return a+=" WHEN NOT MATCHED THEN INSERT",i&&(a+=`(${i})`),c&&(a+=` VALUES ${c}`),l&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${l}`),this.connection.driver.options.type==="mssql"&&(a+=";"),a}createMergeIntoSourceExpression(e){const t=this.getValueSets(),n=this.getInsertedColumns();let i="USING (";if(n.length>0)this.connection.driver.options.type==="mssql"&&(i+="VALUES "),t.forEach((a,o)=>{n.forEach((s,c)=>{c===0&&(this.connection.driver.options.type==="mssql"?i+="(":i+="SELECT ");const l=s.getEntityValue(a);l===void 0&&!(s.isGenerated&&s.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported())?s.default!==void 0&&s.default!==null?i+=this.connection.driver.normalizeDefault(s):i+="NULL":l===null?i+="NULL":i+=this.createColumnValueExpression(t,o,s),this.connection.driver.options.type!=="mssql"&&(i+=` AS ${this.escape(s.databaseName)}`),c===n.length-1?o===t.length-1?["oracle","sap"].includes(this.connection.driver.options.type)?i+=" FROM "+this.connection.driver.dummyTableName:this.connection.driver.options.type==="mssql"&&(i+=")"):["oracle","sap"].includes(this.connection.driver.options.type)&&t.length>1?i+=" FROM "+this.connection.driver.dummyTableName+" UNION ALL ":this.connection.driver.options.type==="mssql"?i+="), ":i+=" UNION ALL ":i+=", "})});else throw new Je('Upsert type "merge-into" is not supported without metadata tables');return i+=`) ${e}`,this.connection.driver.options.type==="mssql"&&(i+=` (${n.map(a=>this.escape(a.databaseName)).join(", ")})`),i}createMergeIntoInsertValuesExpression(e){const t=this.getInsertedColumns();let n="";if(t.length>0)t.forEach((i,a)=>{a===0&&(n+="("),i.isGenerated&&i.generationStrategy==="uuid"&&this.connection.driver.isUUIDGenerationSupported()||i.isGenerated&&i.generationStrategy!=="uuid"?n+="DEFAULT":n+=`${e}.${this.escape(i.databaseName)}`,a===t.length-1?n+=")":n+=", "});else throw new Je('Upsert type "merge-into" is not supported without metadata tables');return n==="()"?"":n}createUpsertConditionExpression(){if(!this.expressionMap.onUpdate.overwriteCondition)return"";const e=[],t=this.createWhereClausesExpression(this.expressionMap.onUpdate.overwriteCondition);if(t.length>0&&t!=="1=1"&&e.push(t),this.expressionMap.mainAlias.hasMetadata){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&i.deleteDateColumn){const o=`${this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.deleteDateColumn.propertyName:i.deleteDateColumn.propertyName} IS NULL`;e.push(o)}if(i.discriminatorColumn&&i.parentEntityMetadata){const o=`${this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.discriminatorColumn.databaseName:i.discriminatorColumn.databaseName} IN (:...discriminatorColumnValues)`;e.push(o)}}if(this.expressionMap.extraAppendedAndWhereCondition){const i=this.expressionMap.extraAppendedAndWhereCondition;e.push(i)}let n="";return e.length?e.length===1?n+=`${e[0]}`:n+=`( ${e.join(" ) AND ( ")} )`:n+="",n}createColumnValueExpression(e,t,n){const i=e[t];let a="",o=n.getEntityValue(i);if(typeof o!="function"&&(o=this.connection.driver.preparePersistentValue(o,n)),n.isVersion&&o===void 0)a+="1";else if(n.isDiscriminator)a+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(n.isGenerated&&n.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&o===void 0)o=_ne(),a+=this.createParameter(o),t in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[t]={}),n.setEntityValue(this.expressionMap.locallyGenerated[t],o);else if(o===void 0)this.connection.driver.options.type==="oracle"&&e.length>1||at.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?n.default!==void 0&&n.default!==null?a+=this.connection.driver.normalizeDefault(n):this.connection.driver.options.type==="spanner"&&n.isGenerated&&n.generationStrategy==="uuid"?a+="GENERATE_UUID()":a+="NULL":a+="DEFAULT";else if(o===null&&(this.connection.driver.options.type==="spanner"||this.connection.driver.options.type==="oracle"))a+="NULL";else if(typeof o=="function")a+=o();else{this.connection.driver.options.type==="mssql"&&(o=this.connection.driver.parametrizeValue(n,o));const s=this.createParameter(o);if((at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.includes(n.type)){const l=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";n.srid!=null?a+=`${l}(${s}, ${n.srid})`:a+=`${l}(${s})`}else at.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.includes(n.type)?n.srid!=null?a+=`ST_SetSRID(ST_GeomFromGeoJSON(${s}), ${n.srid})::${n.type}`:a+=`ST_GeomFromGeoJSON(${s})::${n.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.includes(n.type)?a+=n.type+"::STGeomFromText("+s+", "+(n.srid||"0")+")":a+=s}return a}}class bN{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async update(e){const t=this.expressionMap.relationMetadata;if(t.isManyToOne||t.isOneToOneOwner){const n=t.joinColumns.reduce((i,a)=>{const o=vr.isObject(e)?a.referencedColumn.getEntityValue(e):e;return a.setEntityValue(i,o),i},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(t.entityMetadata.target).set(n).whereInIds(this.expressionMap.of).execute()}else if((t.isOneToOneNotOwner||t.isOneToMany)&&e===null){const n={};t.inverseRelation.joinColumns.forEach(c=>{n[c.propertyName]=null});const i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a={},o=[];i.forEach((c,l)=>{t.inverseRelation.joinColumns.map((d,h)=>{const y="joinColumn_"+l+"_"+h;a[y]=vr.isObject(c)?d.referencedColumn.getEntityValue(c):c,o.push(`${d.propertyPath} = :${y}`)})});const s=o.map(c=>"("+c+")").join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(n).where(s).setParameters(a).execute()}else if(t.isOneToOneNotOwner||t.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new Je("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const n=this.expressionMap.of,i=t.inverseRelation.joinColumns.reduce((a,o)=>{const s=vr.isObject(n)?o.referencedColumn.getEntityValue(n):n;return o.setEntityValue(a,s),a},{});if(!e||Array.isArray(e)&&!e.length)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(i).whereInIds(e).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(e)?e:[e],o=t.isManyToManyOwner?i:a,s=t.isManyToManyOwner?a:i,c=[];if(o.forEach(l=>{s.forEach(d=>{const h={};n.ownerColumns.forEach(y=>{h[y.databaseName]=vr.isObject(l)?y.referencedColumn.getEntityValue(l):l}),n.inverseColumns.forEach(y=>{h[y.databaseName]=vr.isObject(d)?y.referencedColumn.getEntityValue(d):d}),c.push(h)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(l=>this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(l).execute())):await this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(c).execute()}}}class xne{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async remove(e){const t=this.expressionMap.relationMetadata;if(t.isOneToMany){const n=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(e)?e:[e],a={};t.inverseRelation.joinColumns.forEach(l=>{a[l.propertyName]=null});const o={},s=[];n.forEach((l,d)=>{s.push(...i.map((h,y)=>[...t.inverseRelation.joinColumns.map((m,b)=>{const v="joinColumn_"+d+"_"+y+"_"+b;return o[v]=vr.isObject(l)?m.referencedColumn.getEntityValue(l):l,`${m.propertyPath} = :${v}`}),...t.inverseRelation.entityMetadata.primaryColumns.map((m,b)=>{const v="primaryColumn_"+y+"_"+y+"_"+b;return o[v]=vr.isObject(h)?m.getEntityValue(h):h,`${m.propertyPath} = :${v}`})].join(" AND ")))});const c=s.map(l=>"("+l+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(a).where(c).setParameters(o).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],a=Array.isArray(e)?e:[e],o=t.isManyToManyOwner?i:a,s=t.isManyToManyOwner?a:i,c={},l=[];o.forEach((h,y)=>{l.push(...s.map((m,b)=>[...n.ownerColumns.map((v,E)=>{const x="firstValue_"+y+"_"+b+"_"+E;return c[x]=vr.isObject(h)?v.referencedColumn.getEntityValue(h):h,`${v.databaseName} = :${x}`}),...n.inverseColumns.map((v,E)=>{const x="secondValue_"+y+"_"+b+"_"+E;return c[x]=vr.isObject(m)?v.referencedColumn.getEntityValue(m):m,`${v.databaseName} = :${x}`})].join(" AND ")))});const d=l.map(h=>"("+h+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(n.tableName).where(d).setParameters(c).execute()}}}class Ane extends Fr{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(e){return this.expressionMap.of=e,this}async set(e){const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new Je("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToMany||t.isOneToMany)throw new Je(`Set operation is only supported for many-to-one and one-to-one relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .add() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!vr.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new Je('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new bN(this,this.expressionMap).update(e)}async add(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new Je("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new Je(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!vr.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new Je('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new bN(this,this.expressionMap).update(e)}async remove(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new Je("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new Je(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set(null) method instead.`);return new xne(this,this.expressionMap).remove(e)}async addAndRemove(e,t){await this.remove(t),await this.add(e)}async loadOne(){return this.loadMany().then(e=>e[0])}async loadMany(){let e=this.expressionMap.of;if(!vr.isObject(e)){const t=this.expressionMap.mainAlias.metadata;if(t.hasMultiplePrimaryKeys)throw new Je("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");e=t.primaryColumns[0].createValueMap(e)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,e,this.queryRunner)}}class Ht{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),(n,i)=>e.slice(i*t,i*t+t))}static splitClassesAndStrings(e){return[e.filter(t=>typeof t!="string"),e.filter(t=>typeof t=="string")]}static groupBy(e,t){return e.reduce((n,i)=>{const a=t(i);let o=n.find(s=>s.id===a);return o||(o={id:a,items:[]},n.push(o)),o.items.push(i),n},[])}static uniq(e,t){return e.reduce((n,i)=>{let a=!1;if(typeof t=="function"){const o=t(i);a=!!n.find(s=>t(s)===o)}else typeof t=="string"?a=!!n.find(o=>o[t]===i[t]):a=n.indexOf(i)!==-1;return a||n.push(i),n},[])}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)Ht.merge(e,n);return e}static cloneObject(e){return e==null?e:Object.assign(Object.create(Object.getPrototypeOf(e)),e)}static deepCompare(...e){let t,n,i,a;if(e.length<1)return!0;for(t=1,n=e.length;t<n;t++)if(i=[],a=[],!Ht.compare2Objects(i,a,e[0],e[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let i=0,a=n.length;i<a;i++)e=e[n[i]];return e}static replaceEmptyObjectsWithBooleans(e){for(const t in e)e[t]&&typeof e[t]=="object"&&(Object.keys(e[t]).length===0?e[t]=!0:Ht.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){const t={};for(const n of e){const i=n.split(".");if(!i.length)continue;(!t[i[0]]||t[i[0]]===!0)&&(t[i[0]]={});let a=t[i[0]];for(const[o,s]of i.entries())o!==0&&(a[s]?a=a[s]:o===i.length-1?(a[s]={},a=null):(a[s]={},a=a[s]))}return Ht.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return e==null||t===void 0||t===null?!1:(typeof e.id=="string"&&typeof t.id=="string"||typeof e.id=="number"&&typeof t.id=="number")&&Object.keys(e).length===1&&Object.keys(t).length===1?e.id===t.id:Ht.deepCompare(e,t)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e==="true"||e==="1":typeof e=="number"?e>0:!1}static isArraysEqual(e,t){return e.length!==t.length?!1:e.every(n=>t.includes(n))}static areMutuallyExclusive(...e){return!e.some(n=>{const i=e.filter(a=>a!==n);return n.some(a=>i.some(o=>o.includes(a)))})}static parseSqlCheckExpression(e,t){const n=e.match(new RegExp(`"${t}" varchar CHECK\\s*\\(\\s*"${t}"\\s+IN\\s*`));if(n&&n.index){const a=e.substring(n.index+n[0].length);let o="",s="";const c=[];for(let l=0;l<a.length;l++){const d=a[l];switch(d){case",":o==""?(c.push(s),s=""):s+=d;break;case"'":o==d?a[l+1]===d?(s+=d,l+=1):o="":o=d;break;case")":if(o=="")return c.push(s),c;s+=d;break;default:o!=""&&(s+=d)}}}}static isCriteriaNullOrEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||Ht.isPlainObject(e)&&Object.keys(e).length===0}static isSinglePrimitiveCriteria(e){return typeof e=="string"||typeof e=="number"||e instanceof Date}static isPrimitiveCriteria(e){return Array.isArray(e)?e.every(t=>Ht.isSinglePrimitiveCriteria(t)):Ht.isSinglePrimitiveCriteria(e)}static compare2Objects(e,t,n,i){let a;if(Number.isNaN(n)&&Number.isNaN(i)||n===i)return!0;if(n===null||i===null||n===void 0||i===void 0)return!1;if((typeof n.equals=="function"||typeof n.equals=="function")&&n.equals(i))return!0;if(typeof n=="function"&&typeof i=="function"||n instanceof Date&&i instanceof Date||n instanceof RegExp&&i instanceof RegExp||typeof n=="string"&&typeof i=="string"||typeof n=="number"&&typeof i=="number")return n.toString()===i.toString();if(!(typeof n=="object"&&typeof i=="object")||Object.prototype.isPrototypeOf.call(n,i)||Object.prototype.isPrototypeOf.call(i,n)||n.constructor!==i.constructor||n.prototype!==i.prototype||e.indexOf(n)>-1||t.indexOf(i)>-1)return!1;for(a in i){if(i.hasOwnProperty(a)!==n.hasOwnProperty(a))return!1;if(typeof i[a]!=typeof n[a])return!1}for(a in n){if(i.hasOwnProperty(a)!==n.hasOwnProperty(a))return!1;if(typeof i[a]!=typeof n[a])return!1;switch(typeof n[a]){case"object":case"function":if(e.push(n),t.push(i),!Ht.compare2Objects(e,t,n[a],i[a]))return!1;e.pop(),t.pop();break;default:if(n[a]!==i[a])return!1;break}}return!0}static isPlainObject(e){return e==null?!1:!e.constructor||e.constructor===Object}static mergeArrayKey(e,t,n,i){if(i.has(n)){e[t]=i.get(n);return}if(!(n instanceof Promise)){if(!Ht.isPlainObject(n)&&!Array.isArray(n)){e[t]=n;return}e[t]||(e[t]=Array.isArray(n)?[]:{}),i.set(n,e[t]),Ht.merge(e[t],n,i),i.delete(n)}}static mergeObjectKey(e,t,n,i){if(i.has(n)){Object.assign(e,{[t]:i.get(n)});return}if(!(n instanceof Promise)){if(!Ht.isPlainObject(n)&&!Array.isArray(n)){Object.assign(e,{[t]:n});return}e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),i.set(n,e[t]),Ht.merge(e[t],n,i),i.delete(n)}}static merge(e,t,n=new Map){if(Ht.isPlainObject(e)&&Ht.isPlainObject(t))for(const[i,a]of Object.entries(t))i!=="__proto__"&&Ht.mergeObjectKey(e,i,a,n);if(Array.isArray(e)&&Array.isArray(t))for(let i=0;i<t.length;i++)Ht.mergeArrayKey(e,i,t[i],n)}}class Sne{constructor(e,t,n,i,a){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=i,this.queryRunner=a,this.pojo=this.expressionMap.options.includes("create-pojo"),this.selections=new Set(this.expressionMap.selects.map(o=>o.selection)),this.aliasCache=new Map,this.columnsCache=new Map}transform(e,t){const n=this.group(e,t),i=[];for(const a of n.values()){const o=this.transformRawResultsGroup(a,t);o!==void 0&&i.push(o)}return i}buildAlias(e,t){let n=this.aliasCache.get(e);n||(n=new Map,this.aliasCache.set(e,n));let i=n.get(t);return i||(i=at.buildAlias(this.driver,void 0,e,t),n.set(t,i)),i}group(e,t){const n=new Map,i=[];t.metadata.tableType==="view"?i.push(...t.metadata.columns.map(a=>this.buildAlias(t.name,a.databaseName))):i.push(...t.metadata.primaryColumns.map(a=>this.buildAlias(t.name,a.databaseName)));for(const a of e){const o=i.map(c=>{const l=a[c];return Buffer.isBuffer(l)?l.toString("hex"):vr.isObject(l)?JSON.stringify(l):l}).join("_"),s=n.get(o);s?s.push(a):n.set(o,[a])}return n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const d=e.map(y=>y[this.buildAlias(t.name,t.metadata.discriminatorColumn.databaseName)]),h=n.childEntityMetadatas.find(y=>typeof d.find(m=>m===y.discriminatorValue)<"u");h&&(n=h)}const i=n.create(this.queryRunner,{fromDeserializer:!0,pojo:this.pojo}),a=this.transformColumns(e,t,i,n),o=this.transformJoins(e,i,t,n),s=this.transformRelationIds(e,t,i,n),c=this.transformRelationCounts(e,t,i);if(a||n.primaryColumns.every(d=>d.isVirtual===!0)&&(o||s||c))return i}transformColumns(e,t,n,i){let a=!1;const o=e[0];for(const[s,c]of this.getColumnsToProcess(t.name,i)){const l=o[s];l!==void 0&&(l!==null&&!c.isVirtualProperty&&(a=!0),c.setEntityValue(n,this.driver.prepareHydratedValue(l,c)))}return a}transformJoins(e,t,n,i){let a=!1;for(const o of this.expressionMap.joinAttributes){if(!o.metadata||!o.isSelected||o.relation&&!i.relations.find(c=>c===o.relation))continue;if(o.mapToProperty){if(o.mapToPropertyParentAlias!==n.name)continue}else if(!o.relation||o.parentAlias!==n.name||o.relationPropertyPath!==o.relation.propertyPath)continue;let s=this.transform(e,o.alias);s=o.isMany?s:s[0],s=!o.isMany&&s===void 0?null:s,s!==void 0&&(o.mapToPropertyPropertyName?t[o.mapToPropertyPropertyName]=s:o.relation.setEntityValue(t,s),a=!0)}return a}transformRelationIds(e,t,n,i){let a=!1;for(const[o,s]of this.rawRelationIdResults.entries()){if(s.relationIdAttribute.parentAlias!==t.name)continue;const c=s.relationIdAttribute.relation,l=this.createValueMapFromJoinColumns(c,s.relationIdAttribute.parentAlias,e);if(l==null)continue;this.prepareDataForTransformRelationIds();const d=this.hashEntityIds(c,l),h=this.relationIdMaps[o][d]||[],y=s.relationIdAttribute.mapToPropertyPropertyPath.split("."),m=(b,v,E)=>{const x=b.shift();if(x&&b.length===0)return v[x]=E,v;if(x&&b.length>0)m(b,v[x],E);else return v};c.isOneToOne||c.isManyToOne?h[0]!==void 0&&(m(y,n,h[0]),a=!0):(m(y,n,h),a=a||h.length>0)}return a}transformRelationCounts(e,t,n){let i=!1;for(const a of this.rawRelationCountResults){if(a.relationCountAttribute.parentAlias!==t.name)continue;const o=a.relationCountAttribute.relation;let s;o.isOneToMany?s=o.inverseRelation.joinColumns[0].referencedColumn.databaseName:s=o.isOwning?o.joinColumns[0].referencedColumn.databaseName:o.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=e[0][this.buildAlias(t.name,s)];if(c!=null){n[a.relationCountAttribute.mapToPropertyPropertyName]=0;for(const l of a.results)l.parentId===c&&(n[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(l.cnt),i=!0)}}return i}getColumnsToProcess(e,t){let n=this.columnsCache.get(e);n||(n=new Map,this.columnsCache.set(e,n));let i=n.get(t);return i||(i=t.columns.filter(a=>!a.isVirtual&&(this.selections.has(e)||this.selections.has(`${e}.${a.propertyPath}`))&&!t.childEntityMetadatas.some(o=>o.target===a.target)).map(a=>[this.buildAlias(e,a.databaseName),a]),n.set(t,i)),i}createValueMapFromJoinColumns(e,t,n){let i;return e.isManyToOne||e.isOneToOneOwner?i=e.entityMetadata.primaryColumns.map(a=>a):e.isOneToMany||e.isOneToOneNotOwner?i=e.inverseRelation.joinColumns.map(a=>a):e.isOwning?i=e.joinColumns.map(a=>a):i=e.inverseRelation.inverseJoinColumns.map(a=>a),i.reduce((a,o)=>{for(const s of n)e.isManyToOne||e.isOneToOneOwner?a[o.databaseName]=this.driver.prepareHydratedValue(s[this.buildAlias(t,o.databaseName)],o):a[o.databaseName]=this.driver.prepareHydratedValue(s[this.buildAlias(t,o.referencedColumn.databaseName)],o.referencedColumn);return a},{})}extractEntityPrimaryIds(e,t){let n;return e.isManyToOne||e.isOneToOneOwner?n=e.entityMetadata.primaryColumns.map(i=>i):e.isOneToMany||e.isOneToOneNotOwner?n=e.inverseRelation.joinColumns.map(i=>i):e.isOwning?n=e.joinColumns.map(i=>i):n=e.inverseRelation.inverseJoinColumns.map(i=>i),n.reduce((i,a)=>(i[a.databaseName]=t[a.databaseName],i),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(e=>{const t=e.relationIdAttribute.relation;let n;return t.isManyToOne||t.isOneToOneOwner?n=t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?n=t.inverseEntityMetadata.primaryColumns:t.isOwning?n=t.inverseJoinColumns:n=t.inverseRelation.joinColumns,e.results.reduce((i,a)=>{let o=n.reduce((s,c)=>{let l=a[c.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(l=c.referencedColumn.createValueMap(l)),Ht.mergeDeep(s,c.createValueMap(l))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(l=c.referencedColumn.referencedColumn.createValueMap(l)),Ht.mergeDeep(s,c.referencedColumn.createValueMap(l)))},{});if(n.length===1&&!e.relationIdAttribute.disableMixedMap&&(t.isOneToMany||t.isOneToOneNotOwner?o=n[0].getEntityValue(o):o=n[0].referencedColumn.getEntityValue(o)),o!==void 0){const s=this.hashEntityIds(t,a);i[s]?i[s].push(o):i[s]=[o]}return i},{})}))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}}let Mne=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new Je("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const i={},a=e.map(o=>{const s={},c=[];n.relation.joinColumns.forEach(d=>{s[d.databaseName]=this.connection.driver.prepareHydratedValue(o[at.buildAlias(this.connection.driver,void 0,n.parentAlias,d.databaseName)],d.referencedColumn);const h=`${d.databaseName}:${s[d.databaseName]}`;c.indexOf(h)===-1&&c.push(h)}),n.relation.entityMetadata.primaryColumns.forEach(d=>{s[d.databaseName]=this.connection.driver.prepareHydratedValue(o[at.buildAlias(this.connection.driver,void 0,n.parentAlias,d.databaseName)],d);const h=`${d.databaseName}:${s[d.databaseName]}`;c.indexOf(h)===-1&&c.push(h)}),c.sort();const l=c.join("::");return i[l]?null:(i[l]=!0,s)}).filter(o=>o);return{relationIdAttribute:n,results:a}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const i=n.relation,a=i.isOwning?i.joinColumns:i.inverseRelation.joinColumns,o=i.inverseEntityMetadata.target,s=i.inverseEntityMetadata.tableName,c=n.alias||s,l={},d={},h=e.map((v,E)=>{const x=[],D={},N=a.map(k=>{const F=k.databaseName+E,T=v[at.buildAlias(this.connection.driver,void 0,n.parentAlias,k.referencedColumn.databaseName)],z=`${c}:${k.propertyPath}:${T}`;return x.indexOf(z)!==-1?"":(x.push(z),D[F]=T,c+"."+k.propertyPath+" = :"+F)}).filter(k=>k).join(" AND ");x.sort();const B=x.join("::");return l[B]?"":(l[B]=!0,Object.assign(d,D),N)}).filter(v=>v).map(v=>"("+v+")").join(" OR ");if(!h)return{relationIdAttribute:n,results:[]};const y=this.connection.createQueryBuilder(this.queryRunner);Ht.uniq([...a,...i.inverseRelation.entityMetadata.primaryColumns],v=>v.propertyPath).forEach(v=>{y.addSelect(c+"."+v.propertyPath,v.databaseName)}),y.from(o,c).where("("+h+")").setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(y);const b=await y.getRawMany();return b.forEach(v=>{a.forEach(E=>{v[E.databaseName]=this.connection.driver.prepareHydratedValue(v[E.databaseName],E.referencedColumn)}),i.inverseRelation.entityMetadata.primaryColumns.forEach(E=>{v[E.databaseName]=this.connection.driver.prepareHydratedValue(v[E.databaseName],E)})}),{relationIdAttribute:n,results:b}}else{const i=n.relation,a=i.isOwning?i.joinColumns:i.inverseRelation.inverseJoinColumns,o=i.isOwning?i.inverseJoinColumns:i.inverseRelation.joinColumns,s=n.junctionAlias,c=n.joinInverseSideMetadata.tableName,l=n.alias||c,d=i.isOwning?i.junctionEntityMetadata.tableName:i.inverseRelation.junctionEntityMetadata.tableName,h=e.map(N=>a.reduce((B,k)=>(B[k.propertyPath]=N[at.buildAlias(this.connection.driver,void 0,n.parentAlias,k.referencedColumn.databaseName)],B),{}));if(h.length===0)return{relationIdAttribute:n,results:[]};const y={},m={},b=h.map((N,B)=>{const k=[],F={},T=Object.keys(N).map(Z=>{const Y=Z+B,W=N[Z],M=`${s}:${Z}:${W}`;return k.indexOf(M)!==-1?"":(k.push(M),F[Y]=W,s+"."+Z+" = :"+Y)}).filter(Z=>Z).join(" AND ");k.sort();const z=k.join("::");return m[z]?"":(m[z]=!0,Object.assign(y,F),T)}).filter(N=>N),v=o.map(N=>s+"."+N.propertyPath+" = "+l+"."+N.referencedColumn.propertyPath).join(" AND "),E=b.map(N=>"("+N+" AND "+v+")").join(" OR "),x=this.connection.createQueryBuilder(this.queryRunner);o.forEach(N=>{x.addSelect(s+"."+N.propertyPath,N.databaseName).addOrderBy(s+"."+N.propertyPath)}),a.forEach(N=>{x.addSelect(s+"."+N.propertyPath,N.databaseName).addOrderBy(s+"."+N.propertyPath)}),x.from(c,l).innerJoin(d,s,E).setParameters(y),n.queryBuilderFactory&&n.queryBuilderFactory(x);const D=await x.getRawMany();return D.forEach(N=>{[...a,...o].forEach(B=>{N[B.databaseName]=this.connection.driver.prepareHydratedValue(N[B.databaseName],B.referencedColumn)})}),{relationIdAttribute:n,results:D}}});return Promise.all(t)}};class Tne{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,n){const i=Array.isArray(t)?t:[t],a=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,i,a):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,i,a):this.loadForOneToManyAndOneToOneNotOwner(e,i,a)}async loadManyToManyRelationIdsAndGroup(e,t,n,i){const a=e.isManyToMany||e.isOneToMany,o=Array.isArray(t)?t:[t];if(!n&&(n=await this.connection.relationLoader.load(e,t,this.queryRunner,i),!n.length))return o.map(h=>({entity:h,related:a?[]:void 0}));const s=await this.load(e,t,n),c=Array.isArray(n)?n:[n];let l=[],d=[];return e.isManyToManyOwner?(l=e.junctionEntityMetadata.inverseColumns.map(h=>h.referencedColumn),d=e.junctionEntityMetadata.ownerColumns.map(h=>h.referencedColumn)):e.isManyToManyNotOwner?(l=e.junctionEntityMetadata.ownerColumns.map(h=>h.referencedColumn),d=e.junctionEntityMetadata.inverseColumns.map(h=>h.referencedColumn)):e.isManyToOne||e.isOneToOneOwner?(l=e.joinColumns.map(h=>h.referencedColumn),d=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(l=e.inverseRelation.entityMetadata.primaryColumns,d=e.inverseRelation.joinColumns.map(h=>h.referencedColumn)),o.map(h=>{const y={entity:h,related:a?[]:void 0},m=s.filter(b=>d.every(v=>v.compareEntityValue(h,b[v.entityMetadata.name+"_"+v.propertyAliasName])));return m.length&&c.forEach(b=>{m.forEach(v=>{l.every(x=>x.compareEntityValue(b,v[at.buildAlias(this.connection.driver,void 0,x.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+x.propertyPath.replace(".","_"))]))&&(a?y.related.push(b):y.related=b)})}),y})}loadForManyToMany(e,t,n){const i=e.junctionEntityMetadata,a=i.name,o=e.isOwning?i.ownerColumns:i.inverseColumns,s=e.isOwning?i.inverseColumns:i.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);o.forEach(y=>{const m=at.buildAlias(this.connection.driver,void 0,y.referencedColumn.entityMetadata.name+"_"+y.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+y.propertyPath,m)}),s.forEach(y=>{const m=at.buildAlias(this.connection.driver,void 0,y.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+y.referencedColumn.propertyPath.replace(".","_"));c.addSelect(a+"."+y.propertyPath,m)});let l="";if(o.length===1){const y=t.map(b=>o[0].referencedColumn.getEntityValue(b));y.every(b=>typeof b=="number")?l=`${a}.${o[0].propertyPath} IN (${y.join(", ")})`:(c.setParameter("values1",y),l=a+"."+o[0].propertyPath+" IN (:...values1)")}else l="("+t.map((y,m)=>o.map(b=>{const v="entity1_"+m+"_"+b.propertyName;return c.setParameter(v,b.referencedColumn.getEntityValue(y)),a+"."+b.propertyPath+" = :"+v}).join(" AND ")).map(y=>"("+y+")").join(" OR ")+")";let d="";if(n)if(s.length===1){const y=n.map(b=>s[0].referencedColumn.getEntityValue(b));y.every(b=>typeof b=="number")?d=`${a}.${s[0].propertyPath} IN (${y.join(", ")})`:(c.setParameter("values2",y),d=a+"."+s[0].propertyPath+" IN (:...values2)")}else d="("+n.map((y,m)=>s.map(b=>{const v="entity2_"+m+"_"+b.propertyName;return c.setParameter(v,b.referencedColumn.getEntityValue(y)),a+"."+b.propertyPath+" = :"+v}).join(" AND ")).map(y=>"("+y+")").join(" OR ")+")";const h=[l,d].filter(y=>y.length>0).join(" AND ");return c.from(i.target,a).where(h).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const i=e.entityMetadata.targetName,a=e.joinColumns.every(c=>!!e.entityMetadata.nonVirtualColumns.find(l=>l===c));if(n&&a){const c=[];if(t.forEach(l=>{const d={};e.entityMetadata.primaryColumns.forEach(h=>{const y=h.entityMetadata.name+"_"+h.propertyPath.replace(".","_");d[y]=h.getEntityValue(l)}),n.forEach(h=>{e.joinColumns.forEach(y=>{const m=y.getEntityValue(l),b=y.referencedColumn.getEntityValue(h);if(!(m===void 0||b===void 0)&&m===b){const v=y.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+y.referencedColumn.propertyPath.replace(".","_");d[v]=b}})}),Object.keys(d).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&c.push(d)}),c.length===t.length)return Promise.resolve(c)}const o=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const l=at.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));o.addSelect(i+"."+c.propertyPath,l)}),e.joinColumns.forEach(c=>{const l=at.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));o.addSelect(i+"."+c.propertyPath,l)});let s="";if(e.entityMetadata.primaryColumns.length===1){const c=t.map(d=>e.entityMetadata.primaryColumns[0].getEntityValue(d));c.every(d=>typeof d=="number")?s=`${i}.${e.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(o.setParameter("values",c),s=i+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=t.map((c,l)=>e.entityMetadata.primaryColumns.map((d,h)=>{const y="entity"+l+"_"+h;return o.setParameter(y,d.getEntityValue(c)),i+"."+d.propertyPath+" = :"+y}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return o.from(e.entityMetadata.target,i).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){const i=e;if(e=e.inverseRelation,e.entityMetadata.primaryColumns.length===e.joinColumns.length&&e.entityMetadata.primaryColumns.every(l=>e.joinColumns.indexOf(l)!==-1))return Promise.resolve(t.map(l=>{const d={};return e.joinColumns.forEach(function(h){const y=h.referencedColumn.getEntityValue(l),m=h.referencedColumn.entityMetadata.name+"_"+h.referencedColumn.propertyPath.replace(".","_"),b=h.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+h.propertyPath.replace(".","_");d[m]=y,d[b]=y}),d}));const a=e.entityMetadata.targetName,o=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const l=at.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+c.propertyPath.replace(".","_"));o.addSelect(a+"."+c.propertyPath,l)}),e.joinColumns.forEach(c=>{const l=at.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+c.referencedColumn.propertyPath.replace(".","_"));o.addSelect(a+"."+c.propertyPath,l)});let s="";if(e.joinColumns.length===1){const c=t.map(d=>e.joinColumns[0].referencedColumn.getEntityValue(d));c.every(d=>typeof d=="number")?s=`${a}.${e.joinColumns[0].propertyPath} IN (${c.join(", ")})`:(o.setParameter("values",c),s=a+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else s=t.map((c,l)=>e.joinColumns.map((d,h)=>{const y="entity"+l+"_"+h;return o.setParameter(y,d.referencedColumn.getEntityValue(c)),a+"."+d.propertyPath+" = :"+y}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return o.from(e.entityMetadata.target,a).where(s).getRawMany()}}class Rne{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)})})}metadataToAttribute(e,t){return new LA(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class One{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(i,a,o)=>o.indexOf(i)===a,n=this.relationCountAttributes.map(async i=>{if(i.relation.isOneToMany){const a=i.relation,o=a.inverseRelation,s=o.joinColumns[0].referencedColumn.propertyName,c=a.inverseEntityMetadata.target,l=a.inverseEntityMetadata.tableName,d=i.alias||l,h=o.propertyName;let y=e.map(b=>b[i.parentAlias+"_"+s]).filter(b=>!!b);if(y=y.filter(t),y.length===0)return{relationCountAttribute:i,results:[]};const m=this.connection.createQueryBuilder(this.queryRunner);return m.select(d+"."+h,"parentId").addSelect("COUNT(*)","cnt").from(c,d).where(d+"."+h+" IN (:...ids)").addGroupBy(d+"."+h).setParameter("ids",y),i.queryBuilderFactory&&i.queryBuilderFactory(m),{relationCountAttribute:i,results:await m.getRawMany()}}else{let a,o,s,c;i.relation.isOwning?(a=i.relation.joinColumns[0].referencedColumn.databaseName,o=i.relation.inverseJoinColumns[0].referencedColumn.databaseName,s=i.relation.junctionEntityMetadata.columns[0],c=i.relation.junctionEntityMetadata.columns[1]):(a=i.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,o=i.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,s=i.relation.junctionEntityMetadata.columns[1],c=i.relation.junctionEntityMetadata.columns[0]);let l=e.map(E=>E[i.parentAlias+"_"+a]).filter(E=>!!E);if(l=l.filter(t),l.length===0)return{relationCountAttribute:i,results:[]};const d=i.junctionAlias,h=i.joinInverseSideMetadata.tableName,y=i.alias||h,m=i.relation.junctionEntityMetadata.tableName,b=d+"."+s.propertyName+" IN ("+l.map(E=>isNaN(E)?"'"+E+"'":E)+") AND "+d+"."+c.propertyName+" = "+y+"."+o,v=this.connection.createQueryBuilder(this.queryRunner);return v.select(d+"."+s.propertyName,"parentId").addSelect("COUNT("+v.escape(y)+"."+v.escape(o)+")","cnt").from(h,y).innerJoin(m,d,b).addGroupBy(d+"."+s.propertyName),i.queryBuilderFactory&&i.queryBuilderFactory(v),{relationCountAttribute:i,results:await v.getRawMany()}}});return Promise.all(n)}}class Cne{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)})})}metadataToAttribute(e,t){return new jA(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class zA{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||typeof t.select=="object"||typeof t.relations=="object"||typeof t.where=="object"||typeof t.join=="object"||typeof t.order=="object"||typeof t.cache=="object"||typeof t.cache=="boolean"||typeof t.cache=="number"||typeof t.comment=="string"||typeof t.lock=="object"||typeof t.loadRelationIds=="object"||typeof t.loadRelationIds=="boolean"||typeof t.loadEagerRelations=="boolean"||typeof t.withDeleted=="boolean"||typeof t.relationLoadStrategy=="string"||typeof t.transaction=="boolean")}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||typeof t.skip=="number"||typeof t.take=="number"||typeof t.skip=="string"||typeof t.take=="string")}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(t?.relations){const n=[...t.relations];if(zA.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new sne(n)}return e}static applyRelationsRecursively(e,t,n,i,a){let o=[];if(a){const s=new RegExp("^"+a.replace(".","\\.")+"\\.");o=t.filter(c=>c.match(s)).map(c=>i.findRelationWithPropertyPath(c.replace(s,""))).filter(c=>c)}else o=t.map(s=>i.findRelationWithPropertyPath(s)).filter(s=>s);o.forEach(s=>{const c=at.buildAlias(e.connection.driver,{joiner:"__"},n,s.propertyPath),l=n+"."+s.propertyPath;e.expressionMap.relationLoadStrategy==="query"?e.concatRelationMetadata(s):e.leftJoinAndSelect(l,c),t.splice(t.indexOf(a?a+"."+s.propertyPath:s.propertyPath),1);let d,h;if(e.expressionMap.relationLoadStrategy==="query")d=s.inverseEntityMetadata,h=c;else{const y=e.expressionMap.joinAttributes.find(m=>m.entityOrProperty===l);d=y.metadata,h=y.alias.name}if(!h||!d)throw new Is(s.propertyPath,i);if(this.applyRelationsRecursively(e,t,h,d,a?a+"."+s.propertyPath:s.propertyPath),e.expressionMap.relationLoadStrategy==="join"){const y=i.relations.find(m=>m.propertyName===s.propertyPath);y&&this.joinEagerRelations(e,c,y.inverseEntityMetadata)}})}static joinEagerRelations(e,t,n){n.eagerRelations.forEach(i=>{let a=at.buildAlias(e.connection.driver,{joiner:"__"},t,i.propertyName),o=!0;for(const l of e.expressionMap.joinAttributes)if(!(l.condition!==void 0||l.mapToProperty!==void 0||l.isMappingMany!==void 0||l.direction!=="LEFT"||l.entityOrProperty!==`${t}.${i.propertyPath}`)){o=!1,a=l.alias.name;break}const s=!!e.expressionMap.joinAttributes.find(l=>l.alias.name===a);o&&!s&&e.leftJoin(t+"."+i.propertyPath,a);let c=!0;for(const l of e.expressionMap.selects)if(!(l.aliasName!==void 0||l.virtual!==void 0||l.selection!==a)){c=!1;break}c&&e.addSelect(a),this.joinEagerRelations(e,a,i.inverseEntityMetadata)})}}class VA extends Fr{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map(n=>({selection:n}));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map(n=>({selection:n})));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,i){return this.join("INNER",e,t,n,i),this}leftJoin(e,t,n,i){return this.join("LEFT",e,t,n,i),this}innerJoinAndSelect(e,t,n,i){return this.addSelect(t),this.innerJoin(e,t,n,i),this}leftJoinAndSelect(e,t,n,i){return this.addSelect(t),this.leftJoin(e,t,n,i),this}innerJoinAndMapMany(e,t,n,i,a){return this.addSelect(n),this.join("INNER",t,n,i,a,e,!0),this}innerJoinAndMapOne(e,t,n,i,a,o){return this.addSelect(n),this.join("INNER",t,n,i,a,e,!1,o),this}leftJoinAndMapMany(e,t,n,i,a){return this.addSelect(n),this.join("LEFT",t,n,i,a,e,!0),this}leftJoinAndMapOne(e,t,n,i,a,o){return this.addSelect(n),this.join("LEFT",t,n,i,a,e,!1,o),this}loadRelationIdAndMap(e,t,n,i){const a=new LA(this.expressionMap);return a.mapToProperty=e,a.relationName=t,typeof n=="string"&&(a.alias=n),typeof n=="object"&&n.disableMixedMap&&(a.disableMixedMap=!0),a.queryBuilderFactory=i,this.expressionMap.relationIdAttributes.push(a),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,i){const a=new jA(this.expressionMap);return a.mapToProperty=e,a.relationName=t,a.alias=n,a.queryBuilderFactory=i,this.expressionMap.relationCountAttributes.push(a),this.expressionMap.createAlias({type:"other",name:a.junctionAlias}),a.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:a.junctionAlias,metadata:a.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach(t=>{e!==void 0&&e.relations!==void 0&&e.relations.indexOf(t.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)}),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return e?this.expressionMap.groupBys=[e]:this.expressionMap.groupBys=[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return this.connection.driver.options.type==="cockroachdb"&&(e===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=e),this}orderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new Je('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new Je('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new Je('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new Je('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new Je('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new Je('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new Je('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new Je('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new up;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const i=n.updateDateColumn.getEntityValue(t);if(i.getTime()!==this.expressionMap.lockVersion.getTime())throw new dN(n.name,this.expressionMap.lockVersion,i)}else{const i=n.versionColumn.getEntityValue(t);if(i!==this.expressionMap.lockVersion)throw new dN(n.name,this.expressionMap.lockVersion,i)}}return t===void 0?null:t}async getOneOrFail(){const e=await this.getOne();if(!e)throw new tne(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new up;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new up;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new up;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new up;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;let i=this.lazyCount(n);if(i===void 0){const o=this.expressionMap.cacheId;o&&(this.expressionMap.cacheId=`${o}-count`),i=await this.executeCountQuery(e)}const a=[n.entities,i];return t&&await e.commitTransaction(),a}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}lazyCount(e){const t=this.expressionMap.limit!==void 0&&this.expressionMap.limit!==null;if(this.expressionMap.joinAttributes.length>0&&t)return;const n=this.expressionMap.take!==void 0&&this.expressionMap.take!==null,i=t?this.expressionMap.limit:n?this.expressionMap.take:void 0;if(i!==void 0&&e.entities.length===i)return;const a=this.expressionMap.skip!==void 0&&this.expressionMap.skip!==null&&this.expressionMap.skip>0,o=this.expressionMap.offset!==void 0&&this.expressionMap.offset!==null&&this.expressionMap.offset>0;if(e.entities.length===0&&(a||o))return;const s=o?this.expressionMap.offset:a?this.expressionMap.skip:0;return e.entities.length+s}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0);const a=()=>{if(n!==this.queryRunner)return n.release()},o=n.stream(e,t,a,a);return i&&await n.commitTransaction(),o}catch(a){if(i)try{await n.rollbackTransaction()}catch{}throw a}}cache(e,t){return typeof e=="boolean"?this.expressionMap.cache=e:typeof e=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):(typeof e=="string"||typeof e=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,i,a,o,s,c){a&&this.setParameters(a);const l=new YU(this.connection,this.expressionMap);l.direction=e,l.mapAsEntity=c,l.mapToProperty=o,l.isMappingMany=s,l.entityOrProperty=t,l.condition=i,this.expressionMap.joinAttributes.push(l);const d=l.metadata;if(d){if(d.deleteDateColumn&&!this.expressionMap.withDeleted){const h=`${n}.${d.deleteDateColumn.propertyName} IS NULL`;l.condition=l.condition?` ${l.condition} AND ${h}`:`${h}`}l.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:d}),l.relation&&l.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:l.junctionAlias,metadata:l.relation.junctionEntityMetadata})}else{let h="";if(typeof t=="function"){const m=t(this.subQuery());this.setParameters(m.getParameters()),h=m.getQuery()}else h=t;const y=typeof t=="function"||t.substr(0,1)==="("&&t.substr(-1)===")";l.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:y===!1?t:void 0,subQuery:y===!0?h:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new Je("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const s=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,s)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,s))}this.expressionMap.joinAttributes.forEach(s=>{if(s.metadata)e.push(...this.buildEscapedEntityColumnSelects(s.alias.name,s.metadata)),t.push(...this.findEntityColumnSelects(s.alias.name,s.metadata));else if(this.expressionMap.selects.some(l=>l.selection===s.alias.name)){e.push({selection:this.escape(s.alias.name)+".*"});const l=this.expressionMap.selects.find(d=>d.selection===s.alias.name);t.push(l)}}),this.expressionMap.selects.filter(s=>t.indexOf(s)===-1).forEach(s=>e.push({selection:this.replacePropertyNames(s.selection),aliasName:s.aliasName})),e.length===0&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&at.isMySQLFamily(this.connection.driver)&&(n=` USE INDEX (${this.expressionMap.useIndex})`);const i=this.expressionMap.aliases.filter(s=>s.type==="from"&&(s.tablePath||s.subQuery)).map(s=>s.subQuery?s.subQuery+" "+this.escape(s.name):this.getTableName(s.tablePath)+" "+this.escape(s.name)),a=this.createSelectDistinctExpression(),o=e.map(s=>s.selection+(s.aliasName?" AS "+this.escape(s.aliasName):"")).join(", ");return a+o+" FROM "+i.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:i}=this.connection;let a="SELECT ";return n>0&&at.isMySQLFamily(i)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),at.isPostgresFamily(i)&&t.length>0?a=`SELECT DISTINCT ON (${t.map(s=>this.replacePropertyNames(s)).join(", ")}) `:e&&(a="SELECT DISTINCT "),a}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,i=t.tablePath,a=t.alias.name;let o=t.condition?" AND ("+t.condition+")":"";const s=t.parentAlias;if(!s||!n){const c=t.alias.subQuery?t.alias.subQuery:this.getTableName(i);return" "+t.direction+" JOIN "+c+" "+this.escape(a)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const c=n.joinColumns.map(l=>a+"."+l.referencedColumn.propertyPath+"="+s+"."+n.propertyPath+"."+l.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(a)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+o)}else if(n.isOneToMany||n.isOneToOneNotOwner){const c=n.inverseRelation.joinColumns.map(l=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(o+=" AND "+a+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),a+"."+n.inverseRelation.propertyPath+"."+l.referencedColumn.propertyPath+"="+s+"."+l.referencedColumn.propertyPath)).join(" AND ");if(!c)throw new Je(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(a)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+o)}else{const c=n.junctionEntityMetadata.tablePath,l=t.junctionAlias;let d="",h="";return n.isOwning?(d=n.joinColumns.map(y=>l+"."+y.propertyPath+"="+s+"."+y.referencedColumn.propertyPath).join(" AND "),h=n.inverseJoinColumns.map(y=>a+"."+y.referencedColumn.propertyPath+"="+l+"."+y.propertyPath).join(" AND ")):(d=n.inverseRelation.inverseJoinColumns.map(y=>l+"."+y.propertyPath+"="+s+"."+y.referencedColumn.propertyPath).join(" AND "),h=n.inverseRelation.joinColumns.map(y=>a+"."+y.referencedColumn.propertyPath+"="+l+"."+y.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(c)+" "+this.escape(l)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(d)+" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(a)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(h+o)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length===0?"":" ORDER BY "+Object.keys(e).map(t=>{const n=typeof e[t]=="string"?e[t]:e[t].order+" "+e[t].nulls,i=this.expressionMap.selects.find(a=>a.selection===t);if(i&&!i.aliasName&&t.indexOf(".")!==-1){const a=t.split("."),o=a[0],s=a.slice(1).join("."),c=this.expressionMap.aliases.find(l=>l.name===o);if(c){const l=c.metadata.findColumnWithPropertyPath(s);if(l){const d=at.buildAlias(this.connection.driver,void 0,o,l.databaseName);return this.escape(d)+" "+n}}}return this.replacePropertyNames(t)+" "+n}).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;e===void 0&&t===void 0&&this.expressionMap.joinAttributes.length===0&&(e=this.expressionMap.skip,t=this.expressionMap.take);const n=t!=null,i=e!=null;if(this.connection.driver.options.type==="mssql"){let a="";if((n||i)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(a=" ORDER BY (SELECT NULL)"),n&&i)return a+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(n)return a+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(i)return a+" OFFSET "+e+" ROWS"}else if(at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&i)return" LIMIT "+t+" OFFSET "+e;if(n)return" LIMIT "+t;if(i)throw new une}else if(at.isSQLiteFamily(this.connection.driver)){if(n&&i)return" LIMIT "+t+" OFFSET "+e;if(n)return" LIMIT "+t;if(i)return" LIMIT -1 OFFSET "+e}else if(this.connection.driver.options.type==="oracle"){if(n&&i)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(n)return" FETCH NEXT "+t+" ROWS ONLY";if(i)return" OFFSET "+e+" ROWS"}else{if(n&&i)return" LIMIT "+t+" OFFSET "+e;if(n)return" LIMIT "+t;if(i)return" OFFSET "+e}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!(at.isPostgresFamily(e)||e.options.type==="cockroachdb"))throw new Je("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new Je("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch(this.expressionMap.onLocked==="nowait"?n=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(e.options.type==="mysql"||e.options.type==="aurora-mysql")return at.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if(e.options.type==="mariadb")return" LOCK IN SHARE MODE";if(at.isPostgresFamily(e))return" FOR SHARE"+t+n;if(e.options.type==="oracle")return" FOR UPDATE";if(e.options.type==="mssql")return"";throw new Gf;case"pessimistic_write":if(at.isMySQLFamily(e)||e.options.type==="aurora-mysql"||e.options.type==="oracle")return" FOR UPDATE"+n;if(at.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+n;if(e.options.type==="mssql")return"";throw new Gf;case"pessimistic_partial_write":if(at.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(at.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new Gf;case"pessimistic_write_or_fail":if(at.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+" NOWAIT";if(at.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new Gf;case"for_no_key_update":if(at.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+t+n;throw new Gf;case"for_key_share":if(at.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new Gf;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map((t,n)=>{switch(t.type){case"and":return(n>0?"AND ":"")+this.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+this.replacePropertyNames(t.condition);default:return this.replacePropertyNames(t.condition)}}).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some(l=>l.selection===e),i=[];if(n&&i.push(...t.columns.filter(l=>l.isSelect===!0)),i.push(...t.columns.filter(l=>this.expressionMap.selects.some(d=>d.selection===e+"."+l.propertyPath))),i.length===0)return[];const a=this.expressionMap.queryEntity?t.primaryColumns.filter(l=>i.indexOf(l)===-1):[],o=[...i,...a],s=[],c=this.escape(e);return o.forEach(l=>{let d=c+"."+this.escape(l.databaseName);l.isVirtualProperty&&l.query&&(d=`(${l.query(c)})`),this.connection.driver.spatialTypes.indexOf(l.type)!==-1&&((at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(d=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${d})`),at.isPostgresFamily(this.connection.driver)&&(l.precision?d=`ST_AsGeoJSON(${d}, ${l.precision})::json`:d=`ST_AsGeoJSON(${d})::json`),this.connection.driver.options.type==="mssql"&&(d=`${d}.ToString()`));const h=this.expressionMap.selects.filter(y=>y.selection===e+"."+l.propertyPath);h.length?h.forEach(y=>{s.push({selection:d,aliasName:y.aliasName?y.aliasName:at.buildAlias(this.connection.driver,void 0,e,l.databaseName),virtual:y.virtual})}):s.push({selection:d,aliasName:at.buildAlias(this.connection.driver,void 0,e,l.databaseName),virtual:n})}),s}findEntityColumnSelects(e,t){return this.expressionMap.selects.filter(n=>n.selection===e||t.columns.some(i=>n.selection===e+"."+i.propertyPath))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,i=this.escape(e);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||at.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(", ")+"))";if(at.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const a=n.map(o=>`${i}.${this.escape(o.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${a}))`:`COUNT(DISTINCT(CONCAT(${a})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${i}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(o=>`CAST(${i}.${this.escape(o.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return!n||!n[0]||!n[0].cnt?0:parseInt(n[0].cnt)}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?Ht.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?Ht.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(e=>{e.select&&!e.selection?e.type==="inner"?this.innerJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):e.type==="inner"?this.innerJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map(t=>{const n=this.expressionMap.aliases.find(i=>i.metadata.tableNameWithoutPrefix===t);if(!n)throw new Je(`"${t}" is not part of this query`);return this.escape(n.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&zA.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new Je('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!e.isTransactionActive)throw new one;if(this.expressionMap.lockMode==="optimistic"){const c=this.expressionMap.mainAlias.metadata;if(!c.versionColumn&&!c.updateDateColumn)throw new ine(c.name)}const t=new Mne(this.connection,e,this.expressionMap.relationIdAttributes),n=new One(this.connection,e,this.expressionMap.relationCountAttributes);new Rne(this.expressionMap).transform(),new Cne(this.expressionMap).transform();let o=[],s=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[c,l]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),d=this.expressionMap.mainAlias.metadata,h=this.expressionMap.mainAlias.name,y=d.primaryColumns.map(v=>{const E=this.escape("distinctAlias"),x=this.escape(at.buildAlias(this.connection.driver,void 0,h,v.databaseName));l[x]||(l[x]="ASC");const D=at.buildAlias(this.connection.driver,void 0,"ids_"+h,v.databaseName);return`${E}.${x} AS ${this.escape(D)}`}),m=this.clone(),b=m.expressionMap.timeTravel;if(o=await new VA(this.connection,e).select(`DISTINCT ${y.join(", ")}`).addSelect(c).from(`(${m.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(b).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(l).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),o.length>0){let v="";const E={};if(d.hasMultiplePrimaryKeys)v=o.map((x,D)=>d.primaryColumns.map(N=>{const B=`orm_distinct_ids_${D}_${N.databaseName}`,k=at.buildAlias(this.connection.driver,void 0,"ids_"+h,N.databaseName);return E[B]=x[k],`${h}.${N.propertyPath}=:${B}`}).join(" AND ")).join(" OR ");else{const x=at.buildAlias(this.connection.driver,void 0,"ids_"+h,d.primaryColumns[0].databaseName),D=o.map(B=>B[x]);D.every(B=>typeof B=="number")?v=`${h}.${d.primaryColumns[0].propertyPath} IN (${D.join(", ")})`:(E.orm_distinct_ids=D,v=h+"."+d.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}o=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:v}).setParameters(E).loadRawResults(e)}}else o=await this.loadRawResults(e);if(o.length>0){const c=await t.load(o),l=await n.load(o);s=new Sne(this.expressionMap,this.connection.driver,c,l,this.queryRunner).transform(o,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,s)}if(this.expressionMap.relationLoadStrategy==="query"){const c=new Tne(this.connection,e);await Promise.all(this.relationMetadatas.map(async l=>{const d=l.inverseEntityMetadata.target,h=l.inverseEntityMetadata.targetName,y=Array.isArray(this.findOptions.select)?Ht.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,m=Array.isArray(this.findOptions.relations)?Ht.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,b=this.createQueryBuilder(e).select(h).from(d,h).setFindOptions({select:y?Ht.deepValue(y,l.propertyPath):void 0,order:this.findOptions.order?Ht.deepValue(this.findOptions.order,l.propertyPath):void 0,relations:m?Ht.deepValue(m,l.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(s.length>0){const v=await c.loadManyToManyRelationIdsAndGroup(l,s,void 0,b);s.forEach(E=>{const x=v.find(D=>D.entity===E);if(x){const D=x.related===void 0?null:x.related;l.setEntityValue(E,D)}})}}))}return{raw:o,entities:s}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map(a=>{if(a.indexOf(".")!==-1){const o=a.split("."),s=o[0],c=o.slice(1).join("."),d=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);return this.escape(e)+"."+this.escape(at.buildAlias(this.connection.driver,void 0,s,d.databaseName))}else return this.expressionMap.selects.find(o=>o.selection===a||o.aliasName===a)?this.escape(e)+"."+this.escape(a):""}).join(", "),i={};return Object.keys(t).forEach(a=>{if(a.indexOf(".")!==-1){const o=a.split("."),s=o[0],c=o.slice(1).join("."),d=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(c);i[this.escape(e)+"."+this.escape(at.buildAlias(this.connection.driver,void 0,s,d.databaseName))]=t[a]}else this.expressionMap.selects.find(o=>o.selection===a||o.aliasName===a)?i[this.escape(e)+"."+this.escape(a)]=t[a]:i[a]=t[a]}),[n,i]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),i=t+" -- PARAMETERS: "+JSON.stringify(n,(d,h)=>typeof h=="bigint"?h.toString():h),a=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let o;const s=a.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&s)try{if(o=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:i,duration:this.expressionMap.cacheDuration||a.duration||1e3},e),o&&!this.connection.queryResultCache.isExpired(o))return JSON.parse(o.result)}catch(d){if(!a.ignoreErrors)throw d;c=!0}const l=await e.query(t,n,!0);if(!c&&this.connection.queryResultCache&&s)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:i,time:Date.now(),duration:this.expressionMap.cacheDuration||a.duration||1e3,result:JSON.stringify(l.records)},o,e)}catch(d){if(!a.ignoreErrors)throw d}return l.records}mergeExpressionMap(e){return vr.assign(this.expressionMap,e),this}normalizeNumber(e){return typeof e=="number"||e===void 0||e===null?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(e,t,n,i){for(const a in e){if(e[a]===void 0||e[a]===!1)continue;const o=i?i+"."+a:a,s=t.findColumnWithPropertyPathStrict(o),c=t.findEmbeddedWithPropertyPath(o),l=t.findRelationWithPropertyPath(o);if(!c&&!s&&!l)throw new Is(o,t);s?this.selects.push(n+"."+o):c&&this.buildSelect(e[a],t,n,o)}}buildRelations(e,t,n,i,a){e&&Object.keys(e).forEach(o=>{const s=e[o],c=a?a+"."+o:o,l=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!l&&!d)throw new Is(c,n);if(l)this.buildRelations(s,typeof t=="object"?Ht.deepValue(t,l.propertyPath):void 0,n,i,c);else if(d){let h=i+"_"+c.replace(".","_");h=at.buildAlias(this.connection.driver,{joiner:"__"},i,h),(s===!0||typeof s=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(d):(this.joins.push({type:"left",select:!0,selection:t&&typeof t[o]=="object"?t[o]:void 0,alias:h,parentAlias:i,relationMetadata:d}),t&&typeof t[o]=="object"&&this.buildSelect(t[o],d.inverseEntityMetadata,h))),typeof s=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(s,typeof t=="object"?Ht.deepValue(t,d.propertyPath):void 0,d.inverseEntityMetadata,h,void 0)}})}buildEagerRelations(e,t,n,i,a){e&&Object.keys(e).forEach(o=>{const s=e[o],c=a?a+"."+o:o,l=n.findEmbeddedWithPropertyPath(c),d=n.findRelationWithPropertyPath(c);if(!l&&!d)throw new Is(c,n);if(l)this.buildEagerRelations(s,typeof t=="object"?Ht.deepValue(t,l.propertyPath):void 0,n,i,c);else if(d){let h=i+"_"+c.replace(".","_");h=at.buildAlias(this.connection.driver,{joiner:"__"},i,h),(s===!0||typeof s=="object")&&d.inverseEntityMetadata.eagerRelations.forEach(y=>{let m=h+"_"+y.propertyPath.replace(".","_");m=at.buildAlias(this.connection.driver,{joiner:"__"},h,m),this.joins.find(v=>v.alias===m)||this.joins.push({type:"left",select:!0,alias:m,parentAlias:h,selection:void 0,relationMetadata:y}),t&&typeof t[o]=="object"&&this.buildSelect(t[o],d.inverseEntityMetadata,h)}),typeof s=="object"&&this.buildEagerRelations(s,typeof t=="object"?Ht.deepValue(t,d.propertyPath):void 0,d.inverseEntityMetadata,h,void 0)}})}buildOrder(e,t,n,i){for(const a in e){if(e[a]===void 0)continue;const o=i?i+"."+a:a,s=t.findColumnWithPropertyPathStrict(o),c=t.findEmbeddedWithPropertyPath(o),l=t.findRelationWithPropertyPath(o);if(!c&&!s&&!l)throw new Is(o,t);if(s){let d=typeof e[a]=="object"?e[a].direction:e[a];d=d==="DESC"||d==="desc"||d===-1?"DESC":"ASC";let h=typeof e[a]=="object"?e[a].nulls:void 0;h=h?.toLowerCase()==="first"?"NULLS FIRST":h?.toLowerCase()==="last"?"NULLS LAST":void 0;const y=`${n}.${o}`;this.addOrderBy(y,d,h)}else if(c)this.buildOrder(e[a],t,n,o);else if(l){let d=n+"_"+o.replace(".","_");d=at.buildAlias(this.connection.driver,{joiner:"__"},n,d),this.joins.find(y=>y.alias===d)||this.joins.push({type:"left",select:!1,alias:d,parentAlias:n,selection:void 0,relationMetadata:l}),this.buildOrder(e[a],l.inverseEntityMetadata,d)}}}buildWhere(e,t,n,i){let a="";if(Array.isArray(e))e.length&&(a=e.map(o=>this.buildWhere(o,t,n,i)).filter(o=>!!o).map(o=>"("+o+")").join(" OR "));else{const o=[];for(const s in e){let c=e[s];const l=i?i+"."+s:s,d=t.findColumnWithPropertyPathStrict(l),h=t.findEmbeddedWithPropertyPath(l),y=t.findRelationWithPropertyPath(l);if(!h&&!d&&!y)throw new Is(l,t);if(c===void 0){if((this.connection.options.invalidWhereValuesBehavior?.undefined||"ignore")==="throw")throw new Je(`Undefined value encountered in property '${n}.${s}' of a where condition. Set 'invalidWhereValuesBehavior.undefined' to 'ignore' in connection options to skip properties with undefined values.`);continue}if(c===null){const m=this.connection.options.invalidWhereValuesBehavior?.null||"ignore";if(m==="ignore")continue;if(m==="throw")throw new Je(`Null value encountered in property '${n}.${s}' of a where condition. To match with SQL NULL, the IsNull() operator must be used. Set 'invalidWhereValuesBehavior.null' to 'ignore' or 'sql-null' in connection options to skip or handle null values.`)}if(d){let m=`${n}.${l}`;if(d.isVirtualProperty&&d.query&&(m=`(${d.query(this.escape(n))})`),c===null){o.push(`${m} IS NULL`);continue}hr.isEqualOperator(e[s])&&(c=e[s].value),d.transformer&&(c instanceof J0?c.transformValue(d.transformer):c=u8.transformTo(d.transformer,c)),this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValues(d,c)),o.push(this.createWhereConditionExpression(this.getWherePredicateCondition(m,c)))}else if(h){const m=this.buildWhere(e[s],t,n,l);m&&o.push(m)}else if(y){if(e[s]===null){const m=this.connection.options.invalidWhereValuesBehavior?.null||"ignore";if(m==="sql-null")o.push(`${n}.${l} IS NULL`);else if(m==="throw")throw new Je(`Null value encountered in property '${n}.${s}' of a where condition. Set 'invalidWhereValuesBehavior.null' to 'ignore' or 'sql-null' in connection options to skip or handle null values.`);continue}if(typeof e[s]=="object"&&Object.keys(e[s]).every(b=>e[s][b]===void 0))continue;if(hr.isFindOperator(e[s]))if(e[s].type==="moreThan"||e[s].type==="lessThan"||e[s].type==="moreThanOrEqual"||e[s].type==="lessThanOrEqual"){let m="";e[s].type==="moreThan"?m=">":e[s].type==="lessThan"?m="<":e[s].type==="moreThanOrEqual"?m=">=":e[s].type==="lessThanOrEqual"&&(m="<=");const b=this.subQuery();if(y.isManyToManyOwner)b.select("COUNT(*)").from(y.joinTableName,y.joinTableName).where(y.joinColumns.map(v=>`${y.joinTableName}.${v.propertyName} = ${n}.${v.referencedColumn.propertyName}`).join(" AND "));else if(y.isManyToManyNotOwner)b.select("COUNT(*)").from(y.inverseRelation.joinTableName,y.inverseRelation.joinTableName).where(y.inverseRelation.inverseJoinColumns.map(v=>`${y.inverseRelation.joinTableName}.${v.propertyName} = ${n}.${v.referencedColumn.propertyName}`).join(" AND "));else if(y.isOneToMany)b.select("COUNT(*)").from(y.inverseEntityMetadata.target,y.inverseEntityMetadata.tableName).where(y.inverseRelation.joinColumns.map(v=>`${y.inverseEntityMetadata.tableName}.${v.propertyName} = ${n}.${v.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(b.getSql()+" "+m+" "+parseInt(e[s].value))}else if(y.isManyToOne||y.isOneToOne&&y.isOneToOneOwner){const m=`${n}.${l}`;o.push(this.createWhereConditionExpression(this.getWherePredicateCondition(m,e[s])))}else throw new Error("This relation isn't supported by given find operator");else{let m=n+"_"+y.propertyPath.replace(".","_");m=at.buildAlias(this.connection.driver,{joiner:"__"},n,m),this.joins.find(E=>E.alias===m)||this.joins.push({type:"left",select:!1,selection:void 0,alias:m,parentAlias:n,relationMetadata:y});const v=this.buildWhere(e[s],y.inverseEntityMetadata,m);v&&o.push(v)}}}a=o.length?"("+o.join(") AND (")+")":o.join(" AND ")}return a.length?"("+a+")":a}}class QU{constructor(){this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}}class Nne extends Fr{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createUpdateExpression();return e+=this.createCteExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const n=new FA(e,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=n.getSoftDeletionReturningColumns());const[i,a]=this.getQueryAndParameters(),o=await e.query(i,a,!0),s=QU.from(o);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await n.update(s,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),t&&await e.commitTransaction(),s}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}from(e,t){e=hr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Ob;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new Je(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new Je("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!e)throw new Je(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!e.deleteDateColumn)throw new nne(e);const t=[];switch(this.expressionMap.queryType){case"soft-delete":t.push(this.escape(e.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":t.push(this.escape(e.deleteDateColumn.databaseName)+" = NULL");break;default:throw new Je('The queryType must be "soft-delete" or "restore"')}if(e.versionColumn&&t.push(this.escape(e.versionColumn.databaseName)+" = "+this.escape(e.versionColumn.databaseName)+" + 1"),e.updateDateColumn&&t.push(this.escape(e.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),t.length<=0)throw new o8;const n=this.createWhereExpression(),i=this.createReturningExpression("update");return i===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")} OUTPUT ${i}${n}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n} RETURNING ${i}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(at.isMySQLFamily(this.connection.driver))return" LIMIT "+e;throw new WU}return""}}class Bne extends Fr{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createUpdateExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let n=null,i=null;const a=new FA(e,this.expressionMap),o=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const y of this.expressionMap.returning)o.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(y));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),o.push(...this.expressionMap.extraReturningColumns.filter(y=>!o.includes(y)))),o.length>0&&this.connection.driver.options.type==="mssql"&&(n=this.connection.driver.buildTableVariableDeclaration("@OutputTable",o),i="SELECT * FROM @OutputTable");const[s,c]=this.getQueryAndParameters(),l=[n,s,i],d=await e.query(l.filter(y=>y!=null).join(`;

`),c,!0),h=QU.from(d);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(h,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),t&&await e.commitTransaction(),h}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}set(e){return this.expressionMap.valuesSet=e,this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new Ob;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new Je(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new Je("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.getValueSet(),t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,n={};for(const c in e)e[c]!==void 0&&(n[c]=e[c]);const i=[],a=[];if(t?(this.createPropertyPath(t,n).forEach(c=>{const l=t.findColumnsWithPropertyPath(c);if(l.length<=0)throw new Is(c,t);l.forEach(d=>{if(!d.isUpdate||a.includes(d))return;a.push(d);let h=d.getEntityValue(n);if(d.referencedColumn&&typeof h=="object"&&!(h instanceof Date)&&h!==null&&!Buffer.isBuffer(h)?h=d.referencedColumn.getEntityValue(h):typeof h!="function"&&(h=this.connection.driver.preparePersistentValue(h,d)),typeof h=="function")i.push(this.escape(d.databaseName)+" = "+h());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&h===null)i.push(this.escape(d.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(h=this.connection.driver.parametrizeValue(d,h));const y=this.createParameter(h);let m=null;if((at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(d.type)!==-1){const v=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";d.srid!=null?m=`${v}(${y}, ${d.srid})`:m=`${v}(${y})`}else at.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(d.type)!==-1?d.srid!=null?m=`ST_SetSRID(ST_GeomFromGeoJSON(${y}), ${d.srid})::${d.type}`:m=`ST_GeomFromGeoJSON(${y})::${d.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(d.type)!==-1?m=d.type+"::STGeomFromText("+y+", "+(d.srid||"0")+")":m=y;i.push(this.escape(d.databaseName)+" = "+m)}})}),(i.length>0||Object.keys(n).length===0)&&(t.versionColumn&&a.indexOf(t.versionColumn)===-1&&i.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&a.indexOf(t.updateDateColumn)===-1&&i.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(n).map(c=>{const l=n[c];if(typeof l=="function")i.push(this.escape(c)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)i.push(this.escape(c)+" = NULL");else{const d=this.createParameter(l);i.push(this.escape(c)+" = "+d)}}),i.length<=0)throw new o8;const o=this.createWhereExpression(),s=this.createReturningExpression("update");return s===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${o}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")} OUTPUT ${s}${o}`:this.connection.driver.options.type==="spanner"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${o} THEN RETURN ${s}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${o} RETURNING ${s}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(at.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+e;throw new WU}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new o8}}function Ine(){Fr.registerQueryBuilderClass("DeleteQueryBuilder",r=>new mne(r)),Fr.registerQueryBuilderClass("InsertQueryBuilder",r=>new Ene(r)),Fr.registerQueryBuilderClass("RelationQueryBuilder",r=>new Ane(r)),Fr.registerQueryBuilderClass("SelectQueryBuilder",r=>new VA(r)),Fr.registerQueryBuilderClass("SoftDeleteQueryBuilder",r=>new Nne(r)),Fr.registerQueryBuilderClass("UpdateQueryBuilder",r=>new Bne(r))}function wN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function _N(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wN(Object(t),!0).forEach(function(n){Dne(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Dne(r,e,t){return e=Pne(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Pne(r){var e=Une(r,"string");return typeof e=="symbol"?e:String(e)}function Une(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}JU({});function JU(r){return e.withOptions=t=>JU(_N(_N({},r),t)),e;function e(t,...n){const i=typeof t=="string"?[t]:t.raw,{alignValues:a=!1,escapeSpecialCharacters:o=Array.isArray(t),trimWhitespace:s=!0}=r;let c="";for(let h=0;h<i.length;h++){let y=i[h];if(o&&(y=y.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),c+=y,h<n.length){const m=a?kne(n[h],c):n[h];c+=m}}const l=c.split(`
`);let d=null;for(const h of l){const y=h.match(/^(\s+)\S+/);if(y){const m=y[1].length;d?d=Math.min(d,m):d=m}}if(d!==null){const h=d;c=l.map(y=>y[0]===" "||y[0]==="	"?y.slice(h):y).join(`
`)}return s&&(c=c.trim()),o&&(c=c.replace(/\\n/g,`
`)),typeof Bun<"u"&&(c=c.replace(/\\u(?:\{([\da-fA-F]{1,6})\}|([\da-fA-F]{4}))/g,(h,y,m)=>{var b;const v=(b=y??m)!==null&&b!==void 0?b:"";return String.fromCodePoint(parseInt(v,16))})),c}}function kne(r,e){if(typeof r!="string"||!r.includes(`
`))return r;const n=e.slice(e.lastIndexOf(`
`)+1).match(/^(\s+)/);if(n){const i=n[1];return r.replace(/\n/g,`
${i}`)}return r}var EN;(function(r){r.VIEW="VIEW",r.MATERIALIZED_VIEW="MATERIALIZED_VIEW",r.GENERATED_COLUMN="GENERATED_COLUMN"})(EN||(EN={}));class fa{}fa.AFTER_LOAD="after-load";fa.BEFORE_INSERT="before-insert";fa.AFTER_INSERT="after-insert";fa.BEFORE_UPDATE="before-update";fa.AFTER_UPDATE="after-update";fa.BEFORE_REMOVE="before-remove";fa.AFTER_REMOVE="after-remove";fa.BEFORE_SOFT_REMOVE="before-soft-remove";fa.AFTER_SOFT_REMOVE="after-soft-remove";fa.BEFORE_RECOVER="before-recover";fa.AFTER_RECOVER="after-recover";Ine();function Fi(){const r=GU.getGlobalVariable();return r.typeormMetadataArgsStorage||(r.typeormMetadataArgsStorage=new Xre),r.typeormMetadataArgsStorage}function bt(r,e){return function(t,n){let i;typeof r=="string"||typeof r=="function"?i=r:r&&(e=r,i=r.type),e||(e={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&a&&(i=a),!e.type&&i&&(e.type=i),e.type==="hstore"&&!e.hstoreType&&(e.hstoreType=a===Object?"object":"string"),typeof r=="function")Fi().embeddeds.push({target:t.constructor,propertyName:n,isArray:a===Array||e.array===!0,prefix:e.prefix!==void 0?e.prefix:void 0,type:r});else{if(!e.type)throw new ZU(t,n);e.unique===!0&&Fi().uniques.push({target:t.constructor,columns:[n]}),Fi().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&Fi().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}}function Yo(r,e){return function(t,n){let i;r===String||r===Boolean||r===Number?i=r:e=Object.assign({},r),e||(e={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&a&&(i=a),!e.type&&i&&(e.type=i),!e.type)throw new ZU(t,n);if(e.nullable)throw new rne(t,n);e.primary=!0,Fi().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&Fi().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}function HA(){return function(r,e){Fi().entityListeners.push({target:r.constructor,propertyName:e,type:fa.BEFORE_INSERT})}}function XU(){return function(r,e){Fi().entityListeners.push({target:r.constructor,propertyName:e,type:fa.BEFORE_UPDATE})}}function Cb(r){return function(e,t){r=r||{},Fi().joinTables.push({target:e.constructor,propertyName:t,name:r.name,joinColumns:r&&r.joinColumn?[r.joinColumn]:r.joinColumns,inverseJoinColumns:r&&r.inverseJoinColumn?[r.inverseJoinColumn]:r.inverseJoinColumns,schema:r&&r.schema?r.schema:void 0,database:r&&r.database?r.database:void 0,synchronize:!(r&&r.synchronize===!1)})}}function xc(r,e,t){let n;return vr.isObject(e)?t=e:n=e,function(i,a){t||(t={});let o=t.lazy===!0;if(!o&&Reflect&&Reflect.getMetadata){const s=Reflect.getMetadata("design:type",i,a);s&&typeof s.name=="string"&&s.name.toLowerCase()==="promise"&&(o=!0)}Fi().relations.push({target:i.constructor,propertyName:a,relationType:"many-to-many",isLazy:o,type:r,inverseSideProperty:n,options:t})}}function Js(r,e,t){let n;return vr.isObject(e)?t=e:n=e,function(i,a){t||(t={});let o=t&&t.lazy===!0;if(!o&&Reflect&&Reflect.getMetadata){const s=Reflect.getMetadata("design:type",i,a);s&&typeof s.name=="string"&&s.name.toLowerCase()==="promise"&&(o=!0)}Fi().relations.push({target:i.constructor,propertyName:a,relationType:"many-to-one",isLazy:o,type:r,inverseSideProperty:n,options:t})}}function Xs(r,e,t){return function(n,i){t||(t={});let a=t&&t.lazy===!0;if(!a&&Reflect&&Reflect.getMetadata){const o=Reflect.getMetadata("design:type",n,i);o&&typeof o.name=="string"&&o.name.toLowerCase()==="promise"&&(a=!0)}Fi().relations.push({target:n.constructor,propertyName:i,isLazy:a,relationType:"one-to-many",type:r,inverseSideProperty:e,options:t})}}function Qo(r,e){const t=(vr.isObject(r)?r:e)||{},n=typeof r=="string"?r:t.name;return function(i){Fi().tables.push({target:i,name:n,type:"regular",orderBy:t.orderBy?t.orderBy:void 0,engine:t.engine?t.engine:void 0,database:t.database?t.database:void 0,schema:t.schema?t.schema:void 0,synchronize:t.synchronize,withoutRowid:t.withoutRowid,comment:t.comment?t.comment:void 0})}}function qne(r,e,t){const n=typeof r=="string"?r:void 0,i=typeof r=="string"?e:r;let a=vr.isObject(r)&&!Array.isArray(r)?r:t;return a||(a=vr.isObject(e)&&!Array.isArray(e)?e:t),function(o,s){Fi().indices.push({target:s?o.constructor:o,name:n,columns:s?[s]:i,synchronize:!(a&&a.synchronize===!1),where:a?a.where:void 0,unique:!!(a&&a.unique),spatial:!!(a&&a.spatial),fulltext:!!(a&&a.fulltext),nullFiltered:!!(a&&a.nullFiltered),parser:a?a.parser:void 0,sparse:!!(a&&a.sparse),background:!!(a&&a.background),concurrent:!!(a&&a.concurrent),expireAfterSeconds:a?a.expireAfterSeconds:void 0})}}class Ac{hasId(){return this.constructor.getRepository().hasId(this)}save(e){return this.constructor.getRepository().save(this,e)}remove(e){return this.constructor.getRepository().remove(this,e)}softRemove(e){return this.constructor.getRepository().softRemove(this,e)}recover(e){return this.constructor.getRepository().recover(this,e)}async reload(){const e=this.constructor,t=e.getRepository().metadata.getEntityIdMap(this);if(!t)throw new Error("Entity doesn't have id-s set, cannot reload entity");const n=await e.getRepository().findOneByOrFail(t);vr.assign(this,n)}static useDataSource(e){this.dataSource=e}static getRepository(){const e=this.dataSource;if(!e)throw new Error("DataSource is not set for this entity.");return e.getRepository(this)}static get target(){return this.getRepository().target}static hasId(e){return this.getRepository().hasId(e)}static getId(e){return this.getRepository().getId(e)}static createQueryBuilder(e){return this.getRepository().createQueryBuilder(e)}static create(e){return this.getRepository().create(e)}static merge(e,...t){return this.getRepository().merge(e,...t)}static preload(e){return this.getRepository().preload(e)}static save(e,t){return this.getRepository().save(e,t)}static remove(e,t){return this.getRepository().remove(e,t)}static softRemove(e,t){return this.getRepository().softRemove(e,t)}static insert(e){return this.getRepository().insert(e)}static update(e,t){return this.getRepository().update(e,t)}static upsert(e,t){return this.getRepository().upsert(e,t)}static delete(e){return this.getRepository().delete(e)}static exists(e){return this.getRepository().exists(e)}static existsBy(e){return this.getRepository().existsBy(e)}static count(e){return this.getRepository().count(e)}static countBy(e){return this.getRepository().countBy(e)}static sum(e,t){return this.getRepository().sum(e,t)}static average(e,t){return this.getRepository().average(e,t)}static minimum(e,t){return this.getRepository().minimum(e,t)}static maximum(e,t){return this.getRepository().maximum(e,t)}static find(e){return this.getRepository().find(e)}static findBy(e){return this.getRepository().findBy(e)}static findAndCount(e){return this.getRepository().findAndCount(e)}static findAndCountBy(e){return this.getRepository().findAndCountBy(e)}static findByIds(e){return this.getRepository().findByIds(e)}static findOne(e){return this.getRepository().findOne(e)}static findOneBy(e){return this.getRepository().findOneBy(e)}static findOneById(e){return this.getRepository().findOneById(e)}static findOneOrFail(e){return this.getRepository().findOneOrFail(e)}static findOneByOrFail(e){return this.getRepository().findOneByOrFail(e)}static query(e,t){return this.getRepository().query(e,t)}static clear(){return this.getRepository().clear()}}var jl=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},th=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Gs=class extends Ac{kid;kms;type;publicKeyHex;meta;identifier};jl([Yo(),th("design:type",String)],Gs.prototype,"kid",void 0);jl([bt(),th("design:type",String)],Gs.prototype,"kms",void 0);jl([bt(),th("design:type",String)],Gs.prototype,"type",void 0);jl([bt(),th("design:type",String)],Gs.prototype,"publicKeyHex",void 0);jl([bt({type:"simple-json",nullable:!0,transformer:{to:r=>r,from:r=>r}}),th("design:type",Object)],Gs.prototype,"meta",void 0);jl([Js(r=>Jt,r=>r?.keys,{onDelete:"CASCADE"}),th("design:type",Object)],Gs.prototype,"identifier",void 0);Gs=jl([Qo("key")],Gs);var rh=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},X0=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let bc=class extends Ac{id;type;serviceEndpoint;description;identifier};rh([Yo(),X0("design:type",String)],bc.prototype,"id",void 0);rh([bt(),X0("design:type",String)],bc.prototype,"type",void 0);rh([bt(),X0("design:type",String)],bc.prototype,"serviceEndpoint",void 0);rh([bt({nullable:!0}),X0("design:type",String)],bc.prototype,"description",void 0);rh([Js(r=>Jt,r=>r?.services,{onDelete:"CASCADE"}),X0("design:type",Object)],bc.prototype,"identifier",void 0);bc=rh([Qo("service")],bc);var ja=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},ds=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Gn=class extends Ac{hash;issuer;subject;credential;issuanceDate;expirationDate;context;credentialType;type;value;isObj};ja([Yo(),ds("design:type",String)],Gn.prototype,"hash",void 0);ja([Js(r=>Jt,r=>r.issuedClaims,{eager:!0,onDelete:"CASCADE"}),ds("design:type",Object)],Gn.prototype,"issuer",void 0);ja([Js(r=>Jt,r=>r.receivedClaims,{eager:!0,nullable:!0}),ds("design:type",Object)],Gn.prototype,"subject",void 0);ja([Js(r=>gn,r=>r.claims,{onDelete:"CASCADE"}),ds("design:type",Object)],Gn.prototype,"credential",void 0);ja([bt(),ds("design:type",Date)],Gn.prototype,"issuanceDate",void 0);ja([bt({nullable:!0}),ds("design:type",Date)],Gn.prototype,"expirationDate",void 0);ja([bt("simple-array"),ds("design:type",Array)],Gn.prototype,"context",void 0);ja([bt("simple-array"),ds("design:type",Array)],Gn.prototype,"credentialType",void 0);ja([bt(),ds("design:type",String)],Gn.prototype,"type",void 0);ja([bt("text",{nullable:!0}),ds("design:type",Object)],Gn.prototype,"value",void 0);ja([bt(),ds("design:type",Boolean)],Gn.prototype,"isObj",void 0);Gn=ja([Qo("claim")],Gn);var da=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},la=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let gn=class extends Ac{hash;_raw;set raw(e){this._raw=e,this.hash=hA(e)}get raw(){return this._raw}issuer;subject;id;issuanceDate;expirationDate;context;type;claims;presentations;messages};da([Yo(),la("design:type",String)],gn.prototype,"hash",void 0);da([bt("simple-json"),la("design:type",Object),la("design:paramtypes",[Object])],gn.prototype,"raw",null);da([Js(r=>Jt,r=>r.issuedCredentials,{cascade:["insert"],eager:!0,onDelete:"CASCADE"}),la("design:type",Object)],gn.prototype,"issuer",void 0);da([Js(r=>Jt,r=>r?.receivedCredentials,{cascade:["insert"],eager:!0,nullable:!0}),la("design:type",Object)],gn.prototype,"subject",void 0);da([bt({nullable:!0}),la("design:type",String)],gn.prototype,"id",void 0);da([bt(),la("design:type",Date)],gn.prototype,"issuanceDate",void 0);da([bt({nullable:!0}),la("design:type",Date)],gn.prototype,"expirationDate",void 0);da([bt("simple-array"),la("design:type",Array)],gn.prototype,"context",void 0);da([bt("simple-array"),la("design:type",Array)],gn.prototype,"type",void 0);da([Xs(r=>Gn,r=>r.credential,{cascade:["insert"]}),la("design:type",Object)],gn.prototype,"claims",void 0);da([xc(r=>Wn,r=>r.credentials),la("design:type",Object)],gn.prototype,"presentations",void 0);da([xc(r=>Ar,r=>r.credentials),la("design:type",Object)],gn.prototype,"messages",void 0);gn=da([Qo("credential")],gn);var $a=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},ka=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Wn=class extends Ac{hash;_raw;set raw(e){this._raw=e,this.hash=hA(e)}get raw(){return this._raw}holder;verifier;id;issuanceDate;expirationDate;context;type;credentials;messages};$a([Yo(),ka("design:type",String)],Wn.prototype,"hash",void 0);$a([bt({type:"simple-json"}),ka("design:type",Object),ka("design:paramtypes",[Object])],Wn.prototype,"raw",null);$a([Js(r=>Jt,r=>r.issuedPresentations,{cascade:["insert"],eager:!0,onDelete:"CASCADE"}),ka("design:type",Object)],Wn.prototype,"holder",void 0);$a([xc(r=>Jt,r=>r?.receivedPresentations,{cascade:["insert"],eager:!0,nullable:!0}),Cb(),ka("design:type",Object)],Wn.prototype,"verifier",void 0);$a([bt({nullable:!0}),ka("design:type",String)],Wn.prototype,"id",void 0);$a([bt(),ka("design:type",Date)],Wn.prototype,"issuanceDate",void 0);$a([bt({nullable:!0}),ka("design:type",Date)],Wn.prototype,"expirationDate",void 0);$a([bt("simple-array"),ka("design:type",Array)],Wn.prototype,"context",void 0);$a([bt("simple-array"),ka("design:type",Array)],Wn.prototype,"type",void 0);$a([xc(r=>gn,r=>r.presentations,{cascade:!0}),Cb(),ka("design:type",Object)],Wn.prototype,"credentials",void 0);$a([xc(r=>Ar,r=>r.presentations),ka("design:type",Object)],Wn.prototype,"messages",void 0);Wn=$a([Qo("presentation")],Wn);var ln=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},xr=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Ar=class extends Ac{setId(){this.id||(this.id=hA(this.raw||$re()))}id;setSaveDate(){this.saveDate=new Date,this.updateDate=new Date}setUpdateDate(){this.updateDate=new Date}saveDate;updateDate;createdAt;expiresAt;threadId;type;raw;data;replyTo;replyUrl;from;to;metaData;presentations;credentials};ln([HA(),xr("design:type",Function),xr("design:paramtypes",[]),xr("design:returntype",void 0)],Ar.prototype,"setId",null);ln([Yo(),xr("design:type",String)],Ar.prototype,"id",void 0);ln([HA(),xr("design:type",Function),xr("design:paramtypes",[]),xr("design:returntype",void 0)],Ar.prototype,"setSaveDate",null);ln([XU(),xr("design:type",Function),xr("design:paramtypes",[]),xr("design:returntype",void 0)],Ar.prototype,"setUpdateDate",null);ln([bt({select:!1}),xr("design:type",Date)],Ar.prototype,"saveDate",void 0);ln([bt({select:!1}),xr("design:type",Date)],Ar.prototype,"updateDate",void 0);ln([bt({nullable:!0}),xr("design:type",Date)],Ar.prototype,"createdAt",void 0);ln([bt({nullable:!0}),xr("design:type",Date)],Ar.prototype,"expiresAt",void 0);ln([bt({nullable:!0}),xr("design:type",String)],Ar.prototype,"threadId",void 0);ln([bt(),xr("design:type",String)],Ar.prototype,"type",void 0);ln([bt({nullable:!0}),xr("design:type",String)],Ar.prototype,"raw",void 0);ln([bt("simple-json",{nullable:!0}),xr("design:type",Object)],Ar.prototype,"data",void 0);ln([bt("simple-array",{nullable:!0}),xr("design:type",Array)],Ar.prototype,"replyTo",void 0);ln([bt({nullable:!0}),xr("design:type",String)],Ar.prototype,"replyUrl",void 0);ln([Js(r=>Jt,r=>r.sentMessages,{nullable:!0,cascade:["insert"],eager:!0,onDelete:"CASCADE"}),xr("design:type",Object)],Ar.prototype,"from",void 0);ln([Js(r=>Jt,r=>r.receivedMessages,{nullable:!0,cascade:["insert"],eager:!0,onDelete:"CASCADE"}),xr("design:type",Object)],Ar.prototype,"to",void 0);ln([bt("simple-json",{nullable:!0}),xr("design:type",Object)],Ar.prototype,"metaData",void 0);ln([xc(r=>Wn,r=>r.messages,{cascade:!0}),Cb(),xr("design:type",Object)],Ar.prototype,"presentations",void 0);ln([xc(r=>gn,r=>r.messages,{cascade:!0}),Cb(),xr("design:type",Object)],Ar.prototype,"credentials",void 0);Ar=ln([Qo("message")],Ar);var vn=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},zr=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Jt=class extends Ac{did;provider;alias;setSaveDate(){this.saveDate=new Date,this.updateDate=new Date}setUpdateDate(){this.updateDate=new Date}saveDate;updateDate;controllerKeyId;keys;services;sentMessages;receivedMessages;issuedPresentations;receivedPresentations;issuedCredentials;receivedCredentials;issuedClaims;receivedClaims;async getLatestClaimValue(e,t){return(await(await e).getRepository(Gn).findOne({where:{...t,subject:this.did},order:{issuanceDate:"DESC"}}))?.value}shortDid(){return`${this.did.slice(0,15)}...${this.did.slice(-4)}`}};vn([Yo(),zr("design:type",String)],Jt.prototype,"did",void 0);vn([bt({nullable:!0}),zr("design:type",String)],Jt.prototype,"provider",void 0);vn([bt({nullable:!0}),zr("design:type",String)],Jt.prototype,"alias",void 0);vn([HA(),zr("design:type",Function),zr("design:paramtypes",[]),zr("design:returntype",void 0)],Jt.prototype,"setSaveDate",null);vn([XU(),zr("design:type",Function),zr("design:paramtypes",[]),zr("design:returntype",void 0)],Jt.prototype,"setUpdateDate",null);vn([bt({select:!1}),zr("design:type",Date)],Jt.prototype,"saveDate",void 0);vn([bt({select:!1}),zr("design:type",Date)],Jt.prototype,"updateDate",void 0);vn([bt({nullable:!0}),zr("design:type",String)],Jt.prototype,"controllerKeyId",void 0);vn([Xs(r=>Gs,r=>r.identifier),zr("design:type",Array)],Jt.prototype,"keys",void 0);vn([Xs(r=>bc,r=>r.identifier,{cascade:!0}),zr("design:type",Array)],Jt.prototype,"services",void 0);vn([Xs(r=>Ar,r=>r.from),zr("design:type",Array)],Jt.prototype,"sentMessages",void 0);vn([Xs(r=>Ar,r=>r.to),zr("design:type",Array)],Jt.prototype,"receivedMessages",void 0);vn([Xs(r=>Wn,r=>r.holder),zr("design:type",Array)],Jt.prototype,"issuedPresentations",void 0);vn([xc(r=>Wn,r=>r.verifier),zr("design:type",Array)],Jt.prototype,"receivedPresentations",void 0);vn([Xs(r=>gn,r=>r.issuer),zr("design:type",Array)],Jt.prototype,"issuedCredentials",void 0);vn([Xs(r=>gn,r=>r.subject),zr("design:type",Array)],Jt.prototype,"receivedCredentials",void 0);vn([Xs(r=>Gn,r=>r.issuer),zr("design:type",Array)],Jt.prototype,"issuedClaims",void 0);vn([Xs(r=>Gn,r=>r.subject),zr("design:type",Array)],Jt.prototype,"receivedClaims",void 0);Jt=vn([Qo("identifier"),qne(["alias","provider"],{unique:!0})],Jt);qt("veramo:typeorm:identifier-store");qt("veramo:typeorm:key-store");var Nb=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},KA=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let y0=class extends Ac{alias;type;privateKeyHex};Nb([Yo(),KA("design:type",String)],y0.prototype,"alias",void 0);Nb([bt(),KA("design:type",String)],y0.prototype,"type",void 0);Nb([bt(),KA("design:type",String)],y0.prototype,"privateKeyHex",void 0);y0=Nb([Qo("private-key")],y0);qt("veramo:typeorm:key-store");var GA=function(r,e,t,n){var i=arguments.length,a=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(o=r[s])&&(a=(i<3?o(a):i>3?o(e,t,a):o(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},ek=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Uv=class extends Gs{kid;privateKeyHex};GA([Yo(),ek("design:type",String)],Uv.prototype,"kid",void 0);GA([bt({nullable:!0}),ek("design:type",String)],Uv.prototype,"privateKeyHex",void 0);Uv=GA([Qo("key")],Uv);qt("veramo:data-store:initial-migration");qt("veramo:data-store:migrate-private-keys");qt("veramo:data-store:migrate-presentation-issuance-date");var Lne={};function xN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function tk(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=(function(i,a){if(i){if(typeof i=="string")return xN(i,a);var o={}.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?xN(i,a):void 0}})(r))||e){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zi(){return zi=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},zi.apply(null,arguments)}function c8(r){return c8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c8(r)}function tr(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,m0(r,e)}function rk(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rk=function(){return!!r})()}function m0(r,e){return m0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},m0(r,e)}function qd(r){var e=typeof Map=="function"?new Map:void 0;return qd=function(t){if(t===null||!(function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}})(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return(function(i,a,o){if(rk())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,a);var c=new(i.bind.apply(i,s));return o&&m0(c,o.prototype),c})(t,arguments,c8(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m0(n,t)},qd(r)}const nk=(r,e,t=[])=>{const n=Object.getOwnPropertyDescriptors(e);for(let i of t)delete n[i];Object.defineProperties(r,n)},Cp=(r,e=[r])=>{const t=Object.getPrototypeOf(r);return t===null?e:Cp(t,[...e,t])},AN=(r,e,t=[])=>{var n;const i=(n=((...s)=>{if(s.length===0)return;let c;const l=s.map(d=>Cp(d));for(;l.every(d=>d.length>0);){const d=l.map(y=>y.pop()),h=d[0];if(!d.every(y=>y===h))break;c=h}return c})(...r))!==null&&n!==void 0?n:Object.prototype,a=Object.create(i),o=Cp(i);for(let s of r){let c=Cp(s);for(let l=c.length-1;l>=0;l--){let d=c[l];o.indexOf(d)===-1&&(nk(a,d,["constructor",...t]),o.push(d))}}return a.constructor=e,a},l8=r=>r.filter((e,t)=>r.indexOf(e)==t),ik=new WeakMap,jne=r=>ik.get(r),SN=(r,e)=>{var t,n;const i=l8([...Object.getOwnPropertyNames(r),...Object.getOwnPropertyNames(e)]),a={};for(let o of i)a[o]=l8([...(t=r?.[o])!==null&&t!==void 0?t:[],...(n=e?.[o])!==null&&n!==void 0?n:[]]);return a},MN=(r,e)=>{var t,n,i,a;return{property:SN((t=r?.property)!==null&&t!==void 0?t:{},(n=e?.property)!==null&&n!==void 0?n:{}),method:SN((i=r?.method)!==null&&i!==void 0?i:{},(a=e?.method)!==null&&a!==void 0?a:{})}},$ne=new Map,TN=(r,e)=>{const t=r.property,n=r.method;if(t)for(let i in t)for(let a of t[i])a(e,i);if(n)for(let i in n)for(let a of n[i])a(e,i,Object.getOwnPropertyDescriptor(e,i))};var Ge,ct,Fne=(function(r){function e(t){var n;return(n=r.call(this,"HTTP Error")||this).path=void 0,n.response=void 0,n.code=void 0,n.line=void 0,n.column=void 0,n.sourceURL=void 0,n.name=n.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n.stack=new Error().stack,n.path=t.path,n.response=t.response,t.line&&(n.line=t.line),t.column&&(n.line=t.column),t.sourceURL&&(n.sourceURL=t.sourceURL),t.code&&(n.code=t.code),n}return tr(e,r),e})(qd(Error)),RN=(function(r){function e(t){var n;return(n=r.call(this,"Communication Error")||this).exception=void 0,n.name="CommunicationError",n.message=t.exception.message,n.exception=t.exception,Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error().stack,n}return tr(e,r),e})(qd(Error)),kv=(function(r){function e(t){var n;return(n=r.call(this,t)||this).code=void 0,n.name=n.constructor.name,Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error().stack,n}return tr(e,r),e})(qd(Error));function WA(r,e){var t=new kv(r);return e&&((t=new kv(e+": "+r)).code=e),t}function ot(r,e){throw WA(r,e)}function Os(r,e){return Array.isArray(e)?e.some(function(t){return Os(r,t)}):r instanceof Error&&e===zne(r)}function zne(r){if(r instanceof kv)return r.code;if(r!=null&&r.code){if(Object.values(Ge).includes(r.code))return Ge.from(r.code)}else if(r instanceof Error){var e=r.message.split(":")[0];if(e&&e.length>0&&Object.values(Ge).includes(e))return Ge.from(e)}}(function(r){r.AccountDoesntExist="AccountDoesntExist",r.AccountNotFound="AccountNotFound",r.AccountServiceError="AccountServiceError",r.CommunicationNotConnected="CommunicationNotConnected",r.CommunicationNotLoggedIn="CommunicationNotLoggedIn",r.CommunicationTimeout="CommunicationTimeout",r.CouldntCreateApi="CouldntCreateApi",r.DataQueryNoRowDataFound="DataQueryNoRowDataFound",r.InvalidLinkAuthRequest="InvalidLinkAuthRequest",r.InvalidChallenge="InvalidChallenge",r.InvalidData="InvalidData",r.InvalidKey="InvalidKey",r.InvalidArgumentType="InvalidArgumentType",r.InvalidKeyLevel="InvalidKeyLevel",r.InvalidQrCode="InvalidQrCode",r.InvalidUsername="InvalidUsername",r.InvalidRequestType="InvalidRequestType",r.InvalidRequestResponseType="InvalidRequestResponseType",r.JwtNotValid="JwtNotValid",r.KeyNotFound="KeyNotFound",r.LinkAuthFailed="LinkAuthFailed",r.MessageSendError="MessageSendError",r.MissingChallenge="MissingChallenge",r.MissingParams="MissingParams",r.OriginNotFound="OriginNotFound",r.OriginMismatch="OriginMismatch",r.PasswordFormatInvalid="PasswordFormatInvalid",r.PasswordInvalid="PasswordInvalid",r.RequestsNotFound="RequestsNotFound",r.ResponsesNotFound="ResponsesNotFound",r.PasswordTooCommon="PasswordTooCommon",r.PinInvalid="PinInvalid",r.ReferrerEmpty="ReferrerEmpty",r.SenderNotAuthorized="SenderNotAuthorized",r.SettingsNotInitialized="SettingsNotInitialized",r.UpdateKeysTransactionNoKeys="UpdateKeysTransactionNoKeys",r.UserDeactivated="UserDeactivated",r.UsernameNotFound="UsernameNotFound",r.UsernameTaken="UsernameTaken",r.UsernameNotDefined="UsernameNotDefined",r.UserNotLoggedIn="UserNotLoggedIn",r.UserNotLoggedInWithThisApp="UserNotLoggedInWithThisApp",r.UserRefreshed="UserRefreshed",r.WrongOrigin="WrongOrigin",r.UserCancelled="UserCancelled",r.UserLogout="UserLogout",r.VerificationDataNotFound="VerificationDataNotFound"})(Ge||(Ge={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]}})(Ge||(Ge={})),(function(r){r.PASSWORD="PASSWORD",r.ACTIVE="ACTIVE",r.PIN="PIN",r.BIOMETRIC="BIOMETRIC",r.LOCAL="LOCAL",r.BROWSER_LOCAL_STORAGE="BROWSER_LOCAL_STORAGE",r.BROWSER_SESSION_STORAGE="BROWSER_SESSION_STORAGE"})(ct||(ct={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]},r.validate=function(e){if(r.indexFor(e)===-1)throw new Error(Ge.InvalidKeyLevel+": Invalid level")}})(ct||(ct={}));var Vne=(function(){function r(){this.level=void 0,this.privateKey=void 0,this.challenge=void 0}return r.validate=function(e){ct.validate(e.level),e.challenge!==void 0&&(typeof e.challenge=="string"&&e.challenge.length!==0||ot("Invalid challenge",Ge.InvalidChallenge))},r})(),Hne=(function(){function r(){this.level=void 0,this.data=void 0,this.challenge=void 0,this.outputType=void 0}return r.validate=function(e){ct.validate(e.level),e.challenge!==void 0&&(typeof e.challenge=="string"&&e.challenge.length!==0||ot("Invalid challenge",Ge.InvalidChallenge)),e.outputType&&e.outputType!=="jwt"&&e.outputType!=="transaction"&&ot("Invalid output type",Ge.InvalidData)},r})(),jE=(function(){function r(){this.level=void 0}return r.validate=function(e){ct.validate(e.level)},r})(),Kne=(function(){function r(){this.level=void 0,this.challenge=void 0}return r.validate=function(e){ct.validate(e.level),e.challenge!==void 0&&(typeof e.challenge=="string"&&e.challenge.length!==0||ot("Invalid challenge",Ge.InvalidChallenge))},r})(),Gne={get:function(r,e){e==="scope"&&ot("Scope is a reserved key"),e==="cache"&&ot("Cache is a reserved key");var t=r.scope+e;return e in r?(e==="clear"&&(r.cache={}),function(){r[e]()}):r.cache[t]?r.cache[t]:r.retrieve(t).then(function(n){return r.cache[t]=n,n}).catch(function(n){ot("Could not get "+t+" from storage - "+n)})},set:function(r,e,t){try{var n=r.scope+e;return Promise.resolve(r.store(n,t).then(function(){return r.cache[n]=t,!0}).catch(function(){return!1}))}catch(i){return Promise.reject(i)}}},ZA="tonomy.id.";function ak(r,e){var t=e(r);return t.cache={},new Proxy(t,Gne)}function YA(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function sk(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?YA(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}class Wne{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Zne{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ok(this,e)}}class Yne{constructor(e){this.decoders=e}or(e){return ok(this,e)}decode(e){const t=this.decoders[e[0]];if(t)return t.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ok=(r,e)=>new Yne({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Qne{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Wne(e,t,n),this.decoder=new Zne(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Bb=({name:r,prefix:e,encode:t,decode:n})=>new Qne(r,e,t,n),g0=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=(function(a,o){if(a.length>=255)throw new TypeError("Alphabet too long");for(var s=new Uint8Array(256),c=0;c<s.length;c++)s[c]=255;for(var l=0;l<a.length;l++){var d=a.charAt(l),h=d.charCodeAt(0);if(s[h]!==255)throw new TypeError(d+" is ambiguous");s[h]=l}var y=a.length,m=a.charAt(0),b=Math.log(y)/Math.log(256),v=Math.log(256)/Math.log(y);function E(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var D=0;if(x[D]!==" "){for(var N=0,B=0;x[D]===m;)N++,D++;for(var k=(x.length-D)*b+1>>>0,F=new Uint8Array(k);x[D];){var T=s[x.charCodeAt(D)];if(T===255)return;for(var z=0,Z=k-1;(T!==0||z<B)&&Z!==-1;Z--,z++)F[Z]=(T+=y*F[Z]>>>0)%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");B=z,D++}if(x[D]!==" "){for(var Y=k-B;Y!==k&&F[Y]===0;)Y++;for(var W=new Uint8Array(N+(k-Y)),M=N;Y!==k;)W[M++]=F[Y++];return W}}}return{encode:function(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var D=0,N=0,B=0,k=x.length;B!==k&&x[B]===0;)B++,D++;for(var F=(k-B)*v+1>>>0,T=new Uint8Array(F);B!==k;){for(var z=x[B],Z=0,Y=F-1;(z!==0||Z<N)&&Y!==-1;Y--,Z++)T[Y]=(z+=256*T[Y]>>>0)%y>>>0,z=z/y>>>0;if(z!==0)throw new Error("Non-zero carry");N=Z,B++}for(var W=F-N;W!==F&&T[W]===0;)W++;for(var M=m.repeat(D);W<F;++W)M+=a.charAt(T[W]);return M},decodeUnsafe:E,decode:function(x){var D=E(x);if(D)return D;throw new Error(`Non-${o} character`)}}})(t,e);return Bb({prefix:r,name:e,encode:n,decode:a=>(o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")})(i(a))})},$n=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Bb({prefix:e,name:r,encode:i=>((a,o,s)=>{const c=o[o.length-1]==="=",l=(1<<s)-1;let d="",h=0,y=0;for(let m=0;m<a.length;++m)for(y=y<<8|a[m],h+=8;h>s;)h-=s,d+=o[l&y>>h];if(h&&(d+=o[l&y<<s-h]),c)for(;d.length*s&7;)d+="=";return d})(i,n,t),decode:i=>((a,o,s,c)=>{const l={};for(let v=0;v<o.length;++v)l[o[v]]=v;let d=a.length;for(;a[d-1]==="=";)--d;const h=new Uint8Array(d*s/8|0);let y=0,m=0,b=0;for(let v=0;v<d;++v){const E=l[a[v]];if(E===void 0)throw new SyntaxError(`Non-${c} character`);m=m<<s|E,y+=s,y>=8&&(y-=8,h[b++]=255&m>>y)}if(y>=s||255&m<<8-y)throw new SyntaxError("Unexpected end of data");return h})(i,n,t,r)});var Jne={__proto__:null,identity:Bb({prefix:"\0",name:"identity",encode:r=>{return e=r,new TextDecoder().decode(e);var e},decode:r=>(e=>new TextEncoder().encode(e))(r)})},Xne={__proto__:null,base2:$n({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})},eie={__proto__:null,base8:$n({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})},tie={__proto__:null,base10:g0({prefix:"9",name:"base10",alphabet:"0123456789"})},rie={__proto__:null,base16:$n({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:$n({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})},nie={__proto__:null,base32:$n({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper:$n({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad:$n({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper:$n({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex:$n({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper:$n({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad:$n({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:$n({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:$n({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},iie={__proto__:null,base36:g0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:g0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},aie={__proto__:null,base58btc:g0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:g0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},sie={__proto__:null,base64:$n({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad:$n({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:$n({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:$n({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})};const uk=Array.from(""),oie=uk.reduce((r,e,t)=>(r[t]=e,r),[]),uie=uk.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);var cie={__proto__:null,base256emoji:Bb({prefix:"",name:"base256emoji",encode:function(r){return r.reduce((e,t)=>e+oie[t],"")},decode:function(r){const e=[];for(const t of r){const n=uie[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}})},lie=Math.pow(2,31),fie=Math.pow(2,7),die=Math.pow(2,14),hie=Math.pow(2,21),pie=Math.pow(2,28),yie=Math.pow(2,35),mie=Math.pow(2,42),gie=Math.pow(2,49),vie=Math.pow(2,56),bie=Math.pow(2,63),qv={encode:function r(e,t,n){t=t||[];for(var i=n=n||0;e>=lie;)t[n++]=255&e|128,e/=128;for(;-128&e;)t[n++]=255&e|128,e>>>=7;return t[n]=0|e,r.bytes=n-i+1,t},decode:function r(e,t){var n,i=0,a=0,o=t=t||0,s=e.length;do{if(o>=s)throw r.bytes=0,new RangeError("Could not decode varint");n=e[o++],i+=a<28?(127&n)<<a:(127&n)*Math.pow(2,a),a+=7}while(n>=128);return r.bytes=o-t,i},encodingLength:function(r){return r<fie?1:r<die?2:r<hie?3:r<pie?4:r<yie?5:r<mie?6:r<gie?7:r<vie?8:r<bie?9:10}};const wie=(r,e=0)=>[qv.decode(r,e),qv.decode.bytes];new TextEncoder,new TextDecoder;const ON={...Jne,...Xne,...eie,...tie,...rie,...nie,...iie,...aie,...sie,...cie};function ck(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const CN=ck("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),$E=ck("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=sk((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),lk={utf8:CN,"utf-8":CN,hex:ON.base16,latin1:$E,ascii:$E,binary:$E,...ON};function QA(r,e="utf8"){const t=lk[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return e!=="utf8"&&e!=="utf-8"||globalThis.Buffer==null||globalThis.Buffer.from==null?t.decoder.decode(`${t.prefix}${r}`):YA(globalThis.Buffer.from(r,"utf-8"))}function fk(r,e="utf8"){const t=lk[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return e!=="utf8"&&e!=="utf-8"||globalThis.Buffer==null||globalThis.Buffer.from==null?t.encoder.encode(r).substring(1):globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8")}function NN(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function Ib(r,...e){if(!((t=r)instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"))throw new Error("Uint8Array expected");var t;if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Lv(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}const FE=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,zE=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),As=(r,e)=>r<<32-e|r>>>e;function JA(r){return typeof r=="string"&&(r=(function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))})(r)),Ib(r),r}class dk{clone(){return this._cloneInto()}}function hk(r){const e=n=>r().update(JA(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function pk(r=32){if(FE&&typeof FE.getRandomValues=="function")return FE.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}const _ie=(r,e,t)=>r&e^r&t^e&t;class yk extends dk{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zE(this.buffer)}update(e){Lv(this);const{view:t,buffer:n,blockLen:i}=this,a=(e=JA(e)).length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s!==i)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(t,0),this.pos=0);else{const c=zE(e);for(;i<=a-o;o+=i)this.process(c,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lv(this),(function(h,y){Ib(h);const m=y.outputLen;if(h.length<m)throw new Error(`digestInto() expects output buffer of length at least ${m}`)})(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;(function(h,y,m,b){if(typeof h.setBigUint64=="function")return h.setBigUint64(y,m,b);const v=BigInt(32),E=BigInt(4294967295),x=Number(m>>v&E),D=Number(m&E),N=b?0:4;h.setUint32(y+(b?4:0),x,b),h.setUint32(y+N,D,b)})(n,i-8,BigInt(8*this.length),a),this.process(n,0);const s=zE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)s.setUint32(4*h,d[h],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%t&&e.buffer.set(n),e}}const M1=BigInt(2**32-1),BN=BigInt(32);function Eie(r,e=!1){return e?{h:Number(r&M1),l:Number(r>>BN&M1)}:{h:0|Number(r>>BN&M1),l:0|Number(r&M1)}}var IN=(r,e,t)=>r>>>t,DN=(r,e,t)=>r<<32-t|e>>>t,Wf=(r,e,t)=>r>>>t|e<<32-t,Zf=(r,e,t)=>r<<32-t|e>>>t,T1=(r,e,t)=>r<<64-t|e>>>t-32,R1=(r,e,t)=>r>>>t-32|e<<64-t,So=function(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:0|i}},xie=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),Aie=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,Sie=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Mie=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,Tie=(r,e,t,n,i,a)=>e+t+n+i+a+(r/2**32|0)|0,Rie=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0);const[Oie,Cie]=(function(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:a,l:o}=Eie(r[i],e);[t[i],n[i]]=[a,o]}return[t,n]})(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Bu=new Uint32Array(80),Iu=new Uint32Array(80);class Nie extends yk{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:a,Cl:o,Dh:s,Dl:c,Eh:l,El:d,Fh:h,Fl:y,Gh:m,Gl:b,Hh:v,Hl:E}=this;return[e,t,n,i,a,o,s,c,l,d,h,y,m,b,v,E]}set(e,t,n,i,a,o,s,c,l,d,h,y,m,b,v,E){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|i,this.Ch=0|a,this.Cl=0|o,this.Dh=0|s,this.Dl=0|c,this.Eh=0|l,this.El=0|d,this.Fh=0|h,this.Fl=0|y,this.Gh=0|m,this.Gl=0|b,this.Hh=0|v,this.Hl=0|E}process(e,t){for(let N=0;N<16;N++,t+=4)Bu[N]=e.getUint32(t),Iu[N]=e.getUint32(t+=4);for(let N=16;N<80;N++){const B=0|Bu[N-15],k=0|Iu[N-15],F=Wf(B,k,1)^Wf(B,k,8)^IN(B,0,7),T=Zf(B,k,1)^Zf(B,k,8)^DN(B,k,7),z=0|Bu[N-2],Z=0|Iu[N-2],Y=Wf(z,Z,19)^T1(z,Z,61)^IN(z,0,6),W=Zf(z,Z,19)^R1(z,Z,61)^DN(z,Z,6),M=Sie(T,W,Iu[N-7],Iu[N-16]),C=Mie(M,F,Y,Bu[N-7],Bu[N-16]);Bu[N]=0|C,Iu[N]=0|M}let{Ah:n,Al:i,Bh:a,Bl:o,Ch:s,Cl:c,Dh:l,Dl:d,Eh:h,El:y,Fh:m,Fl:b,Gh:v,Gl:E,Hh:x,Hl:D}=this;for(let N=0;N<80;N++){const B=Wf(h,y,14)^Wf(h,y,18)^T1(h,y,41),k=Zf(h,y,14)^Zf(h,y,18)^R1(h,y,41),F=h&m^~h&v,T=Rie(D,k,y&b^~y&E,Cie[N],Iu[N]),z=Tie(T,x,B,F,Oie[N],Bu[N]),Z=0|T,Y=Wf(n,i,28)^T1(n,i,34)^T1(n,i,39),W=Zf(n,i,28)^R1(n,i,34)^R1(n,i,39),M=n&a^n&s^a&s,C=i&o^i&c^o&c;x=0|v,D=0|E,v=0|m,E=0|b,m=0|h,b=0|y,{h,l:y}=So(0|l,0|d,0|z,0|Z),l=0|s,d=0|c,s=0|a,c=0|o,a=0|n,o=0|i;const R=xie(Z,W,C);n=Aie(R,z,Y,M),i=0|R}({h:n,l:i}=So(0|this.Ah,0|this.Al,0|n,0|i)),{h:a,l:o}=So(0|this.Bh,0|this.Bl,0|a,0|o),{h:s,l:c}=So(0|this.Ch,0|this.Cl,0|s,0|c),{h:l,l:d}=So(0|this.Dh,0|this.Dl,0|l,0|d),{h,l:y}=So(0|this.Eh,0|this.El,0|h,0|y),{h:m,l:b}=So(0|this.Fh,0|this.Fl,0|m,0|b),{h:v,l:E}=So(0|this.Gh,0|this.Gl,0|v,0|E),{h:x,l:D}=So(0|this.Hh,0|this.Hl,0|x,0|D),this.set(n,i,a,o,s,c,l,d,h,y,m,b,v,E,x,D)}roundClean(){Bu.fill(0),Iu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bie=hk(()=>new Nie),Iie=BigInt(1),Die=BigInt(2);function gd(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Db(r){if(!gd(r))throw new Error("Uint8Array expected")}const Pie=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function vd(r){Db(r);let e="";for(let t=0;t<r.length;t++)e+=Pie[r[t]];return e}function mk(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const Mo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function PN(r){return r>=Mo._0&&r<=Mo._9?r-Mo._0:r>=Mo._A&&r<=Mo._F?r-(Mo._A-10):r>=Mo._a&&r<=Mo._f?r-(Mo._a-10):void 0}function v0(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,a=0;i<t;i++,a+=2){const o=PN(r.charCodeAt(a)),s=PN(r.charCodeAt(a+1));if(o===void 0||s===void 0)throw new Error('hex string expected, got non-hex character "'+(r[a]+r[a+1])+'" at index '+a);n[i]=16*o+s}return n}function rl(r){return mk(vd(r))}function Np(r){return Db(r),mk(vd(Uint8Array.from(r).reverse()))}function Bp(r,e){return v0(r.toString(16).padStart(2*e,"0"))}function jv(r,e){return Bp(r,e).reverse()}function Sn(r,e,t){let n;if(typeof e=="string")try{n=v0(e)}catch(a){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${a}`)}else{if(!gd(e))throw new Error(`${r} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function bd(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Db(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const a=r[n];t.set(a,i),i+=a.length}return t}const gk=r=>(Die<<BigInt(r-1))-Iie,VE=r=>new Uint8Array(r),UN=r=>Uint8Array.from(r);function Uie(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=VE(r),i=VE(r),a=0;const o=()=>{n.fill(1),i.fill(0),a=0},s=(...d)=>t(i,n,...d),c=(d=VE())=>{i=s(UN([0]),d),n=s(),d.length!==0&&(i=s(UN([1]),d),n=s())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){n=s();const y=n.slice();h.push(y),d+=n.length}return bd(...h)};return(d,h)=>{let y;for(o(),c(d);!(y=h(l()));)c();return o(),y}}const kie={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||gd(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function b0(r,e,t={}){const n=(i,a,o)=>{const s=kie[a];if(typeof s!="function")throw new Error(`Invalid validator "${a}", expected function`);const c=r[i];if(!(o&&c===void 0||s(c,r)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${a}`)};for(const[i,a]of Object.entries(e))n(i,a,!1);for(const[i,a]of Object.entries(t))n(i,a,!0);return r}var qie={__proto__:null,hexToBytes:v0,bytesToNumberBE:rl};const Mn=BigInt(0),Ir=BigInt(1),Zc=BigInt(2),Lie=BigInt(3),HE=BigInt(4),kN=BigInt(5),qN=BigInt(8);function Rr(r,e){const t=r%e;return t>=Mn?t:e+t}function jie(r,e,t){if(t<=Mn||e<Mn)throw new Error("Expected power/modulo > 0");if(t===Ir)return Mn;let n=Ir;for(;e>Mn;)e&Ir&&(n=n*r%t),r=r*r%t,e>>=Ir;return n}function jr(r,e,t){let n=r;for(;e-- >Mn;)n*=n,n%=t;return n}function f8(r,e){if(r===Mn||e<=Mn)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Rr(r,e),n=e,i=Mn,a=Ir;for(;t!==Mn;){const o=n%t,s=i-a*(n/t);n=t,t=o,i=a,a=s}if(n!==Ir)throw new Error("invert: does not exist");return Rr(i,e)}BigInt(9),BigInt(16);const $ie=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vk(r,e){const t=e!==void 0?e:r.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}function XA(r,e,t=!1,n={}){if(r<=Mn)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:a}=vk(r,e);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=(function(c){if(c%HE===Lie){const l=(c+Ir)/HE;return function(d,h){const y=d.pow(h,l);if(!d.eql(d.sqr(y),h))throw new Error("Cannot find square root");return y}}if(c%qN===kN){const l=(c-kN)/qN;return function(d,h){const y=d.mul(h,Zc),m=d.pow(y,l),b=d.mul(h,m),v=d.mul(d.mul(b,Zc),m),E=d.mul(b,d.sub(v,d.ONE));if(!d.eql(d.sqr(E),h))throw new Error("Cannot find square root");return E}}return(function(l){const d=(l-Ir)/Zc;let h,y,m;for(h=l-Ir,y=0;h%Zc===Mn;h/=Zc,y++);for(m=Zc;m<l&&jie(m,d,l)!==l-Ir;m++);if(y===1){const v=(l+Ir)/HE;return function(E,x){const D=E.pow(x,v);if(!E.eql(E.sqr(D),x))throw new Error("Cannot find square root");return D}}const b=(h+Ir)/Zc;return function(v,E){if(v.pow(E,d)===v.neg(v.ONE))throw new Error("Cannot find square root");let x=y,D=v.pow(v.mul(v.ONE,m),h),N=v.pow(E,b),B=v.pow(E,h);for(;!v.eql(B,v.ONE);){if(v.eql(B,v.ZERO))return v.ZERO;let k=1;for(let T=v.sqr(B);k<x&&!v.eql(T,v.ONE);k++)T=v.sqr(T);const F=v.pow(D,Ir<<BigInt(x-k-1));D=v.sqr(F),N=v.mul(N,F),B=v.mul(B,D),x=k}return N}})(c)})(r),s=Object.freeze({ORDER:r,BITS:i,BYTES:a,MASK:gk(i),ZERO:Mn,ONE:Ir,create:c=>Rr(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return Mn<=c&&c<r},is0:c=>c===Mn,isOdd:c=>(c&Ir)===Ir,neg:c=>Rr(-c,r),eql:(c,l)=>c===l,sqr:c=>Rr(c*c,r),add:(c,l)=>Rr(c+l,r),sub:(c,l)=>Rr(c-l,r),mul:(c,l)=>Rr(c*l,r),pow:(c,l)=>(function(d,h,y){if(y<Mn)throw new Error("Expected power > 0");if(y===Mn)return d.ONE;if(y===Ir)return h;let m=d.ONE,b=h;for(;y>Mn;)y&Ir&&(m=d.mul(m,b)),b=d.sqr(b),y>>=Ir;return m})(s,c,l),div:(c,l)=>Rr(c*f8(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>f8(c,r),sqrt:n.sqrt||(c=>o(s,c)),invertBatch:c=>(function(l,d){const h=new Array(d.length),y=d.reduce((b,v,E)=>l.is0(v)?b:(h[E]=b,l.mul(b,v)),l.ONE),m=l.inv(y);return d.reduceRight((b,v,E)=>l.is0(v)?b:(h[E]=l.mul(b,h[E]),l.mul(b,v)),m),h})(s,c),cmov:(c,l,d)=>d?l:c,toBytes:c=>t?jv(c,a):Bp(c,a),fromBytes:c=>{if(c.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${c.length}`);return t?Np(c):rl(c)}});return Object.freeze(s)}function bk(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function LN(r){const e=bk(r);return e+Math.ceil(e/2)}const Fie=BigInt(0),KE=BigInt(1);function wk(r,e){const t=(i,a)=>{const o=a.negate();return i?o:a},n=i=>({windows:Math.ceil(e/i)+1,windowSize:2**(i-1)});return{constTimeNegate:t,unsafeLadder(i,a){let o=r.ZERO,s=i;for(;a>Fie;)a&KE&&(o=o.add(s)),s=s.double(),a>>=KE;return o},precomputeWindow(i,a){const{windows:o,windowSize:s}=n(a),c=[];let l=i,d=l;for(let h=0;h<o;h++){d=l,c.push(d);for(let y=1;y<s;y++)d=d.add(l),c.push(d);l=d.double()}return c},wNAF(i,a,o){const{windows:s,windowSize:c}=n(i);let l=r.ZERO,d=r.BASE;const h=BigInt(2**i-1),y=2**i,m=BigInt(i);for(let b=0;b<s;b++){const v=b*c;let E=Number(o&h);o>>=m,E>c&&(E-=y,o+=KE);const x=v,D=v+Math.abs(E)-1,N=E<0;E===0?d=d.add(t(b%2!=0,a[x])):l=l.add(t(N,a[D]))}return{p:l,f:d}},wNAFCached(i,a,o,s){const c=i._WINDOW_SIZE||1;let l=a.get(i);return l||(l=this.precomputeWindow(i,c),c!==1&&a.set(i,s(l))),this.wNAF(c,l,o)}}}function d8(r){return b0(r.Fp,$ie.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),b0(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vk(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}const ts=BigInt(0),na=BigInt(1),O1=BigInt(2),zie=BigInt(8),Vie={zip215:!0},h8=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),jN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Hie=BigInt(1),$N=BigInt(2);BigInt(3);const Kie=BigInt(5),Gie=BigInt(8);function Wie(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Zie(r,e){const t=h8,n=Rr(e*e*e,t),i=(function(y){const m=BigInt(10),b=BigInt(20),v=BigInt(40),E=BigInt(80),x=h8,D=y*y%x*y%x,N=jr(D,$N,x)*D%x,B=jr(N,Hie,x)*y%x,k=jr(B,Kie,x)*B%x,F=jr(k,m,x)*k%x,T=jr(F,b,x)*F%x,z=jr(T,v,x)*T%x,Z=jr(z,E,x)*z%x,Y=jr(Z,E,x)*z%x,W=jr(Y,m,x)*k%x;return{pow_p_5_8:jr(W,$N,x)*y%x,b2:D}})(r*Rr(n*n*e,t)).pow_p_5_8;let a=Rr(r*n*i,t);const o=Rr(e*a*a,t),s=a,c=Rr(a*jN,t),l=o===r,d=o===Rr(-r,t),h=o===Rr(-r*jN,t);return l&&(a=s),(d||h)&&(a=c),(Rr(a,t)&Ir)===Ir&&(a=Rr(-a,t)),{isValid:l||d,value:a}}const Yie=XA(h8,void 0,!0),Qie={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Yie,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Gie,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Bie,randomBytes:pk,adjustScalarBytes:Wie,uvRatio:Zie},Jie=(function(){const r=(function(C){const R=d8(C);return b0(C,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...R})})(Qie),{Fp:e,n:t,prehash:n,hash:i,randomBytes:a,nByteLength:o,h:s}=r,c=O1<<BigInt(8*o)-na,l=e.create,d=r.uvRatio||((C,R)=>{try{return{isValid:!0,value:e.sqrt(C*e.inv(R))}}catch{return{isValid:!1,value:ts}}}),h=r.adjustScalarBytes||(C=>C),y=r.domain||((C,R,S)=>{if(R.length||S)throw new Error("Contexts/pre-hash are not supported");return C}),m=C=>typeof C=="bigint"&&ts<C,b=(C,R)=>m(C)&&m(R)&&C<R,v=C=>C===ts||b(C,c);function E(C,R){if(b(C,R))return C;throw new Error(`Expected valid scalar < ${R}, got ${typeof C} ${C}`)}function x(C){return C===ts?C:E(C,t)}const D=new Map;function N(C){if(!(C instanceof B))throw new Error("ExtendedPoint expected")}class B{constructor(R,S,_,U){if(this.ex=R,this.ey=S,this.ez=_,this.et=U,!v(R))throw new Error("x required");if(!v(S))throw new Error("y required");if(!v(_))throw new Error("z required");if(!v(U))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof B)throw new Error("extended point not allowed");const{x:S,y:_}=R||{};if(!v(S)||!v(_))throw new Error("invalid affine point");return new B(S,_,na,l(S*_))}static normalizeZ(R){const S=e.invertBatch(R.map(_=>_.ez));return R.map((_,U)=>_.toAffine(S[U])).map(B.fromAffine)}_setWindowSize(R){this._WINDOW_SIZE=R,D.delete(this)}assertValidity(){const{a:R,d:S}=r;if(this.is0())throw new Error("bad point: ZERO");const{ex:_,ey:U,ez:H,et:V}=this,P=l(_*_),$=l(U*U),te=l(H*H),ae=l(te*te),ce=l(P*R);if(l(te*l(ce+$))!==l(ae+l(S*l(P*$))))throw new Error("bad point: equation left != right (1)");if(l(_*U)!==l(H*V))throw new Error("bad point: equation left != right (2)")}equals(R){N(R);const{ex:S,ey:_,ez:U}=this,{ex:H,ey:V,ez:P}=R,$=l(S*P),te=l(H*U),ae=l(_*P),ce=l(V*U);return $===te&&ae===ce}is0(){return this.equals(B.ZERO)}negate(){return new B(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:R}=r,{ex:S,ey:_,ez:U}=this,H=l(S*S),V=l(_*_),P=l(O1*l(U*U)),$=l(R*H),te=S+_,ae=l(l(te*te)-H-V),ce=$+V,fe=ce-P,oe=$-V,ye=l(ae*fe),me=l(ce*oe),ve=l(ae*oe),we=l(fe*ce);return new B(ye,me,we,ve)}add(R){N(R);const{a:S,d:_}=r,{ex:U,ey:H,ez:V,et:P}=this,{ex:$,ey:te,ez:ae,et:ce}=R;if(S===BigInt(-1)){const L=l((H-U)*(te+$)),j=l((H+U)*(te-$)),X=l(j-L);if(X===ts)return this.double();const ue=l(V*O1*ce),le=l(P*O1*ae),de=le+ue,Be=j+L,Me=le-ue,Pe=l(de*X),Qe=l(Be*Me),q=l(de*Me),w=l(X*Be);return new B(Pe,Qe,w,q)}const fe=l(U*$),oe=l(H*te),ye=l(P*_*ce),me=l(V*ae),ve=l((U+H)*($+te)-fe-oe),we=me-ye,De=me+ye,Te=l(oe-S*fe),Se=l(ve*we),Le=l(De*Te),$e=l(ve*Te),ie=l(we*De);return new B(Se,Le,ie,$e)}subtract(R){return this.add(R.negate())}wNAF(R){return T.wNAFCached(this,D,R,B.normalizeZ)}multiply(R){const{p:S,f:_}=this.wNAF(E(R,t));return B.normalizeZ([S,_])[0]}multiplyUnsafe(R){let S=x(R);return S===ts?F:this.equals(F)||S===na?this:this.equals(k)?this.wNAF(S).p:T.unsafeLadder(this,S)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return T.unsafeLadder(this,t).is0()}toAffine(R){const{ex:S,ey:_,ez:U}=this,H=this.is0();R==null&&(R=H?zie:e.inv(U));const V=l(S*R),P=l(_*R),$=l(U*R);if(H)return{x:ts,y:na};if($!==na)throw new Error("invZ was invalid");return{x:V,y:P}}clearCofactor(){const{h:R}=r;return R===na?this:this.multiplyUnsafe(R)}static fromHex(R,S=!1){const{d:_,a:U}=r,H=e.BYTES,V=(R=Sn("pointHex",R,H)).slice(),P=R[H-1];V[H-1]=-129&P;const $=Np(V);$===ts||E($,S?c:e.ORDER);const te=l($*$),ae=l(te-na),ce=l(_*te-U);let{isValid:fe,value:oe}=d(ae,ce);if(!fe)throw new Error("Point.fromHex: invalid y coordinate");const ye=(oe&na)===na,me=!!(128&P);if(!S&&oe===ts&&me)throw new Error("Point.fromHex: x=0 and x_0=1");return me!==ye&&(oe=l(-oe)),B.fromAffine({x:oe,y:$})}static fromPrivateKey(R){return Y(R).point}toRawBytes(){const{x:R,y:S}=this.toAffine(),_=jv(S,e.BYTES);return _[_.length-1]|=R&na?128:0,_}toHex(){return vd(this.toRawBytes())}}B.BASE=new B(r.Gx,r.Gy,na,l(r.Gx*r.Gy)),B.ZERO=new B(ts,na,na,ts);const{BASE:k,ZERO:F}=B,T=wk(B,8*o);function z(C){return Rr(C,t)}function Z(C){return z(Np(C))}function Y(C){const R=o;C=Sn("private key",C,R);const S=Sn("hashed private key",i(C),2*R),_=h(S.slice(0,R)),U=S.slice(R,2*R),H=Z(_),V=k.multiply(H),P=V.toRawBytes();return{head:_,prefix:U,scalar:H,point:V,pointBytes:P}}function W(C=new Uint8Array,...R){const S=bd(...R);return Z(i(y(S,Sn("context",C),!!n)))}const M=Vie;return k._setWindowSize(8),{CURVE:r,getPublicKey:function(C){return Y(C).pointBytes},sign:function(C,R,S={}){C=Sn("message",C),n&&(C=n(C));const{prefix:_,scalar:U,pointBytes:H}=Y(R),V=W(S.context,_,C),P=k.multiply(V).toRawBytes(),$=z(V+W(S.context,P,H,C)*U);return x($),Sn("result",bd(P,jv($,e.BYTES)),2*o)},verify:function(C,R,S,_=M){const{context:U,zip215:H}=_,V=e.BYTES;C=Sn("signature",C,2*V),R=Sn("message",R),n&&(R=n(R));const P=Np(C.slice(V,2*V));let $,te,ae;try{$=B.fromHex(S,H),te=B.fromHex(C.slice(0,V),H),ae=k.multiplyUnsafe(P)}catch{return!1}if(!H&&$.isSmallOrder())return!1;const ce=W(U,te.toRawBytes(),$.toRawBytes(),R);return te.add($.multiplyUnsafe(ce)).subtract(ae).clearCofactor().equals(B.ZERO)},ExtendedPoint:B,utils:{getExtendedPublicKey:Y,randomPrivateKey:()=>a(e.BYTES),precompute:(C=8,R=B.BASE)=>(R._setWindowSize(C),R.multiply(BigInt(3)),R)}}})();var cp=function(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),a=i.charCodeAt(0);if(e[a]!==255)throw new TypeError(i+" is ambiguous");e[a]=n}var o=r.length,s=r.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function d(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var y=0;if(h[y]!==" "){for(var m=0,b=0;h[y]===s;)m++,y++;for(var v=(h.length-y)*c+1>>>0,E=new Uint8Array(v);h[y];){var x=e[h.charCodeAt(y)];if(x===255)return;for(var D=0,N=v-1;(x!==0||D<b)&&N!==-1;N--,D++)E[N]=(x+=o*E[N]>>>0)%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");b=D,y++}if(h[y]!==" "){for(var B=v-b;B!==v&&E[B]===0;)B++;for(var k=new Uint8Array(m+(v-B)),F=m;B!==v;)k[F++]=E[B++];return k}}}return{encode:function(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,m=0,b=0,v=h.length;b!==v&&h[b]===0;)b++,y++;for(var E=(v-b)*l+1>>>0,x=new Uint8Array(E);b!==v;){for(var D=h[b],N=0,B=E-1;(D!==0||N<m)&&B!==-1;B--,N++)x[B]=(D+=256*x[B]>>>0)%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");m=N,b++}for(var k=E-m;k!==E&&x[k]===0;)k++;for(var F=s.repeat(y);k<E;++k)F+=r.charAt(x[k]);return F},decodeUnsafe:d,decode:function(h){var y=d(h);if(y)return y;throw new Error("Non-base"+o+" character")}}};const Xie=new TextDecoder,eae=new TextEncoder;var e6={decodeText:r=>Xie.decode(r),encodeText:r=>eae.encode(r),concat:function(r,e){const t=new Uint8Array(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}};const{encodeText:tae}=e6;var rae=class{constructor(r,e,t,n){this.name=r,this.code=e,this.codeBuf=tae(this.code),this.alphabet=n,this.codec=t(n)}encode(r){return this.codec.encode(r)}decode(r){for(const e of r)if(this.alphabet&&this.alphabet.indexOf(e)<0)throw new Error(`invalid character '${e}' in '${r}'`);return this.codec.decode(r)}},nae={rfc4648:r=>e=>({encode:t=>((n,i,a)=>{const o=i[i.length-1]==="=",s=(1<<a)-1;let c="",l=0,d=0;for(let h=0;h<n.length;++h)for(d=d<<8|n[h],l+=8;l>a;)l-=a,c+=i[s&d>>l];if(l&&(c+=i[s&d<<a-l]),o)for(;c.length*a&7;)c+="=";return c})(t,e,r),decode:t=>((n,i,a)=>{const o={};for(let y=0;y<i.length;++y)o[i[y]]=y;let s=n.length;for(;n[s-1]==="=";)--s;const c=new Uint8Array(s*a/8|0);let l=0,d=0,h=0;for(let y=0;y<s;++y){const m=o[n[y]];if(m===void 0)throw new SyntaxError("Invalid character "+n[y]);d=d<<a|m,l+=a,l>=8&&(l-=8,c[h++]=255&d>>l)}if(l>=a||255&d<<8-l)throw new SyntaxError("Unexpected end of data");return c})(t,e,r)})};const{rfc4648:Un}=nae,{decodeText:iae,encodeText:aae}=e6,_k=[["identity","\0",()=>({encode:iae,decode:aae}),""],["base2","0",Un(1),"01"],["base8","7",Un(3),"01234567"],["base10","9",cp,"0123456789"],["base16","f",Un(4),"0123456789abcdef"],["base16upper","F",Un(4),"0123456789ABCDEF"],["base32hex","v",Un(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Un(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Un(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Un(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Un(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Un(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Un(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Un(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Un(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",cp,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",cp,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",cp,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",cp,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Un(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Un(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Un(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Un(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Ek=_k.reduce((r,e)=>(r[e[0]]=new rae(e[0],e[1],e[2],e[3]),r),{}),sae=_k.reduce((r,e)=>(r[e[1]]=Ek[e[0]],r),{});var FN,GE,Yf={names:Ek,codes:sae},p8=(FN=function(r,e){const{encodeText:t,decodeText:n,concat:i}=e6;function a(c){if(Object.prototype.hasOwnProperty.call(Yf.names,c))return Yf.names[c];if(Object.prototype.hasOwnProperty.call(Yf.codes,c))return Yf.codes[c];throw new Error(`Unsupported encoding: ${c}`)}(e=r.exports=function(c,l){if(!l)throw new Error("requires an encoded Uint8Array");const{name:d,codeBuf:h}=a(c);return(function(y,m){a(y).decode(n(m))})(d,l),i([h,l],h.length+l.length)}).encode=function(c,l){const d=a(c),h=t(d.encode(l));return i([d.codeBuf,h],d.codeBuf.length+h.length)},e.decode=function(c){return c instanceof Uint8Array&&(c=n(c)),["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(c[0])&&(c=c.toLowerCase()),a(c[0]).decode(c.substring(1))},e.isEncoded=function(c){if(c instanceof Uint8Array&&(c=n(c)),Object.prototype.toString.call(c)!=="[object String]")return!1;try{return a(c[0]).name}catch{return!1}},e.encoding=a,e.encodingFromData=function(c){return c instanceof Uint8Array&&(c=n(c)),a(c[0])};const o=Object.freeze(Yf.names),s=Object.freeze(Yf.codes);e.names=o,e.codes=s},FN(GE={exports:{}},GE.exports),GE.exports);const oae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Du=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pu=new Uint32Array(64);class uae extends yk{constructor(){super(64,32,8,!1),this.A=0|Du[0],this.B=0|Du[1],this.C=0|Du[2],this.D=0|Du[3],this.E=0|Du[4],this.F=0|Du[5],this.G=0|Du[6],this.H=0|Du[7]}get(){const{A:e,B:t,C:n,D:i,E:a,F:o,G:s,H:c}=this;return[e,t,n,i,a,o,s,c]}set(e,t,n,i,a,o,s,c){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|i,this.E=0|a,this.F=0|o,this.G=0|s,this.H=0|c}process(e,t){for(let y=0;y<16;y++,t+=4)Pu[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){const m=Pu[y-15],b=Pu[y-2],v=As(m,7)^As(m,18)^m>>>3,E=As(b,17)^As(b,19)^b>>>10;Pu[y]=E+Pu[y-7]+v+Pu[y-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:c,G:l,H:d}=this;for(let y=0;y<64;y++){const m=d+(As(s,6)^As(s,11)^As(s,25))+((h=s)&c^~h&l)+oae[y]+Pu[y]|0,b=(As(n,2)^As(n,13)^As(n,22))+_ie(n,i,a)|0;d=l,l=c,c=s,s=o+m|0,o=a,a=i,i=n,n=m+b|0}var h;n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,a,o,s,c,l,d)}roundClean(){Pu.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const xk=hk(()=>new uae);class Ak extends dk{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(function(o){if(typeof o!="function"||typeof o.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");NN(o.outputLen),NN(o.blockLen)})(e);const n=JA(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=e.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(e){return Lv(this),this.iHash.update(e),this}digestInto(e){Lv(this),Ib(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return e.finished=i,e.destroyed=a,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Sk=(r,e,t)=>new Ak(r,e).update(t).digest();Sk.create=(r,e)=>new Ak(r,e);const{bytesToNumberBE:cae,hexToBytes:lae}=qie,ll={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(r){const{Err:e}=ll;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(n[0]===0&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:cae(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=ll,t=typeof r=="string"?lae(r):r;Db(t);let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:a}=ll._parseInt(t.subarray(2)),{d:o,l:s}=ll._parseInt(a);if(s.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(r){const e=l=>8&Number.parseInt(l[0],16)?"00"+l:l,t=l=>{const d=l.toString(16);return 1&d.length?`0${d}`:d},n=e(t(r.s)),i=e(t(r.r)),a=n.length/2,o=i.length/2,s=t(a),c=t(o);return`30${t(o+a+4)}02${c}${i}02${s}${n}`}},To=BigInt(0),Aa=BigInt(1);BigInt(2);const zN=BigInt(3);function fae(r){return{hash:r,hmac:(e,...t)=>Sk(r,e,(function(...n){let i=0;for(let o=0;o<n.length;o++){const s=n[o];Ib(s),i+=s.length}const a=new Uint8Array(i);for(let o=0,s=0;o<n.length;o++){const c=n[o];a.set(c,s),s+=c.length}return a})(...t)),randomBytes:pk}}function Mk(r,e){const t=n=>(function(i){const a=(function(M){const C=d8(M);return b0(C,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...C})})(i),{Fp:o,n:s}=a,c=o.BYTES+1,l=2*o.BYTES+1;function d(M){return Rr(M,s)}function h(M){return f8(M,s)}const{ProjectivePoint:y,normPrivateKeyToScalar:m,weierstrassEquation:b,isWithinCurveOrder:v}=(function(M){const C=(function(oe){const ye=d8(oe);b0(ye,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:me,Fp:ve,a:we}=ye;if(me){if(!ve.eql(we,ve.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof me!="object"||typeof me.beta!="bigint"||typeof me.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...ye})})(M),{Fp:R}=C,S=C.toBytes||((oe,ye,me)=>{const ve=ye.toAffine();return bd(Uint8Array.from([4]),R.toBytes(ve.x),R.toBytes(ve.y))}),_=C.fromBytes||(oe=>{const ye=oe.subarray(1);return{x:R.fromBytes(ye.subarray(0,R.BYTES)),y:R.fromBytes(ye.subarray(R.BYTES,2*R.BYTES))}});function U(oe){const{a:ye,b:me}=C,ve=R.sqr(oe),we=R.mul(ve,oe);return R.add(R.add(we,R.mul(oe,ye)),me)}if(!R.eql(R.sqr(C.Gy),U(C.Gx)))throw new Error("bad generator point: equation left != right");function H(oe){return typeof oe=="bigint"&&To<oe&&oe<C.n}function V(oe){if(!H(oe))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function P(oe){const{allowedPrivateKeyLengths:ye,nByteLength:me,wrapPrivateKey:ve,n:we}=C;if(ye&&typeof oe!="bigint"){if(gd(oe)&&(oe=vd(oe)),typeof oe!="string"||!ye.includes(oe.length))throw new Error("Invalid key");oe=oe.padStart(2*me,"0")}let De;try{De=typeof oe=="bigint"?oe:rl(Sn("private key",oe,me))}catch{throw new Error(`private key must be ${me} bytes, hex or bigint, not ${typeof oe}`)}return ve&&(De=Rr(De,we)),V(De),De}const $=new Map;function te(oe){if(!(oe instanceof ae))throw new Error("ProjectivePoint expected")}class ae{constructor(ye,me,ve){if(this.px=ye,this.py=me,this.pz=ve,ye==null||!R.isValid(ye))throw new Error("x required");if(me==null||!R.isValid(me))throw new Error("y required");if(ve==null||!R.isValid(ve))throw new Error("z required")}static fromAffine(ye){const{x:me,y:ve}=ye||{};if(!ye||!R.isValid(me)||!R.isValid(ve))throw new Error("invalid affine point");if(ye instanceof ae)throw new Error("projective point not allowed");const we=De=>R.eql(De,R.ZERO);return we(me)&&we(ve)?ae.ZERO:new ae(me,ve,R.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(ye){const me=R.invertBatch(ye.map(ve=>ve.pz));return ye.map((ve,we)=>ve.toAffine(me[we])).map(ae.fromAffine)}static fromHex(ye){const me=ae.fromAffine(_(Sn("pointHex",ye)));return me.assertValidity(),me}static fromPrivateKey(ye){return ae.BASE.multiply(P(ye))}_setWindowSize(ye){this._WINDOW_SIZE=ye,$.delete(this)}assertValidity(){if(this.is0()){if(C.allowInfinityPoint&&!R.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:ye,y:me}=this.toAffine();if(!R.isValid(ye)||!R.isValid(me))throw new Error("bad point: x or y not FE");const ve=R.sqr(me),we=U(ye);if(!R.eql(ve,we))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:ye}=this.toAffine();if(R.isOdd)return!R.isOdd(ye);throw new Error("Field doesn't support isOdd")}equals(ye){te(ye);const{px:me,py:ve,pz:we}=this,{px:De,py:Te,pz:Se}=ye,Le=R.eql(R.mul(me,Se),R.mul(De,we)),$e=R.eql(R.mul(ve,Se),R.mul(Te,we));return Le&&$e}negate(){return new ae(this.px,R.neg(this.py),this.pz)}double(){const{a:ye,b:me}=C,ve=R.mul(me,zN),{px:we,py:De,pz:Te}=this;let Se=R.ZERO,Le=R.ZERO,$e=R.ZERO,ie=R.mul(we,we),L=R.mul(De,De),j=R.mul(Te,Te),X=R.mul(we,De);return X=R.add(X,X),$e=R.mul(we,Te),$e=R.add($e,$e),Se=R.mul(ye,$e),Le=R.mul(ve,j),Le=R.add(Se,Le),Se=R.sub(L,Le),Le=R.add(L,Le),Le=R.mul(Se,Le),Se=R.mul(X,Se),$e=R.mul(ve,$e),j=R.mul(ye,j),X=R.sub(ie,j),X=R.mul(ye,X),X=R.add(X,$e),$e=R.add(ie,ie),ie=R.add($e,ie),ie=R.add(ie,j),ie=R.mul(ie,X),Le=R.add(Le,ie),j=R.mul(De,Te),j=R.add(j,j),ie=R.mul(j,X),Se=R.sub(Se,ie),$e=R.mul(j,L),$e=R.add($e,$e),$e=R.add($e,$e),new ae(Se,Le,$e)}add(ye){te(ye);const{px:me,py:ve,pz:we}=this,{px:De,py:Te,pz:Se}=ye;let Le=R.ZERO,$e=R.ZERO,ie=R.ZERO;const L=C.a,j=R.mul(C.b,zN);let X=R.mul(me,De),ue=R.mul(ve,Te),le=R.mul(we,Se),de=R.add(me,ve),Be=R.add(De,Te);de=R.mul(de,Be),Be=R.add(X,ue),de=R.sub(de,Be),Be=R.add(me,we);let Me=R.add(De,Se);return Be=R.mul(Be,Me),Me=R.add(X,le),Be=R.sub(Be,Me),Me=R.add(ve,we),Le=R.add(Te,Se),Me=R.mul(Me,Le),Le=R.add(ue,le),Me=R.sub(Me,Le),ie=R.mul(L,Be),Le=R.mul(j,le),ie=R.add(Le,ie),Le=R.sub(ue,ie),ie=R.add(ue,ie),$e=R.mul(Le,ie),ue=R.add(X,X),ue=R.add(ue,X),le=R.mul(L,le),Be=R.mul(j,Be),ue=R.add(ue,le),le=R.sub(X,le),le=R.mul(L,le),Be=R.add(Be,le),X=R.mul(ue,Be),$e=R.add($e,X),X=R.mul(Me,Be),Le=R.mul(de,Le),Le=R.sub(Le,X),X=R.mul(de,ue),ie=R.mul(Me,ie),ie=R.add(ie,X),new ae(Le,$e,ie)}subtract(ye){return this.add(ye.negate())}is0(){return this.equals(ae.ZERO)}wNAF(ye){return fe.wNAFCached(this,$,ye,me=>{const ve=R.invertBatch(me.map(we=>we.pz));return me.map((we,De)=>we.toAffine(ve[De])).map(ae.fromAffine)})}multiplyUnsafe(ye){const me=ae.ZERO;if(ye===To)return me;if(V(ye),ye===Aa)return this;const{endo:ve}=C;if(!ve)return fe.unsafeLadder(this,ye);let{k1neg:we,k1:De,k2neg:Te,k2:Se}=ve.splitScalar(ye),Le=me,$e=me,ie=this;for(;De>To||Se>To;)De&Aa&&(Le=Le.add(ie)),Se&Aa&&($e=$e.add(ie)),ie=ie.double(),De>>=Aa,Se>>=Aa;return we&&(Le=Le.negate()),Te&&($e=$e.negate()),$e=new ae(R.mul($e.px,ve.beta),$e.py,$e.pz),Le.add($e)}multiply(ye){V(ye);let me,ve,we=ye;const{endo:De}=C;if(De){const{k1neg:Te,k1:Se,k2neg:Le,k2:$e}=De.splitScalar(we);let{p:ie,f:L}=this.wNAF(Se),{p:j,f:X}=this.wNAF($e);ie=fe.constTimeNegate(Te,ie),j=fe.constTimeNegate(Le,j),j=new ae(R.mul(j.px,De.beta),j.py,j.pz),me=ie.add(j),ve=L.add(X)}else{const{p:Te,f:Se}=this.wNAF(we);me=Te,ve=Se}return ae.normalizeZ([me,ve])[0]}multiplyAndAddUnsafe(ye,me,ve){const we=ae.BASE,De=(Se,Le)=>Le!==To&&Le!==Aa&&Se.equals(we)?Se.multiply(Le):Se.multiplyUnsafe(Le),Te=De(this,me).add(De(ye,ve));return Te.is0()?void 0:Te}toAffine(ye){const{px:me,py:ve,pz:we}=this,De=this.is0();ye==null&&(ye=De?R.ONE:R.inv(we));const Te=R.mul(me,ye),Se=R.mul(ve,ye),Le=R.mul(we,ye);if(De)return{x:R.ZERO,y:R.ZERO};if(!R.eql(Le,R.ONE))throw new Error("invZ was invalid");return{x:Te,y:Se}}isTorsionFree(){const{h:ye,isTorsionFree:me}=C;if(ye===Aa)return!0;if(me)return me(ae,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:ye,clearCofactor:me}=C;return ye===Aa?this:me?me(ae,this):this.multiplyUnsafe(C.h)}toRawBytes(ye=!0){return this.assertValidity(),S(ae,this,ye)}toHex(ye=!0){return vd(this.toRawBytes(ye))}}ae.BASE=new ae(C.Gx,C.Gy,R.ONE),ae.ZERO=new ae(R.ZERO,R.ONE,R.ZERO);const ce=C.nBitLength,fe=wk(ae,C.endo?Math.ceil(ce/2):ce);return{CURVE:C,ProjectivePoint:ae,normPrivateKeyToScalar:P,weierstrassEquation:U,isWithinCurveOrder:H}})({...a,toBytes(M,C,R){const S=C.toAffine(),_=o.toBytes(S.x),U=bd;return R?U(Uint8Array.from([C.hasEvenY()?2:3]),_):U(Uint8Array.from([4]),_,o.toBytes(S.y))},fromBytes(M){const C=M.length,R=M[0],S=M.subarray(1);if(C!==c||R!==2&&R!==3){if(C===l&&R===4)return{x:o.fromBytes(S.subarray(0,o.BYTES)),y:o.fromBytes(S.subarray(o.BYTES,2*o.BYTES))};throw new Error(`Point of length ${C} was invalid. Expected ${c} compressed bytes or ${l} uncompressed bytes`)}{const U=rl(S);if(!(To<(_=U)&&_<o.ORDER))throw new Error("Point is not on curve");const H=b(U);let V;try{V=o.sqrt(H)}catch(P){const $=P instanceof Error?": "+P.message:"";throw new Error("Point is not on curve"+$)}return!(1&~R)!=((V&Aa)===Aa)&&(V=o.neg(V)),{x:U,y:V}}var _}}),E=M=>vd(Bp(M,a.nByteLength));function x(M){return M>s>>Aa}const D=(M,C,R)=>rl(M.slice(C,R));class N{constructor(C,R,S){this.r=C,this.s=R,this.recovery=S,this.assertValidity()}static fromCompact(C){const R=a.nByteLength;return C=Sn("compactSignature",C,2*R),new N(D(C,0,R),D(C,R,2*R))}static fromDER(C){const{r:R,s:S}=ll.toSig(Sn("DER",C));return new N(R,S)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(C){return new N(this.r,this.s,C)}recoverPublicKey(C){const{r:R,s:S,recovery:_}=this,U=T(Sn("msgHash",C));if(_==null||![0,1,2,3].includes(_))throw new Error("recovery id invalid");const H=_===2||_===3?R+a.n:R;if(H>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=y.fromHex((1&_?"03":"02")+E(H)),P=h(H),$=d(-U*P),te=d(S*P),ae=y.BASE.multiplyAndAddUnsafe(V,$,te);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return x(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return v0(this.toDERHex())}toDERHex(){return ll.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return v0(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const B={isValidPrivateKey(M){try{return m(M),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const M=LN(a.n);return(function(C,R,S=!1){const _=C.length,U=bk(R),H=LN(R);if(_<16||_<H||_>1024)throw new Error(`expected ${H}-1024 bytes of input, got ${_}`);const V=Rr(S?rl(C):Np(C),R-Ir)+Ir;return S?jv(V,U):Bp(V,U)})(a.randomBytes(M),a.n)},precompute:(M=8,C=y.BASE)=>(C._setWindowSize(M),C.multiply(BigInt(3)),C)};function k(M){const C=gd(M),R=typeof M=="string",S=(C||R)&&M.length;return C?S===c||S===l:R?S===2*c||S===2*l:M instanceof y}const F=a.bits2int||function(M){const C=rl(M),R=8*M.length-a.nBitLength;return R>0?C>>BigInt(R):C},T=a.bits2int_modN||function(M){return d(F(M))},z=gk(a.nBitLength);function Z(M){if(typeof M!="bigint")throw new Error("bigint expected");if(!(To<=M&&M<z))throw new Error(`bigint expected < 2^${a.nBitLength}`);return Bp(M,a.nByteLength)}const Y={lowS:a.lowS,prehash:!1},W={lowS:a.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:a,getPublicKey:function(M,C=!0){return y.fromPrivateKey(M).toRawBytes(C)},getSharedSecret:function(M,C,R=!0){if(k(M))throw new Error("first arg must be private key");if(!k(C))throw new Error("second arg must be public key");return y.fromHex(C).multiply(m(M)).toRawBytes(R)},sign:function(M,C,R=Y){const{seed:S,k2sig:_}=(function(U,H,V=Y){if(["recovered","canonical"].some(we=>we in V))throw new Error("sign() legacy options not supported");const{hash:P,randomBytes:$}=a;let{lowS:te,prehash:ae,extraEntropy:ce}=V;te==null&&(te=!0),U=Sn("msgHash",U),ae&&(U=Sn("prehashed msgHash",P(U)));const fe=T(U),oe=m(H),ye=[Z(oe),Z(fe)];if(ce!=null&&ce!==!1){const we=ce===!0?$(o.BYTES):ce;ye.push(Sn("extraEntropy",we))}const me=bd(...ye),ve=fe;return{seed:me,k2sig:function(we){const De=F(we);if(!v(De))return;const Te=h(De),Se=y.BASE.multiply(De).toAffine(),Le=d(Se.x);if(Le===To)return;const $e=d(Te*d(ve+Le*oe));if($e===To)return;let ie=(Se.x===Le?0:2)|Number(Se.y&Aa),L=$e;return te&&x($e)&&(L=(function(j){return x(j)?d(-j):j})($e),ie^=1),new N(Le,L,ie)}}})(M,C,R);return Uie(a.hash.outputLen,a.nByteLength,a.hmac)(S,_)},verify:function(M,C,R,S=W){const _=M;if(C=Sn("msgHash",C),R=Sn("publicKey",R),"strict"in S)throw new Error("options.strict was renamed to lowS");const{lowS:U,prehash:H}=S;let V,P;try{if(typeof _=="string"||gd(_))try{V=N.fromDER(_)}catch(me){if(!(me instanceof ll.Err))throw me;V=N.fromCompact(_)}else{if(typeof _!="object"||typeof _.r!="bigint"||typeof _.s!="bigint")throw new Error("PARSE");{const{r:me,s:ve}=_;V=new N(me,ve)}}P=y.fromHex(R)}catch(me){if(me.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(U&&V.hasHighS())return!1;H&&(C=a.hash(C));const{r:$,s:te}=V,ae=T(C),ce=h(te),fe=d(ae*ce),oe=d($*ce),ye=y.BASE.multiplyAndAddUnsafe(P,fe,oe)?.toAffine();return!!ye&&d(ye.x)===$},ProjectivePoint:y,Signature:N,utils:B}})({...r,...fae(n)});return Object.freeze({...t(e),create:t})}BigInt(4);const VN=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),HN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),dae=BigInt(1),y8=BigInt(2),KN=(r,e)=>(r+e/y8)/e,m8=XA(VN,void 0,void 0,{sqrt:function(r){const e=VN,t=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),c=BigInt(88),l=r*r*r%e,d=l*l*r%e,h=jr(d,t,e)*d%e,y=jr(h,t,e)*d%e,m=jr(y,y8,e)*l%e,b=jr(m,i,e)*m%e,v=jr(b,a,e)*b%e,E=jr(v,s,e)*v%e,x=jr(E,c,e)*E%e,D=jr(x,s,e)*v%e,N=jr(D,t,e)*d%e,B=jr(N,o,e)*b%e,k=jr(B,n,e)*l%e,F=jr(k,y8,e);if(!m8.eql(m8.sqr(F),r))throw new Error("Cannot find square root");return F}}),Ld=Mk({a:BigInt(0),b:BigInt(7),Fp:m8,n:HN,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=HN,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-dae*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=t,o=BigInt("0x100000000000000000000000000000000"),s=KN(a*r,e),c=KN(-n*r,e);let l=Rr(r-s*t-c*i,e),d=Rr(-s*n-c*a,e);const h=l>o,y=d>o;if(h&&(l=e-l),y&&(d=e-d),l>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:h,k1:l,k2neg:y,k2:d}}}},xk);BigInt(0);const GN=XA(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),$v=Mk({a:GN.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:GN,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},xk);function WN(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function t6(r,...e){if(!((t=r)instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"))throw new Error("Uint8Array expected");var t;if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Fv(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Tk(r,e){t6(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const WE=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Ss=(r,e)=>r<<32-e|r>>>e,C1=(r,e)=>r<<e|r>>>32-e>>>0,ZN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function YN(r){for(let t=0;t<r.length;t++)r[t]=(e=r[t])<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;var e}function r6(r){return typeof r=="string"&&(r=(function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))})(r)),t6(r),r}class Rk{clone(){return this._cloneInto()}}function n6(r){const e=n=>r().update(r6(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}const hae=(r,e,t)=>r&e^r&t^e&t;class Ok extends Rk{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=WE(this.buffer)}update(e){Fv(this);const{view:t,buffer:n,blockLen:i}=this,a=(e=r6(e)).length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s!==i)n.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(t,0),this.pos=0);else{const c=WE(e);for(;i<=a-o;o+=i)this.process(c,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fv(this),Tk(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)t[h]=0;(function(h,y,m,b){if(typeof h.setBigUint64=="function")return h.setBigUint64(y,m,b);const v=BigInt(32),E=BigInt(4294967295),x=Number(m>>v&E),D=Number(m&E),N=b?0:4;h.setUint32(y+(b?4:0),x,b),h.setUint32(y+N,D,b)})(n,i-8,BigInt(8*this.length),a),this.process(n,0);const s=WE(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)s.setUint32(4*h,d[h],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:a,destroyed:o,pos:s}=this;return e.length=i,e.pos=s,e.finished=a,e.destroyed=o,i%t&&e.buffer.set(n),e}}const pae=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Uu=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ku=new Uint32Array(64);class yae extends Ok{constructor(){super(64,32,8,!1),this.A=0|Uu[0],this.B=0|Uu[1],this.C=0|Uu[2],this.D=0|Uu[3],this.E=0|Uu[4],this.F=0|Uu[5],this.G=0|Uu[6],this.H=0|Uu[7]}get(){const{A:e,B:t,C:n,D:i,E:a,F:o,G:s,H:c}=this;return[e,t,n,i,a,o,s,c]}set(e,t,n,i,a,o,s,c){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|i,this.E=0|a,this.F=0|o,this.G=0|s,this.H=0|c}process(e,t){for(let y=0;y<16;y++,t+=4)ku[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){const m=ku[y-15],b=ku[y-2],v=Ss(m,7)^Ss(m,18)^m>>>3,E=Ss(b,17)^Ss(b,19)^b>>>10;ku[y]=E+ku[y-7]+v+ku[y-16]|0}let{A:n,B:i,C:a,D:o,E:s,F:c,G:l,H:d}=this;for(let y=0;y<64;y++){const m=d+(Ss(s,6)^Ss(s,11)^Ss(s,25))+((h=s)&c^~h&l)+pae[y]+ku[y]|0,b=(Ss(n,2)^Ss(n,13)^Ss(n,22))+hae(n,i,a)|0;d=l,l=c,c=s,s=o+m|0,o=a,a=i,i=n,n=m+b|0}var h;n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,a,o,s,c,l,d)}roundClean(){ku.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const mae=n6(()=>new yae),gae=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Ck=new Uint8Array(new Array(16).fill(0).map((r,e)=>e));let i6=[Ck],a6=[Ck.map(r=>(9*r+5)%16)];for(let r=0;r<4;r++)for(let e of[i6,a6])e.push(e[r].map(t=>gae[t]));const Nk=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>new Uint8Array(r)),vae=i6.map((r,e)=>r.map(t=>Nk[e][t])),bae=a6.map((r,e)=>r.map(t=>Nk[e][t])),wae=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),_ae=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function QN(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const N1=new Uint32Array(16);class Eae extends Ok{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:i,h4:a}=this;return[e,t,n,i,a]}set(e,t,n,i,a){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|i,this.h4=0|a}process(e,t){for(let m=0;m<16;m++,t+=4)N1[m]=e.getUint32(t,!0);let n=0|this.h0,i=n,a=0|this.h1,o=a,s=0|this.h2,c=s,l=0|this.h3,d=l,h=0|this.h4,y=h;for(let m=0;m<5;m++){const b=4-m,v=wae[m],E=_ae[m],x=i6[m],D=a6[m],N=vae[m],B=bae[m];for(let k=0;k<16;k++){const F=C1(n+QN(m,a,s,l)+N1[x[k]]+v,N[k])+h|0;n=h,h=l,l=0|C1(s,10),s=a,a=F}for(let k=0;k<16;k++){const F=C1(i+QN(b,o,c,d)+N1[D[k]]+E,B[k])+y|0;i=y,y=d,d=0|C1(c,10),c=o,o=F}}this.set(this.h1+s+d|0,this.h2+l+y|0,this.h3+h+i|0,this.h4+n+o|0,this.h0+a+c|0)}roundClean(){N1.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const JN=n6(()=>new Eae),B1=BigInt(2**32-1),XN=BigInt(32);function xae(r,e=!1){return e?{h:Number(r&B1),l:Number(r>>XN&B1)}:{h:0|Number(r>>XN&B1),l:0|Number(r&B1)}}function Aae(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:a,l:o}=xae(r[i],e);[t[i],n[i]]=[a,o]}return[t,n]}const Bk=[],Ik=[],Dk=[],Sae=BigInt(0),lp=BigInt(1),Mae=BigInt(2),Tae=BigInt(7),Rae=BigInt(256),Oae=BigInt(113);for(let r=0,e=lp,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Bk.push(2*(5*n+t)),Ik.push((r+1)*(r+2)/2%64);let i=Sae;for(let a=0;a<7;a++)e=(e<<lp^(e>>Tae)*Oae)%Rae,e&Mae&&(i^=lp<<(lp<<BigInt(a))-lp);Dk.push(i)}const[Cae,Nae]=Aae(Dk,!0),eB=(r,e,t)=>t>32?((n,i,a)=>i<<a-32|n>>>64-a)(r,e,t):((n,i,a)=>n<<a|i>>>32-a)(r,e,t),tB=(r,e,t)=>t>32?((n,i,a)=>n<<a-32|i>>>64-a)(r,e,t):((n,i,a)=>i<<a|n>>>32-a)(r,e,t);class s6 extends Rk{constructor(e,t,n,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,WN(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var o;this.state=new Uint8Array(200),this.state32=(o=this.state,new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)))}keccak(){ZN||YN(this.state32),(function(e,t=24){const n=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const c=(s+8)%10,l=(s+2)%10,d=n[l],h=n[l+1],y=eB(d,h,1)^n[c],m=tB(d,h,1)^n[c+1];for(let b=0;b<50;b+=10)e[s+b]^=y,e[s+b+1]^=m}let a=e[2],o=e[3];for(let s=0;s<24;s++){const c=Ik[s],l=eB(a,o,c),d=tB(a,o,c),h=Bk[s];a=e[h],o=e[h+1],e[h]=l,e[h+1]=d}for(let s=0;s<50;s+=10){for(let c=0;c<10;c++)n[c]=e[s+c];for(let c=0;c<10;c++)e[s+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=Cae[i],e[1]^=Nae[i]}n.fill(0)})(this.state32,this.rounds),ZN||YN(this.state32),this.posOut=0,this.pos=0}update(e){Fv(this);const{blockLen:t,state:n}=this,i=(e=r6(e)).length;for(let a=0;a<i;){const o=Math.min(t-this.pos,i-a);for(let s=0;s<o;s++)n[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,128&t&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Fv(this,!1),t6(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,a=e.length;i<a;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,a-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return WN(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Tk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:a,enableXOF:o}=this;return e||(e=new s6(t,n,i,o,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Bae=n6(()=>new s6(136,1,32));var Iae=function r(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?r(e.toJSON()):Array.isArray(e)?`[${e.reduce((t,n,i)=>`${t}${i===0?"":","}${r(n===void 0||typeof n=="symbol"?null:n)}`,"")}]`:`{${Object.keys(e).sort().reduce((t,n)=>e[n]===void 0||typeof e[n]=="symbol"?t:`${t}${t.length===0?"":","}${r(n)}:${r(e[n])}`,"")}}`};function Dae(r,e){return e()}const rB="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",nB="[a-zA-Z0-9_.:%-]",Pae=new RegExp(`^did:([a-z0-9]+):((?:${rB}*:)*(${rB}+))((;${nB}+=${nB}*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$`);function o6(r){if(r===""||!r)return null;const e=r.match(Pae);if(e){const t={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:r};if(e[4]){const n=e[4].slice(1).split(";");t.params={};for(const i of n){const a=i.split("=");t.params[a[0]]=a[1]}}return e[6]&&(t.path=e[6]),e[7]&&(t.query=e[7].slice(1)),e[8]&&(t.fragment=e[8].slice(1)),t}return null}const I1={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class Uae{constructor(e={},t={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=t.cache===!0?(function(){const n=new Map;return function(i,a){try{let o=function(l){if(s)return l;const d=n.get(i.didUrl);return d!==void 0?d:Promise.resolve(a()).then(function(h){var y;return((y=h.didResolutionMetadata)==null?void 0:y.error)!=="notFound"&&n.set(i.didUrl,h),h})},s;const c=(function(){if(i.params&&i.params["no-cache"]==="true")return Promise.resolve(a()).then(function(l){return s=1,l})})();return Promise.resolve(c&&c.then?c.then(o):o(c))}catch(o){return Promise.reject(o)}}})():t.cache||Dae,t.legacyResolvers&&Object.keys(t.legacyResolvers).map(n=>{var i;this.registry[n]||(this.registry[n]=(i=t.legacyResolvers[n],function(a,o,s){try{return Promise.resolve((function(c,l){try{var d=Promise.resolve(i(a,o,s)).then(function(h){return{...I1,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:h}})}catch(h){return l(h)}return d&&d.then?d.then(void 0,l):d})(0,function(c){return{...I1,didResolutionMetadata:{error:"notFound",message:c.toString()}}}))}catch(c){return Promise.reject(c)}}))})}resolve(e,t={}){try{const n=this,i=o6(e);if(i===null)return Promise.resolve({...I1,didResolutionMetadata:{error:"invalidDid"}});const a=n.registry[i.method];return Promise.resolve(a?n.cache(i,()=>a(i.did,i,n,t)):{...I1,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(n){return Promise.reject(n)}}}function Pb(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}function kae(...r){const e=n=>n,t=(n,i)=>a=>n(i(a));return{encode:r.map(n=>n.encode).reduceRight(t,e),decode:r.map(n=>n.decode).reduce(t,e)}}function qae(r){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(t=>{if(Pb(t),t<0||t>=r.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${r.length})`);return r[t]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=r.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${r}`);return n})}}}function Sa(r=""){if(typeof r!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of e)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return e.join(r)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(r)}}}function D1(r,e="="){if(Pb(r),typeof e!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*r%8;)t.push(e);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*r%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===e;n--)if(!((n-1)*r%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function Pk(r){if(typeof r!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>r(e)}}const Uk=(r,e)=>e?Uk(e,r%e):r,zv=(r,e)=>r+(e-Uk(r,e));function g8(r,e,t,n){if(!Array.isArray(r))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(zv(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${zv(e,t)}`);let i=0,a=0;const o=2**t-1,s=[];for(const c of r){if(Pb(c),c>=2**e)throw new Error(`convertRadix2: invalid data word=${c} from=${e}`);if(i=i<<e|c,a+e>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${e}`);for(a+=e;a>=t;a-=t)s.push((i>>a-t&o)>>>0);i&=2**a-1}if(i=i<<t-a&o,!n&&a>=e)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&a>0&&s.push(i>>>0),s}function Ts(r,e=!1){if(Pb(r),r<=0||r>32)throw new Error("radix2: bits should be in (0..32]");if(zv(8,r)>32||zv(r,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!((n=t)instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"))throw new Error("radix2.encode input should be Uint8Array");var n;return g8(Array.from(t),8,r,!e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(g8(t,r,8,e))}}}function iB(r){if(typeof r!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return r.apply(null,e)}catch{}}}Sa(""),Ts(5),D1(5),Sa(""),Ts(5),Sa(""),Ts(5),D1(5),Sa(""),Ts(5),Sa(""),Ts(5),Sa(""),Pk(r=>r.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")),Ts(6),D1(6),Sa(""),Ts(6),Sa(""),Ts(6),D1(6),Sa(""),Ts(6),Sa("");const v8=kae(qae("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Sa("")),aB=[996825010,642813549,513874426,1027748829,705979059];function fp(r){const e=r>>25;let t=(33554431&r)<<5;for(let n=0;n<aB.length;n++)(e>>n&1)==1&&(t^=aB[n]);return t}function sB(r,e,t=1){const n=r.length;let i=1;for(let a=0;a<n;a++){const o=r.charCodeAt(a);if(o<33||o>126)throw new Error(`Invalid prefix (${r})`);i=fp(i)^o>>5}i=fp(i);for(let a=0;a<n;a++)i=fp(i)^31&r.charCodeAt(a);for(let a of e)i=fp(i)^a;for(let a=0;a<6;a++)i=fp(i);return i^=t,v8.encode(g8([i%2**30],30,5,!1))}function Lae(r){const t=Ts(5),n=t.decode,i=t.encode,a=iB(n);function o(s,c=90){if(typeof s!="string")throw new Error("bech32.decode input should be string, not "+typeof s);if(s.length<8||c!==!1&&s.length>c)throw new TypeError(`Wrong string length: ${s.length} (${s}). Expected (8..${c})`);const l=s.toLowerCase();if(s!==l&&s!==s.toUpperCase())throw new Error("String must be lowercase or uppercase");const d=l.lastIndexOf("1");if(d===0||d===-1)throw new Error('Letter "1" must be present between prefix and data only');const h=l.slice(0,d),y=l.slice(d+1);if(y.length<6)throw new Error("Data must be at least 6 characters long");const m=v8.decode(y).slice(0,-6),b=sB(h,m,1);if(!y.endsWith(b))throw new Error(`Invalid checksum in ${s}: expected "${b}"`);return{prefix:h,words:m}}return{encode:function(s,c,l=90){if(typeof s!="string")throw new Error("bech32.encode prefix should be string, not "+typeof s);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("bech32.encode words should be array of numbers, not "+typeof c);if(s.length===0)throw new TypeError(`Invalid prefix length ${s.length}`);const d=s.length+7+c.length;if(l!==!1&&d>l)throw new TypeError(`Length ${d} exceeds limit ${l}`);const h=s.toLowerCase(),y=sB(h,c,1);return`${h}1${v8.encode(c)}${y}`},decode:o,decodeToBytes:function(s){const{prefix:c,words:l}=o(s,!1);return{prefix:c,words:l,bytes:n(l)}},decodeUnsafe:iB(o),fromWords:n,fromWordsUnsafe:a,toWords:i}}const oB=Lae();Sa(""),Pk(r=>{if(typeof r!="string"||r.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof r} with length ${r.length}`);return r.toLowerCase()});const Hi={toString:fk,fromString:QA,concat:function(r,e){e||(e=r.reduce((i,a)=>i+a.length,0));const t=sk(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return YA(t)}};function kk(r){return Hi.toString(r,"base64url")}function Ra(r){const e=r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return Hi.fromString(e,"base64url")}function qk(r){return Hi.fromString(r,"base58btc")}const jae={ES256:["JsonWebKey2020","Multikey","EcdsaSecp256r1VerificationKey2019"],ES256K:["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1","JsonWebKey2020","Multikey"],"ES256K-R":["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1","ConditionalProof2022","JsonWebKey2020","Multikey"],Ed25519:["ED25519SignatureVerification","Ed25519VerificationKey2018","Ed25519VerificationKey2020","JsonWebKey2020","Multikey"],EdDSA:["ED25519SignatureVerification","Ed25519VerificationKey2018","Ed25519VerificationKey2020","JsonWebKey2020","Multikey"]},P1={Secp256k1SignatureVerificationKey2018:"Secp256k1",Secp256k1VerificationKey2018:"Secp256k1",EcdsaSecp256k1VerificationKey2019:"Secp256k1",EcdsaPublicKeySecp256k1:"Secp256k1",EcdsaSecp256k1RecoveryMethod2020:"Secp256k1",EcdsaSecp256r1VerificationKey2019:"P-256",Ed25519VerificationKey2018:"Ed25519",Ed25519VerificationKey2020:"Ed25519",ED25519SignatureVerification:"Ed25519",X25519KeyAgreementKey2019:"X25519",X25519KeyAgreementKey2020:"X25519",ConditionalProof2022:void 0,JsonWebKey2020:void 0,Multikey:void 0},Lk={"ed25519-pub":237,"x25519-pub":236,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"p256-pub":4608},$ae={"bls12_381-g1-pub":"Bls12381G1","bls12_381-g2-pub":"Bls12381G2","ed25519-pub":"Ed25519","p256-pub":"P-256","secp256k1-pub":"Secp256k1","x25519-pub":"X25519"};function Vv(r){if(r.publicKeyBase58)return{keyBytes:qk(r.publicKeyBase58),keyType:P1[r.type]};if(r.publicKeyBase64)return{keyBytes:Ra(r.publicKeyBase64),keyType:P1[r.type]};if(r.publicKeyHex)return{keyBytes:Ip(r.publicKeyHex),keyType:P1[r.type]};if(r.publicKeyJwk&&r.publicKeyJwk.crv==="secp256k1"&&r.publicKeyJwk.x&&r.publicKeyJwk.y)return{keyBytes:Ld.ProjectivePoint.fromAffine({x:U1(Ra(r.publicKeyJwk.x)),y:U1(Ra(r.publicKeyJwk.y))}).toRawBytes(!1),keyType:"Secp256k1"};if(r.publicKeyJwk&&r.publicKeyJwk.crv==="P-256"&&r.publicKeyJwk.x&&r.publicKeyJwk.y)return{keyBytes:$v.ProjectivePoint.fromAffine({x:U1(Ra(r.publicKeyJwk.x)),y:U1(Ra(r.publicKeyJwk.y))}).toRawBytes(!1),keyType:"P-256"};if(r.publicKeyJwk&&r.publicKeyJwk.kty==="OKP"&&["Ed25519","X25519"].includes(r.publicKeyJwk.crv??"")&&r.publicKeyJwk.x)return{keyBytes:Ra(r.publicKeyJwk.x),keyType:r.publicKeyJwk.crv};if(r.publicKeyMultibase){const{keyBytes:e,keyType:t}=(function(n){const i=p8.decode(n);if([32,33,48,64,65,96].includes(i.length))return{keyBytes:i};try{const[a,o]=wie(i),s=Object.entries(Lk).filter(([,c])=>c===a)?.[0][0]??"";return{keyBytes:i.slice(o),keyType:$ae[s]}}catch{return{keyBytes:i}}})(r.publicKeyMultibase);return{keyBytes:e,keyType:t??P1[r.type]}}return{keyBytes:new Uint8Array}}function Ip(r,e){let t=r.startsWith("0x")?r.substring(2):r;return t.length%2!=0&&(t=`0${t}`),Hi.fromString(t.toLowerCase(),"base16")}function uB(r){return Hi.toString(Ra(r))}function tc(r){return Hi.toString(r,"base16")}function U1(r){return BigInt("0x"+Hi.toString(r,"base16"))}function Hv({r,s:e,recoveryParam:t},n){const i=new Uint8Array(n?65:64);if(i.set(Hi.fromString(r,"base16"),0),i.set(Hi.fromString(e,"base16"),32),n){if(t===void 0)throw new Error("Signer did not return a recoveryParam");i[64]=t}return kk(i)}function k1(r,e=64){return r.length===e?r:"0".repeat(e-r.length)+r}function Po(r){const e=typeof r=="string"?QA(r):r;return mae(e)}const Fae=Bae;function cB(r){const e=QA(r.slice(2),"base16");return`0x${fk(Fae(e).slice(-20),"base16")}`}function u6(r){return typeof r=="object"&&"r"in r&&"s"in r}function lB(r){return function(e,t){try{return Promise.resolve(t(e)).then(function(n){if(u6(n))return Hv(n,r);if(r&&(function(i){const a=Ra(i);if(a.length<64||a.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${a.length}`);return{r:tc(a.slice(0,32)),s:tc(a.slice(32,64)),recoveryParam:a.length===65?a[64]:void 0}})(n).recoveryParam===void 0)throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return n})}catch(n){return Promise.reject(n)}}}function fB(){return function(r,e){try{return Promise.resolve(e(r)).then(function(t){if(u6(t))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return t})}catch(t){return Promise.reject(t)}}}const zae={ES256:function(r,e){try{return Promise.resolve(e(r)).then(function(t){return u6(t)?Hv(t):t})}catch(t){return Promise.reject(t)}},ES256K:lB(),"ES256K-R":lB(!0),Ed25519:fB(),EdDSA:fB()};function b8(r,e=!1){const t=Ra(r);if(t.length!==(e?65:64))throw new Error("wrong signature length");return{compact:t.slice(0,64),recovery:t[64]}}function dB(r,e,t){const n=[];if(e.length>86)n.push(b8(e,!0));else{const o=b8(e,!1);n.push({...o,recovery:0}),n.push({...o,recovery:1})}const i=Po(r),a=o=>{const s=Ld.Signature.fromCompact(o.compact).addRecoveryBit(o.recovery||0).recoverPublicKey(i),c=cB(s.toHex(!1)).toLowerCase(),l=s.toHex(!1),d=s.toHex(!0);return t.find(h=>{const{keyBytes:y}=Vv(h),m=tc(y);return m===l||m===d||h.ethereumAddress?.toLowerCase()===c||h.blockchainAccountId?.split("@eip155")?.[0].toLowerCase()===c||(function(b,v){if(v){const E=v.split(":");switch(E[0]){case"bip122":E[E.length-1]=(function(x,D){const N=tc(qk(D).slice(0,1)),B=Ip(x),k=N+tc(JN(Po(B))),F=Po(Ip(k));return T=Ip(k+tc(Po(F)).substring(0,8)),Hi.toString(T,"base58btc");var T})(b,E[E.length-1]);break;case"cosmos":E[E.length-1]=(function(x,D){const N=Ld.ProjectivePoint.fromHex(x).toRawBytes(),B=JN(Po(N)),k=oB.toWords(B);return oB.encode(D,k).replace(D,"")})(b,E[1]);break;case"eip155":E[E.length-1]=cB(b);break;default:return!1}return E.join(":").toLowerCase()===v.toLowerCase()}return!1})(l,h.blockchainAccountId)})};for(const o of n){const s=a(o);if(s)return s}throw new Error("invalid_signature: Signature invalid for JWT")}function hB(r,e,t){const n=Hi.fromString(r,"utf-8"),i=Ra(e),a=t.find(o=>{const{keyBytes:s,keyType:c}=Vv(o);return c==="Ed25519"&&Jie.verify(i,n,s)});if(!a)throw new Error("invalid_signature: Signature invalid for JWT");return a}const Vae={ES256:function(r,e,t){const n=Po(r),i=$v.Signature.fromCompact(b8(e).compact),a=t.filter(o=>!o.ethereumAddress&&!o.blockchainAccountId).find(o=>{try{const{keyBytes:s}=Vv(o);return $v.verify(i,n,s)}catch{return!1}});if(!a)throw new Error("invalid_signature: Signature invalid for JWT");return a},ES256K:function(r,e,t){const n=Po(r),i=Ld.Signature.fromCompact(Ra(e)).normalizeS(),a=t.filter(c=>!c.ethereumAddress&&!c.blockchainAccountId),o=t.filter(c=>c.ethereumAddress||c.blockchainAccountId);let s=a.find(c=>{try{const{keyBytes:l}=Vv(c);return Ld.verify(i,n,l)}catch{return!1}});if(!s&&o.length>0&&(s=dB(r,e,o)),!s)throw new Error("invalid_signature: Signature invalid for JWT");return s},"ES256K-R":dB,Ed25519:hB,EdDSA:hB};function jk(r){const e=Vae[r];if(!e)throw new Error(`not_supported: Unsupported algorithm ${r}`);return e}jk.toSignatureObject=function(r,e=!1){const t=Ra(r);if(t.length!==(e?65:64))throw new Error("wrong signature length");const n={r:tc(t.slice(0,32)),s:tc(t.slice(32,64))};return e&&(n.recoveryParam=t[64]),n};const pr={INVALID_JWT:"invalid_jwt",INVALID_AUDIENCE:"invalid_config",INVALID_SIGNATURE:"invalid_signature",NO_SUITABLE_KEYS:"no_suitable_keys",NOT_SUPPORTED:"not_supported",RESOLVER_ERROR:"resolver_error"},pB=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function pi(r,e,t){if(!r.s){if(t instanceof od){if(!t.s)return void(t.o=pi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(pi.bind(null,r,e),pi.bind(null,r,2));r.s=e,r.v=t;const n=r.o;n&&n(r)}}const od=(function(){function r(){}return r.prototype.then=function(e,t){const n=new r,i=this.s;if(i){const a=1&i?e:t;if(a){try{pi(n,1,a(this.v))}catch(o){pi(n,2,o)}return n}return this}return this.o=function(a){try{const o=a.v;1&a.s?pi(n,1,e?e(o):o):t?pi(n,1,t(o)):pi(n,2,o)}catch(o){pi(n,2,o)}},n},r})();function yB(r){return r instanceof od&&1&r.s}const mB=function(r,{header:e,payload:t,signature:n,data:i},a,o){try{return a.type===ZE?(function(s,{header:c,payload:l,signature:d,data:h},y,m){try{if(y.conditionWeightedThreshold)return(function(b,{header:v,payload:E,data:x,signature:D},N,B){try{let k=function(W){if(F)return W;throw new Error(`${pr.INVALID_SIGNATURE}: condition for authenticator ${N.id} is not met.`)},F;if(!N.conditionWeightedThreshold||!N.threshold)throw new Error("Expected conditionWeightedThreshold and threshold");const T=[],z=N.threshold;let Z=0;const Y=(function(W,M,C){if(typeof W[pB]=="function"){var R,S,_,U=W[pB]();if((function $(te){try{for(;!((R=U.next()).done||C&&C());)if((te=M(R.value))&&te.then){if(!yB(te))return void te.then($,_||(_=pi.bind(null,S=new od,2)));te=te.v}S?pi(S,1,te):S=te}catch(ae){pi(S||(S=new od),2,ae)}})(),U.return){var H=function($){try{R.done||U.return()}catch{}return $};if(S&&S.then)return S.then(H,function($){throw H($)});H()}return S}if(!("length"in W))throw new TypeError("Object is not iterable");for(var V=[],P=0;P<W.length;P++)V.push(W[P]);return(function($,te,ae){var ce,fe,oe=-1;return(function ye(me){try{for(;++oe<$.length&&(!ae||!ae());)if((me=te(oe))&&me.then){if(!yB(me))return void me.then(ye,fe||(fe=pi.bind(null,ce=new od,2)));me=me.v}ce?pi(ce,1,me):ce=me}catch(ve){pi(ce||(ce=new od),2,ve)}})(),ce})(V,function($){return M(V[$])},C)})(N.conditionWeightedThreshold,function(W){function M(_){return F?_:R&&!T.includes(R.id)&&(T.push(R.id),Z+=W.weight,Z>=z)?(F=1,N):void 0}const C=W.condition;let R;const S=(function(_,U){try{var H=(function(){if(C.type===ZE){if(!B.didAuthenticator)throw new Error("Expected didAuthenticator");const V={...B,didAuthenticator:{didResolutionResult:B.didAuthenticator?.didResolutionResult,authenticators:[C],issuer:C.id}};return Promise.resolve(w8(b,V)).then(function({verified:P}){P&&(R=C)})}return Promise.resolve(YE({header:v,payload:E,data:x,signature:D},C)).then(function(V){R=V})})()}catch(V){return U(V)}return H&&H.then?H.then(void 0,U):H})(0,function(_){if(!_.message.startsWith(pr.INVALID_SIGNATURE))throw _});return S&&S.then?S.then(M):M(S)},function(){return F});return Promise.resolve(Y&&Y.then?Y.then(k):k(Y))}catch(k){return Promise.reject(k)}})(s,{header:c,payload:l,data:h,signature:d},y,m);if(y.conditionDelegated)return(function(b,{header:v,payload:E,data:x,signature:D},N,B){try{if(!N.conditionDelegated)throw new Error("Expected conditionDelegated");if(!B.resolver)throw new Error("Expected resolver");let k;const F=N.conditionDelegated;return Promise.resolve($k(B.resolver,v.alg,F,B.proofPurpose)).then(function(T){function z(M){if(k)return N;throw new Error(`${pr.INVALID_SIGNATURE}: condition for authenticator ${N.id} is not met.`)}const Z=T.didResolutionResult;if(!Z?.didDocument)throw new Error(`${pr.RESOLVER_ERROR}: Could not resolve delegated DID ${F}.`);const Y=T.authenticators.find(M=>M.id===F);if(!Y)throw new Error(`${pr.NO_SUITABLE_KEYS}: Could not find delegated authenticator ${F} in it's DID Document`);const W=(function(){if(Y.type===ZE)return Promise.resolve(w8(b,{...B,didAuthenticator:{didResolutionResult:Z,authenticators:[Y],issuer:Y.id}})).then(function({verified:M}){M&&(k=Y)});try{k=YE({header:v,payload:E,data:x,signature:D},Y)}catch(M){if(!M.message.startsWith("invalid_signature:"))throw M}})();return W&&W.then?W.then(z):z()})}catch(k){return Promise.reject(k)}})(s,{header:c,payload:l,data:h,signature:d},y,m);throw new Error(`${pr.INVALID_JWT}: conditional proof type did not find condition for authenticator ${y.id}.`)}catch(b){return Promise.reject(b)}})(r,{payload:t,header:e,signature:n,data:i},a,o):Promise.resolve(YE({header:e,payload:t,data:i,signature:n},[a]))}catch(s){return Promise.reject(s)}},ZE="ConditionalProof2022";function ii(r,e,t){if(!r.s){if(t instanceof w0){if(!t.s)return void(t.o=ii.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(ii.bind(null,r,e),ii.bind(null,r,2));r.s=e,r.v=t;const n=r.o;n&&n(r)}}const w0=(function(){function r(){}return r.prototype.then=function(e,t){const n=new r,i=this.s;if(i){const a=1&i?e:t;if(a){try{ii(n,1,a(this.v))}catch(o){ii(n,2,o)}return n}return this}return this.o=function(a){try{const o=a.v;1&a.s?ii(n,1,e?e(o):o):t?ii(n,1,t(o)):ii(n,2,o)}catch(o){ii(n,2,o)}},n},r})();function ed(r){return r instanceof w0&&1&r.s}const $k=function(r,e,t,n){try{const i=jae[e];if(!i||i.length===0)throw new Error(`${pr.NOT_SUPPORTED}: No supported signature types for algorithm ${e}`);let a;return Promise.resolve(r.resolve(t,{accept:vB})).then(function(o){if(a=Object.getOwnPropertyNames(o).indexOf("didDocument")===-1?{didDocument:o,didDocumentMetadata:{},didResolutionMetadata:{contentType:vB}}:o,a.didResolutionMetadata?.error||a.didDocument==null){const{error:d,message:h}=a.didResolutionMetadata;throw new Error(`${pr.RESOLVER_ERROR}: Unable to resolve DID document for ${t}: ${d}, ${h||""}`)}const s=(d,h)=>{const y=d.filter(({id:m})=>h===m);return y.length>0?y[0]:null};let c=[...a?.didDocument?.verificationMethod||[],...a?.didDocument?.publicKey||[]];typeof n=="string"&&(n.startsWith("assertion")&&!Object.getOwnPropertyNames(a?.didDocument).includes("assertionMethod")&&(a.didDocument={...a.didDocument},a.didDocument.assertionMethod=[...c.map(d=>d.id)]),c=(a.didDocument[n]||[]).map(d=>typeof d=="string"?s(c,d):typeof d.publicKey=="string"?s(c,d.publicKey):d).filter(d=>d!=null));const l=c.filter(({type:d})=>i.find(h=>h===d));if(typeof n=="string"&&(!l||l.length===0))throw new Error(`${pr.NO_SUITABLE_KEYS}: DID document for ${t} does not have public keys suitable for ${e} with ${n} purpose`);if(!l||l.length===0)throw new Error(`${pr.NO_SUITABLE_KEYS}: DID document for ${t} does not have public keys for ${e}`);return{authenticators:l,issuer:t,didResolutionResult:a}})}catch(i){return Promise.reject(i)}},w8=function(r,e={resolver:void 0,auth:void 0,audience:void 0,callbackUrl:void 0,skewTime:void 0,proofPurpose:void 0,policies:{},didAuthenticator:void 0}){try{let t=function(){function m(x){if(v){const D=typeof e.policies?.now=="number"?e.policies.now:Math.floor(Date.now()/1e3),N=e.skewTime!==void 0&&e.skewTime>=0?e.skewTime:Yae,B=D+N;if(e.policies?.nbf!==!1&&n.nbf){if(n.nbf>B)throw new Error(`${pr.INVALID_JWT}: JWT not valid before nbf: ${n.nbf}`)}else if(e.policies?.iat!==!1&&n.iat&&n.iat>B)throw new Error(`${pr.INVALID_JWT}: JWT not valid yet (issued in the future) iat: ${n.iat}`);if(e.policies?.exp!==!1&&n.exp&&n.exp<=D-N)throw new Error(`${pr.INVALID_JWT}: JWT has expired: exp: ${n.exp} < now: ${D}`);if(e.policies?.aud!==!1&&n.aud){if(!e.audience&&!e.callbackUrl)throw new Error(`${pr.INVALID_AUDIENCE}: JWT audience is required but your app address has not been configured`);if((Array.isArray(n.aud)?n.aud:[n.aud]).find(k=>e.audience===k||e.callbackUrl===k)===void 0)throw new Error(`${pr.INVALID_AUDIENCE}: JWT audience does not match your DID or callback url`)}return{verified:!0,payload:n,didResolutionResult:h,issuer:d,signer:v,jwt:r,policies:e.policies}}throw new Error(`${pr.INVALID_SIGNATURE}: JWT not valid. issuer DID document does not contain a verificationMethod that matches the signature.`)}const{did:b}=o6(c);let v=null;const E=(function(){if(b!==c){const x=l.find(D=>D.id===c);if(!x)throw new Error(`${pr.INVALID_JWT}: No authenticator found for did URL ${c}`);return Promise.resolve(mB(r,{payload:n,header:i,signature:a,data:o},x,e)).then(function(D){v=D})}{let x=0;return(function(D,N,B){for(var k;;){var F=D();if(ed(F)&&(F=F.v),!F)return T;if(F.then){k=0;break}var T=B();if(T&&T.then){if(!ed(T)){k=1;break}T=T.s}var z}var Z=new w0,Y=ii.bind(null,Z,2);return(k===0?F.then(M):k===1?T.then(W):z.then(C)).then(void 0,Y),Z;function W(R){T=R;do{if(N&&(z=N())&&z.then&&ed(z),!(F=D())||ed(F)&&!F.v)return void ii(Z,1,T);if(F.then)return void F.then(M).then(void 0,Y);ed(T=B())&&(T=T.v)}while(!T||!T.then);T.then(W).then(void 0,Y)}function M(R){R?(T=B())&&T.then?T.then(W).then(void 0,Y):W(T):ii(Z,1,T)}function C(){(F=D())?F.then?F.then(M).then(void 0,Y):M(F):ii(Z,1,T)}})(function(){return!v&&x<l.length},void 0,function(){function D(k){x++}const N=l[x],B=(function(k,F){try{var T=Promise.resolve(mB(r,{payload:n,header:i,signature:a,data:o},N,e)).then(function(z){v=z})}catch(z){return F(z)}return T&&T.then?T.then(void 0,F):T})(0,function(k){if(!k.message.includes(pr.INVALID_SIGNATURE)||x===l.length-1)throw k});return B&&B.then?B.then(D):D()})}})();return E&&E.then?E.then(m):m()};if(!e.resolver)throw new Error("missing_resolver: No DID resolver has been configured");const{payload:n,header:i,signature:a,data:o}=ey(r,!1),s=Object.prototype.hasOwnProperty.call(e,"auth")?e.auth?"authentication":void 0:e.proofPurpose;let c,l,d,h;if(!n.iss&&!n.client_id)throw new Error(`${pr.INVALID_JWT}: JWT iss or client_id are required`);if(e.didAuthenticator)c=e.didAuthenticator.issuer;else if(n.iss===Kae||n.iss===Gae){if(!n.sub)throw new Error(`${pr.INVALID_JWT}: JWT sub is required`);c=n.sub_jwk===void 0?n.sub:(i.kid||"").split("#")[0]}else if(n.iss===Wae){if(!n.did)throw new Error(`${pr.INVALID_JWT}: JWT did is required`);c=n.did}else if(!n.iss&&n.scope==="openid"&&n.redirect_uri){if(!n.client_id)throw new Error(`${pr.INVALID_JWT}: JWT client_id is required`);c=n.client_id}else c=n.iss;if(!c)throw new Error(`${pr.INVALID_JWT}: No DID has been found in the JWT`);const y=(function(){if(!e.didAuthenticator)return Promise.resolve($k(e.resolver,i.alg,c,s)).then(function(m){({didResolutionResult:h,authenticators:l,issuer:d}=m),e.didAuthenticator={didResolutionResult:h,authenticators:l,issuer:d}});({didResolutionResult:h,authenticators:l,issuer:d}=e.didAuthenticator)})();return Promise.resolve(y&&y.then?y.then(t):t())}catch(t){return Promise.reject(t)}},gB=function(r,{issuer:e,signer:t,alg:n,expiresIn:i,canonicalize:a},o={}){try{if(!t)throw new Error("missing_signer: No Signer functionality has been configured");if(!e)throw new Error("missing_issuer: No issuing DID has been configured");o.typ||(o.typ="JWT"),o.alg||(o.alg=n);const s={iat:Math.floor(Date.now()/1e3),exp:void 0};if(i){if(typeof i!="number")throw new Error("invalid_argument: JWT expiresIn is not a number");s.exp=(r.nbf||s.iat)+Math.floor(i)}const c={...s,...r,iss:e};return Hae(c,t,o,{canonicalize:a})}catch(s){return Promise.reject(s)}},Hae=function(r,e,t={},n={}){try{t.alg||(t.alg=Zae);const i=typeof r=="string"?r:bB(r,n.canonicalize),a=[bB(t,n.canonicalize),i].join("."),o=(function(s){const c=zae[s];if(!c)throw new Error(`not_supported: Unsupported algorithm ${s}`);return c})(t.alg);return Promise.resolve(o(a,e)).then(function(s){return[a,s].join(".")})}catch(i){return Promise.reject(i)}},Kae="https://self-issued.me/v2",Gae="https://self-issued.me/v2/openid-vc",Wae="https://self-issued.me",Zae="ES256K",vB="application/did+json";function bB(r,e=!1){return t=e?Iae(r):JSON.stringify(r),kk(Hi.fromString(t));var t}const Yae=300;function ey(r,e=!0){if(!r)throw new Error("invalid_argument: no JWT passed into decodeJWT");try{const t=(function(a){const o=a.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(o)return{header:JSON.parse(uB(o[1])),payload:o[2],signature:o[3],data:`${o[1]}.${o[2]}`};throw new Error("invalid_argument: Incorrect format JWS")})(r),n=Object.assign(t,{payload:JSON.parse(uB(t.payload))}),i=n.payload.iss;if(n.header.cty==="JWT"&&e){const a=ey(n.payload.jwt);if(a.payload.iss!==i)throw new Error(`${pr.INVALID_JWT}: multiple issuers`);return a}return n}catch{throw new Error("invalid_argument: Incorrect format JWT")}}function YE({header:r,payload:e,data:t,signature:n},i){Array.isArray(i)||(i=[i]);const a=e.iss;let o=!0;do{if(a!==e.iss)throw new Error(`${pr.INVALID_JWT}: multiple issuers`);try{return jk(r.alg)(t,n,i)}catch(s){if(!s.message.startsWith(pr.INVALID_SIGNATURE))throw s}r.cty!=="JWT"?o=!1:{payload:e,header:r,signature:n,data:t}=ey(e.jwt,!1)}while(o);throw new Error(`${pr.INVALID_SIGNATURE}: no matching public key found`)}function Fk(r){return vV(new Uint8Array(r))}function zk(r){if(r.type===_t.K1)return(function(e,t=!1){const n=e;if(n.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${n.length}`);return function(i){try{const a=Ld.sign(Po(i),n);return Promise.resolve(Hv({r:k1(a.r.toString(16)),s:k1(a.s.toString(16)),recoveryParam:a.recovery},t))}catch(a){return Promise.reject(a)}}})(r.data.array,!0);if(r.type===_t.R1||r.type===_t.WA)return(function(e){if(e.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${e.length}`);return function(t){try{const n=$v.sign(Po(t),e);return Promise.resolve(Hv({r:k1(n.r.toString(16)),s:k1(n.s.toString(16))}))}catch(n){return Promise.reject(n)}}})(r.data.array);throw new Error("Unsupported key type")}function _0(r){var e=Fk(r);return Array.from(e).map(Qae).join("")}function jd(r){return $t.hash(lt.from(Jae(r),"hex")).toString()}function Qae(r){return("0"+r.toString(16)).slice(-2)}function Jae(r){return r.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}function rv(){var r=Fk(32),e=new KI(_t.K1,new lt(r)),t=e.toPublic();return{privateKey:e,publicKey:t}}function Vk(r,e){return{sign:function(t){try{return Promise.resolve(r.signData({level:e,data:t,outputType:"jwt"}))}catch(n){return Promise.reject(n)}}}}typeof Symbol>"u"||Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"));var wd,Hk,Kk=qt("tonomy-sdk:settings");if(typeof Proxy>"u")throw new Error("This environment doesn't support Proxy");var c6=!1;function Xae(r){Kk("Settings initialized",r),wd||(wd={});for(var e=0,t=Object.entries(r);e<t.length;e++){var n=t[e],i=n[1];i!=null&&(wd[n[0]]=i)}c6=!0}function ese(r){Hk=r}function Gk(){return Hk}function Ki(){return c6||ot("Settings not yet initialized",Ge.SettingsNotInitialized),new Proxy(wd,{get:function(r,e,t){if(Reflect.has(r,e))return Reflect.get(r,e,t);throw new Error("Tonomy SDK settings has not been initialized using setSettings() with property for variable: "+e.toString())}})}function Ub(){return c6||ot("Settings not yet initialized",Ge.SettingsNotInitialized),Kk("Checking if production for environment:",wd.environment),["production","staging","testnet"].includes(wd.environment)}var tse=function(r){try{return Promise.resolve(new Promise(function(e){return setTimeout(e,r)}))}catch(e){return Promise.reject(e)}},Kv=86400;function QE(r){var e=new Date(1970,0,1);return e.setSeconds(r),e}function wB(r,e){return new Date(r.getTime()+1e3*e)}var JE,kb=function(r){try{return Promise.resolve((function(e,t){try{var n=Promise.resolve(fs().v1.chain.get_account(r))}catch(i){return t(i)}return n&&n.then?n.then(void 0,t):n})(0,function(e){if(e.message!=="Account not found at /v1/chain/get_account")throw e;ot('Account "'+r.toString()+'" not found',Ge.AccountDoesntExist)}))}catch(e){return Promise.reject(e)}},l6=function(){return XE?Promise.resolve(XE):Promise.resolve(Wk()).then(function(r){if(!r||!r.chain_id)throw new Error("Chain ID not found in chain info");return XE=r.chain_id.toString()})},Wk=function(){try{return Promise.resolve(fs().v1.chain.get_info())}catch(r){return Promise.reject(r)}},rse=function(r,e){e===void 0&&(e=nse);try{var t,n=function(o){if(t)return o;var s=fs().v1.chain.get_abi(r);return ex.set(r.toString(),{abiPromise:s,time:i}),Promise.resolve(s).then(function(c){var l=c.abi;if(!l)throw new Error("No ABI for "+r);return l})},i=new Date,a=(function(){if(ex.has(r.toString())){_B("Using cached ABI for",r.toString());var o=ex.get(r.toString()),s=o.abiPromise,c=o.time;return(function(){if(i.getTime()<c.getTime()+e)return Promise.resolve(s).then(function(l){var d=l.abi;if(_B("Using cached ABI for",r.toString(),d),!d)throw new Error("No ABI for "+r);return t=1,d})})()}})();return Promise.resolve(a&&a.then?a.then(n):n(a))}catch(o){return Promise.reject(o)}},_B=qt("tonomy-sdk:services:blockchain:eosio:eosio");function fs(){if(JE)return JE;var r=Ki().blockchainUrl;return JE=new db({url:r,provider:new Gp(r,{fetch:Gk()||JI})})}var XE,nse=6e4,ex=new Map;function ise(r){return Vn.from({actor:r,permission:"active"})}function ase(r){return Vn.from({actor:r,permission:"owner"})}function Dr(r){return{authorization:[ise(r)]}}function sse(r){return{authorization:[ase(r)]}}function Zk(r){var e={authorization:[]};return r.forEach(function(t){t.authorization&&t.authorization.forEach(function(n){var i;(i=e.authorization)==null||i.push(n)})}),Yk(e)}function Yk(r){if(!r.authorization)throw new Error("Authorization is undefined");var e={authorization:[]};return r.authorization.forEach(function(t){var n,i;(n=e.authorization)!=null&&n.find(function(a){return a.actor.toString()===t.actor.toString()&&a.permission.toString()===t.permission.toString()})||(i=e.authorization)==null||i.push(t)}),e}var ose=(function(){function r(t,n,i,a){this.threshold=void 0,this.keys=void 0,this.accounts=void 0,this.waits=void 0,this.threshold=t,this.keys=n,this.accounts=i,this.waits=a}r.fromKey=function(t){return new this(1,[{key:t,weight:1}],[],[])},r.fromAccount=function(t){if(!Xe.pattern.test(t.actor))throw new Error("Invalid account name "+t.actor);if(!Xe.pattern.test(t.permission))throw new Error("Invalid account permission "+t.permission);return new this(1,[],[{permission:t,weight:1}],[])},r.fromAccountArray=function(t,n,i){i===void 0&&(i=1);var a=r.fromAccount({actor:t[0],permission:n});if(t.length>1)for(var o,s=tk(t.slice(1));!(o=s()).done;)a.addAccount({actor:o.value,permission:n});return a.setThreshold(i),a.sort(),a},r.fromAccountPermission=function(t){return new r(t.required_auth.threshold.toNumber(),t.required_auth.keys.map(function(n){return{key:n.key.toString(),weight:n.weight.toNumber()}}),t.required_auth.accounts.map(function(n){return{permission:{actor:n.permission.actor.toString(),permission:n.permission.permission.toString()},weight:n.weight.toNumber()}}),t.required_auth.waits.map(function(n){return{wait_sec:n.wait_sec.toNumber(),weight:n.weight.toNumber()}}))};var e=r.prototype;return e.addCodePermission=function(t){return this.accounts.push({permission:{actor:t,permission:"eosio.code"},weight:1}),this.sort(),this},e.addAccount=function(t){return this.accounts.push({permission:t,weight:1}),this.sort(),this},e.addKey=function(t,n){return this.keys.push({key:t,weight:n}),this.sort(),this},e.setThreshold=function(t){return this.threshold=t,this},e.sort=function(){this.keys.sort(function(t,n){return String(t.key).localeCompare(String(n.key))}),this.accounts.sort(function(t,n){return q1((i=t).permission.actor,(a=n).permission.actor)!==0?q1(i.permission.actor,a.permission.actor):q1(i.permission.permission,a.permission.permission)!==0?q1(i.permission.permission,a.permission.permission):i.weight-a.weight;var i,a}),this.waits.sort(function(t,n){return t.wait_sec-n.wait_sec})},r})();function q1(r,e){var t=Xe.from(r).value.value,n=Xe.from(e).value.value;return t.cmp(n)}var ty=function(r){try{var e=new TV({client:fs()});return Promise.resolve(e.load(r))}catch(t){return Promise.reject(t)}},qb=(function(){function r(t,n){n===void 0&&(n=!1),this.contractName=void 0,this.contract=void 0,this.actions=void 0,this.contract=t,this.contractName=t.account,n&&this.reloadContract()}var e=r.prototype;return e.reloadContract=function(){try{var t=this,n=(function(i,a){try{var o=Promise.resolve(ty(t.contractName)).then(function(s){t.contract=s})}catch(s){return a(s)}return o&&o.then?o.then(void 0,a):o})(0,function(i){console.error("Failed to reload contract "+t.contractName+":",i)});return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(i){return Promise.reject(i)}},e.action=function(t,n,i){return i===void 0&&(i=Dr(this.contractName)),this.contract.action(t,n,Yk(i))},r})();function use(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var Qk=function(r){try{return r instanceof Cr&&r.abi?Promise.resolve(r):Promise.resolve(rse(r.account)).then(function(e){return Cr.from(r,e)})}catch(e){return Promise.reject(e)}},yr=function(r,e){try{return Promise.resolve(Promise.all((Array.isArray(r)?r:[r]).map(Qk))).then(function(t){return Promise.resolve(Wk()).then(function(n){var i=n.getTransactionHeader(),a=cn.from(zi({},i,{actions:t})),o=Array.isArray(e)?e:[e],s=a.signingDigest(n.chain_id);return Promise.resolve(Promise.all(o.map(function(c){return c.sign(s)}))).then(function(c){var l=os.from(zi({},a,{signatures:c}));return use(function(){return Promise.resolve(cse(t)).then(function(d){return EB("Pushing transaction",JSON.stringify(d,null,2)),Promise.resolve(fs().v1.chain.push_transaction(l))})},function(d){var h;if(EB("Error pushing transaction",d),(h=d.response)!=null&&h.headers){var y;throw(y=d.response)!=null&&y.json?new lse(zi({},d.response.json,{actions:t})):new Fne(d)}throw d})})})})}catch(t){return Promise.reject(t)}},cse=function(r){try{return Promise.resolve(Promise.all((Array.isArray(r)?r:[r]).map(Qk))).then(function(e){return e.map(function(t){return t.decoded})})}catch(e){return Promise.reject(e)}},EB=qt("tonomy-sdk:services:blockchain:eosio:transaction");function _d(r,e,t){return{sign:function(n){try{return Promise.resolve(r.signData({level:e,data:n,challenge:t}))}catch(i){return Promise.reject(i)}}}}var lse=(function(r){function e(n){var i,a;return(a=r.call(this,"AntelopePushTransactionError")||this).code=void 0,a.message=void 0,a.error=void 0,a.actions=void 0,a.contract=void 0,a.code=n.code,a.message=n.error.what,Array.isArray((i=n.error)==null?void 0:i.details)&&n.error.details.length>0&&(a.message+=": "+n.error.details[0].message),a.error=n.error,a.contract=n.contract,a.actions=n.actions?n.actions.map(function(o){return o instanceof Cr?o.decoded:o}):void 0,a.stack=new Error().stack,a.name=a.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(a,a.constructor),a}tr(e,r);var t=e.prototype;return t.hasErrorCode=function(n){return this.error.code===n},t.hasTonomyErrorCode=function(n){return this.error.details[0].message.search(n)>0},e})(qd(Error)),Jk={____comment:"This file was generated with eosio-abigen. DO NOT EDIT ",version:"eosio::abi/1.2",types:[{new_type_name:"account_status",type:"uint8"},{new_type_name:"account_type",type:"uint8"},{new_type_name:"block_signing_authority",type:"variant_block_signing_authority_v0"},{new_type_name:"permission_level_name",type:"uint8"}],structs:[{name:"account_type_struct",base:"",fields:[{name:"account_name",type:"name"},{name:"acc_type",type:"account_type"},{name:"version",type:"uint16"}]},{name:"activate",base:"",fields:[{name:"feature_digest",type:"checksum256"}]},{name:"adminsetapp",base:"",fields:[{name:"account_name",type:"name"},{name:"json_data",type:"string"},{name:"username_hash",type:"checksum256"},{name:"origin",type:"string"}]},{name:"app",base:"",fields:[{name:"account_name",type:"name"},{name:"app_name",type:"string"},{name:"username_hash",type:"checksum256"},{name:"description",type:"string"},{name:"logo_url",type:"string"},{name:"origin",type:"string"}]},{name:"appv2",base:"",fields:[{name:"account_name",type:"name"},{name:"json_data",type:"string"},{name:"version",type:"uint16"},{name:"username_hash",type:"checksum256"},{name:"origin",type:"string"}]},{name:"authority",base:"",fields:[{name:"threshold",type:"uint32"},{name:"keys",type:"key_weight[]"},{name:"accounts",type:"permission_level_weight[]"},{name:"waits",type:"wait_weight[]"}]},{name:"block_signing_authority_v0",base:"",fields:[{name:"threshold",type:"uint32"},{name:"keys",type:"key_weight[]"}]},{name:"blockchain_parameters",base:"",fields:[{name:"max_block_net_usage",type:"uint64"},{name:"target_block_net_usage_pct",type:"uint32"},{name:"max_transaction_net_usage",type:"uint32"},{name:"base_per_transaction_net_usage",type:"uint32"},{name:"net_usage_leeway",type:"uint32"},{name:"context_free_discount_net_usage_num",type:"uint32"},{name:"context_free_discount_net_usage_den",type:"uint32"},{name:"max_block_cpu_usage",type:"uint32"},{name:"target_block_cpu_usage_pct",type:"uint32"},{name:"max_transaction_cpu_usage",type:"uint32"},{name:"min_transaction_cpu_usage",type:"uint32"},{name:"max_transaction_lifetime",type:"uint32"},{name:"deferred_trx_expiration_window",type:"uint32"},{name:"max_transaction_delay",type:"uint32"},{name:"max_inline_action_size",type:"uint32"},{name:"max_inline_action_depth",type:"uint16"},{name:"max_authority_depth",type:"uint16"}]},{name:"buyram",base:"",fields:[{name:"dao_owner",type:"name"},{name:"app",type:"name"},{name:"quant",type:"asset"}]},{name:"canceldelay",base:"",fields:[{name:"canceling_auth",type:"permission_level"},{name:"trx_id",type:"checksum256"}]},{name:"deleteapp",base:"",fields:[{name:"account_name",type:"name"}]},{name:"deleteauth",base:"",fields:[{name:"account",type:"name"},{name:"permission",type:"name"}]},{name:"eraseoldapps",base:"",fields:[]},{name:"key_weight",base:"",fields:[{name:"key",type:"public_key"},{name:"weight",type:"uint16"}]},{name:"linkauth",base:"",fields:[{name:"account",type:"name"},{name:"code",type:"name"},{name:"type",type:"name"},{name:"requirement",type:"name"}]},{name:"loginwithapp",base:"",fields:[{name:"account",type:"name"},{name:"app",type:"name"},{name:"parent",type:"name"},{name:"key",type:"public_key"}]},{name:"newaccount",base:"",fields:[{name:"creator",type:"name"},{name:"name",type:"name"},{name:"owner",type:"authority"},{name:"active",type:"authority"}]},{name:"newapp",base:"",fields:[{name:"json_data",type:"string"},{name:"username_hash",type:"checksum256"},{name:"origin",type:"string"},{name:"key",type:"public_key"}]},{name:"newperson",base:"",fields:[{name:"username_hash",type:"checksum256"},{name:"password_key",type:"public_key"},{name:"password_salt",type:"checksum256"}]},{name:"onerror",base:"",fields:[{name:"sender_id",type:"uint128"},{name:"sent_trx",type:"bytes"}]},{name:"permission_level",base:"",fields:[{name:"actor",type:"name"},{name:"permission",type:"name"}]},{name:"permission_level_weight",base:"",fields:[{name:"permission",type:"permission_level"},{name:"weight",type:"uint16"}]},{name:"person",base:"",fields:[{name:"account_name",type:"name"},{name:"status",type:"account_status"},{name:"username_hash",type:"checksum256"},{name:"password_salt",type:"checksum256"}]},{name:"producer_authority",base:"",fields:[{name:"producer_name",type:"name"},{name:"authority",type:"block_signing_authority"}]},{name:"reqactivated",base:"",fields:[{name:"feature_digest",type:"checksum256"}]},{name:"reqauth",base:"",fields:[{name:"from",type:"name"}]},{name:"resource_config",base:"",fields:[{name:"ram_fee",type:"float64"},{name:"ram_price",type:"float64"},{name:"total_ram_available",type:"uint64"},{name:"total_ram_used",type:"uint64"},{name:"total_cpu_weight_allocated",type:"uint64"},{name:"total_net_weight_allocated",type:"uint64"}]},{name:"sellram",base:"",fields:[{name:"dao_owner",type:"name"},{name:"app",type:"name"},{name:"quant",type:"asset"}]},{name:"setabi",base:"",fields:[{name:"account",type:"name"},{name:"abi",type:"bytes"}]},{name:"setalimits",base:"",fields:[{name:"account",type:"name"},{name:"ram_bytes",type:"int64"},{name:"net_weight",type:"int64"},{name:"cpu_weight",type:"int64"}]},{name:"setcode",base:"",fields:[{name:"account",type:"name"},{name:"vmtype",type:"uint8"},{name:"vmversion",type:"uint8"},{name:"code",type:"bytes"}]},{name:"setparams",base:"",fields:[{name:"params",type:"blockchain_parameters"}]},{name:"setpriv",base:"",fields:[{name:"account",type:"name"},{name:"is_priv",type:"uint8"}]},{name:"setprods",base:"",fields:[{name:"schedule",type:"producer_authority[]"}]},{name:"setresparams",base:"",fields:[{name:"ram_price",type:"float64"},{name:"total_ram_available",type:"uint64"},{name:"ram_fee",type:"float64"}]},{name:"unlinkauth",base:"",fields:[{name:"account",type:"name"},{name:"code",type:"name"},{name:"type",type:"name"}]},{name:"updateactive",base:"",fields:[{name:"account",type:"name"},{name:"active",type:"authority"}]},{name:"updateauth",base:"",fields:[{name:"account",type:"name"},{name:"permission",type:"name"},{name:"parent",type:"name"},{name:"auth",type:"authority"},{name:"auth_parent",type:"bool"}]},{name:"updatekeyper",base:"",fields:[{name:"account",type:"name"},{name:"permission",type:"permission_level_name"},{name:"key",type:"public_key"},{name:"link_auth",type:"bool"}]},{name:"wait_weight",base:"",fields:[{name:"wait_sec",type:"uint32"},{name:"weight",type:"uint16"}]}],actions:[{name:"activate",type:"activate",ricardian_contract:""},{name:"adminsetapp",type:"adminsetapp",ricardian_contract:""},{name:"buyram",type:"buyram",ricardian_contract:""},{name:"canceldelay",type:"canceldelay",ricardian_contract:""},{name:"deleteapp",type:"deleteapp",ricardian_contract:""},{name:"deleteauth",type:"deleteauth",ricardian_contract:""},{name:"eraseoldapps",type:"eraseoldapps",ricardian_contract:""},{name:"linkauth",type:"linkauth",ricardian_contract:""},{name:"loginwithapp",type:"loginwithapp",ricardian_contract:""},{name:"newaccount",type:"newaccount",ricardian_contract:""},{name:"newapp",type:"newapp",ricardian_contract:""},{name:"newperson",type:"newperson",ricardian_contract:""},{name:"onerror",type:"onerror",ricardian_contract:""},{name:"reqactivated",type:"reqactivated",ricardian_contract:""},{name:"reqauth",type:"reqauth",ricardian_contract:""},{name:"sellram",type:"sellram",ricardian_contract:""},{name:"setabi",type:"setabi",ricardian_contract:""},{name:"setalimits",type:"setalimits",ricardian_contract:""},{name:"setcode",type:"setcode",ricardian_contract:""},{name:"setparams",type:"setparams",ricardian_contract:""},{name:"setpriv",type:"setpriv",ricardian_contract:""},{name:"setprods",type:"setprods",ricardian_contract:""},{name:"setresparams",type:"setresparams",ricardian_contract:""},{name:"unlinkauth",type:"unlinkauth",ricardian_contract:""},{name:"updateactive",type:"updateactive",ricardian_contract:""},{name:"updateauth",type:"updateauth",ricardian_contract:""},{name:"updatekeyper",type:"updatekeyper",ricardian_contract:""}],tables:[{name:"acctypes",type:"account_type_struct",index_type:"i64",key_names:[],key_types:[]},{name:"apps",type:"app",index_type:"i64",key_names:[],key_types:[]},{name:"appsv2",type:"appv2",index_type:"i64",key_names:[],key_types:[]},{name:"people",type:"person",index_type:"i64",key_names:[],key_types:[]},{name:"resconfig",type:"resource_config",index_type:"i64",key_names:[],key_types:[]}],ricardian_clauses:[],variants:[{name:"variant_block_signing_authority_v0",types:["block_signing_authority_v0"]}],action_results:[]},xB="eosio.token";function Xk(r,e){var t=e||Ki().currencySymbol,n=r.split(" "),i=n[0],a=n[1];if(a!==t)throw new Error("Invalid currency symbol: expected "+t+", got "+a);return i}function Yc(r,e){return parseFloat(Xk(r,e))}function fse(r,e){return new Qd(Xk(r,e))}function AB(r,e,t){return t===void 0&&(t=6),r.toFixed(t)+" "+e}var eq=(function(r){function e(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=r.call.apply(r,[this].concat(a))||this).actions={create:function(s,c){return c===void 0&&(c=Dr(n.contractName)),n.action("create",{issuer:s.issuer,maximum_supply:s.maximumSupply},c)},issue:function(s,c){var l=s.to,d=s.quantity,h=s.memo,y=h===void 0?"":h;return c===void 0&&(c=Dr(n.contractName)),n.action("issue",{to:l,quantity:d,memo:y},c)},retire:function(s,c){var l=s.quantity,d=s.memo,h=d===void 0?"":d;return c===void 0&&(c=Dr(n.contractName)),n.action("retire",{quantity:l,memo:h},c)},transfer:function(s,c){var l=s.from,d=s.to,h=s.quantity,y=s.memo,m=y===void 0?"":y;return c===void 0&&(c=Dr(l)),n.action("transfer",{from:l,to:d,quantity:h,memo:m},c)},setStats:function(s,c){return c===void 0&&(c=Dr(n.contractName)),n.action("setstats",s,c)},bridgeIssue:function(s,c){var l=s.to,d=s.quantity,h=s.memo,y=h===void 0?"":h;return c===void 0&&(c=Dr(n.contractName)),n.action("bridgeissue",{to:l,quantity:d,memo:y},c)},bridgeRetire:function(s,c){var l=s.from,d=s.quantity,h=s.memo,y=h===void 0?"":h;return c===void 0&&(c=Dr(n.contractName)),n.action("bridgeretire",{from:l,quantity:d,memo:y},c)}},n}tr(e,r),e.atAccount=function(n){n===void 0&&(n=xB);try{var i=this;return Promise.resolve(ty(n)).then(function(a){return new i(a)})}catch(a){return Promise.reject(a)}},e.fromAbi=function(n,i){return i===void 0&&(i=xB),new this(new k0({abi:n,client:fs(),account:i}),Ub())};var t=e.prototype;return t.create=function(n,i,a){try{var o=this.actions.create({issuer:n,maximumSupply:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},t.issue=function(n,i,a,o){try{var s=this.actions.issue({to:n,quantity:i,memo:a});return Promise.resolve(yr(s,o))}catch(c){return Promise.reject(c)}},t.transfer=function(n,i,a,o,s){try{var c=this.actions.transfer({from:n,to:i,quantity:a,memo:o});return Promise.resolve(yr(c,s))}catch(l){return Promise.reject(l)}},t.retire=function(n,i,a){try{var o=this.actions.retire({quantity:n,memo:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},t.bridgeIssue=function(n,i,a,o){try{var s=this.actions.bridgeIssue({to:n,quantity:i,memo:a});return Promise.resolve(yr(s,o))}catch(c){return Promise.reject(c)}},t.bridgeRetire=function(n,i,a,o){try{var s=this.actions.bridgeRetire({from:n,quantity:i,memo:a});return Promise.resolve(yr(s,o))}catch(c){return Promise.reject(c)}},t.getBalance=function(n,i){try{var a=i||Ki().currencySymbol;return Promise.resolve(fs().v1.chain.get_currency_balance(this.contractName,n,a)).then(function(o){return o.length===0?0:o[0].value})}catch(o){return Promise.reject(o)}},t.getBalanceDecimal=function(n,i){try{var a=i||Ki().currencySymbol;return Promise.resolve(fs().v1.chain.get_currency_balance(this.contractName,n,a)).then(function(o){return o.length===0?new Qd(0):fse(o[0].toString(),a)})}catch(o){return Promise.reject(o)}},e})(qb);eq.TOTAL_SUPPLY=5e10;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));var ud,SB,dse=qt("tonomy-sdk:blockchain:contracts:TonomyContract"),MB="tonomy",f6="tonomy";function tx(r){return{accountName:r.account_name,status:r.status.toNumber(),usernameHash:r.username_hash,passwordSalt:r.password_salt}}function TB(r,e,t,n,i){return JSON.stringify({app_name:r,description:e,logo_url:t,background_color:n,accent_color:i})}function RB(r){var e=JSON.parse(r.json_data);return{accountName:r.account_name,appName:e.app_name,description:e.description,logoUrl:e.logo_url,origin:r.origin,backgroundColor:e.background_color,accentColor:e.accent_color,usernameHash:r.username_hash,version:r.version.toNumber(),jsonData:r.json_data}}(function(r){r.OWNER="OWNER",r.ACTIVE="ACTIVE",r.PASSWORD="PASSWORD",r.PIN="PIN",r.BIOMETRIC="BIOMETRIC",r.LOCAL="LOCAL"})(ud||(ud={})),(function(r){r[r.Person=0]="Person",r[r.Organization=1]="Organization",r[r.App=2]="App",r[r.Gov=3]="Gov",r[r.Service=4]="Service"})(SB||(SB={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]}})(ud||(ud={}));var rx,rc,hse=(function(r){function e(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=r.call.apply(r,[this].concat(a))||this).actions={buyRam:function(s,c){return c===void 0&&(c={authorization:[{actor:s.daoOwner,permission:"active"},{actor:s.app,permission:"active"}]}),n.action("buyram",{dao_owner:s.daoOwner,app:s.app,quant:s.quant},c)},setResParams:function(s,c){return c===void 0&&(c=Dr(f6)),n.action("setresparams",{ram_price:s.ramPrice,total_ram_available:s.totalRamAvailable,ram_fee:s.ramFee},c)},newPerson:function(s,c){return n.action("newperson",{username_hash:s.usernameHash,password_key:s.passwordKey,password_salt:s.passwordSalt},c)},updateActive:function(s,c){return c===void 0&&(c=Dr(s.account)),n.action("updateactive",s,c)},updateKeyPer:function(s,c){var l;return c===void 0&&(c={authorization:[{actor:s.account,permission:"owner"}]}),n.action("updatekeyper",{account:s.account,permission:s.permission_level,key:s.key,link_auth:(l=s.link_auth)==null||l},c)},loginWithApp:function(s,c){return c===void 0&&(c={authorization:[{actor:s.account,permission:s.parent}]}),n.action("loginwithapp",s,c)},newApp:function(s,c){return n.action("newapp",{json_data:s.jsonData,username_hash:s.usernameHash,origin:s.origin,key:s.key},c)},adminSetApp:function(s,c){return n.action("adminsetapp",{account_name:Xe.from(s.accountName),json_data:s.jsonData,username_hash:s.usernameHash,origin:s.origin},c)},deleteApp:function(s,c){return c===void 0&&(c=Dr(n.contractName)),n.action("deleteapp",{account_name:Xe.from(s.accountName)},c)},eraseOldApps:function(s,c){return s===void 0&&(s={}),c===void 0&&(c=sse(n.contractName)),n.action("eraseoldapps",s,c)}},n}tr(e,r),e.atAccount=function(n){n===void 0&&(n=MB);try{var i=this;return Promise.resolve(ty(n)).then(function(a){return new i(a)})}catch(a){return Promise.reject(a)}},e.fromAbi=function(n,i){return i===void 0&&(i=MB),new this(new k0({abi:n,client:fs(),account:i}),Ub())};var t=e.prototype;return t.buyRam=function(n,i,a,o){try{var s=this.actions.buyRam({daoOwner:n,app:i,quant:a});return Promise.resolve(yr(s,o))}catch(c){return Promise.reject(c)}},t.setResourceParams=function(n,i,a,o){try{var s=this.actions.setResParams({ramPrice:n,totalRamAvailable:i,ramFee:a});return Promise.resolve(yr(s,o))}catch(c){return Promise.reject(c)}},t.newPerson=function(n,i,a,o){try{var s=this.actions.newPerson({usernameHash:n,passwordKey:i,passwordSalt:a});return Promise.resolve(yr(s,o))}catch(c){return Promise.reject(c)}},t.updateKeysPerson=function(n,i,a){try{var o=this;return Promise.resolve(kb(n)).then(function(s){Object.keys(i).length===0&&ot("At least one key must be provided",Ge.UpdateKeysTransactionNoKeys);var c=[];for(var l in i){var d=ud.from(l),h=i[l],y=!0;try{var m=s.getPermission(d.toLowerCase());m&&m.linked_actions.find(function(b){return b.account.equals(o.contractName)&&b.action.equals("loginwithapp")})&&(y=!1)}catch(b){if(!b.message.startsWith("Unknown permission "))throw b}c.push(o.actions.updateKeyPer({account:n,permission_level:ud.indexFor(d),key:h,link_auth:y},Dr(n)))}return yr(c,a)})}catch(s){return Promise.reject(s)}},t.updateActive=function(n,i,a){try{var o=this.actions.updateActive({account:n,active:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},t.newApp=function(n,i,a,o,s,c,l,d,h){try{var y=TB(n,i,o,c,l),m=this.actions.newApp({jsonData:y,usernameHash:a,origin:s,key:d});return Promise.resolve(yr(m,h))}catch(b){return Promise.reject(b)}},t.loginWithApp=function(n,i,a,o,s){try{var c=this.actions.loginWithApp({account:n,app:i,parent:a,key:o});return Promise.resolve(yr(c,s))}catch(l){return Promise.reject(l)}},t.getPersonData=function(n){try{return Promise.resolve(this.contract.table("people",this.contractName).get(n)).then(function(i){return i||ot('Person "'+n.toString()+'" not found',Ge.AccountDoesntExist),i})}catch(i){return Promise.reject(i)}},t.getPersonDataByUsername=function(n){try{var i=$t.from(n.usernameHash);return Promise.resolve(this.contract.table("people",this.contractName).get(i,{index_position:"secondary"})).then(function(a){return a||ot('Person with username "'+n.toString()+'" not found',Ge.UsernameNotFound),a})}catch(a){return Promise.reject(a)}},t.getAllAppData2=function(){try{return Promise.resolve(this.contract.table("appsv2",this.contractName).all()).then(function(n){return n&&n.length!==0||ot("Apps not found",Ge.AccountDoesntExist),n})}catch(n){return Promise.reject(n)}},t.getAppData2=function(n){try{return Promise.resolve(this.contract.table("appsv2",this.contractName).get(n)).then(function(i){return i||ot('App "'+n.toString()+'" not found',Ge.AccountDoesntExist),i})}catch(i){return Promise.reject(i)}},t.getAppData2ByUsername=function(n){try{var i=$t.from(n.usernameHash);return Promise.resolve(this.contract.table("appsv2",this.contractName).get(i,{index_position:"secondary"})).then(function(a){return a||ot('App with username "'+n.toString()+'" not found',Ge.UsernameNotFound),a})}catch(a){return Promise.reject(a)}},t.getAppDataByOrigin=function(n){try{var i=jd(n);return Promise.resolve(this.contract.table("appsv2",this.contractName).get($t.from(i),{index_position:"tertiary"})).then(function(a){return a||ot('Origin "'+n+'" not found',Ge.OriginNotFound),a})}catch(a){return Promise.reject(a)}},t.getPerson=function(n){try{var i,a=function(){return tx(i)};dse("getPerson",n,n instanceof Ei);var o=n instanceof Ei?Promise.resolve(this.getPersonDataByUsername(n)).then(function(s){i=s}):Promise.resolve(this.getPersonData(n)).then(function(s){i=s});return Promise.resolve(o&&o.then?o.then(a):a())}catch(s){return Promise.reject(s)}},t.getPeople=function(n){try{var i=this.contract.table("people",this.contractName).query(n);return Promise.resolve(i.next()).then(function(a){return a.map(tx)})}catch(a){return Promise.reject(a)}},t.getAllPeople=function(n){n===void 0&&(n=1e3);try{var i=this.contract.table("people",this.contractName).query({rowsPerAPIRequest:n});return Promise.resolve(i.all()).then(function(a){return a.map(tx)})}catch(a){return Promise.reject(a)}},t.getApp=function(n){try{var i,a=function(){return RB(i)},o=this,s=(function(){if(n instanceof Ei)return Promise.resolve(o.getAppData2ByUsername(n)).then(function(l){i=l});var c=n instanceof Xe?Promise.resolve(o.getAppData2(n)).then(function(l){i=l}):Promise.resolve(o.getAppDataByOrigin(n)).then(function(l){i=l});return c&&c.then?c.then(function(){}):void 0})();return Promise.resolve(s&&s.then?s.then(a):a())}catch(c){return Promise.reject(c)}},t.getAllApps=function(){try{return Promise.resolve(this.getAllAppData2()).then(function(n){return n.map(RB)})}catch(n){return Promise.reject(n)}},t.adminSetApp=function(n,i,a,o,s,c,l,d,h){try{var y=TB(i,a,s,l,d),m=this.actions.adminSetApp({accountName:n,jsonData:y,usernameHash:o,origin:c});return Promise.resolve(yr([m],h))}catch(b){return Promise.reject(b)}},e})(qb),qa=function(){return rx||(rx=hse.fromAbi(Jk)),rx},pse=function(r,e,t){t===void 0&&(t=!0);try{return Promise.resolve((function(){if(t&&e){var n=Ei.fromFullUsername(e);return Promise.resolve(qa().getPerson(n)).then(function(i){return i.accountName.equals(r)||ot("Username does not match account",Ge.InvalidData),n})}})())}catch(n){return Promise.reject(n)}};(function(r){r.PERSON="PERSON",r.ORG="ORG",r.APP="APP",r.GOV="GOV"})(rc||(rc={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]},r.getPreSuffix=function(e){return e.toLowerCase()}})(rc||(rc={}));var Ei=(function(){function r(t){this.username=void 0,this.usernameHash=void 0,this.username=t,this.usernameHash=jd(this.username)}r.fromUsername=function(t,n,i){return new r(t.normalize("NFKC").toLowerCase()+"."+rc.getPreSuffix(n)+i)},r.fromFullUsername=function(t){return new r(t)};var e=r.prototype;return e.getBaseUsername=function(){var t;return(t=this.username)==null?void 0:t.split(".")[0]},e.toString=function(){return this.username},e.toJSON=function(){return this.toString()},r})(),OB="tonomy",yse=["eosio","eosio.token","tonomy","vesting.tmy","staking.tmy","tonomy"];function bp(r){return Zk([r,{authorization:[{actor:f6,permission:"owner"}]}])}function mse(r){return Zk([r,{authorization:[{actor:f6,permission:"active"}]}])}function nx(r,e){return yse.includes(e.toString())?bp(r):mse(r)}var ix,gse=(function(r){function e(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=r.call.apply(r,[this].concat(a))||this).actions={newAccount:function(s,c){return c===void 0&&(c=bp(Dr(s.creator))),n.action("newaccount",s,c)},setCode:function(s,c){return c===void 0&&(c=nx(Dr(s.account),s.account)),n.action("setcode",s,c)},setAbi:function(s,c){return c===void 0&&(c=nx(Dr(s.account),s.account)),n.action("setabi",s,c)},updateAuth:function(s,c){var l;return c===void 0&&(c=nx({authorization:[{actor:s.account,permission:s.authParent?s.parent:s.permission}]},s.account)),n.action("updateauth",{account:s.account,permission:s.permission,parent:s.permission==="owner"?"":s.parent,auth:s.auth,auth_parent:(l=s.authParent)!=null&&l},c)},linkAuth:function(s,c){return c===void 0&&(c=Dr(s.account)),n.action("linkauth",{account:s.account,code:s.code,type:s.type,requirement:s.requirement},c)},setPriv:function(s,c){return c===void 0&&(c=bp(Dr(n.contractName))),n.action("setpriv",{account:s.account,is_priv:s.isPriv},c)},setProds:function(s,c){return c===void 0&&(c=bp(Dr(n.contractName))),n.action("setprods",s,c)},setParams:function(s,c){return c===void 0&&(c=bp(Dr(n.contractName))),n.action("setparams",s,c)}},n}tr(e,r),e.atAccount=function(n){n===void 0&&(n=OB);try{var i=this;return Promise.resolve(ty(n)).then(function(a){return new i(a)})}catch(a){return Promise.reject(a)}},e.fromAbi=function(n,i){return i===void 0&&(i=OB),new this(new k0({abi:n,client:fs(),account:i}),Ub())};var t=e.prototype;return t.deployContractActions=function(n,i,a,o){try{var s,c=i.toString("hex"),l=JSON.parse(a.toString()),d=Ut.from(l),h=Zt.encode({object:d}).hexString;o&&(s={authorization:Array.isArray(o)?o:[o]});var y=this.actions.setCode({account:n,vmtype:0,vmversion:0,code:c},s),m=this.actions.setAbi({account:n,abi:h},s);return Promise.resolve([y,m])}catch(b){return Promise.reject(b)}},t.deployContract=function(n,i,a,o,s){try{return Promise.resolve(this.deployContractActions(n,i,a,s)).then(function(c){return yr(c,o)})}catch(c){return Promise.reject(c)}},t.newAccount=function(n,i,a,o,s){try{var c=this.actions.newAccount({creator:n,name:i,owner:a,active:o});return Promise.resolve(yr(c,s))}catch(l){return Promise.reject(l)}},t.updateAuth=function(n,i,a,o,s,c){c===void 0&&(c={});try{var l=this.actions.updateAuth({account:n,permission:i,parent:a,auth:o,authParent:c.authParent});return Promise.resolve(yr(l,s))}catch(d){return Promise.reject(d)}},t.linkAuth=function(n,i,a,o,s){try{var c=this.actions.linkAuth({account:n,code:i,type:a,requirement:o});return Promise.resolve(yr(c,s))}catch(l){return Promise.reject(l)}},t.setPriv=function(n,i,a){try{var o=this.actions.setPriv({account:n,isPriv:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},e})(qb),CB=function(){return ix||(ix=gse.fromAbi(Jk)),ix};qt("tonomy-sdk:services:blockchain:contracts:EosioMsigContract");qt("tonomy-sdk:blockchain:contracts:DemoTokenContract");var NB=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function yi(r,e,t){if(!r.s){if(t instanceof cd){if(!t.s)return void(t.o=yi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(yi.bind(null,r,e),yi.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var qu,cd=(function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var a=1&i?e:t;if(a){try{yi(n,1,a(this.v))}catch(o){yi(n,2,o)}return n}return this}return this.o=function(o){try{var s=o.v;1&o.s?yi(n,1,e?e(s):s):t?yi(n,1,t(s)):yi(n,2,s)}catch(c){yi(n,2,c)}},n},r})();function BB(r){return r instanceof cd&&1&r.s}var vse=qt("tonomy-sdk:services:blockchain:contracts:staking"),L1="staking.tmy",rs=(function(r){function e(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=r.call.apply(r,[this].concat(a))||this).actions={stakeTokens:function(s,c){return c===void 0&&(c=Dr(s.accountName)),n.action("staketokens",{account_name:s.accountName,quantity:s.quantity},c)},requestUnstake:function(s,c){return c===void 0&&(c=Dr(s.accountName)),n.action("requnstake",{account_name:s.accountName,allocation_id:s.allocationId},c)},releaseToken:function(s,c){return c===void 0&&(c=Dr(s.accountName)),n.action("releasetoken",{account_name:s.accountName,allocation_id:s.allocationId},c)},cron:function(s){return n.action("cron",{},s)},resetAll:function(s){return n.action("resetall",{},s)},addYield:function(s,c){return c===void 0&&(c=Dr(s.sender)),n.action("addyield",s,c)},setSettings:function(s,c){return n.action("setsettings",{yearly_stake_pool:s.yearlyStakePool},c)}},n}tr(e,r),e.fromAbi=function(n,i){return i===void 0&&(i=L1),new this(new k0({abi:n,client:fs(),account:i}),Ub())},e.atAccount=function(n){n===void 0&&(n=L1);try{var i=this;return Promise.resolve(ty(n)).then(function(a){return new i(a)})}catch(a){return Promise.reject(a)}};var t=e.prototype;return t.stakeTokens=function(n,i,a){try{var o=this;return Promise.resolve(kb(n)).then(function(s){function c(){var h=o.actions.stakeTokens({accountName:n,quantity:i});return Promise.resolve(yr(h,a))}var l=s.getPermission("active"),d=(function(){if(!l.required_auth.accounts.some(function(y){return y.permission.actor.toString()===L1&&y.permission.permission.toString()==="eosio.code"})){var h=ose.fromAccountPermission(l);return h.addCodePermission(L1.toString()),vse("Adding staking.tmy@eosio.code to active permission",JSON.stringify(h,null,2)),Promise.resolve(qa().updateActive(n,h,a)).then(function(){})}})();return d&&d.then?d.then(c):c()})}catch(s){return Promise.reject(s)}},t.requestUnstake=function(n,i,a){try{var o=this.actions.requestUnstake({accountName:n,allocationId:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},t.releaseToken=function(n,i,a){try{var o=this.actions.releaseToken({accountName:n,allocationId:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},t.cron=function(n){try{var i=this.actions.cron();return Promise.resolve(yr(i,n))}catch(a){return Promise.reject(a)}},t.resetAll=function(n){try{var i=this.actions.resetAll();return Promise.resolve(yr(i,n))}catch(a){return Promise.reject(a)}},t.addYield=function(n,i,a){try{var o=this.actions.addYield({sender:n,quantity:i});return Promise.resolve(yr(o,a))}catch(s){return Promise.reject(s)}},t.setSettings=function(n,i){try{var a=this.actions.setSettings({yearlyStakePool:n});return Promise.resolve(yr(a,i))}catch(o){return Promise.reject(o)}},t.getAllocationsData=function(n){try{var i=this.contract.table("stakingalloc",n);return Promise.resolve(i.all())}catch(a){return Promise.reject(a)}},t.getAllocations=function(n,i){try{var a=this;return Promise.resolve(a.getAllocationsData(n)).then(function(o){var s=[],c=(function(l,d){if(typeof l[NB]=="function"){var h,y,m,b=function(N){try{for(;!(h=v.next()).done;)if((N=d(h.value))&&N.then){if(!BB(N))return void N.then(b,m||(m=yi.bind(null,y=new cd,2)));N=N.v}y?yi(y,1,N):y=N}catch(B){yi(y||(y=new cd),2,B)}},v=l[NB]();if(b(),v.return){var E=function(N){try{h.done||v.return()}catch{}return N};if(y&&y.then)return y.then(E,function(N){throw E(N)});E()}return y}if(!("length"in l))throw new TypeError("Object is not iterable");for(var x=[],D=0;D<l.length;D++)x.push(l[D]);return(function(N,B){var k,F,T=-1;return(function z(Z){try{for(;++T<N.length;)if((Z=B(T))&&Z.then){if(!BB(Z))return void Z.then(z,F||(F=yi.bind(null,k=new cd,2)));Z=Z.v}k?yi(k,1,Z):k=Z}catch(Y){yi(k||(k=new cd),2,Y)}})(),k})(x,function(N){return d(x[N])})})(o,function(l){function d(m){var b=AB(m,"TONO"),v=AB(Yc(l.tokens_staked.toString())-Yc(l.initial_stake.toString()),"TONO");s.push({id:l.id.toNumber(),staker:Xe.from(n),initialStake:l.initial_stake.toString(),staked:l.tokens_staked.toString(),yieldSoFar:v,stakedTime:h,unstakeableTime:wB(h,e.getLockedDays()*Kv),unstakeTime:y,releaseTime:wB(y,e.getReleaseDays()*Kv),unstakeRequested:l.unstake_requested,monthlyYield:b})}var h=new Date(l.stake_time.toString()+"Z"),y=new Date(l.unstake_time.toString()+"Z");return l.unstake_requested?d(0):Promise.resolve(a.calculateMonthlyYield(Yc(l.tokens_staked.toString()),i)).then(d)});return c&&c.then?c.then(function(){return s}):s})}catch(o){return Promise.reject(o)}},t.getSettingsData=function(){try{return Promise.resolve(this.contract.table("settings",this.contractName).get()).then(function(n){if(!n)throw new Error("Staking settings have not yet been set");return n})}catch(n){return Promise.reject(n)}},t.getSettings=function(){try{return Promise.resolve(this.getSettingsData()).then(function(n){var i=Yc(n.yearly_stake_pool.toString()),a=Yc(n.total_staked.toString()),o=a>0?Math.min(i/a,e.MAX_APY):e.MAX_APY;return{currentYieldPool:n.current_yield_pool.toString(),yearlyStakePool:n.yearly_stake_pool.toString(),totalStaked:n.total_staked.toString(),totalReleasing:n.total_releasing.toString(),apy:o}})}catch(n){return Promise.reject(n)}},t.getAccountData=function(n){try{var i=this.contract.table("stakingaccou",this.contractName);return Promise.resolve(i.get(n)).then(function(a){return a||ot("Account not found in staking contract",Ge.AccountNotFound),a})}catch(a){return Promise.reject(a)}},t.getAccount=function(n){try{return Promise.resolve(this.getAccountData(n)).then(function(i){return{staker:i.staker,totalYield:i.total_yield.toString(),lastPayout:new Date(i.last_payout+"Z"),payments:i.payments.toNumber(),version:i.version.toNumber()}})}catch(i){return Promise.reject(i)}},t.getAccountState=function(n){try{var i=this;return Promise.resolve(i.getSettings()).then(function(a){return Promise.resolve(i.getAllocations(n,a)).then(function(o){return Promise.resolve(i.getAccount(n)).then(function(s){for(var c,l=0,d=0,h=0,y=tk(o);!(c=y()).done;){var m=c.value,b=Yc(m.staked);m.unstakeRequested?h+=b:(l+=b,d+=Yc(m.monthlyYield))}return zi({},s,{allocations:o,totalStaked:l,totalUnlockable:0,totalUnlocking:h,estimatedMonthlyYield:d,settings:a})})})})}catch(a){return Promise.reject(a)}},t.calculateMonthlyYield=function(n,i){try{return Promise.resolve(n*(Math.pow(1+i.apy,1/12)-1))}catch(a){return Promise.reject(a)}},e})(qb);qu=rs,rs.isTestEnv=function(){return["test","staging"].includes(Ki().environment)},rs.getLockedDays=function(){return qu.isTestEnv()?10/Kv:14},rs.getReleaseDays=function(){return qu.isTestEnv()?5/Kv:5},rs.getMinimumTransfer=function(){return qu.isTestEnv()?1:1e3},rs.getMaxAllocations=function(){return qu.isTestEnv()?5:20},rs.getStakingCycleHours=function(){return qu.isTestEnv()?1/60:24},rs.MAX_APY=1,rs.STAKING_APY_TARGET=1,rs.STAKING_ESTIMATED_STAKED_PERCENT=.021,rs.yearlyStakePool=qu.STAKING_APY_TARGET*qu.STAKING_ESTIMATED_STAKED_PERCENT*eq.TOTAL_SUPPLY;var d6=(function(){function r(t,n){this.keyManager=void 0,this.storage=void 0,this.keyManager=t,this.storage=ak(ZA+"user.",n)}var e=r.prototype;return e.getStatus=function(){try{return Promise.resolve(this.storage.status)}catch(t){return Promise.reject(t)}},e.getAccountName=function(){try{return Promise.resolve(this.storage.accountName)}catch(t){return Promise.reject(t)}},e.getUsername=function(){try{return Promise.resolve(this.storage.username).then(function(t){if(t){if(t instanceof Ei)return t;if(typeof t=="string")return new Ei(t);ot("Username not in expected format",Ge.InvalidData)}else ot("Username not set",Ge.InvalidData)})}catch(t){return Promise.reject(t)}},e.getDid=function(t){try{return Promise.resolve(this.storage.did).then(function(n){return n+(t?"#"+t:"")})}catch(n){return Promise.reject(n)}},e.getIssuer=function(){try{var t=this;return Promise.resolve(t.getDid()).then(function(n){return{did:n+"#local",signer:Vk(t.keyManager,ct.LOCAL).sign,alg:"ES256K-R"}})}catch(n){return Promise.reject(n)}},e.getSigner=function(t){try{return Promise.resolve(_d(this.keyManager,t))}catch(n){return Promise.reject(n)}},r})();const IB="ES256K",bse=/^[A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*$/,_8="https://www.w3.org/2018/credentials/v1",E8="VerifiableCredential",wse="JwtProof2020",tq=["evidence","termsOfUse","refreshService","credentialSchema","credentialStatus"];function Ca(r){return Array.isArray(r)?r:[r]}function E0(r){return Array.isArray(r)?r.map(e=>E0(e)):r instanceof Date?new Date(r.getTime()):r&&typeof r=="object"?Object.getOwnPropertyNames(r).reduce((e,t)=>(Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t)),e[t]=E0(r[t]),e),Object.create(Object.getPrototypeOf(r))):r}function Gv(r){return r!=null}function rq(r,e=!0){let t=E0(r);var n;typeof(n=r)=="object"&&n.sub&&n.iss&&n.claim&&n.iat&&(t=(function(o){const{iat:s,nbf:c,claim:l,vc:d,...h}=o,y={...h,nbf:c||s,vc:{"@context":[_8],type:[E8],credentialSubject:l}};return d&&(o.issVc=d),y})(r)),t.credentialSubject={...r.credentialSubject,...r.vc?.credentialSubject},r.sub&&!r.credentialSubject?.id&&t.credentialSubject&&(t.credentialSubject.id=r.sub,e&&delete t.sub),e&&delete t.vc?.credentialSubject,r.issuer!==void 0&&typeof r.issuer!="object"||(t.issuer=(function(o){if(typeof o!="object"||o===null)return o;const s={...o};return Object.keys(s).forEach(c=>s[c]===void 0&&delete s[c]),s})({id:r.iss,...r.issuer}),e&&!r.issuer?.id&&delete t.iss),!r.id&&r.jti&&(t.id=t.id||t.jti,e&&delete t.jti);const i=[...Ca(t.type),...Ca(t.vc?.type)].filter(Gv);t.type=[...new Set(i)],e&&delete t.vc?.type;for(const o of tq)r.vc&&r.vc[o]&&(t[o]||(t[o]=r.vc[o]),e&&delete t.vc[o]);const a=[...Ca(r.context),...Ca(r["@context"]),...Ca(r.vc?.["@context"])].filter(Gv);return t["@context"]=[...new Set(a)],e&&(delete t.context,delete t.vc?.["@context"]),r.issuanceDate||!r.iat&&!r.nbf||(t.issuanceDate=new Date(1e3*(r.nbf||r.iat)).toISOString(),e&&(r.nbf?delete t.nbf:delete t.iat)),!r.expirationDate&&r.exp&&(t.expirationDate=new Date(1e3*r.exp).toISOString(),e&&delete t.exp),e&&t.vc&&Object.keys(t.vc).length===0&&delete t.vc,t}function DB(r,e=!0){let t;try{t=ey(r)}catch{throw new TypeError("unknown credential format")}return{...rq(t.payload,e),proof:{type:wse,jwt:r}}}function nq(r,e=!0){if(typeof r=="string"){if(bse.test(r))return DB(r,e);{let t;try{t=JSON.parse(r)}catch{throw new TypeError("unknown credential format")}return nq(t,e)}}return r.proof?.jwt?E0({...DB(r.proof.jwt,e),proof:r.proof}):{proof:{},...rq(r,e)}}function _se(r,e=!0){if(Array.isArray(r.credentialSubject))throw Error("credentialSubject of type array not supported");const t=E0({vc:{...r.vc},...r});t.vc=t.vc;const n={...r.credentialSubject,...r.vc?.credentialSubject};r.sub||(t.sub=r.credentialSubject?.id,e&&delete n.id);const i=[...Ca(r.context),...Ca(r["@context"]),...Ca(r.vc?.["@context"])].filter(Gv);t.vc["@context"]=[...new Set(i)],e&&(delete t.context,delete t["@context"]);const a=[...Ca(r.type),...Ca(r.vc?.type)].filter(Gv);if(t.vc.type=[...new Set(a)],e&&delete t.type,r.id&&Object.getOwnPropertyNames(r).indexOf("jti")===-1&&(t.jti=r.id,e&&delete t.id),r.issuanceDate&&Object.getOwnPropertyNames(r).indexOf("nbf")===-1){const o=Date.parse(r.issuanceDate);isNaN(o)||(t.nbf=Math.floor(o/1e3),e&&delete t.issuanceDate)}if(r.expirationDate&&Object.getOwnPropertyNames(r).indexOf("exp")===-1){const o=Date.parse(r.expirationDate);isNaN(o)||(t.exp=Math.floor(o/1e3),e&&delete t.expirationDate)}r.issuer&&Object.getOwnPropertyNames(r).indexOf("iss")===-1&&(typeof r.issuer=="object"?(t.iss=r.issuer?.id,e&&(delete t.issuer.id,Object.keys(t.issuer).length===0&&delete t.issuer)):typeof r.issuer=="string"&&(t.iss=r.iss||""+r.issuer,e&&delete t.issuer)),t.vc.credentialSubject=n,e&&delete t.credentialSubject;for(const o of tq)r[o]&&(t.vc[o]||(t.vc[o]=r[o]),e&&delete t[o]);return t}const x0="schema_error";function A0(r){if(typeof r=="number"){if(!(Number.isInteger(r)&&r<1e11))throw new TypeError(`${x0}: "${r}" is not a unix timestamp in seconds`)}else if(typeof r=="string")A0(Math.floor(new Date(r).valueOf()/1e3));else if(!(e=r)||isNaN(e)||Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(`${x0}: "${r}" is not a valid time`);var e}function iq(r){const e=Ca(r);if(e.length<1||e.indexOf(_8)===-1)throw new TypeError(`${x0}: @context is missing default context "${_8}"`)}function aq(r){const e=Ca(r);if(e.length<1||e.indexOf(E8)===-1)throw new TypeError(`${x0}: type is missing default "${E8}"`)}function sq(r){if(Object.keys(r).length===0)throw new TypeError(`${x0}: credentialSubject must not be empty`)}const Ese=function(r,e,t={}){try{const n=t?.policies?.issuanceDate!==!1&&void 0,i=t?.policies?.expirationDate!==!1&&void 0;return t={...t,policies:{...t?.policies,nbf:n,exp:i,iat:n}},Promise.resolve(w8(r,{resolver:e,...t})).then(function(a){return a.verifiableCredential=nq(a.jwt,t?.removeOriginalFields),t?.policies?.format!==!1&&(iq((o=a.verifiableCredential)["@context"]),aq(o.type),sq(o.credentialSubject),o.issuanceDate&&A0(o.issuanceDate),o.expirationDate&&A0(o.expirationDate)),a;var o})}catch(n){return Promise.reject(n)}};var ax,nc,oq=function(r,e){try{var t=function(){return"did:antelope:"+ax+":"+r+(e?"#"+e:"")},n=(function(){if(!ax)return Promise.resolve(l6()).then(function(i){ax=i})})();return Promise.resolve(n&&n.then?n.then(t):t())}catch(i){return Promise.reject(i)}},uq=function(r,e){e===void 0&&(e=!0);try{return Promise.resolve((function(){if(e)return Promise.resolve(l6()).then(function(t){var n=p6(r).chain;return n!==t.toString()&&ot("Invalid chain ID expected "+t.toString()+" found "+n,Ge.InvalidData),n})})())}catch(t){return Promise.reject(t)}},cq=function(r,e){var t=(e===void 0?{}:e).verifyChainId,n=t===void 0||t;try{var i=p6(r),a=i.account,o=i.fragment;return a!=="ops.tmy"&&ot("DID must be from ops.tmy account, got: "+a,Ge.InvalidData),o!=="active"&&ot("DID must use #active fragment, got: #"+o,Ge.InvalidData),Promise.resolve(uq(r,n)).then(function(){})}catch(s){return Promise.reject(s)}};function h6(r){var e=p6(r);return Xe.from(e.account)}function p6(r){var e=Lb(r);e.method!=="antelope"&&ot("Invalid DID method: "+e.method,Ge.InvalidData);var t=e.id.split(":");return zi({},e,{chain:t.slice(0,t.length-1).join(":"),account:t[t.length-1]})}function Lb(r){var e=o6(r);if(!e)throw new Error("Invalid DID: "+r);return e}(function(r){r.PENDING="PENDING",r.CREATING="CREATING",r.READY="READY",r.DEACTIVATED="DEACTIVATED"})(nc||(nc={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid AppStatusEnum");return n}})(nc||(nc={}));var xse=function(r,e,t){t===void 0&&(t=!0);try{return Promise.resolve((function(){if(t){var n=r?.split("/vc/auth/")[0];return n||ot("Invalid origin",Ge.InvalidData),Promise.resolve(y6.getApp(n)).then(function(i){return Lb(e).fragment!==i.accountName.toString()&&ot("Invalid app",Ge.InvalidData),{origin:n,app:i}})}})())}catch(n){return Promise.reject(n)}},y6=(function(){function r(e){if(this.accountName=void 0,this.appName=void 0,this.username=void 0,this.usernameHash=void 0,this.description=void 0,this.logoUrl=void 0,this.origin=void 0,this.version=void 0,this.status=void 0,this.accentColor=void 0,this.backgroundColor=void 0,this.accountName=e.accountName,this.appName=e.appName,this.username=e.username,this.description=e.description,this.logoUrl=e.logoUrl,this.origin=e.origin,this.version=e.version,this.status=e.status,this.accentColor=e.accentColor,this.backgroundColor=e.backgroundColor,e.usernameHash)this.usernameHash=e.usernameHash;else{if(!e.username)throw new Error("Either username or usernameHash must be provided");this.usernameHash=$t.from(e.username.usernameHash)}}return r.create=function(e){try{var t=Ei.fromUsername(e.usernamePrefix,rc.APP,Ki().accountSuffix);return Promise.resolve(qa().newApp(e.appName,e.description,t.usernameHash,e.logoUrl,e.origin,e.backgroundColor,e.accentColor,e.publicKey,e.signer)).then(function(n){var i=n.processed.action_traces[0].inline_traces[0].act;return new r(zi({},e,{accountName:Xe.from(i.data.name),username:t,version:i.data.version,status:nc.READY}))})}catch(n){return Promise.reject(n)}},r.getApp=function(e){try{return Promise.resolve(qa().getApp(e)).then(function(t){return new r({accountName:t.accountName,appName:t.appName,usernameHash:t.usernameHash,description:t.description,logoUrl:t.logoUrl,origin:t.origin,version:t.version,status:nc.READY,accentColor:t.accentColor,backgroundColor:t.backgroundColor})})}catch(t){return Promise.reject(t)}},r})();qt("tonomy-sdk:vc");var $d=(function(){function r(t){this.decodedJwt=void 0,this.jwt=void 0,this.decodedJwt=ey(t),this.jwt=t}var e=r.prototype;return e.getPayload=function(){return this.decodedJwt.payload},e.getVc=function(){return this.getPayload().vc},e.getCredentialSubject=function(){return this.getVc().credentialSubject},e.getIssuer=function(){return this.getPayload().iss},e.getSubject=function(){return this.getPayload().sub},e.getId=function(){return this.getPayload().jti},e.getAudience=function(){return this.getPayload().aud},e.getExpiration=function(){var t=this.getPayload().exp;return t?QE(t):void 0},e.getIssuedAt=function(){var t=this.getPayload().iat;return t?QE(t):void 0},e.getNotBefore=function(){var t=this.getPayload().nbf;return t?QE(t):void 0},e.verify=function(){try{var t=Ki(),n=new Uae(zi({},sJ(),BW({antelopeChainUrl:t.blockchainUrl,fetch:Gk()})));return Promise.resolve(Ese(this.jwt,n))}catch(i){return Promise.reject(i)}},r.sign=function(t,n,i,a,o){o===void 0&&(o={});try{var s=Array.isArray(n)?n:[n];s.includes("VerifiableCredential")||s.push("VerifiableCredential");var c={"@context":["https://www.w3.org/2018/credentials/v1"],id:t,type:s,issuer:{id:a.did},issuanceDate:new Date().toISOString(),credentialSubject:i};return o.subject&&(c.credentialSubject.id=o.subject),Promise.resolve((function(l,d,h={}){try{const y={iat:void 0,..._se(l,h.removeOriginalFields)};if((function(m){iq(m.vc["@context"]),aq(m.vc.type),sq(m.vc.credentialSubject),m.nbf&&A0(m.nbf),m.exp&&A0(m.exp)})(y),Array.isArray(d)){const m=d[0].did,b=[];for(const v of d){if(v.did!==m)throw new Error("All issuers must be the same did to comply with the Verifiable Conditions spec");b.push({issuer:v.did||y.iss||"",signer:v.signer,alg:v.alg||h.header?.alg||IB})}return Promise.resolve((function(v,{expiresIn:E,canonicalize:x},D){try{if(D.length===0)throw new Error("invalid_argument: must provide one or more issuers");let z=v,Z="";const Y=(N=D,B=function(W){const M=D[W],C={typ:"JWT",alg:M.alg};return W!==0&&(C.cty="JWT"),Promise.resolve(gB(z,{...M,canonicalize:x,expiresIn:E},C)).then(function(R){Z=R,z={jwt:Z}})},T=-1,(function W(M){try{for(;++T<N.length;)if((M=B(T))&&M.then){if(!ed(M))return void M.then(W,F||(F=ii.bind(null,k=new w0,2)));M=M.v}k?ii(k,1,M):k=M}catch(C){ii(k||(k=new w0),2,C)}})(),k);return Promise.resolve(Y&&Y.then?Y.then(function(){return Z}):Z)}catch(z){return Promise.reject(z)}var N,B,k,F,T})(y,{...h},b))}return Promise.resolve(gB(y,{...h,issuer:d.did||y.iss||"",signer:d.signer},{...h.header,alg:d.alg||h.header?.alg||IB}))}catch(y){return Promise.reject(y)}})(c,a,{canonicalize:!0})).then(function(l){return new r(l)})}catch(l){return Promise.reject(l)}},e.toString=function(){return this.jwt},e.toJSON=function(){return this.toString()},r})(),hs=(function(){function r(t){this.vc=void 0,this.decodedPayload=void 0,this.vc=typeof t=="string"?new $d(t):t instanceof r?t.getVc():t,this.decodedPayload=this.getVc().getCredentialSubject().payload}r.sign=function(t,n,i){i===void 0&&(i={});try{var a=this.type;if(a==="VerifiableCredentialWithType"||a==="")throw new Error("class should be a derived class of VerifiableCredentialWithType to use the type property");var o=Object.assign({},{payload:t,type:a}),s="https://tonomy.foundation/vc/id/"+_0(10),c=["VerifiableCredential","TonomyVerifiableCredentialWithType"];return i.additionalTypes&&c.push.apply(c,i.additionalTypes),Promise.resolve($d.sign(s,c,o,n,i)).then(function(l){return new r(l)})}catch(l){return Promise.reject(l)}},r.getType=function(){return this.type};var e=r.prototype;return e.getVc=function(){return this.vc},e.getIssuer=function(){return this.getVc().getIssuer()},e.getPayload=function(){return this.decodedPayload},e.getType=function(){return this.getVc().getCredentialSubject().type},e.verify=function(){try{return Promise.resolve(this.getVc().verify()).then(function(t){return t.verified})}catch(t){return Promise.reject(t)}},e.toString=function(){return this.getVc().toString()},e.toJSON=function(){return this.toString()},r})();hs.type="VerifiableCredentialWithType";function lq(r){return UP.encode(JSON.stringify(r))}function fq(r){return JSON.parse(UP.decode(r))}var qs,mi;function PB(r,e){var t=new URL(r),n=new URL(e);return t.origin===n.origin}function Ase(r){var e=new URL(r,"http://dummybase"),t=e.pathname,n={};e.searchParams.forEach(function(a,o){n[o]=a});var i=e.hash?e.hash.substring(1):"";return{path:t,params:n,fragment:i}}function Sse(r,e,t,n){var i=new URL(e,r);return Object.entries(t).forEach(function(a){i.searchParams.append(a[0],a[1])}),n&&(i.hash=n),i.toString()}(function(r){r.PENDING="PENDING",r.APPROVED="APPROVED",r.DECLINED="DECLINED"})(qs||(qs={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid VeriffStatusEnum");return n}})(qs||(qs={})),(function(r){r.KYC="KYC",r.FIRSTNAME="FIRSTNAME",r.LASTNAME="LASTNAME",r.EMAIL="EMAIL",r.PHONE="PHONE",r.ADDRESS="ADDRESS",r.BIRTHDATE="BIRTHDATE",r.NATIONALITY="NATIONALITY"})(mi||(mi={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid VerificationTypeEnum");return n}})(mi||(mi={}));var jb=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);jb.type="KYCVC";var m6=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);m6.type="FirstNameVC";var g6=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);g6.type="LastNameVC";var v6=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);v6.type="BirthDateVC";var b6=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);b6.type="AddressVC";var w6=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);function Mse(r){switch(r){case"approved":return qs.APPROVED;case"declined":case"resubmission_requested":case"expired":case"abandoned":return qs.DECLINED;default:throw new Error("Unknown decision: "+r)}}function x8(r,e){switch(e){case mi.KYC:return new jb(r);case mi.FIRSTNAME:return new m6(r);case mi.LASTNAME:return new g6(r);case mi.BIRTHDATE:return new v6(r);case mi.ADDRESS:return new b6(r);case mi.NATIONALITY:return new w6(r);default:throw new Error("type "+e+" not valid")}}w6.type="NationalityVC";var Uo=qt("tonomy-sdk:util:WalletRequest");const UB=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function gi(r,e,t){if(!r.s){if(t instanceof ld){if(!t.s)return void(t.o=gi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(gi.bind(null,r,e),gi.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var ld=(function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var a=1&i?e:t;if(a){try{gi(n,1,a(this.v))}catch(o){gi(n,2,o)}return n}return this}return this.o=function(o){try{var s=o.v;1&o.s?gi(n,1,e?e(s):s):t?gi(n,1,t(s)):gi(n,2,s)}catch(c){gi(n,2,c)}},n},r})();function kB(r){return r instanceof ld&&1&r.s}var $b=(function(r){function e(t){var n;return(n=r.call(this,t)||this).decodedPayload.requests=n.decodedPayload.requests.map(function(i){return S0.isLoginRequest(i)&&(i.login.publicKey=Fn.from(i.login.publicKey)),i}),n}return tr(e,r),e.signRequest=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);$b.type="WalletRequest";var _6=(function(r){function e(t){var n,i;return(i=r.call(this,t)||this).decodedPayload.responses=(n=i.decodedPayload.responses)==null?void 0:n.map(function(a){if(Wv.isDataSharingResponse(a)){var o=a.data;!o.username||o.username instanceof Ei||(o.username=Ei.fromFullUsername(o.username)),o.kyc&&(o.kyc=new jb(o.kyc))}return a}),i}return tr(e,r),e.signResponse=function(t,n,i){i===void 0&&(i={});try{var a=this;return Promise.resolve(r.sign.call(a,t,n,i)).then(function(o){return new a(o)})}catch(o){return Promise.reject(o)}},e})(hs);_6.type="WalletResponse";var S0=(function(){function r(t){this.vc=void 0,this.app=void 0,this.vc=new $b(t)}r.isLoginRequest=function(t){return"login"in t},r.isDataSharingRequest=function(t){return"data"in t};var e=r.prototype;return e.getRequests=function(){return this.vc.getPayload().requests},e.getLoginRequest=function(){var t=this.getRequests().find(function(n){return r.isLoginRequest(n)});if(!t)throw new Error("No login request found");return t},e.getDataSharingRequest=function(){return this.getRequests().find(function(t){return r.isDataSharingRequest(t)})},e.getOrigin=function(){return this.getLoginRequest().login.origin},e.verify=function(){try{return Promise.resolve(this.vc.verify())}catch(t){return Promise.reject(t)}},e.getDid=function(){return this.vc.getIssuer()},e.checkReferrerOrigin=function(){var t=document.referrer;if(!t)throw new Error("No referrer found");if(!PB(t,this.getOrigin()))throw new Error("Referrer origin "+t+" does not match login request origin "+this.getOrigin())},e.getApp=function(){try{var t=this;return t.app?Promise.resolve(t.app):Promise.resolve(y6.getApp(t.getOrigin())).then(function(n){return t.app=n,t.app})}catch(n){return Promise.reject(n)}},e.accept=function(t,n){n===void 0&&(n=!1);try{var i=this;return Promise.resolve(i.getApp()).then(function(a){function o(l){return Promise.resolve(t.getIssuer()).then(function(d){return Promise.resolve(_6.signResponse({success:!0,responses:s},d)).then(function(h){return new Wv(h)})})}Uo("WalletRequest/accept: "+a.origin);var s=[],c=(function(l,d){if(typeof l[UB]=="function"){var h,y,m,b=function(N){try{for(;!(h=v.next()).done;)if((N=d(h.value))&&N.then){if(!kB(N))return void N.then(b,m||(m=gi.bind(null,y=new ld,2)));N=N.v}y?gi(y,1,N):y=N}catch(B){gi(y||(y=new ld),2,B)}},v=l[UB]();if(b(),v.return){var E=function(N){try{h.done||v.return()}catch{}return N};if(y&&y.then)return y.then(E,function(N){throw E(N)});E()}return y}if(!("length"in l))throw new TypeError("Object is not iterable");for(var x=[],D=0;D<l.length;D++)x.push(l[D]);return(function(N,B){var k,F,T=-1;return(function z(Z){try{for(;++T<N.length;)if((Z=B(T))&&Z.then){if(!kB(Z))return void Z.then(z,F||(F=gi.bind(null,k=new ld,2)));Z=Z.v}k?gi(k,1,Z):k=Z}catch(Y){gi(k||(k=new ld),2,Y)}})(),k})(x,function(N){return d(x[N])})})(i.getRequests(),function(l){return(function(){if(r.isLoginRequest(l)){var d=function(b){s.push({login:{origin:a.origin,callbackPath:h.login.callbackPath}})},h=l,y=h.login.publicKey;if(Uo("WalletRequest/accept: "+a.origin+": login request",JSON.stringify(h,null,2)),n&&!PB(a.origin,Ki().ssoWebsiteOrigin))throw new Error("Invalid origin for SSO login request. Received "+a.origin+", expected "+Ki().ssoWebsiteOrigin);var m=(function(b,v){try{var E=Promise.resolve(t.getAccountName()).then(function(x){return Promise.resolve(M8(x,{publicKey:y})).then(function(D){if(a.accountName.toString()!==D.toString())throw new Error("App "+a.accountName+" is not authorized for the key "+y.toString())})})}catch(x){return v(x)}return E&&E.then?E.then(void 0,v):E})(0,function(b){return(function(){if(Os(b,Ge.UserNotLoggedInWithThisApp))return Uo("WalletRequest/accept: "+a.origin+": calling loginWithApp()"),Promise.resolve(t.loginWithApp(a,y)).then(function(){});throw b})()});return m&&m.then?m.then(d):d()}return(function(){if(r.isDataSharingRequest(l)){var b=function(){function D(){Uo("WalletRequest/accept: "+a.origin+": data sharing response",JSON.stringify(E,null,2)),s.push(E)}var N=(function(){if(v.data.kyc)return Promise.resolve(t.fetchVerificationData(mi.KYC)).then(function(B){E.data.kyc=B})})();return N&&N.then?N.then(D):D()},v=l;Uo("WalletRequest/accept: "+a.origin+": data sharing request",v);var E={data:{}},x=(function(){if(v.data.username)return Promise.resolve(t.getUsername()).then(function(D){E.data.username=D})})();return x&&x.then?x.then(b):b()}throw new Error("Unknown request type")})()})()});return c&&c.then?c.then(o):o()})}catch(a){return Promise.reject(a)}},e.toJSON=function(){return this.toString()},e.toString=function(){return this.vc.toString()},r})(),E6=(function(){function r(t,n){this.external=void 0,this.sso=void 0,this.external=t,n&&(this.sso=n)}r.fromString=function(t){var n,i=fq(t);Uo("DualWalletRequests/fromString: Decoded requests",i);var a=new S0(i.external);return i.sso&&(n=new S0(i.sso)),new this(a,n)},r.fromUrl=function(){var t=new URLSearchParams(window.location.search).get("payload");if(!t)throw new Error("payload parameter doesn't exist");return this.fromString(t)};var e=r.prototype;return e.verify=function(){try{var t=this;return Promise.resolve(t.external.verify()).then(function(n){function i(a){return n&&a}return t.sso?Promise.resolve(t.sso.verify()).then(i):i(!0)})}catch(n){return Promise.reject(n)}},e.accept=function(t){try{var n=this;return Uo("DualWalletRequests/accept: Accepting requests",typeof n.external,typeof n.sso),Promise.resolve(n.external.accept(t)).then(function(i){function a(){return Zv.fromResponses(i,o)}var o,s=(function(){if(n.sso)return Promise.resolve(n.sso.accept(t,!0)).then(function(c){o=c})})();return s&&s.then?s.then(a):a()})}catch(i){return Promise.reject(i)}},e.reject=function(t){try{var n=this;return Uo("DualWalletRequests/reject: Rejecting requests with error",t,typeof n.external,typeof n.sso),Promise.resolve(Zv.fromError(t,n))}catch(i){return Promise.reject(i)}},e.toJSON=function(){return this.toString()},e.toString=function(){return lq(this.sso?{external:this.external,sso:this.sso}:{external:this.external})},r})(),Wv=(function(){function r(t){this.vc=void 0,this.vc=new _6(t)}var e=r.prototype;return e.getResponses=function(){return this.vc.getPayload().responses},r.isLoginResponse=function(t){return"login"in t},r.isDataSharingResponse=function(t){return"data"in t},e.getLoginResponse=function(){var t,n=(t=this.getResponses())==null?void 0:t.find(function(i){return r.isLoginResponse(i)});if(!n)throw new Error("No login response found");return n},e.getDataSharingResponse=function(){var t;return(t=this.getResponses())==null?void 0:t.find(function(n){return r.isDataSharingResponse(n)})},e.getAccountName=function(){return h6(this.vc.getIssuer())},e.toJSON=function(){return this.toString()},e.toString=function(){return this.vc.toString()},r})(),Zv=(function(){function r(t,n){var i=n.external,a=n.sso,o=n.error,s=n.requests;if(this.success=void 0,this.external=void 0,this.sso=void 0,this.error=void 0,this.requests=void 0,t){if(!i)throw new Error("External wallet response is required for a successful response");this.success=!0,this.external=i,a&&(this.sso=a)}else{if(!o)throw new Error("Error is required for an unsuccessful response");if(!s)throw new Error("Requests are required for an unsuccessful response");this.success=!1,this.error=o,this.requests=s}}r.fromResponses=function(t,n){return new this(!0,{external:t,sso:n})},r.fromError=function(t,n){return new this(!1,{error:t,requests:n})},r.fromString=function(t){var n=fq(t);if(Uo("DualWalletResponse/fromString: Decoded response",n),n.success)return this.fromResponses(new Wv(n.external),n.sso?new Wv(n.sso):void 0);var i=n.error,a=E6.fromString(n.requests);return this.fromError(i,a)},r.fromUrl=function(){var t=new URLSearchParams(window.location.search).get("payload");if(!t)throw new Error("payload parameter doesn't exist");return this.fromString(t)};var e=r.prototype;return e.isSuccess=function(){return this.success},e.verify=function(){try{var t=function(i){function a(o){return i&&o}return n.sso?Promise.resolve(n.sso.vc.verify()).then(a):a(!0)},n=this;if(!n.success)throw new Error("Cannot verify a failed response");return Promise.resolve(n.external?Promise.resolve(n.external.vc.verify()).then(t):t(!0))}catch(i){return Promise.reject(i)}},e.toJSON=function(){return this.toString()},e.toString=function(){return lq({success:this.success,external:this.external,sso:this.sso,error:this.error,requests:this.requests})},e.getRedirectUrl=function(t){var n,i;t===void 0&&(t=!0);var a=this.toString();if(this.isSuccess()){var o=t?this.external:this.sso;if(!o)throw new Error("response not found in getRedirectUrl");n=o.getLoginResponse().login.origin,i=o.getLoginResponse().login.callbackPath}else{if(!this.requests)throw new Error("requests not found in getRedirectUrl");var s=t?this.requests.external:this.requests.sso;if(!s)throw new Error("request not found in getRedirectUrl");n=s.getLoginRequest().login.origin,i=s.getLoginRequest().login.callbackPath}var c=Ase(i),l=c.fragment;return Sse(n,c.path,zi({},c.params,{payload:a}),l)},r})(),Tse=qt("tonomy-sdk:services:communication:message"),$l=(function(r){function e(n){return r.call(this,n)||this}tr(e,r),e.signMessageWithRecipient=function(n,i,a,o){o===void 0&&(o={});try{if(this.type==="Message")throw new Error("class should be a derived class of Message to use the type property");var s=zi({subject:a,additionalTypes:["TonomyMessage"]},o);return Promise.resolve(r.sign.call(this,n,i,s)).then(function(c){return new e(c.getVc())})}catch(c){return Promise.reject(c)}};var t=e.prototype;return t.getRecipient=function(){return this.getVc().getSubject()},t.getSender=function(){return r.prototype.getIssuer.call(this)},e})(hs);$l.type="Message";var A8=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signMessageWithoutRecipient=function(t,n,i){try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,"",i)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e})($l);A8.type="AuthenticationMessage";var dq=(function(r){function e(t){var n,i,a;return(a=r.call(this,t)||this).decodedPayload=Zv.fromString(a.decodedPayload),Tse("LoginRequestResponseMessage payload",JSON.stringify({success:a.decodedPayload.success,external:(n=a.decodedPayload.external)==null?void 0:n.vc.getPayload(),sso:(i=a.decodedPayload.sso)==null?void 0:i.vc.getPayload(),error:a.decodedPayload.error,requests:a.decodedPayload.requests},null,2)),a}return tr(e,r),e.signMessage=function(t,n,i,a){a===void 0&&(a={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,a)).then(function(o){return new e(o)})}catch(o){return Promise.reject(o)}},e})($l);dq.type="LoginRequestResponseMessage";var Yv=(function(r){function e(t){var n,i=(n=r.call(this,t)||this).getVc().getPayload().vc.credentialSubject.payload;return n.decodedPayload={contract:Xe.from(i.contract),action:Xe.from(i.action)},n}return tr(e,r),e.signMessage=function(t,n,i,a){a===void 0&&(a={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,a)).then(function(o){return new e(o)})}catch(o){return Promise.reject(o)}},e})($l);Yv.type="LinkAuthRequestMessage";var M0=(function(r){function e(){return r.apply(this,arguments)||this}return tr(e,r),e.signMessage=function(t,n,i,a){a===void 0&&(a={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,a)).then(function(o){return new e(o)})}catch(o){return Promise.reject(o)}},e})($l);M0.type="LinkAuthRequestResponseMessage";var S8=(function(r){function e(t){var n;return(n=r.call(this,t)||this).type=void 0,n.payload=void 0,n.decodedPayload=zi({},n.decodedPayload,{kyc:new jb(n.decodedPayload.kyc)}),n.decodedPayload.firstName&&(n.decodedPayload.firstName=new m6(n.decodedPayload.firstName)),n.decodedPayload.lastName&&(n.decodedPayload.lastName=new g6(n.decodedPayload.lastName)),n.decodedPayload.birthDate&&(n.decodedPayload.birthDate=new v6(n.decodedPayload.birthDate)),n.decodedPayload.address&&(n.decodedPayload.address=new b6(n.decodedPayload.address)),n.decodedPayload.nationality&&(n.decodedPayload.nationality=new w6(n.decodedPayload.nationality)),n}return tr(e,r),e.signMessage=function(t,n,i,a){a===void 0&&(a={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,a)).then(function(o){return new e(o)})}catch(o){return Promise.reject(o)}},e})($l);S8.type="VeriffVerificationMessage";var M8=function(r,e){try{return Promise.resolve(fl(r)).then(function(t){if(t||ot("couldn't fetch account",Ge.AccountNotFound),e.publicKey){var n=e.publicKey,i=t.permissions.find(function(a){return a.required_auth.keys[0].key.toString()===n.toString()});return i||ot("No permission found with key "+n,Ge.UserNotLoggedInWithThisApp),i.perm_name}return e.keyManager||ot("keyManager missing",Ge.MissingParams),Promise.resolve(e.keyManager.getKey({level:ct.BROWSER_LOCAL_STORAGE})).then(function(a){return Promise.resolve(y6.getApp(window.location.origin)).then(function(o){try{var s=t.getPermission(o.accountName).required_auth.keys[0].key;a.toString()!==s.toString()&&ot("key not authorized",Ge.KeyNotFound)}catch(c){if(!c.message.startsWith("Unknown permission "))throw c;ot("No permission found for app "+o.accountName,Ge.UserNotLoggedInWithThisApp)}return o.accountName})})})}catch(t){return Promise.reject(t)}},fl=function(r){try{var e,t=function(){return Promise.resolve(kb(e))},n=(function(){if(r instanceof Ei)return Promise.resolve(qa().getPerson(r)).then(function(i){e=i.accountName});e=r})();return Promise.resolve(n&&n.then?n.then(t):t())}catch(i){return Promise.reject(i)}},Cs,hq=(function(r){function e(){return r.apply(this,arguments)||this}tr(e,r);var t=e.prototype;return t.savePassword=function(n,i){try{var a,o,s=function(){return c.storage.salt=o,Promise.resolve(c.storage.salt).then(function(){return Promise.resolve(c.keyManager.storeKey({level:ct.PASSWORD,privateKey:a,challenge:n})).then(function(){return Promise.resolve(c.keyManager.storeKey({level:ct.ACTIVE,privateKey:a})).then(function(){})})})},c=this,l=i.salt?(o=i.salt,Promise.resolve(i.keyFromPasswordFn(n,o)).then(function(d){a=d.privateKey})):Promise.resolve(i.keyFromPasswordFn(n)).then(function(d){a=d.privateKey,o=d.salt});return Promise.resolve(l&&l.then?l.then(s):s())}catch(d){return Promise.reject(d)}},t.checkPassword=function(n,i){try{var a=this;return Promise.resolve(a.getAccountName()).then(function(o){return Promise.resolve(qa().getPerson(o)).then(function(s){return Promise.resolve(a.savePassword(n,zi({},i,{salt:s.passwordSalt}))).then(function(){return Promise.resolve(a.keyManager.getKey({level:ct.PASSWORD})).then(function(c){return Promise.resolve(fl(s.accountName)).then(function(l){var d=l.getPermission("owner").required_auth.keys[0].key;return c.toString()!==d.toString()&&ot("Password is incorrect",Ge.PasswordInvalid),!0})})})})})}catch(o){return Promise.reject(o)}},t.savePIN=function(n){try{var i=rv().privateKey;return Promise.resolve(this.keyManager.storeKey({level:ct.PIN,privateKey:i,challenge:n})).then(function(){})}catch(a){return Promise.reject(a)}},t.checkPin=function(n){try{return Promise.resolve(this.keyManager.checkKey({level:ct.PIN,challenge:n})).then(function(i){return i||ot("Pin is incorrect",Ge.PinInvalid),!0})}catch(i){return Promise.reject(i)}},t.saveFingerprint=function(){try{var n=rv().privateKey;return Promise.resolve(this.keyManager.storeKey({level:ct.BIOMETRIC,privateKey:n})).then(function(){})}catch(i){return Promise.reject(i)}},t.saveLocal=function(){try{var n=rv().privateKey;return Promise.resolve(this.keyManager.storeKey({level:ct.LOCAL,privateKey:n})).then(function(){})}catch(i){return Promise.reject(i)}},t.createClientAuthorization=function(n){try{var i=this,a=_0(8);return Promise.resolve(i.getDid()).then(function(o){var s=o+"/vc/auth/"+a;return Promise.resolve(i.getIssuer()).then(function(c){return Promise.resolve($d.sign(s,"ClientAuthorization",n,c)).then(function(l){return l.toString()})})})}catch(o){return Promise.reject(o)}},e})(d6),Rse=(function(r){function e(){return r.apply(this,arguments)||this}tr(e,r);var t=e.prototype;return t.getCaptchaToken=function(){try{return Promise.resolve(this.storage.captchaToken)}catch(n){return Promise.reject(n)}},t.saveCaptchaToken=function(n){try{return this.storage.captchaToken=n,Promise.resolve(this.storage.captchaToken).then(function(){})}catch(i){return Promise.reject(i)}},e})(d6),pq=function(r){try{var e=Ki().accountsServiceUrl;return Promise.resolve((function(t,n){try{var i=Promise.resolve(JI(e+"/v1/accounts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).then(function(a){return Promise.resolve(a.json()).then(function(o){if(a.status!==201){if(a.status===400)return ot("Communication Service error: "+o.message+", errors: "+o.errors,Ge.AccountServiceError);ot("Communication Service error: "+o.message+", status: "+a.status,Ge.AccountServiceError)}return{transactionId:o.transactionId,accountName:Xe.from(o.accountName)}})})}catch(a){return n(a)}return i&&i.then?i.then(void 0,n):i})(0,function(t){if(t instanceof Error&&t.message.includes("FetchError: request to http://localhost:5000/v1/accounts/create failed, reason: socket hang up"))return pq(r);throw t}))}catch(t){return Promise.reject(t)}};(function(r){r.CREATING_ACCOUNT="CREATING_ACCOUNT",r.LOGGING_IN="LOGGING_IN",r.READY="READY",r.DEACTIVATED="DEACTIVATED"})(Cs||(Cs={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid UserStatusEnum");return n}})(Cs||(Cs={}));var Lu=qt("tonomy-sdk:services:communication:communication"),qB=1e5,Qv=(function(){function r(t){if(t===void 0&&(t=!0),this.socketServer=void 0,this.subscribers=new Map,this.authMessage=void 0,this.loggedIn=!1,this.url=void 0,this.seenMessages=new Map,this.seemMessageTTL=3600,r.singleton&&t)return r.singleton;this.url=Ki().communicationUrl,this.socketServer=ev(this.url,{transports:["websocket"],autoConnect:!1}),r.singleton=this}var e=r.prototype;return e.checkSeenMessage=function(t){var n;if(typeof process<"u"&&(n=process)!=null&&n.env&&!Lne.CI)return!1;var i=this.seenMessages.has(jd(t));return this.addSeenMessage(t),this.trimSeenMessages(),i},e.trimSeenMessages=function(){var t=this;this.seenMessages.forEach(function(n,i){n.getTime()+t.seemMessageTTL<Date.now()&&t.seenMessages.delete(i)})},e.addSeenMessage=function(t){this.seenMessages.set(jd(t),new Date)},e.isConnected=function(){return this.socketServer&&this.socketServer.connected},e.isLoggedIn=function(){return this.loggedIn&&this.authMessage!==void 0&&typeof this.authMessage=="object"},e.connect=function(){try{var t=this;return t.isConnected()?Promise.resolve():(t.socketServer.connect(),Promise.resolve(new Promise(function(n,i){t.socketServer.on("connect",function(){try{var a=function(){n(!0)},o=(function(){if(t.isLoggedIn())return Promise.resolve(t.login(t.authMessage)).then(function(){})})();return Promise.resolve(o&&o.then?o.then(a):a())}catch(s){return Promise.reject(s)}}),setTimeout(function(){t.isConnected()||i(WA("Could not connect to Tonomy Communication server",Ge.CommunicationNotConnected))},qB)})).then(function(){}))}catch(n){return Promise.reject(n)}},e.emitMessage=function(t,n){try{var i=this;return Lu("emitMessage",t,n.getType(),n.getSender(),n.getRecipient(),n.getPayload()),Promise.resolve(new Promise(function(a,o){i.socketServer.timeout(qB).emit(t,{message:n.toString()},function(s,c){if(Lu("emitMessage response",JSON.stringify(s,null,2),JSON.stringify(c,null,2)),c!=null&&c.error){var l;if((c==null||(l=c.exception)==null?void 0:l.name)==="HttpException"){var d=new RN(c);return void o(d)}o(c)}else s?o(s):a(c)})})).then(function(a){if(a.status!==200)throw new RN({exception:{response:a.error,name:"HttpException",status:a.status,message:a.error},name:"CommunicationError",message:a.error});return a.details})}catch(a){return Promise.reject(a)}},e.login=function(t){try{var n=this;return Promise.resolve(n.connect()).then(function(){return Promise.resolve(n.emitMessage("v1/login",t)).then(function(i){return i&&(n.loggedIn=!0,n.authMessage=t),i})})}catch(i){return Promise.reject(i)}},e.sendMessage=function(t){try{return this.isLoggedIn()||ot("You need to login before sending a messages",Ge.CommunicationNotLoggedIn),Promise.resolve(this.emitMessage("v1/message/relay/send",t))}catch(n){return Promise.reject(n)}},e.sendSwapMessage=function(t){try{return this.isLoggedIn()||ot("You need to login before sending a messages",Ge.CommunicationNotLoggedIn),Promise.resolve(this.emitMessage("v2/swap/token/tono",t))}catch(n){return Promise.reject(n)}},e.subscribeMessage=function(t,n){var i=this;r.identifier++;var a=function(o){var s=new $l(o);return Lu("receiveMessage",s.getType(),s.getSender(),s.getRecipient()),s.getType()===n&&t(s),i};return this.socketServer.on("v1/message/relay/receive",a),this.subscribers.set(r.identifier,a),r.identifier},e.unsubscribeMessage=function(t){var n=this.subscribers.get(t);n&&(this.socketServer.off("v1/message/relay/receive",n),this.subscribers.delete(t))},e.disconnect=function(){this.loggedIn=!1,delete this.authMessage,this.isConnected()&&this.socketServer.disconnect()},e.subscribeVeriffVerification=function(t){var n=this;r.identifier++,Lu("subscribeVeriffVerification() called");var i=function(a){try{Lu("message",a);var o=new S8(a);if(n.checkSeenMessage(o.toString()))return Lu("receiveVeriffVerification duplicate",o.getType(),o.getSender(),o.getRecipient()),Promise.resolve();Lu("receiveVeriffVerification",o.getType(),o.getSender(),o.getRecipient());var s=(function(){if(o.getType()===S8.getType())return Promise.resolve(t(o)).then(function(){})})();return Promise.resolve(s&&s.then?s.then(function(){return n}):n)}catch(c){return Promise.reject(c)}};return this.socketServer.on("v1/verification/veriff/receive",i),this.subscribers.set(r.identifier,i),r.identifier},e.unsubscribeVeriffVerification=function(t){var n=this.subscribers.get(t);n&&(this.socketServer.off("v1/verification/veriff/receive",n),this.subscribers.delete(t))},e.subscribeSwapBaseToTonomy=function(t){r.identifier++;var n=function(i){try{return typeof i!="string"&&ot("Invalid swap data received:",i),Lu("Received swap from base to tonomy:",i),Promise.resolve(t(i)).then(function(){})}catch(a){return Promise.reject(a)}};return this.socketServer.on("v1/swap/token/confirm",n),this.subscribers.set(r.identifier,n),r.identifier},e.unsubscribeSwapBaseToTonomy=function(t){var n=this.subscribers.get(t);n&&(this.socketServer.off("v1/swap/token/confirm",n),this.subscribers.delete(t))},r})();Qv.singleton=void 0,Qv.identifier=0;var dl,hl,yq=(function(r){function e(n,i){var a;return(a=r.call(this,n,i)||this).communication=void 0,a.communication=new Qv(!1),a}tr(e,r);var t=e.prototype;return t.loginCommunication=function(n){try{return Promise.resolve(this.communication.login(n))}catch(i){return Promise.reject(i)}},t.unsubscribeMessage=function(n){this.communication.unsubscribeMessage(n)},t.subscribeMessage=function(n,i){return this.communication.subscribeMessage(n,i)},t.subscribeVeriffVerification=function(n){return this.communication.subscribeVeriffVerification(n)},t.unsubscribeVeriffVerification=function(n){this.communication.unsubscribeVeriffVerification(n)},t.subscribeSwapBaseToTonomy=function(n){return this.communication.subscribeSwapBaseToTonomy(n)},t.sendMessage=function(n){try{return Promise.resolve(this.communication.sendMessage(n))}catch(i){return Promise.reject(i)}},t.disconnectCommunication=function(){this.communication.disconnect()},e})(hq),Ose=(function(){function r(t){this.repository=void 0,this.repository=t}var e=r.prototype;return e.create=function(t,n,i,a){try{return Promise.resolve(this.repository.create(t,n,i,a.toString())).then(function(){return a})}catch(o){return Promise.reject(o)}},e.findLatestApproved=function(t){try{return Promise.resolve(this.findLatestWithTypeAndStatus(t,qs.APPROVED))}catch(n){return Promise.reject(n)}},e.findLatestWithTypeAndStatus=function(t,n){try{return Promise.resolve(this.repository.findLatestWithStatus(t,n)).then(function(i){return i?x8(i.vc,t):null})}catch(i){return Promise.reject(i)}},e.updateRecord=function(t,n,i,a){try{var o=this;return Promise.resolve(o.repository.findByIdAndType(t,n)).then(function(s){if(s)return s.vc=a.toString(),s.status=i,s.reuseCount+=1,Promise.resolve(o.repository.update(s)).then(function(){return x8(s.vc,s.type)});throw new Error("Record not found for update")})}catch(s){return Promise.reject(s)}},e.deleteAll=function(){try{return Promise.resolve(this.repository.deleteAll()).then(function(){})}catch(t){return Promise.reject(t)}},e.emplaceByVeriffIdAndType=function(t,n,i,a){try{var o=this;return Promise.resolve(o.repository.findByIdAndType(t,n)).then(function(s){return s?o.updateRecord(t,n,i,a):o.create(t,n,i,a)})}catch(s){return Promise.reject(s)}},e.countReuse=function(t){try{return Promise.resolve(this.repository.findCountByType(t))}catch(n){return Promise.reject(n)}},e.updateReuseableCount=function(t){try{var n=this;return Promise.resolve(n.repository.findByType(t)).then(function(i){var a=(function(){if(i)return i.reuseCount+=1,Promise.resolve(n.repository.update(i)).then(function(){})})();if(a&&a.then)return a.then(function(){})})}catch(i){return Promise.reject(i)}},r})();function ns(r,e,t,n){var i,a=arguments.length,o=a<3?e:n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var s=r.length-1;s>=0;s--)(i=r[s])&&(o=(a<3?i(o):a>3?i(e,t,o):i(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function Ms(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}typeof SuppressedError=="function"&&SuppressedError,(function(r){r.VERIFF="VERIFF"})(dl||(dl={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid ProviderEnum");return n}})(dl||(dl={})),(function(r){r.VERIFFv1="VERIFFv1"})(hl||(hl={})),(function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid VCTypeEnum");return n}})(hl||(hl={}));var ia=function(){this.sessionId=void 0,this.vc=void 0,this.status=void 0,this.type=void 0,this.provider=void 0,this.vcType=void 0,this.version=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.reuseCount=void 0};ns([Pee({type:"varchar"}),EE(),Ms("design:type",String)],ia.prototype,"sessionId",void 0),ns([xo({type:"varchar"}),Ms("design:type",String)],ia.prototype,"vc",void 0),ns([xo({type:"varchar",enum:qs,default:qs.PENDING}),Ms("design:type",String)],ia.prototype,"status",void 0),ns([xo({type:"varchar",enum:mi,default:mi.KYC}),EE(),Ms("design:type",String)],ia.prototype,"type",void 0),ns([xo({type:"varchar",enum:dl,default:dl.VERIFF}),Ms("design:type",String)],ia.prototype,"provider",void 0),ns([xo({type:"varchar",enum:hl,default:hl.VERIFFv1}),Ms("design:type",String)],ia.prototype,"vcType",void 0),ns([xo({type:"int"}),Ms("design:type",Number)],ia.prototype,"version",void 0),ns([xo({type:"datetime"}),Ms("design:type",Date)],ia.prototype,"createdAt",void 0),ns([xo({type:"datetime"}),EE(),Ms("design:type",Date)],ia.prototype,"updatedAt",void 0),ns([xo({type:"int"}),Ms("design:type",Number)],ia.prototype,"reuseCount",void 0),ia=ns([Uee("IdentityVerificationStorage")],ia);var Cse=(function(){function r(t){this.ormRepository=void 0,this.ormRepository=t.getRepository(ia)}var e=r.prototype;return e.create=function(t,n,i,a){try{var o=new Date,s=this.ormRepository.create({sessionId:t,vc:a,status:i,type:n,provider:dl.VERIFF,vcType:hl.VERIFFv1,version:1,reuseCount:1,createdAt:o,updatedAt:o});return Promise.resolve(this.ormRepository.save(s))}catch(c){return Promise.reject(c)}},e.findLatestWithStatus=function(t,n){try{return Promise.resolve(this.ormRepository.findOne({where:{status:n,type:t},order:{createdAt:"DESC"}}))}catch(i){return Promise.reject(i)}},e.deleteAll=function(){try{return Promise.resolve(this.ormRepository.delete({})).then(function(){})}catch(t){return Promise.reject(t)}},e.update=function(t){try{var n=new Date;return t.updatedAt=n,Promise.resolve(this.ormRepository.save(t))}catch(i){return Promise.reject(i)}},e.findByIdAndType=function(t,n){try{return Promise.resolve(this.ormRepository.findOne({where:{sessionId:t,type:n}}))}catch(i){return Promise.reject(i)}},e.findLatestWithTypeAndStatus=function(t,n){try{return Promise.resolve(this.ormRepository.findOne({where:{type:t,status:n},order:{updatedAt:"DESC"}}))}catch(i){return Promise.reject(i)}},e.findCountByType=function(t){try{return Promise.resolve(this.ormRepository.sum("reuseCount",t?{type:t}:{})).then(function(n){return n||0})}catch(n){return Promise.reject(n)}},e.findByType=function(t){try{return Promise.resolve(this.ormRepository.findOne({where:{type:t}}))}catch(n){return Promise.reject(n)}},r})(),LB=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function vi(r,e,t){if(!r.s){if(t instanceof fd){if(!t.s)return void(t.o=vi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(vi.bind(null,r,e),vi.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var fd=(function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var a=1&i?e:t;if(a){try{vi(n,1,a(this.v))}catch(o){vi(n,2,o)}return n}return this}return this.o=function(o){try{var s=o.v;1&o.s?vi(n,1,e?e(s):s):t?vi(n,1,t(s)):vi(n,2,s)}catch(c){vi(n,2,c)}},n},r})();function jB(r){return r instanceof fd&&1&r.s}var Ro=qt("tonomy-sdk:controllers:UserDataVault"),T8=(function(r){function e(n,i,a){var o;(o=r.call(this,n,i)||this).idVerificationManager=void 0,o.dataSource=void 0,o.handleVerificationUpdate=function(c){try{return Ro("handleVerificationUpdate()",c.getIssuer(),c.getPayload()),Promise.resolve(c.verify()).then(function(){var l=c.getIssuer();return Promise.resolve(cq(l)).then(function(){var d=c.getPayload(),h=d.kyc.getPayload(),y=Mse(h.data.verification.decision);Ro("handleVerificationUpdate() kycPayload",l,h,d);var m=(function(b,v){if(typeof b[LB]=="function"){var E,x,D,N=b[LB]();if((function T(z){try{for(;!(E=N.next()).done;)if((z=v(E.value))&&z.then){if(!jB(z))return void z.then(T,D||(D=vi.bind(null,x=new fd,2)));z=z.v}x?vi(x,1,z):x=z}catch(Z){vi(x||(x=new fd),2,Z)}})(),N.return){var B=function(T){try{E.done||N.return()}catch{}return T};if(x&&x.then)return x.then(B,function(T){throw B(T)});B()}return x}if(!("length"in b))throw new TypeError("Object is not iterable");for(var k=[],F=0;F<b.length;F++)k.push(b[F]);return(function(T,z){var Z,Y,W=-1;return(function M(C){try{for(;++W<T.length;)if((C=z(W))&&C.then){if(!jB(C))return void C.then(M,Y||(Y=vi.bind(null,Z=new fd,2)));C=C.v}Z?vi(Z,1,C):Z=C}catch(R){vi(Z||(Z=new fd),2,R)}})(),Z})(k,function(T){return v(k[T])})})(Object.entries(d),function(b){var v=b[0],E=b[1],x=mi.from(v),D=x8(E.toString(),x);return Promise.resolve(o.idVerificationManager.emplaceByVeriffIdAndType(h.sessionId+v,x,y,D)).then(function(){Ro("handleVerificationUpdate() successfully stored "+v+" VC in storage")})});if(m&&m.then)return m.then(function(){})})})}catch(l){return Promise.reject(l)}},o.dataSource=a;var s=new Cse(a);return o.idVerificationManager=new Ose(s),o}tr(e,r);var t=e.prototype;return t.checkTableExists=function(n){try{var i=this.dataSource.createQueryRunner();return Promise.resolve((function(a,o){try{var s=Promise.resolve(i.query("SELECT name FROM sqlite_master WHERE type='table' AND name=?",[n])).then(function(c){return Ro("Table check result for "+n+":",c),c.length>0})}catch(c){return o(!0,c)}return s&&s.then?s.then(o.bind(null,!1),o.bind(null,!0)):o(!1,s)})(0,function(a,o){return Promise.resolve(i.release()).then(function(){if(a)throw o;return o})}))}catch(a){return Promise.reject(a)}},t.initializeKycDataSource=function(){try{var n=function(){return Promise.resolve(i.checkTableExists("IdentityVerificationStorage")).then(function(o){var s=(function(){if(!o)return Promise.resolve(i.dataSource.synchronize()).then(function(){})})();if(s&&s.then)return s.then(function(){})})},i=this,a=(function(){if(i.dataSource&&!i.dataSource.isInitialized)return Promise.resolve(i.dataSource.initialize()).then(function(){})})();return Promise.resolve(a&&a.then?a.then(n):n())}catch(o){return Promise.reject(o)}},t.waitForNextVeriffVerification=function(){try{var n,i=this;return Ro("waitForNextVeriffVerification"),Promise.resolve(new Promise(function(a,o){n=i.subscribeVeriffVerification(function(s){try{return Promise.resolve((function(c,l){try{var d=(Ro("waitForNextVeriffVerification() this.handleVerificationUpdate(message)"),Promise.resolve(i.handleVerificationUpdate(s)).then(function(){if(Ro("waitForNextVeriffVerification() this.handleVerificationUpdate(message) resolved"),!n)throw new Error("Failed to subscribe to Veriff verification messages");return i.unsubscribeVeriffVerification(n),Promise.resolve(i.fetchVerificationData(mi.KYC)).then(function(h){var y=h.getPayload();Ro("waitForNextVeriffVerification() resolved with",y),a(y)})}))}catch(h){return l(h)}return d&&d.then?d.then(void 0,l):d})(0,function(c){o(c)}))}catch(c){return Promise.reject(c)}})}))}catch(a){return Promise.reject(a)}},t.fetchVerificationData=function(n,i){try{return i===void 0&&(i=qs.APPROVED),Ro("fetchVerificationData()",n,i),Promise.resolve(this.idVerificationManager.findLatestWithTypeAndStatus(n,i)).then(function(a){return a||ot(n+" verification data with status "+i+" requested but not available in storage",Ge.VerificationDataNotFound),a})}catch(a){return Promise.reject(a)}},t.fetchReuseableKycCount=function(n){try{return Promise.resolve(this.idVerificationManager.countReuse(n))}catch(i){return Promise.reject(i)}},t.updateReuseableKycCount=function(n){try{return Promise.resolve(this.idVerificationManager.updateReuseableCount(n)).then(function(){})}catch(i){return Promise.reject(i)}},e})(yq),Nse=function(r){try{var e=r.toPublic();return Promise.resolve(Bse(e)).then(function(t){return{did:t,signer:zk(r),alg:"ES256K-R"}})}catch(t){return Promise.reject(t)}},Bse=function(r){try{if(r.type!==_t.K1)throw new Error("Only K1 keys are supported");var e=r.data.toString("hex"),t=(function(n,i="base58btc",a){if(a){const o=typeof a=="string"?Lk[a]:a,s=qv.encodingLength(o),c=new Uint8Array(s+n.length);return((l,d,h=0)=>{qv.encode(l,d,h)})(o,c),c.set(n,s),Hi.toString(p8.encode(i,c),"utf-8")}return Hi.toString(p8.encode(i,n),"utf-8")})(Ip(tl.computePublicKey("0x"+e,!0)),"base58btc","secp256k1-pub");return Promise.resolve("did:key:"+t)}catch(n){return Promise.reject(n)}};function ju(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var $B=qt("tonomy-sdk:controllers:UserOnboarding");const FB=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function bi(r,e,t){if(!r.s){if(t instanceof dd){if(!t.s)return void(t.o=bi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(bi.bind(null,r,e),bi.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var dd=(function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var a=1&i?e:t;if(a){try{bi(n,1,a(this.v))}catch(o){bi(n,2,o)}return n}return this}return this.o=function(o){try{var s=o.v;1&o.s?bi(n,1,e?e(s):s):t?bi(n,1,t(s)):bi(n,2,s)}catch(c){bi(n,2,c)}},n},r})();function zB(r){return r instanceof dd&&1&r.s}function VB(r,e,t){if(typeof r[FB]=="function"){var n,i,a,o=function(h){try{for(;!((n=s.next()).done||t&&t());)if((h=e(n.value))&&h.then){if(!zB(h))return void h.then(o,a||(a=bi.bind(null,i=new dd,2)));h=h.v}i?bi(i,1,h):i=h}catch(y){bi(i||(i=new dd),2,y)}},s=r[FB]();if(o(),s.return){var c=function(h){try{n.done||s.return()}catch{}return h};if(i&&i.then)return i.then(c,function(h){throw c(h)});c()}return i}if(!("length"in r))throw new TypeError("Object is not iterable");for(var l=[],d=0;d<r.length;d++)l.push(r[d]);return(function(h,y,m){var b,v,E=-1;return(function x(D){try{for(;++E<h.length&&(!m||!m());)if((D=y(E))&&D.then){if(!zB(D))return void D.then(x,v||(v=bi.bind(null,b=new dd,2)));D=D.v}b?bi(b,1,D):b=D}catch(N){bi(b||(b=new dd),2,N)}})(),b})(l,function(h){return e(l[h])},t)}var Ise=(function(r){function e(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=r.call.apply(r,[this].concat(a))||this).chainID=void 0,n}tr(e,r);var t=e.prototype;return t.validateUsername=function(n){typeof n=="string"&&n.length!==0||ot("Username must be a string",Ge.InvalidData),/^[A-Za-z0-9_-]{1,100}$/g.test(n)||ot("Username contains invalid characters",Ge.InvalidUsername)},t.createDid=function(){try{var n=function(){return Promise.resolve(i.getAccountName()).then(function(o){return Promise.resolve(oq(o.toString())).then(function(s){return i.storage.did=s,Promise.resolve(i.storage.did).then(function(){return i.storage.did})})})},i=this,a=(function(){if(!i.chainID)return Promise.resolve(l6()).then(function(o){i.chainID=o})})();return Promise.resolve(a&&a.then?a.then(n):n())}catch(o){return Promise.reject(o)}},t.login=function(n,i,a){try{var o=this;o.validateUsername(n.getBaseUsername());var s=o.keyManager;return Promise.resolve(qa().getPerson(n)).then(function(c){return Promise.resolve(o.savePassword(i,zi({},a,{salt:c.passwordSalt}))).then(function(){return Promise.resolve(s.getKey({level:ct.PASSWORD})).then(function(l){return Promise.resolve(fl(c.accountName)).then(function(d){var h=d.getPermission("owner").required_auth.keys[0].key;return l.toString()!==h.toString()&&ot("Password is incorrect",Ge.PasswordInvalid),o.storage.accountName=c.accountName,o.storage.username=n,o.storage.status=Cs.LOGGING_IN,Promise.resolve(o.storage.accountName).then(function(){return Promise.resolve(o.storage.username).then(function(){return Promise.resolve(o.storage.status).then(function(){return Promise.resolve(o.createDid()).then(function(){return c})})})})})})})})}catch(c){return Promise.reject(c)}},t.isLoggedIn=function(){try{return Promise.resolve(this.getStatus()).then(function(n){return n===Cs.READY})}catch(n){return Promise.reject(n)}},t.createPerson=function(){try{var n=this,i=n.keyManager;return Promise.resolve(n.getUsername()).then(function(a){var o=a.usernameHash;return Promise.resolve(i.getKey({level:ct.PASSWORD})).then(function(s){return Promise.resolve(n.storage.salt).then(function(c){return Promise.resolve(n.storage.captchaToken).then(function(l){function d(y){return Promise.resolve(n.storage.accountName).then(function(){return n.storage.status=Cs.CREATING_ACCOUNT,Promise.resolve(n.storage.status).then(function(){return Promise.resolve(n.createDid()).then(function(){return Promise.resolve(n.getAccountName()).then(function(m){var b=m.toString();return Promise.resolve(n.getUsername()).then(function(v){var E=v.getBaseUsername();return Promise.resolve(n.getDid()).then(function(x){$B("Created account",{accountName:b,username:E,did:x})})})})})})})}var h=ju(function(){return Promise.resolve(pq({usernameHash:o,publicKey:s,salt:c,captchaToken:l})).then(function(y){n.storage.accountName=y.accountName})},function(y){throw y.status===400&&y.message==="Username is taken"&&ot("Username is taken",Ge.UsernameTaken),y});return h&&h.then?h.then(d):d()})})})})}catch(a){return Promise.reject(a)}},t.saveUsername=function(n){try{var i=function(c){return a.storage.username=o,Promise.resolve(a.storage.username).then(function(){})},a=this;a.validateUsername(n);var o=Ei.fromUsername(n,rc.PERSON,Ki().accountSuffix),s=ju(function(){return Promise.resolve(fl(o)).then(function(c){c&&ot("Username is taken",Ge.UsernameTaken)})},function(c){if(!Os(c,Ge.UsernameNotFound))throw c});return Promise.resolve(s&&s.then?s.then(i):i())}catch(c){return Promise.reject(c)}},t.usernameExists=function(n){try{var i=Ei.fromUsername(n,rc.PERSON,Ki().accountSuffix);return Promise.resolve(ju(function(){return Promise.resolve(fl(i)).then(function(){return!0})},function(a){if(Os(a,Ge.UsernameNotFound))return!1;throw a}))}catch(a){return Promise.reject(a)}},t.updateKeys=function(n){try{var i=this;return Promise.resolve(i.getStatus()).then(function(a){function o(d){function h(m){function b(E){var x=_d(s,ct.PASSWORD,n);return Promise.resolve(i.getAccountName()).then(function(D){return Promise.resolve(qa().updateKeysPerson(D,c,x)).then(function(){return i.storage.status=Cs.READY,Promise.resolve(i.storage.status).then(function(){})})})}var v=ju(function(){return Promise.resolve(s.getKey({level:ct.LOCAL})).then(function(E){c.LOCAL=E.toString()})},function(E){if(!Os(E,Ge.KeyNotFound))throw E});return v&&v.then?v.then(b):b()}var y=ju(function(){return Promise.resolve(s.getKey({level:ct.BIOMETRIC})).then(function(m){c.BIOMETRIC=m.toString()})},function(m){if(!Os(m,Ge.KeyNotFound))throw m});return y&&y.then?y.then(h):h()}a===Cs.DEACTIVATED&&ot("Can't update keys for deactivated user",Ge.UserDeactivated);var s=i.keyManager,c={},l=ju(function(){return Promise.resolve(s.getKey({level:ct.PIN})).then(function(d){c.PIN=d.toString()})},function(d){if(!Os(d,Ge.KeyNotFound))throw d});return l&&l.then?l.then(o):o()})}catch(a){return Promise.reject(a)}},t.checkKeysStillValid=function(){try{var n=this;return Promise.resolve(n.getStatus()).then(function(i){return i!==Cs.READY&&ot("User is not ready",Ge.AccountDoesntExist),Promise.resolve(n.storage.accountName).then(function(a){return Promise.resolve(fl(a)).then(function(o){var s=VB([{level:ct.PIN,permission:"pin"},{level:ct.BIOMETRIC,permission:"biometric"},{level:ct.LOCAL,permission:"local"},{level:ct.PASSWORD,permission:"active"},{level:ct.PASSWORD,permission:"owner"}],function(c){function l(){var y;try{y=o.getPermission(c.permission)}catch{y=null}!d&&y&&ot(c.level+" key was not found in the keyManager, but was found on the blockchain",Ge.KeyNotFound),d&&!y&&ot(c.level+" keys was not found on the blockchain, but was found in the keyManager",Ge.KeyNotFound),d&&y&&d.toString()!==y.required_auth.keys[0].key.toString()&&ot(c.level+" keys do not match",Ge.KeyNotFound)}var d,h=ju(function(){return Promise.resolve(n.keyManager.getKey({level:c.level})).then(function(y){d=y})},function(){d=null});return h&&h.then?h.then(l):l()});return!s||!s.then||s.then(function(){return!0})})})})}catch(i){return Promise.reject(i)}},t.logout=function(){try{var n=function(o){i.storage.clear(),i.disconnectCommunication()},i=this,a=VB(Object.keys(ct),function(o){return ju(function(){return Promise.resolve(i.keyManager.getKey({level:ct.from(o)})).then(function(){i.keyManager.removeKey({level:ct.from(o)})})},function(s){if(!Os(s,[Ge.KeyNotFound,Ge.InvalidKeyLevel]))throw s})},function(){});return Promise.resolve(a&&a.then?a.then(n):n())}catch(o){return Promise.reject(o)}},t.checkTableExists=function(n){try{var i=this.dataSource.createQueryRunner();return Promise.resolve((function(a,o){try{var s=Promise.resolve(i.query("SELECT name FROM sqlite_master WHERE type='table' AND name=?",[n])).then(function(c){return $B("Table check result for "+n+":",c),c.length>0})}catch(c){return o(!0,c)}return s&&s.then?s.then(o.bind(null,!1),o.bind(null,!0)):o(!1,s)})(0,function(a,o){return Promise.resolve(i.release()).then(function(){if(a)throw o;return o})}))}catch(a){return Promise.reject(a)}},t.initializeKycDataSource=function(){try{var n=function(){return Promise.resolve(i.checkTableExists("IdentityVerificationStorage")).then(function(o){var s=(function(){if(!o)return Promise.resolve(i.dataSource.synchronize()).then(function(){})})();if(s&&s.then)return s.then(function(){})})},i=this,a=(function(){if(i.dataSource&&!i.dataSource.isInitialized)return Promise.resolve(i.dataSource.initialize()).then(function(){return Promise.resolve(i.dataSource.runMigrations()).then(function(){})})})();return Promise.resolve(a&&a.then?a.then(n):n())}catch(o){return Promise.reject(o)}},t.initializeFromStorage=function(){try{var n=this;return Promise.resolve(n.getAccountName()).then(function(i){return Promise.resolve(n.initializeKycDataSource()).then(function(){return(function(){if(i)return Promise.resolve(n.checkKeysStillValid());ot('Account "'+i+'" not found',Ge.AccountDoesntExist)})()})})}catch(i){return Promise.reject(i)}},e})(T8);function HB(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var Dse=qt("tonomy-sdk:controllers:UserRequestsManager");(function(...r){var e,t,n;const i=r.map(s=>s.prototype);function a(...s){for(const c of r)nk(this,new c(...s))}a.prototype=AN(i,a),Object.setPrototypeOf(a,AN(r,null,["prototype"]));let o=a;{const s=((...c)=>{const l=((...d)=>{var h;const y=new Set,m=new Set([...d]);for(;m.size>0;)for(let b of m){const v=[...Cp(b.prototype).map(E=>E.constructor),...(h=jne(b))!==null&&h!==void 0?h:[]].filter(E=>!y.has(E));for(let E of v)m.add(E);y.add(b),m.delete(b)}return[...y]})(...c).map(d=>$ne.get(d)).filter(d=>!!d);return l.length==0?{}:l.length==1?l[0]:l.reduce((d,h)=>((y,m)=>{var b,v,E,x,D,N;return{class:l8([...(b=y?.class)!==null&&b!==void 0?b:[],...(v=m?.class)!==null&&v!==void 0?v:[]]),static:MN((E=y?.static)!==null&&E!==void 0?E:{},(x=m?.static)!==null&&x!==void 0?x:{}),instance:MN((D=y?.instance)!==null&&D!==void 0?D:{},(N=m?.instance)!==null&&N!==void 0?N:{})}})(d,h))})(...r);for(let c of(e=s?.class)!==null&&e!==void 0?e:[]){const l=c(o);l&&(o=l)}TN((t=s?.static)!==null&&t!==void 0?t:{},o),TN((n=s?.instance)!==null&&n!==void 0?n:{},o.prototype)}return ik.set(o,r),o})(d6,hq,Rse,Ise,yq,(function(r){function e(){return r.apply(this,arguments)||this}tr(e,r);var t=e.prototype;return t.handleLinkAuthRequestMessage=function(n){try{var i=this,a=new Yv(n);return Promise.resolve(HB(function(){var o=h6(n.getSender()),s=o.equals;return Promise.resolve(i.getAccountName()).then(function(c){s.call(o,c)||ot("Message not sent from authorized account",Ge.SenderNotAuthorized);var l=a.getPayload(),d=l.contract,h=l.action,y=Lb(n.getSender()).fragment;return y||ot("DID does not contain App permission",Ge.MissingParams),Promise.resolve(qa().getApp(Xe.from(y))).then(function(){var m=_d(i.keyManager,ct.ACTIVE),b=CB(),v=b.linkAuth;return Promise.resolve(i.getAccountName()).then(function(E){return Promise.resolve(v.call(b,E,d,h,y,m)).then(function(){var x=M0.signMessage,D={requestId:a.getVc().getId(),success:!0};return Promise.resolve(i.getIssuer()).then(function(N){return Promise.resolve(x.call(M0,D,N,a.getSender())).then(function(B){return Promise.resolve(i.sendMessage(B)).then(function(){})})})})})})})},function(o){if(!Os(o,Ge.SenderNotAuthorized))throw o}))}catch(o){return Promise.reject(o)}},t.loginWithApp=function(n,i){try{var a=this;return Promise.resolve(a.getAccountName()).then(function(o){var s={app:n,added:new Date,status:nc.PENDING};return Promise.resolve(a.storage.appRecords).then(function(c){return c||(c=[]),c.push(s),a.storage.appRecords=c,Promise.resolve(a.storage.appRecords).then(function(){function l(){return Dse("loginWithApp key",i.toString(),h),Promise.resolve(qa().loginWithApp(o,n.accountName,"local",i,d)).then(function(){function m(){return s.status=nc.READY,a.storage.appRecords=c,Promise.resolve(a.storage.appRecords).then(function(){})}var b=(function(){if(h)return Promise.resolve(tse(1e3)).then(function(){var v=_d(a.keyManager,ct.ACTIVE);return Promise.resolve(CB().linkAuth(o,n.accountName,"",n.accountName,v)).then(function(){})})})();return b&&b.then?b.then(m):m()})}var d=_d(a.keyManager,ct.LOCAL),h=!1,y=HB(function(){return Promise.resolve(fl(o)).then(function(m){m.getPermission(n.accountName)})},function(m){m.message==="Unknown permission "+n.accountName.toString()+" on account "+o.toString()+"."&&(h=!0)});return y&&y.then?y.then(l):l()})})})}catch(o){return Promise.reject(o)}},t.acceptLoginRequest=function(n,i){try{var a=this;return Promise.resolve(n.accept(a)).then(function(o){return(function(){if(i==="redirect")return o.getRedirectUrl();if(!n.sso)throw new Error("SSO requests are missing in the login request message");var s=n.sso.getDid();return Promise.resolve(a.getIssuer()).then(function(c){return Promise.resolve(dq.signMessage(o,c,s)).then(function(l){return Promise.resolve(a.sendMessage(l)).then(function(){})})})})()})}catch(o){return Promise.reject(o)}},e})(T8),T8);var Qf=ZA+"key.",Dp=(function(){function r(){this.keyStorage={}}var e=r.prototype;return e.storeKey=function(t){try{Vne.validate(t);var n={privateKey:t.privateKey,publicKey:t.privateKey.toPublic()};switch(t.level){case ct.ACTIVE:case ct.LOCAL:case ct.BIOMETRIC:break;case ct.PASSWORD:case ct.PIN:if(!t.challenge)throw new Error(Ge.MissingChallenge+": Challenge missing");n.salt=_0(32),n.hashedSaltedChallenge=jd(t.challenge+n.salt);break;case ct.BROWSER_LOCAL_STORAGE:localStorage.setItem(Qf+t.level,JSON.stringify(n));break;case ct.BROWSER_SESSION_STORAGE:sessionStorage.setItem(Qf+t.level,JSON.stringify(n));break;default:throw new Error(Ge.InvalidKeyLevel+": Invalid level")}return this.keyStorage[t.level]=n,Promise.resolve(n.publicKey)}catch(i){return Promise.reject(i)}},e.fetchKey=function(t){jE.validate(t);var n=this.keyStorage[t.level];if(n)return n;if(t.level===ct.BROWSER_LOCAL_STORAGE||t.level===ct.BROWSER_SESSION_STORAGE){var i=t.level===ct.BROWSER_LOCAL_STORAGE?localStorage.getItem(Qf+t.level):sessionStorage.getItem(Qf+t.level);if(!i)throw new Error(Ge.KeyNotFound+": No key for level "+t.level);var a=JSON.parse(i);return this.keyStorage[t.level]={privateKey:KI.from(a.privateKey),publicKey:Fn.from(a.publicKey)},a.hashedSaltedChallenge&&(this.keyStorage[t.level].hashedSaltedChallenge=a.hashedSaltedChallenge),a.salt&&(this.keyStorage[t.level].salt=a.salt),this.keyStorage[t.level]}throw new Error(Ge.KeyNotFound+": No key for level "+t.level)},e.signData=function(t){try{var n=function(s){var c,l=a.privateKey;if(t.outputType==="jwt"){if(typeof t.data!="string")throw new Error(Ge.InvalidData+": Data must be a string");var d=zk(l);return Promise.resolve(d(t.data))}return c=typeof t.data=="string"?$t.hash(Buffer.from(t.data)):t.data,l.signDigest(c)},i=this;Hne.validate(t);var a=i.fetchKey(t),o=(function(){if(t.level===ct.PASSWORD||t.level===ct.PIN){if(!t.challenge)throw new Error(Ge.MissingChallenge+": Challenge missing");return Promise.resolve(i.checkKey({level:t.level,challenge:t.challenge})).then(function(s){if(!s&&t.level===ct.PASSWORD)throw new Error(Ge.PasswordInvalid+": Invalid password");if(!s&&t.level===ct.PIN)throw new Error(Ge.PinInvalid+": Invalid PIN")})}})();return Promise.resolve(o&&o.then?o.then(n):n())}catch(s){return Promise.reject(s)}},e.getKey=function(t){try{jE.validate(t);var n=this.fetchKey(t);return Promise.resolve(n.publicKey)}catch(i){return Promise.reject(i)}},e.checkKey=function(t){try{Kne.validate(t);var n=this.fetchKey(t);if(t.level===ct.PIN||t.level===ct.PASSWORD){if(!t.challenge)throw new Error(Ge.MissingChallenge+": Challenge is missing");var i=jd(t?.challenge+n.salt);return Promise.resolve(i===n.hashedSaltedChallenge)}throw new Error(Ge.InvalidKeyLevel+": Invalid Level")}catch(a){return Promise.reject(a)}},e.removeKey=function(t){try{return jE.validate(t),delete this.keyStorage[t.level],t.level!==ct.BROWSER_LOCAL_STORAGE&&t.level!==ct.BROWSER_SESSION_STORAGE||(t.level===ct.BROWSER_LOCAL_STORAGE?localStorage.removeItem(Qf+t.level):sessionStorage.removeItem(Qf+t.level)),Promise.resolve()}catch(n){return Promise.reject(n)}},r})(),mq=function(r){try{r===void 0&&(r=new Dp);var e=rv().privateKey;return Promise.resolve(Nse(e)).then(function(t){return Promise.resolve(r.storeKey({level:ct.BROWSER_LOCAL_STORAGE,privateKey:e})).then(function(){return t})})}catch(t){return Promise.reject(t)}};qt("tonomy-sdk:services:ethereum");qt("tonomy-sdk:util:ssi:veramo");var Pse=(function(){function r(t){this._storage={},this.scope=void 0,this.scope=t,this._storage={}}var e=r.prototype;return e.retrieve=function(t){try{var n=this;if(t in n._storage)return Promise.resolve(n._storage[t]);if(!localStorage)return Promise.resolve(void 0);var i=localStorage.getItem(t);if(i){var a=JSON.parse(i);return n._storage[t]=a,Promise.resolve(a)}return Promise.resolve()}catch(o){return Promise.reject(o)}},e.store=function(t,n){try{return localStorage&&localStorage.setItem(t,JSON.stringify(n)),this._storage[t]=n,Promise.resolve()}catch(i){return Promise.reject(i)}},e.clear=function(){try{if(this._storage={},localStorage)for(var t=0;t<localStorage.length;t++){var n=localStorage.key(t);typeof n=="string"&&n.startsWith(this.scope)&&localStorage.removeItem(n)}return Promise.resolve()}catch(i){return Promise.reject(i)}},r})();function KB(r){return new Pse(r)}function GB(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var Use=function(r,e){var t=e===void 0?kse:e,n=t.verifyChainId,i=n===void 0||n,a=t.verifyUsername,o=a===void 0||a,s=t.verifyOrigin,c=s===void 0||s;try{var l;if(typeof r=="string")l=new $d(r);else if(r instanceof $d)l=r;else{if(!(r instanceof hs))throw Error("Invalid VC type, expected string or VerifiableCredential");l=r.getVc()}var d=l.getId(),h=l.getIssuer(),y=l.getCredentialSubject();return Promise.resolve(h6(h)).then(function(m){var b=Lb(h).method;return b!=="antelope"&&ot("Invalid DID method: "+b,Ge.InvalidData),Promise.resolve(Promise.all([l.verify(),uq(h,i),pse(m,y?.username,o),xse(d||"",h,c)])).then(function(v){var E=v[3];return{account:m,chainId:v[1],did:h,username:v[2],origin:E?.origin,app:E?.app}})})}catch(m){return Promise.reject(m)}},WB=qt("tonomy-sdk:externalUser"),ZB=(function(){function r(t,n){this.keyManager=void 0,this.storage=void 0,this.communication=void 0,this.storageFactory=void 0,this.did=void 0,this.keyManager=t,this.storageFactory=n,this.storage=ak(ZA+"external.user.",n),this.communication=new Qv(!1)}var e=r.prototype;return e.logout=function(){try{var t=this;return t.storage.clear(),t.keyManager.removeKey({level:ct.BROWSER_LOCAL_STORAGE}),t.keyManager.removeKey({level:ct.BROWSER_SESSION_STORAGE}),Promise.resolve()}catch(n){return Promise.reject(n)}},r.getUser=function(t){t===void 0&&(t={});try{var n=t,i=n.keyManager,a=i===void 0?new Dp:i,o=n.storageFactory,s=n.autoLogout,c=s===void 0||s,l=new r(a,o===void 0?KB:o);return Promise.resolve(GB(function(){return Promise.resolve(l.getAccountName()).then(function(d){if(!d)throw ot("accountName not found",Ge.AccountNotFound);return Promise.resolve(M8(d,{keyManager:a})).then(function(h){return Promise.resolve(l.getAppPermission()).then(function(y){return h.toString()!==y.toString()&&ot("App permission has changed",Ge.InvalidData),Promise.resolve(l.getUsername()).then(function(m){var b=(function(){if(m)return Promise.resolve(qa().getPerson(m)).then(function(v){d.toString()!==v.accountName.toString()&&ot("Username has changed",Ge.InvalidData)})})();return b&&b.then?b.then(function(){return l}):l})})})})},function(d){function h(){throw Os(d,[Ge.KeyNotFound,Ge.InvalidData])&&ot("User Not loggedIn",Ge.UserNotLoggedIn),d}var y=(function(){if(c)return Promise.resolve(l.logout()).then(function(){})})();return y&&y.then?y.then(h):h()}))}catch(d){return Promise.reject(d)}},e.getDid=function(){try{var t=this,n=t.did,i=(function(){if(!n)return Promise.resolve(t.getAccountName()).then(function(a){return Promise.resolve(a.toString()).then(function(o){return Promise.resolve(t.getAppPermission()).then(function(s){return Promise.resolve(oq(o,s.toString())).then(function(c){return t.did=n=c,Promise.resolve(t.did).then(function(){})})})})})})();return Promise.resolve(i&&i.then?i.then(function(){return n}):n)}catch(a){return Promise.reject(a)}},e.getWalletDid=function(){try{var t=this;return Promise.resolve(t.getDid()).then(function(n){return Promise.resolve(t.getAppPermission()).then(function(i){return n.replace("#"+i,"#local")})})}catch(n){return Promise.reject(n)}},e.setAccountName=function(t){try{return this.storage.accountName=t,Promise.resolve(this.storage.accountName).then(function(){})}catch(n){return Promise.reject(n)}},e.setUsername=function(t){try{return this.storage.username=t,Promise.resolve(this.storage.username).then(function(){})}catch(n){return Promise.reject(n)}},e.setAppPermission=function(t){try{return this.storage.appPermission=t,Promise.resolve(this.storage.appPermission).then(function(){})}catch(n){return Promise.reject(n)}},e.getUsername=function(){try{return Promise.resolve(this.storage.username).then(function(t){if(t)if(t){if(t instanceof Ei)return t;if(typeof t=="string")return new Ei(t);ot("Username not in expected format",Ge.InvalidData)}else ot("Username not set",Ge.InvalidData)})}catch(t){return Promise.reject(t)}},e.getAccountName=function(){try{return Promise.resolve(this.storage.accountName)}catch(t){return Promise.reject(t)}},e.getAppPermission=function(){try{return Promise.resolve(this.storage.appPermission)}catch(t){return Promise.reject(t)}},r.loginWithTonomy=function(t,n){try{n===void 0&&(n=new Dp);var i=t.redirect,a=i===void 0||i,o=t.callbackPath,s=t.dataRequest;return Promise.resolve(mq(n)).then(function(c){return Promise.resolve(n.getKey({level:ct.BROWSER_LOCAL_STORAGE})).then(function(l){var d=[{login:{randomString:_0(32),origin:window.location.origin,publicKey:l,callbackPath:o}}];return s&&d.push({data:s}),Promise.resolve($b.signRequest({requests:d},c)).then(function(h){var y=new S0(h),m=new E6(y);if(!a)return Promise.resolve(A8.signMessageWithoutRecipient({},c)).then(function(b){return{requests:m,loginToCommunication:b}});window.location.href=Ki().ssoWebsiteOrigin+"/login?payload="+m.toString()})})})}catch(c){return Promise.reject(c)}},e.getIssuer=function(){try{var t=this;return Promise.resolve(t.getDid()).then(function(n){return{did:n,signer:Vk(t.keyManager,ct.BROWSER_LOCAL_STORAGE).sign,alg:"ES256K-R"}})}catch(n){return Promise.reject(n)}},r.verifyLoginResponse=function(t){t===void 0&&(t={});try{var n=t,i=n.external,a=i===void 0||i,o=n.checkKeys,s=o===void 0||o,c=n.keyManager,l=c===void 0?new Dp:c,d=n.storageFactory,h=d===void 0?KB:d,y=n.responses,m=y===void 0?Zv.fromUrl():y;return WB("verifyLoginResponse()",{external:a,checkKeys:s}),Promise.resolve((function(){if(m.isSuccess())return Promise.resolve(m.verify()).then(function(){var b=a?m.external:m.sso;if(!b)throw Error("No request found in dual wallet responses for "+(a?"external":"sso")+" app");var v=new r(l,h),E=b.getAccountName(),x={user:v},D=b.getDataSharingResponse();return Promise.resolve(Use(b.vc,{verifyOrigin:!1,verifyUsername:!(D==null||!D.data.username)})).then(function(){function N(){return Promise.resolve(v.setAccountName(E)).then(function(){function k(){var T=D?.data.username,z=(function(){if(T)return Promise.resolve(v.setUsername(T)).then(function(){})})();return z&&z.then?z.then(function(){return x}):x}var F=(function(){if(D!=null&&D.data.kyc){var T=D.data.kyc.getIssuer();return Promise.resolve(cq(T)).then(function(){x.data={kyc:{value:D.data.kyc.getPayload(),verifiableCredential:D.data.kyc}}})}})();return F&&F.then?F.then(k):k()})}var B=(function(){if(s)return Promise.resolve(M8(E,{keyManager:l})).then(function(k){return Promise.resolve(v.setAppPermission(k)).then(function(){})})})();return B&&B.then?B.then(N):N()})});if(!m.error)throw Error("No error found in dual wallet responses");ot(m.error.reason,m.error.code)})())}catch(b){return Promise.reject(b)}},e.signVc=function(t,n,i,a){a===void 0&&(a={});try{return Promise.resolve(this.getIssuer()).then(function(o){return Promise.resolve($d.sign(t,n,i,o,a))})}catch(o){return Promise.reject(o)}},e.createClientAuthorization=function(t){try{var n,i=((n=window)==null||(n=n.location)==null?void 0:n.origin)||"undefined",a=_0(8);return Promise.resolve(this.signVc(i+"/vc/auth/"+a,"ClientAuthorization",t)).then(function(o){return o.toString()})}catch(o){return Promise.reject(o)}},e.getTransactionSigner=function(){return _d(this.keyManager,ct.BROWSER_LOCAL_STORAGE)},e.signTransaction=function(t,n,i){try{var a=this;return Promise.resolve(a.getAccountName()).then(function(o){return Promise.resolve(a.getAppPermission()).then(function(s){function c(){return Promise.resolve(a.checkLinkAuthRequirements(o,s,l,n)).then(function(){var h={account:l,name:n,authorization:[{actor:o.toString(),permission:s.toString()}],data:i},y=a.getTransactionSigner();return WB("signTransaction() called by "+o.toString()+" with permission "+s.toString()+" to contract "+l.toString(),JSON.stringify(h,null,2)),Promise.resolve(yr(h,y))})}var l,d=(function(){if(t instanceof Ei)return Promise.resolve(qa().getApp(t)).then(function(h){l=h.accountName});l=Xe.from(t)})();return d&&d.then?d.then(c):c()})})}catch(o){return Promise.reject(o)}},e.checkLinkAuthRequirements=function(t,n,i,a){try{var o=this;return Promise.resolve(kb(t)).then(function(s){var c,l=s.permissions.find(function(y){return y.perm_name.equals(n)}),d=l==null||(c=l.linked_actions)==null?void 0:c.find(function(y){return y.account.equals(i)&&(!y.action||y.action.equals(a))}),h=(function(){if(!d){var y=Yv.signMessage,m={contract:Xe.from(i),action:Xe.from("")};return Promise.resolve(o.getIssuer()).then(function(b){return Promise.resolve(o.getWalletDid()).then(function(v){return Promise.resolve(y.call(Yv,m,b,v)).then(function(E){var x,D=new Promise(function(N,B){x=o.communication.subscribeMessage(function(k){try{var F=GB(function(){var T=k.getSender();return Promise.resolve(o.getWalletDid()).then(function(z){T!==z&&ot("LinkAuthRequestResponse sender is not wallet",Ge.SenderNotAuthorized);var Z=new M0(k);E.getVc().getId()===Z.getPayload().requestId&&Z.getPayload().success?N():ot("Couldn't link permission",Ge.LinkAuthFailed)})},function(T){B(T)});return Promise.resolve(F&&F.then?F.then(function(){}):void 0)}catch(T){return Promise.reject(T)}},M0.getType()),setTimeout(function(){B(WA("LinkAuthRequestResponse timeout",Ge.MessageSendError))},5e3)});return Promise.resolve(o.sendMessage(E)).then(function(){return Promise.resolve(D).then(function(){o.communication.unsubscribeMessage(x)})})})})})}})();if(h&&h.then)return h.then(function(){})})}catch(s){return Promise.reject(s)}},e.sendMessage=function(t){try{var n=this;return Promise.resolve(n.loginToCommunication()).then(function(){return Promise.resolve(n.communication.sendMessage(t)).then(function(i){i||ot("Failed to send message",Ge.MessageSendError)})})}catch(i){return Promise.reject(i)}},e.loginToCommunication=function(){try{var t=this,n=(function(){if(!t.communication.isLoggedIn())return Promise.resolve(t.getIssuer()).then(function(i){return Promise.resolve(A8.signMessageWithoutRecipient({},i)).then(function(a){return Promise.resolve(t.communication.login(a)).then(function(){})})})})();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(i){return Promise.reject(i)}},r})(),kse={verifyChainId:!0,verifyUsername:!0,verifyOrigin:!0};qt("tonomy-sdk:AppsExternalUser");const qse=(r,e)=>{const t=Number(r);return Number.isFinite(t)?t:e},uc={appName:"Tonomy Invite",contractAccount:"invitono",rpcEndpoint:"https://blockchain-api.tonomy.io",chainId:"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4",leaderboardLimit:qse(void 0,25)},sx={environment:"production",blockchainUrl:uc.rpcEndpoint,ssoWebsiteOrigin:"https://accounts.tonomy.io",consoleWebsiteOrigin:"https://console.tonomy.io",accountSuffix:".pangea.id",communicationUrl:"wss://communication.tonomy.io",accountsServiceUrl:"https://accounts.tonomy.io",tonomyIdSchema:"united-wallet://",loggerLevel:"error",currencySymbol:"TONO"},Lse=(r=32)=>{const e=new Uint8Array(r);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(16).padStart(2,"0")).join("")},gq=_r.createContext({user:null,actor:void 0,login:async()=>{},logout:async()=>{},loading:!0,error:null,signTransaction:async()=>{}}),jse=({children:r})=>{const[e,t]=_r.useState(null),[n,i]=_r.useState(void 0),[a,o]=_r.useState(!0),[s,c]=_r.useState(null);_r.useEffect(()=>{let m=!1;return(async()=>{o(!0);try{ese(window.fetch.bind(window)),Xae(sx);let v=null;if(new URLSearchParams(window.location.search).has("payload"))try{v=(await ZB.verifyLoginResponse()).user;const N=new URL(window.location.href);N.searchParams.delete("payload"),N.searchParams.delete("success"),window.history.replaceState({},document.title,`${N.pathname}${N.search}${N.hash}`)}catch(D){if(!(D instanceof kv&&[Ge.RequestsNotFound,Ge.ResponsesNotFound,Ge.InvalidRequestResponseType].includes(D.code)))throw D}if(!v){const D=await ZB.getUser({autoLogout:!1});D&&(v=D)}!m&&v&&t(v),c(null)}catch(v){m||c(v.message)}finally{m||o(!1)}})(),()=>{m=!0}},[]),_r.useEffect(()=>{if(!e){i(void 0);return}let m=!1;return(async()=>{try{const v=await e.getAccountName();m||i(v.toString())}catch(v){m||c(v.message)}})(),()=>{m=!0}},[e]);const l=_r.useCallback(async()=>{const m=new Dp,b=await mq(m),v=await m.getKey({level:ct.BROWSER_LOCAL_STORAGE}),E=window.location.pathname,x=async k=>{const F={requests:[{login:{randomString:Lse(32),origin:k,publicKey:v,callbackPath:E}}]},T=await $b.signRequest(F,b);return new S0(T)},D=await x(window.location.origin),N=await x(sx.ssoWebsiteOrigin),B=new E6(D,N);window.location.href=`${sx.ssoWebsiteOrigin}/login?payload=${B.toString()}`},[]),d=_r.useCallback(async()=>{e&&await e.logout(),t(null)},[e]),h=_r.useCallback(async(m,b)=>{if(!e)throw new Error("Log in with Tonomy before signing.");await e.signTransaction(Xe.from(uc.contractAccount),Xe.from(m),b)},[e]),y=_r.useMemo(()=>({user:e,actor:n,login:l,logout:d,loading:a,error:s,signTransaction:h}),[e,n,l,d,a,s,h]);return Ye.jsx(gq.Provider,{value:y,children:r})},$se=()=>_r.useContext(gq),Fb=new db({provider:new Gp(uc.rpcEndpoint)}),zb=()=>uc.contractAccount,Vb=()=>uc.contractAccount;async function Fse(r){const e=Xe.from(r).toString(),{rows:t}=await Fb.v1.chain.get_table_rows({code:zb(),scope:Vb(),table:"adopters",lower_bound:Xe.from(e),upper_bound:Xe.from(e),limit:1});return t.length===0?null:t[0]}async function zse(r){const{rows:e}=await Fb.v1.chain.get_table_rows({code:zb(),scope:Vb(),table:"adopters",limit:r,index_position:"secondary",key_type:"i64"});return e}async function Vse(){const{rows:r}=await Fb.v1.chain.get_table_rows({code:zb(),scope:Vb(),table:"config",limit:1});return r[0]??null}async function Hse(){const{rows:r}=await Fb.v1.chain.get_table_rows({code:zb(),scope:Vb(),table:"stats",limit:1});return r[0]??null}const j1=new Intl.NumberFormat("en-US"),YB=new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}),ox=[1,4,10,20,35,56,84,120,165,220,286,364,455,560,680,816,969,1140,1330,1540,1771,2024,2300,2600,999999999],Kse=r=>{for(let e=0;e<ox.length;e++)if(ox[e]>r)return e;return ox.length-1},Gse=r=>`${r.toFixed(0)}%`,$u=({title:r,value:e,subtext:t})=>Ye.jsxs("div",{className:"card",children:[Ye.jsx("p",{className:"card-label",children:r}),Ye.jsx("p",{className:"card-value",children:e}),t&&Ye.jsx("p",{className:"card-sub",children:t})]}),Wse=()=>Ye.jsx("div",{className:"divider"});function Zse(){const{actor:r,login:e,logout:t,loading:n,error:i,signTransaction:a,user:o}=$se(),[s,c]=_r.useState(null),[l,d]=_r.useState(null),[h,y]=_r.useState([]),[m,b]=_r.useState(null),[v,E]=_r.useState(""),[x,D]=_r.useState(null),[N,B]=_r.useState(null),[k,F]=_r.useState(null),[T,z]=_r.useState(0),Z=!!(r||o),Y=_r.useMemo(()=>m?Kse(m.score):0,[m]);_r.useEffect(()=>{(async()=>{try{const[S,_,U]=await Promise.all([Vse(),Hse(),zse(uc.leaderboardLimit)]);c(S),d(_),y(U)}catch(S){F(S.message)}})()},[T]),_r.useEffect(()=>{if(!r){b(null);return}(async()=>{try{const S=await Fse(r);b(S)}catch(S){F(S.message)}})()},[r,T]);const W=async R=>{if(R.preventDefault(),B(null),F(null),!Z||!r){F("Log in with Tonomy ID before redeeming an invite.");return}if(!v.trim()){F("Enter the inviter account name you received.");return}try{D("redeem");const S=Xe.from(v.trim());await a("redeeminvite",{user:Xe.from(r),inviter:S}),E(""),B("Invite redeemed. Scores will refresh shortly."),z(_=>_+1)}catch(S){F(S.message)}finally{D(null)}},M=async()=>{if(B(null),F(null),!Z||!r){F("Log in with Tonomy ID before claiming rewards.");return}try{D("claim"),await a("claimreward",{user:Xe.from(r)}),B("Rewards claimed. Check your wallet balance."),z(R=>R+1)}catch(R){F(R.message)}finally{D(null)}},C=s?`${s.invite_rate_seconds/60} minutes`:"-";return Ye.jsxs("div",{className:"app-shell",children:[Ye.jsxs("header",{className:"hero",children:[Ye.jsx("div",{className:"eyebrow",children:"TonomyInvite - smart contract UI"}),Ye.jsxs("div",{className:"hero-grid",children:[Ye.jsxs("div",{children:[Ye.jsxs("h1",{children:["Grow the Tonomy map with ",Ye.jsx("span",{children:"verified invites"})]}),Ye.jsx("p",{className:"lede",children:"Redeem invites, monitor referrals, and claim BLUX rewards through the on-chain TonomyInvite contract. Built with the Tonomy ID SDK mainnet flow."}),Ye.jsxs("div",{className:"cta-row",children:[Z?Ye.jsxs("button",{className:"pill ghost",onClick:t,children:["Disconnect ",r]}):Ye.jsx("button",{className:"pill",onClick:e,disabled:n,children:n?"Preparing login...":"Log in with Tonomy ID"}),Ye.jsxs("div",{className:"chip",children:["Contract ",Ye.jsx("strong",{children:uc.contractAccount})]}),Ye.jsxs("div",{className:"chip secondary",children:["RPC ",Ye.jsx("strong",{children:uc.rpcEndpoint})]})]})]}),Ye.jsxs("div",{className:"status-card",children:[Ye.jsx("p",{className:"card-label",children:"Connection"}),Ye.jsx("p",{className:"card-value",children:Z?r??"Connected":"Not connected"}),Ye.jsx("p",{className:"card-sub",children:i||"Tonomy ID flow handles login and signing."}),Ye.jsx(Wse,{}),Ye.jsx("p",{className:"card-label",children:"Rewards level"}),Ye.jsx("p",{className:"card-value",children:m?`Level ${Y}`:"-"}),Ye.jsxs("p",{className:"card-sub",children:["Score ",m?.score??0," - Bonus ",Gse(Y)]})]})]})]}),Ye.jsxs("main",{className:"content",children:[(N||k)&&Ye.jsx("div",{className:`alert ${N?"success":"error"}`,children:N??k}),Ye.jsxs("section",{className:"panel-grid",children:[Ye.jsxs("div",{className:"panel",children:[Ye.jsxs("div",{className:"panel-header",children:[Ye.jsxs("div",{children:[Ye.jsx("p",{className:"eyebrow",children:"Claim"}),Ye.jsx("h2",{children:"Invite rewards"}),Ye.jsx("p",{className:"muted",children:"Earn BLUX based on your referral score. A tetrahedral bonus is applied automatically when you claim."})]}),Ye.jsx("button",{className:"pill",onClick:M,disabled:!Z||x==="claim",children:x==="claim"?"Claiming...":"Claim rewards"})]}),Ye.jsxs("div",{className:"card-grid",children:[Ye.jsx($u,{title:"Your inviter",value:m?.invitedby??"-",subtext:m?"The account that onboarded you":void 0}),Ye.jsx($u,{title:"Referral score",value:j1.format(m?.score??0),subtext:m?.lastupdated?`Last updated ${YB.format(new Date(m.lastupdated*1e3))}`:"Score grows when your network invites others"}),Ye.jsx($u,{title:"Claimed already?",value:m?m.claimed?"Yes":"Not yet":"-",subtext:"Claiming resets your score to zero"}),Ye.jsx($u,{title:"Invite cooldown",value:C,subtext:"Time an inviter must wait before the next invite"})]})]}),Ye.jsxs("div",{className:"panel",children:[Ye.jsx("p",{className:"eyebrow",children:"Onboard"}),Ye.jsx("h2",{children:"Redeem an invite"}),Ye.jsx("p",{className:"muted",children:"Register your account with the referral that brought you here. You will start at score 1 and boost your inviter's upline."}),Ye.jsxs("form",{className:"form",onSubmit:W,children:[Ye.jsxs("label",{children:["Inviter account",Ye.jsx("input",{type:"text",placeholder:"friend.pangea",value:v,onChange:R=>E(R.target.value),required:!0})]}),Ye.jsxs("div",{className:"form-actions",children:[Ye.jsxs("div",{className:"hint",children:["Minimum account age: ",s?.min_account_age_days??"-"," days - Max depth: ",s?.max_referral_depth??"-"]}),Ye.jsx("button",{className:"pill",type:"submit",disabled:!Z||x==="redeem",children:x==="redeem"?"Submitting...":"Redeem invite"})]})]})]})]}),Ye.jsxs("section",{className:"panel",children:[Ye.jsxs("div",{className:"panel-header",children:[Ye.jsxs("div",{children:[Ye.jsx("p",{className:"eyebrow",children:"Network pulse"}),Ye.jsx("h2",{children:"Contract health"})]}),Ye.jsx("button",{className:"pill ghost",onClick:()=>z(R=>R+1),children:"Refresh"})]}),Ye.jsxs("div",{className:"card-grid",children:[Ye.jsx($u,{title:"Total users",value:j1.format(l?.total_users??0),subtext:`Last registered: ${l?.last_registered??"-"}`}),Ye.jsx($u,{title:"Total referrals",value:j1.format(l?.total_referrals??0),subtext:"All recorded connections"}),Ye.jsx($u,{title:"Rewards token",value:s?`${s.reward_rate/100} ${s.reward_symbol}`:"-",subtext:`Contract: ${s?.token_contract??"-"}`}),Ye.jsx($u,{title:"Status",value:s?.enabled?"Live":"Paused",subtext:`Admin: ${s?.admin??"-"}`})]})]}),Ye.jsxs("section",{className:"panel",children:[Ye.jsx("div",{className:"panel-header",children:Ye.jsxs("div",{children:[Ye.jsx("p",{className:"eyebrow",children:"Momentum"}),Ye.jsx("h2",{children:"Leaderboard"}),Ye.jsx("p",{className:"muted",children:"Sorted by the byscore secondary index to mirror contract logic."})]})}),Ye.jsx("div",{className:"table-wrapper",children:Ye.jsxs("table",{children:[Ye.jsx("thead",{children:Ye.jsxs("tr",{children:[Ye.jsx("th",{children:"Rank"}),Ye.jsx("th",{children:"Account"}),Ye.jsx("th",{children:"Score"}),Ye.jsx("th",{children:"Invited by"}),Ye.jsx("th",{children:"Last updated"})]})}),Ye.jsx("tbody",{children:h.map((R,S)=>Ye.jsxs("tr",{children:[Ye.jsx("td",{children:S+1}),Ye.jsx("td",{children:R.account}),Ye.jsx("td",{children:j1.format(R.score)}),Ye.jsx("td",{children:R.invitedby}),Ye.jsx("td",{children:R.lastupdated?YB.format(new Date(R.lastupdated*1e3)):"-"})]},R.account))})]})})]})]})]})}Aj.createRoot(document.getElementById("root")).render(Ye.jsx(mj.StrictMode,{children:Ye.jsx(jse,{children:Ye.jsx(Zse,{})})}));
