const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/module-index-DwKbTDe5.js","assets/ErrorHandler-BaKQZwy8.js","assets/ErrorHandler-Cx3qY7wS.css","assets/TProgressCircle-CD8EvHy0.js","assets/ThemeContext-B1Nn9f4U.js","assets/module-index-B_vN6EPg.css","assets/module-index-gtq7xTFm.js","assets/TImage-5B0T0ia3.js","assets/Card-BFDr96ee.js","assets/Container-BChePlyX.js","assets/module-index-AIDBnqr0.css","assets/module-index-DoZK8gwD.js","assets/module-index-B7zO2LK3.css","assets/module-index-CcsjASBJ.js","assets/module-index-BrrEFq6A.css"])))=>i.map(i=>d[i]);
var kX=Object.defineProperty;var fO=r=>{throw TypeError(r)};var DX=(r,e,t)=>e in r?kX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var H=(r,e,t)=>DX(r,typeof e!="symbol"?e+"":e,t),B9=(r,e,t)=>e.has(r)||fO("Cannot "+t);var F=(r,e,t)=>(B9(r,e,"read from private field"),t?t.call(r):e.get(r)),le=(r,e,t)=>e.has(r)?fO("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Q=(r,e,t,n)=>(B9(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),ve=(r,e,t)=>(B9(r,e,"access private method"),t);var kp=(r,e,t,n)=>({set _(i){Q(r,e,i,t)},get _(){return F(r,e,n)}});function rj(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const BX="modulepreload",$X=function(r){return"/"+r},lO={},a8=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=$X(c),c in lO)return;lO[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const l=document.createElement("link");if(l.rel=u?"stylesheet":BX,u||(l.as="script"),l.crossOrigin="",l.href=c,o&&l.setAttribute("nonce",o),document.head.appendChild(l),u)return new Promise((d,h)=>{l.addEventListener("load",d),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function so(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function nj(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var A3={},ij={exports:{}},ha={},sj={exports:{}},wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2=Symbol.for("react.element"),LX=Symbol.for("react.portal"),UX=Symbol.for("react.fragment"),FX=Symbol.for("react.strict_mode"),jX=Symbol.for("react.profiler"),qX=Symbol.for("react.provider"),VX=Symbol.for("react.context"),zX=Symbol.for("react.forward_ref"),HX=Symbol.for("react.suspense"),WX=Symbol.for("react.memo"),KX=Symbol.for("react.lazy"),dO=Symbol.iterator;function GX(r){return r===null||typeof r!="object"?null:(r=dO&&r[dO]||r["@@iterator"],typeof r=="function"?r:null)}var aj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oj=Object.assign,cj={};function Qm(r,e,t){this.props=r,this.context=e,this.refs=cj,this.updater=t||aj}Qm.prototype.isReactComponent={};Qm.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};Qm.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function uj(){}uj.prototype=Qm.prototype;function jT(r,e,t){this.props=r,this.context=e,this.refs=cj,this.updater=t||aj}var qT=jT.prototype=new uj;qT.constructor=jT;oj(qT,Qm.prototype);qT.isPureReactComponent=!0;var hO=Array.isArray,fj=Object.prototype.hasOwnProperty,VT={current:null},lj={key:!0,ref:!0,__self:!0,__source:!0};function dj(r,e,t){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)fj.call(e,n)&&!lj.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:j2,type:r,key:s,ref:a,props:i,_owner:VT.current}}function QX(r,e){return{$$typeof:j2,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function zT(r){return typeof r=="object"&&r!==null&&r.$$typeof===j2}function ZX(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var pO=/\/+/g;function $9(r,e){return typeof r=="object"&&r!==null&&r.key!=null?ZX(""+r.key):e.toString(36)}function Cv(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case j2:case LX:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+$9(a,0):n,hO(i)?(t="",r!=null&&(t=r.replace(pO,"$&/")+"/"),Cv(i,e,t,"",function(u){return u})):i!=null&&(zT(i)&&(i=QX(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(pO,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",hO(r))for(var o=0;o<r.length;o++){s=r[o];var c=n+$9(s,o);a+=Cv(s,e,t,c,i)}else if(c=GX(r),typeof c=="function")for(r=c.call(r),o=0;!(s=r.next()).done;)s=s.value,c=n+$9(s,o++),a+=Cv(s,e,t,c,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function o8(r,e,t){if(r==null)return r;var n=[],i=0;return Cv(r,n,"","",function(s){return e.call(t,s,i++)}),n}function JX(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var ls={current:null},Iv={transition:null},YX={ReactCurrentDispatcher:ls,ReactCurrentBatchConfig:Iv,ReactCurrentOwner:VT};function hj(){throw Error("act(...) is not supported in production builds of React.")}wt.Children={map:o8,forEach:function(r,e,t){o8(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return o8(r,function(){e++}),e},toArray:function(r){return o8(r,function(e){return e})||[]},only:function(r){if(!zT(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};wt.Component=Qm;wt.Fragment=UX;wt.Profiler=jX;wt.PureComponent=jT;wt.StrictMode=FX;wt.Suspense=HX;wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YX;wt.act=hj;wt.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=oj({},r.props),i=r.key,s=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=VT.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(c in e)fj.call(e,c)&&!lj.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:j2,type:r.type,key:i,ref:s,props:n,_owner:a}};wt.createContext=function(r){return r={$$typeof:VX,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:qX,_context:r},r.Consumer=r};wt.createElement=dj;wt.createFactory=function(r){var e=dj.bind(null,r);return e.type=r,e};wt.createRef=function(){return{current:null}};wt.forwardRef=function(r){return{$$typeof:zX,render:r}};wt.isValidElement=zT;wt.lazy=function(r){return{$$typeof:KX,_payload:{_status:-1,_result:r},_init:JX}};wt.memo=function(r,e){return{$$typeof:WX,type:r,compare:e===void 0?null:e}};wt.startTransition=function(r){var e=Iv.transition;Iv.transition={};try{r()}finally{Iv.transition=e}};wt.unstable_act=hj;wt.useCallback=function(r,e){return ls.current.useCallback(r,e)};wt.useContext=function(r){return ls.current.useContext(r)};wt.useDebugValue=function(){};wt.useDeferredValue=function(r){return ls.current.useDeferredValue(r)};wt.useEffect=function(r,e){return ls.current.useEffect(r,e)};wt.useId=function(){return ls.current.useId()};wt.useImperativeHandle=function(r,e,t){return ls.current.useImperativeHandle(r,e,t)};wt.useInsertionEffect=function(r,e){return ls.current.useInsertionEffect(r,e)};wt.useLayoutEffect=function(r,e){return ls.current.useLayoutEffect(r,e)};wt.useMemo=function(r,e){return ls.current.useMemo(r,e)};wt.useReducer=function(r,e,t){return ls.current.useReducer(r,e,t)};wt.useRef=function(r){return ls.current.useRef(r)};wt.useState=function(r){return ls.current.useState(r)};wt.useSyncExternalStore=function(r,e,t){return ls.current.useSyncExternalStore(r,e,t)};wt.useTransition=function(){return ls.current.useTransition()};wt.version="18.3.1";sj.exports=wt;var HT=sj.exports;const XX=so(HT),DPe=rj({__proto__:null,default:XX},[HT]);var pj={exports:{}},yj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(D,T){var M=D.length;D.push(T);e:for(;0<M;){var L=M-1>>>1,K=D[L];if(0<i(K,T))D[L]=T,D[M]=K,M=L;else break e}}function t(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var T=D[0],M=D.pop();if(M!==T){D[0]=M;e:for(var L=0,K=D.length,Y=K>>>1;L<Y;){var re=2*(L+1)-1,ne=D[re],ae=re+1,ie=D[ae];if(0>i(ne,M))ae<K&&0>i(ie,ne)?(D[L]=ie,D[ae]=M,L=ae):(D[L]=ne,D[re]=M,L=re);else if(ae<K&&0>i(ie,M))D[L]=ie,D[ae]=M,L=ae;else break e}}return T}function i(D,T){var M=D.sortIndex-T.sortIndex;return M!==0?M:D.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var c=[],u=[],f=1,l=null,d=3,h=!1,y=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var T=t(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=D)n(u),T.sortIndex=T.expirationTime,e(c,T);else break;T=t(u)}}function _(D){if(p=!1,b(D),!y)if(t(c)!==null)y=!0,P(C);else{var T=t(u);T!==null&&k(_,T.startTime-D)}}function C(D,T){y=!1,p&&(p=!1,m(I),I=-1),h=!0;var M=d;try{for(b(T),l=t(c);l!==null&&(!(l.expirationTime>T)||D&&!O());){var L=l.callback;if(typeof L=="function"){l.callback=null,d=l.priorityLevel;var K=L(l.expirationTime<=T);T=r.unstable_now(),typeof K=="function"?l.callback=K:l===t(c)&&n(c),b(T)}else n(c);l=t(c)}if(l!==null)var Y=!0;else{var re=t(u);re!==null&&k(_,re.startTime-T),Y=!1}return Y}finally{l=null,d=M,h=!1}}var N=!1,x=null,I=-1,$=5,j=-1;function O(){return!(r.unstable_now()-j<$)}function E(){if(x!==null){var D=r.unstable_now();j=D;var T=!0;try{T=x(!0,D)}finally{T?S():(N=!1,x=null)}}else N=!1}var S;if(typeof v=="function")S=function(){v(E)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,w=A.port2;A.port1.onmessage=E,S=function(){w.postMessage(null)}}else S=function(){g(E,0)};function P(D){x=D,N||(N=!0,S())}function k(D,T){I=g(function(){D(r.unstable_now())},T)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(D){D.callback=null},r.unstable_continueExecution=function(){y||h||(y=!0,P(C))},r.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<D?Math.floor(1e3/D):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(D){switch(d){case 1:case 2:case 3:var T=3;break;default:T=d}var M=d;d=T;try{return D()}finally{d=M}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(D,T){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=d;d=D;try{return T()}finally{d=M}},r.unstable_scheduleCallback=function(D,T,M){var L=r.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?L+M:L):M=L,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=M+K,D={id:f++,callback:T,priorityLevel:D,startTime:M,expirationTime:K,sortIndex:-1},M>L?(D.sortIndex=M,e(u,D),t(c)===null&&D===t(u)&&(p?(m(I),I=-1):p=!0,k(_,M-L))):(D.sortIndex=K,e(c,D),y||h||(y=!0,P(C))),D},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(D){var T=d;return function(){var M=d;d=T;try{return D.apply(this,arguments)}finally{d=M}}}})(yj);pj.exports=yj;var eee=pj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tee=HT,ua=eee;function Re(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mj=new Set,eg={};function hp(r,e){em(r,e),em(r+"Capture",e)}function em(r,e){for(eg[r]=e,r=0;r<e.length;r++)mj.add(e[r])}var yf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),IA=Object.prototype.hasOwnProperty,ree=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yO={},mO={};function nee(r){return IA.call(mO,r)?!0:IA.call(yO,r)?!1:ree.test(r)?mO[r]=!0:(yO[r]=!0,!1)}function iee(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function see(r,e,t,n){if(e===null||typeof e>"u"||iee(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ds(r,e,t,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){fi[r]=new ds(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];fi[e]=new ds(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){fi[r]=new ds(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){fi[r]=new ds(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){fi[r]=new ds(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){fi[r]=new ds(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){fi[r]=new ds(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){fi[r]=new ds(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){fi[r]=new ds(r,5,!1,r.toLowerCase(),null,!1,!1)});var WT=/[\-:]([a-z])/g;function KT(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(WT,KT);fi[e]=new ds(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(WT,KT);fi[e]=new ds(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(WT,KT);fi[e]=new ds(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){fi[r]=new ds(r,1,!1,r.toLowerCase(),null,!1,!1)});fi.xlinkHref=new ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){fi[r]=new ds(r,1,!1,r.toLowerCase(),null,!0,!0)});function GT(r,e,t,n){var i=fi.hasOwnProperty(e)?fi[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(see(e,t,i,n)&&(t=null),n||i===null?nee(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Nf=tee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c8=Symbol.for("react.element"),c1=Symbol.for("react.portal"),u1=Symbol.for("react.fragment"),QT=Symbol.for("react.strict_mode"),RA=Symbol.for("react.profiler"),bj=Symbol.for("react.provider"),gj=Symbol.for("react.context"),ZT=Symbol.for("react.forward_ref"),NA=Symbol.for("react.suspense"),OA=Symbol.for("react.suspense_list"),JT=Symbol.for("react.memo"),bl=Symbol.for("react.lazy"),vj=Symbol.for("react.offscreen"),bO=Symbol.iterator;function $6(r){return r===null||typeof r!="object"?null:(r=bO&&r[bO]||r["@@iterator"],typeof r=="function"?r:null)}var jr=Object.assign,L9;function ub(r){if(L9===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);L9=e&&e[1]||""}return`
`+L9+r}var U9=!1;function F9(r,e){if(!r||U9)return"";U9=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return r.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",r.displayName)),c}while(1<=a&&0<=o);break}}}finally{U9=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?ub(r):""}function aee(r){switch(r.tag){case 5:return ub(r.type);case 16:return ub("Lazy");case 13:return ub("Suspense");case 19:return ub("SuspenseList");case 0:case 2:case 15:return r=F9(r.type,!1),r;case 11:return r=F9(r.type.render,!1),r;case 1:return r=F9(r.type,!0),r;default:return""}}function kA(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case u1:return"Fragment";case c1:return"Portal";case RA:return"Profiler";case QT:return"StrictMode";case NA:return"Suspense";case OA:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case gj:return(r.displayName||"Context")+".Consumer";case bj:return(r._context.displayName||"Context")+".Provider";case ZT:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case JT:return e=r.displayName||null,e!==null?e:kA(r.type)||"Memo";case bl:e=r._payload,r=r._init;try{return kA(r(e))}catch{}}return null}function oee(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kA(e);case 8:return e===QT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function E0(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xj(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cee(r){var e=xj(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function u8(r){r._valueTracker||(r._valueTracker=cee(r))}function wj(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=xj(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function _3(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function DA(r,e){var t=e.checked;return jr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function gO(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=E0(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ej(r,e){e=e.checked,e!=null&&GT(r,"checked",e,!1)}function BA(r,e){Ej(r,e);var t=E0(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?$A(r,e.type,t):e.hasOwnProperty("defaultValue")&&$A(r,e.type,E0(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function vO(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function $A(r,e,t){(e!=="number"||_3(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var fb=Array.isArray;function U1(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+E0(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function LA(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return jr({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function xO(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Re(92));if(fb(t)){if(1<t.length)throw Error(Re(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:E0(t)}}function Aj(r,e){var t=E0(e.value),n=E0(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function wO(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function _j(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function UA(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?_j(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var f8,Sj=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(f8=f8||document.createElement("div"),f8.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=f8.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function tg(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Cb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uee=["Webkit","ms","Moz","O"];Object.keys(Cb).forEach(function(r){uee.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Cb[e]=Cb[r]})});function Mj(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Cb.hasOwnProperty(r)&&Cb[r]?(""+e).trim():e+"px"}function Pj(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=Mj(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var fee=jr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FA(r,e){if(e){if(fee[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function jA(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qA=null;function YT(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var VA=null,F1=null,j1=null;function EO(r){if(r=z2(r)){if(typeof VA!="function")throw Error(Re(280));var e=r.stateNode;e&&(e=Ow(e),VA(r.stateNode,r.type,e))}}function Tj(r){F1?j1?j1.push(r):j1=[r]:F1=r}function Cj(){if(F1){var r=F1,e=j1;if(j1=F1=null,EO(r),e)for(r=0;r<e.length;r++)EO(e[r])}}function Ij(r,e){return r(e)}function Rj(){}var j9=!1;function Nj(r,e,t){if(j9)return r(e,t);j9=!0;try{return Ij(r,e,t)}finally{j9=!1,(F1!==null||j1!==null)&&(Rj(),Cj())}}function rg(r,e){var t=r.stateNode;if(t===null)return null;var n=Ow(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Re(231,e,typeof t));return t}var zA=!1;if(yf)try{var L6={};Object.defineProperty(L6,"passive",{get:function(){zA=!0}}),window.addEventListener("test",L6,L6),window.removeEventListener("test",L6,L6)}catch{zA=!1}function lee(r,e,t,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(f){this.onError(f)}}var Ib=!1,S3=null,M3=!1,HA=null,dee={onError:function(r){Ib=!0,S3=r}};function hee(r,e,t,n,i,s,a,o,c){Ib=!1,S3=null,lee.apply(dee,arguments)}function pee(r,e,t,n,i,s,a,o,c){if(hee.apply(this,arguments),Ib){if(Ib){var u=S3;Ib=!1,S3=null}else throw Error(Re(198));M3||(M3=!0,HA=u)}}function pp(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function Oj(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function AO(r){if(pp(r)!==r)throw Error(Re(188))}function yee(r){var e=r.alternate;if(!e){if(e=pp(r),e===null)throw Error(Re(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return AO(i),r;if(s===n)return AO(i),e;s=s.sibling}throw Error(Re(188))}if(t.return!==n.return)t=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a)throw Error(Re(189))}}if(t.alternate!==n)throw Error(Re(190))}if(t.tag!==3)throw Error(Re(188));return t.stateNode.current===t?r:e}function kj(r){return r=yee(r),r!==null?Dj(r):null}function Dj(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=Dj(r);if(e!==null)return e;r=r.sibling}return null}var Bj=ua.unstable_scheduleCallback,_O=ua.unstable_cancelCallback,mee=ua.unstable_shouldYield,bee=ua.unstable_requestPaint,sn=ua.unstable_now,gee=ua.unstable_getCurrentPriorityLevel,XT=ua.unstable_ImmediatePriority,$j=ua.unstable_UserBlockingPriority,P3=ua.unstable_NormalPriority,vee=ua.unstable_LowPriority,Lj=ua.unstable_IdlePriority,Cw=null,Uc=null;function xee(r){if(Uc&&typeof Uc.onCommitFiberRoot=="function")try{Uc.onCommitFiberRoot(Cw,r,void 0,(r.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:Aee,wee=Math.log,Eee=Math.LN2;function Aee(r){return r>>>=0,r===0?32:31-(wee(r)/Eee|0)|0}var l8=64,d8=4194304;function lb(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function T3(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?n=lb(o):(s&=a,s!==0&&(n=lb(s)))}else a=t&~i,a!==0?n=lb(a):s!==0&&(n=lb(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Vo(e),i=1<<t,n|=r[t],e&=~i;return n}function _ee(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function See(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-Vo(s),o=1<<a,c=i[a];c===-1?(!(o&t)||o&n)&&(i[a]=_ee(o,e)):c<=e&&(r.expiredLanes|=o),s&=~o}}function WA(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Uj(){var r=l8;return l8<<=1,!(l8&4194240)&&(l8=64),r}function q9(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function q2(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Vo(e),r[e]=t}function Mee(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Vo(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function eC(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Vo(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var Qt=0;function Fj(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var jj,tC,qj,Vj,zj,KA=!1,h8=[],f0=null,l0=null,d0=null,ng=new Map,ig=new Map,Pl=[],Pee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SO(r,e){switch(r){case"focusin":case"focusout":f0=null;break;case"dragenter":case"dragleave":l0=null;break;case"mouseover":case"mouseout":d0=null;break;case"pointerover":case"pointerout":ng.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ig.delete(e.pointerId)}}function U6(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=z2(e),e!==null&&tC(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function Tee(r,e,t,n,i){switch(e){case"focusin":return f0=U6(f0,r,e,t,n,i),!0;case"dragenter":return l0=U6(l0,r,e,t,n,i),!0;case"mouseover":return d0=U6(d0,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return ng.set(s,U6(ng.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ig.set(s,U6(ig.get(s)||null,r,e,t,n,i)),!0}return!1}function Hj(r){var e=Id(r.target);if(e!==null){var t=pp(e);if(t!==null){if(e=t.tag,e===13){if(e=Oj(t),e!==null){r.blockedOn=e,zj(r.priority,function(){qj(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Rv(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=GA(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);qA=n,t.target.dispatchEvent(n),qA=null}else return e=z2(t),e!==null&&tC(e),r.blockedOn=t,!1;e.shift()}return!0}function MO(r,e,t){Rv(r)&&t.delete(e)}function Cee(){KA=!1,f0!==null&&Rv(f0)&&(f0=null),l0!==null&&Rv(l0)&&(l0=null),d0!==null&&Rv(d0)&&(d0=null),ng.forEach(MO),ig.forEach(MO)}function F6(r,e){r.blockedOn===e&&(r.blockedOn=null,KA||(KA=!0,ua.unstable_scheduleCallback(ua.unstable_NormalPriority,Cee)))}function sg(r){function e(i){return F6(i,r)}if(0<h8.length){F6(h8[0],r);for(var t=1;t<h8.length;t++){var n=h8[t];n.blockedOn===r&&(n.blockedOn=null)}}for(f0!==null&&F6(f0,r),l0!==null&&F6(l0,r),d0!==null&&F6(d0,r),ng.forEach(e),ig.forEach(e),t=0;t<Pl.length;t++)n=Pl[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Pl.length&&(t=Pl[0],t.blockedOn===null);)Hj(t),t.blockedOn===null&&Pl.shift()}var q1=Nf.ReactCurrentBatchConfig,C3=!0;function Iee(r,e,t,n){var i=Qt,s=q1.transition;q1.transition=null;try{Qt=1,rC(r,e,t,n)}finally{Qt=i,q1.transition=s}}function Ree(r,e,t,n){var i=Qt,s=q1.transition;q1.transition=null;try{Qt=4,rC(r,e,t,n)}finally{Qt=i,q1.transition=s}}function rC(r,e,t,n){if(C3){var i=GA(r,e,t,n);if(i===null)Y9(r,e,n,I3,t),SO(r,n);else if(Tee(i,r,e,t,n))n.stopPropagation();else if(SO(r,n),e&4&&-1<Pee.indexOf(r)){for(;i!==null;){var s=z2(i);if(s!==null&&jj(s),s=GA(r,e,t,n),s===null&&Y9(r,e,n,I3,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else Y9(r,e,n,null,t)}}var I3=null;function GA(r,e,t,n){if(I3=null,r=YT(n),r=Id(r),r!==null)if(e=pp(r),e===null)r=null;else if(t=e.tag,t===13){if(r=Oj(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return I3=r,null}function Wj(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gee()){case XT:return 1;case $j:return 4;case P3:case vee:return 16;case Lj:return 536870912;default:return 16}default:return 16}}var Xl=null,nC=null,Nv=null;function Kj(){if(Nv)return Nv;var r,e=nC,t=e.length,n,i="value"in Xl?Xl.value:Xl.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[s-n];n++);return Nv=i.slice(r,1<n?1-n:void 0)}function Ov(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function p8(){return!0}function PO(){return!1}function pa(r){function e(t,n,i,s,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?p8:PO,this.isPropagationStopped=PO,this}return jr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=p8)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=p8)},persist:function(){},isPersistent:p8}),e}var Zm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iC=pa(Zm),V2=jr({},Zm,{view:0,detail:0}),Nee=pa(V2),V9,z9,j6,Iw=jr({},V2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sC,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==j6&&(j6&&r.type==="mousemove"?(V9=r.screenX-j6.screenX,z9=r.screenY-j6.screenY):z9=V9=0,j6=r),V9)},movementY:function(r){return"movementY"in r?r.movementY:z9}}),TO=pa(Iw),Oee=jr({},Iw,{dataTransfer:0}),kee=pa(Oee),Dee=jr({},V2,{relatedTarget:0}),H9=pa(Dee),Bee=jr({},Zm,{animationName:0,elapsedTime:0,pseudoElement:0}),$ee=pa(Bee),Lee=jr({},Zm,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Uee=pa(Lee),Fee=jr({},Zm,{data:0}),CO=pa(Fee),jee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zee(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=Vee[r])?!!e[r]:!1}function sC(){return zee}var Hee=jr({},V2,{key:function(r){if(r.key){var e=jee[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Ov(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qee[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sC,charCode:function(r){return r.type==="keypress"?Ov(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ov(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Wee=pa(Hee),Kee=jr({},Iw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IO=pa(Kee),Gee=jr({},V2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sC}),Qee=pa(Gee),Zee=jr({},Zm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jee=pa(Zee),Yee=jr({},Iw,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Xee=pa(Yee),ete=[9,13,27,32],aC=yf&&"CompositionEvent"in window,Rb=null;yf&&"documentMode"in document&&(Rb=document.documentMode);var tte=yf&&"TextEvent"in window&&!Rb,Gj=yf&&(!aC||Rb&&8<Rb&&11>=Rb),RO=" ",NO=!1;function Qj(r,e){switch(r){case"keyup":return ete.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zj(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var f1=!1;function rte(r,e){switch(r){case"compositionend":return Zj(e);case"keypress":return e.which!==32?null:(NO=!0,RO);case"textInput":return r=e.data,r===RO&&NO?null:r;default:return null}}function nte(r,e){if(f1)return r==="compositionend"||!aC&&Qj(r,e)?(r=Kj(),Nv=nC=Xl=null,f1=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gj&&e.locale!=="ko"?null:e.data;default:return null}}var ite={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OO(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!ite[r.type]:e==="textarea"}function Jj(r,e,t,n){Tj(n),e=R3(e,"onChange"),0<e.length&&(t=new iC("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Nb=null,ag=null;function ste(r){cq(r,0)}function Rw(r){var e=h1(r);if(wj(e))return r}function ate(r,e){if(r==="change")return e}var Yj=!1;if(yf){var W9;if(yf){var K9="oninput"in document;if(!K9){var kO=document.createElement("div");kO.setAttribute("oninput","return;"),K9=typeof kO.oninput=="function"}W9=K9}else W9=!1;Yj=W9&&(!document.documentMode||9<document.documentMode)}function DO(){Nb&&(Nb.detachEvent("onpropertychange",Xj),ag=Nb=null)}function Xj(r){if(r.propertyName==="value"&&Rw(ag)){var e=[];Jj(e,ag,r,YT(r)),Nj(ste,e)}}function ote(r,e,t){r==="focusin"?(DO(),Nb=e,ag=t,Nb.attachEvent("onpropertychange",Xj)):r==="focusout"&&DO()}function cte(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Rw(ag)}function ute(r,e){if(r==="click")return Rw(e)}function fte(r,e){if(r==="input"||r==="change")return Rw(e)}function lte(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Wo=typeof Object.is=="function"?Object.is:lte;function og(r,e){if(Wo(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!IA.call(e,i)||!Wo(r[i],e[i]))return!1}return!0}function BO(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $O(r,e){var t=BO(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=BO(t)}}function eq(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?eq(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function tq(){for(var r=window,e=_3();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=_3(r.document)}return e}function oC(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function dte(r){var e=tq(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&eq(t.ownerDocument.documentElement,t)){if(n!==null&&oC(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=$O(t,s);var a=$O(t,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var hte=yf&&"documentMode"in document&&11>=document.documentMode,l1=null,QA=null,Ob=null,ZA=!1;function LO(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ZA||l1==null||l1!==_3(n)||(n=l1,"selectionStart"in n&&oC(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ob&&og(Ob,n)||(Ob=n,n=R3(QA,"onSelect"),0<n.length&&(e=new iC("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=l1)))}function y8(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var d1={animationend:y8("Animation","AnimationEnd"),animationiteration:y8("Animation","AnimationIteration"),animationstart:y8("Animation","AnimationStart"),transitionend:y8("Transition","TransitionEnd")},G9={},rq={};yf&&(rq=document.createElement("div").style,"AnimationEvent"in window||(delete d1.animationend.animation,delete d1.animationiteration.animation,delete d1.animationstart.animation),"TransitionEvent"in window||delete d1.transitionend.transition);function Nw(r){if(G9[r])return G9[r];if(!d1[r])return r;var e=d1[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in rq)return G9[r]=e[t];return r}var nq=Nw("animationend"),iq=Nw("animationiteration"),sq=Nw("animationstart"),aq=Nw("transitionend"),oq=new Map,UO="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function F0(r,e){oq.set(r,e),hp(e,[r])}for(var Q9=0;Q9<UO.length;Q9++){var Z9=UO[Q9],pte=Z9.toLowerCase(),yte=Z9[0].toUpperCase()+Z9.slice(1);F0(pte,"on"+yte)}F0(nq,"onAnimationEnd");F0(iq,"onAnimationIteration");F0(sq,"onAnimationStart");F0("dblclick","onDoubleClick");F0("focusin","onFocus");F0("focusout","onBlur");F0(aq,"onTransitionEnd");em("onMouseEnter",["mouseout","mouseover"]);em("onMouseLeave",["mouseout","mouseover"]);em("onPointerEnter",["pointerout","pointerover"]);em("onPointerLeave",["pointerout","pointerover"]);hp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hp("onBeforeInput",["compositionend","keypress","textInput","paste"]);hp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mte=new Set("cancel close invalid load scroll toggle".split(" ").concat(db));function FO(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,pee(n,e,void 0,r),r.currentTarget=null}function cq(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;FO(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;FO(i,o,u),s=c}}}if(M3)throw r=HA,M3=!1,HA=null,r}function hr(r,e){var t=e[t_];t===void 0&&(t=e[t_]=new Set);var n=r+"__bubble";t.has(n)||(uq(e,r,2,!1),t.add(n))}function J9(r,e,t){var n=0;e&&(n|=4),uq(t,r,n,e)}var m8="_reactListening"+Math.random().toString(36).slice(2);function cg(r){if(!r[m8]){r[m8]=!0,mj.forEach(function(t){t!=="selectionchange"&&(mte.has(t)||J9(t,!1,r),J9(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[m8]||(e[m8]=!0,J9("selectionchange",!1,e))}}function uq(r,e,t,n){switch(Wj(e)){case 1:var i=Iee;break;case 4:i=Ree;break;default:i=rC}t=i.bind(null,e,t,r),i=void 0,!zA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function Y9(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Id(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}Nj(function(){var u=s,f=YT(t),l=[];e:{var d=oq.get(r);if(d!==void 0){var h=iC,y=r;switch(r){case"keypress":if(Ov(t)===0)break e;case"keydown":case"keyup":h=Wee;break;case"focusin":y="focus",h=H9;break;case"focusout":y="blur",h=H9;break;case"beforeblur":case"afterblur":h=H9;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=TO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=kee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Qee;break;case nq:case iq:case sq:h=$ee;break;case aq:h=Jee;break;case"scroll":h=Nee;break;case"wheel":h=Xee;break;case"copy":case"cut":case"paste":h=Uee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=IO}var p=(e&4)!==0,g=!p&&r==="scroll",m=p?d!==null?d+"Capture":null:d;p=[];for(var v=u,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,m!==null&&(_=rg(v,m),_!=null&&p.push(ug(v,_,b)))),g)break;v=v.return}0<p.length&&(d=new h(d,y,null,t,f),l.push({event:d,listeners:p}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",h=r==="mouseout"||r==="pointerout",d&&t!==qA&&(y=t.relatedTarget||t.fromElement)&&(Id(y)||y[mf]))break e;if((h||d)&&(d=f.window===f?f:(d=f.ownerDocument)?d.defaultView||d.parentWindow:window,h?(y=t.relatedTarget||t.toElement,h=u,y=y?Id(y):null,y!==null&&(g=pp(y),y!==g||y.tag!==5&&y.tag!==6)&&(y=null)):(h=null,y=u),h!==y)){if(p=TO,_="onMouseLeave",m="onMouseEnter",v="mouse",(r==="pointerout"||r==="pointerover")&&(p=IO,_="onPointerLeave",m="onPointerEnter",v="pointer"),g=h==null?d:h1(h),b=y==null?d:h1(y),d=new p(_,v+"leave",h,t,f),d.target=g,d.relatedTarget=b,_=null,Id(f)===u&&(p=new p(m,v+"enter",y,t,f),p.target=b,p.relatedTarget=g,_=p),g=_,h&&y)t:{for(p=h,m=y,v=0,b=p;b;b=Dp(b))v++;for(b=0,_=m;_;_=Dp(_))b++;for(;0<v-b;)p=Dp(p),v--;for(;0<b-v;)m=Dp(m),b--;for(;v--;){if(p===m||m!==null&&p===m.alternate)break t;p=Dp(p),m=Dp(m)}p=null}else p=null;h!==null&&jO(l,d,h,p,!1),y!==null&&g!==null&&jO(l,g,y,p,!0)}}e:{if(d=u?h1(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var C=ate;else if(OO(d))if(Yj)C=fte;else{C=cte;var N=ote}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=ute);if(C&&(C=C(r,u))){Jj(l,C,t,f);break e}N&&N(r,d,u),r==="focusout"&&(N=d._wrapperState)&&N.controlled&&d.type==="number"&&$A(d,"number",d.value)}switch(N=u?h1(u):window,r){case"focusin":(OO(N)||N.contentEditable==="true")&&(l1=N,QA=u,Ob=null);break;case"focusout":Ob=QA=l1=null;break;case"mousedown":ZA=!0;break;case"contextmenu":case"mouseup":case"dragend":ZA=!1,LO(l,t,f);break;case"selectionchange":if(hte)break;case"keydown":case"keyup":LO(l,t,f)}var x;if(aC)e:{switch(r){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else f1?Qj(r,t)&&(I="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(Gj&&t.locale!=="ko"&&(f1||I!=="onCompositionStart"?I==="onCompositionEnd"&&f1&&(x=Kj()):(Xl=f,nC="value"in Xl?Xl.value:Xl.textContent,f1=!0)),N=R3(u,I),0<N.length&&(I=new CO(I,r,null,t,f),l.push({event:I,listeners:N}),x?I.data=x:(x=Zj(t),x!==null&&(I.data=x)))),(x=tte?rte(r,t):nte(r,t))&&(u=R3(u,"onBeforeInput"),0<u.length&&(f=new CO("onBeforeInput","beforeinput",null,t,f),l.push({event:f,listeners:u}),f.data=x))}cq(l,e)})}function ug(r,e,t){return{instance:r,listener:e,currentTarget:t}}function R3(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rg(r,t),s!=null&&n.unshift(ug(r,s,i)),s=rg(r,e),s!=null&&n.push(ug(r,s,i))),r=r.return}return n}function Dp(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function jO(r,e,t,n,i){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=rg(t,s),c!=null&&a.unshift(ug(t,c,o))):i||(c=rg(t,s),c!=null&&a.push(ug(t,c,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var bte=/\r\n?/g,gte=/\u0000|\uFFFD/g;function qO(r){return(typeof r=="string"?r:""+r).replace(bte,`
`).replace(gte,"")}function b8(r,e,t){if(e=qO(e),qO(r)!==e&&t)throw Error(Re(425))}function N3(){}var JA=null,YA=null;function XA(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var e_=typeof setTimeout=="function"?setTimeout:void 0,vte=typeof clearTimeout=="function"?clearTimeout:void 0,VO=typeof Promise=="function"?Promise:void 0,xte=typeof queueMicrotask=="function"?queueMicrotask:typeof VO<"u"?function(r){return VO.resolve(null).then(r).catch(wte)}:e_;function wte(r){setTimeout(function(){throw r})}function X9(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),sg(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);sg(e)}function h0(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function zO(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Jm=Math.random().toString(36).slice(2),Cc="__reactFiber$"+Jm,fg="__reactProps$"+Jm,mf="__reactContainer$"+Jm,t_="__reactEvents$"+Jm,Ete="__reactListeners$"+Jm,Ate="__reactHandles$"+Jm;function Id(r){var e=r[Cc];if(e)return e;for(var t=r.parentNode;t;){if(e=t[mf]||t[Cc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=zO(r);r!==null;){if(t=r[Cc])return t;r=zO(r)}return e}r=t,t=r.parentNode}return null}function z2(r){return r=r[Cc]||r[mf],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function h1(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Re(33))}function Ow(r){return r[fg]||null}var r_=[],p1=-1;function j0(r){return{current:r}}function pr(r){0>p1||(r.current=r_[p1],r_[p1]=null,p1--)}function cr(r,e){p1++,r_[p1]=r.current,r.current=e}var A0={},Li=j0(A0),Ts=j0(!1),Th=A0;function tm(r,e){var t=r.type.contextTypes;if(!t)return A0;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Cs(r){return r=r.childContextTypes,r!=null}function O3(){pr(Ts),pr(Li)}function HO(r,e,t){if(Li.current!==A0)throw Error(Re(168));cr(Li,e),cr(Ts,t)}function fq(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Re(108,oee(r)||"Unknown",i));return jr({},t,n)}function k3(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||A0,Th=Li.current,cr(Li,r),cr(Ts,Ts.current),!0}function WO(r,e,t){var n=r.stateNode;if(!n)throw Error(Re(169));t?(r=fq(r,e,Th),n.__reactInternalMemoizedMergedChildContext=r,pr(Ts),pr(Li),cr(Li,r)):pr(Ts),cr(Ts,t)}var ku=null,kw=!1,e7=!1;function lq(r){ku===null?ku=[r]:ku.push(r)}function _te(r){kw=!0,lq(r)}function q0(){if(!e7&&ku!==null){e7=!0;var r=0,e=Qt;try{var t=ku;for(Qt=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}ku=null,kw=!1}catch(i){throw ku!==null&&(ku=ku.slice(r+1)),Bj(XT,q0),i}finally{Qt=e,e7=!1}}return null}var y1=[],m1=0,D3=null,B3=0,$a=[],La=0,Ch=null,Xu=1,ef="";function pd(r,e){y1[m1++]=B3,y1[m1++]=D3,D3=r,B3=e}function dq(r,e,t){$a[La++]=Xu,$a[La++]=ef,$a[La++]=Ch,Ch=r;var n=Xu;r=ef;var i=32-Vo(n)-1;n&=~(1<<i),t+=1;var s=32-Vo(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Xu=1<<32-Vo(e)+i|t<<i|n,ef=s+r}else Xu=1<<s|t<<i|n,ef=r}function cC(r){r.return!==null&&(pd(r,1),dq(r,1,0))}function uC(r){for(;r===D3;)D3=y1[--m1],y1[m1]=null,B3=y1[--m1],y1[m1]=null;for(;r===Ch;)Ch=$a[--La],$a[La]=null,ef=$a[--La],$a[La]=null,Xu=$a[--La],$a[La]=null}var sa=null,na=null,Ir=!1,ko=null;function hq(r,e){var t=Ha(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function KO(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,sa=r,na=h0(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,sa=r,na=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ch!==null?{id:Xu,overflow:ef}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ha(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,sa=r,na=null,!0):!1;default:return!1}}function n_(r){return(r.mode&1)!==0&&(r.flags&128)===0}function i_(r){if(Ir){var e=na;if(e){var t=e;if(!KO(r,e)){if(n_(r))throw Error(Re(418));e=h0(t.nextSibling);var n=sa;e&&KO(r,e)?hq(n,t):(r.flags=r.flags&-4097|2,Ir=!1,sa=r)}}else{if(n_(r))throw Error(Re(418));r.flags=r.flags&-4097|2,Ir=!1,sa=r}}}function GO(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;sa=r}function g8(r){if(r!==sa)return!1;if(!Ir)return GO(r),Ir=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!XA(r.type,r.memoizedProps)),e&&(e=na)){if(n_(r))throw pq(),Error(Re(418));for(;e;)hq(r,e),e=h0(e.nextSibling)}if(GO(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Re(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){na=h0(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}na=null}}else na=sa?h0(r.stateNode.nextSibling):null;return!0}function pq(){for(var r=na;r;)r=h0(r.nextSibling)}function rm(){na=sa=null,Ir=!1}function fC(r){ko===null?ko=[r]:ko.push(r)}var Ste=Nf.ReactCurrentBatchConfig;function q6(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Re(309));var n=t.stateNode}if(!n)throw Error(Re(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof r!="string")throw Error(Re(284));if(!t._owner)throw Error(Re(290,r))}return r}function v8(r,e){throw r=Object.prototype.toString.call(e),Error(Re(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function QO(r){var e=r._init;return e(r._payload)}function yq(r){function e(m,v){if(r){var b=m.deletions;b===null?(m.deletions=[v],m.flags|=16):b.push(v)}}function t(m,v){if(!r)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function n(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=b0(m,v),m.index=0,m.sibling=null,m}function s(m,v,b){return m.index=b,r?(b=m.alternate,b!==null?(b=b.index,b<v?(m.flags|=2,v):b):(m.flags|=2,v)):(m.flags|=1048576,v)}function a(m){return r&&m.alternate===null&&(m.flags|=2),m}function o(m,v,b,_){return v===null||v.tag!==6?(v=o7(b,m.mode,_),v.return=m,v):(v=i(v,b),v.return=m,v)}function c(m,v,b,_){var C=b.type;return C===u1?f(m,v,b.props.children,_,b.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===bl&&QO(C)===v.type)?(_=i(v,b.props),_.ref=q6(m,v,b),_.return=m,_):(_=Fv(b.type,b.key,b.props,null,m.mode,_),_.ref=q6(m,v,b),_.return=m,_)}function u(m,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=c7(b,m.mode,_),v.return=m,v):(v=i(v,b.children||[]),v.return=m,v)}function f(m,v,b,_,C){return v===null||v.tag!==7?(v=xh(b,m.mode,_,C),v.return=m,v):(v=i(v,b),v.return=m,v)}function l(m,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=o7(""+v,m.mode,b),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case c8:return b=Fv(v.type,v.key,v.props,null,m.mode,b),b.ref=q6(m,null,v),b.return=m,b;case c1:return v=c7(v,m.mode,b),v.return=m,v;case bl:var _=v._init;return l(m,_(v._payload),b)}if(fb(v)||$6(v))return v=xh(v,m.mode,b,null),v.return=m,v;v8(m,v)}return null}function d(m,v,b,_){var C=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:o(m,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case c8:return b.key===C?c(m,v,b,_):null;case c1:return b.key===C?u(m,v,b,_):null;case bl:return C=b._init,d(m,v,C(b._payload),_)}if(fb(b)||$6(b))return C!==null?null:f(m,v,b,_,null);v8(m,b)}return null}function h(m,v,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(b)||null,o(v,m,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case c8:return m=m.get(_.key===null?b:_.key)||null,c(v,m,_,C);case c1:return m=m.get(_.key===null?b:_.key)||null,u(v,m,_,C);case bl:var N=_._init;return h(m,v,b,N(_._payload),C)}if(fb(_)||$6(_))return m=m.get(b)||null,f(v,m,_,C,null);v8(v,_)}return null}function y(m,v,b,_){for(var C=null,N=null,x=v,I=v=0,$=null;x!==null&&I<b.length;I++){x.index>I?($=x,x=null):$=x.sibling;var j=d(m,x,b[I],_);if(j===null){x===null&&(x=$);break}r&&x&&j.alternate===null&&e(m,x),v=s(j,v,I),N===null?C=j:N.sibling=j,N=j,x=$}if(I===b.length)return t(m,x),Ir&&pd(m,I),C;if(x===null){for(;I<b.length;I++)x=l(m,b[I],_),x!==null&&(v=s(x,v,I),N===null?C=x:N.sibling=x,N=x);return Ir&&pd(m,I),C}for(x=n(m,x);I<b.length;I++)$=h(x,m,I,b[I],_),$!==null&&(r&&$.alternate!==null&&x.delete($.key===null?I:$.key),v=s($,v,I),N===null?C=$:N.sibling=$,N=$);return r&&x.forEach(function(O){return e(m,O)}),Ir&&pd(m,I),C}function p(m,v,b,_){var C=$6(b);if(typeof C!="function")throw Error(Re(150));if(b=C.call(b),b==null)throw Error(Re(151));for(var N=C=null,x=v,I=v=0,$=null,j=b.next();x!==null&&!j.done;I++,j=b.next()){x.index>I?($=x,x=null):$=x.sibling;var O=d(m,x,j.value,_);if(O===null){x===null&&(x=$);break}r&&x&&O.alternate===null&&e(m,x),v=s(O,v,I),N===null?C=O:N.sibling=O,N=O,x=$}if(j.done)return t(m,x),Ir&&pd(m,I),C;if(x===null){for(;!j.done;I++,j=b.next())j=l(m,j.value,_),j!==null&&(v=s(j,v,I),N===null?C=j:N.sibling=j,N=j);return Ir&&pd(m,I),C}for(x=n(m,x);!j.done;I++,j=b.next())j=h(x,m,I,j.value,_),j!==null&&(r&&j.alternate!==null&&x.delete(j.key===null?I:j.key),v=s(j,v,I),N===null?C=j:N.sibling=j,N=j);return r&&x.forEach(function(E){return e(m,E)}),Ir&&pd(m,I),C}function g(m,v,b,_){if(typeof b=="object"&&b!==null&&b.type===u1&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case c8:e:{for(var C=b.key,N=v;N!==null;){if(N.key===C){if(C=b.type,C===u1){if(N.tag===7){t(m,N.sibling),v=i(N,b.props.children),v.return=m,m=v;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===bl&&QO(C)===N.type){t(m,N.sibling),v=i(N,b.props),v.ref=q6(m,N,b),v.return=m,m=v;break e}t(m,N);break}else e(m,N);N=N.sibling}b.type===u1?(v=xh(b.props.children,m.mode,_,b.key),v.return=m,m=v):(_=Fv(b.type,b.key,b.props,null,m.mode,_),_.ref=q6(m,v,b),_.return=m,m=_)}return a(m);case c1:e:{for(N=b.key;v!==null;){if(v.key===N)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){t(m,v.sibling),v=i(v,b.children||[]),v.return=m,m=v;break e}else{t(m,v);break}else e(m,v);v=v.sibling}v=c7(b,m.mode,_),v.return=m,m=v}return a(m);case bl:return N=b._init,g(m,v,N(b._payload),_)}if(fb(b))return y(m,v,b,_);if($6(b))return p(m,v,b,_);v8(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(t(m,v.sibling),v=i(v,b),v.return=m,m=v):(t(m,v),v=o7(b,m.mode,_),v.return=m,m=v),a(m)):t(m,v)}return g}var nm=yq(!0),mq=yq(!1),$3=j0(null),L3=null,b1=null,lC=null;function dC(){lC=b1=L3=null}function hC(r){var e=$3.current;pr($3),r._currentValue=e}function s_(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function V1(r,e){L3=r,lC=b1=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(As=!0),r.firstContext=null)}function Qa(r){var e=r._currentValue;if(lC!==r)if(r={context:r,memoizedValue:e,next:null},b1===null){if(L3===null)throw Error(Re(308));b1=r,L3.dependencies={lanes:0,firstContext:r}}else b1=b1.next=r;return e}var Rd=null;function pC(r){Rd===null?Rd=[r]:Rd.push(r)}function bq(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,pC(e)):(t.next=i.next,i.next=t),e.interleaved=t,bf(r,n)}function bf(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var gl=!1;function yC(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gq(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function cf(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function p0(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,Ot&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,bf(r,t)}return i=n.interleaved,i===null?(e.next=e,pC(n)):(e.next=i.next,i.next=e),n.interleaved=e,bf(r,t)}function kv(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,eC(r,t)}}function ZO(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function U3(r,e,t,n){var i=r.updateQueue;gl=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var f=r.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==a&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=c))}if(s!==null){var l=i.baseState;a=0,f=u=c=null,o=s;do{var d=o.lane,h=o.eventTime;if((n&d)===d){f!==null&&(f=f.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=r,p=o;switch(d=e,h=t,p.tag){case 1:if(y=p.payload,typeof y=="function"){l=y.call(h,l,d);break e}l=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=p.payload,d=typeof y=="function"?y.call(h,l,d):y,d==null)break e;l=jr({},l,d);break e;case 2:gl=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=h,c=l):f=f.next=h,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(f===null&&(c=l),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Rh|=a,r.lanes=a,r.memoizedState=l}}function JO(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Re(191,i));i.call(n)}}}var H2={},Fc=j0(H2),lg=j0(H2),dg=j0(H2);function Nd(r){if(r===H2)throw Error(Re(174));return r}function mC(r,e){switch(cr(dg,e),cr(lg,r),cr(Fc,H2),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:UA(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=UA(e,r)}pr(Fc),cr(Fc,e)}function im(){pr(Fc),pr(lg),pr(dg)}function vq(r){Nd(dg.current);var e=Nd(Fc.current),t=UA(e,r.type);e!==t&&(cr(lg,r),cr(Fc,t))}function bC(r){lg.current===r&&(pr(Fc),pr(lg))}var Br=j0(0);function F3(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var t7=[];function gC(){for(var r=0;r<t7.length;r++)t7[r]._workInProgressVersionPrimary=null;t7.length=0}var Dv=Nf.ReactCurrentDispatcher,r7=Nf.ReactCurrentBatchConfig,Ih=0,Fr=null,mn=null,kn=null,j3=!1,kb=!1,hg=0,Mte=0;function xi(){throw Error(Re(321))}function vC(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Wo(r[t],e[t]))return!1;return!0}function xC(r,e,t,n,i,s){if(Ih=s,Fr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dv.current=r===null||r.memoizedState===null?Ite:Rte,r=t(n,i),kb){s=0;do{if(kb=!1,hg=0,25<=s)throw Error(Re(301));s+=1,kn=mn=null,e.updateQueue=null,Dv.current=Nte,r=t(n,i)}while(kb)}if(Dv.current=q3,e=mn!==null&&mn.next!==null,Ih=0,kn=mn=Fr=null,j3=!1,e)throw Error(Re(300));return r}function wC(){var r=hg!==0;return hg=0,r}function hc(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?Fr.memoizedState=kn=r:kn=kn.next=r,kn}function Za(){if(mn===null){var r=Fr.alternate;r=r!==null?r.memoizedState:null}else r=mn.next;var e=kn===null?Fr.memoizedState:kn.next;if(e!==null)kn=e,mn=r;else{if(r===null)throw Error(Re(310));mn=r,r={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},kn===null?Fr.memoizedState=kn=r:kn=kn.next=r}return kn}function pg(r,e){return typeof e=="function"?e(r):e}function n7(r){var e=Za(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=r;var n=mn,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var f=u.lane;if((Ih&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var l={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=l,a=n):c=c.next=l,Fr.lanes|=f,Rh|=f}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,Wo(n,e.memoizedState)||(As=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,Fr.lanes|=s,Rh|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function i7(r){var e=Za(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);Wo(s,e.memoizedState)||(As=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function xq(){}function wq(r,e){var t=Fr,n=Za(),i=e(),s=!Wo(n.memoizedState,i);if(s&&(n.memoizedState=i,As=!0),n=n.queue,EC(_q.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||kn!==null&&kn.memoizedState.tag&1){if(t.flags|=2048,yg(9,Aq.bind(null,t,n,i,e),void 0,null),Ln===null)throw Error(Re(349));Ih&30||Eq(t,e,i)}return i}function Eq(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Fr.updateQueue,e===null?(e={lastEffect:null,stores:null},Fr.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function Aq(r,e,t,n){e.value=t,e.getSnapshot=n,Sq(e)&&Mq(r)}function _q(r,e,t){return t(function(){Sq(e)&&Mq(r)})}function Sq(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Wo(r,t)}catch{return!0}}function Mq(r){var e=bf(r,1);e!==null&&zo(e,r,1,-1)}function YO(r){var e=hc();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pg,lastRenderedState:r},e.queue=r,r=r.dispatch=Cte.bind(null,Fr,r),[e.memoizedState,r]}function yg(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Fr.updateQueue,e===null?(e={lastEffect:null,stores:null},Fr.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function Pq(){return Za().memoizedState}function Bv(r,e,t,n){var i=hc();Fr.flags|=r,i.memoizedState=yg(1|e,t,void 0,n===void 0?null:n)}function Dw(r,e,t,n){var i=Za();n=n===void 0?null:n;var s=void 0;if(mn!==null){var a=mn.memoizedState;if(s=a.destroy,n!==null&&vC(n,a.deps)){i.memoizedState=yg(e,t,s,n);return}}Fr.flags|=r,i.memoizedState=yg(1|e,t,s,n)}function XO(r,e){return Bv(8390656,8,r,e)}function EC(r,e){return Dw(2048,8,r,e)}function Tq(r,e){return Dw(4,2,r,e)}function Cq(r,e){return Dw(4,4,r,e)}function Iq(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function Rq(r,e,t){return t=t!=null?t.concat([r]):null,Dw(4,4,Iq.bind(null,e,r),t)}function AC(){}function Nq(r,e){var t=Za();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&vC(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function Oq(r,e){var t=Za();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&vC(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function kq(r,e,t){return Ih&21?(Wo(t,e)||(t=Uj(),Fr.lanes|=t,Rh|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,As=!0),r.memoizedState=t)}function Pte(r,e){var t=Qt;Qt=t!==0&&4>t?t:4,r(!0);var n=r7.transition;r7.transition={};try{r(!1),e()}finally{Qt=t,r7.transition=n}}function Dq(){return Za().memoizedState}function Tte(r,e,t){var n=m0(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},Bq(r))$q(e,t);else if(t=bq(r,e,t,n),t!==null){var i=as();zo(t,r,n,i),Lq(t,e,n)}}function Cte(r,e,t){var n=m0(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(Bq(r))$q(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Wo(o,a)){var c=e.interleaved;c===null?(i.next=i,pC(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=bq(r,e,i,n),t!==null&&(i=as(),zo(t,r,n,i),Lq(t,e,n))}}function Bq(r){var e=r.alternate;return r===Fr||e!==null&&e===Fr}function $q(r,e){kb=j3=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function Lq(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,eC(r,t)}}var q3={readContext:Qa,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},Ite={readContext:Qa,useCallback:function(r,e){return hc().memoizedState=[r,e===void 0?null:e],r},useContext:Qa,useEffect:XO,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,Bv(4194308,4,Iq.bind(null,e,r),t)},useLayoutEffect:function(r,e){return Bv(4194308,4,r,e)},useInsertionEffect:function(r,e){return Bv(4,2,r,e)},useMemo:function(r,e){var t=hc();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=hc();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=Tte.bind(null,Fr,r),[n.memoizedState,r]},useRef:function(r){var e=hc();return r={current:r},e.memoizedState=r},useState:YO,useDebugValue:AC,useDeferredValue:function(r){return hc().memoizedState=r},useTransition:function(){var r=YO(!1),e=r[0];return r=Pte.bind(null,r[1]),hc().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Fr,i=hc();if(Ir){if(t===void 0)throw Error(Re(407));t=t()}else{if(t=e(),Ln===null)throw Error(Re(349));Ih&30||Eq(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,XO(_q.bind(null,n,s,r),[r]),n.flags|=2048,yg(9,Aq.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=hc(),e=Ln.identifierPrefix;if(Ir){var t=ef,n=Xu;t=(n&~(1<<32-Vo(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=hg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Mte++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},Rte={readContext:Qa,useCallback:Nq,useContext:Qa,useEffect:EC,useImperativeHandle:Rq,useInsertionEffect:Tq,useLayoutEffect:Cq,useMemo:Oq,useReducer:n7,useRef:Pq,useState:function(){return n7(pg)},useDebugValue:AC,useDeferredValue:function(r){var e=Za();return kq(e,mn.memoizedState,r)},useTransition:function(){var r=n7(pg)[0],e=Za().memoizedState;return[r,e]},useMutableSource:xq,useSyncExternalStore:wq,useId:Dq,unstable_isNewReconciler:!1},Nte={readContext:Qa,useCallback:Nq,useContext:Qa,useEffect:EC,useImperativeHandle:Rq,useInsertionEffect:Tq,useLayoutEffect:Cq,useMemo:Oq,useReducer:i7,useRef:Pq,useState:function(){return i7(pg)},useDebugValue:AC,useDeferredValue:function(r){var e=Za();return mn===null?e.memoizedState=r:kq(e,mn.memoizedState,r)},useTransition:function(){var r=i7(pg)[0],e=Za().memoizedState;return[r,e]},useMutableSource:xq,useSyncExternalStore:wq,useId:Dq,unstable_isNewReconciler:!1};function Ao(r,e){if(r&&r.defaultProps){e=jr({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function a_(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:jr({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var Bw={isMounted:function(r){return(r=r._reactInternals)?pp(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=as(),i=m0(r),s=cf(n,i);s.payload=e,t!=null&&(s.callback=t),e=p0(r,s,i),e!==null&&(zo(e,r,i,n),kv(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=as(),i=m0(r),s=cf(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=p0(r,s,i),e!==null&&(zo(e,r,i,n),kv(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=as(),n=m0(r),i=cf(t,n);i.tag=2,e!=null&&(i.callback=e),e=p0(r,i,n),e!==null&&(zo(e,r,n,t),kv(e,r,n))}};function ek(r,e,t,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!og(t,n)||!og(i,s):!0}function Uq(r,e,t){var n=!1,i=A0,s=e.contextType;return typeof s=="object"&&s!==null?s=Qa(s):(i=Cs(e)?Th:Li.current,n=e.contextTypes,s=(n=n!=null)?tm(r,i):A0),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bw,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function tk(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&Bw.enqueueReplaceState(e,e.state,null)}function o_(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},yC(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qa(s):(s=Cs(e)?Th:Li.current,i.context=tm(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(a_(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Bw.enqueueReplaceState(i,i.state,null),U3(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function sm(r,e){try{var t="",n=e;do t+=aee(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function s7(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function c_(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Ote=typeof WeakMap=="function"?WeakMap:Map;function Fq(r,e,t){t=cf(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){z3||(z3=!0,g_=n),c_(r,e)},t}function jq(r,e,t){t=cf(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){c_(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){c_(r,e),typeof n!="function"&&(y0===null?y0=new Set([this]):y0.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function rk(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new Ote;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=Kte.bind(null,r,e,t),e.then(r,r))}function nk(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function ik(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=cf(-1,1),e.tag=2,p0(t,e,1))),t.lanes|=1),r)}var kte=Nf.ReactCurrentOwner,As=!1;function Ki(r,e,t,n){e.child=r===null?mq(e,null,t,n):nm(e,r.child,t,n)}function sk(r,e,t,n,i){t=t.render;var s=e.ref;return V1(e,i),n=xC(r,e,t,n,s,i),t=wC(),r!==null&&!As?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,gf(r,e,i)):(Ir&&t&&cC(e),e.flags|=1,Ki(r,e,n,i),e.child)}function ak(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!RC(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,qq(r,e,s,n,i)):(r=Fv(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:og,t(a,n)&&r.ref===e.ref)return gf(r,e,i)}return e.flags|=1,r=b0(s,n),r.ref=e.ref,r.return=e,e.child=r}function qq(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(og(s,n)&&r.ref===e.ref)if(As=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(As=!0);else return e.lanes=r.lanes,gf(r,e,i)}return u_(r,e,t,n,i)}function Vq(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},cr(v1,ea),ea|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,cr(v1,ea),ea|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,cr(v1,ea),ea|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,cr(v1,ea),ea|=n;return Ki(r,e,i,t),e.child}function zq(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function u_(r,e,t,n,i){var s=Cs(t)?Th:Li.current;return s=tm(e,s),V1(e,i),t=xC(r,e,t,n,s,i),n=wC(),r!==null&&!As?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,gf(r,e,i)):(Ir&&n&&cC(e),e.flags|=1,Ki(r,e,t,i),e.child)}function ok(r,e,t,n,i){if(Cs(t)){var s=!0;k3(e)}else s=!1;if(V1(e,i),e.stateNode===null)$v(r,e),Uq(e,t,n),o_(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Qa(u):(u=Cs(t)?Th:Li.current,u=tm(e,u));var f=t.getDerivedStateFromProps,l=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";l||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&tk(e,a,n,u),gl=!1;var d=e.memoizedState;a.state=d,U3(e,n,a,i),c=e.memoizedState,o!==n||d!==c||Ts.current||gl?(typeof f=="function"&&(a_(e,t,f,n),c=e.memoizedState),(o=gl||ek(e,t,o,n,d,c,u))?(l||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,gq(r,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ao(e.type,o),a.props=u,l=e.pendingProps,d=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=Qa(c):(c=Cs(t)?Th:Li.current,c=tm(e,c));var h=t.getDerivedStateFromProps;(f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==l||d!==c)&&tk(e,a,n,c),gl=!1,d=e.memoizedState,a.state=d,U3(e,n,a,i);var y=e.memoizedState;o!==l||d!==y||Ts.current||gl?(typeof h=="function"&&(a_(e,t,h,n),y=e.memoizedState),(u=gl||ek(e,t,u,n,d,y,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return f_(r,e,t,n,s,i)}function f_(r,e,t,n,i,s){zq(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&WO(e,t,!1),gf(r,e,s);n=e.stateNode,kte.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=nm(e,r.child,null,s),e.child=nm(e,null,o,s)):Ki(r,e,o,s),e.memoizedState=n.state,i&&WO(e,t,!0),e.child}function Hq(r){var e=r.stateNode;e.pendingContext?HO(r,e.pendingContext,e.pendingContext!==e.context):e.context&&HO(r,e.context,!1),mC(r,e.containerInfo)}function ck(r,e,t,n,i){return rm(),fC(i),e.flags|=256,Ki(r,e,t,n),e.child}var l_={dehydrated:null,treeContext:null,retryLane:0};function d_(r){return{baseLanes:r,cachePool:null,transitions:null}}function Wq(r,e,t){var n=e.pendingProps,i=Br.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),cr(Br,i&1),r===null)return i_(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,r=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Uw(a,n,0,null),r=xh(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=d_(t),e.memoizedState=l_,r):_C(e,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Dte(r,e,a,n,o,i,t);if(s){s=n.fallback,a=e.mode,i=r.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=b0(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=b0(o,s):(s=xh(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=r.child.memoizedState,a=a===null?d_(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~t,e.memoizedState=l_,n}return s=r.child,r=s.sibling,n=b0(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function _C(r,e){return e=Uw({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function x8(r,e,t,n){return n!==null&&fC(n),nm(e,r.child,null,t),r=_C(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function Dte(r,e,t,n,i,s,a){if(t)return e.flags&256?(e.flags&=-257,n=s7(Error(Re(422))),x8(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Uw({mode:"visible",children:n.children},i,0,null),s=xh(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&nm(e,r.child,null,a),e.child.memoizedState=d_(a),e.memoizedState=l_,s);if(!(e.mode&1))return x8(r,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Re(419)),n=s7(s,n,void 0),x8(r,e,a,n)}if(o=(a&r.childLanes)!==0,As||o){if(n=Ln,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bf(r,i),zo(n,r,i,-1))}return IC(),n=s7(Error(Re(421))),x8(r,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=Gte.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,na=h0(i.nextSibling),sa=e,Ir=!0,ko=null,r!==null&&($a[La++]=Xu,$a[La++]=ef,$a[La++]=Ch,Xu=r.id,ef=r.overflow,Ch=e),e=_C(e,n.children),e.flags|=4096,e)}function uk(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),s_(r.return,e,t)}function a7(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function Kq(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ki(r,e,n.children,t),n=Br.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&uk(r,t,e);else if(r.tag===19)uk(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(cr(Br,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&F3(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),a7(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&F3(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}a7(e,!0,t,null,s);break;case"together":a7(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $v(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function gf(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Rh|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(Re(153));if(e.child!==null){for(r=e.child,t=b0(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=b0(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function Bte(r,e,t){switch(e.tag){case 3:Hq(e),rm();break;case 5:vq(e);break;case 1:Cs(e.type)&&k3(e);break;case 4:mC(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;cr($3,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(cr(Br,Br.current&1),e.flags|=128,null):t&e.child.childLanes?Wq(r,e,t):(cr(Br,Br.current&1),r=gf(r,e,t),r!==null?r.sibling:null);cr(Br,Br.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return Kq(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),cr(Br,Br.current),n)break;return null;case 22:case 23:return e.lanes=0,Vq(r,e,t)}return gf(r,e,t)}var Gq,h_,Qq,Zq;Gq=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};h_=function(){};Qq=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Nd(Fc.current);var s=null;switch(t){case"input":i=DA(r,i),n=DA(r,n),s=[];break;case"select":i=jr({},i,{value:void 0}),n=jr({},n,{value:void 0}),s=[];break;case"textarea":i=LA(r,i),n=LA(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=N3)}FA(t,n);var a;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(eg.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(s||(s=[]),s.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(eg.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&hr("scroll",r),s||o===c||(s=[])):(s=s||[]).push(u,c))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Zq=function(r,e,t,n){t!==n&&(e.flags|=4)};function V6(r,e){if(!Ir)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function wi(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function $te(r,e,t){var n=e.pendingProps;switch(uC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(e),null;case 1:return Cs(e.type)&&O3(),wi(e),null;case 3:return n=e.stateNode,im(),pr(Ts),pr(Li),gC(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(g8(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ko!==null&&(w_(ko),ko=null))),h_(r,e),wi(e),null;case 5:bC(e);var i=Nd(dg.current);if(t=e.type,r!==null&&e.stateNode!=null)Qq(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Re(166));return wi(e),null}if(r=Nd(Fc.current),g8(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Cc]=e,n[fg]=s,r=(e.mode&1)!==0,t){case"dialog":hr("cancel",n),hr("close",n);break;case"iframe":case"object":case"embed":hr("load",n);break;case"video":case"audio":for(i=0;i<db.length;i++)hr(db[i],n);break;case"source":hr("error",n);break;case"img":case"image":case"link":hr("error",n),hr("load",n);break;case"details":hr("toggle",n);break;case"input":gO(n,s),hr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},hr("invalid",n);break;case"textarea":xO(n,s),hr("invalid",n)}FA(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&b8(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&b8(n.textContent,o,r),i=["children",""+o]):eg.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&hr("scroll",n)}switch(t){case"input":u8(n),vO(n,s,!0);break;case"textarea":u8(n),wO(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=N3)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=_j(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[Cc]=e,r[fg]=n,Gq(r,e,!1,!1),e.stateNode=r;e:{switch(a=jA(t,n),t){case"dialog":hr("cancel",r),hr("close",r),i=n;break;case"iframe":case"object":case"embed":hr("load",r),i=n;break;case"video":case"audio":for(i=0;i<db.length;i++)hr(db[i],r);i=n;break;case"source":hr("error",r),i=n;break;case"img":case"image":case"link":hr("error",r),hr("load",r),i=n;break;case"details":hr("toggle",r),i=n;break;case"input":gO(r,n),i=DA(r,n),hr("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=jr({},n,{value:void 0}),hr("invalid",r);break;case"textarea":xO(r,n),i=LA(r,n),hr("invalid",r);break;default:i=n}FA(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?Pj(r,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sj(r,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&tg(r,c):typeof c=="number"&&tg(r,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(eg.hasOwnProperty(s)?c!=null&&s==="onScroll"&&hr("scroll",r):c!=null&&GT(r,s,c,a))}switch(t){case"input":u8(r),vO(r,n,!1);break;case"textarea":u8(r),wO(r);break;case"option":n.value!=null&&r.setAttribute("value",""+E0(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?U1(r,!!n.multiple,s,!1):n.defaultValue!=null&&U1(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=N3)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wi(e),null;case 6:if(r&&e.stateNode!=null)Zq(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Re(166));if(t=Nd(dg.current),Nd(Fc.current),g8(e)){if(n=e.stateNode,t=e.memoizedProps,n[Cc]=e,(s=n.nodeValue!==t)&&(r=sa,r!==null))switch(r.tag){case 3:b8(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&b8(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Cc]=e,e.stateNode=n}return wi(e),null;case 13:if(pr(Br),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ir&&na!==null&&e.mode&1&&!(e.flags&128))pq(),rm(),e.flags|=98560,s=!1;else if(s=g8(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(Re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[Cc]=e}else rm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wi(e),s=!1}else ko!==null&&(w_(ko),ko=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Br.current&1?vn===0&&(vn=3):IC())),e.updateQueue!==null&&(e.flags|=4),wi(e),null);case 4:return im(),h_(r,e),r===null&&cg(e.stateNode.containerInfo),wi(e),null;case 10:return hC(e.type._context),wi(e),null;case 17:return Cs(e.type)&&O3(),wi(e),null;case 19:if(pr(Br),s=e.memoizedState,s===null)return wi(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)V6(s,!1);else{if(vn!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(a=F3(r),a!==null){for(e.flags|=128,V6(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return cr(Br,Br.current&1|2),e.child}r=r.sibling}s.tail!==null&&sn()>am&&(e.flags|=128,n=!0,V6(s,!1),e.lanes=4194304)}else{if(!n)if(r=F3(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),V6(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ir)return wi(e),null}else 2*sn()-s.renderingStartTime>am&&t!==1073741824&&(e.flags|=128,n=!0,V6(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sn(),e.sibling=null,t=Br.current,cr(Br,n?t&1|2:t&1),e):(wi(e),null);case 22:case 23:return CC(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ea&1073741824&&(wi(e),e.subtreeFlags&6&&(e.flags|=8192)):wi(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function Lte(r,e){switch(uC(e),e.tag){case 1:return Cs(e.type)&&O3(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return im(),pr(Ts),pr(Li),gC(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return bC(e),null;case 13:if(pr(Br),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));rm()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return pr(Br),null;case 4:return im(),null;case 10:return hC(e.type._context),null;case 22:case 23:return CC(),null;case 24:return null;default:return null}}var w8=!1,Ri=!1,Ute=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function g1(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Gr(r,e,n)}else t.current=null}function p_(r,e,t){try{t()}catch(n){Gr(r,e,n)}}var fk=!1;function Fte(r,e){if(JA=C3,r=tq(),oC(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,u=0,f=0,l=r,d=null;t:for(;;){for(var h;l!==t||i!==0&&l.nodeType!==3||(o=a+i),l!==s||n!==0&&l.nodeType!==3||(c=a+n),l.nodeType===3&&(a+=l.nodeValue.length),(h=l.firstChild)!==null;)d=l,l=h;for(;;){if(l===r)break t;if(d===t&&++u===i&&(o=a),d===s&&++f===n&&(c=a),(h=l.nextSibling)!==null)break;l=d,d=l.parentNode}l=h}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(YA={focusedElem:r,selectionRange:t},C3=!1,Xe=e;Xe!==null;)if(e=Xe,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Xe=r;else for(;Xe!==null;){e=Xe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var p=y.memoizedProps,g=y.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?p:Ao(e.type,p),g);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(_){Gr(e,e.return,_)}if(r=e.sibling,r!==null){r.return=e.return,Xe=r;break}Xe=e.return}return y=fk,fk=!1,y}function Db(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&p_(e,t,s)}i=i.next}while(i!==n)}}function $w(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function y_(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function Jq(r){var e=r.alternate;e!==null&&(r.alternate=null,Jq(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Cc],delete e[fg],delete e[t_],delete e[Ete],delete e[Ate])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Yq(r){return r.tag===5||r.tag===3||r.tag===4}function lk(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Yq(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function m_(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=N3));else if(n!==4&&(r=r.child,r!==null))for(m_(r,e,t),r=r.sibling;r!==null;)m_(r,e,t),r=r.sibling}function b_(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(b_(r,e,t),r=r.sibling;r!==null;)b_(r,e,t),r=r.sibling}var ti=null,No=!1;function Gf(r,e,t){for(t=t.child;t!==null;)Xq(r,e,t),t=t.sibling}function Xq(r,e,t){if(Uc&&typeof Uc.onCommitFiberUnmount=="function")try{Uc.onCommitFiberUnmount(Cw,t)}catch{}switch(t.tag){case 5:Ri||g1(t,e);case 6:var n=ti,i=No;ti=null,Gf(r,e,t),ti=n,No=i,ti!==null&&(No?(r=ti,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):ti.removeChild(t.stateNode));break;case 18:ti!==null&&(No?(r=ti,t=t.stateNode,r.nodeType===8?X9(r.parentNode,t):r.nodeType===1&&X9(r,t),sg(r)):X9(ti,t.stateNode));break;case 4:n=ti,i=No,ti=t.stateNode.containerInfo,No=!0,Gf(r,e,t),ti=n,No=i;break;case 0:case 11:case 14:case 15:if(!Ri&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&p_(t,e,a),i=i.next}while(i!==n)}Gf(r,e,t);break;case 1:if(!Ri&&(g1(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){Gr(t,e,o)}Gf(r,e,t);break;case 21:Gf(r,e,t);break;case 22:t.mode&1?(Ri=(n=Ri)||t.memoizedState!==null,Gf(r,e,t),Ri=n):Gf(r,e,t);break;default:Gf(r,e,t)}}function dk(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new Ute),e.forEach(function(n){var i=Qte.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function ho(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ti=o.stateNode,No=!1;break e;case 3:ti=o.stateNode.containerInfo,No=!0;break e;case 4:ti=o.stateNode.containerInfo,No=!0;break e}o=o.return}if(ti===null)throw Error(Re(160));Xq(s,a,i),ti=null,No=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Gr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eV(e,r),e=e.sibling}function eV(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ho(e,r),ic(r),n&4){try{Db(3,r,r.return),$w(3,r)}catch(p){Gr(r,r.return,p)}try{Db(5,r,r.return)}catch(p){Gr(r,r.return,p)}}break;case 1:ho(e,r),ic(r),n&512&&t!==null&&g1(t,t.return);break;case 5:if(ho(e,r),ic(r),n&512&&t!==null&&g1(t,t.return),r.flags&32){var i=r.stateNode;try{tg(i,"")}catch(p){Gr(r,r.return,p)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=t!==null?t.memoizedProps:s,o=r.type,c=r.updateQueue;if(r.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Ej(i,s),jA(o,a);var u=jA(o,s);for(a=0;a<c.length;a+=2){var f=c[a],l=c[a+1];f==="style"?Pj(i,l):f==="dangerouslySetInnerHTML"?Sj(i,l):f==="children"?tg(i,l):GT(i,f,l,u)}switch(o){case"input":BA(i,s);break;case"textarea":Aj(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?U1(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?U1(i,!!s.multiple,s.defaultValue,!0):U1(i,!!s.multiple,s.multiple?[]:"",!1))}i[fg]=s}catch(p){Gr(r,r.return,p)}}break;case 6:if(ho(e,r),ic(r),n&4){if(r.stateNode===null)throw Error(Re(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(p){Gr(r,r.return,p)}}break;case 3:if(ho(e,r),ic(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{sg(e.containerInfo)}catch(p){Gr(r,r.return,p)}break;case 4:ho(e,r),ic(r);break;case 13:ho(e,r),ic(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(PC=sn())),n&4&&dk(r);break;case 22:if(f=t!==null&&t.memoizedState!==null,r.mode&1?(Ri=(u=Ri)||f,ho(e,r),Ri=u):ho(e,r),ic(r),n&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!f&&r.mode&1)for(Xe=r,f=r.child;f!==null;){for(l=Xe=f;Xe!==null;){switch(d=Xe,h=d.child,d.tag){case 0:case 11:case 14:case 15:Db(4,d,d.return);break;case 1:g1(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(p){Gr(n,t,p)}}break;case 5:g1(d,d.return);break;case 22:if(d.memoizedState!==null){pk(l);continue}}h!==null?(h.return=d,Xe=h):pk(l)}f=f.sibling}e:for(f=null,l=r;;){if(l.tag===5){if(f===null){f=l;try{i=l.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=l.stateNode,c=l.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Mj("display",a))}catch(p){Gr(r,r.return,p)}}}else if(l.tag===6){if(f===null)try{l.stateNode.nodeValue=u?"":l.memoizedProps}catch(p){Gr(r,r.return,p)}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}}break;case 19:ho(e,r),ic(r),n&4&&dk(r);break;case 21:break;default:ho(e,r),ic(r)}}function ic(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(Yq(t)){var n=t;break e}t=t.return}throw Error(Re(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(tg(i,""),n.flags&=-33);var s=lk(r);b_(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=lk(r);m_(r,o,a);break;default:throw Error(Re(161))}}catch(c){Gr(r,r.return,c)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function jte(r,e,t){Xe=r,tV(r)}function tV(r,e,t){for(var n=(r.mode&1)!==0;Xe!==null;){var i=Xe,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||w8;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ri;o=w8;var u=Ri;if(w8=a,(Ri=c)&&!u)for(Xe=i;Xe!==null;)a=Xe,c=a.child,a.tag===22&&a.memoizedState!==null?yk(i):c!==null?(c.return=a,Xe=c):yk(i);for(;s!==null;)Xe=s,tV(s),s=s.sibling;Xe=i,w8=o,Ri=u}hk(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xe=s):hk(r)}}function hk(r){for(;Xe!==null;){var e=Xe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ri||$w(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ri)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ao(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&JO(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}JO(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var l=f.dehydrated;l!==null&&sg(l)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}Ri||e.flags&512&&y_(e)}catch(d){Gr(e,e.return,d)}}if(e===r){Xe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function pk(r){for(;Xe!==null;){var e=Xe;if(e===r){Xe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Xe=t;break}Xe=e.return}}function yk(r){for(;Xe!==null;){var e=Xe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$w(4,e)}catch(c){Gr(e,t,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Gr(e,i,c)}}var s=e.return;try{y_(e)}catch(c){Gr(e,s,c)}break;case 5:var a=e.return;try{y_(e)}catch(c){Gr(e,a,c)}}}catch(c){Gr(e,e.return,c)}if(e===r){Xe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Xe=o;break}Xe=e.return}}var qte=Math.ceil,V3=Nf.ReactCurrentDispatcher,SC=Nf.ReactCurrentOwner,Ka=Nf.ReactCurrentBatchConfig,Ot=0,Ln=null,fn=null,oi=0,ea=0,v1=j0(0),vn=0,mg=null,Rh=0,Lw=0,MC=0,Bb=null,ws=null,PC=0,am=1/0,Ru=null,z3=!1,g_=null,y0=null,E8=!1,e0=null,H3=0,$b=0,v_=null,Lv=-1,Uv=0;function as(){return Ot&6?sn():Lv!==-1?Lv:Lv=sn()}function m0(r){return r.mode&1?Ot&2&&oi!==0?oi&-oi:Ste.transition!==null?(Uv===0&&(Uv=Uj()),Uv):(r=Qt,r!==0||(r=window.event,r=r===void 0?16:Wj(r.type)),r):1}function zo(r,e,t,n){if(50<$b)throw $b=0,v_=null,Error(Re(185));q2(r,t,n),(!(Ot&2)||r!==Ln)&&(r===Ln&&(!(Ot&2)&&(Lw|=t),vn===4&&Tl(r,oi)),Is(r,n),t===1&&Ot===0&&!(e.mode&1)&&(am=sn()+500,kw&&q0()))}function Is(r,e){var t=r.callbackNode;See(r,e);var n=T3(r,r===Ln?oi:0);if(n===0)t!==null&&_O(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&_O(t),e===1)r.tag===0?_te(mk.bind(null,r)):lq(mk.bind(null,r)),xte(function(){!(Ot&6)&&q0()}),t=null;else{switch(Fj(n)){case 1:t=XT;break;case 4:t=$j;break;case 16:t=P3;break;case 536870912:t=Lj;break;default:t=P3}t=uV(t,rV.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function rV(r,e){if(Lv=-1,Uv=0,Ot&6)throw Error(Re(327));var t=r.callbackNode;if(z1()&&r.callbackNode!==t)return null;var n=T3(r,r===Ln?oi:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=W3(r,n);else{e=n;var i=Ot;Ot|=2;var s=iV();(Ln!==r||oi!==e)&&(Ru=null,am=sn()+500,vh(r,e));do try{Hte();break}catch(o){nV(r,o)}while(!0);dC(),V3.current=s,Ot=i,fn!==null?e=0:(Ln=null,oi=0,e=vn)}if(e!==0){if(e===2&&(i=WA(r),i!==0&&(n=i,e=x_(r,i))),e===1)throw t=mg,vh(r,0),Tl(r,n),Is(r,sn()),t;if(e===6)Tl(r,n);else{if(i=r.current.alternate,!(n&30)&&!Vte(i)&&(e=W3(r,n),e===2&&(s=WA(r),s!==0&&(n=s,e=x_(r,s))),e===1))throw t=mg,vh(r,0),Tl(r,n),Is(r,sn()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Re(345));case 2:yd(r,ws,Ru);break;case 3:if(Tl(r,n),(n&130023424)===n&&(e=PC+500-sn(),10<e)){if(T3(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){as(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=e_(yd.bind(null,r,ws,Ru),e);break}yd(r,ws,Ru);break;case 4:if(Tl(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var a=31-Vo(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=sn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qte(n/1960))-n,10<n){r.timeoutHandle=e_(yd.bind(null,r,ws,Ru),n);break}yd(r,ws,Ru);break;case 5:yd(r,ws,Ru);break;default:throw Error(Re(329))}}}return Is(r,sn()),r.callbackNode===t?rV.bind(null,r):null}function x_(r,e){var t=Bb;return r.current.memoizedState.isDehydrated&&(vh(r,e).flags|=256),r=W3(r,e),r!==2&&(e=ws,ws=t,e!==null&&w_(e)),r}function w_(r){ws===null?ws=r:ws.push.apply(ws,r)}function Vte(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Wo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tl(r,e){for(e&=~MC,e&=~Lw,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Vo(e),n=1<<t;r[t]=-1,e&=~n}}function mk(r){if(Ot&6)throw Error(Re(327));z1();var e=T3(r,0);if(!(e&1))return Is(r,sn()),null;var t=W3(r,e);if(r.tag!==0&&t===2){var n=WA(r);n!==0&&(e=n,t=x_(r,n))}if(t===1)throw t=mg,vh(r,0),Tl(r,e),Is(r,sn()),t;if(t===6)throw Error(Re(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,yd(r,ws,Ru),Is(r,sn()),null}function TC(r,e){var t=Ot;Ot|=1;try{return r(e)}finally{Ot=t,Ot===0&&(am=sn()+500,kw&&q0())}}function Nh(r){e0!==null&&e0.tag===0&&!(Ot&6)&&z1();var e=Ot;Ot|=1;var t=Ka.transition,n=Qt;try{if(Ka.transition=null,Qt=1,r)return r()}finally{Qt=n,Ka.transition=t,Ot=e,!(Ot&6)&&q0()}}function CC(){ea=v1.current,pr(v1)}function vh(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,vte(t)),fn!==null)for(t=fn.return;t!==null;){var n=t;switch(uC(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&O3();break;case 3:im(),pr(Ts),pr(Li),gC();break;case 5:bC(n);break;case 4:im();break;case 13:pr(Br);break;case 19:pr(Br);break;case 10:hC(n.type._context);break;case 22:case 23:CC()}t=t.return}if(Ln=r,fn=r=b0(r.current,null),oi=ea=e,vn=0,mg=null,MC=Lw=Rh=0,ws=Bb=null,Rd!==null){for(e=0;e<Rd.length;e++)if(t=Rd[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}t.pending=n}Rd=null}return r}function nV(r,e){do{var t=fn;try{if(dC(),Dv.current=q3,j3){for(var n=Fr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}j3=!1}if(Ih=0,kn=mn=Fr=null,kb=!1,hg=0,SC.current=null,t===null||t.return===null){vn=1,mg=e,fn=null;break}e:{var s=r,a=t.return,o=t,c=e;if(e=oi,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=o,l=f.tag;if(!(f.mode&1)&&(l===0||l===11||l===15)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=nk(a);if(h!==null){h.flags&=-257,ik(h,a,o,s,e),h.mode&1&&rk(s,u,e),e=h,c=u;var y=e.updateQueue;if(y===null){var p=new Set;p.add(c),e.updateQueue=p}else y.add(c);break e}else{if(!(e&1)){rk(s,u,e),IC();break e}c=Error(Re(426))}}else if(Ir&&o.mode&1){var g=nk(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ik(g,a,o,s,e),fC(sm(c,o));break e}}s=c=sm(c,o),vn!==4&&(vn=2),Bb===null?Bb=[s]:Bb.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Fq(s,c,e);ZO(s,m);break e;case 1:o=c;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(y0===null||!y0.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=jq(s,o,e);ZO(s,_);break e}}s=s.return}while(s!==null)}aV(t)}catch(C){e=C,fn===t&&t!==null&&(fn=t=t.return);continue}break}while(!0)}function iV(){var r=V3.current;return V3.current=q3,r===null?q3:r}function IC(){(vn===0||vn===3||vn===2)&&(vn=4),Ln===null||!(Rh&268435455)&&!(Lw&268435455)||Tl(Ln,oi)}function W3(r,e){var t=Ot;Ot|=2;var n=iV();(Ln!==r||oi!==e)&&(Ru=null,vh(r,e));do try{zte();break}catch(i){nV(r,i)}while(!0);if(dC(),Ot=t,V3.current=n,fn!==null)throw Error(Re(261));return Ln=null,oi=0,vn}function zte(){for(;fn!==null;)sV(fn)}function Hte(){for(;fn!==null&&!mee();)sV(fn)}function sV(r){var e=cV(r.alternate,r,ea);r.memoizedProps=r.pendingProps,e===null?aV(r):fn=e,SC.current=null}function aV(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=Lte(t,e),t!==null){t.flags&=32767,fn=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{vn=6,fn=null;return}}else if(t=$te(t,e,ea),t!==null){fn=t;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=r}while(e!==null);vn===0&&(vn=5)}function yd(r,e,t){var n=Qt,i=Ka.transition;try{Ka.transition=null,Qt=1,Wte(r,e,t,n)}finally{Ka.transition=i,Qt=n}return null}function Wte(r,e,t,n){do z1();while(e0!==null);if(Ot&6)throw Error(Re(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Re(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(Mee(r,s),r===Ln&&(fn=Ln=null,oi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||E8||(E8=!0,uV(P3,function(){return z1(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ka.transition,Ka.transition=null;var a=Qt;Qt=1;var o=Ot;Ot|=4,SC.current=null,Fte(r,t),eV(t,r),dte(YA),C3=!!JA,YA=JA=null,r.current=t,jte(t),bee(),Ot=o,Qt=a,Ka.transition=s}else r.current=t;if(E8&&(E8=!1,e0=r,H3=i),s=r.pendingLanes,s===0&&(y0=null),xee(t.stateNode),Is(r,sn()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(z3)throw z3=!1,r=g_,g_=null,r;return H3&1&&r.tag!==0&&z1(),s=r.pendingLanes,s&1?r===v_?$b++:($b=0,v_=r):$b=0,q0(),null}function z1(){if(e0!==null){var r=Fj(H3),e=Ka.transition,t=Qt;try{if(Ka.transition=null,Qt=16>r?16:r,e0===null)var n=!1;else{if(r=e0,e0=null,H3=0,Ot&6)throw Error(Re(331));var i=Ot;for(Ot|=4,Xe=r.current;Xe!==null;){var s=Xe,a=s.child;if(Xe.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(Xe=u;Xe!==null;){var f=Xe;switch(f.tag){case 0:case 11:case 15:Db(8,f,s)}var l=f.child;if(l!==null)l.return=f,Xe=l;else for(;Xe!==null;){f=Xe;var d=f.sibling,h=f.return;if(Jq(f),f===u){Xe=null;break}if(d!==null){d.return=h,Xe=d;break}Xe=h}}}var y=s.alternate;if(y!==null){var p=y.child;if(p!==null){y.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Xe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Xe=a;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Db(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Xe=m;break e}Xe=s.return}}var v=r.current;for(Xe=v;Xe!==null;){a=Xe;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Xe=b;else e:for(a=v;Xe!==null;){if(o=Xe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$w(9,o)}}catch(C){Gr(o,o.return,C)}if(o===a){Xe=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,Xe=_;break e}Xe=o.return}}if(Ot=i,q0(),Uc&&typeof Uc.onPostCommitFiberRoot=="function")try{Uc.onPostCommitFiberRoot(Cw,r)}catch{}n=!0}return n}finally{Qt=t,Ka.transition=e}}return!1}function bk(r,e,t){e=sm(t,e),e=Fq(r,e,1),r=p0(r,e,1),e=as(),r!==null&&(q2(r,1,e),Is(r,e))}function Gr(r,e,t){if(r.tag===3)bk(r,r,t);else for(;e!==null;){if(e.tag===3){bk(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(y0===null||!y0.has(n))){r=sm(t,r),r=jq(e,r,1),e=p0(e,r,1),r=as(),e!==null&&(q2(e,1,r),Is(e,r));break}}e=e.return}}function Kte(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=as(),r.pingedLanes|=r.suspendedLanes&t,Ln===r&&(oi&t)===t&&(vn===4||vn===3&&(oi&130023424)===oi&&500>sn()-PC?vh(r,0):MC|=t),Is(r,e)}function oV(r,e){e===0&&(r.mode&1?(e=d8,d8<<=1,!(d8&130023424)&&(d8=4194304)):e=1);var t=as();r=bf(r,e),r!==null&&(q2(r,e,t),Is(r,t))}function Gte(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),oV(r,t)}function Qte(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Re(314))}n!==null&&n.delete(e),oV(r,t)}var cV;cV=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||Ts.current)As=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return As=!1,Bte(r,e,t);As=!!(r.flags&131072)}else As=!1,Ir&&e.flags&1048576&&dq(e,B3,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;$v(r,e),r=e.pendingProps;var i=tm(e,Li.current);V1(e,t),i=xC(null,e,n,r,i,t);var s=wC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cs(n)?(s=!0,k3(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yC(e),i.updater=Bw,e.stateNode=i,i._reactInternals=e,o_(e,n,r,t),e=f_(null,e,n,!0,s,t)):(e.tag=0,Ir&&s&&cC(e),Ki(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch($v(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Jte(n),r=Ao(n,r),i){case 0:e=u_(null,e,n,r,t);break e;case 1:e=ok(null,e,n,r,t);break e;case 11:e=sk(null,e,n,r,t);break e;case 14:e=ak(null,e,n,Ao(n.type,r),t);break e}throw Error(Re(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ao(n,i),u_(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ao(n,i),ok(r,e,n,i,t);case 3:e:{if(Hq(e),r===null)throw Error(Re(387));n=e.pendingProps,s=e.memoizedState,i=s.element,gq(r,e),U3(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=sm(Error(Re(423)),e),e=ck(r,e,n,t,i);break e}else if(n!==i){i=sm(Error(Re(424)),e),e=ck(r,e,n,t,i);break e}else for(na=h0(e.stateNode.containerInfo.firstChild),sa=e,Ir=!0,ko=null,t=mq(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(rm(),n===i){e=gf(r,e,t);break e}Ki(r,e,n,t)}e=e.child}return e;case 5:return vq(e),r===null&&i_(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,XA(n,i)?a=null:s!==null&&XA(n,s)&&(e.flags|=32),zq(r,e),Ki(r,e,a,t),e.child;case 6:return r===null&&i_(e),null;case 13:return Wq(r,e,t);case 4:return mC(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=nm(e,null,n,t):Ki(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ao(n,i),sk(r,e,n,i,t);case 7:return Ki(r,e,e.pendingProps,t),e.child;case 8:return Ki(r,e,e.pendingProps.children,t),e.child;case 12:return Ki(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,cr($3,n._currentValue),n._currentValue=a,s!==null)if(Wo(s.value,a)){if(s.children===i.children&&!Ts.current){e=gf(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=cf(-1,t&-t),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=t,c=s.alternate,c!==null&&(c.lanes|=t),s_(s.return,t,e),o.lanes|=t;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Re(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),s_(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ki(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,V1(e,t),i=Qa(i),n=n(i),e.flags|=1,Ki(r,e,n,t),e.child;case 14:return n=e.type,i=Ao(n,e.pendingProps),i=Ao(n.type,i),ak(r,e,n,i,t);case 15:return qq(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ao(n,i),$v(r,e),e.tag=1,Cs(n)?(r=!0,k3(e)):r=!1,V1(e,t),Uq(e,n,i),o_(e,n,i,t),f_(null,e,n,!0,r,t);case 19:return Kq(r,e,t);case 22:return Vq(r,e,t)}throw Error(Re(156,e.tag))};function uV(r,e){return Bj(r,e)}function Zte(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ha(r,e,t,n){return new Zte(r,e,t,n)}function RC(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Jte(r){if(typeof r=="function")return RC(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ZT)return 11;if(r===JT)return 14}return 2}function b0(r,e){var t=r.alternate;return t===null?(t=Ha(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Fv(r,e,t,n,i,s){var a=2;if(n=r,typeof r=="function")RC(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case u1:return xh(t.children,i,s,e);case QT:a=8,i|=8;break;case RA:return r=Ha(12,t,e,i|2),r.elementType=RA,r.lanes=s,r;case NA:return r=Ha(13,t,e,i),r.elementType=NA,r.lanes=s,r;case OA:return r=Ha(19,t,e,i),r.elementType=OA,r.lanes=s,r;case vj:return Uw(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case bj:a=10;break e;case gj:a=9;break e;case ZT:a=11;break e;case JT:a=14;break e;case bl:a=16,n=null;break e}throw Error(Re(130,r==null?r:typeof r,""))}return e=Ha(a,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function xh(r,e,t,n){return r=Ha(7,r,n,e),r.lanes=t,r}function Uw(r,e,t,n){return r=Ha(22,r,n,e),r.elementType=vj,r.lanes=t,r.stateNode={isHidden:!1},r}function o7(r,e,t){return r=Ha(6,r,null,e),r.lanes=t,r}function c7(r,e,t){return e=Ha(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function Yte(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q9(0),this.expirationTimes=q9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q9(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function NC(r,e,t,n,i,s,a,o,c){return r=new Yte(r,e,t,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ha(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},yC(s),r}function Xte(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c1,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function fV(r){if(!r)return A0;r=r._reactInternals;e:{if(pp(r)!==r||r.tag!==1)throw Error(Re(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(r.tag===1){var t=r.type;if(Cs(t))return fq(r,t,e)}return e}function lV(r,e,t,n,i,s,a,o,c){return r=NC(t,n,!0,r,i,s,a,o,c),r.context=fV(null),t=r.current,n=as(),i=m0(t),s=cf(n,i),s.callback=e??null,p0(t,s,i),r.current.lanes=i,q2(r,i,n),Is(r,n),r}function Fw(r,e,t,n){var i=e.current,s=as(),a=m0(i);return t=fV(t),e.context===null?e.context=t:e.pendingContext=t,e=cf(s,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=p0(i,e,a),r!==null&&(zo(r,i,a,s),kv(r,i,a)),a}function K3(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function gk(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function OC(r,e){gk(r,e),(r=r.alternate)&&gk(r,e)}function ere(){return null}var dV=typeof reportError=="function"?reportError:function(r){console.error(r)};function kC(r){this._internalRoot=r}jw.prototype.render=kC.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Re(409));Fw(r,e,null,null)};jw.prototype.unmount=kC.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Nh(function(){Fw(null,r,null,null)}),e[mf]=null}};function jw(r){this._internalRoot=r}jw.prototype.unstable_scheduleHydration=function(r){if(r){var e=Vj();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Pl.length&&e!==0&&e<Pl[t].priority;t++);Pl.splice(t,0,r),t===0&&Hj(r)}};function DC(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function qw(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function vk(){}function tre(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=K3(a);s.call(u)}}var a=lV(e,n,r,0,null,!1,!1,"",vk);return r._reactRootContainer=a,r[mf]=a.current,cg(r.nodeType===8?r.parentNode:r),Nh(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=K3(c);o.call(u)}}var c=NC(r,0,!1,null,null,!1,!1,"",vk);return r._reactRootContainer=c,r[mf]=c.current,cg(r.nodeType===8?r.parentNode:r),Nh(function(){Fw(e,c,t,n)}),c}function Vw(r,e,t,n,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=K3(a);o.call(c)}}Fw(e,a,r,i)}else a=tre(t,e,r,i,n);return K3(a)}jj=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=lb(e.pendingLanes);t!==0&&(eC(e,t|1),Is(e,sn()),!(Ot&6)&&(am=sn()+500,q0()))}break;case 13:Nh(function(){var n=bf(r,1);if(n!==null){var i=as();zo(n,r,1,i)}}),OC(r,1)}};tC=function(r){if(r.tag===13){var e=bf(r,134217728);if(e!==null){var t=as();zo(e,r,134217728,t)}OC(r,134217728)}};qj=function(r){if(r.tag===13){var e=m0(r),t=bf(r,e);if(t!==null){var n=as();zo(t,r,e,n)}OC(r,e)}};Vj=function(){return Qt};zj=function(r,e){var t=Qt;try{return Qt=r,e()}finally{Qt=t}};VA=function(r,e,t){switch(e){case"input":if(BA(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=Ow(n);if(!i)throw Error(Re(90));wj(n),BA(n,i)}}}break;case"textarea":Aj(r,t);break;case"select":e=t.value,e!=null&&U1(r,!!t.multiple,e,!1)}};Ij=TC;Rj=Nh;var rre={usingClientEntryPoint:!1,Events:[z2,h1,Ow,Tj,Cj,TC]},z6={findFiberByHostInstance:Id,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nre={bundleType:z6.bundleType,version:z6.version,rendererPackageName:z6.rendererPackageName,rendererConfig:z6.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nf.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=kj(r),r===null?null:r.stateNode},findFiberByHostInstance:z6.findFiberByHostInstance||ere,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var A8=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!A8.isDisabled&&A8.supportsFiber)try{Cw=A8.inject(nre),Uc=A8}catch{}}ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rre;ha.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DC(e))throw Error(Re(200));return Xte(r,e,null,t)};ha.createRoot=function(r,e){if(!DC(r))throw Error(Re(299));var t=!1,n="",i=dV;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=NC(r,1,!1,null,null,t,!1,n,i),r[mf]=e.current,cg(r.nodeType===8?r.parentNode:r),new kC(e)};ha.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Re(188)):(r=Object.keys(r).join(","),Error(Re(268,r)));return r=kj(e),r=r===null?null:r.stateNode,r};ha.flushSync=function(r){return Nh(r)};ha.hydrate=function(r,e,t){if(!qw(e))throw Error(Re(200));return Vw(null,r,e,!0,t)};ha.hydrateRoot=function(r,e,t){if(!DC(r))throw Error(Re(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",a=dV;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=lV(e,null,r,1,t??null,i,!1,s,a),r[mf]=e.current,cg(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new jw(e)};ha.render=function(r,e,t){if(!qw(e))throw Error(Re(200));return Vw(null,r,e,!1,t)};ha.unmountComponentAtNode=function(r){if(!qw(r))throw Error(Re(40));return r._reactRootContainer?(Nh(function(){Vw(null,null,r,!1,function(){r._reactRootContainer=null,r[mf]=null})}),!0):!1};ha.unstable_batchedUpdates=TC;ha.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!qw(t))throw Error(Re(200));if(r==null||r._reactInternals===void 0)throw Error(Re(38));return Vw(r,e,t,!1,n)};ha.version="18.3.1-next-f1338f8080-20240426";function hV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hV)}catch(r){console.error(r)}}hV(),ij.exports=ha;var BC=ij.exports;const ire=so(BC),BPe=rj({__proto__:null,default:ire},[BC]);var xk=BC;A3.createRoot=xk.createRoot,A3.hydrateRoot=xk.hydrateRoot;function sre(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}function are(){const r=new Map;return function(e,t){try{let i=function(a){if(n)return a;const o=r.get(e.didUrl);return o!==void 0?o:Promise.resolve(t()).then(function(c){var u;return((u=c.didResolutionMetadata)==null?void 0:u.error)!=="notFound"&&r.set(e.didUrl,c),c})},n;const s=function(){if(e.params&&e.params["no-cache"]==="true")return Promise.resolve(t()).then(function(a){return n=1,a})}();return Promise.resolve(s&&s.then?s.then(i):i(s))}catch(n){return Promise.reject(n)}}}function ore(r,e){return e()}const cre="(?:%[0-9a-fA-F]{2})",wk=`(?:[a-zA-Z0-9._-]|${cre})`,ure="([a-z0-9]+)",fre=`((?:${wk}*:)*(${wk}+))`,Ek="[a-zA-Z0-9_.:%-]",lre=`;${Ek}+=${Ek}*`,dre=`((${lre})*)`,hre="(/[^#?]*)?",pre="([?][^#]*)?",yre="(#.*)?",mre=new RegExp(`^did:${ure}:${fre}${dre}${hre}${pre}${yre}$`);function bre(r){if(r===""||!r)return null;const e=r.match(mre);if(e){const t={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:r};if(e[4]){const n=e[4].slice(1).split(";");t.params={};for(const i of n){const s=i.split("=");t.params[s[0]]=s[1]}}return e[6]&&(t.path=e[6]),e[7]&&(t.query=e[7].slice(1)),e[8]&&(t.fragment=e[8].slice(1)),t}return null}const G3={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function gre(r){return function(e,t,n){try{return Promise.resolve(sre(function(){return Promise.resolve(r(e,t,n)).then(function(i){return{...G3,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:i}})},function(i){return{...G3,didResolutionMetadata:{error:"notFound",message:i.toString()}}}))}catch(i){return Promise.reject(i)}}}class vre{constructor(e={},t={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=t.cache===!0?are():t.cache||ore,t.legacyResolvers&&Object.keys(t.legacyResolvers).map(n=>{this.registry[n]||(this.registry[n]=gre(t.legacyResolvers[n]))})}resolve(e,t={}){try{const n=this,i=bre(e);if(i===null)return Promise.resolve({...G3,didResolutionMetadata:{error:"invalidDid"}});const s=n.registry[i.method];return s?Promise.resolve(n.cache(i,()=>s(i.did,i,n,t))):Promise.resolve({...G3,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(n){return Promise.reject(n)}}}var $C={exports:{}};const xre={},wre=Object.freeze(Object.defineProperty({__proto__:null,default:xre},Symbol.toStringTag,{value:"Module"})),zw=nj(wre);var u7;$C.exports=function(e){return u7||(u7=new t0(null)),u7.generate(e)};function t0(r){this.rand=r}$C.exports.Rand=t0;t0.prototype.generate=function(e){return this._rand(e)};t0.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?t0.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?t0.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(t0.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var Ak=zw;if(typeof Ak.randomBytes!="function")throw new Error("Not supported");t0.prototype._rand=function(e){return Ak.randomBytes(e)}}catch{}var LC=$C.exports;const Ere=so(LC);var jc={},St={},yp=pV;function pV(r,e){if(!r)throw new Error(e||"Assertion failed")}pV.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var E_={exports:{}};typeof Object.create=="function"?E_.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:E_.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var cu=E_.exports,Are=yp,_re=cu;St.inherits=_re;function Sre(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function Mre(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var s=r.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):Sre(r,i)?(s=65536+((s&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}St.toArray=Mre;function Pre(r){for(var e="",t=0;t<r.length;t++)e+=mV(r[t].toString(16));return e}St.toHex=Pre;function yV(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}St.htonl=yV;function Tre(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=yV(i)),t+=bV(i.toString(16))}return t}St.toHex32=Tre;function mV(r){return r.length===1?"0"+r:r}St.zero2=mV;function bV(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}St.zero8=bV;function Cre(r,e,t,n){var i=t-e;Are(i%4===0);for(var s=new Array(i/4),a=0,o=e;a<s.length;a++,o+=4){var c;n==="big"?c=r[o]<<24|r[o+1]<<16|r[o+2]<<8|r[o+3]:c=r[o+3]<<24|r[o+2]<<16|r[o+1]<<8|r[o],s[a]=c>>>0}return s}St.join32=Cre;function Ire(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var s=r[n];e==="big"?(t[i]=s>>>24,t[i+1]=s>>>16&255,t[i+2]=s>>>8&255,t[i+3]=s&255):(t[i+3]=s>>>24,t[i+2]=s>>>16&255,t[i+1]=s>>>8&255,t[i]=s&255)}return t}St.split32=Ire;function Rre(r,e){return r>>>e|r<<32-e}St.rotr32=Rre;function Nre(r,e){return r<<e|r>>>32-e}St.rotl32=Nre;function Ore(r,e){return r+e>>>0}St.sum32=Ore;function kre(r,e,t){return r+e+t>>>0}St.sum32_3=kre;function Dre(r,e,t,n){return r+e+t+n>>>0}St.sum32_4=Dre;function Bre(r,e,t,n,i){return r+e+t+n+i>>>0}St.sum32_5=Bre;function $re(r,e,t,n){var i=r[e],s=r[e+1],a=n+s>>>0,o=(a<n?1:0)+t+i;r[e]=o>>>0,r[e+1]=a}St.sum64=$re;function Lre(r,e,t,n){var i=e+n>>>0,s=(i<e?1:0)+r+t;return s>>>0}St.sum64_hi=Lre;function Ure(r,e,t,n){var i=e+n;return i>>>0}St.sum64_lo=Ure;function Fre(r,e,t,n,i,s,a,o){var c=0,u=e;u=u+n>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+o>>>0,c+=u<o?1:0;var f=r+t+i+a+c;return f>>>0}St.sum64_4_hi=Fre;function jre(r,e,t,n,i,s,a,o){var c=e+n+s+o;return c>>>0}St.sum64_4_lo=jre;function qre(r,e,t,n,i,s,a,o,c,u){var f=0,l=e;l=l+n>>>0,f+=l<e?1:0,l=l+s>>>0,f+=l<s?1:0,l=l+o>>>0,f+=l<o?1:0,l=l+u>>>0,f+=l<u?1:0;var d=r+t+i+a+c+f;return d>>>0}St.sum64_5_hi=qre;function Vre(r,e,t,n,i,s,a,o,c,u){var f=e+n+s+o+u;return f>>>0}St.sum64_5_lo=Vre;function zre(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}St.rotr64_hi=zre;function Hre(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}St.rotr64_lo=Hre;function Wre(r,e,t){return r>>>t}St.shr64_hi=Wre;function Kre(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}St.shr64_lo=Kre;var Ym={},_k=St,Gre=yp;function Hw(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ym.BlockHash=Hw;Hw.prototype.update=function(e,t){if(e=_k.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=_k.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Hw.prototype.digest=function(e){return this.update(this._pad()),Gre(this.pending===null),this._digest(e)};Hw.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i};var Xm={},uu={},Qre=St,qc=Qre.rotr32;function Zre(r,e,t,n){if(r===0)return gV(e,t,n);if(r===1||r===3)return xV(e,t,n);if(r===2)return vV(e,t,n)}uu.ft_1=Zre;function gV(r,e,t){return r&e^~r&t}uu.ch32=gV;function vV(r,e,t){return r&e^r&t^e&t}uu.maj32=vV;function xV(r,e,t){return r^e^t}uu.p32=xV;function Jre(r){return qc(r,2)^qc(r,13)^qc(r,22)}uu.s0_256=Jre;function Yre(r){return qc(r,6)^qc(r,11)^qc(r,25)}uu.s1_256=Yre;function Xre(r){return qc(r,7)^qc(r,18)^r>>>3}uu.g0_256=Xre;function ene(r){return qc(r,17)^qc(r,19)^r>>>10}uu.g1_256=ene;var om=St,tne=Ym,rne=uu,f7=om.rotl32,H6=om.sum32,nne=om.sum32_5,ine=rne.ft_1,wV=tne.BlockHash,sne=[1518500249,1859775393,2400959708,3395469782];function Jc(){if(!(this instanceof Jc))return new Jc;wV.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}om.inherits(Jc,wV);var ane=Jc;Jc.blockSize=512;Jc.outSize=160;Jc.hmacStrength=80;Jc.padLength=64;Jc.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=f7(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],a=this.h[1],o=this.h[2],c=this.h[3],u=this.h[4];for(i=0;i<n.length;i++){var f=~~(i/20),l=nne(f7(s,5),ine(f,a,o,c),u,n[i],sne[f]);u=c,c=o,o=f7(a,30),a=s,s=l}this.h[0]=H6(this.h[0],s),this.h[1]=H6(this.h[1],a),this.h[2]=H6(this.h[2],o),this.h[3]=H6(this.h[3],c),this.h[4]=H6(this.h[4],u)};Jc.prototype._digest=function(e){return e==="hex"?om.toHex32(this.h,"big"):om.split32(this.h,"big")};var cm=St,one=Ym,e6=uu,cne=yp,po=cm.sum32,une=cm.sum32_4,fne=cm.sum32_5,lne=e6.ch32,dne=e6.maj32,hne=e6.s0_256,pne=e6.s1_256,yne=e6.g0_256,mne=e6.g1_256,EV=one.BlockHash,bne=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Yc(){if(!(this instanceof Yc))return new Yc;EV.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=bne,this.W=new Array(64)}cm.inherits(Yc,EV);var AV=Yc;Yc.blockSize=512;Yc.outSize=256;Yc.hmacStrength=192;Yc.padLength=64;Yc.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=une(mne(n[i-2]),n[i-7],yne(n[i-15]),n[i-16]);var s=this.h[0],a=this.h[1],o=this.h[2],c=this.h[3],u=this.h[4],f=this.h[5],l=this.h[6],d=this.h[7];for(cne(this.k.length===n.length),i=0;i<n.length;i++){var h=fne(d,pne(u),lne(u,f,l),this.k[i],n[i]),y=po(hne(s),dne(s,a,o));d=l,l=f,f=u,u=po(c,h),c=o,o=a,a=s,s=po(h,y)}this.h[0]=po(this.h[0],s),this.h[1]=po(this.h[1],a),this.h[2]=po(this.h[2],o),this.h[3]=po(this.h[3],c),this.h[4]=po(this.h[4],u),this.h[5]=po(this.h[5],f),this.h[6]=po(this.h[6],l),this.h[7]=po(this.h[7],d)};Yc.prototype._digest=function(e){return e==="hex"?cm.toHex32(this.h,"big"):cm.split32(this.h,"big")};var A_=St,_V=AV;function vf(){if(!(this instanceof vf))return new vf;_V.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}A_.inherits(vf,_V);var gne=vf;vf.blockSize=512;vf.outSize=224;vf.hmacStrength=192;vf.padLength=64;vf.prototype._digest=function(e){return e==="hex"?A_.toHex32(this.h.slice(0,7),"big"):A_.split32(this.h.slice(0,7),"big")};var Ns=St,vne=Ym,xne=yp,Vc=Ns.rotr64_hi,zc=Ns.rotr64_lo,SV=Ns.shr64_hi,MV=Ns.shr64_lo,Qf=Ns.sum64,l7=Ns.sum64_hi,d7=Ns.sum64_lo,wne=Ns.sum64_4_hi,Ene=Ns.sum64_4_lo,Ane=Ns.sum64_5_hi,_ne=Ns.sum64_5_lo,PV=vne.BlockHash,Sne=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ko(){if(!(this instanceof Ko))return new Ko;PV.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Sne,this.W=new Array(160)}Ns.inherits(Ko,PV);var TV=Ko;Ko.blockSize=1024;Ko.outSize=512;Ko.hmacStrength=192;Ko.padLength=128;Ko.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var s=Bne(n[i-4],n[i-3]),a=$ne(n[i-4],n[i-3]),o=n[i-14],c=n[i-13],u=kne(n[i-30],n[i-29]),f=Dne(n[i-30],n[i-29]),l=n[i-32],d=n[i-31];n[i]=wne(s,a,o,c,u,f,l,d),n[i+1]=Ene(s,a,o,c,u,f,l,d)}};Ko.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],l=this.h[7],d=this.h[8],h=this.h[9],y=this.h[10],p=this.h[11],g=this.h[12],m=this.h[13],v=this.h[14],b=this.h[15];xne(this.k.length===n.length);for(var _=0;_<n.length;_+=2){var C=v,N=b,x=Nne(d,h),I=One(d,h),$=Mne(d,h,y,p,g),j=Pne(d,h,y,p,g,m),O=this.k[_],E=this.k[_+1],S=n[_],A=n[_+1],w=Ane(C,N,x,I,$,j,O,E,S,A),P=_ne(C,N,x,I,$,j,O,E,S,A);C=Ine(i,s),N=Rne(i,s),x=Tne(i,s,a,o,c),I=Cne(i,s,a,o,c,u);var k=l7(C,N,x,I),D=d7(C,N,x,I);v=g,b=m,g=y,m=p,y=d,p=h,d=l7(f,l,w,P),h=d7(l,l,w,P),f=c,l=u,c=a,u=o,a=i,o=s,i=l7(w,P,k,D),s=d7(w,P,k,D)}Qf(this.h,0,i,s),Qf(this.h,2,a,o),Qf(this.h,4,c,u),Qf(this.h,6,f,l),Qf(this.h,8,d,h),Qf(this.h,10,y,p),Qf(this.h,12,g,m),Qf(this.h,14,v,b)};Ko.prototype._digest=function(e){return e==="hex"?Ns.toHex32(this.h,"big"):Ns.split32(this.h,"big")};function Mne(r,e,t,n,i){var s=r&t^~r&i;return s<0&&(s+=4294967296),s}function Pne(r,e,t,n,i,s){var a=e&n^~e&s;return a<0&&(a+=4294967296),a}function Tne(r,e,t,n,i){var s=r&t^r&i^t&i;return s<0&&(s+=4294967296),s}function Cne(r,e,t,n,i,s){var a=e&n^e&s^n&s;return a<0&&(a+=4294967296),a}function Ine(r,e){var t=Vc(r,e,28),n=Vc(e,r,2),i=Vc(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Rne(r,e){var t=zc(r,e,28),n=zc(e,r,2),i=zc(e,r,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Nne(r,e){var t=Vc(r,e,14),n=Vc(r,e,18),i=Vc(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function One(r,e){var t=zc(r,e,14),n=zc(r,e,18),i=zc(e,r,9),s=t^n^i;return s<0&&(s+=4294967296),s}function kne(r,e){var t=Vc(r,e,1),n=Vc(r,e,8),i=SV(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Dne(r,e){var t=zc(r,e,1),n=zc(r,e,8),i=MV(r,e,7),s=t^n^i;return s<0&&(s+=4294967296),s}function Bne(r,e){var t=Vc(r,e,19),n=Vc(e,r,29),i=SV(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}function $ne(r,e){var t=zc(r,e,19),n=zc(e,r,29),i=MV(r,e,6),s=t^n^i;return s<0&&(s+=4294967296),s}var __=St,CV=TV;function xf(){if(!(this instanceof xf))return new xf;CV.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}__.inherits(xf,CV);var Lne=xf;xf.blockSize=1024;xf.outSize=384;xf.hmacStrength=192;xf.padLength=128;xf.prototype._digest=function(e){return e==="hex"?__.toHex32(this.h.slice(0,12),"big"):__.split32(this.h.slice(0,12),"big")};Xm.sha1=ane;Xm.sha224=gne;Xm.sha256=AV;Xm.sha384=Lne;Xm.sha512=TV;var IV={},Oh=St,Une=Ym,_8=Oh.rotl32,Sk=Oh.sum32,W6=Oh.sum32_3,Mk=Oh.sum32_4,RV=Une.BlockHash;function Xc(){if(!(this instanceof Xc))return new Xc;RV.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Oh.inherits(Xc,RV);IV.ripemd160=Xc;Xc.blockSize=512;Xc.outSize=160;Xc.hmacStrength=192;Xc.padLength=64;Xc.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],c=n,u=i,f=s,l=a,d=o,h=0;h<80;h++){var y=Sk(_8(Mk(n,Pk(h,i,s,a),e[qne[h]+t],Fne(h)),zne[h]),o);n=o,o=a,a=_8(s,10),s=i,i=y,y=Sk(_8(Mk(c,Pk(79-h,u,f,l),e[Vne[h]+t],jne(h)),Hne[h]),d),c=d,d=l,l=_8(f,10),f=u,u=y}y=W6(this.h[1],s,l),this.h[1]=W6(this.h[2],a,d),this.h[2]=W6(this.h[3],o,c),this.h[3]=W6(this.h[4],n,u),this.h[4]=W6(this.h[0],i,f),this.h[0]=y};Xc.prototype._digest=function(e){return e==="hex"?Oh.toHex32(this.h,"little"):Oh.split32(this.h,"little")};function Pk(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function Fne(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function jne(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var qne=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Vne=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],zne=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Hne=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Wne=St,Kne=yp;function um(r,e,t){if(!(this instanceof um))return new um(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(Wne.toArray(e,t))}var Gne=um;um.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Kne(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};um.prototype.update=function(e,t){return this.inner.update(e,t),this};um.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=St,e.common=Ym,e.sha=Xm,e.ripemd=IV,e.hmac=Gne,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(jc);var UC={exports:{}};UC.exports;(function(r){(function(e,t){function n(O,E){if(!O)throw new Error(E||"Assertion failed")}function i(O,E){O.super_=E;var S=function(){};S.prototype=E.prototype,O.prototype=new S,O.prototype.constructor=O}function s(O,E,S){if(s.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&((E==="le"||E==="be")&&(S=E,E=10),this._init(O||0,E||10,S||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=zw.Buffer}catch{}s.isBN=function(E){return E instanceof s?!0:E!==null&&typeof E=="object"&&E.constructor.wordSize===s.wordSize&&Array.isArray(E.words)},s.max=function(E,S){return E.cmp(S)>0?E:S},s.min=function(E,S){return E.cmp(S)<0?E:S},s.prototype._init=function(E,S,A){if(typeof E=="number")return this._initNumber(E,S,A);if(typeof E=="object")return this._initArray(E,S,A);S==="hex"&&(S=16),n(S===(S|0)&&S>=2&&S<=36),E=E.toString().replace(/\s+/g,"");var w=0;E[0]==="-"&&(w++,this.negative=1),w<E.length&&(S===16?this._parseHex(E,w,A):(this._parseBase(E,S,w),A==="le"&&this._initArray(this.toArray(),S,A)))},s.prototype._initNumber=function(E,S,A){E<0&&(this.negative=1,E=-E),E<67108864?(this.words=[E&67108863],this.length=1):E<4503599627370496?(this.words=[E&67108863,E/67108864&67108863],this.length=2):(n(E<9007199254740992),this.words=[E&67108863,E/67108864&67108863,1],this.length=3),A==="le"&&this._initArray(this.toArray(),S,A)},s.prototype._initArray=function(E,S,A){if(n(typeof E.length=="number"),E.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(E.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var P,k,D=0;if(A==="be")for(w=E.length-1,P=0;w>=0;w-=3)k=E[w]|E[w-1]<<8|E[w-2]<<16,this.words[P]|=k<<D&67108863,this.words[P+1]=k>>>26-D&67108863,D+=24,D>=26&&(D-=26,P++);else if(A==="le")for(w=0,P=0;w<E.length;w+=3)k=E[w]|E[w+1]<<8|E[w+2]<<16,this.words[P]|=k<<D&67108863,this.words[P+1]=k>>>26-D&67108863,D+=24,D>=26&&(D-=26,P++);return this.strip()};function o(O,E){var S=O.charCodeAt(E);return S>=65&&S<=70?S-55:S>=97&&S<=102?S-87:S-48&15}function c(O,E,S){var A=o(O,S);return S-1>=E&&(A|=o(O,S-1)<<4),A}s.prototype._parseHex=function(E,S,A){this.length=Math.ceil((E.length-S)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var P=0,k=0,D;if(A==="be")for(w=E.length-1;w>=S;w-=2)D=c(E,S,w)<<P,this.words[k]|=D&67108863,P>=18?(P-=18,k+=1,this.words[k]|=D>>>26):P+=8;else{var T=E.length-S;for(w=T%2===0?S+1:S;w<E.length;w+=2)D=c(E,S,w)<<P,this.words[k]|=D&67108863,P>=18?(P-=18,k+=1,this.words[k]|=D>>>26):P+=8}this.strip()};function u(O,E,S,A){for(var w=0,P=Math.min(O.length,S),k=E;k<P;k++){var D=O.charCodeAt(k)-48;w*=A,D>=49?w+=D-49+10:D>=17?w+=D-17+10:w+=D}return w}s.prototype._parseBase=function(E,S,A){this.words=[0],this.length=1;for(var w=0,P=1;P<=67108863;P*=S)w++;w--,P=P/S|0;for(var k=E.length-A,D=k%w,T=Math.min(k,k-D)+A,M=0,L=A;L<T;L+=w)M=u(E,L,L+w,S),this.imuln(P),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(D!==0){var K=1;for(M=u(E,L,E.length,S),L=0;L<D;L++)K*=S;this.imuln(K),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this.strip()},s.prototype.copy=function(E){E.words=new Array(this.length);for(var S=0;S<this.length;S++)E.words[S]=this.words[S];E.length=this.length,E.negative=this.negative,E.red=this.red},s.prototype.clone=function(){var E=new s(null);return this.copy(E),E},s.prototype._expand=function(E){for(;this.length<E;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(E,S){E=E||10,S=S|0||1;var A;if(E===16||E==="hex"){A="";for(var w=0,P=0,k=0;k<this.length;k++){var D=this.words[k],T=((D<<w|P)&16777215).toString(16);P=D>>>24-w&16777215,w+=2,w>=26&&(w-=26,k--),P!==0||k!==this.length-1?A=f[6-T.length]+T+A:A=T+A}for(P!==0&&(A=P.toString(16)+A);A.length%S!==0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}if(E===(E|0)&&E>=2&&E<=36){var M=l[E],L=d[E];A="";var K=this.clone();for(K.negative=0;!K.isZero();){var Y=K.modn(L).toString(E);K=K.idivn(L),K.isZero()?A=Y+A:A=f[M-Y.length]+Y+A}for(this.isZero()&&(A="0"+A);A.length%S!==0;)A="0"+A;return this.negative!==0&&(A="-"+A),A}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var E=this.words[0];return this.length===2?E+=this.words[1]*67108864:this.length===3&&this.words[2]===1?E+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-E:E},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(E,S){return n(typeof a<"u"),this.toArrayLike(a,E,S)},s.prototype.toArray=function(E,S){return this.toArrayLike(Array,E,S)},s.prototype.toArrayLike=function(E,S,A){var w=this.byteLength(),P=A||Math.max(1,w);n(w<=P,"byte array longer than desired length"),n(P>0,"Requested array length <= 0"),this.strip();var k=S==="le",D=new E(P),T,M,L=this.clone();if(k){for(M=0;!L.isZero();M++)T=L.andln(255),L.iushrn(8),D[M]=T;for(;M<P;M++)D[M]=0}else{for(M=0;M<P-w;M++)D[M]=0;for(M=0;!L.isZero();M++)T=L.andln(255),L.iushrn(8),D[P-M-1]=T}return D},Math.clz32?s.prototype._countBits=function(E){return 32-Math.clz32(E)}:s.prototype._countBits=function(E){var S=E,A=0;return S>=4096&&(A+=13,S>>>=13),S>=64&&(A+=7,S>>>=7),S>=8&&(A+=4,S>>>=4),S>=2&&(A+=2,S>>>=2),A+S},s.prototype._zeroBits=function(E){if(E===0)return 26;var S=E,A=0;return S&8191||(A+=13,S>>>=13),S&127||(A+=7,S>>>=7),S&15||(A+=4,S>>>=4),S&3||(A+=2,S>>>=2),S&1||A++,A},s.prototype.bitLength=function(){var E=this.words[this.length-1],S=this._countBits(E);return(this.length-1)*26+S};function h(O){for(var E=new Array(O.bitLength()),S=0;S<E.length;S++){var A=S/26|0,w=S%26;E[S]=(O.words[A]&1<<w)>>>w}return E}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var E=0,S=0;S<this.length;S++){var A=this._zeroBits(this.words[S]);if(E+=A,A!==26)break}return E},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(E){return this.negative!==0?this.abs().inotn(E).iaddn(1):this.clone()},s.prototype.fromTwos=function(E){return this.testn(E-1)?this.notn(E).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(E){for(;this.length<E.length;)this.words[this.length++]=0;for(var S=0;S<E.length;S++)this.words[S]=this.words[S]|E.words[S];return this.strip()},s.prototype.ior=function(E){return n((this.negative|E.negative)===0),this.iuor(E)},s.prototype.or=function(E){return this.length>E.length?this.clone().ior(E):E.clone().ior(this)},s.prototype.uor=function(E){return this.length>E.length?this.clone().iuor(E):E.clone().iuor(this)},s.prototype.iuand=function(E){var S;this.length>E.length?S=E:S=this;for(var A=0;A<S.length;A++)this.words[A]=this.words[A]&E.words[A];return this.length=S.length,this.strip()},s.prototype.iand=function(E){return n((this.negative|E.negative)===0),this.iuand(E)},s.prototype.and=function(E){return this.length>E.length?this.clone().iand(E):E.clone().iand(this)},s.prototype.uand=function(E){return this.length>E.length?this.clone().iuand(E):E.clone().iuand(this)},s.prototype.iuxor=function(E){var S,A;this.length>E.length?(S=this,A=E):(S=E,A=this);for(var w=0;w<A.length;w++)this.words[w]=S.words[w]^A.words[w];if(this!==S)for(;w<S.length;w++)this.words[w]=S.words[w];return this.length=S.length,this.strip()},s.prototype.ixor=function(E){return n((this.negative|E.negative)===0),this.iuxor(E)},s.prototype.xor=function(E){return this.length>E.length?this.clone().ixor(E):E.clone().ixor(this)},s.prototype.uxor=function(E){return this.length>E.length?this.clone().iuxor(E):E.clone().iuxor(this)},s.prototype.inotn=function(E){n(typeof E=="number"&&E>=0);var S=Math.ceil(E/26)|0,A=E%26;this._expand(S),A>0&&S--;for(var w=0;w<S;w++)this.words[w]=~this.words[w]&67108863;return A>0&&(this.words[w]=~this.words[w]&67108863>>26-A),this.strip()},s.prototype.notn=function(E){return this.clone().inotn(E)},s.prototype.setn=function(E,S){n(typeof E=="number"&&E>=0);var A=E/26|0,w=E%26;return this._expand(A+1),S?this.words[A]=this.words[A]|1<<w:this.words[A]=this.words[A]&~(1<<w),this.strip()},s.prototype.iadd=function(E){var S;if(this.negative!==0&&E.negative===0)return this.negative=0,S=this.isub(E),this.negative^=1,this._normSign();if(this.negative===0&&E.negative!==0)return E.negative=0,S=this.isub(E),E.negative=1,S._normSign();var A,w;this.length>E.length?(A=this,w=E):(A=E,w=this);for(var P=0,k=0;k<w.length;k++)S=(A.words[k]|0)+(w.words[k]|0)+P,this.words[k]=S&67108863,P=S>>>26;for(;P!==0&&k<A.length;k++)S=(A.words[k]|0)+P,this.words[k]=S&67108863,P=S>>>26;if(this.length=A.length,P!==0)this.words[this.length]=P,this.length++;else if(A!==this)for(;k<A.length;k++)this.words[k]=A.words[k];return this},s.prototype.add=function(E){var S;return E.negative!==0&&this.negative===0?(E.negative=0,S=this.sub(E),E.negative^=1,S):E.negative===0&&this.negative!==0?(this.negative=0,S=E.sub(this),this.negative=1,S):this.length>E.length?this.clone().iadd(E):E.clone().iadd(this)},s.prototype.isub=function(E){if(E.negative!==0){E.negative=0;var S=this.iadd(E);return E.negative=1,S._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(E),this.negative=1,this._normSign();var A=this.cmp(E);if(A===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,P;A>0?(w=this,P=E):(w=E,P=this);for(var k=0,D=0;D<P.length;D++)S=(w.words[D]|0)-(P.words[D]|0)+k,k=S>>26,this.words[D]=S&67108863;for(;k!==0&&D<w.length;D++)S=(w.words[D]|0)+k,k=S>>26,this.words[D]=S&67108863;if(k===0&&D<w.length&&w!==this)for(;D<w.length;D++)this.words[D]=w.words[D];return this.length=Math.max(this.length,D),w!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(E){return this.clone().isub(E)};function y(O,E,S){S.negative=E.negative^O.negative;var A=O.length+E.length|0;S.length=A,A=A-1|0;var w=O.words[0]|0,P=E.words[0]|0,k=w*P,D=k&67108863,T=k/67108864|0;S.words[0]=D;for(var M=1;M<A;M++){for(var L=T>>>26,K=T&67108863,Y=Math.min(M,E.length-1),re=Math.max(0,M-O.length+1);re<=Y;re++){var ne=M-re|0;w=O.words[ne]|0,P=E.words[re]|0,k=w*P+K,L+=k/67108864|0,K=k&67108863}S.words[M]=K|0,T=L|0}return T!==0?S.words[M]=T|0:S.length--,S.strip()}var p=function(E,S,A){var w=E.words,P=S.words,k=A.words,D=0,T,M,L,K=w[0]|0,Y=K&8191,re=K>>>13,ne=w[1]|0,ae=ne&8191,ie=ne>>>13,fe=w[2]|0,oe=fe&8191,ce=fe>>>13,xe=w[3]|0,ge=xe&8191,me=xe>>>13,Le=w[4]|0,Oe=Le&8191,Ue=Le>>>13,te=w[5]|0,J=te&8191,se=te>>>13,be=w[6]|0,pe=be&8191,he=be>>>13,Te=w[7]|0,_e=Te&8191,ke=Te>>>13,tt=w[8]|0,V=tt&8191,R=tt>>>13,B=w[9]|0,W=B&8191,z=B>>>13,G=P[0]|0,Z=G&8191,de=G>>>13,Pe=P[1]|0,Ve=Pe&8191,Qe=Pe>>>13,ze=P[2]|0,Se=ze&8191,Ne=ze>>>13,We=P[3]|0,Be=We&8191,et=We>>>13,Et=P[4]|0,ct=Et&8191,vt=Et>>>13,fo=P[5]|0,qt=fo&8191,sr=fo>>>13,Cp=P[6]|0,vr=Cp&8191,xr=Cp>>>13,Ip=P[7]|0,ar=Ip&8191,or=Ip>>>13,ga=P[8]|0,wr=ga&8191,Er=ga>>>13,Rp=P[9]|0,Ar=Rp&8191,_r=Rp>>>13;A.negative=E.negative^S.negative,A.length=19,T=Math.imul(Y,Z),M=Math.imul(Y,de),M=M+Math.imul(re,Z)|0,L=Math.imul(re,de);var qi=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(qi>>>26)|0,qi&=67108863,T=Math.imul(ae,Z),M=Math.imul(ae,de),M=M+Math.imul(ie,Z)|0,L=Math.imul(ie,de),T=T+Math.imul(Y,Ve)|0,M=M+Math.imul(Y,Qe)|0,M=M+Math.imul(re,Ve)|0,L=L+Math.imul(re,Qe)|0;var Z0=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(Z0>>>26)|0,Z0&=67108863,T=Math.imul(oe,Z),M=Math.imul(oe,de),M=M+Math.imul(ce,Z)|0,L=Math.imul(ce,de),T=T+Math.imul(ae,Ve)|0,M=M+Math.imul(ae,Qe)|0,M=M+Math.imul(ie,Ve)|0,L=L+Math.imul(ie,Qe)|0,T=T+Math.imul(Y,Se)|0,M=M+Math.imul(Y,Ne)|0,M=M+Math.imul(re,Se)|0,L=L+Math.imul(re,Ne)|0;var J0=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(J0>>>26)|0,J0&=67108863,T=Math.imul(ge,Z),M=Math.imul(ge,de),M=M+Math.imul(me,Z)|0,L=Math.imul(me,de),T=T+Math.imul(oe,Ve)|0,M=M+Math.imul(oe,Qe)|0,M=M+Math.imul(ce,Ve)|0,L=L+Math.imul(ce,Qe)|0,T=T+Math.imul(ae,Se)|0,M=M+Math.imul(ae,Ne)|0,M=M+Math.imul(ie,Se)|0,L=L+Math.imul(ie,Ne)|0,T=T+Math.imul(Y,Be)|0,M=M+Math.imul(Y,et)|0,M=M+Math.imul(re,Be)|0,L=L+Math.imul(re,et)|0;var Y0=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(Y0>>>26)|0,Y0&=67108863,T=Math.imul(Oe,Z),M=Math.imul(Oe,de),M=M+Math.imul(Ue,Z)|0,L=Math.imul(Ue,de),T=T+Math.imul(ge,Ve)|0,M=M+Math.imul(ge,Qe)|0,M=M+Math.imul(me,Ve)|0,L=L+Math.imul(me,Qe)|0,T=T+Math.imul(oe,Se)|0,M=M+Math.imul(oe,Ne)|0,M=M+Math.imul(ce,Se)|0,L=L+Math.imul(ce,Ne)|0,T=T+Math.imul(ae,Be)|0,M=M+Math.imul(ae,et)|0,M=M+Math.imul(ie,Be)|0,L=L+Math.imul(ie,et)|0,T=T+Math.imul(Y,ct)|0,M=M+Math.imul(Y,vt)|0,M=M+Math.imul(re,ct)|0,L=L+Math.imul(re,vt)|0;var X0=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(X0>>>26)|0,X0&=67108863,T=Math.imul(J,Z),M=Math.imul(J,de),M=M+Math.imul(se,Z)|0,L=Math.imul(se,de),T=T+Math.imul(Oe,Ve)|0,M=M+Math.imul(Oe,Qe)|0,M=M+Math.imul(Ue,Ve)|0,L=L+Math.imul(Ue,Qe)|0,T=T+Math.imul(ge,Se)|0,M=M+Math.imul(ge,Ne)|0,M=M+Math.imul(me,Se)|0,L=L+Math.imul(me,Ne)|0,T=T+Math.imul(oe,Be)|0,M=M+Math.imul(oe,et)|0,M=M+Math.imul(ce,Be)|0,L=L+Math.imul(ce,et)|0,T=T+Math.imul(ae,ct)|0,M=M+Math.imul(ae,vt)|0,M=M+Math.imul(ie,ct)|0,L=L+Math.imul(ie,vt)|0,T=T+Math.imul(Y,qt)|0,M=M+Math.imul(Y,sr)|0,M=M+Math.imul(re,qt)|0,L=L+Math.imul(re,sr)|0;var ed=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(ed>>>26)|0,ed&=67108863,T=Math.imul(pe,Z),M=Math.imul(pe,de),M=M+Math.imul(he,Z)|0,L=Math.imul(he,de),T=T+Math.imul(J,Ve)|0,M=M+Math.imul(J,Qe)|0,M=M+Math.imul(se,Ve)|0,L=L+Math.imul(se,Qe)|0,T=T+Math.imul(Oe,Se)|0,M=M+Math.imul(Oe,Ne)|0,M=M+Math.imul(Ue,Se)|0,L=L+Math.imul(Ue,Ne)|0,T=T+Math.imul(ge,Be)|0,M=M+Math.imul(ge,et)|0,M=M+Math.imul(me,Be)|0,L=L+Math.imul(me,et)|0,T=T+Math.imul(oe,ct)|0,M=M+Math.imul(oe,vt)|0,M=M+Math.imul(ce,ct)|0,L=L+Math.imul(ce,vt)|0,T=T+Math.imul(ae,qt)|0,M=M+Math.imul(ae,sr)|0,M=M+Math.imul(ie,qt)|0,L=L+Math.imul(ie,sr)|0,T=T+Math.imul(Y,vr)|0,M=M+Math.imul(Y,xr)|0,M=M+Math.imul(re,vr)|0,L=L+Math.imul(re,xr)|0;var js=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(js>>>26)|0,js&=67108863,T=Math.imul(_e,Z),M=Math.imul(_e,de),M=M+Math.imul(ke,Z)|0,L=Math.imul(ke,de),T=T+Math.imul(pe,Ve)|0,M=M+Math.imul(pe,Qe)|0,M=M+Math.imul(he,Ve)|0,L=L+Math.imul(he,Qe)|0,T=T+Math.imul(J,Se)|0,M=M+Math.imul(J,Ne)|0,M=M+Math.imul(se,Se)|0,L=L+Math.imul(se,Ne)|0,T=T+Math.imul(Oe,Be)|0,M=M+Math.imul(Oe,et)|0,M=M+Math.imul(Ue,Be)|0,L=L+Math.imul(Ue,et)|0,T=T+Math.imul(ge,ct)|0,M=M+Math.imul(ge,vt)|0,M=M+Math.imul(me,ct)|0,L=L+Math.imul(me,vt)|0,T=T+Math.imul(oe,qt)|0,M=M+Math.imul(oe,sr)|0,M=M+Math.imul(ce,qt)|0,L=L+Math.imul(ce,sr)|0,T=T+Math.imul(ae,vr)|0,M=M+Math.imul(ae,xr)|0,M=M+Math.imul(ie,vr)|0,L=L+Math.imul(ie,xr)|0,T=T+Math.imul(Y,ar)|0,M=M+Math.imul(Y,or)|0,M=M+Math.imul(re,ar)|0,L=L+Math.imul(re,or)|0;var ps=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(ps>>>26)|0,ps&=67108863,T=Math.imul(V,Z),M=Math.imul(V,de),M=M+Math.imul(R,Z)|0,L=Math.imul(R,de),T=T+Math.imul(_e,Ve)|0,M=M+Math.imul(_e,Qe)|0,M=M+Math.imul(ke,Ve)|0,L=L+Math.imul(ke,Qe)|0,T=T+Math.imul(pe,Se)|0,M=M+Math.imul(pe,Ne)|0,M=M+Math.imul(he,Se)|0,L=L+Math.imul(he,Ne)|0,T=T+Math.imul(J,Be)|0,M=M+Math.imul(J,et)|0,M=M+Math.imul(se,Be)|0,L=L+Math.imul(se,et)|0,T=T+Math.imul(Oe,ct)|0,M=M+Math.imul(Oe,vt)|0,M=M+Math.imul(Ue,ct)|0,L=L+Math.imul(Ue,vt)|0,T=T+Math.imul(ge,qt)|0,M=M+Math.imul(ge,sr)|0,M=M+Math.imul(me,qt)|0,L=L+Math.imul(me,sr)|0,T=T+Math.imul(oe,vr)|0,M=M+Math.imul(oe,xr)|0,M=M+Math.imul(ce,vr)|0,L=L+Math.imul(ce,xr)|0,T=T+Math.imul(ae,ar)|0,M=M+Math.imul(ae,or)|0,M=M+Math.imul(ie,ar)|0,L=L+Math.imul(ie,or)|0,T=T+Math.imul(Y,wr)|0,M=M+Math.imul(Y,Er)|0,M=M+Math.imul(re,wr)|0,L=L+Math.imul(re,Er)|0;var Me=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(Me>>>26)|0,Me&=67108863,T=Math.imul(W,Z),M=Math.imul(W,de),M=M+Math.imul(z,Z)|0,L=Math.imul(z,de),T=T+Math.imul(V,Ve)|0,M=M+Math.imul(V,Qe)|0,M=M+Math.imul(R,Ve)|0,L=L+Math.imul(R,Qe)|0,T=T+Math.imul(_e,Se)|0,M=M+Math.imul(_e,Ne)|0,M=M+Math.imul(ke,Se)|0,L=L+Math.imul(ke,Ne)|0,T=T+Math.imul(pe,Be)|0,M=M+Math.imul(pe,et)|0,M=M+Math.imul(he,Be)|0,L=L+Math.imul(he,et)|0,T=T+Math.imul(J,ct)|0,M=M+Math.imul(J,vt)|0,M=M+Math.imul(se,ct)|0,L=L+Math.imul(se,vt)|0,T=T+Math.imul(Oe,qt)|0,M=M+Math.imul(Oe,sr)|0,M=M+Math.imul(Ue,qt)|0,L=L+Math.imul(Ue,sr)|0,T=T+Math.imul(ge,vr)|0,M=M+Math.imul(ge,xr)|0,M=M+Math.imul(me,vr)|0,L=L+Math.imul(me,xr)|0,T=T+Math.imul(oe,ar)|0,M=M+Math.imul(oe,or)|0,M=M+Math.imul(ce,ar)|0,L=L+Math.imul(ce,or)|0,T=T+Math.imul(ae,wr)|0,M=M+Math.imul(ae,Er)|0,M=M+Math.imul(ie,wr)|0,L=L+Math.imul(ie,Er)|0,T=T+Math.imul(Y,Ar)|0,M=M+Math.imul(Y,_r)|0,M=M+Math.imul(re,Ar)|0,L=L+Math.imul(re,_r)|0;var td=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(td>>>26)|0,td&=67108863,T=Math.imul(W,Ve),M=Math.imul(W,Qe),M=M+Math.imul(z,Ve)|0,L=Math.imul(z,Qe),T=T+Math.imul(V,Se)|0,M=M+Math.imul(V,Ne)|0,M=M+Math.imul(R,Se)|0,L=L+Math.imul(R,Ne)|0,T=T+Math.imul(_e,Be)|0,M=M+Math.imul(_e,et)|0,M=M+Math.imul(ke,Be)|0,L=L+Math.imul(ke,et)|0,T=T+Math.imul(pe,ct)|0,M=M+Math.imul(pe,vt)|0,M=M+Math.imul(he,ct)|0,L=L+Math.imul(he,vt)|0,T=T+Math.imul(J,qt)|0,M=M+Math.imul(J,sr)|0,M=M+Math.imul(se,qt)|0,L=L+Math.imul(se,sr)|0,T=T+Math.imul(Oe,vr)|0,M=M+Math.imul(Oe,xr)|0,M=M+Math.imul(Ue,vr)|0,L=L+Math.imul(Ue,xr)|0,T=T+Math.imul(ge,ar)|0,M=M+Math.imul(ge,or)|0,M=M+Math.imul(me,ar)|0,L=L+Math.imul(me,or)|0,T=T+Math.imul(oe,wr)|0,M=M+Math.imul(oe,Er)|0,M=M+Math.imul(ce,wr)|0,L=L+Math.imul(ce,Er)|0,T=T+Math.imul(ae,Ar)|0,M=M+Math.imul(ae,_r)|0,M=M+Math.imul(ie,Ar)|0,L=L+Math.imul(ie,_r)|0;var rd=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(rd>>>26)|0,rd&=67108863,T=Math.imul(W,Se),M=Math.imul(W,Ne),M=M+Math.imul(z,Se)|0,L=Math.imul(z,Ne),T=T+Math.imul(V,Be)|0,M=M+Math.imul(V,et)|0,M=M+Math.imul(R,Be)|0,L=L+Math.imul(R,et)|0,T=T+Math.imul(_e,ct)|0,M=M+Math.imul(_e,vt)|0,M=M+Math.imul(ke,ct)|0,L=L+Math.imul(ke,vt)|0,T=T+Math.imul(pe,qt)|0,M=M+Math.imul(pe,sr)|0,M=M+Math.imul(he,qt)|0,L=L+Math.imul(he,sr)|0,T=T+Math.imul(J,vr)|0,M=M+Math.imul(J,xr)|0,M=M+Math.imul(se,vr)|0,L=L+Math.imul(se,xr)|0,T=T+Math.imul(Oe,ar)|0,M=M+Math.imul(Oe,or)|0,M=M+Math.imul(Ue,ar)|0,L=L+Math.imul(Ue,or)|0,T=T+Math.imul(ge,wr)|0,M=M+Math.imul(ge,Er)|0,M=M+Math.imul(me,wr)|0,L=L+Math.imul(me,Er)|0,T=T+Math.imul(oe,Ar)|0,M=M+Math.imul(oe,_r)|0,M=M+Math.imul(ce,Ar)|0,L=L+Math.imul(ce,_r)|0;var ys=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(ys>>>26)|0,ys&=67108863,T=Math.imul(W,Be),M=Math.imul(W,et),M=M+Math.imul(z,Be)|0,L=Math.imul(z,et),T=T+Math.imul(V,ct)|0,M=M+Math.imul(V,vt)|0,M=M+Math.imul(R,ct)|0,L=L+Math.imul(R,vt)|0,T=T+Math.imul(_e,qt)|0,M=M+Math.imul(_e,sr)|0,M=M+Math.imul(ke,qt)|0,L=L+Math.imul(ke,sr)|0,T=T+Math.imul(pe,vr)|0,M=M+Math.imul(pe,xr)|0,M=M+Math.imul(he,vr)|0,L=L+Math.imul(he,xr)|0,T=T+Math.imul(J,ar)|0,M=M+Math.imul(J,or)|0,M=M+Math.imul(se,ar)|0,L=L+Math.imul(se,or)|0,T=T+Math.imul(Oe,wr)|0,M=M+Math.imul(Oe,Er)|0,M=M+Math.imul(Ue,wr)|0,L=L+Math.imul(Ue,Er)|0,T=T+Math.imul(ge,Ar)|0,M=M+Math.imul(ge,_r)|0,M=M+Math.imul(me,Ar)|0,L=L+Math.imul(me,_r)|0;var Hn=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,T=Math.imul(W,ct),M=Math.imul(W,vt),M=M+Math.imul(z,ct)|0,L=Math.imul(z,vt),T=T+Math.imul(V,qt)|0,M=M+Math.imul(V,sr)|0,M=M+Math.imul(R,qt)|0,L=L+Math.imul(R,sr)|0,T=T+Math.imul(_e,vr)|0,M=M+Math.imul(_e,xr)|0,M=M+Math.imul(ke,vr)|0,L=L+Math.imul(ke,xr)|0,T=T+Math.imul(pe,ar)|0,M=M+Math.imul(pe,or)|0,M=M+Math.imul(he,ar)|0,L=L+Math.imul(he,or)|0,T=T+Math.imul(J,wr)|0,M=M+Math.imul(J,Er)|0,M=M+Math.imul(se,wr)|0,L=L+Math.imul(se,Er)|0,T=T+Math.imul(Oe,Ar)|0,M=M+Math.imul(Oe,_r)|0,M=M+Math.imul(Ue,Ar)|0,L=L+Math.imul(Ue,_r)|0;var nd=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(nd>>>26)|0,nd&=67108863,T=Math.imul(W,qt),M=Math.imul(W,sr),M=M+Math.imul(z,qt)|0,L=Math.imul(z,sr),T=T+Math.imul(V,vr)|0,M=M+Math.imul(V,xr)|0,M=M+Math.imul(R,vr)|0,L=L+Math.imul(R,xr)|0,T=T+Math.imul(_e,ar)|0,M=M+Math.imul(_e,or)|0,M=M+Math.imul(ke,ar)|0,L=L+Math.imul(ke,or)|0,T=T+Math.imul(pe,wr)|0,M=M+Math.imul(pe,Er)|0,M=M+Math.imul(he,wr)|0,L=L+Math.imul(he,Er)|0,T=T+Math.imul(J,Ar)|0,M=M+Math.imul(J,_r)|0,M=M+Math.imul(se,Ar)|0,L=L+Math.imul(se,_r)|0;var id=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(id>>>26)|0,id&=67108863,T=Math.imul(W,vr),M=Math.imul(W,xr),M=M+Math.imul(z,vr)|0,L=Math.imul(z,xr),T=T+Math.imul(V,ar)|0,M=M+Math.imul(V,or)|0,M=M+Math.imul(R,ar)|0,L=L+Math.imul(R,or)|0,T=T+Math.imul(_e,wr)|0,M=M+Math.imul(_e,Er)|0,M=M+Math.imul(ke,wr)|0,L=L+Math.imul(ke,Er)|0,T=T+Math.imul(pe,Ar)|0,M=M+Math.imul(pe,_r)|0,M=M+Math.imul(he,Ar)|0,L=L+Math.imul(he,_r)|0;var qs=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(qs>>>26)|0,qs&=67108863,T=Math.imul(W,ar),M=Math.imul(W,or),M=M+Math.imul(z,ar)|0,L=Math.imul(z,or),T=T+Math.imul(V,wr)|0,M=M+Math.imul(V,Er)|0,M=M+Math.imul(R,wr)|0,L=L+Math.imul(R,Er)|0,T=T+Math.imul(_e,Ar)|0,M=M+Math.imul(_e,_r)|0,M=M+Math.imul(ke,Ar)|0,L=L+Math.imul(ke,_r)|0;var cn=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(cn>>>26)|0,cn&=67108863,T=Math.imul(W,wr),M=Math.imul(W,Er),M=M+Math.imul(z,wr)|0,L=Math.imul(z,Er),T=T+Math.imul(V,Ar)|0,M=M+Math.imul(V,_r)|0,M=M+Math.imul(R,Ar)|0,L=L+Math.imul(R,_r)|0;var zf=(D+T|0)+((M&8191)<<13)|0;D=(L+(M>>>13)|0)+(zf>>>26)|0,zf&=67108863,T=Math.imul(W,Ar),M=Math.imul(W,_r),M=M+Math.imul(z,Ar)|0,L=Math.imul(z,_r);var va=(D+T|0)+((M&8191)<<13)|0;return D=(L+(M>>>13)|0)+(va>>>26)|0,va&=67108863,k[0]=qi,k[1]=Z0,k[2]=J0,k[3]=Y0,k[4]=X0,k[5]=ed,k[6]=js,k[7]=ps,k[8]=Me,k[9]=td,k[10]=rd,k[11]=ys,k[12]=Hn,k[13]=nd,k[14]=id,k[15]=qs,k[16]=cn,k[17]=zf,k[18]=va,D!==0&&(k[19]=D,A.length++),A};Math.imul||(p=y);function g(O,E,S){S.negative=E.negative^O.negative,S.length=O.length+E.length;for(var A=0,w=0,P=0;P<S.length-1;P++){var k=w;w=0;for(var D=A&67108863,T=Math.min(P,E.length-1),M=Math.max(0,P-O.length+1);M<=T;M++){var L=P-M,K=O.words[L]|0,Y=E.words[M]|0,re=K*Y,ne=re&67108863;k=k+(re/67108864|0)|0,ne=ne+D|0,D=ne&67108863,k=k+(ne>>>26)|0,w+=k>>>26,k&=67108863}S.words[P]=D,A=k,k=w}return A!==0?S.words[P]=A:S.length--,S.strip()}function m(O,E,S){var A=new v;return A.mulp(O,E,S)}s.prototype.mulTo=function(E,S){var A,w=this.length+E.length;return this.length===10&&E.length===10?A=p(this,E,S):w<63?A=y(this,E,S):w<1024?A=g(this,E,S):A=m(this,E,S),A};function v(O,E){this.x=O,this.y=E}v.prototype.makeRBT=function(E){for(var S=new Array(E),A=s.prototype._countBits(E)-1,w=0;w<E;w++)S[w]=this.revBin(w,A,E);return S},v.prototype.revBin=function(E,S,A){if(E===0||E===A-1)return E;for(var w=0,P=0;P<S;P++)w|=(E&1)<<S-P-1,E>>=1;return w},v.prototype.permute=function(E,S,A,w,P,k){for(var D=0;D<k;D++)w[D]=S[E[D]],P[D]=A[E[D]]},v.prototype.transform=function(E,S,A,w,P,k){this.permute(k,E,S,A,w,P);for(var D=1;D<P;D<<=1)for(var T=D<<1,M=Math.cos(2*Math.PI/T),L=Math.sin(2*Math.PI/T),K=0;K<P;K+=T)for(var Y=M,re=L,ne=0;ne<D;ne++){var ae=A[K+ne],ie=w[K+ne],fe=A[K+ne+D],oe=w[K+ne+D],ce=Y*fe-re*oe;oe=Y*oe+re*fe,fe=ce,A[K+ne]=ae+fe,w[K+ne]=ie+oe,A[K+ne+D]=ae-fe,w[K+ne+D]=ie-oe,ne!==T&&(ce=M*Y-L*re,re=M*re+L*Y,Y=ce)}},v.prototype.guessLen13b=function(E,S){var A=Math.max(S,E)|1,w=A&1,P=0;for(A=A/2|0;A;A=A>>>1)P++;return 1<<P+1+w},v.prototype.conjugate=function(E,S,A){if(!(A<=1))for(var w=0;w<A/2;w++){var P=E[w];E[w]=E[A-w-1],E[A-w-1]=P,P=S[w],S[w]=-S[A-w-1],S[A-w-1]=-P}},v.prototype.normalize13b=function(E,S){for(var A=0,w=0;w<S/2;w++){var P=Math.round(E[2*w+1]/S)*8192+Math.round(E[2*w]/S)+A;E[w]=P&67108863,P<67108864?A=0:A=P/67108864|0}return E},v.prototype.convert13b=function(E,S,A,w){for(var P=0,k=0;k<S;k++)P=P+(E[k]|0),A[2*k]=P&8191,P=P>>>13,A[2*k+1]=P&8191,P=P>>>13;for(k=2*S;k<w;++k)A[k]=0;n(P===0),n((P&-8192)===0)},v.prototype.stub=function(E){for(var S=new Array(E),A=0;A<E;A++)S[A]=0;return S},v.prototype.mulp=function(E,S,A){var w=2*this.guessLen13b(E.length,S.length),P=this.makeRBT(w),k=this.stub(w),D=new Array(w),T=new Array(w),M=new Array(w),L=new Array(w),K=new Array(w),Y=new Array(w),re=A.words;re.length=w,this.convert13b(E.words,E.length,D,w),this.convert13b(S.words,S.length,L,w),this.transform(D,k,T,M,w,P),this.transform(L,k,K,Y,w,P);for(var ne=0;ne<w;ne++){var ae=T[ne]*K[ne]-M[ne]*Y[ne];M[ne]=T[ne]*Y[ne]+M[ne]*K[ne],T[ne]=ae}return this.conjugate(T,M,w),this.transform(T,M,re,k,w,P),this.conjugate(re,k,w),this.normalize13b(re,w),A.negative=E.negative^S.negative,A.length=E.length+S.length,A.strip()},s.prototype.mul=function(E){var S=new s(null);return S.words=new Array(this.length+E.length),this.mulTo(E,S)},s.prototype.mulf=function(E){var S=new s(null);return S.words=new Array(this.length+E.length),m(this,E,S)},s.prototype.imul=function(E){return this.clone().mulTo(E,this)},s.prototype.imuln=function(E){n(typeof E=="number"),n(E<67108864);for(var S=0,A=0;A<this.length;A++){var w=(this.words[A]|0)*E,P=(w&67108863)+(S&67108863);S>>=26,S+=w/67108864|0,S+=P>>>26,this.words[A]=P&67108863}return S!==0&&(this.words[A]=S,this.length++),this.length=E===0?1:this.length,this},s.prototype.muln=function(E){return this.clone().imuln(E)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(E){var S=h(E);if(S.length===0)return new s(1);for(var A=this,w=0;w<S.length&&S[w]===0;w++,A=A.sqr());if(++w<S.length)for(var P=A.sqr();w<S.length;w++,P=P.sqr())S[w]!==0&&(A=A.mul(P));return A},s.prototype.iushln=function(E){n(typeof E=="number"&&E>=0);var S=E%26,A=(E-S)/26,w=67108863>>>26-S<<26-S,P;if(S!==0){var k=0;for(P=0;P<this.length;P++){var D=this.words[P]&w,T=(this.words[P]|0)-D<<S;this.words[P]=T|k,k=D>>>26-S}k&&(this.words[P]=k,this.length++)}if(A!==0){for(P=this.length-1;P>=0;P--)this.words[P+A]=this.words[P];for(P=0;P<A;P++)this.words[P]=0;this.length+=A}return this.strip()},s.prototype.ishln=function(E){return n(this.negative===0),this.iushln(E)},s.prototype.iushrn=function(E,S,A){n(typeof E=="number"&&E>=0);var w;S?w=(S-S%26)/26:w=0;var P=E%26,k=Math.min((E-P)/26,this.length),D=67108863^67108863>>>P<<P,T=A;if(w-=k,w=Math.max(0,w),T){for(var M=0;M<k;M++)T.words[M]=this.words[M];T.length=k}if(k!==0)if(this.length>k)for(this.length-=k,M=0;M<this.length;M++)this.words[M]=this.words[M+k];else this.words[0]=0,this.length=1;var L=0;for(M=this.length-1;M>=0&&(L!==0||M>=w);M--){var K=this.words[M]|0;this.words[M]=L<<26-P|K>>>P,L=K&D}return T&&L!==0&&(T.words[T.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(E,S,A){return n(this.negative===0),this.iushrn(E,S,A)},s.prototype.shln=function(E){return this.clone().ishln(E)},s.prototype.ushln=function(E){return this.clone().iushln(E)},s.prototype.shrn=function(E){return this.clone().ishrn(E)},s.prototype.ushrn=function(E){return this.clone().iushrn(E)},s.prototype.testn=function(E){n(typeof E=="number"&&E>=0);var S=E%26,A=(E-S)/26,w=1<<S;if(this.length<=A)return!1;var P=this.words[A];return!!(P&w)},s.prototype.imaskn=function(E){n(typeof E=="number"&&E>=0);var S=E%26,A=(E-S)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=A)return this;if(S!==0&&A++,this.length=Math.min(A,this.length),S!==0){var w=67108863^67108863>>>S<<S;this.words[this.length-1]&=w}return this.strip()},s.prototype.maskn=function(E){return this.clone().imaskn(E)},s.prototype.iaddn=function(E){return n(typeof E=="number"),n(E<67108864),E<0?this.isubn(-E):this.negative!==0?this.length===1&&(this.words[0]|0)<E?(this.words[0]=E-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(E),this.negative=1,this):this._iaddn(E)},s.prototype._iaddn=function(E){this.words[0]+=E;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},s.prototype.isubn=function(E){if(n(typeof E=="number"),n(E<67108864),E<0)return this.iaddn(-E);if(this.negative!==0)return this.negative=0,this.iaddn(E),this.negative=1,this;if(this.words[0]-=E,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this.strip()},s.prototype.addn=function(E){return this.clone().iaddn(E)},s.prototype.subn=function(E){return this.clone().isubn(E)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(E,S,A){var w=E.length+A,P;this._expand(w);var k,D=0;for(P=0;P<E.length;P++){k=(this.words[P+A]|0)+D;var T=(E.words[P]|0)*S;k-=T&67108863,D=(k>>26)-(T/67108864|0),this.words[P+A]=k&67108863}for(;P<this.length-A;P++)k=(this.words[P+A]|0)+D,D=k>>26,this.words[P+A]=k&67108863;if(D===0)return this.strip();for(n(D===-1),D=0,P=0;P<this.length;P++)k=-(this.words[P]|0)+D,D=k>>26,this.words[P]=k&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(E,S){var A=this.length-E.length,w=this.clone(),P=E,k=P.words[P.length-1]|0,D=this._countBits(k);A=26-D,A!==0&&(P=P.ushln(A),w.iushln(A),k=P.words[P.length-1]|0);var T=w.length-P.length,M;if(S!=="mod"){M=new s(null),M.length=T+1,M.words=new Array(M.length);for(var L=0;L<M.length;L++)M.words[L]=0}var K=w.clone()._ishlnsubmul(P,1,T);K.negative===0&&(w=K,M&&(M.words[T]=1));for(var Y=T-1;Y>=0;Y--){var re=(w.words[P.length+Y]|0)*67108864+(w.words[P.length+Y-1]|0);for(re=Math.min(re/k|0,67108863),w._ishlnsubmul(P,re,Y);w.negative!==0;)re--,w.negative=0,w._ishlnsubmul(P,1,Y),w.isZero()||(w.negative^=1);M&&(M.words[Y]=re)}return M&&M.strip(),w.strip(),S!=="div"&&A!==0&&w.iushrn(A),{div:M||null,mod:w}},s.prototype.divmod=function(E,S,A){if(n(!E.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,P,k;return this.negative!==0&&E.negative===0?(k=this.neg().divmod(E,S),S!=="mod"&&(w=k.div.neg()),S!=="div"&&(P=k.mod.neg(),A&&P.negative!==0&&P.iadd(E)),{div:w,mod:P}):this.negative===0&&E.negative!==0?(k=this.divmod(E.neg(),S),S!=="mod"&&(w=k.div.neg()),{div:w,mod:k.mod}):this.negative&E.negative?(k=this.neg().divmod(E.neg(),S),S!=="div"&&(P=k.mod.neg(),A&&P.negative!==0&&P.isub(E)),{div:k.div,mod:P}):E.length>this.length||this.cmp(E)<0?{div:new s(0),mod:this}:E.length===1?S==="div"?{div:this.divn(E.words[0]),mod:null}:S==="mod"?{div:null,mod:new s(this.modn(E.words[0]))}:{div:this.divn(E.words[0]),mod:new s(this.modn(E.words[0]))}:this._wordDiv(E,S)},s.prototype.div=function(E){return this.divmod(E,"div",!1).div},s.prototype.mod=function(E){return this.divmod(E,"mod",!1).mod},s.prototype.umod=function(E){return this.divmod(E,"mod",!0).mod},s.prototype.divRound=function(E){var S=this.divmod(E);if(S.mod.isZero())return S.div;var A=S.div.negative!==0?S.mod.isub(E):S.mod,w=E.ushrn(1),P=E.andln(1),k=A.cmp(w);return k<0||P===1&&k===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},s.prototype.modn=function(E){n(E<=67108863);for(var S=(1<<26)%E,A=0,w=this.length-1;w>=0;w--)A=(S*A+(this.words[w]|0))%E;return A},s.prototype.idivn=function(E){n(E<=67108863);for(var S=0,A=this.length-1;A>=0;A--){var w=(this.words[A]|0)+S*67108864;this.words[A]=w/E|0,S=w%E}return this.strip()},s.prototype.divn=function(E){return this.clone().idivn(E)},s.prototype.egcd=function(E){n(E.negative===0),n(!E.isZero());var S=this,A=E.clone();S.negative!==0?S=S.umod(E):S=S.clone();for(var w=new s(1),P=new s(0),k=new s(0),D=new s(1),T=0;S.isEven()&&A.isEven();)S.iushrn(1),A.iushrn(1),++T;for(var M=A.clone(),L=S.clone();!S.isZero();){for(var K=0,Y=1;!(S.words[0]&Y)&&K<26;++K,Y<<=1);if(K>0)for(S.iushrn(K);K-- >0;)(w.isOdd()||P.isOdd())&&(w.iadd(M),P.isub(L)),w.iushrn(1),P.iushrn(1);for(var re=0,ne=1;!(A.words[0]&ne)&&re<26;++re,ne<<=1);if(re>0)for(A.iushrn(re);re-- >0;)(k.isOdd()||D.isOdd())&&(k.iadd(M),D.isub(L)),k.iushrn(1),D.iushrn(1);S.cmp(A)>=0?(S.isub(A),w.isub(k),P.isub(D)):(A.isub(S),k.isub(w),D.isub(P))}return{a:k,b:D,gcd:A.iushln(T)}},s.prototype._invmp=function(E){n(E.negative===0),n(!E.isZero());var S=this,A=E.clone();S.negative!==0?S=S.umod(E):S=S.clone();for(var w=new s(1),P=new s(0),k=A.clone();S.cmpn(1)>0&&A.cmpn(1)>0;){for(var D=0,T=1;!(S.words[0]&T)&&D<26;++D,T<<=1);if(D>0)for(S.iushrn(D);D-- >0;)w.isOdd()&&w.iadd(k),w.iushrn(1);for(var M=0,L=1;!(A.words[0]&L)&&M<26;++M,L<<=1);if(M>0)for(A.iushrn(M);M-- >0;)P.isOdd()&&P.iadd(k),P.iushrn(1);S.cmp(A)>=0?(S.isub(A),w.isub(P)):(A.isub(S),P.isub(w))}var K;return S.cmpn(1)===0?K=w:K=P,K.cmpn(0)<0&&K.iadd(E),K},s.prototype.gcd=function(E){if(this.isZero())return E.abs();if(E.isZero())return this.abs();var S=this.clone(),A=E.clone();S.negative=0,A.negative=0;for(var w=0;S.isEven()&&A.isEven();w++)S.iushrn(1),A.iushrn(1);do{for(;S.isEven();)S.iushrn(1);for(;A.isEven();)A.iushrn(1);var P=S.cmp(A);if(P<0){var k=S;S=A,A=k}else if(P===0||A.cmpn(1)===0)break;S.isub(A)}while(!0);return A.iushln(w)},s.prototype.invm=function(E){return this.egcd(E).a.umod(E)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(E){return this.words[0]&E},s.prototype.bincn=function(E){n(typeof E=="number");var S=E%26,A=(E-S)/26,w=1<<S;if(this.length<=A)return this._expand(A+1),this.words[A]|=w,this;for(var P=w,k=A;P!==0&&k<this.length;k++){var D=this.words[k]|0;D+=P,P=D>>>26,D&=67108863,this.words[k]=D}return P!==0&&(this.words[k]=P,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(E){var S=E<0;if(this.negative!==0&&!S)return-1;if(this.negative===0&&S)return 1;this.strip();var A;if(this.length>1)A=1;else{S&&(E=-E),n(E<=67108863,"Number is too big");var w=this.words[0]|0;A=w===E?0:w<E?-1:1}return this.negative!==0?-A|0:A},s.prototype.cmp=function(E){if(this.negative!==0&&E.negative===0)return-1;if(this.negative===0&&E.negative!==0)return 1;var S=this.ucmp(E);return this.negative!==0?-S|0:S},s.prototype.ucmp=function(E){if(this.length>E.length)return 1;if(this.length<E.length)return-1;for(var S=0,A=this.length-1;A>=0;A--){var w=this.words[A]|0,P=E.words[A]|0;if(w!==P){w<P?S=-1:w>P&&(S=1);break}}return S},s.prototype.gtn=function(E){return this.cmpn(E)===1},s.prototype.gt=function(E){return this.cmp(E)===1},s.prototype.gten=function(E){return this.cmpn(E)>=0},s.prototype.gte=function(E){return this.cmp(E)>=0},s.prototype.ltn=function(E){return this.cmpn(E)===-1},s.prototype.lt=function(E){return this.cmp(E)===-1},s.prototype.lten=function(E){return this.cmpn(E)<=0},s.prototype.lte=function(E){return this.cmp(E)<=0},s.prototype.eqn=function(E){return this.cmpn(E)===0},s.prototype.eq=function(E){return this.cmp(E)===0},s.red=function(E){return new $(E)},s.prototype.toRed=function(E){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),E.convertTo(this)._forceRed(E)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(E){return this.red=E,this},s.prototype.forceRed=function(E){return n(!this.red,"Already a number in reduction context"),this._forceRed(E)},s.prototype.redAdd=function(E){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,E)},s.prototype.redIAdd=function(E){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,E)},s.prototype.redSub=function(E){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,E)},s.prototype.redISub=function(E){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,E)},s.prototype.redShl=function(E){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,E)},s.prototype.redMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.mul(this,E)},s.prototype.redIMul=function(E){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,E),this.red.imul(this,E)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(E){return n(this.red&&!E.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,E)};var b={k256:null,p224:null,p192:null,p25519:null};function _(O,E){this.name=O,this.p=new s(E,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var E=new s(null);return E.words=new Array(Math.ceil(this.n/13)),E},_.prototype.ireduce=function(E){var S=E,A;do this.split(S,this.tmp),S=this.imulK(S),S=S.iadd(this.tmp),A=S.bitLength();while(A>this.n);var w=A<this.n?-1:S.ucmp(this.p);return w===0?(S.words[0]=0,S.length=1):w>0?S.isub(this.p):S.strip!==void 0?S.strip():S._strip(),S},_.prototype.split=function(E,S){E.iushrn(this.n,0,S)},_.prototype.imulK=function(E){return E.imul(this.k)};function C(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(C,_),C.prototype.split=function(E,S){for(var A=4194303,w=Math.min(E.length,9),P=0;P<w;P++)S.words[P]=E.words[P];if(S.length=w,E.length<=9){E.words[0]=0,E.length=1;return}var k=E.words[9];for(S.words[S.length++]=k&A,P=10;P<E.length;P++){var D=E.words[P]|0;E.words[P-10]=(D&A)<<4|k>>>22,k=D}k>>>=22,E.words[P-10]=k,k===0&&E.length>10?E.length-=10:E.length-=9},C.prototype.imulK=function(E){E.words[E.length]=0,E.words[E.length+1]=0,E.length+=2;for(var S=0,A=0;A<E.length;A++){var w=E.words[A]|0;S+=w*977,E.words[A]=S&67108863,S=w*64+(S/67108864|0)}return E.words[E.length-1]===0&&(E.length--,E.words[E.length-1]===0&&E.length--),E};function N(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(N,_);function x(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(x,_);function I(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(I,_),I.prototype.imulK=function(E){for(var S=0,A=0;A<E.length;A++){var w=(E.words[A]|0)*19+S,P=w&67108863;w>>>=26,E.words[A]=P,S=w}return S!==0&&(E.words[E.length++]=S),E},s._prime=function(E){if(b[E])return b[E];var S;if(E==="k256")S=new C;else if(E==="p224")S=new N;else if(E==="p192")S=new x;else if(E==="p25519")S=new I;else throw new Error("Unknown prime "+E);return b[E]=S,S};function $(O){if(typeof O=="string"){var E=s._prime(O);this.m=E.p,this.prime=E}else n(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}$.prototype._verify1=function(E){n(E.negative===0,"red works only with positives"),n(E.red,"red works only with red numbers")},$.prototype._verify2=function(E,S){n((E.negative|S.negative)===0,"red works only with positives"),n(E.red&&E.red===S.red,"red works only with red numbers")},$.prototype.imod=function(E){return this.prime?this.prime.ireduce(E)._forceRed(this):E.umod(this.m)._forceRed(this)},$.prototype.neg=function(E){return E.isZero()?E.clone():this.m.sub(E)._forceRed(this)},$.prototype.add=function(E,S){this._verify2(E,S);var A=E.add(S);return A.cmp(this.m)>=0&&A.isub(this.m),A._forceRed(this)},$.prototype.iadd=function(E,S){this._verify2(E,S);var A=E.iadd(S);return A.cmp(this.m)>=0&&A.isub(this.m),A},$.prototype.sub=function(E,S){this._verify2(E,S);var A=E.sub(S);return A.cmpn(0)<0&&A.iadd(this.m),A._forceRed(this)},$.prototype.isub=function(E,S){this._verify2(E,S);var A=E.isub(S);return A.cmpn(0)<0&&A.iadd(this.m),A},$.prototype.shl=function(E,S){return this._verify1(E),this.imod(E.ushln(S))},$.prototype.imul=function(E,S){return this._verify2(E,S),this.imod(E.imul(S))},$.prototype.mul=function(E,S){return this._verify2(E,S),this.imod(E.mul(S))},$.prototype.isqr=function(E){return this.imul(E,E.clone())},$.prototype.sqr=function(E){return this.mul(E,E)},$.prototype.sqrt=function(E){if(E.isZero())return E.clone();var S=this.m.andln(3);if(n(S%2===1),S===3){var A=this.m.add(new s(1)).iushrn(2);return this.pow(E,A)}for(var w=this.m.subn(1),P=0;!w.isZero()&&w.andln(1)===0;)P++,w.iushrn(1);n(!w.isZero());var k=new s(1).toRed(this),D=k.redNeg(),T=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new s(2*M*M).toRed(this);this.pow(M,T).cmp(D)!==0;)M.redIAdd(D);for(var L=this.pow(M,w),K=this.pow(E,w.addn(1).iushrn(1)),Y=this.pow(E,w),re=P;Y.cmp(k)!==0;){for(var ne=Y,ae=0;ne.cmp(k)!==0;ae++)ne=ne.redSqr();n(ae<re);var ie=this.pow(L,new s(1).iushln(re-ae-1));K=K.redMul(ie),L=ie.redSqr(),Y=Y.redMul(L),re=ae}return K},$.prototype.invm=function(E){var S=E._invmp(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},$.prototype.pow=function(E,S){if(S.isZero())return new s(1).toRed(this);if(S.cmpn(1)===0)return E.clone();var A=4,w=new Array(1<<A);w[0]=new s(1).toRed(this),w[1]=E;for(var P=2;P<w.length;P++)w[P]=this.mul(w[P-1],E);var k=w[0],D=0,T=0,M=S.bitLength()%26;for(M===0&&(M=26),P=S.length-1;P>=0;P--){for(var L=S.words[P],K=M-1;K>=0;K--){var Y=L>>K&1;if(k!==w[0]&&(k=this.sqr(k)),Y===0&&D===0){T=0;continue}D<<=1,D|=Y,T++,!(T!==A&&(P!==0||K!==0))&&(k=this.mul(k,w[D]),T=0,D=0)}M=26}return k},$.prototype.convertTo=function(E){var S=E.umod(this.m);return S===E?S.clone():S},$.prototype.convertFrom=function(E){var S=E.clone();return S.red=null,S},s.mont=function(E){return new j(E)};function j(O){$.call(this,O),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(j,$),j.prototype.convertTo=function(E){return this.imod(E.ushln(this.shift))},j.prototype.convertFrom=function(E){var S=this.imod(E.mul(this.rinv));return S.red=null,S},j.prototype.imul=function(E,S){if(E.isZero()||S.isZero())return E.words[0]=0,E.length=1,E;var A=E.imul(S),w=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=A.isub(w).iushrn(this.shift),k=P;return P.cmp(this.m)>=0?k=P.isub(this.m):P.cmpn(0)<0&&(k=P.iadd(this.m)),k._forceRed(this)},j.prototype.mul=function(E,S){if(E.isZero()||S.isZero())return new s(0)._forceRed(this);var A=E.mul(S),w=A.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=A.isub(w).iushrn(this.shift),k=P;return P.cmp(this.m)>=0?k=P.isub(this.m):P.cmpn(0)<0&&(k=P.iadd(this.m)),k._forceRed(this)},j.prototype.invm=function(E){var S=this.imod(E._invmp(this.m).mul(this.r2));return S._forceRed(this)}})(r,Ht)})(UC);var fu=UC.exports;const Do=so(fu);var S_={};const Qne="6.6.1",Zne={version:Qne};var ya={},FC={};(function(r){var e=r;function t(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var o=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)o[c]=s[c]|0;return o}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)o.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var u=s.charCodeAt(c),f=u>>8,l=u&255;f?o.push(f,l):o.push(l)}return o}e.toArray=t;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var a="",o=0;o<s.length;o++)a+=n(s[o].toString(16));return a}e.toHex=i,e.encode=function(a,o){return o==="hex"?i(a):a}})(FC);(function(r){var e=r,t=fu,n=yp,i=FC;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,l,d){var h=new Array(Math.max(f.bitLength(),d)+1),y;for(y=0;y<h.length;y+=1)h[y]=0;var p=1<<l+1,g=f.clone();for(y=0;y<h.length;y++){var m,v=g.andln(p-1);g.isOdd()?(v>(p>>1)-1?m=(p>>1)-v:m=v,g.isubn(m)):m=0,h[y]=m,g.iushrn(1)}return h}e.getNAF=s;function a(f,l){var d=[[],[]];f=f.clone(),l=l.clone();for(var h=0,y=0,p;f.cmpn(-h)>0||l.cmpn(-y)>0;){var g=f.andln(3)+h&3,m=l.andln(3)+y&3;g===3&&(g=-1),m===3&&(m=-1);var v;g&1?(p=f.andln(7)+h&7,(p===3||p===5)&&m===2?v=-g:v=g):v=0,d[0].push(v);var b;m&1?(p=l.andln(7)+y&7,(p===3||p===5)&&g===2?b=-m:b=m):b=0,d[1].push(b),2*h===v+1&&(h=1-h),2*y===b+1&&(y=1-y),f.iushrn(1),l.iushrn(1)}return d}e.getJSF=a;function o(f,l,d){var h="_"+l;f.prototype[l]=function(){return this[h]!==void 0?this[h]:this[h]=d.call(this)}}e.cachedProperty=o;function c(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=c;function u(f){return new t(f,"hex","le")}e.intFromLE=u})(ya);var jC={},cd=fu,W2=ya,Q3=W2.getNAF,Jne=W2.getJSF,Z3=W2.assert;function V0(r,e){this.type=r,this.p=new cd(e.p,16),this.red=e.prime?cd.red(e.prime):cd.mont(this.p),this.zero=new cd(0).toRed(this.red),this.one=new cd(1).toRed(this.red),this.two=new cd(2).toRed(this.red),this.n=e.n&&new cd(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Ww=V0;V0.prototype.point=function(){throw new Error("Not implemented")};V0.prototype.validate=function(){throw new Error("Not implemented")};V0.prototype._fixedNafMul=function(e,t){Z3(e.precomputed);var n=e._getDoubles(),i=Q3(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],o,c;for(o=0;o<i.length;o+=n.step){c=0;for(var u=o+n.step-1;u>=o;u--)c=(c<<1)+i[u];a.push(c)}for(var f=this.jpoint(null,null,null),l=this.jpoint(null,null,null),d=s;d>0;d--){for(o=0;o<a.length;o++)c=a[o],c===d?l=l.mixedAdd(n.points[o]):c===-d&&(l=l.mixedAdd(n.points[o].neg()));f=f.add(l)}return f.toP()};V0.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=Q3(t,n,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var u=0;c>=0&&a[c]===0;c--)u++;if(c>=0&&u++,o=o.dblp(u),c<0)break;var f=a[c];Z3(f!==0),e.type==="affine"?f>0?o=o.mixedAdd(s[f-1>>1]):o=o.mixedAdd(s[-f-1>>1].neg()):f>0?o=o.add(s[f-1>>1]):o=o.add(s[-f-1>>1].neg())}return e.type==="affine"?o.toP():o};V0.prototype._wnafMulAdd=function(e,t,n,i,s){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,u=0,f,l,d;for(f=0;f<i;f++){d=t[f];var h=d._getNAFPoints(e);a[f]=h.wnd,o[f]=h.points}for(f=i-1;f>=1;f-=2){var y=f-1,p=f;if(a[y]!==1||a[p]!==1){c[y]=Q3(n[y],a[y],this._bitLength),c[p]=Q3(n[p],a[p],this._bitLength),u=Math.max(c[y].length,u),u=Math.max(c[p].length,u);continue}var g=[t[y],null,null,t[p]];t[y].y.cmp(t[p].y)===0?(g[1]=t[y].add(t[p]),g[2]=t[y].toJ().mixedAdd(t[p].neg())):t[y].y.cmp(t[p].y.redNeg())===0?(g[1]=t[y].toJ().mixedAdd(t[p]),g[2]=t[y].add(t[p].neg())):(g[1]=t[y].toJ().mixedAdd(t[p]),g[2]=t[y].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=Jne(n[y],n[p]);for(u=Math.max(v[0].length,u),c[y]=new Array(u),c[p]=new Array(u),l=0;l<u;l++){var b=v[0][l]|0,_=v[1][l]|0;c[y][l]=m[(b+1)*3+(_+1)],c[p][l]=0,o[y]=g}}var C=this.jpoint(null,null,null),N=this._wnafT4;for(f=u;f>=0;f--){for(var x=0;f>=0;){var I=!0;for(l=0;l<i;l++)N[l]=c[l][f]|0,N[l]!==0&&(I=!1);if(!I)break;x++,f--}if(f>=0&&x++,C=C.dblp(x),f<0)break;for(l=0;l<i;l++){var $=N[l];$!==0&&($>0?d=o[l][$-1>>1]:$<0&&(d=o[l][-$-1>>1].neg()),d.type==="affine"?C=C.mixedAdd(d):C=C.add(d))}}for(f=0;f<i;f++)o[f]=null;return s?C:C.toP()};function ao(r,e){this.curve=r,this.type=e,this.precomputed=null}V0.BasePoint=ao;ao.prototype.eq=function(){throw new Error("Not implemented")};ao.prototype.validate=function(){return this.curve.validate(this)};V0.prototype.decodePoint=function(e,t){e=W2.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Z3(e[e.length-1]%2===0):e[0]===7&&Z3(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};ao.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ao.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};ao.prototype.encode=function(e,t){return W2.encode(this._encode(t),e)};ao.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};ao.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};ao.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<t;s+=e){for(var a=0;a<e;a++)i=i.dbl();n.push(i)}return{step:e,points:n}};ao.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}};ao.prototype._getBeta=function(){return null};ao.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t};var Yne=ya,Jr=fu,qC=cu,t6=Ww,Xne=Yne.assert;function oo(r){t6.call(this,"short",r),this.a=new Jr(r.a,16).toRed(this.red),this.b=new Jr(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}qC(oo,t6);var eie=oo;oo.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new Jr(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new Jr(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?n=s[0]:(n=s[1],Xne(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Jr(o.a,16),b:new Jr(o.b,16)}}):a=this._getEndoBasis(n),{beta:t,lambda:n,basis:a}}};oo.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Jr.mont(e),n=new Jr(2).toRed(t).redInvm(),i=n.redNeg(),s=new Jr(3).toRed(t).redNeg().redSqrt().redMul(n),a=i.redAdd(s).fromRed(),o=i.redSub(s).fromRed();return[a,o]};oo.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new Jr(1),a=new Jr(0),o=new Jr(0),c=new Jr(1),u,f,l,d,h,y,p,g=0,m,v;n.cmpn(0)!==0;){var b=i.div(n);m=i.sub(b.mul(n)),v=o.sub(b.mul(s));var _=c.sub(b.mul(a));if(!l&&m.cmp(t)<0)u=p.neg(),f=s,l=m.neg(),d=v;else if(l&&++g===2)break;p=m,i=n,n=m,o=s,s=v,c=a,a=_}h=m.neg(),y=v;var C=l.sqr().add(d.sqr()),N=h.sqr().add(y.sqr());return N.cmp(C)>=0&&(h=u,y=f),l.negative&&(l=l.neg(),d=d.neg()),h.negative&&(h=h.neg(),y=y.neg()),[{a:l,b:d},{a:h,b:y}]};oo.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=s.mul(n.a),c=a.mul(i.a),u=s.mul(n.b),f=a.mul(i.b),l=e.sub(o).sub(c),d=u.add(f).neg();return{k1:l,k2:d}};oo.prototype.pointFromX=function(e,t){e=new Jr(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)};oo.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};oo.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),c=e[a],u=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),i[a*2]=c,i[a*2+1]=u,s[a*2]=o.k1,s[a*2+1]=o.k2}for(var f=this._wnafMulAdd(1,i,s,a*2,n),l=0;l<a*2;l++)i[l]=null,s[l]=null;return f};function zn(r,e,t,n){t6.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Jr(e,16),this.y=new Jr(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}qC(zn,t6.BasePoint);oo.prototype.point=function(e,t,n){return new zn(this,e,t,n)};oo.prototype.pointFromJSON=function(e,t){return zn.fromJSON(this,e,t)};zn.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};zn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};zn.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function s(o){return e.point(o[0],o[1],n)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i};zn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};zn.prototype.isInfinity=function(){return this.inf};zn.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};zn.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};zn.prototype.getX=function(){return this.x.fromRed()};zn.prototype.getY=function(){return this.y.fromRed()};zn.prototype.mul=function(e){return e=new Jr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};zn.prototype.mulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};zn.prototype.jmulAdd=function(e,t,n){var i=[this,t],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};zn.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};zn.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};zn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function pi(r,e,t,n){t6.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Jr(0)):(this.x=new Jr(e,16),this.y=new Jr(t,16),this.z=new Jr(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}qC(pi,t6.BasePoint);oo.prototype.jpoint=function(e,t,n){return new pi(this,e,t,n)};pi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};pi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};pi.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),u=a.redSub(o);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=c.redSqr(),l=f.redMul(c),d=i.redMul(f),h=u.redSqr().redIAdd(l).redISub(d).redISub(d),y=u.redMul(d.redISub(h)).redISub(a.redMul(l)),p=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(h,y,p)};pi.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),s=this.y,a=e.y.redMul(t).redMul(this.z),o=n.redSub(i),c=s.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),f=u.redMul(o),l=n.redMul(u),d=c.redSqr().redIAdd(f).redISub(l).redISub(l),h=c.redMul(l.redISub(d)).redISub(s.redMul(f)),y=this.z.redMul(o);return this.curve.jpoint(d,h,y)};pi.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,a=this.x,o=this.y,c=this.z,u=c.redSqr().redSqr(),f=o.redAdd(o);for(t=0;t<e;t++){var l=a.redSqr(),d=f.redSqr(),h=d.redSqr(),y=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(u)),p=a.redMul(d),g=y.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),v=y.redMul(m);v=v.redIAdd(v).redISub(h);var b=f.redMul(c);t+1<e&&(u=u.redMul(h)),a=g,c=b,f=v}return this.curve.jpoint(a,f.redMul(s),c)};pi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};pi.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i),u=c.redSqr().redISub(o).redISub(o),f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),e=u,t=c.redMul(o.redISub(u)).redISub(f),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),y=this.x.redAdd(d).redSqr().redISub(l).redISub(h);y=y.redIAdd(y);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=h.redIAdd(h);m=m.redIAdd(m),m=m.redIAdd(m),e=g.redISub(y).redISub(y),t=p.redMul(y.redISub(e)).redISub(m),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};pi.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),u=c.redSqr().redISub(o).redISub(o);e=u;var f=a.redIAdd(a);f=f.redIAdd(f),f=f.redIAdd(f),t=c.redMul(o.redISub(u)).redISub(f),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),y=this.x.redSub(l).redMul(this.x.redAdd(l));y=y.redAdd(y).redIAdd(y);var p=h.redIAdd(h);p=p.redIAdd(p);var g=p.redAdd(p);e=y.redSqr().redISub(g),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(l);var m=d.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),t=y.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,n)};pi.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),a=t.redSqr(),o=n.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(s)),u=t.redAdd(t);u=u.redIAdd(u);var f=u.redMul(o),l=c.redSqr().redISub(f.redAdd(f)),d=f.redISub(l),h=o.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var y=c.redMul(d).redISub(h),p=n.redAdd(n).redMul(i);return this.curve.jpoint(l,y,p)};pi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),a=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),u=i.redIAdd(i);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var f=s.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(u),l=t.redMul(f);l=l.redIAdd(l),l=l.redIAdd(l);var d=this.x.redMul(c).redISub(l);d=d.redIAdd(d),d=d.redIAdd(d);var h=this.y.redMul(f.redMul(u.redISub(f)).redISub(o.redMul(c)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var y=this.z.redAdd(o).redSqr().redISub(n).redISub(c);return this.curve.jpoint(d,h,y)};pi.prototype.mul=function(e,t){return e=new Jr(e,t),this.curve._wnafMul(this,e)};pi.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};pi.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};pi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};pi.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var x1=fu,NV=cu,Kw=Ww,tie=ya;function r6(r){Kw.call(this,"mont",r),this.a=new x1(r.a,16).toRed(this.red),this.b=new x1(r.b,16).toRed(this.red),this.i4=new x1(4).toRed(this.red).redInvm(),this.two=new x1(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}NV(r6,Kw);var rie=r6;r6.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),s=i.redSqrt();return s.redSqr().cmp(i)===0};function jn(r,e,t){Kw.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new x1(e,16),this.z=new x1(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}NV(jn,Kw.BasePoint);r6.prototype.decodePoint=function(e,t){return this.point(tie.toArray(e,t),1)};r6.prototype.point=function(e,t){return new jn(this,e,t)};r6.prototype.pointFromJSON=function(e){return jn.fromJSON(this,e)};jn.prototype.precompute=function(){};jn.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};jn.fromJSON=function(e,t){return new jn(e,t[0],t[1]||e.one)};jn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};jn.prototype.isInfinity=function(){return this.z.cmpn(0)===0};jn.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),s=t.redSub(i),a=t.redMul(i),o=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};jn.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};jn.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),a=e.x.redSub(e.z),o=a.redMul(n),c=s.redMul(i),u=t.z.redMul(o.redAdd(c).redSqr()),f=t.x.redMul(o.redISub(c).redSqr());return this.curve.point(u,f)};jn.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),s=this,a=[];t.cmpn(0)!==0;t.iushrn(1))a.push(t.andln(1));for(var o=a.length-1;o>=0;o--)a[o]===0?(n=n.diffAdd(i,s),i=i.dbl()):(i=n.diffAdd(i,s),n=n.dbl());return i};jn.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};jn.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};jn.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};jn.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};jn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var nie=ya,tf=fu,OV=cu,Gw=Ww,iie=nie.assert;function lu(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Gw.call(this,"edwards",r),this.a=new tf(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new tf(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new tf(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),iie(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}OV(lu,Gw);var sie=lu;lu.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};lu.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};lu.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};lu.prototype.pointFromX=function(e,t){e=new tf(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(s.redInvm()),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)};lu.prototype.pointFromY=function(e,t){e=new tf(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)};lu.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(s)===0};function lr(r,e,t,n,i){Gw.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new tf(e,16),this.y=new tf(t,16),this.z=n?new tf(n,16):this.curve.one,this.t=i&&new tf(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}OV(lr,Gw.BasePoint);lu.prototype.pointFromJSON=function(e){return lr.fromJSON(this,e)};lu.prototype.point=function(e,t,n,i){return new lr(this,e,t,n,i)};lr.fromJSON=function(e,t){return new lr(e,t[0],t[1],t[2])};lr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};lr.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};lr.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),o=a.redSub(n),c=i.redSub(t),u=s.redMul(o),f=a.redMul(c),l=s.redMul(c),d=o.redMul(a);return this.curve.point(u,f,d,l)};lr.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,s,a,o,c,u;if(this.curve.twisted){o=this.curve._mulA(t);var f=o.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(f.redSub(this.curve.two)),s=f.redMul(o.redSub(n)),a=f.redSqr().redSub(f).redSub(f)):(c=this.z.redSqr(),u=f.redSub(c).redISub(c),i=e.redSub(t).redISub(n).redMul(u),s=f.redMul(o.redSub(n)),a=f.redMul(u))}else o=t.redAdd(n),c=this.curve._mulC(this.z).redSqr(),u=o.redSub(c).redSub(c),i=this.curve._mulC(e.redISub(o)).redMul(u),s=this.curve._mulC(o).redMul(t.redISub(n)),a=o.redMul(u);return this.curve.point(i,s,a)};lr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};lr.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),o=s.redSub(i),c=s.redAdd(i),u=n.redAdd(t),f=a.redMul(o),l=c.redMul(u),d=a.redMul(u),h=o.redMul(c);return this.curve.point(f,l,h,d)};lr.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(s),o=n.redSub(a),c=n.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),f=t.redMul(o).redMul(u),l,d;return this.curve.twisted?(l=t.redMul(c).redMul(s.redSub(this.curve._mulA(i))),d=o.redMul(c)):(l=t.redMul(c).redMul(s.redSub(i)),d=this.curve._mulC(o).redMul(c)),this.curve.point(f,l,d)};lr.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};lr.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};lr.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};lr.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};lr.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};lr.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};lr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};lr.prototype.getY=function(){return this.normalize(),this.y.fromRed()};lr.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};lr.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};lr.prototype.toP=lr.prototype.normalize;lr.prototype.mixedAdd=lr.prototype.add;(function(r){var e=r;e.base=Ww,e.short=eie,e.mont=rie,e.edwards=sie})(jC);var Qw={},h7,Tk;function aie(){return Tk||(Tk=1,h7={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),h7}(function(r){var e=r,t=jc,n=jC,i=ya,s=i.assert;function a(u){u.type==="short"?this.curve=new n.short(u):u.type==="edwards"?this.curve=new n.edwards(u):this.curve=new n.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=a;function o(u,f){Object.defineProperty(e,u,{configurable:!0,enumerable:!0,get:function(){var l=new a(f);return Object.defineProperty(e,u,{configurable:!0,enumerable:!0,value:l}),l}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=aie()}catch{c=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Qw);var oie=jc,wh=FC,kV=yp;function _0(r){if(!(this instanceof _0))return new _0(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=wh.toArray(r.entropy,r.entropyEnc||"hex"),t=wh.toArray(r.nonce,r.nonceEnc||"hex"),n=wh.toArray(r.pers,r.persEnc||"hex");kV(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}var cie=_0;_0.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};_0.prototype._hmac=function(){return new oie.hmac(this.hash,this.K)};_0.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};_0.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=wh.toArray(e,t),n=wh.toArray(n,i),kV(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};_0.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=wh.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,e);return this._update(n),this._reseed++,wh.encode(a,t)};var uie=fu,fie=ya,M_=fie.assert;function Di(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var lie=Di;Di.fromPublic=function(e,t,n){return t instanceof Di?t:new Di(e,{pub:t,pubEnc:n})};Di.fromPrivate=function(e,t,n){return t instanceof Di?t:new Di(e,{priv:t,privEnc:n})};Di.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Di.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Di.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Di.prototype._importPrivate=function(e,t){this.priv=new uie(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Di.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?M_(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&M_(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Di.prototype.derive=function(e){return e.validate()||M_(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Di.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Di.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)};Di.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var J3=fu,VC=ya,die=VC.assert;function Zw(r,e){if(r instanceof Zw)return r;this._importDER(r,e)||(die(r.r&&r.s,"Signature without r or s"),this.r=new J3(r.r,16),this.s=new J3(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var hie=Zw;function pie(){this.place=0}function p7(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4||r[e.place]===0)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=r[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function Ck(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Zw.prototype._importDER=function(e,t){e=VC.toArray(e,t);var n=new pie;if(e[n.place++]!==48)return!1;var i=p7(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=p7(e,n);if(s===!1||e[n.place]&128)return!1;var a=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var o=p7(e,n);if(o===!1||e.length!==o+n.place||e[n.place]&128)return!1;var c=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new J3(a),this.s=new J3(c),this.recoveryParam=null,!0};function y7(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Zw.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=Ck(t),n=Ck(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];y7(i,t.length),i=i.concat(t),i.push(2),y7(i,n.length);var s=i.concat(n),a=[48];return y7(a,s.length),a=a.concat(s),VC.encode(a,e)};var Fo=fu,DV=cie,yie=ya,m7=Qw,mie=LC,Ed=yie.assert,zC=lie,Jw=hie;function Ja(r){if(!(this instanceof Ja))return new Ja(r);typeof r=="string"&&(Ed(Object.prototype.hasOwnProperty.call(m7,r),"Unknown curve "+r),r=m7[r]),r instanceof m7.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var bie=Ja;Ja.prototype.keyPair=function(e){return new zC(this,e)};Ja.prototype.keyFromPrivate=function(e,t){return zC.fromPrivate(this,e,t)};Ja.prototype.keyFromPublic=function(e,t){return zC.fromPublic(this,e,t)};Ja.prototype.genKeyPair=function(e){e||(e={});for(var t=new DV({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||mie(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new Fo(2));;){var s=new Fo(t.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Ja.prototype._truncateToN=function(e,t,n){var i;if(Fo.isBN(e)||typeof e=="number")e=new Fo(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new Fo(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new Fo(s,16)}typeof n!="number"&&(n=i*8);var a=n-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Ja.prototype.sign=function(e,t,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!Fo.isBN(e)){Ed(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Ed(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Ed((e[s]&255)===e[s])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,i.msgBitLength),Ed(!e.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),c=e.toArray("be",a);Ed(new Fo(c).eq(e),"Can not sign message");for(var u=new DV({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new Fo(1)),l=0;;l++){var d=i.k?i.k(l):new Fo(u.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var h=this.g.mul(d);if(!h.isInfinity()){var y=h.getX(),p=y.umod(this.n);if(p.cmpn(0)!==0){var g=d.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(g=g.umod(this.n),g.cmpn(0)!==0){var m=(h.getY().isOdd()?1:0)|(y.cmp(p)!==0?2:0);return i.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),m^=1),new Jw({r:p,s:g,recoveryParam:m})}}}}}};Ja.prototype.verify=function(e,t,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),t=new Jw(t,"hex");var a=t.r,o=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),u=c.mul(e).umod(this.n),f=c.mul(a).umod(this.n),l;return this.curve._maxwellTrick?(l=this.g.jmulAdd(u,n.getPublic(),f),l.isInfinity()?!1:l.eqXToP(a)):(l=this.g.mulAdd(u,n.getPublic(),f),l.isInfinity()?!1:l.getX().umod(this.n).cmp(a)===0)};Ja.prototype.recoverPubKey=function(r,e,t,n){Ed((3&t)===t,"The recovery param is more than two bits"),e=new Jw(e,n);var i=this.n,s=new Fo(r),a=e.r,o=e.s,c=t&1,u=t>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var f=e.r.invm(i),l=i.sub(s).mul(f).umod(i),d=o.mul(f).umod(i);return this.g.mulAdd(l,a,d)};Ja.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new Jw(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(r,e,i)}catch{continue}if(s.eq(t))return i}throw new Error("Unable to find valid recovery factor")};var K2=ya,BV=K2.assert,Ik=K2.parseBytes,n6=K2.cachedProperty;function Un(r,e){this.eddsa=r,this._secret=Ik(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Ik(e.pub)}Un.fromPublic=function(e,t){return t instanceof Un?t:new Un(e,{pub:t})};Un.fromSecret=function(e,t){return t instanceof Un?t:new Un(e,{secret:t})};Un.prototype.secret=function(){return this._secret};n6(Un,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});n6(Un,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});n6(Un,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});n6(Un,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});n6(Un,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});n6(Un,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Un.prototype.sign=function(e){return BV(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Un.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Un.prototype.getSecret=function(e){return BV(this._secret,"KeyPair is public only"),K2.encode(this.secret(),e)};Un.prototype.getPublic=function(e){return K2.encode(this.pubBytes(),e)};var gie=Un,vie=fu,Yw=ya,Rk=Yw.assert,Xw=Yw.cachedProperty,xie=Yw.parseBytes;function mp(r,e){this.eddsa=r,typeof e!="object"&&(e=xie(e)),Array.isArray(e)&&(Rk(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),Rk(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof vie&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Xw(mp,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Xw(mp,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Xw(mp,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Xw(mp,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});mp.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};mp.prototype.toHex=function(){return Yw.encode(this.toBytes(),"hex").toUpperCase()};var wie=mp,Eie=jc,Aie=Qw,fm=ya,_ie=fm.assert,$V=fm.parseBytes,LV=gie,Nk=wie;function Os(r){if(_ie(r==="ed25519","only tested with ed25519 so far"),!(this instanceof Os))return new Os(r);r=Aie[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=Eie.sha512}var Sie=Os;Os.prototype.sign=function(e,t){e=$V(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),s=this.g.mul(i),a=this.encodePoint(s),o=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),c=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:a})};Os.prototype.verify=function(e,t,n){if(e=$V(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(n),s=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S()),o=t.R().add(i.pub().mul(s));return o.eq(a)};Os.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return fm.intFromLE(e.digest()).umod(this.curve.n)};Os.prototype.keyFromPublic=function(e){return LV.fromPublic(this,e)};Os.prototype.keyFromSecret=function(e){return LV.fromSecret(this,e)};Os.prototype.makeSignature=function(e){return e instanceof Nk?e:new Nk(this,e)};Os.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};Os.prototype.decodePoint=function(e){e=fm.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,s=fm.intFromLE(n);return this.curve.pointFromY(s,i)};Os.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};Os.prototype.decodeInt=function(e){return fm.intFromLE(e)};Os.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=Zne.version,e.utils=ya,e.rand=LC,e.curve=jC,e.curves=Qw,e.ec=bie,e.eddsa=Sie})(S_);var P_=function(r,e){return P_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},P_(r,e)};function UV(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");P_(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Y3=function(){return Y3=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Y3.apply(this,arguments)};function FV(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function q(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function jV(r,e){return function(t,n){e(t,n,r)}}function qV(r,e,t,n,i,s){function a(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!e&&r?n.static?r:r.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),l,d=!1,h=t.length-1;h>=0;h--){var y={};for(var p in n)y[p]=p==="access"?{}:n[p];for(var p in n.access)y.access[p]=n.access[p];y.addInitializer=function(m){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(m||null))};var g=(0,t[h])(o==="accessor"?{get:f.get,set:f.set}:f[c],y);if(o==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(l=a(g.get))&&(f.get=l),(l=a(g.set))&&(f.set=l),(l=a(g.init))&&i.unshift(l)}else(l=a(g))&&(o==="field"?i.unshift(l):f[c]=l)}u&&Object.defineProperty(u,n.name,f),d=!0}function VV(r,e,t){for(var n=arguments.length>2,i=0;i<e.length;i++)t=n?e[i].call(r,t):e[i].call(r);return n?t:void 0}function zV(r){return typeof r=="symbol"?r:"".concat(r)}function HV(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function WV(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function KV(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(f){try{u(n.next(f))}catch(l){a(l)}}function c(f){try{u(n.throw(f))}catch(l){a(l)}}function u(f){f.done?s(f.value):i(f.value).then(o,c)}u((n=n.apply(r,e||[])).next())})}function GV(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(f){u=[6,f],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var e4=Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]};function QV(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&e4(e,r,t)}function X3(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function HC(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){a={error:o}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return s}function ZV(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(HC(arguments[e]));return r}function JV(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function YV(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}function lm(r){return this instanceof lm?(this.v=r,this):new lm(r)}function XV(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(y){return Promise.resolve(y).then(h,l)}}function o(h,y){n[h]&&(i[h]=function(p){return new Promise(function(g,m){s.push([h,p,g,m])>1||c(h,p)})},y&&(i[h]=y(i[h])))}function c(h,y){try{u(n[h](y))}catch(p){d(s[0][3],p)}}function u(h){h.value instanceof lm?Promise.resolve(h.value.v).then(f,l):d(s[0][2],h)}function f(h){c("next",h)}function l(h){c("throw",h)}function d(h,y){h(y),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ez(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(a){return(t=!t)?{value:lm(r[i](a)),done:!1}:s?s(a):a}:s}}function tz(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof X3=="function"?X3(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(a){return new Promise(function(o,c){a=r[s](a),i(o,c,a.done,a.value)})}}function i(s,a,o,c){Promise.resolve(c).then(function(u){s({value:u,done:o})},a)}}function rz(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var Mie=Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e},T_=function(r){return T_=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},T_(r)};function nz(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=T_(r),n=0;n<t.length;n++)t[n]!=="default"&&e4(e,r,t[n]);return Mie(e,r),e}function iz(r){return r&&r.__esModule?r:{default:r}}function sz(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)}function az(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t}function oz(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function cz(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),r.stack.push({value:e,dispose:n,async:t})}else t&&r.stack.push({async:!0});return e}var Pie=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=r,n.suppressed=e,n};function uz(r){function e(s){r.error=r.hasError?new Pie(s,r.error,"An error was suppressed during disposal."):s,r.hasError=!0}var t,n=0;function i(){for(;t=r.stack.pop();)try{if(!t.async&&n===1)return n=0,r.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return i()}function fz(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,i,s,a){return n?e?".jsx":".js":i&&(!s||!a)?t:i+s+"."+a.toLowerCase()+"js"}):r}const Tie={__extends:UV,__assign:Y3,__rest:FV,__decorate:q,__param:jV,__esDecorate:qV,__runInitializers:VV,__propKey:zV,__setFunctionName:HV,__metadata:WV,__awaiter:KV,__generator:GV,__createBinding:e4,__exportStar:QV,__values:X3,__read:HC,__spread:ZV,__spreadArrays:JV,__spreadArray:YV,__await:lm,__asyncGenerator:XV,__asyncDelegator:ez,__asyncValues:tz,__makeTemplateObject:rz,__importStar:nz,__importDefault:iz,__classPrivateFieldGet:sz,__classPrivateFieldSet:az,__classPrivateFieldIn:oz,__addDisposableResource:cz,__disposeResources:uz,__rewriteRelativeImportExtension:fz},$Pe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:cz,get __assign(){return Y3},__asyncDelegator:ez,__asyncGenerator:XV,__asyncValues:tz,__await:lm,__awaiter:KV,__classPrivateFieldGet:sz,__classPrivateFieldIn:oz,__classPrivateFieldSet:az,__createBinding:e4,__decorate:q,__disposeResources:uz,__esDecorate:qV,__exportStar:QV,__extends:UV,__generator:GV,__importDefault:iz,__importStar:nz,__makeTemplateObject:rz,__metadata:WV,__param:jV,__propKey:zV,__read:HC,__rest:FV,__rewriteRelativeImportExtension:fz,__runInitializers:VV,__setFunctionName:HV,__spread:ZV,__spreadArray:YV,__spreadArrays:JV,__values:X3,default:Tie},Symbol.toStringTag,{value:"Module"}));/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Cie=4,Ok=0,kk=1,Iie=2;function i6(r){let e=r.length;for(;--e>=0;)r[e]=0}const Rie=0,lz=1,Nie=2,Oie=3,kie=258,WC=29,G2=256,bg=G2+1+WC,H1=30,KC=19,dz=2*bg+1,Od=15,b7=16,Die=7,GC=256,hz=16,pz=17,yz=18,C_=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),jv=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Bie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),mz=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$ie=512,Du=new Array((bg+2)*2);i6(Du);const Lb=new Array(H1*2);i6(Lb);const gg=new Array($ie);i6(gg);const vg=new Array(kie-Oie+1);i6(vg);const QC=new Array(WC);i6(QC);const ex=new Array(H1);i6(ex);function g7(r,e,t,n,i){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}let bz,gz,vz;function v7(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}const xz=r=>r<256?gg[r]:gg[256+(r>>>7)],xg=(r,e)=>{r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255},_s=(r,e,t)=>{r.bi_valid>b7-t?(r.bi_buf|=e<<r.bi_valid&65535,xg(r,r.bi_buf),r.bi_buf=e>>b7-r.bi_valid,r.bi_valid+=t-b7):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)},Ic=(r,e,t)=>{_s(r,t[e*2],t[e*2+1])},wz=(r,e)=>{let t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1},Lie=r=>{r.bi_valid===16?(xg(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},Uie=(r,e)=>{const t=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,c=e.stat_desc.max_length;let u,f,l,d,h,y,p=0;for(d=0;d<=Od;d++)r.bl_count[d]=0;for(t[r.heap[r.heap_max]*2+1]=0,u=r.heap_max+1;u<dz;u++)f=r.heap[u],d=t[t[f*2+1]*2+1]+1,d>c&&(d=c,p++),t[f*2+1]=d,!(f>n)&&(r.bl_count[d]++,h=0,f>=o&&(h=a[f-o]),y=t[f*2],r.opt_len+=y*(d+h),s&&(r.static_len+=y*(i[f*2+1]+h)));if(p!==0){do{for(d=c-1;r.bl_count[d]===0;)d--;r.bl_count[d]--,r.bl_count[d+1]+=2,r.bl_count[c]--,p-=2}while(p>0);for(d=c;d!==0;d--)for(f=r.bl_count[d];f!==0;)l=r.heap[--u],!(l>n)&&(t[l*2+1]!==d&&(r.opt_len+=(d-t[l*2+1])*t[l*2],t[l*2+1]=d),f--)}},Ez=(r,e,t)=>{const n=new Array(Od+1);let i=0,s,a;for(s=1;s<=Od;s++)i=i+t[s-1]<<1,n[s]=i;for(a=0;a<=e;a++){let o=r[a*2+1];o!==0&&(r[a*2]=wz(n[o]++,o))}},Fie=()=>{let r,e,t,n,i;const s=new Array(Od+1);for(t=0,n=0;n<WC-1;n++)for(QC[n]=t,r=0;r<1<<C_[n];r++)vg[t++]=n;for(vg[t-1]=n,i=0,n=0;n<16;n++)for(ex[n]=i,r=0;r<1<<jv[n];r++)gg[i++]=n;for(i>>=7;n<H1;n++)for(ex[n]=i<<7,r=0;r<1<<jv[n]-7;r++)gg[256+i++]=n;for(e=0;e<=Od;e++)s[e]=0;for(r=0;r<=143;)Du[r*2+1]=8,r++,s[8]++;for(;r<=255;)Du[r*2+1]=9,r++,s[9]++;for(;r<=279;)Du[r*2+1]=7,r++,s[7]++;for(;r<=287;)Du[r*2+1]=8,r++,s[8]++;for(Ez(Du,bg+1,s),r=0;r<H1;r++)Lb[r*2+1]=5,Lb[r*2]=wz(r,5);bz=new g7(Du,C_,G2+1,bg,Od),gz=new g7(Lb,jv,0,H1,Od),vz=new g7(new Array(0),Bie,0,KC,Die)},Az=r=>{let e;for(e=0;e<bg;e++)r.dyn_ltree[e*2]=0;for(e=0;e<H1;e++)r.dyn_dtree[e*2]=0;for(e=0;e<KC;e++)r.bl_tree[e*2]=0;r.dyn_ltree[GC*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},_z=r=>{r.bi_valid>8?xg(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},Dk=(r,e,t,n)=>{const i=e*2,s=t*2;return r[i]<r[s]||r[i]===r[s]&&n[e]<=n[t]},x7=(r,e,t)=>{const n=r.heap[t];let i=t<<1;for(;i<=r.heap_len&&(i<r.heap_len&&Dk(e,r.heap[i+1],r.heap[i],r.depth)&&i++,!Dk(e,n,r.heap[i],r.depth));)r.heap[t]=r.heap[i],t=i,i<<=1;r.heap[t]=n},Bk=(r,e,t)=>{let n,i,s=0,a,o;if(r.sym_next!==0)do n=r.pending_buf[r.sym_buf+s++]&255,n+=(r.pending_buf[r.sym_buf+s++]&255)<<8,i=r.pending_buf[r.sym_buf+s++],n===0?Ic(r,i,e):(a=vg[i],Ic(r,a+G2+1,e),o=C_[a],o!==0&&(i-=QC[a],_s(r,i,o)),n--,a=xz(n),Ic(r,a,t),o=jv[a],o!==0&&(n-=ex[a],_s(r,n,o)));while(s<r.sym_next);Ic(r,GC,e)},I_=(r,e)=>{const t=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,c=-1,u;for(r.heap_len=0,r.heap_max=dz,a=0;a<s;a++)t[a*2]!==0?(r.heap[++r.heap_len]=c=a,r.depth[a]=0):t[a*2+1]=0;for(;r.heap_len<2;)u=r.heap[++r.heap_len]=c<2?++c:0,t[u*2]=1,r.depth[u]=0,r.opt_len--,i&&(r.static_len-=n[u*2+1]);for(e.max_code=c,a=r.heap_len>>1;a>=1;a--)x7(r,t,a);u=s;do a=r.heap[1],r.heap[1]=r.heap[r.heap_len--],x7(r,t,1),o=r.heap[1],r.heap[--r.heap_max]=a,r.heap[--r.heap_max]=o,t[u*2]=t[a*2]+t[o*2],r.depth[u]=(r.depth[a]>=r.depth[o]?r.depth[a]:r.depth[o])+1,t[a*2+1]=t[o*2+1]=u,r.heap[1]=u++,x7(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],Uie(r,e),Ez(t,c,r.bl_count)},$k=(r,e,t)=>{let n,i=-1,s,a=e[0*2+1],o=0,c=7,u=4;for(a===0&&(c=138,u=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)&&(o<u?r.bl_tree[s*2]+=o:s!==0?(s!==i&&r.bl_tree[s*2]++,r.bl_tree[hz*2]++):o<=10?r.bl_tree[pz*2]++:r.bl_tree[yz*2]++,o=0,i=s,a===0?(c=138,u=3):s===a?(c=6,u=3):(c=7,u=4))},Lk=(r,e,t)=>{let n,i=-1,s,a=e[0*2+1],o=0,c=7,u=4;for(a===0&&(c=138,u=3),n=0;n<=t;n++)if(s=a,a=e[(n+1)*2+1],!(++o<c&&s===a)){if(o<u)do Ic(r,s,r.bl_tree);while(--o!==0);else s!==0?(s!==i&&(Ic(r,s,r.bl_tree),o--),Ic(r,hz,r.bl_tree),_s(r,o-3,2)):o<=10?(Ic(r,pz,r.bl_tree),_s(r,o-3,3)):(Ic(r,yz,r.bl_tree),_s(r,o-11,7));o=0,i=s,a===0?(c=138,u=3):s===a?(c=6,u=3):(c=7,u=4)}},jie=r=>{let e;for($k(r,r.dyn_ltree,r.l_desc.max_code),$k(r,r.dyn_dtree,r.d_desc.max_code),I_(r,r.bl_desc),e=KC-1;e>=3&&r.bl_tree[mz[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e},qie=(r,e,t,n)=>{let i;for(_s(r,e-257,5),_s(r,t-1,5),_s(r,n-4,4),i=0;i<n;i++)_s(r,r.bl_tree[mz[i]*2+1],3);Lk(r,r.dyn_ltree,e-1),Lk(r,r.dyn_dtree,t-1)},Vie=r=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return Ok;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return kk;for(t=32;t<G2;t++)if(r.dyn_ltree[t*2]!==0)return kk;return Ok};let Uk=!1;const zie=r=>{Uk||(Fie(),Uk=!0),r.l_desc=new v7(r.dyn_ltree,bz),r.d_desc=new v7(r.dyn_dtree,gz),r.bl_desc=new v7(r.bl_tree,vz),r.bi_buf=0,r.bi_valid=0,Az(r)},Sz=(r,e,t,n)=>{_s(r,(Rie<<1)+(n?1:0),3),_z(r),xg(r,t),xg(r,~t),t&&r.pending_buf.set(r.window.subarray(e,e+t),r.pending),r.pending+=t},Hie=r=>{_s(r,lz<<1,3),Ic(r,GC,Du),Lie(r)},Wie=(r,e,t,n)=>{let i,s,a=0;r.level>0?(r.strm.data_type===Iie&&(r.strm.data_type=Vie(r)),I_(r,r.l_desc),I_(r,r.d_desc),a=jie(r),i=r.opt_len+3+7>>>3,s=r.static_len+3+7>>>3,s<=i&&(i=s)):i=s=t+5,t+4<=i&&e!==-1?Sz(r,e,t,n):r.strategy===Cie||s===i?(_s(r,(lz<<1)+(n?1:0),3),Bk(r,Du,Lb)):(_s(r,(Nie<<1)+(n?1:0),3),qie(r,r.l_desc.max_code+1,r.d_desc.max_code+1,a+1),Bk(r,r.dyn_ltree,r.dyn_dtree)),Az(r),n&&_z(r)},Kie=(r,e,t)=>(r.pending_buf[r.sym_buf+r.sym_next++]=e,r.pending_buf[r.sym_buf+r.sym_next++]=e>>8,r.pending_buf[r.sym_buf+r.sym_next++]=t,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(vg[t]+G2+1)*2]++,r.dyn_dtree[xz(e)*2]++),r.sym_next===r.sym_end);var Gie=zie,Qie=Sz,Zie=Wie,Jie=Kie,Yie=Hie,Xie={_tr_init:Gie,_tr_stored_block:Qie,_tr_flush_block:Zie,_tr_tally:Jie,_tr_align:Yie};const ese=(r,e,t,n)=>{let i=r&65535|0,s=r>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0};var wg=ese;const tse=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},rse=new Uint32Array(tse()),nse=(r,e,t,n)=>{const i=rse,s=n+t;r^=-1;for(let a=n;a<s;a++)r=r>>>8^i[(r^e[a])&255];return r^-1};var Rn=nse,kh={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Q2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ise,_tr_stored_block:R_,_tr_flush_block:sse,_tr_tally:g0,_tr_align:ase}=Xie,{Z_NO_FLUSH:v0,Z_PARTIAL_FLUSH:ose,Z_FULL_FLUSH:cse,Z_FINISH:ja,Z_BLOCK:Fk,Z_OK:ri,Z_STREAM_END:jk,Z_STREAM_ERROR:Hc,Z_DATA_ERROR:use,Z_BUF_ERROR:w7,Z_DEFAULT_COMPRESSION:fse,Z_FILTERED:lse,Z_HUFFMAN_ONLY:S8,Z_RLE:dse,Z_FIXED:hse,Z_DEFAULT_STRATEGY:pse,Z_UNKNOWN:yse,Z_DEFLATED:t4}=Q2,mse=9,bse=15,gse=8,vse=29,xse=256,N_=xse+1+vse,wse=30,Ese=19,Ase=2*N_+1,_se=15,Ct=3,r0=258,Wc=r0+Ct+1,Sse=32,dm=42,ZC=57,O_=69,k_=73,D_=91,B_=103,kd=113,hb=666,ns=1,s6=2,Dh=3,a6=4,Mse=3,Dd=(r,e)=>(r.msg=kh[e],e),qk=r=>r*2-(r>4?9:0),Cl=r=>{let e=r.length;for(;--e>=0;)r[e]=0},Pse=r=>{let e,t,n,i=r.w_size;e=r.hash_size,n=e;do t=r.head[--n],r.head[n]=t>=i?t-i:0;while(--e);e=i,n=e;do t=r.prev[--n],r.prev[n]=t>=i?t-i:0;while(--e)};let Tse=(r,e,t)=>(e<<r.hash_shift^t)&r.hash_mask,x0=Tse;const Gs=r=>{const e=r.state;let t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(r.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},ia=(r,e)=>{sse(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,Gs(r.strm)},Lt=(r,e)=>{r.pending_buf[r.pending++]=e},K6=(r,e)=>{r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255},$_=(r,e,t,n)=>{let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,e.set(r.input.subarray(r.next_in,r.next_in+i),t),r.state.wrap===1?r.adler=wg(r.adler,e,i,t):r.state.wrap===2&&(r.adler=Rn(r.adler,e,i,t)),r.next_in+=i,r.total_in+=i,i)},Mz=(r,e)=>{let t=r.max_chain_length,n=r.strstart,i,s,a=r.prev_length,o=r.nice_match;const c=r.strstart>r.w_size-Wc?r.strstart-(r.w_size-Wc):0,u=r.window,f=r.w_mask,l=r.prev,d=r.strstart+r0;let h=u[n+a-1],y=u[n+a];r.prev_length>=r.good_match&&(t>>=2),o>r.lookahead&&(o=r.lookahead);do if(i=e,!(u[i+a]!==y||u[i+a-1]!==h||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<d);if(s=r0-(d-n),n=d-r0,s>a){if(r.match_start=e,a=s,s>=o)break;h=u[n+a-1],y=u[n+a]}}while((e=l[e&f])>c&&--t!==0);return a<=r.lookahead?a:r.lookahead},hm=r=>{const e=r.w_size;let t,n,i;do{if(n=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-Wc)&&(r.window.set(r.window.subarray(e,e+e-n),0),r.match_start-=e,r.strstart-=e,r.block_start-=e,r.insert>r.strstart&&(r.insert=r.strstart),Pse(r),n+=e),r.strm.avail_in===0)break;if(t=$_(r.strm,r.window,r.strstart+r.lookahead,n),r.lookahead+=t,r.lookahead+r.insert>=Ct)for(i=r.strstart-r.insert,r.ins_h=r.window[i],r.ins_h=x0(r,r.ins_h,r.window[i+1]);r.insert&&(r.ins_h=x0(r,r.ins_h,r.window[i+Ct-1]),r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,r.insert--,!(r.lookahead+r.insert<Ct)););}while(r.lookahead<Wc&&r.strm.avail_in!==0)},Pz=(r,e)=>{let t=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,n,i,s,a=0,o=r.strm.avail_in;do{if(n=65535,s=r.bi_valid+42>>3,r.strm.avail_out<s||(s=r.strm.avail_out-s,i=r.strstart-r.block_start,n>i+r.strm.avail_in&&(n=i+r.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&e!==ja||e===v0||n!==i+r.strm.avail_in)))break;a=e===ja&&n===i+r.strm.avail_in?1:0,R_(r,0,0,a),r.pending_buf[r.pending-4]=n,r.pending_buf[r.pending-3]=n>>8,r.pending_buf[r.pending-2]=~n,r.pending_buf[r.pending-1]=~n>>8,Gs(r.strm),i&&(i>n&&(i=n),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+i),r.strm.next_out),r.strm.next_out+=i,r.strm.avail_out-=i,r.strm.total_out+=i,r.block_start+=i,n-=i),n&&($_(r.strm,r.strm.output,r.strm.next_out,n),r.strm.next_out+=n,r.strm.avail_out-=n,r.strm.total_out+=n)}while(a===0);return o-=r.strm.avail_in,o&&(o>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=o&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-o,r.strm.next_in),r.strstart),r.strstart+=o,r.insert+=o>r.w_size-r.insert?r.w_size-r.insert:o),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),a?a6:e!==v0&&e!==ja&&r.strm.avail_in===0&&r.strstart===r.block_start?s6:(s=r.window_size-r.strstart,r.strm.avail_in>s&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,s+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),s>r.strm.avail_in&&(s=r.strm.avail_in),s&&($_(r.strm,r.window,r.strstart,s),r.strstart+=s,r.insert+=s>r.w_size-r.insert?r.w_size-r.insert:s),r.high_water<r.strstart&&(r.high_water=r.strstart),s=r.bi_valid+42>>3,s=r.pending_buf_size-s>65535?65535:r.pending_buf_size-s,t=s>r.w_size?r.w_size:s,i=r.strstart-r.block_start,(i>=t||(i||e===ja)&&e!==v0&&r.strm.avail_in===0&&i<=s)&&(n=i>s?s:i,a=e===ja&&r.strm.avail_in===0&&n===i?1:0,R_(r,r.block_start,n,a),r.block_start+=n,Gs(r.strm)),a?Dh:ns)},E7=(r,e)=>{let t,n;for(;;){if(r.lookahead<Wc){if(hm(r),r.lookahead<Wc&&e===v0)return ns;if(r.lookahead===0)break}if(t=0,r.lookahead>=Ct&&(r.ins_h=x0(r,r.ins_h,r.window[r.strstart+Ct-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-Wc&&(r.match_length=Mz(r,t)),r.match_length>=Ct)if(n=g0(r,r.strstart-r.match_start,r.match_length-Ct),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=Ct){r.match_length--;do r.strstart++,r.ins_h=x0(r,r.ins_h,r.window[r.strstart+Ct-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=x0(r,r.ins_h,r.window[r.strstart+1]);else n=g0(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(ia(r,!1),r.strm.avail_out===0))return ns}return r.insert=r.strstart<Ct-1?r.strstart:Ct-1,e===ja?(ia(r,!0),r.strm.avail_out===0?Dh:a6):r.sym_next&&(ia(r,!1),r.strm.avail_out===0)?ns:s6},Bp=(r,e)=>{let t,n,i;for(;;){if(r.lookahead<Wc){if(hm(r),r.lookahead<Wc&&e===v0)return ns;if(r.lookahead===0)break}if(t=0,r.lookahead>=Ct&&(r.ins_h=x0(r,r.ins_h,r.window[r.strstart+Ct-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=Ct-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-Wc&&(r.match_length=Mz(r,t),r.match_length<=5&&(r.strategy===lse||r.match_length===Ct&&r.strstart-r.match_start>4096)&&(r.match_length=Ct-1)),r.prev_length>=Ct&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-Ct,n=g0(r,r.strstart-1-r.prev_match,r.prev_length-Ct),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=x0(r,r.ins_h,r.window[r.strstart+Ct-1]),t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=Ct-1,r.strstart++,n&&(ia(r,!1),r.strm.avail_out===0))return ns}else if(r.match_available){if(n=g0(r,0,r.window[r.strstart-1]),n&&ia(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return ns}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=g0(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<Ct-1?r.strstart:Ct-1,e===ja?(ia(r,!0),r.strm.avail_out===0?Dh:a6):r.sym_next&&(ia(r,!1),r.strm.avail_out===0)?ns:s6},Cse=(r,e)=>{let t,n,i,s;const a=r.window;for(;;){if(r.lookahead<=r0){if(hm(r),r.lookahead<=r0&&e===v0)return ns;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=Ct&&r.strstart>0&&(i=r.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){s=r.strstart+r0;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);r.match_length=r0-(s-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=Ct?(t=g0(r,1,r.match_length-Ct),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=g0(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(ia(r,!1),r.strm.avail_out===0))return ns}return r.insert=0,e===ja?(ia(r,!0),r.strm.avail_out===0?Dh:a6):r.sym_next&&(ia(r,!1),r.strm.avail_out===0)?ns:s6},Ise=(r,e)=>{let t;for(;;){if(r.lookahead===0&&(hm(r),r.lookahead===0)){if(e===v0)return ns;break}if(r.match_length=0,t=g0(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(ia(r,!1),r.strm.avail_out===0))return ns}return r.insert=0,e===ja?(ia(r,!0),r.strm.avail_out===0?Dh:a6):r.sym_next&&(ia(r,!1),r.strm.avail_out===0)?ns:s6};function sc(r,e,t,n,i){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=i}const pb=[new sc(0,0,0,0,Pz),new sc(4,4,8,4,E7),new sc(4,5,16,8,E7),new sc(4,6,32,32,E7),new sc(4,4,16,16,Bp),new sc(8,16,32,32,Bp),new sc(8,16,128,128,Bp),new sc(8,32,128,256,Bp),new sc(32,128,258,1024,Bp),new sc(32,258,258,4096,Bp)],Rse=r=>{r.window_size=2*r.w_size,Cl(r.head),r.max_lazy_match=pb[r.level].max_lazy,r.good_match=pb[r.level].good_length,r.nice_match=pb[r.level].nice_length,r.max_chain_length=pb[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=Ct-1,r.match_available=0,r.ins_h=0};function Nse(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=t4,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ase*2),this.dyn_dtree=new Uint16Array((2*wse+1)*2),this.bl_tree=new Uint16Array((2*Ese+1)*2),Cl(this.dyn_ltree),Cl(this.dyn_dtree),Cl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(_se+1),this.heap=new Uint16Array(2*N_+1),Cl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*N_+1),Cl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Z2=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.status!==dm&&e.status!==ZC&&e.status!==O_&&e.status!==k_&&e.status!==D_&&e.status!==B_&&e.status!==kd&&e.status!==hb?1:0},Tz=r=>{if(Z2(r))return Dd(r,Hc);r.total_in=r.total_out=0,r.data_type=yse;const e=r.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?ZC:e.wrap?dm:kd,r.adler=e.wrap===2?0:1,e.last_flush=-2,ise(e),ri},Cz=r=>{const e=Tz(r);return e===ri&&Rse(r.state),e},Ose=(r,e)=>Z2(r)||r.state.wrap!==2?Hc:(r.state.gzhead=e,ri),Iz=(r,e,t,n,i,s)=>{if(!r)return Hc;let a=1;if(e===fse&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>mse||t!==t4||n<8||n>15||e<0||e>9||s<0||s>hse||n===8&&a!==1)return Dd(r,Hc);n===8&&(n=9);const o=new Nse;return r.state=o,o.strm=r,o.status=dm,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Ct-1)/Ct),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=e,o.strategy=s,o.method=t,Cz(r)},kse=(r,e)=>Iz(r,e,t4,bse,gse,pse),Dse=(r,e)=>{if(Z2(r)||e>Fk||e<0)return r?Dd(r,Hc):Hc;const t=r.state;if(!r.output||r.avail_in!==0&&!r.input||t.status===hb&&e!==ja)return Dd(r,r.avail_out===0?w7:Hc);const n=t.last_flush;if(t.last_flush=e,t.pending!==0){if(Gs(r),r.avail_out===0)return t.last_flush=-1,ri}else if(r.avail_in===0&&qk(e)<=qk(n)&&e!==ja)return Dd(r,w7);if(t.status===hb&&r.avail_in!==0)return Dd(r,w7);if(t.status===dm&&t.wrap===0&&(t.status=kd),t.status===dm){let i=t4+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=S8||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,i|=s<<6,t.strstart!==0&&(i|=Sse),i+=31-i%31,K6(t,i),t.strstart!==0&&(K6(t,r.adler>>>16),K6(t,r.adler&65535)),r.adler=1,t.status=kd,Gs(r),t.pending!==0)return t.last_flush=-1,ri}if(t.status===ZC){if(r.adler=0,Lt(t,31),Lt(t,139),Lt(t,8),t.gzhead)Lt(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Lt(t,t.gzhead.time&255),Lt(t,t.gzhead.time>>8&255),Lt(t,t.gzhead.time>>16&255),Lt(t,t.gzhead.time>>24&255),Lt(t,t.level===9?2:t.strategy>=S8||t.level<2?4:0),Lt(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Lt(t,t.gzhead.extra.length&255),Lt(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(r.adler=Rn(r.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=O_;else if(Lt(t,0),Lt(t,0),Lt(t,0),Lt(t,0),Lt(t,0),Lt(t,t.level===9?2:t.strategy>=S8||t.level<2?4:0),Lt(t,Mse),t.status=kd,Gs(r),t.pending!==0)return t.last_flush=-1,ri}if(t.status===O_){if(t.gzhead.extra){let i=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(r.adler=Rn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=o,Gs(r),t.pending!==0)return t.last_flush=-1,ri;i=0,s-=o}let a=new Uint8Array(t.gzhead.extra);t.pending_buf.set(a.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>i&&(r.adler=Rn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=k_}if(t.status===k_){if(t.gzhead.name){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(r.adler=Rn(r.adler,t.pending_buf,t.pending-i,i)),Gs(r),t.pending!==0)return t.last_flush=-1,ri;i=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,Lt(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(r.adler=Rn(r.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=D_}if(t.status===D_){if(t.gzhead.comment){let i=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>i&&(r.adler=Rn(r.adler,t.pending_buf,t.pending-i,i)),Gs(r),t.pending!==0)return t.last_flush=-1,ri;i=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,Lt(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>i&&(r.adler=Rn(r.adler,t.pending_buf,t.pending-i,i))}t.status=B_}if(t.status===B_){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Gs(r),t.pending!==0))return t.last_flush=-1,ri;Lt(t,r.adler&255),Lt(t,r.adler>>8&255),r.adler=0}if(t.status=kd,Gs(r),t.pending!==0)return t.last_flush=-1,ri}if(r.avail_in!==0||t.lookahead!==0||e!==v0&&t.status!==hb){let i=t.level===0?Pz(t,e):t.strategy===S8?Ise(t,e):t.strategy===dse?Cse(t,e):pb[t.level].func(t,e);if((i===Dh||i===a6)&&(t.status=hb),i===ns||i===Dh)return r.avail_out===0&&(t.last_flush=-1),ri;if(i===s6&&(e===ose?ase(t):e!==Fk&&(R_(t,0,0,!1),e===cse&&(Cl(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Gs(r),r.avail_out===0))return t.last_flush=-1,ri}return e!==ja?ri:t.wrap<=0?jk:(t.wrap===2?(Lt(t,r.adler&255),Lt(t,r.adler>>8&255),Lt(t,r.adler>>16&255),Lt(t,r.adler>>24&255),Lt(t,r.total_in&255),Lt(t,r.total_in>>8&255),Lt(t,r.total_in>>16&255),Lt(t,r.total_in>>24&255)):(K6(t,r.adler>>>16),K6(t,r.adler&65535)),Gs(r),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ri:jk)},Bse=r=>{if(Z2(r))return Hc;const e=r.state.status;return r.state=null,e===kd?Dd(r,use):ri},$se=(r,e)=>{let t=e.length;if(Z2(r))return Hc;const n=r.state,i=n.wrap;if(i===2||i===1&&n.status!==dm||n.lookahead)return Hc;if(i===1&&(r.adler=wg(r.adler,e,t,0)),n.wrap=0,t>=n.w_size){i===0&&(Cl(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(e.subarray(t-n.w_size,t),0),e=c,t=n.w_size}const s=r.avail_in,a=r.next_in,o=r.input;for(r.avail_in=t,r.next_in=0,r.input=e,hm(n);n.lookahead>=Ct;){let c=n.strstart,u=n.lookahead-(Ct-1);do n.ins_h=x0(n,n.ins_h,n.window[c+Ct-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--u);n.strstart=c,n.lookahead=Ct-1,hm(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Ct-1,n.match_available=0,r.next_in=a,r.input=o,r.avail_in=s,n.wrap=i,ri};var Lse=kse,Use=Iz,Fse=Cz,jse=Tz,qse=Ose,Vse=Dse,zse=Bse,Hse=$se,Wse="pako deflate (from Nodeca project)",Ub={deflateInit:Lse,deflateInit2:Use,deflateReset:Fse,deflateResetKeep:jse,deflateSetHeader:qse,deflate:Vse,deflateEnd:zse,deflateSetDictionary:Hse,deflateInfo:Wse};const Kse=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var Gse=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Kse(t,n)&&(r[n]=t[n])}}return r},Qse=r=>{let e=0;for(let n=0,i=r.length;n<i;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,i=0,s=r.length;n<s;n++){let a=r[n];t.set(a,i),i+=a.length}return t},r4={assign:Gse,flattenChunks:Qse};let Rz=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Rz=!1}const Eg=new Uint8Array(256);for(let r=0;r<256;r++)Eg[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;Eg[254]=Eg[254]=1;var Zse=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,i,s,a=r.length,o=0;for(i=0;i<a;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),s=0,i=0;s<o;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const Jse=(r,e)=>{if(e<65534&&r.subarray&&Rz)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var Yse=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,i;const s=new Array(t*2);for(i=0,n=0;n<t;){let a=r[n++];if(a<128){s[i++]=a;continue}let o=Eg[a];if(o>4){s[i++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<t;)a=a<<6|r[n++]&63,o--;if(o>1){s[i++]=65533;continue}a<65536?s[i++]=a:(a-=65536,s[i++]=55296|a>>10&1023,s[i++]=56320|a&1023)}return Jse(s,i)},Xse=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+Eg[r[t]]>e?t:e},Ag={string2buf:Zse,buf2string:Yse,utf8border:Xse};function eae(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Nz=eae;const Oz=Object.prototype.toString,{Z_NO_FLUSH:tae,Z_SYNC_FLUSH:rae,Z_FULL_FLUSH:nae,Z_FINISH:iae,Z_OK:tx,Z_STREAM_END:sae,Z_DEFAULT_COMPRESSION:aae,Z_DEFAULT_STRATEGY:oae,Z_DEFLATED:cae}=Q2;function J2(r){this.options=r4.assign({level:aae,method:cae,chunkSize:16384,windowBits:15,memLevel:8,strategy:oae},r||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nz,this.strm.avail_out=0;let t=Ub.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==tx)throw new Error(kh[t]);if(e.header&&Ub.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=Ag.string2buf(e.dictionary):Oz.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=Ub.deflateSetDictionary(this.strm,n),t!==tx)throw new Error(kh[t]);this._dict_set=!0}}J2.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?iae:tae,typeof r=="string"?t.input=Ag.string2buf(r):Oz.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===rae||s===nae)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(i=Ub.deflate(t,s),i===sae)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Ub.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===tx;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};J2.prototype.onData=function(r){this.chunks.push(r)};J2.prototype.onEnd=function(r){r===tx&&(this.result=r4.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function JC(r,e){const t=new J2(e);if(t.push(r,!0),t.err)throw t.msg||kh[t.err];return t.result}function uae(r,e){return e=e||{},e.raw=!0,JC(r,e)}function fae(r,e){return e=e||{},e.gzip=!0,JC(r,e)}var lae=J2,dae=JC,hae=uae,pae=fae,yae={Deflate:lae,deflate:dae,deflateRaw:hae,gzip:pae};const M8=16209,mae=16191;var bae=function(e,t){let n,i,s,a,o,c,u,f,l,d,h,y,p,g,m,v,b,_,C,N,x,I,$,j;const O=e.state;n=e.next_in,$=e.input,i=n+(e.avail_in-5),s=e.next_out,j=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),c=O.dmax,u=O.wsize,f=O.whave,l=O.wnext,d=O.window,h=O.hold,y=O.bits,p=O.lencode,g=O.distcode,m=(1<<O.lenbits)-1,v=(1<<O.distbits)-1;e:do{y<15&&(h+=$[n++]<<y,y+=8,h+=$[n++]<<y,y+=8),b=p[h&m];t:for(;;){if(_=b>>>24,h>>>=_,y-=_,_=b>>>16&255,_===0)j[s++]=b&65535;else if(_&16){C=b&65535,_&=15,_&&(y<_&&(h+=$[n++]<<y,y+=8),C+=h&(1<<_)-1,h>>>=_,y-=_),y<15&&(h+=$[n++]<<y,y+=8,h+=$[n++]<<y,y+=8),b=g[h&v];r:for(;;){if(_=b>>>24,h>>>=_,y-=_,_=b>>>16&255,_&16){if(N=b&65535,_&=15,y<_&&(h+=$[n++]<<y,y+=8,y<_&&(h+=$[n++]<<y,y+=8)),N+=h&(1<<_)-1,N>c){e.msg="invalid distance too far back",O.mode=M8;break e}if(h>>>=_,y-=_,_=s-a,N>_){if(_=N-_,_>f&&O.sane){e.msg="invalid distance too far back",O.mode=M8;break e}if(x=0,I=d,l===0){if(x+=u-_,_<C){C-=_;do j[s++]=d[x++];while(--_);x=s-N,I=j}}else if(l<_){if(x+=u+l-_,_-=l,_<C){C-=_;do j[s++]=d[x++];while(--_);if(x=0,l<C){_=l,C-=_;do j[s++]=d[x++];while(--_);x=s-N,I=j}}}else if(x+=l-_,_<C){C-=_;do j[s++]=d[x++];while(--_);x=s-N,I=j}for(;C>2;)j[s++]=I[x++],j[s++]=I[x++],j[s++]=I[x++],C-=3;C&&(j[s++]=I[x++],C>1&&(j[s++]=I[x++]))}else{x=s-N;do j[s++]=j[x++],j[s++]=j[x++],j[s++]=j[x++],C-=3;while(C>2);C&&(j[s++]=j[x++],C>1&&(j[s++]=j[x++]))}}else if(_&64){e.msg="invalid distance code",O.mode=M8;break e}else{b=g[(b&65535)+(h&(1<<_)-1)];continue r}break}}else if(_&64)if(_&32){O.mode=mae;break e}else{e.msg="invalid literal/length code",O.mode=M8;break e}else{b=p[(b&65535)+(h&(1<<_)-1)];continue t}break}}while(n<i&&s<o);C=y>>3,n-=C,y-=C<<3,h&=(1<<y)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<o?257+(o-s):257-(s-o),O.hold=h,O.bits=y};const $p=15,Vk=852,zk=592,Hk=0,A7=1,Wk=2,gae=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vae=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wae=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Eae=(r,e,t,n,i,s,a,o)=>{const c=o.bits;let u=0,f=0,l=0,d=0,h=0,y=0,p=0,g=0,m=0,v=0,b,_,C,N,x,I=null,$;const j=new Uint16Array($p+1),O=new Uint16Array($p+1);let E=null,S,A,w;for(u=0;u<=$p;u++)j[u]=0;for(f=0;f<n;f++)j[e[t+f]]++;for(h=c,d=$p;d>=1&&j[d]===0;d--);if(h>d&&(h=d),d===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,o.bits=1,0;for(l=1;l<d&&j[l]===0;l++);for(h<l&&(h=l),g=1,u=1;u<=$p;u++)if(g<<=1,g-=j[u],g<0)return-1;if(g>0&&(r===Hk||d!==1))return-1;for(O[1]=0,u=1;u<$p;u++)O[u+1]=O[u]+j[u];for(f=0;f<n;f++)e[t+f]!==0&&(a[O[e[t+f]]++]=f);if(r===Hk?(I=E=a,$=20):r===A7?(I=gae,E=vae,$=257):(I=xae,E=wae,$=0),v=0,f=0,u=l,x=s,y=h,p=0,C=-1,m=1<<h,N=m-1,r===A7&&m>Vk||r===Wk&&m>zk)return 1;for(;;){S=u-p,a[f]+1<$?(A=0,w=a[f]):a[f]>=$?(A=E[a[f]-$],w=I[a[f]-$]):(A=96,w=0),b=1<<u-p,_=1<<y,l=_;do _-=b,i[x+(v>>p)+_]=S<<24|A<<16|w|0;while(_!==0);for(b=1<<u-1;v&b;)b>>=1;if(b!==0?(v&=b-1,v+=b):v=0,f++,--j[u]===0){if(u===d)break;u=e[t+a[f]]}if(u>h&&(v&N)!==C){for(p===0&&(p=h),x+=l,y=u-p,g=1<<y;y+p<d&&(g-=j[y+p],!(g<=0));)y++,g<<=1;if(m+=1<<y,r===A7&&m>Vk||r===Wk&&m>zk)return 1;C=v&N,i[C]=h<<24|y<<16|x-s|0}}return v!==0&&(i[x+v]=u-p<<24|64<<16|0),o.bits=h,0};var Fb=Eae;const Aae=0,kz=1,Dz=2,{Z_FINISH:Kk,Z_BLOCK:_ae,Z_TREES:P8,Z_OK:Bh,Z_STREAM_END:Sae,Z_NEED_DICT:Mae,Z_STREAM_ERROR:Ya,Z_DATA_ERROR:Bz,Z_MEM_ERROR:$z,Z_BUF_ERROR:Pae,Z_DEFLATED:Gk}=Q2,n4=16180,Qk=16181,Zk=16182,Jk=16183,Yk=16184,Xk=16185,eD=16186,tD=16187,rD=16188,nD=16189,rx=16190,xu=16191,_7=16192,iD=16193,S7=16194,sD=16195,aD=16196,oD=16197,cD=16198,T8=16199,C8=16200,uD=16201,fD=16202,lD=16203,dD=16204,hD=16205,M7=16206,pD=16207,yD=16208,Sr=16209,Lz=16210,Uz=16211,Tae=852,Cae=592,Iae=15,Rae=Iae,mD=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function Nae(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const bp=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<n4||e.mode>Uz?1:0},Fz=r=>{if(bp(r))return Ya;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=n4,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Tae),e.distcode=e.distdyn=new Int32Array(Cae),e.sane=1,e.back=-1,Bh},jz=r=>{if(bp(r))return Ya;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,Fz(r)},qz=(r,e)=>{let t;if(bp(r))return Ya;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ya:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,jz(r))},Vz=(r,e)=>{if(!r)return Ya;const t=new Nae;r.state=t,t.strm=r,t.window=null,t.mode=n4;const n=qz(r,e);return n!==Bh&&(r.state=null),n},Oae=r=>Vz(r,Rae);let bD=!0,P7,T7;const kae=r=>{if(bD){P7=new Int32Array(512),T7=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Fb(kz,r.lens,0,288,P7,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Fb(Dz,r.lens,0,32,T7,0,r.work,{bits:5}),bD=!1}r.lencode=P7,r.lenbits=9,r.distcode=T7,r.distbits=5},zz=(r,e,t,n)=>{let i;const s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(e.subarray(t-n,t-n+i),s.wnext),n-=i,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},Dae=(r,e)=>{let t,n,i,s,a,o,c,u,f,l,d,h,y,p,g=0,m,v,b,_,C,N,x,I;const $=new Uint8Array(4);let j,O;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(bp(r)||!r.output||!r.input&&r.avail_in!==0)return Ya;t=r.state,t.mode===xu&&(t.mode=_7),a=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,u=t.hold,f=t.bits,l=o,d=c,I=Bh;e:for(;;)switch(t.mode){case n4:if(t.wrap===0){t.mode=_7;break}for(;f<16;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(t.wrap&2&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,$[0]=u&255,$[1]=u>>>8&255,t.check=Rn(t.check,$,2,0),u=0,f=0,t.mode=Qk;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",t.mode=Sr;break}if((u&15)!==Gk){r.msg="unknown compression method",t.mode=Sr;break}if(u>>>=4,f-=4,x=(u&15)+8,t.wbits===0&&(t.wbits=x),x>15||x>t.wbits){r.msg="invalid window size",t.mode=Sr;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=u&512?nD:xu,u=0,f=0;break;case Qk:for(;f<16;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(t.flags=u,(t.flags&255)!==Gk){r.msg="unknown compression method",t.mode=Sr;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Sr;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&t.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,t.check=Rn(t.check,$,2,0)),u=0,f=0,t.mode=Zk;case Zk:for(;f<32;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}t.head&&(t.head.time=u),t.flags&512&&t.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,$[2]=u>>>16&255,$[3]=u>>>24&255,t.check=Rn(t.check,$,4,0)),u=0,f=0,t.mode=Jk;case Jk:for(;f<16;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&t.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,t.check=Rn(t.check,$,2,0)),u=0,f=0,t.mode=Yk;case Yk:if(t.flags&1024){for(;f<16;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&t.wrap&4&&($[0]=u&255,$[1]=u>>>8&255,t.check=Rn(t.check,$,2,0)),u=0,f=0}else t.head&&(t.head.extra=null);t.mode=Xk;case Xk:if(t.flags&1024&&(h=t.length,h>o&&(h=o),h&&(t.head&&(x=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+h),x)),t.flags&512&&t.wrap&4&&(t.check=Rn(t.check,n,h,s)),o-=h,s+=h,t.length-=h),t.length))break e;t.length=0,t.mode=eD;case eD:if(t.flags&2048){if(o===0)break e;h=0;do x=n[s+h++],t.head&&x&&t.length<65536&&(t.head.name+=String.fromCharCode(x));while(x&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=Rn(t.check,n,h,s)),o-=h,s+=h,x)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=tD;case tD:if(t.flags&4096){if(o===0)break e;h=0;do x=n[s+h++],t.head&&x&&t.length<65536&&(t.head.comment+=String.fromCharCode(x));while(x&&h<o);if(t.flags&512&&t.wrap&4&&(t.check=Rn(t.check,n,h,s)),o-=h,s+=h,x)break e}else t.head&&(t.head.comment=null);t.mode=rD;case rD:if(t.flags&512){for(;f<16;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(t.wrap&4&&u!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Sr;break}u=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=xu;break;case nD:for(;f<32;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}r.adler=t.check=mD(u),u=0,f=0,t.mode=rx;case rx:if(t.havedict===0)return r.next_out=a,r.avail_out=c,r.next_in=s,r.avail_in=o,t.hold=u,t.bits=f,Mae;r.adler=t.check=1,t.mode=xu;case xu:if(e===_ae||e===P8)break e;case _7:if(t.last){u>>>=f&7,f-=f&7,t.mode=M7;break}for(;f<3;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}switch(t.last=u&1,u>>>=1,f-=1,u&3){case 0:t.mode=iD;break;case 1:if(kae(t),t.mode=T8,e===P8){u>>>=2,f-=2;break e}break;case 2:t.mode=aD;break;case 3:r.msg="invalid block type",t.mode=Sr}u>>>=2,f-=2;break;case iD:for(u>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Sr;break}if(t.length=u&65535,u=0,f=0,t.mode=S7,e===P8)break e;case S7:t.mode=sD;case sD:if(h=t.length,h){if(h>o&&(h=o),h>c&&(h=c),h===0)break e;i.set(n.subarray(s,s+h),a),o-=h,s+=h,c-=h,a+=h,t.length-=h;break}t.mode=xu;break;case aD:for(;f<14;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(t.nlen=(u&31)+257,u>>>=5,f-=5,t.ndist=(u&31)+1,u>>>=5,f-=5,t.ncode=(u&15)+4,u>>>=4,f-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Sr;break}t.have=0,t.mode=oD;case oD:for(;t.have<t.ncode;){for(;f<3;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}t.lens[E[t.have++]]=u&7,u>>>=3,f-=3}for(;t.have<19;)t.lens[E[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,j={bits:t.lenbits},I=Fb(Aae,t.lens,0,19,t.lencode,0,t.work,j),t.lenbits=j.bits,I){r.msg="invalid code lengths set",t.mode=Sr;break}t.have=0,t.mode=cD;case cD:for(;t.have<t.nlen+t.ndist;){for(;g=t.lencode[u&(1<<t.lenbits)-1],m=g>>>24,v=g>>>16&255,b=g&65535,!(m<=f);){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(b<16)u>>>=m,f-=m,t.lens[t.have++]=b;else{if(b===16){for(O=m+2;f<O;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(u>>>=m,f-=m,t.have===0){r.msg="invalid bit length repeat",t.mode=Sr;break}x=t.lens[t.have-1],h=3+(u&3),u>>>=2,f-=2}else if(b===17){for(O=m+3;f<O;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}u>>>=m,f-=m,x=0,h=3+(u&7),u>>>=3,f-=3}else{for(O=m+7;f<O;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}u>>>=m,f-=m,x=0,h=11+(u&127),u>>>=7,f-=7}if(t.have+h>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Sr;break}for(;h--;)t.lens[t.have++]=x}}if(t.mode===Sr)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Sr;break}if(t.lenbits=9,j={bits:t.lenbits},I=Fb(kz,t.lens,0,t.nlen,t.lencode,0,t.work,j),t.lenbits=j.bits,I){r.msg="invalid literal/lengths set",t.mode=Sr;break}if(t.distbits=6,t.distcode=t.distdyn,j={bits:t.distbits},I=Fb(Dz,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,j),t.distbits=j.bits,I){r.msg="invalid distances set",t.mode=Sr;break}if(t.mode=T8,e===P8)break e;case T8:t.mode=C8;case C8:if(o>=6&&c>=258){r.next_out=a,r.avail_out=c,r.next_in=s,r.avail_in=o,t.hold=u,t.bits=f,bae(r,d),a=r.next_out,i=r.output,c=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,u=t.hold,f=t.bits,t.mode===xu&&(t.back=-1);break}for(t.back=0;g=t.lencode[u&(1<<t.lenbits)-1],m=g>>>24,v=g>>>16&255,b=g&65535,!(m<=f);){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(v&&!(v&240)){for(_=m,C=v,N=b;g=t.lencode[N+((u&(1<<_+C)-1)>>_)],m=g>>>24,v=g>>>16&255,b=g&65535,!(_+m<=f);){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}u>>>=_,f-=_,t.back+=_}if(u>>>=m,f-=m,t.back+=m,t.length=b,v===0){t.mode=hD;break}if(v&32){t.back=-1,t.mode=xu;break}if(v&64){r.msg="invalid literal/length code",t.mode=Sr;break}t.extra=v&15,t.mode=uD;case uD:if(t.extra){for(O=t.extra;f<O;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=fD;case fD:for(;g=t.distcode[u&(1<<t.distbits)-1],m=g>>>24,v=g>>>16&255,b=g&65535,!(m<=f);){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(!(v&240)){for(_=m,C=v,N=b;g=t.distcode[N+((u&(1<<_+C)-1)>>_)],m=g>>>24,v=g>>>16&255,b=g&65535,!(_+m<=f);){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}u>>>=_,f-=_,t.back+=_}if(u>>>=m,f-=m,t.back+=m,v&64){r.msg="invalid distance code",t.mode=Sr;break}t.offset=b,t.extra=v&15,t.mode=lD;case lD:if(t.extra){for(O=t.extra;f<O;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Sr;break}t.mode=dD;case dD:if(c===0)break e;if(h=d-c,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Sr;break}h>t.wnext?(h-=t.wnext,y=t.wsize-h):y=t.wnext-h,h>t.length&&(h=t.length),p=t.window}else p=i,y=a-t.offset,h=t.length;h>c&&(h=c),c-=h,t.length-=h;do i[a++]=p[y++];while(--h);t.length===0&&(t.mode=C8);break;case hD:if(c===0)break e;i[a++]=t.length,c--,t.mode=C8;break;case M7:if(t.wrap){for(;f<32;){if(o===0)break e;o--,u|=n[s++]<<f,f+=8}if(d-=c,r.total_out+=d,t.total+=d,t.wrap&4&&d&&(r.adler=t.check=t.flags?Rn(t.check,i,d,a-d):wg(t.check,i,d,a-d)),d=c,t.wrap&4&&(t.flags?u:mD(u))!==t.check){r.msg="incorrect data check",t.mode=Sr;break}u=0,f=0}t.mode=pD;case pD:if(t.wrap&&t.flags){for(;f<32;){if(o===0)break e;o--,u+=n[s++]<<f,f+=8}if(t.wrap&4&&u!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Sr;break}u=0,f=0}t.mode=yD;case yD:I=Sae;break e;case Sr:I=Bz;break e;case Lz:return $z;case Uz:default:return Ya}return r.next_out=a,r.avail_out=c,r.next_in=s,r.avail_in=o,t.hold=u,t.bits=f,(t.wsize||d!==r.avail_out&&t.mode<Sr&&(t.mode<M7||e!==Kk))&&zz(r,r.output,r.next_out,d-r.avail_out),l-=r.avail_in,d-=r.avail_out,r.total_in+=l,r.total_out+=d,t.total+=d,t.wrap&4&&d&&(r.adler=t.check=t.flags?Rn(t.check,i,d,r.next_out-d):wg(t.check,i,d,r.next_out-d)),r.data_type=t.bits+(t.last?64:0)+(t.mode===xu?128:0)+(t.mode===T8||t.mode===S7?256:0),(l===0&&d===0||e===Kk)&&I===Bh&&(I=Pae),I},Bae=r=>{if(bp(r))return Ya;let e=r.state;return e.window&&(e.window=null),r.state=null,Bh},$ae=(r,e)=>{if(bp(r))return Ya;const t=r.state;return t.wrap&2?(t.head=e,e.done=!1,Bh):Ya},Lae=(r,e)=>{const t=e.length;let n,i,s;return bp(r)||(n=r.state,n.wrap!==0&&n.mode!==rx)?Ya:n.mode===rx&&(i=1,i=wg(i,e,t,0),i!==n.check)?Bz:(s=zz(r,e,t,t),s?(n.mode=Lz,$z):(n.havedict=1,Bh))};var Uae=jz,Fae=qz,jae=Fz,qae=Oae,Vae=Vz,zae=Dae,Hae=Bae,Wae=$ae,Kae=Lae,Gae="pako inflate (from Nodeca project)",Bu={inflateReset:Uae,inflateReset2:Fae,inflateResetKeep:jae,inflateInit:qae,inflateInit2:Vae,inflate:zae,inflateEnd:Hae,inflateGetHeader:Wae,inflateSetDictionary:Kae,inflateInfo:Gae};function Qae(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Zae=Qae;const Hz=Object.prototype.toString,{Z_NO_FLUSH:Jae,Z_FINISH:Yae,Z_OK:_g,Z_STREAM_END:C7,Z_NEED_DICT:I7,Z_STREAM_ERROR:Xae,Z_DATA_ERROR:gD,Z_MEM_ERROR:eoe}=Q2;function Y2(r){this.options=r4.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nz,this.strm.avail_out=0;let t=Bu.inflateInit2(this.strm,e.windowBits);if(t!==_g)throw new Error(kh[t]);if(this.header=new Zae,Bu.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Ag.string2buf(e.dictionary):Hz.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Bu.inflateSetDictionary(this.strm,e.dictionary),t!==_g)))throw new Error(kh[t])}Y2.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?Yae:Jae,Hz.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Bu.inflate(t,a),s===I7&&i&&(s=Bu.inflateSetDictionary(t,i),s===_g?s=Bu.inflate(t,a):s===gD&&(s=I7));t.avail_in>0&&s===C7&&t.state.wrap>0&&r[t.next_in]!==0;)Bu.inflateReset(t),s=Bu.inflate(t,a);switch(s){case Xae:case gD:case I7:case eoe:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===C7))if(this.options.to==="string"){let c=Ag.utf8border(t.output,t.next_out),u=t.next_out-c,f=Ag.buf2string(t.output,c);t.next_out=u,t.avail_out=n-u,u&&t.output.set(t.output.subarray(c,c+u),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===_g&&o===0)){if(s===C7)return s=Bu.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Y2.prototype.onData=function(r){this.chunks.push(r)};Y2.prototype.onEnd=function(r){r===_g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r4.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function YC(r,e){const t=new Y2(e);if(t.push(r),t.err)throw t.msg||kh[t.err];return t.result}function toe(r,e){return e=e||{},e.raw=!0,YC(r,e)}var roe=Y2,noe=YC,ioe=toe,soe=YC,aoe={Inflate:roe,inflate:noe,inflateRaw:ioe,ungzip:soe};const{Deflate:ooe,deflate:coe,deflateRaw:uoe,gzip:foe}=yae,{Inflate:loe,inflate:doe,inflateRaw:hoe,ungzip:poe}=aoe;var yoe=ooe,moe=coe,boe=uoe,goe=foe,voe=loe,xoe=doe,woe=hoe,Eoe=poe,Aoe=Q2,qv={Deflate:yoe,deflate:moe,deflateRaw:boe,gzip:goe,Inflate:voe,inflate:xoe,inflateRaw:woe,ungzip:Eoe,constants:Aoe};/**
 * @wharfkit/antelope v1.0.10
 * https://github.com/wharfkit/antelope
 *
 * @license
 * Copyright (c) 2023 FFF00 Agents AB & Greymass Inc. All Rights Reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * 1.  Redistribution of source code must retain the above copyright notice, this
 *     list of conditions and the following disclaimer.
 * 
 * 2.  Redistribution in binary form must reproduce the above copyright notice,
 *     this list of conditions and the following disclaimer in the documentation
 *     and/or other materials provided with the distribution.
 * 
 * 3.  Neither the name of the copyright holder nor the names of its contributors
 *     may be used to endorse or promote products derived from this software without
 *     specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE
 * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.
 */function pm(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function _oe(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(!r[n].equals(e[n]))return!1;return!0}const n0={};function Wz(){n0.enc=new Array(255),n0.dec={};for(let r=0;r<=255;++r){const e=r.toString(16).padStart(2,"0");n0.enc[r]=e,n0.dec[e]=r}}function XC(r){n0.enc||Wz();const e=r.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=n0.enc[r[n]];return t.join("")}function Soe(r){if(n0.dec||Wz(),typeof r!="string")throw new Error("Expected string containing hex digits");if(r.length%2)throw new Error("Odd number of hex digits");r=r.toLowerCase();const e=r.length/2,t=new Uint8Array(e);for(let n=0;n<e;n++){const i=n0.dec[r[n*2]+r[n*2+1]];if(i===void 0)throw new Error("Expected hex string");t[n]=i}return t}function i4(r){return Ere(r)}let vD=!1;function st(r,e){if(r instanceof e)return!0;if(r==null||typeof r!="object")return!1;const t=e.__className||e.abiName;if(!t)return!1;let n=r.constructor,i=!1;for(;n&&!i;){const s=n.__className||n.abiName;if(!s)break;i=t==s,n=Object.getPrototypeOf(n)}return i&&!vD&&(console.warn(`Detected alien instance of ${t}, this usually means more than one version of @wharfkit/antelope has been included in your bundle.`),vD=!0),i}let eI=class{static from(e){if(st(e,this))return e;if(typeof e=="string")return this.fromString(e);throw new Error("Invalid blob")}static fromString(e){if(typeof Buffer=="function")return new this(new Uint8Array(Buffer.from(e,"base64")));switch(e.length%4){case 2:e+="==";break;case 3:e+="=";break;case 1:e=e.substring(0,e.length-1);break}const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new this(n)}constructor(e){this.array=e}equals(e){const t=this.constructor;try{return pm(this.array,t.from(e).array)}catch{return!1}}get base64String(){return typeof Buffer=="function"?Buffer.from(this.array).toString("base64"):btoa(this.utf8String)}get utf8String(){return new TextDecoder().decode(this.array)}toABI(e){e.writeArray(this.array)}toString(){return this.base64String}toJSON(){return this.toString()}};eI.abiName="blob";class nt{static from(e,t){return st(e,this)?e:typeof e=="string"?this.fromString(e,t):ArrayBuffer.isView(e)?new this(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)):st(e.array,Uint8Array)?new this(e.array):new this(new Uint8Array(e))}static fromString(e,t="hex"){if(t==="hex"){const n=Soe(e);return new this(n)}else if(t=="utf8"){const n=new TextEncoder;return new this(n.encode(e))}else throw new Error(`Unknown encoding: ${t}`)}static fromABI(e){const t=e.readVaruint32();return new this(e.readArray(t))}static abiDefault(){return new nt}static equal(e,t){return this.from(e).equals(this.from(t))}static random(e){return new this(i4(e))}static isBytes(e){return!!(st(e,nt)||st(e,Uint8Array)||Array.isArray(e)&&e.every(t=>typeof t=="number")||typeof e=="string"&&(/[\da-f]/i.test(e)||e===""))}constructor(e=new Uint8Array){this.array=e}get length(){return this.array.byteLength}get hexString(){return XC(this.array)}get utf8String(){return new TextDecoder().decode(this.array)}append(e){e=nt.from(e);const t=this.array.byteLength+e.array.byteLength,n=new ArrayBuffer(t),i=new Uint8Array(n);i.set(this.array),i.set(e.array,this.array.byteLength),this.array=i}appending(e){const t=new nt(this.array);return t.append(e),t}zeropad(e,t=!1){const n=t?e:Math.max(e,this.array.byteLength),i=new ArrayBuffer(n),s=new Uint8Array(i);s.fill(0),t&&this.array.byteLength>n?s.set(this.array.slice(0,n),0):s.set(this.array,n-this.array.byteLength),this.array=s}zeropadded(e,t=!1){const n=new nt(this.array);return n.zeropad(e,t),n}dropFirst(e=1){this.array=this.array.subarray(e)}droppingFirst(e=1){return new nt(this.array.subarray(e))}copy(){const e=new ArrayBuffer(this.array.byteLength),t=new Uint8Array(e);return t.set(this.array),new nt(t)}equals(e){return pm(this.array,nt.from(e).array)}toString(e="hex"){if(e==="hex")return this.hexString;if(e==="utf8")return this.utf8String;throw new Error(`Unknown encoding: ${e}`)}toABI(e){e.writeVaruint32(this.array.byteLength),e.writeArray(this.array)}toJSON(){return this.hexString}}nt.abiName="bytes";class o6{static from(e){return st(e,this)?e:st(e,o6)?new this(e.array):new this(nt.from(e).array)}static fromABI(e){return new this(e.readArray(this.byteSize))}static abiDefault(){return new this(new Uint8Array(this.byteSize))}constructor(e){const t=this.constructor.byteSize;if(e.byteLength!==t)throw new Error(`Checksum size mismatch, expected ${t} bytes got ${e.byteLength}`);this.array=e}equals(e){const t=this.constructor;try{return pm(this.array,t.from(e).array)}catch{return!1}}get hexString(){return XC(this.array)}toABI(e){e.writeArray(this.array)}toString(){return this.hexString}toJSON(){return this.toString()}}o6.abiName="__checksum";class kt extends o6{static from(e){return super.from(e)}static hash(e){const t=new Uint8Array(jc.sha256().update(nt.from(e).array).digest());return new kt(t)}}kt.abiName="checksum256";kt.byteSize=32;class c6 extends o6{static from(e){return super.from(e)}static hash(e){const t=new Uint8Array(jc.sha512().update(nt.from(e).array).digest());return new c6(t)}}c6.abiName="checksum512";c6.byteSize=64;class S0 extends o6{static from(e){return super.from(e)}static hash(e){const t=new Uint8Array(jc.ripemd160().update(nt.from(e).array).digest());return new S0(t)}}S0.abiName="checksum160";S0.byteSize=20;var ht;(function(r){r.K1="K1",r.R1="R1",r.WA="WA"})(ht||(ht={}));(function(r){function e(n){switch(n){case r.K1:return 0;case r.R1:return 1;case r.WA:return 2;default:throw new Error(`Unknown curve type: ${n}`)}}r.indexFor=e;function t(n){let i;switch(typeof n!="number"?i=r.indexFor(n):i=n,i){case 0:return r.K1;case 1:return r.R1;case 2:return r.WA;default:throw new Error("Unknown curve type")}}r.from=t})(ht||(ht={}));class At{static get max(){return new Do(2).pow(new Do(this.byteWidth*8-(this.isSigned?1:0))).isubn(1)}static get min(){return this.isSigned?this.max.ineg().isubn(1):new Do(0)}static add(e,t,n="truncate"){return At.operator(e,t,n,(i,s)=>i.add(s))}static sub(e,t,n){return At.operator(e,t,n,(i,s)=>i.sub(s))}static mul(e,t,n){return At.operator(e,t,n,(i,s)=>i.mul(s))}static div(e,t,n){return At.operator(e,t,n,(i,s)=>{if(s.isZero())throw new Error("Division by zero");return i.div(s)})}static divRound(e,t,n){return At.operator(e,t,n,(i,s)=>{if(s.isZero())throw new Error("Division by zero");return i.divRound(s)})}static divCeil(e,t,n){return At.operator(e,t,n,(i,s)=>{if(s.isZero())throw new Error("Division by zero");const a=i.divmod(s);return a.mod.isZero()?a.div:a.div.negative!==0?a.div.isubn(1):a.div.iaddn(1)})}static gt(e,t){return e.value.gt(t.value)}static lt(e,t){return e.value.lt(t.value)}static gte(e,t){return e.value.gte(t.value)}static lte(e,t){return e.value.lte(t.value)}static operator(e,t,n="truncate",i){const{a:s,b:a}=Toe(e,t),o=s.constructor,c=i(s.value,a.value);return o.from(c,n)}static from(e,t){if(st(e,this))return e;let n=this,i;if(st(e,At))n=e.constructor,i=e.value.clone();else if(e instanceof Uint8Array)i=new Do(e,void 0,"le"),n.isSigned&&(i=i.fromTwos(n.byteWidth*8));else{if(typeof e=="string"&&!/[0-9]+/.test(e)||typeof e=="number"&&!Number.isFinite(e))throw new Error("Invalid number");i=Do.isBN(e)?e.clone():new Do(e,10),i.isNeg()&&!n.isSigned&&(n={byteWidth:n.byteWidth,isSigned:!0})}switch(t){case"clamp":i=Moe(i,this.min,this.max);break;case"truncate":i=Poe(i,n,this);break}return new this(i)}static fromABI(e){return this.from(e.readArray(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){return this.from(i4(this.byteWidth))}constructor(e){const t=this.constructor;if(t.isSigned===void 0||t.byteWidth===void 0)throw new Error("Cannot instantiate abstract class Int");if(e.gt(t.max))throw new Error(`Number ${e} overflows ${t.abiName}`);if(e.lt(t.min))throw new Error(`Number ${e} underflows ${t.abiName}`);this.value=e}cast(e,t="truncate"){return this.constructor===e?this:e.from(this,t)}get byteArray(){const e=this.constructor;return(e.isSigned?this.value.toTwos(e.byteWidth*8):this.value).toArrayLike(Uint8Array,"le",e.byteWidth)}equals(e,t=!1){const n=this.constructor;if(t===!0&&st(e,At)){const i=e.constructor;if(n.byteWidth!==i.byteWidth||n.isSigned!==i.isSigned)return!1}try{return this.value.eq(n.from(e).value)}catch{return!1}}add(e){this.value=this.operator(e,At.add).value}adding(e){return this.operator(e,At.add)}subtract(e){this.value=this.operator(e,At.sub).value}subtracting(e){return this.operator(e,At.sub)}multiply(e){this.value=this.operator(e,At.mul).value}multiplying(e){return this.operator(e,At.mul)}divide(e,t){this.value=this.dividing(e,t).value}dividing(e,t){let n=At.div;switch(t){case"ceil":n=At.divCeil;break;case"round":n=At.divRound;break}return this.operator(e,n)}gt(e){return At.gt(this,e)}lt(e){return At.lt(this,e)}gte(e){return At.gte(this,e)}lte(e){return At.lte(this,e)}operator(e,t){let n;return st(e,At)?n=e:n=rs.from(e,"truncate"),t(this,n).cast(this.constructor)}toNumber(){return this.value.toNumber()}toString(){return this.value.toString()}[Symbol.toPrimitive](e){return e==="number"?this.toNumber():this.toString()}toABI(e){e.writeArray(this.byteArray)}toJSON(){return this.value.bitLength()>32?this.value.toString():this.value.toNumber()}}At.abiName="__int";class s4 extends At{}s4.abiName="int8";s4.byteWidth=1;s4.isSigned=!0;class a4 extends At{}a4.abiName="int16";a4.byteWidth=2;a4.isSigned=!0;class wf extends At{}wf.abiName="int32";wf.byteWidth=4;wf.isSigned=!0;class rs extends At{}rs.abiName="int64";rs.byteWidth=8;rs.isSigned=!0;class o4 extends At{}o4.abiName="int128";o4.byteWidth=16;o4.isSigned=!0;class uf extends At{}uf.abiName="uint8";uf.byteWidth=1;uf.isSigned=!1;class $h extends At{}$h.abiName="uint16";$h.byteWidth=2;$h.isSigned=!1;class mr extends At{}mr.abiName="uint32";mr.byteWidth=4;mr.isSigned=!1;class Rr extends At{}Rr.abiName="uint64";Rr.byteWidth=8;Rr.isSigned=!1;class Lh extends At{}Lh.abiName="uint128";Lh.byteWidth=16;Lh.isSigned=!1;class c4 extends At{static fromABI(e){return new this(new Do(e.readVarint32()))}toABI(e){e.writeVarint32(Number(this))}}c4.abiName="varint32";c4.byteWidth=32;c4.isSigned=!0;class X2 extends At{static fromABI(e){return new this(new Do(e.readVaruint32()))}toABI(e){e.writeVaruint32(Number(this))}}X2.abiName="varuint32";X2.byteWidth=32;X2.isSigned=!1;function Moe(r,e,t){return Do.min(Do.max(r,e),t)}function Poe(r,e,t){const n=r.isNeg()?255:0,s=(e.isSigned?r.toTwos(e.byteWidth*8):r).toArrayLike(Uint8Array,"le"),a=new Uint8Array(t.byteWidth);a.fill(n),a.set(s.slice(0,t.byteWidth));const o=new Do(a,void 0,"le");return t.isSigned?o.fromTwos(t.byteWidth*8):o}function Toe(r,e){r=xD(r),e=xD(e);const t=r.constructor,n=e.constructor;return t!==n&&(t.isSigned===n.isSigned?t.byteWidth>n.byteWidth?e=e.cast(t):n.byteWidth>t.byteWidth&&(r=r.cast(n)):t.isSigned===!1&&t.byteWidth>=n.byteWidth?e=e.cast(t):n.isSigned===!1&&n.byteWidth>=t.byteWidth?r=r.cast(n):t.isSigned===!0&&t.max.gte(n.max)&&t.min.lte(n.min)?e=e.cast(t):n.isSigned===!0&&n.max.gte(t.max)&&n.min.lte(t.min)&&(r=r.cast(n))),{a:r,b:e}}function xD(r){let e=r;return r.constructor.byteWidth<4&&(e=r.cast(wf)),e}function u4(r){const e=[],t=[],n=[],i=new Set,s=c=>{let u;return typeof c.type!="string"?u=a(c.type):u=c.type,c.array===!0&&(u+="[]"),c.optional===!0&&(u+="?"),c.extension===!0&&(u+="$"),u},a=c=>{if(c.abiName){if(c.abiName==="__struct")throw new Error("Misconfigured Struct subclass, did you forget @Struct.type?")}else throw new Error("Encountered non-conforming type");if(i.has(c))return c.abiName;if(i.add(c),c.abiAlias)n.push({new_type_name:c.abiName,type:s(c.abiAlias)});else if(c.abiFields){const u=c.abiFields.map(l=>({name:l.name,type:s(l)})),f={base:c.abiBase?a(c.abiBase):"",name:c.abiName,fields:u};e.push(f)}else if(c.abiVariant){const u={name:c.abiName,types:c.abiVariant.map(s)};t.push(u)}return c.abiName},o=a(r);return{abi:Nt.from({structs:e,variants:t,types:n}),types:Array.from(i),root:o}}function nx(r){let e=typeof r.type=="string"?r.type:r.type.abiName;return r.array===!0&&(e+="[]"),r.optional===!0&&(e+="?"),r.extension===!0&&(e+="$"),e}function Coe(r){return typeof r!="string"&&r.abiName===void 0&&r.type!==void 0}function Kz(r){return typeof r=="string"?{type:r}:typeof r.abiName<"u"?{type:r}:r}const Gz={abiName:"string",abiDefault:()=>"",fromABI:r=>r.readString(),from:r=>r,toABI:(r,e)=>{e.writeString(r)}},Qz={abiName:"bool",abiDefault:()=>!1,fromABI:r=>r.readByte()===1,from:r=>r,toABI:(r,e)=>{e.writeByte(r===!0?1:0)}};function Ioe(){return[Qz,Gz,tn,tn.Symbol,tn.SymbolCode,l4,nt,S0,kt,c6,Sg,f4,nI,t5,o4,a4,wf,rs,s4,qe,ii,d6,Yz,Af,Lh,$h,mr,Rr,uf,c4,X2]}function L_(r=[]){const e={},t=Ioe();for(const n of t)e[n.abiName]=n;for(const n of r){if(!n.abiName)throw new Error("Invalid type");e[n.abiName]=n}return e}function tI(r){if(r.constructor&&r.constructor.abiName!==void 0)return r.constructor.abiName;if(Array.isArray(r)){const e=r.map(tI),t=e[0];return!t||!e.every(n=>n===t)?void 0:t+"[]"}switch(typeof r){case"boolean":return"bool";case"string":return"string"}}function ix(r,e="jsobj"){var t;if(r.constructor&&r.constructor.abiName!==void 0)return r.constructor;if(Array.isArray(r)){const i=r.map(a=>ix(a,e)),s=i[0];return!s||!i.every(a=>a&&a.abiName===s.abiName)?void 0:s}const n=typeof r;if(n==="object"&&r!==null){const i=Object.keys(r).map(s=>({name:s,type:ix(r[s],e+"_nested")}));return i.find(s=>!s.type)?void 0:(t=class extends U{},t.abiName=e,t.abiFields=i,t)}switch(n){case"boolean":return Qz;case"string":return Gz}}class Zz extends Error{constructor(e,t){const n=e.codingPath.map(({field:i,type:s})=>typeof i=="number"?i:`${i}<${s.typeName}>`).join(".");super(`Decoding error at ${n}: ${t.message}`),this.stack=t.stack,this.ctx=e,this.underlyingError=t}}Zz.__className="DecodingError";function Ef(r){const e=Kz(r.type),t=nx(e),n=r.customTypes||[];let i;if(r.abi)i=Nt.from(r.abi);else try{let o;if(typeof e.type=="string"){const u=L_(n),f=new Nt.ResolvedType(e.type).name;if(o=u[f],!o)throw new Error(`Unknown type: ${e.type}`)}else o=e.type;const c=u4(o);i=c.abi,n.push(...c.types)}catch(o){throw Error(`Unable to synthesize ABI for: ${t} (${o.message}). To decode non-class types you need to pass the ABI definition manually.`)}const s=i.resolveType(t);typeof e.type!="string"&&n.unshift(e.type);const a={types:L_(n),strictExtensions:r.strictExtensions||!1,codingPath:[{field:"root",type:s}]};try{if(r.data||r.data===""){let o;if(st(r.data,ym))o=r.data;else{const c=nt.from(r.data),u=r.ignoreInvalidUTF8===void 0?!0:!r.ignoreInvalidUTF8;o=new ym(c.array,new TextDecoder("utf-8",{fatal:u}))}return r.metadata&&(o.metadata=r.metadata),Vv(s,o,a)}else{if(r.object!==void 0)return jb(r.object,s,a);if(r.json)return jb(JSON.parse(r.json),s,a);throw new Error("Nothing to decode, you must set one of data, json, object")}}catch(o){throw new Zz(a,o)}}const Uh=Symbol("Resolved");function Vv(r,e,t){if(t.codingPath.length>32)throw new Error("Maximum decoding depth exceeded");if(r.isExtension&&!e.canRead())return t.strictExtensions?qb(r,t):null;if(r.isOptional&&e.readByte()===0)return null;if(r.isArray){const i=e.readVaruint32(),s=[];for(let a=0;a<i;a++)t.codingPath.push({field:a,type:r}),s.push(n()),t.codingPath.pop();return s}else return n();function n(){const i=t.types[r.name];if(i&&i.fromABI)return i.fromABI(e);if(r.ref){t.codingPath.push({field:"",type:r.ref});const s=Vv(r.ref,e,t);return t.codingPath.pop(),s}else if(r.fields){const s=r.allFields;if(!s)throw new Error("Invalid struct fields");const a={};for(const o of s)t.codingPath.push({field:o.name,type:o.type}),a[o.name]=Vv(o.type,e,t),t.codingPath.pop();return i?(a[Uh]=!0,i.from(a)):a}else if(r.variant){const s=e.readByte(),a=r.variant[s];if(!a)throw new Error(`Unknown variant idx: ${s}`);t.codingPath.push({field:`v${s}`,type:a});const o=[a.typeName,Vv(a,e,t)];return t.codingPath.pop(),i?i.from(o):o}else throw i?new Error("Invalid type"):new Error(r.name==="any"?"Unable to decode 'any' type from binary":"Unknown type")}}function jb(r,e,t){if(r==null){if(e.isOptional)return null;if(e.isExtension)return t.strictExtensions?qb(e,t):null;throw new Error(`Unexpectedly encountered ${r} for non-optional (${t.codingPath.map(i=>i.field).join(".")})`)}else if(e.isArray){if(!Array.isArray(r))throw new Error("Expected array");const i=[],s=r.length;for(let a=0;a<s;a++)t.codingPath.push({field:a,type:e}),i.push(n(r[a])),t.codingPath.pop();return i}else return n(r);function n(i){const s=t.types[e.name];if(e.ref&&!s)return jb(i,e.ref,t);if(e.fields){if(typeof i!="object")throw new Error("Expected object");if(typeof s=="function"&&st(i,s))return i;const a=e.allFields;if(!a)throw new Error("Invalid struct fields");const o={};for(const c of a)t.codingPath.push({field:c.name,type:c.type}),o[c.name]=jb(i[c.name],c.type,t),t.codingPath.pop();return s?(o[Uh]=!0,s.from(o)):o}else if(e.variant){let a;Array.isArray(i)&&i.length===2&&typeof i[0]=="string"?(a=i[0],i=i[1]):st(i,Ui)?(a=i.variantName,i=i.value):a=tI(i);const o=e.variant.findIndex(f=>f.typeName===a);if(o===-1)throw new Error(`Unknown variant type: ${a}`);const c=e.variant[o];t.codingPath.push({field:`v${o}`,type:c});const u=[c.typeName,jb(i,c,t)];return t.codingPath.pop(),s?(u[Uh]=!0,s.from(u)):u}else{if(!s){if(e.name==="any")return i;throw new Error("Unknown type")}return s.from(i)}}}function qb(r,e,t=new Set){if(r.isArray)return[];if(r.isOptional)return null;const n=e.types[r.name];if(n&&n.abiDefault)return n.abiDefault();if(t.has(r.name))throw new Error("Circular type reference");if(t.add(r.name),r.allFields){const i={};for(const s of r.allFields)e.codingPath.push({field:s.name,type:s.type}),i[s.name]=qb(s.type,e,t),e.codingPath.pop();return n?(i[Uh]=!0,n.from(i)):i}if(r.variant&&r.variant.length>0){const i=[r.variant[0].typeName,qb(r.variant[0],e)];return n?(i[Uh]=!0,n.from(i)):i}if(r.ref){e.codingPath.push({field:"",type:r.ref});const i=qb(r.ref,e,t);return e.codingPath.pop(),i}throw new Error("Unable to determine default value")}class ym{constructor(e,t){this.array=e,this.pos=0,this.metadata={},this.textDecoder=t||new TextDecoder("utf-8",{fatal:!0}),this.data=new DataView(e.buffer,e.byteOffset,e.byteLength)}canRead(e=1){return!(this.pos+e>this.array.byteLength)}ensure(e){if(!this.canRead(e))throw new Error("Read past end of buffer")}setPosition(e){if(e<0||e>this.array.byteLength)throw new Error("Invalid position");this.pos=e}getPosition(){return this.pos}advance(e){this.ensure(e),this.pos+=e}readByte(){return this.ensure(1),this.array[this.pos++]}readFloat(e){this.ensure(e);let t;switch(e){case 4:t=this.data.getFloat32(this.pos,!0);break;case 8:t=this.data.getFloat64(this.pos,!0);break;default:throw new Error("Invalid float size")}return this.pos+=e,t}readVaruint32(){let e=0,t=0;for(;;){const n=this.readByte();if(e|=(n&127)<<t,t+=7,!(n&128))break}return e>>>0}readVarint32(){const e=this.readVaruint32();return e&1?~e>>1|2147483648:e>>>1}readArray(e){this.ensure(e);const t=this.array.subarray(this.pos,this.pos+e);return this.pos+=e,t}readString(){const e=this.readVaruint32();return this.textDecoder.decode(this.readArray(e))}}ym.__className="ABIDecoder";class Jz extends Error{constructor(e,t){const n=e.codingPath.map(({field:i,type:s})=>typeof i=="number"?i:`${i}<${s.typeName}>`).join(".");super(`Encoding error at ${n}: ${t.message}`),this.stack=t.stack,this.ctx=e,this.underlyingError=t}}Jz.__className="EncodingError";function Xa(r){let e,t;typeof r.type=="string"?t=r.type:r.type&&Coe(r.type)?(typeof r.type.type!="string"&&(e=r.type.type),t=nx(r.type)):r.type&&r.type.abiName!==void 0?(e=r.type,t=r.type.abiName):(e=ix(r.object),e&&(t=e.abiName,Array.isArray(r.object)&&(t+="[]")));const n=r.customTypes?r.customTypes.slice():[];if(e)n.unshift(e);else if(t){const c=new Nt.ResolvedType(t).name;e=n.find(u=>u.abiName===c)}let i;if(r.abi&&t)i=Nt.from(r.abi).resolveType(t);else if(e){const c=u4(e);i=c.abi.resolveType(t||e.abiName),n.push(...c.types)}else if(t)i=new Nt.ResolvedType(t);else throw new Error("Unable to determine the type of the object to be encoded. To encode custom ABI types you must pass the type argument.");const s=L_(n),a=r.encoder||new rI;r.metadata&&(a.metadata=r.metadata);const o={types:s,encoder:a,codingPath:[{field:"root",type:i}]};try{zv(r.object,i,o)}catch(c){throw new Jz(o,c)}return nt.from(a.getData())}function zv(r,e,t){const n=r!=null;if(e.isOptional&&(t.encoder.writeByte(n?1:0),!n))return;if(e.isArray){if(!Array.isArray(r))throw new Error(`Expected array for: ${e.typeName}`);const s=r.length;t.encoder.writeVaruint32(s);for(let a=0;a<s;a++)t.codingPath.push({field:a,type:e}),i(r[a]),t.codingPath.pop()}else i(r);function i(s){const a=t.types[e.name];if(e.ref&&!a){zv(s,e.ref,t);return}if(!n){if(e.isExtension)return;throw new Error(`Found ${s} for non-optional type: ${e.typeName} (${t.codingPath.map(o=>o.field).join(".")})`)}if(a&&a.toABI)a.toABI(s,t.encoder);else if(typeof s.toABI=="function"&&s.constructor.abiName===e.name)s.toABI(t.encoder);else if(e.fields){if(typeof s!="object")throw new Error(`Expected object for: ${e.name}`);const o=e.allFields;if(!o)throw new Error("Invalid struct fields");for(const c of o)t.codingPath.push({field:c.name,type:c.type}),zv(s[c.name],c.type,t),t.codingPath.pop()}else if(e.variant){let o;Array.isArray(s)&&s.length===2&&typeof s[0]=="string"?(o=s[0],s=s[1]):st(s,Ui)?(o=s.variantName,s=s.value):o=tI(s);const c=e.variant.findIndex(f=>f.typeName===o);if(c===-1){const f=e.variant.map(l=>`'${l.typeName}'`).join(", ");throw new Error(`Unknown variant type '${o}', expected one of ${f}`)}const u=e.variant[c];t.encoder.writeVaruint32(c),t.codingPath.push({field:`v${c}`,type:u}),zv(s,u,t),t.codingPath.pop()}else{if(!a)throw new Error(e.name==="any"?"Unable to encode any type to binary":"Unknown type");const o=a.from(s);if(!o.toABI)throw new Error(`Invalid type ${e.name}, no encoding methods implemented`);o.toABI(t.encoder)}}}class rI{constructor(e=1024){this.pageSize=e,this.pos=0,this.textEncoder=new TextEncoder,this.metadata={};const t=new ArrayBuffer(e);this.data=new DataView(t),this.array=new Uint8Array(t)}ensure(e){if(this.data.byteLength>=this.pos+e)return;const t=Math.ceil(e/this.pageSize),n=this.data.byteLength+this.pageSize*t,i=new ArrayBuffer(n),s=new DataView(i),a=new Uint8Array(i);a.set(this.array),this.data=s,this.array=a}writeByte(e){this.ensure(1),this.array[this.pos++]=e}writeArray(e){const t=e.length;this.ensure(t),this.array.set(e,this.pos),this.pos+=t}writeFloat(e,t){switch(this.ensure(t),t){case 4:this.data.setFloat32(this.pos,e,!0);break;case 8:this.data.setFloat64(this.pos,e,!0);break;default:throw new Error("Invalid float size")}this.pos+=t}writeVaruint32(e){for(this.ensure(4);;)if(e>>>7)this.array[this.pos++]=128|e&127,e=e>>>7;else{this.array[this.pos++]=e;break}}writeVarint32(e){this.writeVaruint32(e<<1^e>>31)}writeString(e){const t=this.textEncoder.encode(e);this.writeVaruint32(t.byteLength),this.writeArray(t)}getData(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.pos)}getBytes(){return new nt(this.getData())}}rI.__className="ABIEncoder";class Nt{constructor(e){this.version=e.version||Nt.version,this.types=e.types||[],this.variants=e.variants||[],this.structs=e.structs||[],this.actions=e.actions||[],this.tables=e.tables||[],this.ricardian_clauses=e.ricardian_clauses||[],this.action_results=e.action_results||[]}static from(e){return st(e,Nt)?e:st(e,eI)?Ef({data:e.array,type:this}):typeof e=="string"?new Nt(JSON.parse(e)):new Nt(e)}static fromABI(e){const t=e.readString(),n=[],i=e.readVaruint32();for(let m=0;m<i;m++)n.push({new_type_name:e.readString(),type:e.readString()});const s=[],a=e.readVaruint32();for(let m=0;m<a;m++){const v=e.readString(),b=e.readString(),_=e.readVaruint32(),C=[];for(let N=0;N<_;N++)C.push({name:e.readString(),type:e.readString()});s.push({base:b,name:v,fields:C})}const o=[],c=e.readVaruint32();for(let m=0;m<c;m++){const v=qe.fromABI(e),b=e.readString(),_=e.readString();o.push({name:v,type:b,ricardian_contract:_})}const u=[],f=e.readVaruint32();for(let m=0;m<f;m++){const v=qe.fromABI(e),b=e.readString(),_=[],C=e.readVaruint32();for(let $=0;$<C;$++)_.push(e.readString());const N=[],x=e.readVaruint32();for(let $=0;$<x;$++)N.push(e.readString());const I=e.readString();u.push({name:v,index_type:b,key_names:_,key_types:N,type:I})}const l=[],d=e.readVaruint32();for(let m=0;m<d;m++){const v=e.readString(),b=e.readString();l.push({id:v,body:b})}const h=e.readVaruint32();for(let m=0;m<h;m++)e.advance(8),e.advance(e.readVaruint32());const y=e.readVaruint32();for(let m=0;m<y;m++)e.advance(2),e.advance(e.readVaruint32());const p=[];if(e.canRead()){const m=e.readVaruint32();for(let v=0;v<m;v++){const b=e.readString(),_=[],C=e.readVaruint32();for(let N=0;N<C;N++)_.push(e.readString());p.push({name:b,types:_})}}const g=[];if(e.canRead()){const m=e.readVaruint32();for(let v=0;v<m;v++){const b=qe.fromABI(e),_=e.readString();g.push({name:b,result_type:_})}}return new Nt({version:t,types:n,structs:s,actions:o,tables:u,ricardian_clauses:l,variants:p,action_results:g})}toABI(e){e.writeString(this.version),e.writeVaruint32(this.types.length);for(const t of this.types)e.writeString(t.new_type_name),e.writeString(t.type);e.writeVaruint32(this.structs.length);for(const t of this.structs){e.writeString(t.name),e.writeString(t.base),e.writeVaruint32(t.fields.length);for(const n of t.fields)e.writeString(n.name),e.writeString(n.type)}e.writeVaruint32(this.actions.length);for(const t of this.actions)qe.from(t.name).toABI(e),e.writeString(t.type),e.writeString(t.ricardian_contract);e.writeVaruint32(this.tables.length);for(const t of this.tables){qe.from(t.name).toABI(e),e.writeString(t.index_type),e.writeVaruint32(t.key_names.length);for(const n of t.key_names)e.writeString(n);e.writeVaruint32(t.key_types.length);for(const n of t.key_types)e.writeString(n);e.writeString(t.type)}e.writeVaruint32(this.ricardian_clauses.length);for(const t of this.ricardian_clauses)e.writeString(t.id),e.writeString(t.body);e.writeVaruint32(0),e.writeVaruint32(0),e.writeVaruint32(this.variants.length);for(const t of this.variants){e.writeString(t.name),e.writeVaruint32(t.types.length);for(const n of t.types)e.writeString(n)}e.writeVaruint32(this.action_results.length);for(const t of this.action_results)qe.from(t.name).toABI(e),e.writeString(t.result_type)}resolveType(e){const t={};return this.resolve({name:e,types:t},{id:0})}resolveAll(){const e={},t={id:0};return{types:this.types.map(n=>this.resolve({name:n.new_type_name,types:e},t)),variants:this.variants.map(n=>this.resolve({name:n.name,types:e},t)),structs:this.structs.map(n=>this.resolve({name:n.name,types:e},t))}}resolve({name:e,types:t},n){const i=t[e];if(i)return i;const s=new Nt.ResolvedType(e,++n.id);t[s.typeName]=s;const a=this.types.find(u=>u.new_type_name==s.name);if(a)return s.ref=this.resolve({name:a.type,types:t},n),s;const o=this.getStruct(s.name);if(o)return o.base&&(s.base=this.resolve({name:o.base,types:t},n)),s.fields=o.fields.map(u=>({name:u.name,type:this.resolve({name:u.type,types:t},n)})),s;const c=this.getVariant(s.name);return c&&(s.variant=c.types.map(u=>this.resolve({name:u,types:t},n))),s}getStruct(e){return this.structs.find(t=>t.name==e)}getVariant(e){return this.variants.find(t=>t.name==e)}getActionType(e){const t=qe.from(e).toString(),n=this.actions.find(i=>i.name.toString()===t);if(n)return n.type}equals(e){const t=Nt.from(e);return this.version!=t.version||this.types.length!=t.types.length||this.structs.length!=t.structs.length||this.actions.length!=t.actions.length||this.tables.length!=t.tables.length||this.ricardian_clauses.length!=t.ricardian_clauses.length||this.variants.length!=t.variants.length||this.action_results.length!=t.action_results.length?!1:Xa({object:this}).equals(Xa({object:t}))}toJSON(){return{version:this.version,types:this.types,structs:this.structs,actions:this.actions,tables:this.tables,ricardian_clauses:this.ricardian_clauses,error_messages:[],abi_extensions:[],variants:this.variants,action_results:this.action_results}}}Nt.abiName="abi";Nt.version="eosio::abi/1.1";(function(r){class e{constructor(n,i=0){let s=n;s.endsWith("$")?(s=s.slice(0,-1),this.isExtension=!0):this.isExtension=!1,s.endsWith("?")?(s=s.slice(0,-1),this.isOptional=!0):this.isOptional=!1,s.endsWith("[]")?(s=s.slice(0,-2),this.isArray=!0):this.isArray=!1,this.id=i,this.name=s}get typeName(){let n=this.name;return this.isArray&&(n+="[]"),this.isOptional&&(n+="?"),this.isExtension&&(n+="$"),n}get allFields(){let n=this;const i=[],s=new Set;do{if(!n.fields||s.has(n.name))return;for(let a=n.fields.length-1;a>=0;a--)i.unshift(n.fields[a]);s.add(n.name),n=n.base}while(n!==void 0);return i}}r.ResolvedType=e})(Nt||(Nt={}));class U{static from(e){return e[Uh]===!0?new this(e):st(e,this)?e:Ef({object:e,type:this})}static get structFields(){const e=[],t=n=>{n.abiBase&&t(n.abiBase);for(const i of n.abiFields||[])e.push(i)};return t(this),e}constructor(e){const t=this.constructor;for(const n of t.structFields){const i=typeof n.type=="string"?new Nt.ResolvedType(String(n.type)).isOptional:n.optional,s=e[n.name];i&&!s||(this[n.name]=s)}}equals(e){const t=this.constructor;return e.constructor&&typeof e.constructor.abiName=="string"&&e.constructor.abiName!==t.abiName?!1:Xa({object:this}).equals(Xa({object:t.from(e)}))}toJSON(){const e=this.constructor,t={};for(const n of e.structFields)n.optional&&!this[n.name]||(t[n.name]=this[n.name]);return t}}U.abiName="__struct";(function(r){const e=Symbol("FieldsOwner");function t(i){return function(s){return s.abiName=i,s}}r.type=t;function n(i,s={}){return(a,o)=>{const c=a.constructor;c.abiFields?c.abiFields[e]!==c&&(c.abiBase=c.abiFields[e],c.abiFields=[],c.abiFields[e]=c):(c.abiFields=[],c.abiFields[e]=c),c.abiFields.push({...s,name:o,type:i})}}r.field=n})(U||(U={}));function u6(r){return function(e){return e.abiAlias={type:Object.getPrototypeOf(e.prototype).constructor},e.abiName=r,e}}class Ui{static from(e){return e[Uh]?new this(e):st(e,this)?e:Ef({object:e,type:this})}constructor(e){const t=this.constructor.abiVariant;this.value=e[1];const n=t.map(nx).findIndex(i=>i===e[0]);if(0>n||t.length<=n)throw new Error(`Unknown variant ${e[0]}`);this.variantIdx=n}equals(e){const n=this.constructor.from(e);return this.variantIdx!==n.variantIdx?!1:Xa({object:this}).equals(Xa({object:n}))}get variantName(){const e=this.constructor.abiVariant[this.variantIdx];return nx(e)}toJSON(){return[this.variantName,this.value]}}Ui.abiName="__variant";Ui.abiVariant=[];(function(r){function e(t,n){return function(i){return i.abiName=t,i.abiVariant=n.map(Kz),i}}r.type=e})(Ui||(Ui={}));class e5{static from(e){return st(e,this)?e:(typeof e=="string"?e=Number.parseFloat(e):st(e,e5)&&(e=e.value),new this(e))}static fromABI(e){return new this(e.readFloat(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){const e=i4(this.byteWidth),t=new ym(e);return this.fromABI(t)}constructor(e){this.value=e}equals(e){const t=this.constructor;return this.value===t.from(e).value}toABI(e){const t=this.constructor;e.writeFloat(this.value,t.byteWidth)}toString(){return this.value.toString()}toJSON(){return this.toString()}}e5.abiName="__float";class nI extends e5{toString(){return this.value.toFixed(7)}}nI.abiName="float32";nI.byteWidth=4;class t5 extends e5{}t5.abiName="float64";t5.byteWidth=8;class f4{static from(e){return st(e,this)?e:(typeof e=="string"&&e.startsWith("0x")&&(e=e.slice(2)),new this(nt.from(e)))}static fromABI(e){return new this(new nt(e.readArray(this.byteWidth)))}static random(){const e=i4(16),t=new ym(e);return this.fromABI(t)}constructor(e){if(e.array.length!==16)throw new Error("Invalid float128");this.data=e}equals(e){const t=this.constructor;return this.data.equals(t.from(e).data)}toABI(e){e.writeArray(this.data.array)}toString(){return"0x"+this.data.hexString}toJSON(){return this.toString()}}f4.abiName="float128";f4.byteWidth=16;class qe{get rawValue(){return this.value}static from(e){if(st(e,qe))return e;if(typeof e=="string")return new qe(Roe(e));if(st(e,Rr))return new qe(e);throw new Error("Invalid name")}static fromABI(e){return new qe(Rr.fromABI(e))}static abiDefault(){return new this(Rr.from(0))}constructor(e){this.value=e}equals(e){return this.value.equals(qe.from(e).value)}toString(){return Noe(this.value)}toABI(e){this.value.toABI(e)}toJSON(){return this.toString()}}qe.abiName="name";qe.pattern=/^[a-z1-5.]{0,13}$/;function Roe(r){function e(i){return i>=97&&i<=122?i-97+6:i>=49&&i<=53?i-49+1:0}const t=new Uint8Array(8);let n=63;for(let i=0;i<r.length;++i){let s=e(r.charCodeAt(i));n<5&&(s=s<<1);for(let a=4;a>=0;--a)n>=0&&(t[Math.floor(n/8)]|=(s>>a&1)<<n%8,--n)}return Rr.from(t)}function Noe(r){const e=r.value.toArray("le",8);let t="";for(let n=63;n>=0;){let i=0;for(let s=0;s<5;++s)n>=0&&(i=i<<1|e[Math.floor(n/8)]>>n%8&1,--n);i>=6?t+=String.fromCharCode(i+97-6):i>=1?t+=String.fromCharCode(i+49-1):t+="."}for(;t.endsWith(".");)t=t.substr(0,t.length-1);return t}class f6{static from(e){return st(e,this)?e:st(e,f6)?this.fromMilliseconds(e.toMilliseconds()):st(e,Date)?this.fromDate(e):typeof e=="string"?this.fromString(e):this.fromInteger(e)}static fromString(e){const t=Date.parse(e+"Z");if(!Number.isFinite(t))throw new Error("Invalid date string");return this.fromMilliseconds(t)}static fromDate(e){return this.fromMilliseconds(e.getTime())}static abiDefault(){return this.from(0)}toABI(e){this.value.toABI(e)}equals(e){const t=this.constructor;return this.toMilliseconds()===t.from(e).toMilliseconds()}toMilliseconds(){throw new Error("Not implemented")}toDate(){return new Date(this.toMilliseconds())}toJSON(){return this.toString()}}f6.abiName="__time_point_base";class Yz extends f6{static fromMilliseconds(e){return new this(rs.from(Math.round(e*1e3)))}static fromInteger(e){return new this(rs.from(e))}static fromABI(e){return new this(rs.fromABI(e))}constructor(e){super(),this.value=e}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.dividing(1e3,"round"))}}Yz.abiName="time_point";class Af extends f6{static fromMilliseconds(e){return new this(mr.from(Math.round(e/1e3)))}static fromInteger(e){return new this(mr.from(e))}static fromABI(e){return new this(mr.fromABI(e))}constructor(e){super(),this.value=e}toString(){return this.toDate().toISOString().slice(0,-5)}toMilliseconds(){return Number(this.value.cast(Rr).multiplying(1e3))}}Af.abiName="time_point_sec";class l4 extends f6{static fromMilliseconds(e){return new this(mr.from(Math.round((e-9466848e5)/500)))}static fromInteger(e){return new this(mr.from(e))}static fromABI(e){return new this(mr.fromABI(e))}constructor(e){super(),this.value=e}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.cast(Rr).multiplying(500).adding(9466848e5))}}l4.abiName="block_timestamp_type";class tn{static from(e,t){if(st(e,tn))return e;switch(typeof e){case"number":if(!t)throw new Error("Symbol is required when creating Asset from number");return this.fromFloat(e,t);case"string":return this.fromString(e);default:throw new Error("Invalid asset")}}static fromString(e){const t=(typeof e=="string"?e:"").split(" ");if(t.length!==2)throw new Error("Invalid asset string");const n=t[0].replace(".",""),i=(t[0].split(".")[1]||"").length,s=tn.Symbol.fromParts(t[1],i);return new tn(rs.from(n),s)}static fromFloat(e,t){const n=tn.Symbol.from(t);return new tn(n.convertFloat(e),n)}static fromUnits(e,t){return new tn(rs.from(e),tn.Symbol.from(t))}static fromABI(e){const t=rs.fromABI(e),n=tn.Symbol.fromABI(e);return new tn(t,n)}static abiDefault(){return new this(rs.from(0),tn.Symbol.abiDefault())}static formatUnits(e,t){const n=rs.from(e).toString().split("");let i=!1;for(n[0]==="-"&&(i=!0,n.shift());n.length<=t;)n.unshift("0");t>0&&n.splice(n.length-t,0,".");let s=n.join("");return i&&(s="-"+s),s}constructor(e,t){this.units=e,this.symbol=t}equals(e){const{symbol:t,units:n}=tn.from(e);return this.symbol.value.equals(t.value)&&this.units.equals(n)}get value(){return this.symbol.convertUnits(this.units)}set value(e){this.units=this.symbol.convertFloat(e)}get quantity(){return tn.formatUnits(this.units,this.symbol.precision)}toABI(e){this.units.toABI(e),this.symbol.toABI(e)}toString(){return this.quantity+" "+this.symbol.name}toJSON(){return this.toString()}}tn.abiName="asset";(function(r){class e{static from(i){if(st(i,e))return i;if(st(i,Rr))return new e(i);const s=i.split(",");if(s.length!==2&&i!=="0,")throw new Error("Invalid symbol string");i==="0,"&&s.push("");const a=Number.parseInt(s[0]);return e.fromParts(s[1],a)}static fromParts(i,s){return new e(Ooe(i,s))}static fromABI(i){return new e(Rr.fromABI(i))}static abiDefault(){return this.from("4,SYS")}constructor(i){if(wD(i)>e.maxPrecision)throw new Error("Invalid asset symbol, precision too large");if(!i.equals(0)&&!t.pattern.test(R7(i)))throw new Error("Invalid asset symbol, name must be uppercase A-Z");this.value=i}equals(i){return this.value.equals(e.from(i).value)}get name(){return R7(this.value)}get precision(){return wD(this.value)}get code(){return new t(Rr.from(this.value.value.clone().iushrn(8)))}toABI(i){this.value.toABI(i)}convertUnits(i){return i.value.toNumber()/Math.pow(10,this.precision)}convertFloat(i){return rs.from(i.toFixed(this.precision).replace(".",""))}toString(){return`${this.precision},${this.name}`}toJSON(){return this.toString()}}e.abiName="symbol",e.maxPrecision=18,r.Symbol=e;class t{static from(i){return st(i,t)?i:(typeof i=="string"&&(i=Rr.from(eH(i))),new this(Rr.from(i)))}static fromABI(i){return new t(Rr.fromABI(i))}static abiDefault(){return this.from("SYS")}constructor(i){if(!i.equals(0)&&!t.pattern.test(R7(i)))throw new Error("Invalid asset symbol, name must be uppercase A-Z");this.value=i}equals(i){return this.value.equals(t.from(i).value)}toABI(i){this.value.toABI(i)}toString(){return Xz(this.value.value.toArray("be"))}toJSON(){return this.toString()}}t.abiName="symbol_code",t.pattern=/^[A-Z]{0,7}$/,r.SymbolCode=t})(tn||(tn={}));class Sg{static from(e){return st(e,Sg)?e:new this(tn.from(e.quantity),qe.from(e.contract))}static fromABI(e){return new Sg(tn.fromABI(e),qe.fromABI(e))}constructor(e,t){this.quantity=e,this.contract=t}equals(e){return this.quantity.equals(e.quantity)&&this.contract.equals(e.contract)}toABI(e){this.quantity.toABI(e),this.contract.toABI(e)}toJSON(){return{quantity:this.quantity,contract:this.contract}}}Sg.abiName="extended_asset";function wD(r){return r.value.and(Rr.from(255).value).toNumber()}function R7(r){const e=r.value.toArray("be").slice(0,-1);return Xz(e)}function Xz(r){return r.map(e=>String.fromCharCode(e)).reverse().join("")}function Ooe(r,e){const t=eH(r),n=new Uint8Array(t.length+1);return n[0]=e,n.set(t,1),Rr.from(n)}function eH(r){const e=Math.min(r.length,7),t=new Uint8Array(e);for(let n=0;n<e;n++)t[n]=r.charCodeAt(n);return t}var Ss;(function(r){let e;(function(y){y.E_CHECKSUM="E_CHECKSUM",y.E_INVALID="E_INVALID"})(e=r.ErrorCode||(r.ErrorCode={}));class t extends Error{constructor(p,g,m={}){super(p),this.code=g,this.info=m}}t.__className="DecodingError",r.DecodingError=t;const n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",i=new Int16Array(255).fill(-1);for(let y=0;y<58;++y)i[n.charCodeAt(y)]=y;function s(y,p){if(p==null)return l(y);const g=new Uint8Array(p);for(let m=0;m<y.length;++m){let v=i[y.charCodeAt(m)];if(v<0)throw new t("Invalid Base58 character encountered",e.E_INVALID,{char:y[m]});for(let b=0;b<p;++b){const _=g[b]*58+v;g[b]=_,v=_>>8}if(v)throw new t("Base58 value is out of range",e.E_INVALID)}return g.reverse(),new nt(g)}r.decode=s;function a(y,p){const g=s(y,p!=null?p+4:p),m=g.array.subarray(0,-4),v=g.array.subarray(-4),b=h(m);if(!pm(v,b))throw new t("Checksum mismatch",e.E_CHECKSUM,{actual:b,expected:v,data:m,hash:"double_sha256"});return new nt(m)}r.decodeCheck=a;function o(y,p,g){const m=s(y,p!=null?p+4:p),v=m.array.subarray(0,-4),b=m.array.subarray(-4),_=d(v,g);if(!pm(b,_))throw new t("Checksum mismatch",e.E_CHECKSUM,{actual:_,expected:b,data:v,hash:"ripemd160"});return new nt(v)}r.decodeRipemd160Check=o;function c(y){y=nt.from(y);const p=[];for(const g of y.array){let m=g;for(let v=0;v<p.length;++v){const b=(i[p[v]]<<8)+m;p[v]=n.charCodeAt(b%58),m=b/58|0}for(;m;)p.push(n.charCodeAt(m%58)),m=m/58|0}for(const g of y.array){if(g)break;p.push(49)}return p.reverse(),String.fromCharCode(...p)}r.encode=c;function u(y){return y=nt.from(y),y=y.appending(h(y.array)),c(y)}r.encodeCheck=u;function f(y,p){return y=nt.from(y),y=y.appending(d(y.array,p)),c(y)}r.encodeRipemd160Check=f;function l(y){const p=[];for(let g=0;g<y.length;++g){let m=i[y.charCodeAt(g)];if(m<0)throw new t("Invalid Base58 character encountered",e.E_INVALID,{char:y[g]});for(let v=0;v<p.length;++v){const b=p[v]*58+m;p[v]=b&255,m=b>>8}m&&p.push(m)}for(const g of y)if(g==="1")p.push(0);else break;return p.reverse(),nt.from(p)}function d(y,p){const g=jc.ripemd160().update(y);return p&&g.update(p),new Uint8Array(g.digest().slice(0,4))}function h(y){const p=jc.sha256().update(y).digest(),g=jc.sha256().update(p).digest();return new Uint8Array(g.slice(0,4))}})(Ss||(Ss={}));class ii{static from(e){if(st(e,ii))return e;if(typeof e=="object"&&e.type&&e.compressed)return new ii(ht.from(e.type),new nt(e.compressed));if(typeof e!="string")throw new Error("Invalid public key");if(e.startsWith("PUB_")){const t=e.split("_");if(t.length!==3)throw new Error("Invalid public key string");const n=ht.from(t[1]),i=n===ht.K1||n===ht.R1?33:void 0,s=Ss.decodeRipemd160Check(t[2],i,n);return new ii(n,s)}else if(e.length>=50){const t=Ss.decodeRipemd160Check(e.slice(-50));return new ii(ht.K1,t)}else throw new Error("Invalid public key string")}static fromABI(e){const t=ht.from(e.readByte());if(t==ht.WA){const n=e.getPosition();e.advance(33),e.advance(1),e.advance(e.readVaruint32());const i=e.getPosition()-n;e.setPosition(n);const s=nt.from(e.readArray(i));return new ii(ht.WA,s)}return new ii(t,new nt(e.readArray(33)))}constructor(e,t){this.type=e,this.data=t}equals(e){const t=ii.from(e);return this.type===t.type&&this.data.equals(t.data)}toLegacyString(e="EOS"){if(this.type!==ht.K1)throw new Error("Unable to create legacy formatted string for non-K1 key");return`${e}${Ss.encodeRipemd160Check(this.data)}`}toString(){return`PUB_${this.type}_${Ss.encodeRipemd160Check(this.data,this.type)}`}toABI(e){e.writeByte(ht.indexFor(this.type)),e.writeArray(this.data.array)}toJSON(){return this.toString()}}ii.abiName="public_key";const N7={};function l6(r){let e=N7[r];if(!e)if(r==="K1")e=N7[r]=new S_.ec("secp256k1");else if(r==="R1")e=N7[r]=new S_.ec("p256");else throw new Error(`Unknown curve type: ${r}`);return e}function koe(r,e,t){const n=l6(t),i=r[0]-31,s=r.subarray(1,33),a=r.subarray(33),o=n.recoverPubKey(e,{r:s,s:a},i);return new Uint8Array(o.encodeCompressed())}function Doe(r,e,t,n){const i=l6(n),s=r.subarray(1,33),a=r.subarray(33);return i.verify(e,{r:s,s:a},t)}let d6=class md{static from(e){if(st(e,md))return e;if(typeof e=="object"&&e.r&&e.s){const t=new Uint8Array(65);let n=e.recid;const i=ht.from(e.type);return(e.type===ht.K1||e.type===ht.R1)&&(n+=31),t[0]=n,t.set(e.r,1),t.set(e.s,33),new md(i,new nt(t))}if(typeof e!="string")throw new Error("Invalid signature");if(e.startsWith("SIG_")){const t=e.split("_");if(t.length!==3)throw new Error("Invalid signature string");const n=ht.from(t[1]),i=n===ht.K1||n===ht.R1?65:void 0,s=Ss.decodeRipemd160Check(t[2],i,n);return new md(n,s)}else throw new Error("Invalid signature string")}static fromABI(e){const t=ht.from(e.readByte());if(t===ht.WA){const n=e.getPosition();e.advance(65),e.advance(e.readVaruint32()),e.advance(e.readVaruint32());const i=e.getPosition()-n;e.setPosition(n);const s=nt.from(e.readArray(i));return new md(ht.WA,s)}return new md(t,new nt(e.readArray(65)))}constructor(e,t){this.type=e,this.data=t}equals(e){const t=md.from(e);return this.type===t.type&&this.data.equals(t.data)}recoverDigest(e){e=kt.from(e);const t=koe(this.data.array,e.array,this.type);return ii.from({compressed:t,type:this.type})}recoverMessage(e){return this.recoverDigest(kt.hash(e))}verifyDigest(e,t){return e=kt.from(e),Doe(this.data.array,e.array,t.data.array,this.type)}verifyMessage(e,t){return this.verifyDigest(kt.hash(e),t)}toString(){return`SIG_${this.type}_${Ss.encodeRipemd160Check(this.data,this.type)}`}toABI(e){e.writeByte(ht.indexFor(this.type)),e.writeArray(this.data.array)}toJSON(){return this.toString()}};d6.abiName="signature";function Boe(r,e){const i=l6(e).keyFromPrivate(r).getPublic();return new Uint8Array(i.encodeCompressed())}function $oe(r,e,t){const n=l6(t),i=n.keyFromPrivate(r),s=n.keyFromPublic(e).getPublic();return i.derive(s).toArrayLike(Uint8Array,"be")}function Loe(r,e,t){const i=l6(t).keyFromPrivate(r);let s,a,o;if(t==="K1"){let c=1;do s=i.sign(e,{canonical:!0,pers:[c++]}),a=s.r.toArrayLike(Uint8Array,"be",32),o=s.s.toArrayLike(Uint8Array,"be",32);while(!Uoe(a,o))}else s=i.sign(e,{canonical:!0}),a=s.r.toArrayLike(Uint8Array,"be",32),o=s.s.toArrayLike(Uint8Array,"be",32);return{type:t,r:a,s:o,recid:s.recoveryParam||0}}function Uoe(r,e){return!(r[0]&128)&&!(r[0]===0&&!(r[1]&128))&&!(e[0]&128)&&!(e[0]===0&&!(e[1]&128))}function Foe(r){return l6(r).genKeyPair().getPrivate().toArrayLike(Uint8Array,"be",32)}let tH=class U_{static from(e){return st(e,U_)?e:this.fromString(e)}static fromString(e,t=!1){try{const{type:n,data:i}=joe(e);return new this(n,i)}catch(n){if(n.message=`Invalid private key (${n.message})`,t&&st(n,Ss.DecodingError)&&n.code===Ss.ErrorCode.E_CHECKSUM){const i=e.startsWith("PVT_R1")?ht.R1:ht.K1,s=new nt(n.info.data);return s.length===33&&s.dropFirst(),s.zeropad(32,!0),new this(i,s)}throw n}}static generate(e){return new U_(ht.from(e),new nt(Foe(e)))}constructor(e,t){if((e===ht.K1||e===ht.R1)&&t.length!==32)throw new Error("Invalid private key length");this.type=e,this.data=t}signDigest(e){return e=kt.from(e),d6.from(Loe(this.data.array,e.array,this.type))}signMessage(e){return this.signDigest(kt.hash(e))}sharedSecret(e){const t=$oe(this.data.array,e.data.array,this.type);return c6.hash(t)}toPublic(){const e=Boe(this.data.array,this.type);return ii.from({compressed:e,type:this.type})}toWif(){if(this.type!==ht.K1)throw new Error("Unable to generate WIF for non-k1 key");return Ss.encodeCheck(nt.from([128]).appending(this.data))}toString(){return`PVT_${this.type}_${Ss.encodeRipemd160Check(this.data,this.type)}`}toJSON(){return this.toString()}};function joe(r){const e=typeof r;if(e!=="string")throw new Error(`Expected string, got ${e}`);if(r.startsWith("PVT_")){const t=r.split("_");if(t.length!==3)throw new Error("Invalid PVT format");const n=ht.from(t[1]);let i;switch(n){case ht.K1:case ht.R1:i=32;break}const s=Ss.decodeRipemd160Check(t[2],i,n);return{type:n,data:s}}else{const t=ht.K1,n=Ss.decodeCheck(r);if(n.array[0]!==128)throw new Error("Invalid WIF");return{type:t,data:n.droppingFirst()}}}var F_;let ci=F_=class extends U{static from(e){if(typeof e=="string"){const t=e.split("@");if(t.length!==2&&t[0].length>0&&t[1].length>0)throw new Error("Invalid permission level string, should be in the format <actor>@<permission>");e={actor:t[0],permission:t[1]}}return super.from(e)}equals(e){const t=F_.from(e);return this.actor.equals(t.actor)&&this.permission.equals(t.permission)}toString(){return`${this.actor}@${this.permission}`}};q([U.field("name")],ci.prototype,"actor",void 0);q([U.field("name")],ci.prototype,"permission",void 0);ci=F_=q([U.type("permission_level")],ci);var j_;let Nr=j_=class extends U{static from(e,t){let n={...e};const i=n.data;if(!nt.isBytes(i)){let a;if(t)a=Nt.from(t).getActionType(n.name);else if(!i.constructor||i.constructor.abiName===void 0)throw new Error("Missing ABI definition when creating action with untyped action data");n={...n,data:Xa({object:i,type:a,abi:t})}}const s=super.from(n);if(t)s.abi=Nt.from(t);else{const a=ix(i);a&&(s.abi=Nt.from({...u4(a).abi,actions:[{name:s.name,type:a.abiName,ricardian_contract:""}]}))}return s}equals(e){const t=j_.from(e,this.abi);return this.account.equals(t.account)&&this.name.equals(t.name)&&_oe(this.authorization,t.authorization)&&this.data.equals(t.data)}decodeData(e){if(typeof e=="string"||e.abiName)return Ef({data:this.data,type:e});{const t=Nt.from(e),n=t.getActionType(this.name);if(!n)throw new Error(`Action ${this.name} does not exist in provided ABI`);return Ef({data:this.data,type:n,abi:t})}}get decoded(){if(!this.abi)throw new Error("Missing ABI definition when decoding action data");return{...this.toJSON(),data:this.decodeData(this.abi)}}};q([U.field("name")],Nr.prototype,"account",void 0);q([U.field("name")],Nr.prototype,"name",void 0);q([U.field(ci,{array:!0})],Nr.prototype,"authorization",void 0);q([U.field("bytes")],Nr.prototype,"data",void 0);Nr=j_=q([U.type("action")],Nr);var q_;let Mg=class extends U{};q([U.field("uint16")],Mg.prototype,"type",void 0);q([U.field("bytes")],Mg.prototype,"data",void 0);Mg=q([U.type("transaction_extension")],Mg);let eu=class extends U{static from(e){return super.from({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,...e})}};q([U.field("time_point_sec")],eu.prototype,"expiration",void 0);q([U.field("uint16")],eu.prototype,"ref_block_num",void 0);q([U.field("uint32")],eu.prototype,"ref_block_prefix",void 0);q([U.field("varuint32")],eu.prototype,"max_net_usage_words",void 0);q([U.field("uint8")],eu.prototype,"max_cpu_usage_ms",void 0);q([U.field("varuint32")],eu.prototype,"delay_sec",void 0);eu=q([U.type("transaction_header")],eu);let hn=q_=class extends eu{static from(e,t){const n=c=>{if(t)return Array.isArray(t)?t.filter(u=>qe.from(u.contract).equals(c)).map(({abi:u})=>u)[0]:t},i=c=>c instanceof Nr?c:Nr.from(c,n(c.account)),s=(e.actions||[]).map(i),a=(e.context_free_actions||[]).map(i),o={transaction_extensions:[],...e,context_free_actions:a,actions:s};return super.from(o)}equals(e){const t=q_.from(e);return this.id.equals(t.id)}get id(){return kt.hash(Xa({object:this}))}signingDigest(e){const t=this.signingData(e);return kt.hash(t)}signingData(e){let t=nt.from(kt.from(e).array);return t=t.appending(Xa({object:this})),t=t.appending(new Uint8Array(32)),t}};q([U.field(Nr,{array:!0})],hn.prototype,"context_free_actions",void 0);q([U.field(Nr,{array:!0})],hn.prototype,"actions",void 0);q([U.field(Mg,{array:!0})],hn.prototype,"transaction_extensions",void 0);hn=q_=q([U.type("transaction")],hn);let $o=class extends hn{get transaction(){return hn.from({...this,signatures:void 0,context_free_data:void 0})}get id(){return this.transaction.id}static from(e){return super.from({signatures:[],context_free_data:[],...e})}};q([U.field("signature[]")],$o.prototype,"signatures",void 0);q([U.field("bytes[]")],$o.prototype,"context_free_data",void 0);$o=q([U.type("signed_transaction")],$o);var w1;(function(r){r[r.none=0]="none",r[r.zlib=1]="zlib"})(w1||(w1={}));let Nn=class extends U{static from(e){return super.from({signatures:[],packed_context_free_data:"",compression:0,...e})}static fromSigned(e,t=1){let n=Xa({object:hn.from(e)}),i=Xa({object:e.context_free_data,type:"bytes[]"});switch(t){case w1.zlib:{n=qv.deflate(n.array),i=qv.deflate(i.array);break}case w1.none:break}return this.from({compression:t,signatures:e.signatures,packed_context_free_data:i,packed_trx:n})}getTransaction(){switch(Number(this.compression)){case w1.none:return Ef({data:this.packed_trx,type:hn});case w1.zlib:{const e=qv.inflate(this.packed_trx.array);return Ef({data:e,type:hn})}default:throw new Error(`Unknown transaction compression ${this.compression}`)}}getSignedTransaction(){const e=this.getTransaction();return $o.from({...e,signatures:this.signatures})}};q([U.field("signature[]")],Nn.prototype,"signatures",void 0);q([U.field("uint8")],Nn.prototype,"compression",void 0);q([U.field("bytes")],Nn.prototype,"packed_context_free_data",void 0);q([U.field("bytes")],Nn.prototype,"packed_trx",void 0);Nn=q([U.type("packed_transaction")],Nn);let Fh=class extends U{};q([U.field("string")],Fh.prototype,"status",void 0);q([U.field("uint32")],Fh.prototype,"cpu_usage_us",void 0);q([U.field("uint32")],Fh.prototype,"net_usage_words",void 0);Fh=q([U.type("transaction_receipt")],Fh);var V_;let mm=class extends $h{};mm=q([u6("weight_type")],mm);let bm=class extends U{};q([U.field(ii)],bm.prototype,"key",void 0);q([U.field(mm)],bm.prototype,"weight",void 0);bm=q([U.type("key_weight")],bm);let Pg=class extends U{};q([U.field(ci)],Pg.prototype,"permission",void 0);q([U.field(mm)],Pg.prototype,"weight",void 0);Pg=q([U.type("permission_level_weight")],Pg);let Tg=class extends U{};q([U.field(mr)],Tg.prototype,"wait_sec",void 0);q([U.field(mm)],Tg.prototype,"weight",void 0);Tg=q([U.type("wait_weight")],Tg);let M0=V_=class extends U{static from(e){if(st(e,V_))return e;const t=super.from({keys:[],accounts:[],waits:[],...e});return t.sort(),t}get waitThreshold(){return this.waits.reduce((e,t)=>e+t.weight.toNumber(),0)}get keyThreshold(){return this.threshold.toNumber()-this.waitThreshold}keyWeight(e){const t=this.keys.find(({key:n})=>n.equals(e));return t?t.weight.toNumber():0}hasPermission(e,t=!1){const n=t?1:this.keyThreshold;return this.keyWeight(e)>=n}sort(){this.keys.sort((e,t)=>String(e.key).localeCompare(String(t.key))),this.accounts.sort((e,t)=>String(e.permission).localeCompare(String(t.permission))),this.waits.sort((e,t)=>String(e.wait_sec).localeCompare(String(t.wait_sec)))}};q([U.field(mr)],M0.prototype,"threshold",void 0);q([U.field(bm,{array:!0})],M0.prototype,"keys",void 0);q([U.field(Pg,{array:!0})],M0.prototype,"accounts",void 0);q([U.field(Tg,{array:!0})],M0.prototype,"waits",void 0);M0=V_=q([U.type("authority")],M0);class Or{static from(e){return st(e,this)?e:nt.isBytes(e)?new this(nt.from(e).array):this.fromBlockChecksum(e.checksum,e.blockNum)}static fromABI(e){return new this(e.readArray(32))}static fromBlockChecksum(e,t){const n=new Or(kt.from(e).array),i=new Uint8Array(4);return i[0]=Number(t)>>24&255,i[1]=Number(t)>>16&255,i[2]=Number(t)>>8&255,i[3]=Number(t)&255,n.array.set(i,0),n}constructor(e){if(e.byteLength!==32)throw new Error(`BlockId size mismatch, expected 32 bytes got ${e.byteLength}`);this.array=e}equals(e){const t=this.constructor;try{return pm(this.array,t.from(e).array)}catch{return!1}}toABI(e){e.writeArray(this.array)}toString(){return this.hexString}toJSON(){return this.toString()}get hexString(){return XC(this.array)}get blockNum(){const e=this.array.slice(0,4);let t=0;for(let n=0;n<4;n++)t=(t<<8)+e[n];return mr.from(t)}}Or.abiName="block_id_type";var Ut;(function(r){r.encode=Xa,r.decode=Ef;function e(i){return u4(i).abi}r.synthesize=e;function t(i){return JSON.stringify(i)}r.stringify=t;function n(i){const s=a=>{switch(typeof a){case"boolean":case"number":case"string":return a;case"object":{if(a===null)return a;if(typeof a.toJSON=="function")return s(a.toJSON());if(Array.isArray(a))return a.map(s);const o={};for(const c of Object.keys(a))o[c]=s(a[c]);return o}}};return s(i)}r.objectify=n})(Ut||(Ut={}));class sx{constructor(e,t={}){if(e=e.trim(),e.endsWith("/")&&(e=e.slice(0,-1)),this.url=e,t.fetch)this.fetch=t.fetch;else if(typeof window<"u"&&window.fetch)this.fetch=window.fetch.bind(window);else if(typeof global<"u"&&global.fetch)this.fetch=global.fetch.bind(global);else throw new Error("Missing fetch")}async call(e){const t=this.url+e.path,n=e.params!==void 0?JSON.stringify(e.params):void 0,i={...e.headers},s=await this.fetch(t,{method:e.method||"POST",body:n,headers:i}),a=await s.text();let o;try{o=JSON.parse(a)}catch{}const c={};for(const[u,f]of s.headers.entries())c[u]=f;return{headers:c,status:s.status,json:o,text:a}}}let Cg=class extends U{};q([U.field("name")],Cg.prototype,"account",void 0);q([U.field("name",{optional:!0})],Cg.prototype,"action",void 0);Cg=q([U.type("account_linked_action")],Cg);let jh=class extends U{};q([U.field("name")],jh.prototype,"perm_name",void 0);q([U.field("name")],jh.prototype,"parent",void 0);q([U.field(M0)],jh.prototype,"required_auth",void 0);q([U.field(Cg,{optional:!0,array:!0})],jh.prototype,"linked_actions",void 0);jh=q([U.type("account_permission")],jh);let tu=class extends U{};q([U.field("int64")],tu.prototype,"used",void 0);q([U.field("int64")],tu.prototype,"available",void 0);q([U.field("int64")],tu.prototype,"max",void 0);q([U.field("time_point",{optional:!0})],tu.prototype,"last_usage_update_time",void 0);q([U.field("int64",{optional:!0})],tu.prototype,"current_used",void 0);tu=q([U.type("account_resource_limit")],tu);let qh=class extends U{};q([U.field("name")],qh.prototype,"owner",void 0);q([U.field("asset")],qh.prototype,"net_weight",void 0);q([U.field("asset")],qh.prototype,"cpu_weight",void 0);q([U.field("uint64")],qh.prototype,"ram_bytes",void 0);qh=q([U.type("account_total_resources")],qh);let Vh=class extends U{};q([U.field("name")],Vh.prototype,"from",void 0);q([U.field("name")],Vh.prototype,"to",void 0);q([U.field("asset")],Vh.prototype,"net_weight",void 0);q([U.field("asset")],Vh.prototype,"cpu_weight",void 0);Vh=q([U.type("account_self_delegated_bandwidth")],Vh);let zh=class extends U{};q([U.field("name")],zh.prototype,"owner",void 0);q([U.field("time_point")],zh.prototype,"request_time",void 0);q([U.field("asset")],zh.prototype,"net_amount",void 0);q([U.field("asset")],zh.prototype,"cpu_amount",void 0);zh=q([U.type("account_refund_request")],zh);let fa=class extends U{};q([U.field("name")],fa.prototype,"owner",void 0);q([U.field("name")],fa.prototype,"proxy",void 0);q([U.field("name",{array:!0})],fa.prototype,"producers",void 0);q([U.field("int64",{optional:!0})],fa.prototype,"staked",void 0);q([U.field("float64")],fa.prototype,"last_vote_weight",void 0);q([U.field("float64")],fa.prototype,"proxied_vote_weight",void 0);q([U.field("bool")],fa.prototype,"is_proxy",void 0);q([U.field("uint32",{optional:!0})],fa.prototype,"flags1",void 0);q([U.field("uint32")],fa.prototype,"reserved2",void 0);q([U.field("string")],fa.prototype,"reserved3",void 0);fa=q([U.type("account_voter_info")],fa);let Hh=class extends U{};q([U.field("time_point",{optional:!0})],Hh.prototype,"key",void 0);q([U.field("int64",{optional:!0})],Hh.prototype,"value",void 0);q([U.field("time_point",{optional:!0})],Hh.prototype,"first",void 0);q([U.field("int64",{optional:!0})],Hh.prototype,"second",void 0);Hh=q([U.type("account_rex_info_maturities")],Hh);let _f=class extends U{};q([U.field("uint32")],_f.prototype,"version",void 0);q([U.field("name")],_f.prototype,"owner",void 0);q([U.field("asset")],_f.prototype,"vote_stake",void 0);q([U.field("asset")],_f.prototype,"rex_balance",void 0);q([U.field("int64")],_f.prototype,"matured_rex",void 0);q([U.field(Hh,{array:!0})],_f.prototype,"rex_maturities",void 0);_f=q([U.type("account_rex_info")],_f);let Wh=class extends U{};q([U.field("name")],Wh.prototype,"account_name",void 0);q([U.field("checksum256")],Wh.prototype,"code_hash",void 0);q([U.field("checksum256")],Wh.prototype,"abi_hash",void 0);q([U.field(eI)],Wh.prototype,"abi",void 0);Wh=q([U.type("get_raw_abi_response")],Wh);let qr=class extends U{getPermission(e){const t=qe.from(e),n=this.permissions.find(i=>i.perm_name.equals(t));if(!n)throw new Error(`Unknown permission ${t} on account ${this.account_name}.`);return n}};q([U.field("name")],qr.prototype,"account_name",void 0);q([U.field("uint32")],qr.prototype,"head_block_num",void 0);q([U.field("time_point")],qr.prototype,"head_block_time",void 0);q([U.field("bool")],qr.prototype,"privileged",void 0);q([U.field("time_point")],qr.prototype,"last_code_update",void 0);q([U.field("time_point")],qr.prototype,"created",void 0);q([U.field("asset?")],qr.prototype,"core_liquid_balance",void 0);q([U.field("int64")],qr.prototype,"ram_quota",void 0);q([U.field("int64")],qr.prototype,"net_weight",void 0);q([U.field("int64")],qr.prototype,"cpu_weight",void 0);q([U.field(tu)],qr.prototype,"net_limit",void 0);q([U.field(tu)],qr.prototype,"cpu_limit",void 0);q([U.field(tu,{optional:!0})],qr.prototype,"subjective_cpu_bill_limit",void 0);q([U.field("uint64")],qr.prototype,"ram_usage",void 0);q([U.field(jh,{array:!0})],qr.prototype,"permissions",void 0);q([U.field(qh,{optional:!0})],qr.prototype,"total_resources",void 0);q([U.field(Vh,{optional:!0})],qr.prototype,"self_delegated_bandwidth",void 0);q([U.field(zh,{optional:!0})],qr.prototype,"refund_request",void 0);q([U.field(fa,{optional:!0})],qr.prototype,"voter_info",void 0);q([U.field(_f,{optional:!0})],qr.prototype,"rex_info",void 0);qr=q([U.type("account_object")],qr);let Sf=class extends U{};q([U.field(qe)],Sf.prototype,"account_name",void 0);q([U.field(qe)],Sf.prototype,"permission_name",void 0);q([U.field(ii,{optional:!0})],Sf.prototype,"authorizing_key",void 0);q([U.field(ci,{optional:!0})],Sf.prototype,"authorizing_account",void 0);q([U.field(mm)],Sf.prototype,"weight",void 0);q([U.field(mr)],Sf.prototype,"threshold",void 0);Sf=q([U.type("account_by_authorizers_row")],Sf);let ax=class extends U{};q([U.field(Sf,{array:!0})],ax.prototype,"accounts",void 0);ax=q([U.type("account_by_authorizers")],ax);let Ig=class extends U{};q([U.field("name")],Ig.prototype,"producer_name",void 0);q([U.field("public_key")],Ig.prototype,"block_signing_key",void 0);Ig=q([U.type("new_producers_entry")],Ig);let Rg=class extends U{};q([U.field("uint32")],Rg.prototype,"version",void 0);q([U.field(Ig,{array:!0})],Rg.prototype,"producers",void 0);Rg=q([U.type("new_producers")],Rg);let ox=class extends U{};q([U.field("uint16")],ox.prototype,"type",void 0);q([U.field("bytes")],ox.prototype,"data",void 0);ox=q([U.type("block_extension")],ox);let Ng=class extends U{};q([U.field("uint16")],Ng.prototype,"type",void 0);q([U.field("bytes")],Ng.prototype,"data",void 0);Ng=q([U.type("header_extension")],Ng);let rH=class{static from(e){let t,n;return typeof e=="string"?(t=kt.from(e),n={}):(t=kt.from(e.id),n=e),new this(t,n)}constructor(e,t){this.id=e,this.extra=t}get transaction(){if(this.extra.packed_trx)switch(this.extra.compression){case"zlib":{const e=qv.inflate(nt.from(this.extra.packed_trx,"hex").array);return Ut.decode({data:e,type:hn})}case"none":return Ut.decode({data:this.extra.packed_trx,type:hn});default:throw new Error(`Unsupported compression type ${this.extra.compression}`)}}get signatures(){if(this.extra.signatures)return this.extra.signatures.map(d6.from)}equals(e){return this.id.equals(e.id)}toJSON(){return this.id}};rH.abiName="trx_variant";let cx=class extends Fh{get id(){return this.trx.id}};q([U.field(rH)],cx.prototype,"trx",void 0);cx=q([U.type("get_block_response_receipt")],cx);let wn=class extends U{};q([U.field("time_point")],wn.prototype,"timestamp",void 0);q([U.field("name")],wn.prototype,"producer",void 0);q([U.field("uint16")],wn.prototype,"confirmed",void 0);q([U.field(Or)],wn.prototype,"previous",void 0);q([U.field("checksum256")],wn.prototype,"transaction_mroot",void 0);q([U.field("checksum256")],wn.prototype,"action_mroot",void 0);q([U.field("uint32")],wn.prototype,"schedule_version",void 0);q([U.field(Rg,{optional:!0})],wn.prototype,"new_producers",void 0);q([U.field("header_extension",{optional:!0})],wn.prototype,"header_extensions",void 0);q([U.field("any",{optional:!0})],wn.prototype,"new_protocol_features",void 0);q([U.field("signature")],wn.prototype,"producer_signature",void 0);q([U.field(cx,{array:!0})],wn.prototype,"transactions",void 0);q([U.field("block_extension",{optional:!0})],wn.prototype,"block_extensions",void 0);q([U.field(Or)],wn.prototype,"id",void 0);q([U.field("uint32")],wn.prototype,"block_num",void 0);q([U.field("uint32")],wn.prototype,"ref_block_prefix",void 0);wn=q([U.type("get_block_response")],wn);let us=class extends U{};q([U.field("uint32")],us.prototype,"block_num",void 0);q([U.field("uint32")],us.prototype,"ref_block_num",void 0);q([U.field(Or)],us.prototype,"id",void 0);q([U.field("time_point")],us.prototype,"timestamp",void 0);q([U.field("name")],us.prototype,"producer",void 0);q([U.field("uint16")],us.prototype,"confirmed",void 0);q([U.field(Or)],us.prototype,"previous",void 0);q([U.field("checksum256")],us.prototype,"transaction_mroot",void 0);q([U.field("checksum256")],us.prototype,"action_mroot",void 0);q([U.field("uint32")],us.prototype,"schedule_version",void 0);q([U.field("signature")],us.prototype,"producer_signature",void 0);q([U.field("uint32")],us.prototype,"ref_block_prefix",void 0);us=q([U.type("get_block_response")],us);let Og=class extends U{};q([U.field("name")],Og.prototype,"producer_name",void 0);q([U.field("any")],Og.prototype,"authority",void 0);Og=q([U.type("active_schedule_producer_authority")],Og);let kg=class extends U{};q([U.field("name")],kg.prototype,"producer_name",void 0);q([U.field(Og)],kg.prototype,"authority",void 0);kg=q([U.type("active_schedule_producer")],kg);let ux=class extends U{};q([U.field("uint32")],ux.prototype,"version",void 0);q([U.field(kg,{array:!0})],ux.prototype,"producers",void 0);ux=q([U.type("active_schedule")],ux);let eo=class extends U{};q([U.field("time_point")],eo.prototype,"timestamp",void 0);q([U.field("name")],eo.prototype,"producer",void 0);q([U.field("uint16")],eo.prototype,"confirmed",void 0);q([U.field(Or)],eo.prototype,"previous",void 0);q([U.field("checksum256")],eo.prototype,"transaction_mroot",void 0);q([U.field("checksum256")],eo.prototype,"action_mroot",void 0);q([U.field("uint32")],eo.prototype,"schedule_version",void 0);q([U.field(Ng,{array:!0,optional:!0})],eo.prototype,"header_extensions",void 0);q([U.field("signature")],eo.prototype,"producer_signature",void 0);eo=q([U.type("block_state_header")],eo);let li=class extends U{};q([U.field("uint32")],li.prototype,"block_num",void 0);q([U.field("uint32")],li.prototype,"dpos_proposed_irreversible_blocknum",void 0);q([U.field("uint32")],li.prototype,"dpos_irreversible_blocknum",void 0);q([U.field(Or)],li.prototype,"id",void 0);q([U.field(eo)],li.prototype,"header",void 0);q([U.field("any")],li.prototype,"active_schedule",void 0);q([U.field("any")],li.prototype,"blockroot_merkle",void 0);q([U.field("any")],li.prototype,"producer_to_last_produced",void 0);q([U.field("any")],li.prototype,"producer_to_last_implied_irb",void 0);q([U.field("any")],li.prototype,"valid_block_signing_authority",void 0);q([U.field("any")],li.prototype,"confirm_count",void 0);q([U.field("any")],li.prototype,"pending_schedule",void 0);q([U.field("any")],li.prototype,"activated_protocol_features",void 0);q([U.field("any")],li.prototype,"additional_signatures",void 0);li=q([U.type("get_block_header_state_response")],li);let qn=class extends U{getTransactionHeader(e=120){const t=Af.fromMilliseconds(this.head_block_time.toMilliseconds()+e*1e3),i=this.last_irreversible_block_id.array.subarray(8,12),s=new Uint32Array(i.buffer,i.byteOffset,1)[0];return eu.from({expiration:t,ref_block_num:Number(this.last_irreversible_block_num)&65535,ref_block_prefix:s})}};q([U.field("string")],qn.prototype,"server_version",void 0);q([U.field("checksum256")],qn.prototype,"chain_id",void 0);q([U.field("uint32")],qn.prototype,"head_block_num",void 0);q([U.field("uint32")],qn.prototype,"last_irreversible_block_num",void 0);q([U.field(Or)],qn.prototype,"last_irreversible_block_id",void 0);q([U.field(Or)],qn.prototype,"head_block_id",void 0);q([U.field("time_point")],qn.prototype,"head_block_time",void 0);q([U.field("name")],qn.prototype,"head_block_producer",void 0);q([U.field("uint64")],qn.prototype,"virtual_block_cpu_limit",void 0);q([U.field("uint64")],qn.prototype,"virtual_block_net_limit",void 0);q([U.field("uint64")],qn.prototype,"block_cpu_limit",void 0);q([U.field("uint64")],qn.prototype,"block_net_limit",void 0);q([U.field("string?")],qn.prototype,"server_version_string",void 0);q([U.field("uint32?")],qn.prototype,"fork_db_head_block_num",void 0);q([U.field("block_id_type?")],qn.prototype,"fork_db_head_block_id",void 0);qn=q([U.type("get_info_response")],qn);let P0=class extends U{};q([U.field("name")],P0.prototype,"code",void 0);q([U.field("name")],P0.prototype,"scope",void 0);q([U.field("name")],P0.prototype,"table",void 0);q([U.field("name")],P0.prototype,"payer",void 0);q([U.field("uint32")],P0.prototype,"count",void 0);P0=q([U.type("get_table_by_scope_response_row")],P0);let Dg=class extends U{};q([U.field(P0,{array:!0})],Dg.prototype,"rows",void 0);q([U.field("string")],Dg.prototype,"more",void 0);Dg=q([U.type("get_table_by_scope_response")],Dg);let Mf=class extends U{};q([U.field(Rr)],Mf.prototype,"global_action_seq",void 0);q([U.field(rs)],Mf.prototype,"account_action_seq",void 0);q([U.field(mr)],Mf.prototype,"block_num",void 0);q([U.field(l4)],Mf.prototype,"block_time",void 0);q([U.field("any")],Mf.prototype,"action_trace",void 0);q([U.field("boolean?")],Mf.prototype,"irrevirsible",void 0);Mf=q([U.type("ordered_action_result")],Mf);let Kh=class extends U{};q([U.field(Mf,{array:!0})],Kh.prototype,"actions",void 0);q([U.field(wf)],Kh.prototype,"last_irreversible_block",void 0);q([U.field(wf)],Kh.prototype,"head_block_num",void 0);q([U.field("boolean?")],Kh.prototype,"time_limit_exceeded_error",void 0);Kh=q([U.type("get_actions_response")],Kh);let ED=class extends U{};ED=q([U.type("transaction_trace")],ED);let to=class extends U{};q([U.field("any")],to.prototype,"actions",void 0);q([U.field("any")],to.prototype,"context_free_actions",void 0);q([U.field("any")],to.prototype,"context_free_data",void 0);q([U.field("number")],to.prototype,"delay_sec",void 0);q([U.field("string")],to.prototype,"expiration",void 0);q([U.field("number")],to.prototype,"max_cpu_usage_ms",void 0);q([U.field("number")],to.prototype,"max_net_usage_words",void 0);q([U.field("number")],to.prototype,"ref_block_num",void 0);q([U.field("number")],to.prototype,"ref_block_prefix",void 0);q([U.field("string",{array:!0})],to.prototype,"signatures",void 0);to=q([U.type("trx")],to);let fx=class extends U{};q([U.field(Fh)],fx.prototype,"receipt",void 0);q([U.field("trx")],fx.prototype,"trx",void 0);fx=q([U.type("transaction_info")],fx);let Pf=class extends U{};q([U.field(kt)],Pf.prototype,"id",void 0);q([U.field(mr)],Pf.prototype,"block_num",void 0);q([U.field(l4)],Pf.prototype,"block_time",void 0);q([U.field(mr)],Pf.prototype,"last_irreversible_block",void 0);q([U.field("any?")],Pf.prototype,"traces",void 0);q([U.field("any")],Pf.prototype,"trx",void 0);Pf=q([U.type("get_transaction_response")],Pf);let lx=class extends U{};q([U.field("name",{array:!0})],lx.prototype,"account_names",void 0);lx=q([U.type("get_key_accounts_response")],lx);let dx=class extends U{};q([U.field("name",{array:!0})],dx.prototype,"controlled_accounts",void 0);dx=q([U.type("get_controlled_accounts_response")],dx);let gm=class extends U{};q([U.field("asset")],gm.prototype,"supply",void 0);q([U.field("asset")],gm.prototype,"max_supply",void 0);q([U.field("name")],gm.prototype,"issuer",void 0);gm=q([U.type("get_currency_stats_item_response")],gm);let ro=class extends U{};q([U.field("string")],ro.prototype,"state",void 0);q([U.field("uint32")],ro.prototype,"head_number",void 0);q([U.field(Or)],ro.prototype,"head_id",void 0);q([U.field("time_point")],ro.prototype,"head_timestamp",void 0);q([U.field("uint32")],ro.prototype,"irreversible_number",void 0);q([U.field(Or)],ro.prototype,"irreversible_id",void 0);q([U.field("time_point")],ro.prototype,"irreversible_timestamp",void 0);q([U.field(Or)],ro.prototype,"earliest_tracked_block_id",void 0);q([U.field("uint32")],ro.prototype,"earliest_tracked_block_number",void 0);ro=q([U.type("get_transaction_status_response")],ro);let Bg=class extends U{};q([U.field(mr)],Bg.prototype,"threshold",void 0);q([U.field(bm,{array:!0})],Bg.prototype,"keys",void 0);Bg=q([U.type("producer_authority")],Bg);let $g=class extends U{static from(e){return super.from({...e,authority:[e.authority[0],Bg.from(e.authority[1])]})}};q([U.field("name")],$g.prototype,"producer_name",void 0);q([U.field("any",{array:!0})],$g.prototype,"authority",void 0);$g=q([U.type("producer")],$g);let Gh=class extends U{};q([U.field("uint32")],Gh.prototype,"version",void 0);q([U.field($g,{array:!0})],Gh.prototype,"producers",void 0);Gh=q([U.type("producer_schedule")],Gh);let vm=class extends U{};q([U.field(Gh,{optional:!0})],vm.prototype,"active",void 0);q([U.field(Gh,{optional:!0})],vm.prototype,"pending",void 0);q([U.field(Gh,{optional:!0})],vm.prototype,"proposed",void 0);vm=q([U.type("get_producer_schedule_response")],vm);let ru=class extends U{};q([U.field("checksum256")],ru.prototype,"feature_digest",void 0);q([U.field("uint32")],ru.prototype,"activation_ordinal",void 0);q([U.field("uint32")],ru.prototype,"activation_block_num",void 0);q([U.field("checksum256")],ru.prototype,"description_digest",void 0);q([U.field("string",{array:!0})],ru.prototype,"dependencies",void 0);q([U.field("string")],ru.prototype,"protocol_feature_type",void 0);q([U.field("any",{array:!0})],ru.prototype,"specification",void 0);ru=q([U.type("protocol_feature")],ru);let Lg=class extends U{};q([U.field(ru,{array:!0})],Lg.prototype,"activated_protocol_features",void 0);q([U.field("uint32",{optional:!0})],Lg.prototype,"more",void 0);Lg=q([U.type("get_protocol_features_response")],Lg);class qoe{constructor(e){this.client=e}async get_abi(e){return this.client.call({path:"/v1/chain/get_abi",params:{account_name:qe.from(e)}})}async get_raw_abi(e){return this.client.call({path:"/v1/chain/get_raw_abi",params:{account_name:qe.from(e)},responseType:Wh})}async get_account(e,t=qr){return this.client.call({path:"/v1/chain/get_account",params:{account_name:qe.from(e)},responseType:t})}async get_accounts_by_authorizers(e){return this.client.call({path:"/v1/chain/get_accounts_by_authorizers",params:e,responseType:ax})}async get_activated_protocol_features(e){return this.client.call({path:"/v1/chain/get_activated_protocol_features",params:e,responseType:Lg})}async get_block(e){return this.client.call({path:"/v1/chain/get_block",params:{block_num_or_id:e},responseType:wn})}async get_block_header_state(e){return this.client.call({path:"/v1/chain/get_block_header_state",params:{block_num_or_id:e},responseType:li})}async get_block_info(e){return this.client.call({path:"/v1/chain/get_block_info",params:{block_num:e},responseType:us})}async get_currency_balance(e,t,n){const i={account:qe.from(t),code:qe.from(e)};return n&&(i.symbol=n),this.client.call({path:"/v1/chain/get_currency_balance",params:i,responseType:"asset[]"})}async get_currency_stats(e,t){const n={code:qe.from(e),symbol:t},i=await this.client.call({path:"/v1/chain/get_currency_stats",params:n}),s={};return Object.keys(i).forEach(a=>s[a]=gm.from(i[a])),s}async get_info(){return this.client.call({path:"/v1/chain/get_info",responseType:qn,method:"GET"})}async get_producer_schedule(){return this.client.call({path:"/v1/chain/get_producer_schedule",responseType:vm})}async compute_transaction(e){return st(e,Nn)||(e=Nn.fromSigned($o.from(e))),this.client.call({path:"/v1/chain/compute_transaction",params:{transaction:e}})}async send_read_only_transaction(e){return st(e,Nn)||(e=Nn.fromSigned($o.from(e))),this.client.call({path:"/v1/chain/send_read_only_transaction",params:{transaction:e}})}async push_transaction(e){return st(e,Nn)||(e=Nn.fromSigned($o.from(e))),this.client.call({path:"/v1/chain/push_transaction",params:e})}async send_transaction(e){return st(e,Nn)||(e=Nn.fromSigned($o.from(e))),this.client.call({path:"/v1/chain/send_transaction",params:e})}async send_transaction2(e,t){return st(e,Nn)||(e=Nn.fromSigned($o.from(e))),this.client.call({path:"/v1/chain/send_transaction2",params:{return_failure_trace:!0,retry_trx:!1,retry_trx_num_blocks:0,transaction:e,...t}})}async get_table_rows(e){const t=e.type;let n=e.key_type;const i=e.lower_bound||e.upper_bound;!n&&i&&(st(i,Rr)?n="i64":st(i,Lh)?n="i128":st(i,kt)?n="sha256":st(i,S0)&&(n="ripemd160")),n||(n="name");let s=e.json;s===void 0&&(s=t===void 0);let a=e.upper_bound;a&&typeof a!="string"&&(a=String(a));let o=e.lower_bound;o&&typeof o!="string"&&(o=String(o));let c=e.scope;typeof c>"u"?c=String(qe.from(e.code)):typeof c!="string"&&(c=String(c));let{rows:u,more:f,next_key:l}=await this.client.call({path:"/v1/chain/get_table_rows",params:{...e,code:qe.from(e.code),table:qe.from(e.table),limit:e.limit!==void 0?mr.from(e.limit):void 0,scope:c,key_type:n,json:s,upper_bound:a,lower_bound:o}}),d;if(e.show_payer&&(d=[],u=u.map(({data:h,payer:y})=>(d.push(qe.from(y)),h))),t&&(s?u=u.map(h=>typeof h=="string"&&nt.isBytes(h)?Ut.decode({data:nt.from(h),type:t}):Ut.decode({object:h,type:t})):u=u.map(h=>nt.from(h)).map(h=>Ut.decode({data:h,type:t}))),l&&l.length>0){let h;switch(n){case"i64":h=Rr;break;case"i128":h=Lh;break;case"name":h=qe;break;case"float64":h=t5;break;case"float128":h=f4;break;case"sha256":h=kt;break;case"ripemd160":h=S0;break;default:throw new Error(`Unsupported key type: ${n}`)}h===qe?l=qe.from(Ut.decode({object:l,type:Rr})):l=Ut.decode({object:l,type:h})}else l=void 0;return{rows:u,more:f,next_key:l,ram_payers:d}}async get_table_by_scope(e){return this.client.call({path:"/v1/chain/get_table_by_scope",params:e,responseType:Dg})}async get_transaction_status(e){return this.client.call({path:"/v1/chain/get_transaction_status",params:{id:kt.from(e)},responseType:ro})}}class Voe{constructor(e){this.client=e}async get_actions(e,t,n){return this.client.call({path:"/v1/history/get_actions",params:{account_name:qe.from(e),pos:wf.from(t),offset:wf.from(n)},responseType:Kh})}async get_transaction(e,t={}){return this.client.call({path:"/v1/history/get_transaction",params:{id:kt.from(e),block_num_hint:t.blockNumHint&&mr.from(t.blockNumHint),traces:t.excludeTraces===!0?!1:void 0},responseType:Pf})}async get_key_accounts(e){return this.client.call({path:"/v1/history/get_key_accounts",params:{public_key:ii.from(e)},responseType:lx})}async get_controlled_accounts(e){return this.client.call({path:"/v1/history/get_controlled_accounts",params:{controlling_account:qe.from(e)},responseType:dx})}}class r5 extends Error{static formatError(e){return e.what==="unspecified"&&e.details[0].file&&e.details[0].file==="http_plugin.cpp"&&e.details[0].message.slice(0,11)==="unknown key"?"Account not found":e.what==="unspecified"&&e.details&&e.details.length>0?e.details[0].message:e.what&&e.what.length>0?e.what:"Unknown API error"}constructor(e,t){let n;t.json&&t.json.error?n=`${r5.formatError(t.json.error)} at ${e}`:n=`HTTP ${t.status} at ${e}`,super(n),this.path=e,this.response=t}get error(){const{json:e}=this.response;return e?e.error:void 0}get name(){const{error:e}=this;return e?e.name:"unspecified"}get code(){const{error:e}=this;return e?e.code:0}get details(){const{error:e}=this;return e?e.details:[]}}r5.__className="APIError";class iI{constructor(e){if(this.v1={chain:new qoe(this),history:new Voe(this)},e.provider)this.provider=e.provider;else if(e.url)this.provider=new sx(e.url,e);else throw new Error("Missing url or provider")}async call(e){const t=await this.provider.call(e),{json:n}=t;if(Math.floor(t.status/100)!==2||n&&typeof n.error=="object")throw new r5(e.path,t);return e.responseType?Ef({type:e.responseType,object:t.json}):t.json||t.text}}iI.__className="APIClient";var z_;let Vn=class extends U{};q([U.field("uint16")],Vn.prototype,"networkVersion",void 0);q([U.field("checksum256")],Vn.prototype,"chainId",void 0);q([U.field("checksum256")],Vn.prototype,"nodeId",void 0);q([U.field("public_key")],Vn.prototype,"key",void 0);q([U.field("int64")],Vn.prototype,"time",void 0);q([U.field("checksum256")],Vn.prototype,"token",void 0);q([U.field("signature")],Vn.prototype,"sig",void 0);q([U.field("string")],Vn.prototype,"p2pAddress",void 0);q([U.field("uint32")],Vn.prototype,"lastIrreversibleBlockNumber",void 0);q([U.field(Or)],Vn.prototype,"lastIrreversibleBlockId",void 0);q([U.field("uint32")],Vn.prototype,"headNum",void 0);q([U.field(Or)],Vn.prototype,"headId",void 0);q([U.field("string")],Vn.prototype,"os",void 0);q([U.field("string")],Vn.prototype,"agent",void 0);q([U.field("int16")],Vn.prototype,"generation",void 0);Vn=q([U.type("handshake_message")],Vn);let Qh=class extends U{};q([U.field("uint32")],Qh.prototype,"lastIrreversibleBlockNumber",void 0);q([U.field(Or)],Qh.prototype,"lastIrreversibleBlockId",void 0);q([U.field("uint32")],Qh.prototype,"headNum",void 0);q([U.field(Or)],Qh.prototype,"headId",void 0);Qh=q([U.type("chain_size_message")],Qh);let Ug=class extends U{};q([U.field("uint8")],Ug.prototype,"reason",void 0);q([U.field("checksum256")],Ug.prototype,"nodeId",void 0);Ug=q([U.type("go_away_message")],Ug);let Zh=class extends U{};q([U.field("int64")],Zh.prototype,"org",void 0);q([U.field("int64")],Zh.prototype,"rec",void 0);q([U.field("int64")],Zh.prototype,"xmt",void 0);q([U.field("int64")],Zh.prototype,"dst",void 0);Zh=q([U.type("time_message")],Zh);let Fg=class extends U{};q([U.field("checksum256",{array:!0})],Fg.prototype,"knownTrx",void 0);q([U.field(Or,{array:!0})],Fg.prototype,"knownBlocks",void 0);Fg=q([U.type("notice_message")],Fg);let jg=class extends U{};q([U.field("checksum256",{array:!0})],jg.prototype,"reqTrx",void 0);q([U.field(Or,{array:!0})],jg.prototype,"reqBlocks",void 0);jg=q([U.type("request_message")],jg);let qg=class extends U{};q([U.field("uint32")],qg.prototype,"startBlock",void 0);q([U.field("uint32")],qg.prototype,"endBlock",void 0);qg=q([U.type("sync_request_message")],qg);let Vg=class extends U{};q([U.field("name")],Vg.prototype,"producer_name",void 0);q([U.field("public_key")],Vg.prototype,"block_signing_key",void 0);Vg=q([U.type("new_producers_entry")],Vg);let zg=class extends U{};q([U.field("uint32")],zg.prototype,"version",void 0);q([U.field(Vg,{array:!0})],zg.prototype,"producers",void 0);zg=q([U.type("new_producers")],zg);let Hg=class extends U{};q([U.field("uint16")],Hg.prototype,"type",void 0);q([U.field("bytes")],Hg.prototype,"data",void 0);Hg=q([U.type("block_extension")],Hg);let Wg=class extends U{};q([U.field("uint16")],Wg.prototype,"type",void 0);q([U.field("bytes")],Wg.prototype,"data",void 0);Wg=q([U.type("header_extension")],Wg);let H_=class extends Ui{};H_=q([Ui.type("trx_variant",[kt,Nn])],H_);let Jh=class extends U{};q([U.field(uf)],Jh.prototype,"status",void 0);q([U.field(mr)],Jh.prototype,"cpu_usage_us",void 0);q([U.field(X2)],Jh.prototype,"net_usage_words",void 0);q([U.field(H_)],Jh.prototype,"trx",void 0);Jh=q([U.type("full_transaction_receipt")],Jh);let no=z_=class extends U{get blockNum(){return this.previous.blockNum.adding(1)}get id(){const e=kt.hash(Ut.encode({object:this,type:z_}));return Or.fromBlockChecksum(e,this.blockNum)}};q([U.field("uint32")],no.prototype,"timeSlot",void 0);q([U.field("name")],no.prototype,"producer",void 0);q([U.field("uint16")],no.prototype,"confirmed",void 0);q([U.field(Or)],no.prototype,"previous",void 0);q([U.field(Or)],no.prototype,"transaction_mroot",void 0);q([U.field(Or)],no.prototype,"action_mroot",void 0);q([U.field("uint32")],no.prototype,"schedule_version",void 0);q([U.field(zg,{optional:!0})],no.prototype,"new_producers",void 0);q([U.field(Wg,{array:!0})],no.prototype,"header_extensions",void 0);no=z_=q([U.type("block_header")],no);let xm=class extends no{};q([U.field("signature")],xm.prototype,"producer_signature",void 0);q([U.field(Jh,{array:!0})],xm.prototype,"transactions",void 0);q([U.field(Hg,{array:!0})],xm.prototype,"block_extensions",void 0);xm=q([U.type("signed_block")],xm);let AD=class extends Ui{};AD=q([Ui.type("net_message",[Vn,Qh,Ug,Zh,Fg,jg,qg,xm,Nn])],AD);const Lp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n5(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function W_(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function gp(r,...e){if(!n5(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function nH(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");W_(r.outputLen),W_(r.blockLen)}function hx(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function zoe(r,e){gp(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function sCe(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function wm(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function O7(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function ac(r,e){return r<<32-e|r>>>e}const Hoe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Woe(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function Koe(r){for(let e=0;e<r.length;e++)r[e]=Woe(r[e]);return r}const aCe=Hoe?r=>r:Koe,iH=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Goe=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Eh(r){if(gp(r),iH)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=Goe[r[t]];return e}const wu={_0:48,_9:57,A:65,F:70,a:97,f:102};function _D(r){if(r>=wu._0&&r<=wu._9)return r-wu._0;if(r>=wu.A&&r<=wu.F)return r-(wu.A-10);if(r>=wu.a&&r<=wu.f)return r-(wu.a-10)}function px(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(iH)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const a=_D(r.charCodeAt(s)),o=_D(r.charCodeAt(s+1));if(a===void 0||o===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=a*16+o}return n}function Qoe(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function sI(r){return typeof r=="string"&&(r=Qoe(r)),gp(r),r}function Rc(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];gp(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}let sH=class{};function aI(r){const e=n=>r().update(sI(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function oI(r=32){if(Lp&&typeof Lp.getRandomValues=="function")return Lp.getRandomValues(new Uint8Array(r));if(Lp&&typeof Lp.randomBytes=="function")return Uint8Array.from(Lp.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Zoe(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(t>>i&s),o=Number(t&s),c=n?4:0,u=n?0:4;r.setUint32(e+c,a,n),r.setUint32(e+u,o,n)}function Joe(r,e,t){return r&e^~r&t}function Yoe(r,e,t){return r&e^r&t^e&t}class aH extends sH{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=O7(this.buffer)}update(e){hx(this),e=sI(e),gp(e);const{view:t,buffer:n,blockLen:i}=this,s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=O7(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hx(this),zoe(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,wm(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(n,0),a=0);for(let l=a;l<i;l++)t[l]=0;Zoe(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=O7(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,f[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.destroyed=a,e.finished=s,e.length=i,e.pos=o,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Zf=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ei=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Ai=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),I8=BigInt(2**32-1),SD=BigInt(32);function Xoe(r,e=!1){return e?{h:Number(r&I8),l:Number(r>>SD&I8)}:{h:Number(r>>SD&I8)|0,l:Number(r&I8)|0}}function ece(r,e=!1){const t=r.length;let n=new Uint32Array(t),i=new Uint32Array(t);for(let s=0;s<t;s++){const{h:a,l:o}=Xoe(r[s],e);[n[s],i[s]]=[a,o]}return[n,i]}const MD=(r,e,t)=>r>>>t,PD=(r,e,t)=>r<<32-t|e>>>t,Up=(r,e,t)=>r>>>t|e<<32-t,Fp=(r,e,t)=>r<<32-t|e>>>t,R8=(r,e,t)=>r<<64-t|e>>>t-32,N8=(r,e,t)=>r>>>t-32|e<<64-t,cCe=(r,e,t)=>r<<t|e>>>32-t,uCe=(r,e,t)=>e<<t|r>>>32-t,fCe=(r,e,t)=>e<<t-32|r>>>64-t,lCe=(r,e,t)=>r<<t-32|e>>>64-t;function Eu(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const tce=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),rce=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,nce=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),ice=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,sce=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),ace=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,oce=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jf=new Uint32Array(64);let cce=class extends aH{constructor(e=32){super(64,e,8,!1),this.A=Zf[0]|0,this.B=Zf[1]|0,this.C=Zf[2]|0,this.D=Zf[3]|0,this.E=Zf[4]|0,this.F=Zf[5]|0,this.G=Zf[6]|0,this.H=Zf[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,t,n,i,s,a,o,c]}set(e,t,n,i,s,a,o,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,t){for(let l=0;l<16;l++,t+=4)Jf[l]=e.getUint32(t,!1);for(let l=16;l<64;l++){const d=Jf[l-15],h=Jf[l-2],y=ac(d,7)^ac(d,18)^d>>>3,p=ac(h,17)^ac(h,19)^h>>>10;Jf[l]=p+Jf[l-7]+y+Jf[l-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){const d=ac(o,6)^ac(o,11)^ac(o,25),h=f+d+Joe(o,c,u)+oce[l]+Jf[l]|0,p=(ac(n,2)^ac(n,13)^ac(n,22))+Yoe(n,i,s)|0;f=u,u=c,c=o,o=a+h|0,a=s,s=i,i=n,n=h+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,a,o,c,u,f)}roundClean(){wm(Jf)}destroy(){this.set(0,0,0,0,0,0,0,0),wm(this.buffer)}};const oH=ece(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),uce=oH[0],fce=oH[1],Yf=new Uint32Array(80),Xf=new Uint32Array(80);let cH=class extends aH{constructor(e=64){super(128,e,16,!1),this.Ah=Ai[0]|0,this.Al=Ai[1]|0,this.Bh=Ai[2]|0,this.Bl=Ai[3]|0,this.Ch=Ai[4]|0,this.Cl=Ai[5]|0,this.Dh=Ai[6]|0,this.Dl=Ai[7]|0,this.Eh=Ai[8]|0,this.El=Ai[9]|0,this.Fh=Ai[10]|0,this.Fl=Ai[11]|0,this.Gh=Ai[12]|0,this.Gl=Ai[13]|0,this.Hh=Ai[14]|0,this.Hl=Ai[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:f,Fh:l,Fl:d,Gh:h,Gl:y,Hh:p,Hl:g}=this;return[e,t,n,i,s,a,o,c,u,f,l,d,h,y,p,g]}set(e,t,n,i,s,a,o,c,u,f,l,d,h,y,p,g){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=d|0,this.Gh=h|0,this.Gl=y|0,this.Hh=p|0,this.Hl=g|0}process(e,t){for(let b=0;b<16;b++,t+=4)Yf[b]=e.getUint32(t),Xf[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const _=Yf[b-15]|0,C=Xf[b-15]|0,N=Up(_,C,1)^Up(_,C,8)^MD(_,C,7),x=Fp(_,C,1)^Fp(_,C,8)^PD(_,C,7),I=Yf[b-2]|0,$=Xf[b-2]|0,j=Up(I,$,19)^R8(I,$,61)^MD(I,$,6),O=Fp(I,$,19)^N8(I,$,61)^PD(I,$,6),E=nce(x,O,Xf[b-7],Xf[b-16]),S=ice(E,N,j,Yf[b-7],Yf[b-16]);Yf[b]=S|0,Xf[b]=E|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:f,Eh:l,El:d,Fh:h,Fl:y,Gh:p,Gl:g,Hh:m,Hl:v}=this;for(let b=0;b<80;b++){const _=Up(l,d,14)^Up(l,d,18)^R8(l,d,41),C=Fp(l,d,14)^Fp(l,d,18)^N8(l,d,41),N=l&h^~l&p,x=d&y^~d&g,I=sce(v,C,x,fce[b],Xf[b]),$=ace(I,m,_,N,uce[b],Yf[b]),j=I|0,O=Up(n,i,28)^R8(n,i,34)^R8(n,i,39),E=Fp(n,i,28)^N8(n,i,34)^N8(n,i,39),S=n&s^n&o^s&o,A=i&a^i&c^a&c;m=p|0,v=g|0,p=h|0,g=y|0,h=l|0,y=d|0,{h:l,l:d}=Eu(u|0,f|0,$|0,j|0),u=o|0,f=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const w=tce(j,E,A);n=rce(w,$,O,S),i=w|0}({h:n,l:i}=Eu(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=Eu(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=Eu(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:f}=Eu(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:d}=Eu(this.Eh|0,this.El|0,l|0,d|0),{h,l:y}=Eu(this.Fh|0,this.Fl|0,h|0,y|0),{h:p,l:g}=Eu(this.Gh|0,this.Gl|0,p|0,g|0),{h:m,l:v}=Eu(this.Hh|0,this.Hl|0,m|0,v|0),this.set(n,i,s,a,o,c,u,f,l,d,h,y,p,g,m,v)}roundClean(){wm(Yf,Xf)}destroy(){wm(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class lce extends cH{constructor(){super(48),this.Ah=Ei[0]|0,this.Al=Ei[1]|0,this.Bh=Ei[2]|0,this.Bl=Ei[3]|0,this.Ch=Ei[4]|0,this.Cl=Ei[5]|0,this.Dh=Ei[6]|0,this.Dl=Ei[7]|0,this.Eh=Ei[8]|0,this.El=Ei[9]|0,this.Fh=Ei[10]|0,this.Fl=Ei[11]|0,this.Gh=Ei[12]|0,this.Gl=Ei[13]|0,this.Hh=Ei[14]|0,this.Hl=Ei[15]|0}}const cI=aI(()=>new cce),uH=aI(()=>new cH),dce=aI(()=>new lce);let fH=class extends sH{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,nH(e);const n=sI(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),wm(s)}update(e){return hx(this),this.iHash.update(e),this}digestInto(e){hx(this),gp(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const lH=(r,e,t)=>new fH(r,e).update(t).digest();lH.create=(r,e)=>new fH(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uI=BigInt(0),K_=BigInt(1);function Yh(r,e=""){if(typeof r!="boolean"){const t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function jo(r,e,t=""){const n=n5(r),i=r==null?void 0:r.length,s=e!==void 0;if(!n||s&&i!==e){const a=t&&`"${t}" `,o=s?` of length ${e}`:"",c=n?`length=${i}`:`type=${typeof r}`;throw new Error(a+"expected Uint8Array"+o+", got "+c)}return r}function O8(r){const e=r.toString(16);return e.length&1?"0"+e:e}function dH(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?uI:BigInt("0x"+r)}function d4(r){return dH(Eh(r))}function Kg(r){return gp(r),dH(Eh(Uint8Array.from(r).reverse()))}function fI(r,e){return px(r.toString(16).padStart(e*2,"0"))}function hH(r,e){return fI(r,e).reverse()}function Kr(r,e,t){let n;if(typeof e=="string")try{n=px(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(n5(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function TD(r){return Uint8Array.from(r)}const k7=r=>typeof r=="bigint"&&uI<=r;function hce(r,e,t){return k7(r)&&k7(e)&&k7(t)&&e<=r&&r<t}function G_(r,e,t,n){if(!hce(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function pH(r){let e;for(e=0;r>uI;r>>=K_,e+=1);return e}const i5=r=>(K_<<BigInt(r))-K_;function pce(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");const n=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let s=n(r),a=n(r),o=0;const c=()=>{s.fill(1),a.fill(0),o=0},u=(...h)=>t(a,s,...h),f=(h=n(0))=>{a=u(i(0),h),s=u(),h.length!==0&&(a=u(i(1),h),s=u())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const y=[];for(;h<e;){s=u();const p=s.slice();y.push(p),h+=s.length}return Rc(...y)};return(h,y)=>{c(),f(h);let p;for(;!(p=y(l()));)f();return c(),p}}function s5(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,s,a){const o=r[i];if(a&&o===void 0)return;const c=typeof o;if(c!==s||o===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(t).forEach(([i,s])=>n(i,s,!0))}function yx(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ms=BigInt(0),ui=BigInt(1),Bd=BigInt(2),yH=BigInt(3),mH=BigInt(4),bH=BigInt(5),yce=BigInt(7),gH=BigInt(8),mce=BigInt(9),vH=BigInt(16);function un(r,e){const t=r%e;return t>=Ms?t:e+t}function Hr(r,e,t){let n=r;for(;e-- >Ms;)n*=n,n%=t;return n}function CD(r,e){if(r===Ms)throw new Error("invert: expected non-zero number");if(e<=Ms)throw new Error("invert: expected positive modulus, got "+e);let t=un(r,e),n=e,i=Ms,s=ui;for(;t!==Ms;){const o=n/t,c=n%t,u=i-s*o;n=t,t=c,i=s,s=u}if(n!==ui)throw new Error("invert: does not exist");return un(i,e)}function lI(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function xH(r,e){const t=(r.ORDER+ui)/mH,n=r.pow(e,t);return lI(r,n,e),n}function bce(r,e){const t=(r.ORDER-bH)/gH,n=r.mul(e,Bd),i=r.pow(n,t),s=r.mul(e,i),a=r.mul(r.mul(s,Bd),i),o=r.mul(s,r.sub(a,r.ONE));return lI(r,o,e),o}function gce(r){const e=du(r),t=wH(r),n=t(e,e.neg(e.ONE)),i=t(e,n),s=t(e,e.neg(n)),a=(r+yce)/vH;return(o,c)=>{let u=o.pow(c,a),f=o.mul(u,n);const l=o.mul(u,i),d=o.mul(u,s),h=o.eql(o.sqr(f),c),y=o.eql(o.sqr(l),c);u=o.cmov(u,f,h),f=o.cmov(d,l,y);const p=o.eql(o.sqr(f),c),g=o.cmov(u,f,p);return lI(o,g,c),g}}function wH(r){if(r<yH)throw new Error("sqrt is not defined for small field");let e=r-ui,t=0;for(;e%Bd===Ms;)e/=Bd,t++;let n=Bd;const i=du(r);for(;ID(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return xH;let s=i.pow(n,e);const a=(e+ui)/Bd;return function(c,u){if(c.is0(u))return u;if(ID(c,u)!==1)throw new Error("Cannot find square root");let f=t,l=c.mul(c.ONE,s),d=c.pow(u,e),h=c.pow(u,a);for(;!c.eql(d,c.ONE);){if(c.is0(d))return c.ZERO;let y=1,p=c.sqr(d);for(;!c.eql(p,c.ONE);)if(y++,p=c.sqr(p),y===f)throw new Error("Cannot find square root");const g=ui<<BigInt(f-y-1),m=c.pow(l,g);f=y,l=c.sqr(m),d=c.mul(d,l),h=c.mul(h,m)}return h}}function vce(r){return r%mH===yH?xH:r%gH===bH?bce:r%vH===mce?gce(r):wH(r)}const xce=(r,e)=>(un(r,e)&ui)===ui,wce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ece(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=wce.reduce((n,i)=>(n[i]="function",n),e);return s5(r,t),r}function Ace(r,e,t){if(t<Ms)throw new Error("invalid exponent, negatives unsupported");if(t===Ms)return r.ONE;if(t===ui)return e;let n=r.ONE,i=e;for(;t>Ms;)t&ui&&(n=r.mul(n,i)),i=r.sqr(i),t>>=ui;return n}function EH(r,e,t=!1){const n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((a,o,c)=>r.is0(o)?a:(n[c]=a,r.mul(a,o)),r.ONE),s=r.inv(i);return e.reduceRight((a,o,c)=>r.is0(o)?a:(n[c]=r.mul(a,n[c]),r.mul(a,o)),s),n}function ID(r,e){const t=(r.ORDER-ui)/Bd,n=r.pow(e,t),i=r.eql(n,r.ONE),s=r.eql(n,r.ZERO),a=r.eql(n,r.neg(r.ONE));if(!i&&!s&&!a)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function AH(r,e){e!==void 0&&W_(e);const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function du(r,e,t=!1,n={}){if(r<=Ms)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,s,a=!1,o;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");const d=e;d.BITS&&(i=d.BITS),d.sqrt&&(s=d.sqrt),typeof d.isLE=="boolean"&&(t=d.isLE),typeof d.modFromBytes=="boolean"&&(a=d.modFromBytes),o=d.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:c,nByteLength:u}=AH(r,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let f;const l=Object.freeze({ORDER:r,isLE:t,BITS:c,BYTES:u,MASK:i5(c),ZERO:Ms,ONE:ui,allowedLengths:o,create:d=>un(d,r),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return Ms<=d&&d<r},is0:d=>d===Ms,isValidNot0:d=>!l.is0(d)&&l.isValid(d),isOdd:d=>(d&ui)===ui,neg:d=>un(-d,r),eql:(d,h)=>d===h,sqr:d=>un(d*d,r),add:(d,h)=>un(d+h,r),sub:(d,h)=>un(d-h,r),mul:(d,h)=>un(d*h,r),pow:(d,h)=>Ace(l,d,h),div:(d,h)=>un(d*CD(h,r),r),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>CD(d,r),sqrt:s||(d=>(f||(f=vce(r)),f(l,d))),toBytes:d=>t?hH(d,u):fI(d,u),fromBytes:(d,h=!0)=>{if(o){if(!o.includes(d.length)||d.length>u)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+d.length);const p=new Uint8Array(u);p.set(d,t?0:p.length-d.length),d=p}if(d.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+d.length);let y=t?Kg(d):d4(d);if(a&&(y=un(y,r)),!h&&!l.isValid(y))throw new Error("invalid field element: outside of range 0..ORDER");return y},invertBatch:d=>EH(l,d),cmov:(d,h,y)=>y?h:d});return Object.freeze(l)}function _H(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function SH(r){const e=_H(r);return e+Math.ceil(e/2)}function _ce(r,e,t=!1){const n=r.length,i=_H(e),s=SH(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const a=t?Kg(r):d4(r),o=un(a,e-ui)+ui;return t?hH(o,i):fI(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Em=BigInt(0),$d=BigInt(1);function mx(r,e){const t=e.negate();return r?t:e}function Ld(r,e){const t=EH(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function MH(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function D7(r,e){MH(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,s=i5(r),a=BigInt(r);return{windows:t,windowSize:n,mask:s,maxNumber:i,shiftBy:a}}function RD(r,e,t){const{windowSize:n,mask:i,maxNumber:s,shiftBy:a}=t;let o=Number(r&i),c=r>>a;o>n&&(o-=s,c+=$d);const u=e*n,f=u+Math.abs(o)-1,l=o===0,d=o<0,h=e%2!==0;return{nextN:c,offset:f,isZero:l,isNeg:d,isNegF:h,offsetF:u}}function Sce(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Mce(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const B7=new WeakMap,PH=new WeakMap;function $7(r){return PH.get(r)||1}function ND(r){if(r!==Em)throw new Error("invalid wNAF")}let TH=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>Em;)t&$d&&(n=n.add(i)),i=i.double(),t>>=$d;return n}precomputeWindow(e,t){const{windows:n,windowSize:i}=D7(t,this.bits),s=[];let a=e,o=a;for(let c=0;c<n;c++){o=a,s.push(o);for(let u=1;u<i;u++)o=o.add(a),s.push(o);a=o.double()}return s}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const a=D7(e,this.bits);for(let o=0;o<a.windows;o++){const{nextN:c,offset:u,isZero:f,isNeg:l,isNegF:d,offsetF:h}=RD(n,o,a);n=c,f?s=s.add(mx(d,t[h])):i=i.add(mx(l,t[u]))}return ND(n),{p:i,f:s}}wNAFUnsafe(e,t,n,i=this.ZERO){const s=D7(e,this.bits);for(let a=0;a<s.windows&&n!==Em;a++){const{nextN:o,offset:c,isZero:u,isNeg:f}=RD(n,a,s);if(n=o,!u){const l=t[c];i=i.add(f?l.negate():l)}}return ND(n),i}getPrecomputes(e,t,n){let i=B7.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),B7.set(t,i))),i}cached(e,t,n){const i=$7(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){const s=$7(e);return s===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,i)}createCache(e,t){MH(t,this.bits),PH.set(e,t),B7.delete(e)}hasCache(e){return $7(e)!==1}};function Pce(r,e,t,n){let i=e,s=r.ZERO,a=r.ZERO;for(;t>Em||n>Em;)t&$d&&(s=s.add(i)),n&$d&&(a=a.add(i)),i=i.double(),t>>=$d,n>>=$d;return{p1:s,p2:a}}function CH(r,e,t,n){Sce(t,r),Mce(n,e);const i=t.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const a=r.ZERO,o=pH(BigInt(i));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const u=i5(c),f=new Array(Number(u)+1).fill(a),l=Math.floor((e.BITS-1)/c)*c;let d=a;for(let h=l;h>=0;h-=c){f.fill(a);for(let p=0;p<s;p++){const g=n[p],m=Number(g>>BigInt(h)&u);f[m]=f[m].add(t[p])}let y=a;for(let p=f.length-1,g=a;p>0;p--)g=g.add(f[p]),y=y.add(g);if(d=d.add(y),h!==0)for(let p=0;p<c;p++)d=d.double()}return d}function OD(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Ece(e),e}else return du(r,{isLE:t})}function IH(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Em))throw new Error(`CURVE.${c} must be positive bigint`)}const i=OD(e.p,t.Fp,n),s=OD(e.n,t.Fn,n),o=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const c of o)if(!i.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kD=(r,e)=>(r+(r>=0?e:-e)/RH)/e;function Tce(r,e,t){const[[n,i],[s,a]]=e,o=kD(a*r,t),c=kD(-i*r,t);let u=r-o*n-c*s,f=-o*i-c*a;const l=u<rf,d=f<rf;l&&(u=-u),d&&(f=-f);const h=i5(Math.ceil(pH(t)/2))+W1;if(u<rf||u>=h||f<rf||f>=h)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:l,k1:u,k2neg:d,k2:f}}function Q_(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function L7(r,e){const t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return Yh(t.lowS,"lowS"),Yh(t.prehash,"prehash"),t.format!==void 0&&Q_(t.format),t}class Cce extends Error{constructor(e=""){super(e)}}const $u={Err:Cce,_tlv:{encode:(r,e)=>{const{Err:t}=$u;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=O8(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?O8(i.length/2|128):"";return O8(r)+s+i+e},decode(r,e){const{Err:t}=$u;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let a=0;if(!s)a=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const f of u)a=a<<8|f;if(n+=c,a<128)throw new t("tlv.decode(long): not minimal encoding")}const o=e.subarray(n,n+a);if(o.length!==a)throw new t("tlv.decode: wrong value length");return{v:o,l:e.subarray(n+a)}}},_int:{encode(r){const{Err:e}=$u;if(r<rf)throw new e("integer: negative integers are not allowed");let t=O8(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=$u;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return d4(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=$u,i=Kr("signature",r),{v:s,l:a}=n.decode(48,i);if(a.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=n.decode(2,s),{v:u,l:f}=n.decode(2,c);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(o),s:t.decode(u)}},hexFromSig(r){const{_tlv:e,_int:t}=$u,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},rf=BigInt(0),W1=BigInt(1),RH=BigInt(2),k8=BigInt(3),Ice=BigInt(4);function E1(r,e){const{BYTES:t}=r;let n;if(typeof e=="bigint")n=e;else{let i=Kr("private key",e);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function Rce(r,e={}){const t=IH("weierstrass",r,e),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:a,n:o}=s;s5(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=OH(n,i);function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(E,S,A){const{x:w,y:P}=S.toAffine(),k=n.toBytes(w);if(Yh(A,"isCompressed"),A){f();const D=!n.isOdd(P);return Rc(NH(D),k)}else return Rc(Uint8Array.of(4),k,n.toBytes(P))}function d(E){jo(E,void 0,"Point");const{publicKey:S,publicKeyUncompressed:A}=u,w=E.length,P=E[0],k=E.subarray(1);if(w===S&&(P===2||P===3)){const D=n.fromBytes(k);if(!n.isValid(D))throw new Error("bad point: is not on curve, wrong x");const T=p(D);let M;try{M=n.sqrt(T)}catch(Y){const re=Y instanceof Error?": "+Y.message:"";throw new Error("bad point: is not on curve, sqrt error"+re)}f();const L=n.isOdd(M);return(P&1)===1!==L&&(M=n.neg(M)),{x:D,y:M}}else if(w===A&&P===4){const D=n.BYTES,T=n.fromBytes(k.subarray(0,D)),M=n.fromBytes(k.subarray(D,D*2));if(!g(T,M))throw new Error("bad point: is not on curve");return{x:T,y:M}}else throw new Error(`bad point: got length ${w}, expected compressed=${S} or uncompressed=${A}`)}const h=e.toBytes||l,y=e.fromBytes||d;function p(E){const S=n.sqr(E),A=n.mul(S,E);return n.add(n.add(A,n.mul(E,s.a)),s.b)}function g(E,S){const A=n.sqr(S),w=p(E);return n.eql(A,w)}if(!g(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const m=n.mul(n.pow(s.a,k8),Ice),v=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(m,v)))throw new Error("bad curve params: a or b");function b(E,S,A=!1){if(!n.isValid(S)||A&&n.is0(S))throw new Error(`bad point coordinate ${E}`);return S}function _(E){if(!(E instanceof $))throw new Error("ProjectivePoint expected")}function C(E){if(!c||!c.basises)throw new Error("no endo");return Tce(E,c.basises,i.ORDER)}const N=yx((E,S)=>{const{X:A,Y:w,Z:P}=E;if(n.eql(P,n.ONE))return{x:A,y:w};const k=E.is0();S==null&&(S=k?n.ONE:n.inv(P));const D=n.mul(A,S),T=n.mul(w,S),M=n.mul(P,S);if(k)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:D,y:T}}),x=yx(E=>{if(E.is0()){if(e.allowInfinityPoint&&!n.is0(E.Y))return;throw new Error("bad point: ZERO")}const{x:S,y:A}=E.toAffine();if(!n.isValid(S)||!n.isValid(A))throw new Error("bad point: x or y not field elements");if(!g(S,A))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function I(E,S,A,w,P){return A=new $(n.mul(A.X,E),A.Y,A.Z),S=mx(w,S),A=mx(P,A),S.add(A)}class ${constructor(S,A,w){this.X=b("x",S),this.Y=b("y",A,!0),this.Z=b("z",w),Object.freeze(this)}static CURVE(){return s}static fromAffine(S){const{x:A,y:w}=S||{};if(!S||!n.isValid(A)||!n.isValid(w))throw new Error("invalid affine point");if(S instanceof $)throw new Error("projective point not allowed");return n.is0(A)&&n.is0(w)?$.ZERO:new $(A,w,n.ONE)}static fromBytes(S){const A=$.fromAffine(y(jo(S,void 0,"point")));return A.assertValidity(),A}static fromHex(S){return $.fromBytes(Kr("pointHex",S))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(S=8,A=!0){return O.createCache(this,S),A||this.multiply(k8),this}assertValidity(){x(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){_(S);const{X:A,Y:w,Z:P}=this,{X:k,Y:D,Z:T}=S,M=n.eql(n.mul(A,T),n.mul(k,P)),L=n.eql(n.mul(w,T),n.mul(D,P));return M&&L}negate(){return new $(this.X,n.neg(this.Y),this.Z)}double(){const{a:S,b:A}=s,w=n.mul(A,k8),{X:P,Y:k,Z:D}=this;let T=n.ZERO,M=n.ZERO,L=n.ZERO,K=n.mul(P,P),Y=n.mul(k,k),re=n.mul(D,D),ne=n.mul(P,k);return ne=n.add(ne,ne),L=n.mul(P,D),L=n.add(L,L),T=n.mul(S,L),M=n.mul(w,re),M=n.add(T,M),T=n.sub(Y,M),M=n.add(Y,M),M=n.mul(T,M),T=n.mul(ne,T),L=n.mul(w,L),re=n.mul(S,re),ne=n.sub(K,re),ne=n.mul(S,ne),ne=n.add(ne,L),L=n.add(K,K),K=n.add(L,K),K=n.add(K,re),K=n.mul(K,ne),M=n.add(M,K),re=n.mul(k,D),re=n.add(re,re),K=n.mul(re,ne),T=n.sub(T,K),L=n.mul(re,Y),L=n.add(L,L),L=n.add(L,L),new $(T,M,L)}add(S){_(S);const{X:A,Y:w,Z:P}=this,{X:k,Y:D,Z:T}=S;let M=n.ZERO,L=n.ZERO,K=n.ZERO;const Y=s.a,re=n.mul(s.b,k8);let ne=n.mul(A,k),ae=n.mul(w,D),ie=n.mul(P,T),fe=n.add(A,w),oe=n.add(k,D);fe=n.mul(fe,oe),oe=n.add(ne,ae),fe=n.sub(fe,oe),oe=n.add(A,P);let ce=n.add(k,T);return oe=n.mul(oe,ce),ce=n.add(ne,ie),oe=n.sub(oe,ce),ce=n.add(w,P),M=n.add(D,T),ce=n.mul(ce,M),M=n.add(ae,ie),ce=n.sub(ce,M),K=n.mul(Y,oe),M=n.mul(re,ie),K=n.add(M,K),M=n.sub(ae,K),K=n.add(ae,K),L=n.mul(M,K),ae=n.add(ne,ne),ae=n.add(ae,ne),ie=n.mul(Y,ie),oe=n.mul(re,oe),ae=n.add(ae,ie),ie=n.sub(ne,ie),ie=n.mul(Y,ie),oe=n.add(oe,ie),ne=n.mul(ae,oe),L=n.add(L,ne),ne=n.mul(ce,oe),M=n.mul(fe,M),M=n.sub(M,ne),ne=n.mul(fe,ae),K=n.mul(ce,K),K=n.add(K,ne),new $(M,L,K)}subtract(S){return this.add(S.negate())}is0(){return this.equals($.ZERO)}multiply(S){const{endo:A}=e;if(!i.isValidNot0(S))throw new Error("invalid scalar: out of range");let w,P;const k=D=>O.cached(this,D,T=>Ld($,T));if(A){const{k1neg:D,k1:T,k2neg:M,k2:L}=C(S),{p:K,f:Y}=k(T),{p:re,f:ne}=k(L);P=Y.add(ne),w=I(A.beta,K,re,D,M)}else{const{p:D,f:T}=k(S);w=D,P=T}return Ld($,[w,P])[0]}multiplyUnsafe(S){const{endo:A}=e,w=this;if(!i.isValid(S))throw new Error("invalid scalar: out of range");if(S===rf||w.is0())return $.ZERO;if(S===W1)return w;if(O.hasCache(this))return this.multiply(S);if(A){const{k1neg:P,k1:k,k2neg:D,k2:T}=C(S),{p1:M,p2:L}=Pce($,w,k,T);return I(A.beta,M,L,P,D)}else return O.unsafe(w,S)}multiplyAndAddUnsafe(S,A,w){const P=this.multiplyUnsafe(A).add(S.multiplyUnsafe(w));return P.is0()?void 0:P}toAffine(S){return N(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return a===W1?!0:S?S($,this):O.unsafe(this,o).is0()}clearCofactor(){const{clearCofactor:S}=e;return a===W1?this:S?S($,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(S=!0){return Yh(S,"isCompressed"),this.assertValidity(),h($,this,S)}toHex(S=!0){return Eh(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(S=!0){return this.toBytes(S)}_setWindowSize(S){this.precompute(S)}static normalizeZ(S){return Ld($,S)}static msm(S,A){return CH($,i,S,A)}static fromPrivateKey(S){return $.BASE.multiply(E1(i,S))}}$.BASE=new $(s.Gx,s.Gy,n.ONE),$.ZERO=new $(n.ZERO,n.ONE,n.ZERO),$.Fp=n,$.Fn=i;const j=i.BITS,O=new TH($,e.endo?Math.ceil(j/2):j);return $.BASE.precompute(8),$}function NH(r){return Uint8Array.of(r?2:3)}function OH(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Nce(r,e={}){const{Fn:t}=r,n=e.randomBytes||oI,i=Object.assign(OH(r.Fp,t),{seed:SH(t.ORDER)});function s(h){try{return!!E1(t,h)}catch{return!1}}function a(h,y){const{publicKey:p,publicKeyUncompressed:g}=i;try{const m=h.length;return y===!0&&m!==p||y===!1&&m!==g?!1:!!r.fromBytes(h)}catch{return!1}}function o(h=n(i.seed)){return _ce(jo(h,i.seed,"seed"),t.ORDER)}function c(h,y=!0){return r.BASE.multiply(E1(t,h)).toBytes(y)}function u(h){const y=o(h);return{secretKey:y,publicKey:c(y)}}function f(h){if(typeof h=="bigint")return!1;if(h instanceof r)return!0;const{secretKey:y,publicKey:p,publicKeyUncompressed:g}=i;if(t.allowedLengths||y===p)return;const m=Kr("key",h).length;return m===p||m===g}function l(h,y,p=!0){if(f(h)===!0)throw new Error("first arg must be private key");if(f(y)===!1)throw new Error("second arg must be public key");const g=E1(t,h);return r.fromHex(y).multiply(g).toBytes(p)}return Object.freeze({getPublicKey:c,getSharedSecret:l,keygen:u,Point:r,utils:{isValidSecretKey:s,isValidPublicKey:a,randomSecretKey:o,isValidPrivateKey:s,randomPrivateKey:o,normPrivateKeyToScalar:h=>E1(t,h),precompute(h=8,y=r.BASE){return y.precompute(h,!1)}},lengths:i})}function Oce(r,e,t={}){nH(e),s5(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||oI,i=t.hmac||((A,...w)=>lH(e,A,Rc(...w))),{Fp:s,Fn:a}=r,{ORDER:o,BITS:c}=a,{keygen:u,getPublicKey:f,getSharedSecret:l,utils:d,lengths:h}=Nce(r,t),y={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},p="compact";function g(A){const w=o>>W1;return A>w}function m(A,w){if(!a.isValidNot0(w))throw new Error(`invalid signature ${A}: out of range 1..Point.Fn.ORDER`);return w}function v(A,w){Q_(w);const P=h.signature,k=w==="compact"?P:w==="recovered"?P+1:void 0;return jo(A,k,`${w} signature`)}class b{constructor(w,P,k){this.r=m("r",w),this.s=m("s",P),k!=null&&(this.recovery=k),Object.freeze(this)}static fromBytes(w,P=p){v(w,P);let k;if(P==="der"){const{r:L,s:K}=$u.toSig(jo(w));return new b(L,K)}P==="recovered"&&(k=w[0],P="compact",w=w.subarray(1));const D=a.BYTES,T=w.subarray(0,D),M=w.subarray(D,D*2);return new b(a.fromBytes(T),a.fromBytes(M),k)}static fromHex(w,P){return this.fromBytes(px(w),P)}addRecoveryBit(w){return new b(this.r,this.s,w)}recoverPublicKey(w){const P=s.ORDER,{r:k,s:D,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(o*RH<P&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const L=T===2||T===3?k+o:k;if(!s.isValid(L))throw new Error("recovery id 2 or 3 invalid");const K=s.toBytes(L),Y=r.fromBytes(Rc(NH((T&1)===0),K)),re=a.inv(L),ne=C(Kr("msgHash",w)),ae=a.create(-ne*re),ie=a.create(D*re),fe=r.BASE.multiplyUnsafe(ae).add(Y.multiplyUnsafe(ie));if(fe.is0())throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return g(this.s)}toBytes(w=p){if(Q_(w),w==="der")return px($u.hexFromSig(this));const P=a.toBytes(this.r),k=a.toBytes(this.s);if(w==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Rc(Uint8Array.of(this.recovery),P,k)}return Rc(P,k)}toHex(w){return Eh(this.toBytes(w))}assertValidity(){}static fromCompact(w){return b.fromBytes(Kr("sig",w),"compact")}static fromDER(w){return b.fromBytes(Kr("sig",w),"der")}normalizeS(){return this.hasHighS()?new b(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Eh(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Eh(this.toBytes("compact"))}}const _=t.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const P=d4(w),k=w.length*8-c;return k>0?P>>BigInt(k):P},C=t.bits2int_modN||function(w){return a.create(_(w))},N=i5(c);function x(A){return G_("num < 2^"+c,A,rf,N),a.toBytes(A)}function I(A,w){return jo(A,void 0,"message"),w?jo(e(A),void 0,"prehashed message"):A}function $(A,w,P){if(["recovered","canonical"].some(ae=>ae in P))throw new Error("sign() legacy options not supported");const{lowS:k,prehash:D,extraEntropy:T}=L7(P,y);A=I(A,D);const M=C(A),L=E1(a,w),K=[x(L),x(M)];if(T!=null&&T!==!1){const ae=T===!0?n(h.secretKey):T;K.push(Kr("extraEntropy",ae))}const Y=Rc(...K),re=M;function ne(ae){const ie=_(ae);if(!a.isValidNot0(ie))return;const fe=a.inv(ie),oe=r.BASE.multiply(ie).toAffine(),ce=a.create(oe.x);if(ce===rf)return;const xe=a.create(fe*a.create(re+ce*L));if(xe===rf)return;let ge=(oe.x===ce?0:2)|Number(oe.y&W1),me=xe;return k&&g(xe)&&(me=a.neg(xe),ge^=1),new b(ce,me,ge)}return{seed:Y,k2sig:ne}}function j(A,w,P={}){A=Kr("message",A);const{seed:k,k2sig:D}=$(A,w,P);return pce(e.outputLen,a.BYTES,i)(k,D)}function O(A){let w;const P=typeof A=="string"||n5(A),k=!P&&A!==null&&typeof A=="object"&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!P&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(k)w=new b(A.r,A.s);else if(P){try{w=b.fromBytes(Kr("sig",A),"der")}catch(D){if(!(D instanceof $u.Err))throw D}if(!w)try{w=b.fromBytes(Kr("sig",A),"compact")}catch{return!1}}return w||!1}function E(A,w,P,k={}){const{lowS:D,prehash:T,format:M}=L7(k,y);if(P=Kr("publicKey",P),w=I(Kr("message",w),T),"strict"in k)throw new Error("options.strict was renamed to lowS");const L=M===void 0?O(A):b.fromBytes(Kr("sig",A),M);if(L===!1)return!1;try{const K=r.fromBytes(P);if(D&&L.hasHighS())return!1;const{r:Y,s:re}=L,ne=C(w),ae=a.inv(re),ie=a.create(ne*ae),fe=a.create(Y*ae),oe=r.BASE.multiplyUnsafe(ie).add(K.multiplyUnsafe(fe));return oe.is0()?!1:a.create(oe.x)===Y}catch{return!1}}function S(A,w,P={}){const{prehash:k}=L7(P,y);return w=I(w,k),b.fromBytes(A,"recovered").recoverPublicKey(w).toBytes()}return Object.freeze({keygen:u,getPublicKey:f,getSharedSecret:l,utils:d,lengths:h,Point:r,sign:j,verify:E,recoverPublicKey:S,Signature:b,hash:e})}function kce(r){const e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const i=du(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),s={Fp:t,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:s}}function Dce(r){const{CURVE:e,curveOpts:t}=kce(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function Bce(r,e){const t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,AH(t.Fn.ORDER,t.Fn.BITS))})}function $ce(r){const{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:i}=Dce(r),s=Rce(e,t),a=Oce(s,n,i);return Bce(r,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function h4(r,e){const t=n=>$ce({...r,hash:n});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Lce={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},DD=BigInt(2);function Uce(r){const e=dI.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),u=r*r*r%e,f=u*u*r%e,l=Hr(f,t,e)*f%e,d=Hr(l,t,e)*f%e,h=Hr(d,DD,e)*u%e,y=Hr(h,i,e)*h%e,p=Hr(y,s,e)*y%e,g=Hr(p,o,e)*p%e,m=Hr(g,c,e)*g%e,v=Hr(m,o,e)*p%e,b=Hr(v,t,e)*f%e,_=Hr(b,a,e)*y%e,C=Hr(_,n,e)*u%e,N=Hr(C,DD,e);if(!Z_.eql(Z_.sqr(N),r))throw new Error("Cannot find square root");return N}const Z_=du(dI.p,{sqrt:Uce}),kH=h4({...dI,Fp:Z_,lowS:!0,endo:Lce},cI);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DH={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},BH={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},$H={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Fce=du(DH.p),jce=du(BH.p),qce=du($H.p),Vce=h4({...DH,Fp:Fce,lowS:!1},cI);h4({...BH,Fp:jce,lowS:!1},dce);h4({...$H,Fp:qce,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},uH);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const LH=Vce;function hI(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function UH(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hI(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function zce(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));const t=UH(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return hI(t)}function Hce(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var o=r.length,c=r.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,g=0,m=0,v=y.length;m!==v&&y[m]===0;)m++,p++;for(var b=(v-m)*f+1>>>0,_=new Uint8Array(b);m!==v;){for(var C=y[m],N=0,x=b-1;(C!==0||N<g)&&x!==-1;x--,N++)C+=256*_[x]>>>0,_[x]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=N,m++}for(var I=b-g;I!==b&&_[I]===0;)I++;for(var $=c.repeat(p);I<b;++I)$+=r.charAt(_[I]);return $}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var g=0,m=0;y[p]===c;)g++,p++;for(var v=(y.length-p)*u+1>>>0,b=new Uint8Array(v);y[p];){var _=t[y.charCodeAt(p)];if(_===255)return;for(var C=0,N=v-1;(_!==0||C<m)&&N!==-1;N--,C++)_+=o*b[N]>>>0,b[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");m=C,p++}if(y[p]!==" "){for(var x=v-m;x!==v&&b[x]===0;)x++;for(var I=new Uint8Array(g+(v-x)),$=g;x!==v;)I[$++]=b[x++];return I}}}function h(y){var p=d(y);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:h}}var Wce=Hce,Kce=Wce;const Gce=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Qce=r=>new TextEncoder().encode(r),Zce=r=>new TextDecoder().decode(r);let Jce=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Yce=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return FH(this,e)}},Xce=class{constructor(e){this.decoders=e}or(e){return FH(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const FH=(r,e)=>new Xce({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let eue=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Jce(e,t,n),this.decoder=new Yce(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const p4=({name:r,prefix:e,encode:t,decode:n})=>new eue(r,e,t,n),a5=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=Kce(t,e);return p4({prefix:r,name:e,encode:n,decode:s=>Gce(i(s))})},tue=(r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=r.length;for(;r[s-1]==="=";)--s;const a=new Uint8Array(s*t/8|0);let o=0,c=0,u=0;for(let f=0;f<s;++f){const l=i[r[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|l,o+=t,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=t||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},rue=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s},yi=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>p4({prefix:e,name:r,encode(i){return rue(i,n,t)},decode(i){return tue(i,n,t,r)}}),nue=p4({prefix:"\0",name:"identity",encode:r=>Zce(r),decode:r=>Qce(r)}),iue=Object.freeze(Object.defineProperty({__proto__:null,identity:nue},Symbol.toStringTag,{value:"Module"})),sue=yi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),aue=Object.freeze(Object.defineProperty({__proto__:null,base2:sue},Symbol.toStringTag,{value:"Module"})),oue=yi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),cue=Object.freeze(Object.defineProperty({__proto__:null,base8:oue},Symbol.toStringTag,{value:"Module"})),uue=a5({prefix:"9",name:"base10",alphabet:"0123456789"}),fue=Object.freeze(Object.defineProperty({__proto__:null,base10:uue},Symbol.toStringTag,{value:"Module"})),lue=yi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),due=yi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),hue=Object.freeze(Object.defineProperty({__proto__:null,base16:lue,base16upper:due},Symbol.toStringTag,{value:"Module"})),pue=yi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yue=yi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mue=yi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bue=yi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gue=yi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vue=yi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xue=yi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wue=yi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Eue=yi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Aue=Object.freeze(Object.defineProperty({__proto__:null,base32:pue,base32hex:gue,base32hexpad:xue,base32hexpadupper:wue,base32hexupper:vue,base32pad:mue,base32padupper:bue,base32upper:yue,base32z:Eue},Symbol.toStringTag,{value:"Module"})),_ue=a5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Sue=a5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Mue=Object.freeze(Object.defineProperty({__proto__:null,base36:_ue,base36upper:Sue},Symbol.toStringTag,{value:"Module"})),Pue=a5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tue=a5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Cue=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Pue,base58flickr:Tue},Symbol.toStringTag,{value:"Module"})),Iue=yi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rue=yi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nue=yi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Oue=yi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),kue=Object.freeze(Object.defineProperty({__proto__:null,base64:Iue,base64pad:Rue,base64url:Nue,base64urlpad:Oue},Symbol.toStringTag,{value:"Module"})),jH=Array.from(""),Due=jH.reduce((r,e,t)=>(r[t]=e,r),[]),Bue=jH.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function $ue(r){return r.reduce((e,t)=>(e+=Due[t],e),"")}function Lue(r){const e=[];for(const t of r){const n=Bue[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const Uue=p4({prefix:"",name:"base256emoji",encode:$ue,decode:Lue}),Fue=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Uue},Symbol.toStringTag,{value:"Module"}));var jue=qH,BD=128,que=-128,Vue=Math.pow(2,31);function qH(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Vue;)e[t++]=r&255|BD,r/=128;for(;r&que;)e[t++]=r&255|BD,r>>>=7;return e[t]=r|0,qH.bytes=t-n+1,e}var zue=J_,Hue=128,$D=127;function J_(r,n){var t=0,n=n||0,i=0,s=n,a,o=r.length;do{if(s>=o)throw J_.bytes=0,new RangeError("Could not decode varint");a=r[s++],t+=i<28?(a&$D)<<i:(a&$D)*Math.pow(2,i),i+=7}while(a>=Hue);return J_.bytes=s-n,t}var Wue=Math.pow(2,7),Kue=Math.pow(2,14),Gue=Math.pow(2,21),Que=Math.pow(2,28),Zue=Math.pow(2,35),Jue=Math.pow(2,42),Yue=Math.pow(2,49),Xue=Math.pow(2,56),efe=Math.pow(2,63),tfe=function(r){return r<Wue?1:r<Kue?2:r<Gue?3:r<Que?4:r<Zue?5:r<Jue?6:r<Yue?7:r<Xue?8:r<efe?9:10},rfe={encode:jue,decode:zue,encodingLength:tfe},bx=rfe;const nfe=(r,e=0)=>[bx.decode(r,e),bx.decode.bytes],ife=(r,e,t=0)=>(bx.encode(r,e,t),e),sfe=r=>bx.encodingLength(r);new TextEncoder;new TextDecoder;const LD={...iue,...aue,...cue,...fue,...hue,...Aue,...Mue,...Cue,...kue,...Fue};function VH(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const UD=VH("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),U7=VH("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=UH(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),zH={utf8:UD,"utf-8":UD,hex:LD.base16,latin1:U7,ascii:U7,binary:U7,...LD};function afe(r,e="utf8"){const t=zH[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hI(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function ofe(r,e="utf8"){const t=zH[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const el=BigInt(0),Tn=BigInt(1),F7=BigInt(2),cfe=BigInt(8);function ufe(r,e,t,n){const i=r.sqr(t),s=r.sqr(n),a=r.add(r.mul(e.a,i),s),o=r.add(r.ONE,r.mul(e.d,r.mul(i,s)));return r.eql(a,o)}function ffe(r,e={}){const t=IH("edwards",r,e,e.FpFnLE),{Fp:n,Fn:i}=t;let s=t.CURVE;const{h:a}=s;s5(e,{},{uvRatio:"function"});const o=F7<<BigInt(i.BYTES*8)-Tn,c=g=>n.create(g),u=e.uvRatio||((g,m)=>{try{return{isValid:!0,value:n.sqrt(n.div(g,m))}}catch{return{isValid:!1,value:el}}});if(!ufe(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function f(g,m,v=!1){const b=v?Tn:el;return G_("coordinate "+g,m,b,o),m}function l(g){if(!(g instanceof y))throw new Error("ExtendedPoint expected")}const d=yx((g,m)=>{const{X:v,Y:b,Z:_}=g,C=g.is0();m==null&&(m=C?cfe:n.inv(_));const N=c(v*m),x=c(b*m),I=n.mul(_,m);if(C)return{x:el,y:Tn};if(I!==Tn)throw new Error("invZ was invalid");return{x:N,y:x}}),h=yx(g=>{const{a:m,d:v}=s;if(g.is0())throw new Error("bad point: ZERO");const{X:b,Y:_,Z:C,T:N}=g,x=c(b*b),I=c(_*_),$=c(C*C),j=c($*$),O=c(x*m),E=c($*c(O+I)),S=c(j+c(v*c(x*I)));if(E!==S)throw new Error("bad point: equation left != right (1)");const A=c(b*_),w=c(C*N);if(A!==w)throw new Error("bad point: equation left != right (2)");return!0});class y{constructor(m,v,b,_){this.X=f("x",m),this.Y=f("y",v),this.Z=f("z",b,!0),this.T=f("t",_),Object.freeze(this)}static CURVE(){return s}static fromAffine(m){if(m instanceof y)throw new Error("extended point not allowed");const{x:v,y:b}=m||{};return f("x",v),f("y",b),new y(v,b,Tn,c(v*b))}static fromBytes(m,v=!1){const b=n.BYTES,{a:_,d:C}=s;m=TD(jo(m,b,"point")),Yh(v,"zip215");const N=TD(m),x=m[b-1];N[b-1]=x&-129;const I=Kg(N),$=v?o:n.ORDER;G_("point.y",I,el,$);const j=c(I*I),O=c(j-Tn),E=c(C*j-_);let{isValid:S,value:A}=u(O,E);if(!S)throw new Error("bad point: invalid y coordinate");const w=(A&Tn)===Tn,P=(x&128)!==0;if(!v&&A===el&&P)throw new Error("bad point: x=0 and x_0=1");return P!==w&&(A=c(-A)),y.fromAffine({x:A,y:I})}static fromHex(m,v=!1){return y.fromBytes(Kr("point",m),v)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,v=!0){return p.createCache(this,m),v||this.multiply(F7),this}assertValidity(){h(this)}equals(m){l(m);const{X:v,Y:b,Z:_}=this,{X:C,Y:N,Z:x}=m,I=c(v*x),$=c(C*_),j=c(b*x),O=c(N*_);return I===$&&j===O}is0(){return this.equals(y.ZERO)}negate(){return new y(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:m}=s,{X:v,Y:b,Z:_}=this,C=c(v*v),N=c(b*b),x=c(F7*c(_*_)),I=c(m*C),$=v+b,j=c(c($*$)-C-N),O=I+N,E=O-x,S=I-N,A=c(j*E),w=c(O*S),P=c(j*S),k=c(E*O);return new y(A,w,k,P)}add(m){l(m);const{a:v,d:b}=s,{X:_,Y:C,Z:N,T:x}=this,{X:I,Y:$,Z:j,T:O}=m,E=c(_*I),S=c(C*$),A=c(x*b*O),w=c(N*j),P=c((_+C)*(I+$)-E-S),k=w-A,D=w+A,T=c(S-v*E),M=c(P*k),L=c(D*T),K=c(P*T),Y=c(k*D);return new y(M,L,Y,K)}subtract(m){return this.add(m.negate())}multiply(m){if(!i.isValidNot0(m))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:v,f:b}=p.cached(this,m,_=>Ld(y,_));return Ld(y,[v,b])[0]}multiplyUnsafe(m,v=y.ZERO){if(!i.isValid(m))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return m===el?y.ZERO:this.is0()||m===Tn?this:p.unsafe(this,m,b=>Ld(y,b),v)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return p.unsafe(this,s.n).is0()}toAffine(m){return d(this,m)}clearCofactor(){return a===Tn?this:this.multiplyUnsafe(a)}toBytes(){const{x:m,y:v}=this.toAffine(),b=n.toBytes(v);return b[b.length-1]|=m&Tn?128:0,b}toHex(){return Eh(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(m){return Ld(y,m)}static msm(m,v){return CH(y,i,m,v)}_setWindowSize(m){this.precompute(m)}toRawBytes(){return this.toBytes()}}y.BASE=new y(s.Gx,s.Gy,Tn,c(s.Gx*s.Gy)),y.ZERO=new y(el,Tn,Tn,el),y.Fp=n,y.Fn=i;const p=new TH(y,i.BITS);return y.BASE.precompute(8),y}function lfe(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');s5(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=t,{BASE:i,Fp:s,Fn:a}=r,o=t.randomBytes||oI,c=t.adjustScalarBytes||($=>$),u=t.domain||(($,j,O)=>{if(Yh(O,"phflag"),j.length||O)throw new Error("Contexts/pre-hash are not supported");return $});function f($){return a.create(Kg($))}function l($){const j=b.secretKey;$=Kr("private key",$,j);const O=Kr("hashed private key",e($),2*j),E=c(O.slice(0,j)),S=O.slice(j,2*j),A=f(E);return{head:E,prefix:S,scalar:A}}function d($){const{head:j,prefix:O,scalar:E}=l($),S=i.multiply(E),A=S.toBytes();return{head:j,prefix:O,scalar:E,point:S,pointBytes:A}}function h($){return d($).pointBytes}function y($=Uint8Array.of(),...j){const O=Rc(...j);return f(e(u(O,Kr("context",$),!!n)))}function p($,j,O={}){$=Kr("message",$),n&&($=n($));const{prefix:E,scalar:S,pointBytes:A}=d(j),w=y(O.context,E,$),P=i.multiply(w).toBytes(),k=y(O.context,P,A,$),D=a.create(w+k*S);if(!a.isValid(D))throw new Error("sign failed: invalid s");const T=Rc(P,a.toBytes(D));return jo(T,b.signature,"result")}const g={zip215:!0};function m($,j,O,E=g){const{context:S,zip215:A}=E,w=b.signature;$=Kr("signature",$,w),j=Kr("message",j),O=Kr("publicKey",O,b.publicKey),A!==void 0&&Yh(A,"zip215"),n&&(j=n(j));const P=w/2,k=$.subarray(0,P),D=Kg($.subarray(P,w));let T,M,L;try{T=r.fromBytes(O,A),M=r.fromBytes(k,A),L=i.multiplyUnsafe(D)}catch{return!1}if(!A&&T.isSmallOrder())return!1;const K=y(S,M.toBytes(),T.toBytes(),j);return M.add(T.multiplyUnsafe(K)).subtract(L).clearCofactor().is0()}const v=s.BYTES,b={secretKey:v,publicKey:v,signature:2*v,seed:v};function _($=o(b.seed)){return jo($,b.seed,"seed")}function C($){const j=I.randomSecretKey($);return{secretKey:j,publicKey:h(j)}}function N($){return n5($)&&$.length===a.BYTES}function x($,j){try{return!!r.fromBytes($,j)}catch{return!1}}const I={getExtendedPublicKey:d,randomSecretKey:_,isValidSecretKey:N,isValidPublicKey:x,toMontgomery($){const{y:j}=r.fromBytes($),O=b.publicKey,E=O===32;if(!E&&O!==57)throw new Error("only defined for 25519 and 448");const S=E?s.div(Tn+j,Tn-j):s.div(j-Tn,j+Tn);return s.toBytes(S)},toMontgomerySecret($){const j=b.secretKey;jo($,j);const O=e($.subarray(0,j));return c(O).subarray(0,j)},randomPrivateKey:_,precompute($=8,j=r.BASE){return j.precompute($,!1)}};return Object.freeze({keygen:C,getPublicKey:h,sign:p,verify:m,utils:I,Point:r,lengths:b})}function dfe(r){const e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=du(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},s={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,hash:r.hash,eddsaOpts:s}}function hfe(r,e){const t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function pfe(r){const{CURVE:e,curveOpts:t,hash:n,eddsaOpts:i}=dfe(r),s=ffe(e,t),a=lfe(s,n,i);return hfe(r,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yfe=BigInt(1),FD=BigInt(2);BigInt(3);const mfe=BigInt(5),bfe=BigInt(8),pI=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),HH={p:pI,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:bfe,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function gfe(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=pI,o=r*r%s*r%s,c=Hr(o,FD,s)*o%s,u=Hr(c,yfe,s)*r%s,f=Hr(u,mfe,s)*u%s,l=Hr(f,e,s)*f%s,d=Hr(l,t,s)*l%s,h=Hr(d,n,s)*d%s,y=Hr(h,i,s)*h%s,p=Hr(y,i,s)*h%s,g=Hr(p,e,s)*f%s;return{pow_p_5_8:Hr(g,FD,s)*r%s,b2:o}}function vfe(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const jD=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function xfe(r,e){const t=pI,n=un(e*e*e,t),i=un(n*n*e,t),s=gfe(r*i).pow_p_5_8;let a=un(r*n*s,t);const o=un(e*a*a,t),c=a,u=un(a*jD,t),f=o===r,l=o===un(-r,t),d=o===un(-r*jD,t);return f&&(a=c),(l||d)&&(a=u),xce(a,t)&&(a=un(-a,t)),{isValid:f||l,value:a}}const wfe=du(HH.p,{isLE:!0}),Efe={...HH,Fp:wfe,hash:uH,adjustScalarBytes:vfe,uvRatio:xfe},qD=pfe(Efe);var Y_={exports:{}};function Afe(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var a=r.length,o=r.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,p=0,g=0,m=h.length;g!==m&&h[g]===0;)g++,y++;for(var v=(m-g)*u+1>>>0,b=new Uint8Array(v);g!==m;){for(var _=h[g],C=0,N=v-1;(_!==0||C<p)&&N!==-1;N--,C++)_+=256*b[N]>>>0,b[N]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");p=C,g++}for(var x=v-p;x!==v&&b[x]===0;)x++;for(var I=o.repeat(y);x<v;++x)I+=r.charAt(b[x]);return I}function l(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var y=0;if(h[y]!==" "){for(var p=0,g=0;h[y]===o;)p++,y++;for(var m=(h.length-y)*c+1>>>0,v=new Uint8Array(m);h[y];){var b=e[h.charCodeAt(y)];if(b===255)return;for(var _=0,C=m-1;(b!==0||_<g)&&C!==-1;C--,_++)b+=a*v[C]>>>0,v[C]=b%256>>>0,b=b/256>>>0;if(b!==0)throw new Error("Non-zero carry");g=_,y++}if(h[y]!==" "){for(var N=m-g;N!==m&&v[N]===0;)N++;for(var x=new Uint8Array(p+(m-N)),I=p;N!==m;)x[I++]=v[N++];return x}}}function d(h){var y=l(h);if(y)return y;throw new Error("Non-base"+a+" character")}return{encode:f,decodeUnsafe:l,decode:d}}var _fe=Afe;const Sfe=new TextDecoder,Mfe=r=>Sfe.decode(r),Pfe=new TextEncoder,Tfe=r=>Pfe.encode(r);function Cfe(r,e){const t=new Uint8Array(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}var yI={decodeText:Mfe,encodeText:Tfe,concat:Cfe};const{encodeText:Ife}=yI;let Rfe=class{constructor(e,t,n,i){this.name=e,this.code=t,this.codeBuf=Ife(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}};var Nfe=Rfe;const Ofe=(r,e,t)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let i=r.length;for(;r[i-1]==="=";)--i;const s=new Uint8Array(i*t/8|0);let a=0,o=0,c=0;for(let u=0;u<i;++u){const f=n[r[u]];if(f===void 0)throw new SyntaxError("Invalid character "+r[u]);o=o<<t|f,a+=t,a>=8&&(a-=8,s[c++]=255&o>>a)}if(a>=t||255&o<<8-a)throw new SyntaxError("Unexpected end of data");return s},kfe=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s},Dfe=r=>e=>({encode(t){return kfe(t,e,r)},decode(t){return Ofe(t,e,r)}});var Bfe={rfc4648:Dfe};const G6=_fe,$fe=Nfe,{rfc4648:Kn}=Bfe,{decodeText:Lfe,encodeText:Ufe}=yI,Ffe=()=>({encode:Lfe,decode:Ufe}),WH=[["identity","\0",Ffe,""],["base2","0",Kn(1),"01"],["base8","7",Kn(3),"01234567"],["base10","9",G6,"0123456789"],["base16","f",Kn(4),"0123456789abcdef"],["base16upper","F",Kn(4),"0123456789ABCDEF"],["base32hex","v",Kn(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Kn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Kn(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Kn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Kn(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Kn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Kn(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Kn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Kn(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",G6,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",G6,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",G6,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",G6,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Kn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Kn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Kn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Kn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],KH=WH.reduce((r,e)=>(r[e[0]]=new $fe(e[0],e[1],e[2],e[3]),r),{}),jfe=WH.reduce((r,e)=>(r[e[1]]=KH[e[0]],r),{});var qfe={names:KH,codes:jfe};(function(r,e){const t=qfe,{encodeText:n,decodeText:i,concat:s}=yI;function a(p,g){if(!g)throw new Error("requires an encoded Uint8Array");const{name:m,codeBuf:v}=l(p);return f(m,g),s([v,g],v.length+g.length)}function o(p,g){const m=l(p),v=n(m.encode(g));return s([m.codeBuf,v],m.codeBuf.length+v.length)}function c(p){p instanceof Uint8Array&&(p=i(p));const g=p[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(g)&&(p=p.toLowerCase()),l(p[0]).decode(p.substring(1))}function u(p){if(p instanceof Uint8Array&&(p=i(p)),Object.prototype.toString.call(p)!=="[object String]")return!1;try{return l(p[0]).name}catch{return!1}}function f(p,g){l(p).decode(i(g))}function l(p){if(Object.prototype.hasOwnProperty.call(t.names,p))return t.names[p];if(Object.prototype.hasOwnProperty.call(t.codes,p))return t.codes[p];throw new Error(`Unsupported encoding: ${p}`)}function d(p){return p instanceof Uint8Array&&(p=i(p)),l(p[0])}e=r.exports=a,e.encode=o,e.decode=c,e.isEncoded=u,e.encoding=l,e.encodingFromData=d;const h=Object.freeze(t.names),y=Object.freeze(t.codes);e.names=h,e.codes=y})(Y_,Y_.exports);var GH=Y_.exports;const Vfe=cI,y4={toString:ofe,fromString:afe,concat:zce};function vl(r){return y4.toString(r,"base64url")}function X_(r){return y4.toString(r,"base58btc")}const QH={"ed25519-pub":237,"x25519-pub":236,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"p256-pub":4608},zfe={"bls12_381-g1-pub":"Bls12381G1","bls12_381-g2-pub":"Bls12381G2","ed25519-pub":"Ed25519","p256-pub":"P-256","secp256k1-pub":"Secp256k1","x25519-pub":"X25519"};function Hfe(r,e="base58btc",t){{const n=QH[t],i=sfe(n),s=new Uint8Array(i+r.length);return ife(n,s),s.set(r,i),y4.toString(GH.encode(e,s),"utf-8")}}function mI(r){var t;const e=GH.decode(r);if([32,33,48,64,65,96].includes(e.length))return{keyBytes:e};try{const[n,i]=nfe(e),s=((t=Object.entries(QH).filter(([,a])=>a===n))==null?void 0:t[0][0])??"";return{keyBytes:e.slice(i),keyType:zfe[s]}}catch{return{keyBytes:e}}}function bd(r,e){let t=r.startsWith("0x")?r.substring(2):r;return t.length%2!==0&&(t=`0${t}`),y4.fromString(t.toLowerCase(),"base16")}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));function VD(r,e){return bd(r.toString(16))}function Wfe(r){const{jwkCurve:e}=bI(r),t=Kfe(r);return{crv:e,kty:"EC",x:vl(VD(t.x)),y:vl(VD(t.y)),kid:r.toString()}}function bI(r){const e=r.type;switch(e){case ht.K1:return{jwkCurve:"secp256k1",verificationMethodType:"EcdsaSecp256k1VerificationKey2019"};case ht.R1:return{jwkCurve:"P-256",verificationMethodType:"JsonWebKey2020"};case ht.WA:return{jwkCurve:"P-256",verificationMethodType:"JsonWebKey2020"};default:throw new Error(`Unsupported key type: ${e}`)}}function Kfe(r){const{jwkCurve:e}=bI(r);switch(e){case"secp256k1":return kH.ProjectivePoint.fromHex(r.data.array);case"P-256":return LH.ProjectivePoint.fromHex(r.data.array);default:throw new Error(`Unsupported curve: ${e}`)}}var Gfe={chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",service:[{id:"https://eos.greymass.com",type:"LinkedDomains",serviceEndpoint:"https://eos.greymass.com"},{id:"https://eos.dfuse.eosnation.io",type:"LinkedDomains",serviceEndpoint:"https://eos.dfuse.eosnation.io"}]},Qfe={chainId:"4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11",service:[{id:"https://telos.greymass.com",type:"LinkedDomains",serviceEndpoint:"https://telos.greymass.com"}]},Zfe={chainId:"f778f7d2f124b110e0a71245b310c1d0ac1a0edd21f131c5ecb2e2bc03e8fe2e",service:[{id:"https://api.xec.cryptolions.io",type:"LinkedDomains",serviceEndpoint:"https://api.xec.cryptolions.io"}]},Jfe={chainId:"66d565f72ac08f8321a3036e2d92eea7f96ddc90599bdbfc2d025d810c74c248",service:[{id:"https://pangea.eosusa.io",type:"LinkedDomains",serviceEndpoint:"https://pangea.eosusa.io"}]},Yfe={eos:Gfe,"eos:testnet:jungle":{chainId:"2a02a0053e5a8cf73a56ba0fda11e4d92e0238a4a2aa74fccf46d5a910746840",service:[{id:"https://jungle4.cryptolions.io",type:"LinkedDomains",serviceEndpoint:"https://jungle4.cryptolions.io"}]},telos:Qfe,europechain:Zfe,pangea:Jfe};function Xfe(r){const e=r.fetch?new sx(r.url,{fetch:r.fetch}):new sx(r.url);return new iI({url:r.url,provider:e})}const zD=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Qi(r,e,t){if(!r.s){if(t instanceof Am)if(t.s)e&1&&(e=t.s),t=t.v;else{t.o=Qi.bind(null,r,e);return}if(t&&t.then){t.then(Qi.bind(null,r,e),Qi.bind(null,r,2));return}r.s=e,r.v=t;const n=r.o;n&&n(r)}}const Am=function(){function r(){}return r.prototype.then=function(e,t){const n=new r,i=this.s;if(i){const s=i&1?e:t;if(s){try{Qi(n,1,s(this.v))}catch(a){Qi(n,2,a)}return n}else return this}return this.o=function(s){try{const a=s.v;s.s&1?Qi(n,1,e?e(a):a):t?Qi(n,1,t(a)):Qi(n,2,a)}catch(a){Qi(n,2,a)}},n},r}();function ZH(r){return r instanceof Am&&r.s&1}function ele(r,e,t){var n=-1,i,s;function a(o){try{for(;++n<r.length&&(!t||!t());)if(o=e(n),o&&o.then)if(ZH(o))o=o.v;else{o.then(a,s||(s=Qi.bind(null,i=new Am,2)));return}i?Qi(i,1,o):i=o}catch(c){Qi(i||(i=new Am),2,c)}}return a(),i}function tle(r,e,t){if(typeof r[zD]=="function"){let f=function(l){try{for(;!(i=n.next()).done&&(!t||!t());)if(l=e(i.value),l&&l.then)if(ZH(l))l=l.v;else{l.then(f,a||(a=Qi.bind(null,s=new Am,2)));return}s?Qi(s,1,l):s=l}catch(d){Qi(s||(s=new Am),2,d)}};var n=r[zD](),i,s,a;if(f(),n.return){var o=function(l){try{i.done||n.return()}catch{}return l};if(s&&s.then)return s.then(o,function(l){throw o(l)});o()}return s}if(!("length"in r))throw new TypeError("Object is not iterable");for(var c=[],u=0;u<r.length;u++)c.push(r[u]);return ele(c,function(f){return e(c[f])},t)}function rle(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}const nle=function(r,e,t,n){try{const i={...Yfe,...n.antelopeChainRegistry};let s=ule(e,i);if(n.antelopeChainUrl){const[a,o]=e.id.split(":");s={chain:{chainId:a,service:[]},subject:o}}return s?Promise.resolve(ile(s,r,e,n)).then(function(a){if(!a)return WD("notFound");const o=dle(s,e.did,a);return{didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:o,didDocumentMetadata:{}}}):Promise.resolve(WD("invalidDid"))}catch(i){return Promise.reject(i)}},HD=function(r,e){try{return Promise.resolve(rle(function(){return Promise.resolve(Xfe(e).v1.chain.get_account(r.subject))},function(t){if(t instanceof r5&&t.message.startsWith("Account Query Exception at /v1/chain/get_account"))return null;throw t}))}catch(t){return Promise.reject(t)}},ile=function(r,e,t,n){try{let s=function(c){let u;if(i)return c;const f=fle(r.chain.service,a),l=tle(f,function(d){return Promise.resolve(HD(r,{url:d.serviceEndpoint,fetch:n.fetch})).then(function(h){return u=1,h})},function(){return u});return l&&l.then?l.then(function(d){return u?d:null}):u?l:null},i;const a="LinkedDomains",o=function(){if(n.antelopeChainUrl)return Promise.resolve(HD(r,{url:n.antelopeChainUrl,fetch:n.fetch})).then(function(c){return i=1,c})}();return Promise.resolve(o&&o.then?o.then(s):s(o))}catch(i){return Promise.reject(i)}},JH="([a-z1-5.]{0,12}[a-z1-5])",sle="([A-Fa-f0-9]{64})",ale="(([a-z1-5.]{0,12}[a-z1-5])((:[a-z1-5.]{0,12}[a-z1-5])+)?)";function YH(r){return new RegExp(`^${r}$`)}const ole=YH(`${sle}:${JH}`),cle=YH(`${ale}:${JH}`),XH="ConditionalProof2022";function WD(r){return{didResolutionMetadata:{error:r},didDocument:null,didDocumentMetadata:{}}}function ule(r,e){const t=r.id.match(cle);if(t){const i=e[t[1]];return i?{chain:i,subject:t[t.length-1]}:void 0}const n=r.id.match(ole);if(n)for(const i of Object.keys(e)){const s=e[i];if(s.chainId===n[1])return{chain:s,subject:n[n.length-1]}}}function fle(r,e){return r.filter(t=>Array.isArray(t.type)?t.type.includes(e):t.type===e)}function KD(r,e,t,n){const{verificationMethodType:i}=bI(n);return{id:r+"-"+e,controller:t,type:i,publicKeyJwk:Wfe(n)}}function lle(r,e,t,n,i){const s=r.slice(0,r.lastIndexOf(e.subject)-1);return{id:r+"-"+t,controller:n,type:XH,conditionDelegated:s+":"+i.permission.actor+"#"+i.permission.permission}}function dle(r,e,t){const n=[];for(const s of t.permissions){const a=e+"#"+s.perm_name;s.required_auth.accounts=s.required_auth.accounts.filter(c=>c.permission.permission.toString()!=="eosio.code");let o;if(s.required_auth.keys.length===1&&s.required_auth.accounts.length===0)o=KD(a,0,e,s.required_auth.keys[0].key),o.id=a;else{o={id:a,controller:e,type:XH,threshold:s.required_auth.threshold.toNumber(),conditionWeightedThreshold:[]},s.parent.toString()!==""&&(o.relationshipParent=[e+"#"+s.parent.toString()]);let c=0;for(const u of s.required_auth.keys)o.conditionWeightedThreshold.push({condition:KD(a,c,e,u.key),weight:u.weight.toNumber()}),c++;for(const u of s.required_auth.accounts)o.conditionWeightedThreshold.push({condition:lle(a,r,c,e,u),weight:u.weight.toNumber()}),c++}n.push(o)}return{"@context":["https://www.w3.org/ns/did/v1","https://w3c-ccg.github.io/verifiable-conditions/contexts/verifiable-conditions-2021-v1.json"],id:e,verificationMethod:n,service:r.chain.service}}function GD(r={}){return function(e,t,n,i){return nle(e,t,n,{...i,...r})}}function eW(r){return{eosio:GD(r),antelope:GD(r)}}async function hle(){const e=await new vre({...eW()}).resolve("did:antelope:eos:eoscanadacom");if(!e.didDocument)throw new Error("No DID document found");if(e.didDocument.id!=="did:antelope:eos:eoscanadacom")throw new Error("DID document id incorrect")}async function ple(){await hle()}const yle="theme.pangea.css",mle="/favicon.png",ble="Tonomy ID Development",gle="Tonomy Development",vle="Building ecosystems of trust",xle={logo48:"/development/favicon.png",logo1024:"/development/logo1024x1024.png",mobileLogo:"/development/logo48x48.png"},wle={readMoreDownload:"https://tonomy.io",readMoreFoundation:"https://tonomy.foundation",playStoreDownload:"https://play.google.com/store/apps/details?id=foundation.tonomy.projects.tonomyidstaging",appleStoreDownload:"https://tonomy-foundation.notion.site/Tonomy-ID-Staging-iOS-app-6e027c1db49d475585b0539fb8109207?pvs=4"},Ele=".stag.tonomy.id",Ale="tonomy-id-development://",_le="wss://communication.staging.tonomy.foundation",Sle="http://accounts.localhost:5174",Mle="https://blockchain-api-staging.tonomy.foundation",Ple="http://apps.localhost:5174",Tle="http://demo.localhost:5174",Cle="debug",Ile="https://local.bloks.io",Rle="https://docs.tonomy.io",Nle="TONO",Ole="tonomyiddevelopment",kle="00:E5:7D:E1:DA:75:7C:DD:06:1F:9B:D8:35:02:4B:A9:7E:35:9B:EA:54:4F:52:7E:81:8E:62:B3:3A:5C:99:D7",Dle="localhost",Ble="0x56aD9925f417358640746266eF44a701622c54Ba",$le="https://base-sepolia.infura.io/v3/",Lle="0x8de48baf638e4cd8dab07ef12375369cb9b841db",Ule={themeFile:yle,appLogoUrl:mle,appName:ble,ecosystemName:gle,appSlogan:vle,images:xle,links:wle,accountSuffix:Ele,tonomyIdSchema:Ale,communicationUrl:_le,ssoWebsiteOrigin:Sle,blockchainUrl:Mle,tonomyAppsOrigin:Ple,demoWebsiteOrigin:Tle,loggerLevel:Cle,blockExplorerUrl:Ile,documentationLink:Rle,currencySymbol:Nle,appId:Ole,sha256CertFingerprints:kle,baseNetwork:Dle,baseTokenAddress:Ble,baseRpcUrl:$le,baseMintBurnAddress:Lle},Fle="theme.tonomy.css",jle="/tonomy-logo48.png",qle="Tonomy ID Staging",Vle="Tonomy Staging",zle="Building ecosystems of trust",Hle={logo48:"/tonomy/tonomy-logo48.png",logo1024:"/tonomy/tonomy-logo1024.png",mobileLogo:"/tonomy/tonomy-mobile-logo.png"},Wle={readMoreDownload:"https://tonomy.io",readMoreFoundation:"https://tonomy.foundation",playStoreDownload:"https://play.google.com/store/apps/details?id=foundation.tonomy.projects.tonomyidstaging",appleStoreDownload:"https://testflight.apple.com/join/7Bdd9jdB"},Kle=".stag.tonomy.id",Gle="tonomy-id-staging://",Qle="wss://communication.staging.tonomy.foundation",Zle="https://accounts.staging.tonomy.foundation",Jle="https://apps.staging.tonomy.foundation",Yle="https://blockchain-api-staging.tonomy.foundation",Xle="https://demo.staging.tonomy.foundation",e0e="debug",t0e="https://local.bloks.io/?nodeUrl=https%3A%2F%2Fblockchain-api-staging.tonomy.foundation&coreSymbol=TONO&corePrecision=6&systemDomain=eosio",r0e="https://docs.tonomy.foundation",n0e="TONO",i0e="tonomyidstaging",s0e="05:37:B7:5E:0A:6F:D2:07:89:A2:B1:4D:F1:8B:D2:C7:99:56:DB:71:D0:9B:39:4C:EE:64:95:87:FE:0F:DF:E9",a0e="base-sepolia",o0e="0xC71Ae7EBa91037Ff145671D0d25Ba415BB69450c",c0e="https://base-sepolia.infura.io/v3/",u0e="0x8de48baf638e4cd8dab07ef12375369cb9b841db",f0e={themeFile:Fle,appLogoUrl:jle,appName:qle,ecosystemName:Vle,appSlogan:zle,images:Hle,links:Wle,accountSuffix:Kle,tonomyIdSchema:Gle,communicationUrl:Qle,ssoWebsiteOrigin:Zle,tonomyAppsOrigin:Jle,blockchainUrl:Yle,demoWebsiteOrigin:Xle,loggerLevel:e0e,blockExplorerUrl:t0e,documentationLink:r0e,currencySymbol:n0e,appId:i0e,sha256CertFingerprints:s0e,baseNetwork:a0e,baseTokenAddress:o0e,baseRpcUrl:c0e,baseMintBurnAddress:u0e},l0e="theme.pangea.css",d0e="/favicon.png",h0e="Tonomy ID Testnet",p0e="Tonomy Testnet",y0e="For a Better Tomorrow",m0e={logo48:"/pangea/favicon.png",logo1024:"/pangea/logo1024x1024.png",mobileLogo:"/pangea/logo48x48.png"},b0e={readMoreDownload:"https://tonomy.io",readMoreFoundation:"https://tonomy.foundation",playStoreDownload:"https://play.google.com/store/apps/details?id=foundation.tonomy.projects.pangeatestnet",appleStoreDownload:"https://testflight.apple.com/join/ou7KmYiE"},g0e=".testnet.pangea",v0e="pangea-testnet://",x0e="wss://communication.testnet.tonomy.io",w0e="https://accounts.testnet.tonomy.io",E0e="https://test.pangea.eosusa.io",A0e="https://apps.testnet.tonomy.io",_0e="https://demo.testnet.tonomy.io",S0e="error",M0e="https://explorer.testnet.tonomy.io",P0e="https://docs.tonomy.io",T0e="TONO",C0e="pangeatestnet",I0e="24:8A:15:4B:BC:84:4C:D8:8F:F8:20:86:80:DC:08:65:75:5D:79:3C:20:CB:D9:EA:49:96:A8:D6:EC:C4:10:FD",R0e="base-sepolia",N0e="0x56aD9925f417358640746266eF44a701622c54Ba",O0e="https://base-sepolia.infura.io/v3/",k0e="0x8de48baf638e4cd8dab07ef12375369cb9b841db",D0e={themeFile:l0e,appLogoUrl:d0e,appName:h0e,ecosystemName:p0e,appSlogan:y0e,images:m0e,links:b0e,accountSuffix:g0e,tonomyIdSchema:v0e,communicationUrl:x0e,ssoWebsiteOrigin:w0e,blockchainUrl:E0e,tonomyAppsOrigin:A0e,demoWebsiteOrigin:_0e,loggerLevel:S0e,blockExplorerUrl:M0e,documentationLink:P0e,currencySymbol:T0e,appId:C0e,sha256CertFingerprints:I0e,baseNetwork:R0e,baseTokenAddress:N0e,baseRpcUrl:O0e,baseMintBurnAddress:k0e},B0e="theme.pangea.css",$0e="/favicon.png",L0e="Tonomy ID",U0e="Tonomy",F0e="For a Better Tomorrow",j0e={logo48:"/pangea/favicon.png",logo1024:"/pangea/logo1024x1024.png",mobileLogo:"/pangea/logo48x48.png"},q0e={readMoreDownload:"https://tonomy.io",readMoreFoundation:"https://tonomy.foundation",playStoreDownload:"https://play.google.com/store/apps/details?id=foundation.tonomy.projects.unitedwallet",appleStoreDownload:"https://apps.apple.com/us/app/united-citizens-wallet/id6482296993"},V0e=".pangea.id",z0e="united-wallet://",H0e="wss://communication.tonomy.io",W0e="https://accounts.tonomy.io",K0e="https://pangea.eosusa.io",G0e="https://demo.tonomy.io",Q0e="https://apps.tonomy.io",Z0e="error",J0e="https://explorer.tonomy.io",Y0e="https://docs.tonomy.io",X0e="TONO",ede="unitedwallet",tde="02:AE:D4:C2:77:0E:63:08:9E:C1:B9:AB:BF:52:69:44:FA:F7:C5:B6:C6:33:C3:93:1F:49:DC:E0:24:99:38:35",rde="base",nde="0x36a0E9d5bb7322b26185D76Fb3fce46a40007e90",ide="https://base-mainnet.infura.io/v3/",sde="0x86d1Df3473651265AA88E48dE9B420debCa6e676",ade={themeFile:B0e,appLogoUrl:$0e,appName:L0e,ecosystemName:U0e,appSlogan:F0e,images:j0e,links:q0e,accountSuffix:V0e,tonomyIdSchema:z0e,communicationUrl:H0e,ssoWebsiteOrigin:W0e,blockchainUrl:K0e,demoWebsiteOrigin:G0e,tonomyAppsOrigin:Q0e,loggerLevel:Z0e,blockExplorerUrl:J0e,documentationLink:Y0e,currencySymbol:X0e,appId:ede,sha256CertFingerprints:tde,baseNetwork:rde,baseTokenAddress:nde,baseRpcUrl:ide,baseMintBurnAddress:sde};var eS={exports:{}},j7,QD;function ode(){if(QD)return j7;QD=1;var r=1e3,e=r*60,t=e*60,n=t*24,i=n*7,s=n*365.25;j7=function(f,l){l=l||{};var d=typeof f;if(d==="string"&&f.length>0)return a(f);if(d==="number"&&isFinite(f))return l.long?c(f):o(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(l){var d=parseFloat(l[1]),h=(l[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*i;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*t;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function o(f){var l=Math.abs(f);return l>=n?Math.round(f/n)+"d":l>=t?Math.round(f/t)+"h":l>=e?Math.round(f/e)+"m":l>=r?Math.round(f/r)+"s":f+"ms"}function c(f){var l=Math.abs(f);return l>=n?u(f,l,n,"day"):l>=t?u(f,l,t,"hour"):l>=e?u(f,l,e,"minute"):l>=r?u(f,l,r,"second"):f+" ms"}function u(f,l,d,h){var y=l>=d*1.5;return Math.round(f/d)+" "+h+(y?"s":"")}return j7}function cde(r){t.debug=t,t.default=t,t.coerce=c,t.disable=a,t.enable=i,t.enabled=o,t.humanize=ode(),t.destroy=u,Object.keys(r).forEach(f=>{t[f]=r[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let l=0;for(let d=0;d<f.length;d++)l=(l<<5)-l+f.charCodeAt(d),l|=0;return t.colors[Math.abs(l)%t.colors.length]}t.selectColor=e;function t(f){let l,d=null,h,y;function p(...g){if(!p.enabled)return;const m=p,v=Number(new Date),b=v-(l||v);m.diff=b,m.prev=l,m.curr=v,l=v,g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let _=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(N,x)=>{if(N==="%%")return"%";_++;const I=t.formatters[x];if(typeof I=="function"){const $=g[_];N=I.call(m,$),g.splice(_,1),_--}return N}),t.formatArgs.call(m,g),(m.log||t.log).apply(m,g)}return p.namespace=f,p.useColors=t.useColors(),p.color=t.selectColor(f),p.extend=n,p.destroy=t.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==t.namespaces&&(h=t.namespaces,y=t.enabled(f)),y),set:g=>{d=g}}),typeof t.init=="function"&&t.init(p),p}function n(f,l){const d=t(this.namespace+(typeof l>"u"?":":l)+f);return d.log=this.log,d}function i(f){t.save(f),t.namespaces=f,t.names=[],t.skips=[];const l=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const d of l)d[0]==="-"?t.skips.push(d.slice(1)):t.names.push(d)}function s(f,l){let d=0,h=0,y=-1,p=0;for(;d<f.length;)if(h<l.length&&(l[h]===f[d]||l[h]==="*"))l[h]==="*"?(y=h,p=d,h++):(d++,h++);else if(y!==-1)h=y+1,p++,d=p;else return!1;for(;h<l.length&&l[h]==="*";)h++;return h===l.length}function a(){const f=[...t.names,...t.skips.map(l=>"-"+l)].join(",");return t.enable(""),f}function o(f){for(const l of t.skips)if(s(f,l))return!1;for(const l of t.names)if(s(f,l))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var ude=cde;(function(r,e){var t={};e.formatArgs=i,e.save=s,e.load=a,e.useColors=n,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const f="color: "+this.color;u.splice(1,0,f,"color: inherit");let l=0,d=0;u[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(l++,h==="%c"&&(d=l))}),u.splice(d,0,f)}e.log=console.debug||console.log||(()=>{});function s(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function a(){let u;try{u=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=t.DEBUG),u}function o(){try{return localStorage}catch{}}r.exports=ude(e);const{formatters:c}=r.exports;c.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}}})(eS,eS.exports);var fde=eS.exports;const Mt=so(fde),lde={VITE_APP_NODE_ENV:"production",VITE_ETHEREUM:"",VITE_INFURA_API:"77422fa49acc4b4eb189abd416350cd8",VITE_REOWN_PROJECT_ID:"850cdd095217e599acfd5f9f01d7b1ba"};var dde={};const gI=Mt("tonomy-app-websites:common:settings"),aa=lde||dde,Gg=aa.VITE_APP_NODE_ENV||"development";console.log(`VITE_APP_NODE_ENV=${Gg}`);let Wa;const Ah={env:Gg,isProduction:()=>["production","testnet","staging"].includes(Ah.env)};switch(Gg){case"test":case"local":case"development":Wa=Ule;break;case"staging":Wa=f0e;break;case"testnet":Wa=D0e;break;case"production":Wa=ade;break;default:throw new Error("Unknown environment: "+Gg)}aa.VITE_BLOCKCHAIN_URL&&(gI(`Using BLOCKCHAIN_URL from env:  ${aa.VITE_BLOCKCHAIN_URL}`),Wa.blockchainUrl=aa.VITE_BLOCKCHAIN_URL);aa.VITE_SSO_WEBSITE_ORIGIN&&(gI(`Using SSO_WEBSITE_ORIGIN from env:  ${aa.VITE_SSO_WEBSITE_ORIGIN}`),Wa.ssoWebsiteOrigin=aa.VITE_SSO_WEBSITE_ORIGIN);aa.VITE_COMMUNICATION_URL&&(gI(`Using VITE_COMMUNICATION_URL from env: ${aa.VITE_COMMUNICATION_URL}`),Wa.communicationUrl=aa.VITE_COMMUNICATION_URL);Wa.baseRpcUrl+=aa.VITE_INFURA_API;Wa.basePrivateKey=aa.VITE_ETHEREUM;Wa.reownProjectId=aa.VITE_REOWN_PROJECT_ID;Wa.environment=Gg;Ah.config=Wa;if(typeof document<"u"){document.title=Ah.config.appName;const r=document.createElement("link");r.type="image/svg+xml",r.rel="icon",r.href=Ah.config.images.logo48,document.head.appendChild(r);const e=document.createElement("link");e.rel="stylesheet",e.href="/theme/"+Ah.config.themeFile,document.head.appendChild(e),A3.createRoot(document.getElementById("root"))}var vI={exports:{}},q7,ZD;function hde(){if(ZD)return q7;ZD=1;let r=!1;return"process"in Ht&&(r=/^v8\./.test(Ht.process.version)),q7=function(t){function n(l,d){return t[l](d)}const i=n("require","crypto");function s(l,d){const h=l.length;for(let y=0,p=0;y<h;y++)l[y]=d[p++]<<24|d[p++]<<16|d[p++]<<8|d[p++];return l}function a(l,d){const h=l.length;for(let y=0,p=0;y<h;y++)l[y]=(d[p++]<<24|d[p++]<<16|d[p++]<<8|d[p++])-2147483648;return l}function o(l,d){const h=l.length;for(let y=0,p=0;y<h;y++)l[y]=d[p++]<<8|d[p++];return l}function c(l,d){const h=l.length;for(let y=0,p=0;y<h;y++)l[y]=(d[p++]<<8|d[p++])-32768;return l}function u(l,d){const h=l.length;for(let y=0;y<h;y++)l[y]=d[y];return l}function f(l,d){const h=l.length;for(let y=0;y<h;y++)l[y]=d[y]-128;return l}return r?function(d){if(d instanceof Uint8Array)return i.randomFillSync(d);const h=i.randomBytes(d.byteLength);if(d instanceof Uint32Array)return s(d,h);if(d instanceof Uint16Array)return o(d,h);if(d instanceof Int32Array)return a(d,h);if(d instanceof Int16Array)return c(d,h);if(d instanceof Int8Array)return f(d,h);if(d instanceof Uint8ClampedArray)return u(d,h);throw new Error("invalid type")}:i.randomFillSync||function(d){const h=i.randomBytes(d.byteLength);if(d instanceof Uint8Array)return u(d,h);if(d instanceof Uint32Array)return s(d,h);if(d instanceof Uint16Array)return o(d,h);if(d instanceof Int32Array)return a(d,h);if(d instanceof Int16Array)return c(d,h);if(d instanceof Int8Array)return f(d,h);if(d instanceof Uint8ClampedArray)return u(d,h);throw new Error("invalid type")}},q7}var V7={exports:{}},JD;function pde(){return JD||(JD=1,function(r){(function(e,t,n){var i=256,s=6,a=52,o="random",c=n.pow(i,s),u=n.pow(2,a),f=u*2,l=i-1,d;function h(_,C,N){var x=[];C=C==!0?{entropy:!0}:C||{};var I=m(g(C.entropy?[_,b(t)]:_??v(),3),x),$=new y(x),j=function(){for(var O=$.g(s),E=c,S=0;O<u;)O=(O+S)*i,E*=i,S=$.g(1);for(;O>=f;)O/=2,E/=2,S>>>=1;return(O+S)/E};return j.int32=function(){return $.g(4)|0},j.quick=function(){return $.g(4)/4294967296},j.double=j,m(b($.S),t),(C.pass||N||function(O,E,S,A){return A&&(A.S&&p(A,$),O.state=function(){return p($,{})}),S?(n[o]=O,E):O})(j,I,"global"in C?C.global:this==n,C.state)}function y(_){var C,N=_.length,x=this,I=0,$=x.i=x.j=0,j=x.S=[];for(N||(_=[N++]);I<i;)j[I]=I++;for(I=0;I<i;I++)j[I]=j[$=l&$+_[I%N]+(C=j[I])],j[$]=C;(x.g=function(O){for(var E,S=0,A=x.i,w=x.j,P=x.S;O--;)E=P[A=l&A+1],S=S*i+P[l&(P[A]=P[w=l&w+E])+(P[w]=E)];return x.i=A,x.j=w,S})(i)}function p(_,C){return C.i=_.i,C.j=_.j,C.S=_.S.slice(),C}function g(_,C){var N=[],x=typeof _,I;if(C&&x=="object")for(I in _)try{N.push(g(_[I],C-1))}catch{}return N.length?N:x=="string"?_:_+"\0"}function m(_,C){for(var N=_+"",x,I=0;I<N.length;)C[l&I]=l&(x^=C[l&I]*19)+N.charCodeAt(I++);return b(C)}function v(){try{var _;return d&&(_=d.randomBytes)?_=_(i):(_=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(_)),b(_)}catch{var C=e.navigator,N=C&&C.plugins;return[+new Date,e,N,e.screen,b(t)]}}function b(_){return String.fromCharCode.apply(0,_)}if(m(n.random(),t),r.exports){r.exports=h;try{d=zw}catch{}}else n["seed"+o]=h})(typeof self<"u"?self:Ht,[],Math)}(V7)),V7.exports}var z7,YD;function yde(){if(YD)return z7;YD=1;function r(e){const t=e.reduce(function(a,o){return a+o.length*2},0),n=new ArrayBuffer(t),i=new Uint16Array(n);let s=0;return e.forEach(function(a){for(var o=0,c=a.length;o<c;o++)i[s+o]=a.charCodeAt(o);s+=a.length}),i}return z7=function(t){const n=pde();function i(p,g){return t[p](g)}let s,a;try{s=i("require","react-native").NativeModules.SyncRandomBytes,s&&(a=s.seed)}catch{}!a&&t&&"Expo"in t&&(a=r([t.Expo.Constants.installationId,t.Expo.Constants.sessionId,"performance"in t?t.performance.now().toString(32):new Date().toISOString(),Math.random().toString(32)]));let o=n(a),c=!1;!a&&s&&(c=!0,s.randomBytes().then(p=>{c=!1,o=n(p)}).catch(function(p){c=!1,console.log(`WARNING: can not collect seed data: ${p.message}`)}));function u(p){const g=p.length;if(g>16384)throw new Error("QuotaExceeded");for(let m=g-1;m>=0;m--)p[m]=o.int32();return p}function f(p){const g=p.length;if(g>16384)throw new Error("QuotaExceeded");for(let m=g-1;m>=0;m--)p[m]=o.int32()-2147483648;return p}function l(p){if(p.length>65536)throw new Error("QuotaExceeded");const g=p.length*.25+1|0;for(let m=g-1,v=0;m>=0;m--){const b=o.int32();p[v++]=b&255,p[v++]=b>>8&255,p[v++]=b>>16&255,p[v++]=b>>24&255}return p}function d(p){if(p.length>65536)throw new Error("QuotaExceeded");const g=p.length*.25+1|0;for(let m=g-1,v=0;m>=0;m--){const b=o.int32();p[v++]=(b&255)-128,p[v++]=(b>>8&255)-128,p[v++]=(b>>16&255)-128,p[v++]=(b>>24&255)-128}return p}function h(p){if(p.length>32767)throw new Error("QuotaExceeded");const g=p.length*.5+1|0;for(let m=g-1,v=0;m>=0;m--){const b=o.int32();p[v++]=b&65535,p[v++]=b>>16&65535}return p}function y(p){if(p.length>32767)throw new Error("QuotaExceeded");const g=p.length*.5+1|0;for(let m=g-1,v=0;m>=0;m--){const b=o.int32();p[v++]=(b&65535)-32768,p[v++]=(b>>16&65535)-32768}return p}return function(g){if(c&&(c=!1,console.log("WARNING: random data is requested before the seed is done")),g==null)throw new Error("invalid type");if(g instanceof Uint8Array)return l(g);if(g instanceof Uint32Array)return u(g);if(g instanceof Uint16Array)return h(g);if(g instanceof Int32Array)return f(g);if(g instanceof Int16Array)return y(g);if(g instanceof Int8Array)return d(g);if(g instanceof Uint8ClampedArray)return l(g);throw new Error("invalid type")}},z7}vI.exports;(function(r){r.exports=function(e){if(e&&e.crypto&&e.crypto.getRandomValues)return e.crypto.getRandomValues.bind(e.crypto);try{return hde()(e)}catch{return yde()(e)}}(typeof window=="object"?window:r)})(vI);var mde=vI.exports;const bde=so(mde);/**
 * EOSIO Signing Request v3.2.0
 * https://github.com/greymass/eosio-signing-request
 *
 * @license
 * Copyright  2021 Greymass Inc.
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the Software), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED AS IS, WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 * 
 * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR
 * INTENDED FOR USE IN THE DESIGN, CONSTRUCTION, OPERATION OR
 * MAINTENANCE OF ANY MILITARY FACILITY.
 */const tW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",nf=new Uint8Array(256);for(let r=0;r<62;r++)nf[tW.charCodeAt(r)]=r;nf[43]=nf[45]=62;nf[47]=nf[95]=63;function rW(r,e=!0){const t=r.byteLength,n=t%3,i=t-n,s=tW+(e?"-_":"+/"),a=[];let o,c,u,f,l;for(let d=0;d<i;d+=3)l=r[d]<<16|r[d+1]<<8|r[d+2],o=(l&16515072)>>18,c=(l&258048)>>12,u=(l&4032)>>6,f=l&63,a.push(s[o]+s[c]+s[u]+s[f]);return n===1?(l=r[i],o=(l&252)>>2,c=(l&3)<<4,a.push(s[o]+s[c])):n===2&&(l=r[i]<<8|r[i+1],o=(l&64512)>>10,c=(l&1008)>>4,u=(l&15)<<2,a.push(s[o]+s[c]+s[u])),a.join("")}function nW(r){const e=r.length*.75,t=new Uint8Array(e);let n,i,s,a,o=0;for(let c=0;c<r.length;c+=4)n=nf[r.charCodeAt(c)],i=nf[r.charCodeAt(c+1)],s=nf[r.charCodeAt(c+2)],a=nf[r.charCodeAt(c+3)],t[o++]=n<<2|i>>4,t[o++]=(i&15)<<4|s>>2,t[o++]=(s&3)<<6|a&63;return t}var Cn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.EOS=1]="EOS",r[r.TELOS=2]="TELOS",r[r.JUNGLE=3]="JUNGLE",r[r.KYLIN=4]="KYLIN",r[r.WORBLI=5]="WORBLI",r[r.BOS=6]="BOS",r[r.MEETONE=7]="MEETONE",r[r.INSIGHTS=8]="INSIGHTS",r[r.BEOS=9]="BEOS",r[r.WAX=10]="WAX",r[r.PROTON=11]="PROTON",r[r.FIO=12]="FIO"})(Cn||(Cn={}));let Lo=class extends kt{static from(e){if(st(e,this))return e;if(typeof e=="number"&&(e=XD.get(e),!e))throw new Error("Unknown chain id alias");return super.from(e)}get chainVariant(){const e=this.chainName;return e!==Cn.UNKNOWN?kc.from(["chain_alias",e]):kc.from(this)}get chainName(){const e=this.hexString;for(const[t,n]of XD)if(n===e)return t;return Cn.UNKNOWN}};Lo=q([u6("chain_id")],Lo);let tS=class extends uf{};tS=q([u6("chain_alias")],tS);let kc=class extends Ui{get chainId(){return st(this.value,Lo)?this.value:Lo.from(Number(this.value.value))}};kc=q([Ui.type("variant_id",[tS,Lo])],kc);const XD=new Map([[Cn.EOS,"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"],[Cn.TELOS,"4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11"],[Cn.JUNGLE,"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473"],[Cn.KYLIN,"5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191"],[Cn.WORBLI,"73647cde120091e0a4b85bced2f3cfdb3041e266cbbe95cee59b73235a1b3b6f"],[Cn.BOS,"d5a3d18fbb3c084e3b1f3fa98c21014b5f3db536cc15d08f9f6479517c6a3d86"],[Cn.MEETONE,"cfe6486a83bad4962f232d48003b1824ab5665c36778141034d75e57b956e422"],[Cn.INSIGHTS,"b042025541e25a472bffde2d62edd457b7e70cee943412b1ea0f044f88591664"],[Cn.BEOS,"b912d19a6abd2b1b05611ae5be473355d64d95aeff0c09bedc8c166cd6468fe4"],[Cn.WAX,"1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4"],[Cn.PROTON,"384da888112027f0321850a169f737c33e53b388aad48b5adace4bab97f437e0"],[Cn.FIO,"21dcae42c0182200e93f954a074011f9048a7624c6fe81d3c9541a614a88bd1c"]]);var e1;let eB=class extends qe{};eB=q([u6("account_name")],eB);let tB=class extends qe{};tB=q([u6("permission_name")],tB);let Qg=class extends U{};q([U.field(ci,{optional:!0})],Qg.prototype,"permission",void 0);Qg=q([U.type("identity")],Qg);let T0=class extends U{};q([U.field("name")],T0.prototype,"scope",void 0);q([U.field(ci,{optional:!0})],T0.prototype,"permission",void 0);T0=q([U.type("identity")],T0);let rS=class extends Ui{};rS=q([Ui.type("variant_req",[Nr,{type:Nr,array:!0},hn,Qg])],rS);let nS=class extends Ui{};nS=q([Ui.type("variant_req",[Nr,{type:Nr,array:!0},hn,T0])],nS);let C0=e1=class extends uf{get broadcast(){return(Number(this)&e1.broadcast)!==0}set broadcast(e){this.setFlag(e1.broadcast,e)}get background(){return(Number(this)&e1.background)!==0}set background(e){this.setFlag(e1.background,e)}setFlag(e,t){t?this.value=uf.from(Number(this)|e).value:this.value=uf.from(Number(this)&~e).value}};C0.broadcast=1;C0.background=2;C0=e1=q([u6("request_flags")],C0);let Xh=class extends U{};q([U.field("string")],Xh.prototype,"key",void 0);q([U.field("bytes")],Xh.prototype,"value",void 0);Xh=q([U.type("info_pair")],Xh);let I0=class extends U{};q([U.field(kc)],I0.prototype,"chain_id",void 0);q([U.field(rS)],I0.prototype,"req",void 0);q([U.field(C0)],I0.prototype,"flags",void 0);q([U.field("string")],I0.prototype,"callback",void 0);q([U.field(Xh,{array:!0})],I0.prototype,"info",void 0);I0=q([U.type("signing_request")],I0);let R0=class extends U{};q([U.field(kc)],R0.prototype,"chain_id",void 0);q([U.field(nS)],R0.prototype,"req",void 0);q([U.field(C0)],R0.prototype,"flags",void 0);q([U.field("string")],R0.prototype,"callback",void 0);q([U.field(Xh,{array:!0})],R0.prototype,"info",void 0);R0=q([U.type("signing_request")],R0);let i0=class extends U{};q([U.field("name")],i0.prototype,"signer",void 0);q([U.field("signature")],i0.prototype,"signature",void 0);i0=q([U.type("request_signature")],i0);var yb;let N0=yb=class extends U{static from(e){return st(e,yb)?e:typeof e=="string"?yb.fromString(e):super.from(e)}static fromString(e){const t=e.split(" ");if(t.length!==2||t[0]!=="EOSIO")throw new Error("Invalid IdentityProof string");const n=nW(t[1]);return Ut.decode({data:n,type:yb})}static fromPayload(e,t={}){const n=Il.from(e.req,t);if(!(n.version>=3&&n.isIdentity()))throw new Error("Not an identity request");return this.from({chainId:e.cid||n.getChainId(),scope:n.getIdentityScope(),expiration:e.ex,signer:{actor:e.sa,permission:e.sp},signature:e.sig})}get transaction(){const e=Nr.from({account:"",name:"identity",authorization:[this.signer],data:T0.from({scope:this.scope,permission:this.signer})});return hn.from({ref_block_num:0,ref_block_prefix:0,expiration:this.expiration,actions:[e]})}recover(){return this.signature.recoverDigest(this.transaction.signingDigest(this.chainId))}verify(e,t){return Af.from(t||new Date).toMilliseconds()<this.expiration.toMilliseconds()&&M0.from(e).hasPermission(this.recover())}toString(){const e=Ut.encode({object:this});return`EOSIO ${rW(e.array,!1)}`}};q([U.field(Lo)],N0.prototype,"chainId",void 0);q([U.field(qe)],N0.prototype,"scope",void 0);q([U.field(Af)],N0.prototype,"expiration",void 0);q([U.field(ci)],N0.prototype,"signer",void 0);q([U.field(d6)],N0.prototype,"signature",void 0);N0=yb=q([U.type("identity_proof")],N0);const gd=qe.from("............1"),t1=qe.from("............2"),iS=ci.from({actor:gd,permission:t1});class Il{constructor(e,t,n,i,s){if(t.flags.broadcast&&t.req.variantName==="identity")throw new Error("Invalid request (identity request cannot be broadcast)");this.version=e,this.data=t,this.zlib=n,this.abiProvider=i,this.signature=s}static identityAbi(e){const t=Ut.synthesize(this.identityType(e));return t.actions=[{name:"identity",type:"identity",ricardian_contract:""}],t}static identityType(e){return e===2?Qg:T0}static storageType(e){return e===2?I0:R0}static async create(e,t={}){let n;e.action?n=[e.action]:e.actions?n=e.actions:e.transaction?n=e.transaction.actions||[]:n=[];const i=n.filter(a=>!nt.isBytes(a.data)&&a.data.constructor.abiName===void 0).map(a=>qe.from(a.account)),s={};if(i.length>0){const a=t.abiProvider;if(!a)throw new Error("Missing abi provider");const o=await Promise.all(i.map(c=>a.getAbi(c)));for(const[c,u]of o.entries())s[i[c].toString()]=u}return this.createSync(e,t,s)}static createSync(e,t={},n={}){let i=2;const s={},a=f=>vde(f,n);if(e.chainId===null&&(i=3),e.identity!==void 0)e.identity.scope&&(i=3),s.req=["identity",this.identityType(i).from(e.identity)];else if(e.action&&!e.actions&&!e.transaction)s.req=["action",a(e.action)];else if(e.actions&&!e.action&&!e.transaction)e.actions.length===1?s.req=["action",a(e.actions[0])]:s.req=["action[]",e.actions.map(a)];else if(e.transaction&&!e.action&&!e.actions){const f=e.transaction;f.expiration===void 0&&(f.expiration="1970-01-01T00:00:00.000"),f.ref_block_num===void 0&&(f.ref_block_num=0),f.ref_block_prefix===void 0&&(f.ref_block_prefix=0),f.context_free_actions===void 0&&(f.context_free_actions=[]),f.transaction_extensions===void 0&&(f.transaction_extensions=[]),f.delay_sec===void 0&&(f.delay_sec=0),f.max_cpu_usage_ms===void 0&&(f.max_cpu_usage_ms=0),f.max_net_usage_words===void 0&&(f.max_net_usage_words=0),f.actions===void 0&&(f.actions=[]),f.context_free_actions===void 0&&(f.context_free_actions=[]),f.actions=f.actions.map(a),s.req=["transaction",f]}else throw new TypeError("Invalid arguments: Must have exactly one of action, actions or transaction");e.chainId===null?s.chain_id=kc.from(["chain_alias",0]):s.chain_id=Lo.from(e.chainId||Cn.EOS).chainVariant;const o=C0.from(0);let c="";if(o.broadcast=e.broadcast!==void 0?e.broadcast:s.req[0]!=="identity",typeof e.callback=="string"?c=e.callback:typeof e.callback=="object"&&(c=e.callback.url,o.background=e.callback.background||!1),s.flags=o,s.callback=c,s.info=[],typeof e.info=="object"){for(const f in e.info)if(Object.prototype.hasOwnProperty.call(e.info,f)){let d=e.info[f];typeof d=="string"?d=nt.from(d,"utf8"):d instanceof nt||(d=Ut.encode({object:d})),s.info.push({key:f,value:d})}}if(e.chainIds&&e.chainId===null){const f=e.chainIds.map(l=>Lo.from(l).chainVariant);s.info.push({key:"chain_ids",value:Ut.encode({object:f,type:{type:kc,array:!0}})})}const u=new Il(i,this.storageType(i).from(s),t.zlib,t.abiProvider);return t.signatureProvider&&u.sign(t.signatureProvider),u}static identity(e,t={}){let n={actor:e.account||gd,permission:e.permission||t1};return n.actor===gd&&n.permission===t1&&(n=void 0),this.createSync({...e,identity:{permission:n,scope:e.scope},broadcast:!1},t)}static fromTransaction(e,t,n={}){const i=Lo.from(e);t=nt.from(t);const s=new rI;return s.writeByte(2),s.writeArray(Ut.encode({object:i.chainVariant}).array),s.writeByte(2),s.writeArray(nt.from(t).array),s.writeByte(C0.broadcast),s.writeByte(0),s.writeByte(0),Il.fromData(s.getData(),n)}static from(e,t={}){if(typeof e!="string")throw new Error("Invalid request uri");const[,n]=e.split(":"),i=nW(n.startsWith("//")?n.slice(2):n);return Il.fromData(i,t)}static fromData(e,t={}){e=nt.from(e);const n=e.array[0],i=n&-129;if(i!==2&&i!==3)throw new Error("Unsupported protocol version");let s=e.droppingFirst(1);if(n&128){if(!t.zlib)throw new Error("Compressed URI needs zlib");s=nt.from(t.zlib.inflateRaw(s.array))}const a=new ym(s.array),o=Ut.decode({data:a,type:this.storageType(i)});let c;return a.canRead()&&(c=Ut.decode({data:a,type:i0})),new Il(i,o,t.zlib,t.abiProvider,c)}sign(e){const t=this.getSignatureDigest();this.signature=i0.from(e.sign(t))}getSignatureDigest(){const e=[this.version,114,101,113,117,101,115,116];return kt.hash(nt.from(e).appending(this.getData()))}setSignature(e,t){this.signature=i0.from({signer:e,signature:t})}setCallback(e,t){this.data.callback=e,this.data.flags.background=t}setBroadcast(e){this.data.flags.broadcast=e}encode(e,t,n="esr:"){const i=e!==void 0?e:this.zlib!==void 0;if(i&&this.zlib===void 0)throw new Error("Need zlib to compress");let s=this.version;const a=this.getData(),o=this.getSignatureData();let c=new Uint8Array(a.byteLength+o.byteLength);if(c.set(a,0),c.set(o,a.byteLength),i){const f=this.zlib.deflateRaw(c);c.byteLength>f.byteLength&&(s|=128,c=f)}const u=new Uint8Array(1+c.byteLength);return u[0]=s,u.set(c,1),t!==!1&&(n+="//"),n+rW(u)}getData(){return Ut.encode({object:this.data}).array}getSignatureData(){return this.signature?Ut.encode({object:this.signature}).array:new Uint8Array(0)}getRequiredAbis(){return this.getRawActions().filter(e=>!H7(e)).map(e=>e.account).filter((e,t,n)=>n.indexOf(e)===t)}requiresTapos(){const e=this.getRawTransaction();return!this.isIdentity()&&!rB(e)}async fetchAbis(e){const t=this.getRequiredAbis();if(t.length>0){const n=e||this.abiProvider;if(!n)throw new Error("Missing ABI provider");const i=new Map;return await Promise.all(t.map(async s=>{i.set(s.toString(),Nt.from(await n.getAbi(s)))})),i}else return new Map}resolveActions(e,t){return this.getRawActions().map(n=>{let i;if(H7(n))i=this.constructor.identityAbi(this.version);else{const c=e.get(n.account.toString());if(!c)throw new Error(`Missing ABI definition for ${n.account}`);i=Nt.from(c)}if(!i.getActionType(n.name))throw new Error(`Missing type for action ${n.account}:${n.name} in ABI`);let a=n.decodeData(i),o=n.authorization;if(t){const c=ci.from(t),u=f=>{if(f instanceof qe)return f.equals(gd)?c.actor:f.equals(t1)?c.permission:f;if(Array.isArray(f))return f.map(u);if(typeof f=="object"&&f!==null){for(const l of Object.keys(f))f[l]=u(f[l]);return f}else return f};a=u(a),o=o.map(f=>{let{actor:l,permission:d}=f;return l.equals(gd)&&(l=c.actor),d.equals(t1)&&(d=c.permission),d.equals(gd)&&(d=c.permission),ci.from({actor:l,permission:d})})}return{...n,authorization:o,data:a}})}resolveTransaction(e,t,n={}){const i=this.getRawTransaction();if(!this.isIdentity()&&!rB(i))if(n.expiration!==void 0&&n.ref_block_num!==void 0&&n.ref_block_prefix!==void 0)i.expiration=Af.from(n.expiration),i.ref_block_num=$h.from(n.ref_block_num,"truncate"),i.ref_block_prefix=mr.from(n.ref_block_prefix);else if(n.block_num!==void 0&&n.ref_block_prefix!==void 0&&n.timestamp!==void 0)i.expiration=nB(n.timestamp,n.expire_seconds),i.ref_block_num=$h.from(n.block_num,"truncate"),i.ref_block_prefix=mr.from(n.ref_block_prefix);else throw new Error("Invalid transaction context, need either a reference block or explicit TaPoS values");else this.isIdentity()&&this.version>2&&(i.expiration=n.expiration?Af.from(n.expiration):nB(n.timestamp,n.expire_seconds));const s=this.resolveActions(e,t),a=i.context_free_actions;return{...i,context_free_actions:a,actions:s}}resolve(e,t,n={}){const i=this.resolveTransaction(e,t,n),s=i.actions.map(c=>{let u;if(H7(c)?u=this.constructor.identityAbi(this.version):u=e.get(c.account.toString()),!u)throw new Error(`Missing ABI definition for ${c.account}`);const f=u.getActionType(c.name),l=Ut.encode({object:c.data,type:f,abi:u});return Nr.from({...c,data:l})}),a=hn.from({...i,actions:s});let o;if(this.isMultiChain()){if(!n.chainId)throw new Error("Missing chosen chain ID for multi-chain request");o=Lo.from(n.chainId);const c=this.getChainIds();if(c&&!c.some(u=>o.equals(u)))throw new Error("Trying to resolve for chain ID not defined in request")}else o=this.getChainId();return new gde(this,ci.from(t),a,i,o)}getChainId(){return this.data.chain_id.chainId}getChainIds(){if(!this.isMultiChain())return null;const e=this.getInfoKey("chain_ids",{type:kc,array:!0});return e?e.map(t=>t.chainId):null}setChainIds(e){const t=e.map(n=>Lo.from(n).chainVariant);this.setInfoKey("chain_ids",t,{type:kc,array:!0})}isMultiChain(){return this.data.chain_id.variantIdx===0&&this.data.chain_id.value.equals(Cn.UNKNOWN)}getRawActions(){const e=this.data.req;switch(e.variantName){case"action":return[e.value];case"action[]":return e.value;case"identity":if(this.version===2){const t=e.value;let n="0101000000000000000200000000000000",i=[iS];t.permission&&(n=Ut.encode({object:t}),i=[t.permission]);const s=Nr.from({account:"",name:"identity",authorization:i,data:n});return delete s.abi,[s]}else{let{scope:t,permission:n}=e.value;n||(n=iS);const i=Ut.encode({object:{scope:t,permission:n},type:T0}),s=Nr.from({account:"",name:"identity",authorization:[n],data:i});return delete s.abi,[s]}case"transaction":return e.value.actions;default:throw new Error("Invalid signing request data")}}getRawTransaction(){const e=this.data.req;switch(e.variantName){case"transaction":return hn.from({...e.value});case"action":case"action[]":case"identity":return hn.from({actions:this.getRawActions(),context_free_actions:[],transaction_extensions:[],expiration:"1970-01-01T00:00:00.000",ref_block_num:0,ref_block_prefix:0,max_cpu_usage_ms:0,max_net_usage_words:0,delay_sec:0});default:throw new Error("Invalid signing request data")}}isIdentity(){return this.data.req.variantName==="identity"}shouldBroadcast(){return this.isIdentity()?!1:this.data.flags.broadcast}getIdentity(){if(!this.isIdentity())return null;const e=this.data.req.value;return e.permission&&!e.permission.actor.equals(gd)?e.permission.actor:null}getIdentityPermission(){if(!this.isIdentity())return null;const e=this.data.req.value;return e.permission&&!e.permission.permission.equals(t1)?e.permission.permission:null}getIdentityScope(){return!this.isIdentity()||this.version<=2?null:this.data.req.value.scope}getRawInfo(){const e={};for(const{key:t,value:n}of this.data.info)e[t]=n;return e}getRawInfoKey(e){const t=this.data.info.find(n=>n.key===e);if(t)return t.value}setRawInfoKey(e,t){let n=this.data.info.find(i=>i.key===e);n?n.value=nt.from(t):(n=Xh.from({key:e,value:t}),this.data.info.push(n))}setInfoKey(e,t,n){let i;typeof t=="string"&&!n?i=nt.from(t,"utf8"):i=Ut.encode({object:t,type:n}),this.setRawInfoKey(e,i)}getInfoKey(e,t){const n=this.getRawInfoKey(e);if(n)return t?Ut.decode({data:n,type:t}):n.utf8String}clone(){let e;this.signature&&(e=i0.from(JSON.parse(JSON.stringify(this.signature))));const n=this.constructor.storageType(this.version).from(JSON.parse(JSON.stringify(this.data)));return new Il(this.version,n,this.zlib,this.abiProvider,e)}toString(){return this.encode()}toJSON(){return this.encode()}}class gde{constructor(e,t,n,i,s){this.request=e,this.signer=t,this.transaction=n,this.resolvedTransaction=i,this.chainId=s}static async fromPayload(e,t={}){const n=Il.from(e.req,t),i=await n.fetchAbis();return n.resolve(i,{actor:e.sa,permission:e.sp},{ref_block_num:e.rbn,ref_block_prefix:e.rid,expiration:e.ex,chainId:e.cid||n.getChainId()})}get serializedTransaction(){return Ut.encode({object:this.transaction}).array}get signingDigest(){return this.transaction.signingDigest(this.chainId)}get signingData(){return this.transaction.signingData(this.chainId)}getCallback(e,t){const{callback:n,flags:i}=this.request.data;if(!n||n.length===0)return null;if(!e||e.length===0)throw new Error("Must have at least one signature to resolve callback");const s=e.map(c=>d6.from(c)),a={sig:String(s[0]),tx:String(this.transaction.id),rbn:String(this.transaction.ref_block_num),rid:String(this.transaction.ref_block_prefix),ex:String(this.transaction.expiration),req:this.request.encode(),sa:String(this.signer.actor),sp:String(this.signer.permission),cid:String(this.chainId)};for(const[c,u]of s.slice(1).entries())a[`sig${c}`]=String(u);t&&(a.bn=String(mr.from(t)));const o=n.replace(/({{([a-z0-9]+)}})/g,(c,u,f)=>a[f]||"");return{background:i.background,payload:a,url:o}}getIdentityProof(e){if(!this.request.isIdentity())throw new Error("Not a identity request");return N0.from({chainId:this.chainId,scope:this.request.getIdentityScope(),expiration:this.transaction.expiration,signer:this.signer,signature:e})}}function vde(r,e){if(nt.isBytes(r.data)||r.data.constructor.abiName!==void 0)return Nr.from(r);const t=e[String(qe.from(r.account))];if(!t)throw new Error(`Missing ABI for ${r.account}`);const n=Nr.from(r,t);return delete n.abi,n}function H7(r){const e=qe.from(r.account),t=qe.from(r.name);return e.rawValue.equals(0)&&t.equals("identity")}function rB(r){return!(r.expiration.equals(0)&&r.ref_block_num.equals(0)&&r.ref_block_prefix.equals(0))}function nB(r,e=60){const t=Af.from(r||new Date),n=mr.from(e);return Af.fromInteger(t.value.adding(n))}class xde{constructor(e){this.client=e,this.cache=new Map,this.pending=new Map}async getAbi(e){const t=String(e);let n=this.cache.get(t);if(!n){let i=this.pending.get(t);i||(i=this.client.v1.chain.get_raw_abi(e),this.pending.set(t,i));const s=await i;if(this.pending.delete(t),s.abi)n=Nt.from(s.abi),this.cache.set(t,n);else throw new Error(`ABI for ${t} could not be loaded.`)}return n}setAbi(e,t,n=!1){const i=String(e),s=Nt.from(t),a=this.cache.get(i);n&&a?this.cache.set(i,Nt.from({action_results:ud(a.action_results,s.action_results),types:ud(a.types,s.types,"new_type_name"),structs:ud(a.structs,s.structs),actions:ud(a.actions,s.actions),tables:ud(a.tables,s.tables),ricardian_clauses:ud(a.ricardian_clauses,s.ricardian_clauses,"id"),variants:ud(a.variants,s.variants),version:s.version})):this.cache.set(i,s)}}function ud(r,e,t="name"){return e.reduce((n,i)=>(n.some(s=>String(s[t])===String(i[t]))||n.push(i),n),r.slice())}function wde(r){return["primary","secondary","tertiary","fourth","fifth","sixth","seventh","eighth","ninth","tenth"][r]}function xl(r){if(r!=null)return st(r,Lh)||st(r,Rr)||st(r,t5)||st(r,kt)||st(r,S0)?r:typeof r=="number"?Rr.from(r):qe.from(r)}const Ede={json:!1,limit:1e3};class iW{constructor(e){this.endReached=!1,this.rowsCount=0,this.maxRows=Number.MAX_SAFE_INTEGER,this.abi=Nt.from(e.abi),this.client=e.client,this.params={...Ede,...e.params},e.maxRows&&(this.maxRows=e.maxRows);const t=this.abi.tables.find(n=>qe.from(n.name).equals(this.params.table));if(!t)throw new Error("Table not found");this.type=t.type}get nextkey(){return this.next_key}async*[Symbol.asyncIterator](){for(;;){const e=await this.next();for(const t of e)yield t;if(e.length===0||!this.next_key)return}}async reset(){this.next_key=void 0,this.endReached=!1,this.rowsCount=0}async all(){const e=[];for await(const t of this)e.push(t);return e}}class Ade extends iW{async next(e=Number.MAX_SAFE_INTEGER){if(this.endReached)return[];let t=this.params.lower_bound;this.next_key&&(t=this.next_key);const n=this.maxRows-this.rowsCount,i=Math.min(n,e,this.params.limit),s={...this.params,limit:i,lower_bound:xl(t),upper_bound:xl(this.params.upper_bound)},a=await this.client.v1.chain.get_table_rows(s),c=this.params.json===!1&&!s.type?a.rows.map(u=>Ut.decode({data:u,abi:this.abi,type:this.type})):a.rows;return this.next_key=a.next_key,this.rowsCount+=c.length,(!a.next_key||c.length===0||this.rowsCount===this.maxRows)&&(this.endReached=!0),c}}class _de extends iW{async next(e=Number.MAX_SAFE_INTEGER){if(this.endReached)return[];let t=this.params.lower_bound;this.next_key&&(t=this.next_key);const n=this.maxRows-this.rowsCount,i=Math.min(n,e,this.params.limit),s={code:this.params.code,table:this.params.table,limit:i,lower_bound:t?String(t):void 0,upper_bound:this.params.upper_bound?String(this.params.upper_bound):void 0},a=await this.client.v1.chain.get_table_by_scope(s),o=a.rows;return this.next_key=a.more,this.rowsCount+=o.length,(!a.more||o.length===0||this.rowsCount===this.maxRows)&&(this.endReached=!0),o}}class xI{constructor(e){this.debug=!1,this.defaultRowLimit=1e3,this.abi=Nt.from(e.abi),this.account=qe.from(e.account),this.name=qe.from(e.name),this.client=e.client,this.rowType=e.rowType,this.fieldToIndex=e.fieldToIndex;const t=this.abi.tables.find(n=>this.name.equals(n.name));if(!t)throw new Error(`Table ${this.name} not found in ABI`);this.tableABI=t,this.defaultScope=e.defaultScope,e.debug&&(this.debug=!0)}static from(e){return new xI(e)}query(e={}){const t={table:this.name,code:this.account,scope:e.scope!==void 0?String(e.scope):this.defaultScope||this.account,type:this.rowType,json:this.debug,index_position:e.index_position,key_type:e.key_type,lower_bound:xl(e.from),upper_bound:xl(e.to),limit:e.rowsPerAPIRequest||this.defaultRowLimit,reverse:e.reverse};if(e.index){const n=this.getFieldToIndex();if(!n[e.index])throw new Error(`Field ${e.index} is not listed in the ABI under key_names/key_types. Try using 'index_position' instead.`);t.index_position=n[e.index].index_position}return new Ade({abi:this.abi,client:this.client,maxRows:e.maxRows,params:t})}async get(e,t={}){const n={table:this.name,code:this.account,scope:t.scope!==void 0?String(t.scope):this.defaultScope||this.account,type:this.rowType,limit:1,lower_bound:xl(e),upper_bound:xl(e),index_position:t.index_position,key_type:t.key_type,json:this.debug,reverse:t.reverse};if(t.index){const a=this.getFieldToIndex();if(!a[t.index])throw new Error(`Field ${t.index} is not listed in the ABI under key_names/key_types. Try using 'index_position' instead.`);n.index_position=a[t.index].index_position}const{rows:i}=await this.client.v1.chain.get_table_rows(n);if(i.length===0)return;let[s]=i;return this.debug||(this.rowType||(s=Ut.decode({data:s,abi:this.abi,type:this.tableABI.type})),t.json&&(s=Ut.objectify(s))),s}first(e,t={}){return this.query({...t,maxRows:e})}async all(e={}){return this.query(e).all()}getFieldToIndex(){if(this.fieldToIndex)return this.fieldToIndex;const e={};for(let t=0;t<this.tableABI.key_names.length;t++)e[this.tableABI.key_names[t]]={type:this.tableABI.key_types[t],index_position:wde(t)};return e}scopes(e={}){const t={code:this.account,table:this.name,lower_bound:xl(e.from),upper_bound:xl(e.to),limit:e.rowsPerAPIRequest||this.defaultRowLimit,reverse:e.reverse};return new _de({abi:this.abi,client:this.client,maxRows:e.maxRows,params:t})}}let o5=class{constructor(e,t={}){if(this.debug=!1,!e.abi)throw new Error("Contract requires an ABI");if(this.abi=Nt.from(e.abi),!e.account)throw new Error("Contract requires an account name");if(this.account=qe.from(e.account),!e.client)throw new Error("Contract requires an APIClient");this.client=e.client,t.debug&&(this.debug=t.debug)}get tableNames(){return this.abi.tables.map(e=>String(e.name))}hasTable(e){return this.tableNames.includes(String(e))}table(e,t,n){if(!this.hasTable(e))throw new Error(`Contract (${this.account}) does not have a table named (${e})`);return xI.from({abi:this.abi,account:this.account,client:this.client,debug:this.debug,defaultScope:t,name:e,rowType:n})}get actionNames(){return this.abi.actions.map(e=>String(e.name))}hasAction(e){return this.actionNames.includes(String(e))}action(e,t,n){if(!this.hasAction(e))throw new Error(`Contract (${this.account}) does not have an action named (${e})`);let i=[iS];return n&&n.authorization&&(i=n.authorization.map(s=>ci.from(s))),Nr.from({account:this.account,name:e,authorization:i,data:t},this.abi)}async readonly(e,t){t||(t={});const n=this.action(e,t);n.authorization=[];const i=hn.from({ref_block_num:0,ref_block_prefix:0,expiration:0,actions:[n]}),a=(await this.client.v1.chain.send_read_only_transaction(i)).processed.action_traces[0].return_value_hex_data,o=this.abi.action_results.find(c=>qe.from(c.name).equals(e));if(!o)throw new Error(`Return type for ${e} not defined in the ABI.`);return Ut.decode({data:a,type:o.result_type,abi:this.abi})}actions(e,t){return e.map(n=>this.action(n.name,n.data,{authorization:n.authorization||(t==null?void 0:t.authorization)}))}ricardian(e){if(!this.hasAction(e))throw new Error(`Contract (${this.account}) does not have an action named (${e})`);const t=this.abi.actions.find(n=>qe.from(n.name).equals(e));if(!t||!t.ricardian_contract)throw new Error(`Contract (${this.account}) action named (${e}) does not have a defined ricardian contract`);return t.ricardian_contract}};const Sde={};class Mde{constructor(e,t=Sde){if(this.debug=!1,e.client)this.client=e.client;else throw new Error("A `client` must be passed when initializing the ContractKit.");t.abiCache?this.abiCache=t.abiCache:this.abiCache=new xde(this.client),t.abis&&t.abis.forEach(({name:n,abi:i})=>this.abiCache.setAbi(qe.from(n),Nt.from(i))),t.debug&&(this.debug=t.debug)}async load(e){const t=qe.from(e),n=await this.abiCache.getAbi(t);return new o5({abi:Nt.from(n),account:t,client:this.client},{debug:this.debug})}}var sS={exports:{}};(function(r,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ht<"u"&&Ht,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(a){var o=typeof s<"u"&&s||typeof self<"u"&&self||typeof Ht<"u"&&Ht||{},c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function u(w){return w&&DataView.prototype.isPrototypeOf(w)}if(c.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(w){return w&&f.indexOf(Object.prototype.toString.call(w))>-1};function d(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function h(w){return typeof w!="string"&&(w=String(w)),w}function y(w){var P={next:function(){var k=w.shift();return{done:k===void 0,value:k}}};return c.iterable&&(P[Symbol.iterator]=function(){return P}),P}function p(w){this.map={},w instanceof p?w.forEach(function(P,k){this.append(k,P)},this):Array.isArray(w)?w.forEach(function(P){if(P.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+P.length);this.append(P[0],P[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(P){this.append(P,w[P])},this)}p.prototype.append=function(w,P){w=d(w),P=h(P);var k=this.map[w];this.map[w]=k?k+", "+P:P},p.prototype.delete=function(w){delete this.map[d(w)]},p.prototype.get=function(w){return w=d(w),this.has(w)?this.map[w]:null},p.prototype.has=function(w){return this.map.hasOwnProperty(d(w))},p.prototype.set=function(w,P){this.map[d(w)]=h(P)},p.prototype.forEach=function(w,P){for(var k in this.map)this.map.hasOwnProperty(k)&&w.call(P,this.map[k],k,this)},p.prototype.keys=function(){var w=[];return this.forEach(function(P,k){w.push(k)}),y(w)},p.prototype.values=function(){var w=[];return this.forEach(function(P){w.push(P)}),y(w)},p.prototype.entries=function(){var w=[];return this.forEach(function(P,k){w.push([k,P])}),y(w)},c.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function g(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function m(w){return new Promise(function(P,k){w.onload=function(){P(w.result)},w.onerror=function(){k(w.error)}})}function v(w){var P=new FileReader,k=m(P);return P.readAsArrayBuffer(w),k}function b(w){var P=new FileReader,k=m(P),D=/charset=([A-Za-z0-9_-]+)/.exec(w.type),T=D?D[1]:"utf-8";return P.readAsText(w,T),k}function _(w){for(var P=new Uint8Array(w),k=new Array(P.length),D=0;D<P.length;D++)k[D]=String.fromCharCode(P[D]);return k.join("")}function C(w){if(w.slice)return w.slice(0);var P=new Uint8Array(w.byteLength);return P.set(new Uint8Array(w)),P.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:c.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:c.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():c.arrayBuffer&&c.blob&&u(w)?(this._bodyArrayBuffer=C(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||l(w))?this._bodyArrayBuffer=C(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var w=g(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=g(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(v);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=g(this);if(w)return w;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function I(w){var P=w.toUpperCase();return x.indexOf(P)>-1?P:w}function $(w,P){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');P=P||{};var k=P.body;if(w instanceof $){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,P.headers||(this.headers=new p(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!k&&w._bodyInit!=null&&(k=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=P.credentials||this.credentials||"same-origin",(P.headers||!this.headers)&&(this.headers=new p(P.headers)),this.method=I(P.method||this.method||"GET"),this.mode=P.mode||this.mode||null,this.signal=P.signal||this.signal||function(){if("AbortController"in o){var M=new AbortController;return M.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&k)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(k),(this.method==="GET"||this.method==="HEAD")&&(P.cache==="no-store"||P.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var T=/\?/;this.url+=(T.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function j(w){var P=new FormData;return w.trim().split("&").forEach(function(k){if(k){var D=k.split("="),T=D.shift().replace(/\+/g," "),M=D.join("=").replace(/\+/g," ");P.append(decodeURIComponent(T),decodeURIComponent(M))}}),P}function O(w){var P=new p,k=w.replace(/\r?\n[\t ]+/g," ");return k.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var T=D.split(":"),M=T.shift().trim();if(M){var L=T.join(":").trim();try{P.append(M,L)}catch(K){console.warn("Response "+K.message)}}}),P}N.call($.prototype);function E(w,P){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(P||(P={}),this.type="default",this.status=P.status===void 0?200:P.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=P.statusText===void 0?"":""+P.statusText,this.headers=new p(P.headers),this.url=P.url||"",this._initBody(w)}N.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},E.error=function(){var w=new E(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var S=[301,302,303,307,308];E.redirect=function(w,P){if(S.indexOf(P)===-1)throw new RangeError("Invalid status code");return new E(null,{status:P,headers:{location:w}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(P,k){this.message=P,this.name=k;var D=Error(P);this.stack=D.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function A(w,P){return new Promise(function(k,D){var T=new $(w,P);if(T.signal&&T.signal.aborted)return D(new a.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function L(){M.abort()}M.onload=function(){var re={statusText:M.statusText,headers:O(M.getAllResponseHeaders()||"")};T.url.indexOf("file://")===0&&(M.status<200||M.status>599)?re.status=200:re.status=M.status,re.url="responseURL"in M?M.responseURL:re.headers.get("X-Request-URL");var ne="response"in M?M.response:M.responseText;setTimeout(function(){k(new E(ne,re))},0)},M.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){D(new a.DOMException("Aborted","AbortError"))},0)};function K(re){try{return re===""&&o.location.href?o.location.href:re}catch{return re}}if(M.open(T.method,K(T.url),!0),T.credentials==="include"?M.withCredentials=!0:T.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(c.blob?M.responseType="blob":c.arrayBuffer&&(M.responseType="arraybuffer")),P&&typeof P.headers=="object"&&!(P.headers instanceof p||o.Headers&&P.headers instanceof o.Headers)){var Y=[];Object.getOwnPropertyNames(P.headers).forEach(function(re){Y.push(d(re)),M.setRequestHeader(re,h(P.headers[re]))}),T.headers.forEach(function(re,ne){Y.indexOf(ne)===-1&&M.setRequestHeader(ne,re)})}else T.headers.forEach(function(re,ne){M.setRequestHeader(ne,re)});T.signal&&(T.signal.addEventListener("abort",L),M.onreadystatechange=function(){M.readyState===4&&T.signal.removeEventListener("abort",L)}),M.send(typeof T._bodyInit>"u"?null:T._bodyInit)})}return A.polyfill=!0,o.fetch||(o.fetch=A,o.Headers=p,o.Request=$,o.Response=E),a.Headers=p,a.Request=$,a.Response=E,a.fetch=A,a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=t.fetch?t:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(sS,sS.exports);var Pde=sS.exports;const sW=so(Pde);/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var A1=9e15,z0=1e9,aS="0123456789abcdef",gx="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",vx="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",oS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-A1,maxE:A1,crypto:!1},aW,sf,ut=!0,m4="[DecimalError] ",O0=m4+"Invalid argument: ",oW=m4+"Precision limit exceeded",cW=m4+"crypto unavailable",uW="[object Decimal]",Fi=Math.floor,bn=Math.pow,Tde=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Cde=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Ide=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,fW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ho=1e7,at=7,Rde=9007199254740991,Nde=gx.length-1,cS=vx.length-1,Ae={toStringTag:uW};Ae.absoluteValue=Ae.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),it(r)};Ae.ceil=function(){return it(new this.constructor(this),this.e+1,2)};Ae.clampedTo=Ae.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(O0+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};Ae.comparedTo=Ae.cmp=function(r){var e,t,n,i,s=this,a=s.d,o=(r=new s.constructor(r)).d,c=s.s,u=r.s;if(!a||!o)return!c||!u?NaN:c!==u?c:a===o?0:!a^c<0?1:-1;if(!a[0]||!o[0])return a[0]?c:o[0]?-u:0;if(c!==u)return c;if(s.e!==r.e)return s.e>r.e^c<0?1:-1;for(n=a.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(a[e]!==o[e])return a[e]>o[e]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};Ae.cosine=Ae.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+at,n.rounding=1,t=Ode(n,yW(n,t)),n.precision=r,n.rounding=e,it(sf==2||sf==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};Ae.cubeRoot=Ae.cbrt=function(){var r,e,t,n,i,s,a,o,c,u,f=this,l=f.constructor;if(!f.isFinite()||f.isZero())return new l(f);for(ut=!1,s=f.s*bn(f.s*f,1/3),!s||Math.abs(s)==1/0?(t=ai(f.d),r=f.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=bn(t,1/3),r=Fi((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new l(t),n.s=f.s):n=new l(s.toString()),a=(r=l.precision)+3;;)if(o=n,c=o.times(o).times(o),u=c.plus(f),n=ir(u.plus(f).times(o),u.plus(c),a+2,1),ai(o.d).slice(0,a)===(t=ai(n.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(it(o,r+1,0),o.times(o).times(o).eq(f))){n=o;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(it(n,r+1,1),e=!n.times(n).times(n).eq(f));break}return ut=!0,it(n,r,l.rounding,e)};Ae.decimalPlaces=Ae.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-Fi(this.e/at))*at,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};Ae.dividedBy=Ae.div=function(r){return ir(this,new this.constructor(r))};Ae.dividedToIntegerBy=Ae.divToInt=function(r){var e=this,t=e.constructor;return it(ir(e,new t(r),0,1,1),t.precision,t.rounding)};Ae.equals=Ae.eq=function(r){return this.cmp(r)===0};Ae.floor=function(){return it(new this.constructor(this),this.e+1,3)};Ae.greaterThan=Ae.gt=function(r){return this.cmp(r)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(r){var e=this.cmp(r);return e==1||e===0};Ae.hyperbolicCosine=Ae.cosh=function(){var r,e,t,n,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;t=a.precision,n=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/g4(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=_m(a,1,s.times(e),new a(1),!0);for(var c,u=r,f=new a(8);u--;)c=s.times(s),s=o.minus(c.times(f.minus(c.times(f))));return it(s,a.precision=t,a.rounding=n,!0)};Ae.hyperbolicSine=Ae.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=_m(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/g4(5,r)),i=_m(s,2,i,i,!0);for(var a,o=new s(5),c=new s(16),u=new s(20);r--;)a=i.times(i),i=i.times(o.plus(a.times(c.times(a).plus(u))))}return s.precision=e,s.rounding=t,it(i,e,t,!0)};Ae.hyperbolicTangent=Ae.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,ir(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};Ae.inverseCosine=Ae.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Dc(e,n,i):new e(0):new e(NaN):r.isZero()?Dc(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};Ae.inverseHyperbolicCosine=Ae.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,ut=!1,t=t.times(t).minus(1).sqrt().plus(t),ut=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};Ae.inverseHyperbolicSine=Ae.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,ut=!1,t=t.times(t).plus(1).sqrt().plus(t),ut=!0,n.precision=r,n.rounding=e,t.ln())};Ae.inverseHyperbolicTangent=Ae.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?it(new s(i),r,e,!0):(s.precision=t=n-i.e,i=ir(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};Ae.inverseSine=Ae.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Dc(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};Ae.inverseTangent=Ae.atan=function(){var r,e,t,n,i,s,a,o,c,u=this,f=u.constructor,l=f.precision,d=f.rounding;if(u.isFinite()){if(u.isZero())return new f(u);if(u.abs().eq(1)&&l+4<=cS)return a=Dc(f,l+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new f(NaN);if(l+4<=cS)return a=Dc(f,l+4,d).times(.5),a.s=u.s,a}for(f.precision=o=l+10,f.rounding=1,t=Math.min(28,o/at+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(ut=!1,e=Math.ceil(o/at),n=1,c=u.times(u),a=new f(u),i=u;r!==-1;)if(i=i.times(c),s=a.minus(i.div(n+=2)),i=i.times(c),a=s.plus(i.div(n+=2)),a.d[e]!==void 0)for(r=e;a.d[r]===s.d[r]&&r--;);return t&&(a=a.times(2<<t-1)),ut=!0,it(a,f.precision=l,f.rounding=d,!0)};Ae.isFinite=function(){return!!this.d};Ae.isInteger=Ae.isInt=function(){return!!this.d&&Fi(this.e/at)>this.d.length-2};Ae.isNaN=function(){return!this.s};Ae.isNegative=Ae.isNeg=function(){return this.s<0};Ae.isPositive=Ae.isPos=function(){return this.s>0};Ae.isZero=function(){return!!this.d&&this.d[0]===0};Ae.lessThan=Ae.lt=function(r){return this.cmp(r)<0};Ae.lessThanOrEqualTo=Ae.lte=function(r){return this.cmp(r)<1};Ae.logarithm=Ae.log=function(r){var e,t,n,i,s,a,o,c,u=this,f=u.constructor,l=f.precision,d=f.rounding,h=5;if(r==null)r=new f(10),e=!0;else{if(r=new f(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new f(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new f(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(ut=!1,o=l+h,a=s0(u,o),n=e?xx(f,o+10):s0(r,o),c=ir(a,n,o,1),Zg(c.d,i=l,d))do if(o+=10,a=s0(u,o),n=e?xx(f,o+10):s0(r,o),c=ir(a,n,o,1),!s){+ai(c.d).slice(i+1,i+15)+1==1e14&&(c=it(c,l+1,0));break}while(Zg(c.d,i+=10,d));return ut=!0,it(c,l,d)};Ae.minus=Ae.sub=function(r){var e,t,n,i,s,a,o,c,u,f,l,d,h=this,y=h.constructor;if(r=new y(r),!h.d||!r.d)return!h.s||!r.s?r=new y(NaN):h.d?r.s=-r.s:r=new y(r.d||h.s!==r.s?h:NaN),r;if(h.s!=r.s)return r.s=-r.s,h.plus(r);if(u=h.d,d=r.d,o=y.precision,c=y.rounding,!u[0]||!d[0]){if(d[0])r.s=-r.s;else if(u[0])r=new y(h);else return new y(c===3?-0:0);return ut?it(r,o,c):r}if(t=Fi(r.e/at),f=Fi(h.e/at),u=u.slice(),s=f-t,s){for(l=s<0,l?(e=u,s=-s,a=d.length):(e=d,t=f,a=u.length),n=Math.max(Math.ceil(o/at),a)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=u.length,a=d.length,l=n<a,l&&(a=n),n=0;n<a;n++)if(u[n]!=d[n]){l=u[n]<d[n];break}s=0}for(l&&(e=u,u=d,d=e,r.s=-r.s),a=u.length,n=d.length-a;n>0;--n)u[a++]=0;for(n=d.length;n>s;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Ho-1;--u[i],u[n]+=Ho}u[n]-=d[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=b4(u,t),ut?it(r,o,c):r):new y(c===3?-0:0)};Ae.modulo=Ae.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?it(new n(t),n.precision,n.rounding):(ut=!1,n.modulo==9?(e=ir(t,r.abs(),0,3,1),e.s*=r.s):e=ir(t,r,0,n.modulo,1),e=e.times(r),ut=!0,t.minus(e))};Ae.naturalExponential=Ae.exp=function(){return uS(this)};Ae.naturalLogarithm=Ae.ln=function(){return s0(this)};Ae.negated=Ae.neg=function(){var r=new this.constructor(this);return r.s=-r.s,it(r)};Ae.plus=Ae.add=function(r){var e,t,n,i,s,a,o,c,u,f,l=this,d=l.constructor;if(r=new d(r),!l.d||!r.d)return!l.s||!r.s?r=new d(NaN):l.d||(r=new d(r.d||l.s===r.s?l:NaN)),r;if(l.s!=r.s)return r.s=-r.s,l.minus(r);if(u=l.d,f=r.d,o=d.precision,c=d.rounding,!u[0]||!f[0])return f[0]||(r=new d(l)),ut?it(r,o,c):r;if(s=Fi(l.e/at),n=Fi(r.e/at),u=u.slice(),i=s-n,i){for(i<0?(t=u,i=-i,a=f.length):(t=f,n=s,a=u.length),s=Math.ceil(o/at),a=s>a?s+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=f.length,a-i<0&&(i=a,t=f,f=u,u=t),e=0;i;)e=(u[--i]=u[i]+f[i]+e)/Ho|0,u[i]%=Ho;for(e&&(u.unshift(e),++n),a=u.length;u[--a]==0;)u.pop();return r.d=u,r.e=b4(u,n),ut?it(r,o,c):r};Ae.precision=Ae.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(O0+r);return t.d?(e=lW(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};Ae.round=function(){var r=this,e=r.constructor;return it(new e(r),r.e+1,e.rounding)};Ae.sine=Ae.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+at,n.rounding=1,t=Dde(n,yW(n,t)),n.precision=r,n.rounding=e,it(sf>2?t.neg():t,r,e,!0)):new n(NaN)};Ae.squareRoot=Ae.sqrt=function(){var r,e,t,n,i,s,a=this,o=a.d,c=a.e,u=a.s,f=a.constructor;if(u!==1||!o||!o[0])return new f(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(ut=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=ai(o),(e.length+c)%2==0&&(e+="0"),u=Math.sqrt(e),c=Fi((c+1)/2)-(c<0||c%2),u==1/0?e="5e"+c:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new f(e)):n=new f(u.toString()),t=(c=f.precision)+3;;)if(s=n,n=s.plus(ir(a,s,t+2,1)).times(.5),ai(s.d).slice(0,t)===(e=ai(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(it(s,c+1,0),s.times(s).eq(a))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(it(n,c+1,1),r=!n.times(n).eq(a));break}return ut=!0,it(n,c,f.rounding,r)};Ae.tangent=Ae.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=ir(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,it(sf==2||sf==4?t.neg():t,r,e,!0)):new n(NaN)};Ae.times=Ae.mul=function(r){var e,t,n,i,s,a,o,c,u,f=this,l=f.constructor,d=f.d,h=(r=new l(r)).d;if(r.s*=f.s,!d||!d[0]||!h||!h[0])return new l(!r.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?r.s/0:r.s*0);for(t=Fi(f.e/at)+Fi(r.e/at),c=d.length,u=h.length,c<u&&(s=d,d=h,h=s,a=c,c=u,u=a),s=[],a=c+u,n=a;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=c+n;i>n;)o=s[i]+h[n]*d[i-n-1]+e,s[i--]=o%Ho|0,e=o/Ho|0;s[i]=(s[i]+e)%Ho|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=b4(s,t),ut?it(r,l.precision,l.rounding):r};Ae.toBinary=function(r,e){return wI(this,2,r,e)};Ae.toDecimalPlaces=Ae.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(ks(r,0,z0),e===void 0?e=n.rounding:ks(e,0,8),it(t,r+t.e+1,e))};Ae.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=nu(n,!0):(ks(r,0,z0),e===void 0?e=i.rounding:ks(e,0,8),n=it(new i(n),r+1,e),t=nu(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};Ae.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=nu(i):(ks(r,0,z0),e===void 0?e=s.rounding:ks(e,0,8),n=it(new s(i),r+i.e+1,e),t=nu(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};Ae.toFraction=function(r){var e,t,n,i,s,a,o,c,u,f,l,d,h=this,y=h.d,p=h.constructor;if(!y)return new p(h);if(u=t=new p(1),n=c=new p(0),e=new p(n),s=e.e=lW(y)-h.e-1,a=s%at,e.d[0]=bn(10,a<0?at+a:a),r==null)r=s>0?e:u;else{if(o=new p(r),!o.isInt()||o.lt(u))throw Error(O0+o);r=o.gt(e)?s>0?e:u:o}for(ut=!1,o=new p(ai(y)),f=p.precision,p.precision=s=y.length*at*2;l=ir(o,e,0,1,1),i=t.plus(l.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=c.plus(l.times(i)),c=i,i=e,e=o.minus(l.times(i)),o=i;return i=ir(r.minus(t),n,0,1,1),c=c.plus(i.times(u)),t=t.plus(i.times(n)),c.s=u.s=h.s,d=ir(u,n,s,1).minus(h).abs().cmp(ir(c,t,s,1).minus(h).abs())<1?[u,n]:[c,t],p.precision=f,ut=!0,d};Ae.toHexadecimal=Ae.toHex=function(r,e){return wI(this,16,r,e)};Ae.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:ks(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(ut=!1,t=ir(t,r,0,e,1).times(r),ut=!0,it(t)):(r.s=t.s,t=r),t};Ae.toNumber=function(){return+this};Ae.toOctal=function(r,e){return wI(this,8,r,e)};Ae.toPower=Ae.pow=function(r){var e,t,n,i,s,a,o=this,c=o.constructor,u=+(r=new c(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new c(bn(+o,u));if(o=new c(o),o.eq(1))return o;if(n=c.precision,s=c.rounding,r.eq(1))return it(o,n,s);if(e=Fi(r.e/at),e>=r.d.length-1&&(t=u<0?-u:u)<=Rde)return i=dW(c,o,t,n),r.s<0?new c(1).div(i):it(i,n,s);if(a=o.s,a<0){if(e<r.d.length-1)return new c(NaN);if(r.d[e]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return t=bn(+o,u),e=t==0||!isFinite(t)?Fi(u*(Math.log("0."+ai(o.d))/Math.LN10+o.e+1)):new c(t+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?a/0:0):(ut=!1,c.rounding=o.s=1,t=Math.min(12,(e+"").length),i=uS(r.times(s0(o,n+t)),n),i.d&&(i=it(i,n+5,1),Zg(i.d,n,s)&&(e=n+10,i=it(uS(r.times(s0(o,e+t)),e),e+5,1),+ai(i.d).slice(n+1,n+15)+1==1e14&&(i=it(i,n+1,0)))),i.s=a,ut=!0,c.rounding=s,it(i,n,s))};Ae.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=nu(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(ks(r,1,z0),e===void 0?e=i.rounding:ks(e,0,8),n=it(new i(n),r,e),t=nu(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};Ae.toSignificantDigits=Ae.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(ks(r,1,z0),e===void 0?e=n.rounding:ks(e,0,8)),it(new n(t),r,e)};Ae.toString=function(){var r=this,e=r.constructor,t=nu(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};Ae.truncated=Ae.trunc=function(){return it(new this.constructor(this),this.e+1,1)};Ae.valueOf=Ae.toJSON=function(){var r=this,e=r.constructor,t=nu(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function ai(r){var e,t,n,i=r.length-1,s="",a=r[0];if(i>0){for(s+=a,e=1;e<i;e++)n=r[e]+"",t=at-n.length,t&&(s+=wl(t)),s+=n;a=r[e],n=a+"",t=at-n.length,t&&(s+=wl(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function ks(r,e,t){if(r!==~~r||r<e||r>t)throw Error(O0+r)}function Zg(r,e,t,n){var i,s,a,o;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=at,i=0):(i=Math.ceil((e+1)/at),e%=at),s=bn(10,at-e),o=r[i]%s|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),a=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):a=(t<4&&o+1==s||t>3&&o+1==s/2)&&(r[i+1]/s/100|0)==bn(10,e-2)-1||(o==s/2||o==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),a=(n||t<4)&&o==9999||!n&&t>3&&o==4999):a=((n||t<4)&&o+1==s||!n&&t>3&&o+1==s/2)&&(r[i+1]/s/1e3|0)==bn(10,e-3)-1,a}function Hv(r,e,t){for(var n,i=[0],s,a=0,o=r.length;a<o;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=aS.indexOf(r.charAt(a++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function Ode(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/g4(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=_m(r,1,e.times(i),new r(1));for(var s=t;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return r.precision-=t,e}var ir=function(){function r(n,i,s){var a,o=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+o,n[c]=a%s|0,o=a/s|0;return o&&n.unshift(o),n}function e(n,i,s,a){var o,c;if(s!=a)c=s>a?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=i[o]){c=n[o]>i[o]?1:-1;break}return c}function t(n,i,s,a){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*a+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a,o,c){var u,f,l,d,h,y,p,g,m,v,b,_,C,N,x,I,$,j,O,E,S=n.constructor,A=n.s==i.s?1:-1,w=n.d,P=i.d;if(!w||!w[0]||!P||!P[0])return new S(!n.s||!i.s||(w?P&&w[0]==P[0]:!P)?NaN:w&&w[0]==0||!P?A*0:A/0);for(c?(h=1,f=n.e-i.e):(c=Ho,h=at,f=Fi(n.e/h)-Fi(i.e/h)),O=P.length,$=w.length,m=new S(A),v=m.d=[],l=0;P[l]==(w[l]||0);l++);if(P[l]>(w[l]||0)&&f--,s==null?(N=s=S.precision,a=S.rounding):o?N=s+(n.e-i.e)+1:N=s,N<0)v.push(1),y=!0;else{if(N=N/h+2|0,l=0,O==1){for(d=0,P=P[0],N++;(l<$||d)&&N--;l++)x=d*c+(w[l]||0),v[l]=x/P|0,d=x%P|0;y=d||l<$}else{for(d=c/(P[0]+1)|0,d>1&&(P=r(P,d,c),w=r(w,d,c),O=P.length,$=w.length),I=O,b=w.slice(0,O),_=b.length;_<O;)b[_++]=0;E=P.slice(),E.unshift(0),j=P[0],P[1]>=c/2&&++j;do d=0,u=e(P,b,O,_),u<0?(C=b[0],O!=_&&(C=C*c+(b[1]||0)),d=C/j|0,d>1?(d>=c&&(d=c-1),p=r(P,d,c),g=p.length,_=b.length,u=e(p,b,g,_),u==1&&(d--,t(p,O<g?E:P,g,c))):(d==0&&(u=d=1),p=P.slice()),g=p.length,g<_&&p.unshift(0),t(b,p,_,c),u==-1&&(_=b.length,u=e(P,b,O,_),u<1&&(d++,t(b,O<_?E:P,_,c))),_=b.length):u===0&&(d++,b=[0]),v[l++]=d,u&&b[0]?b[_++]=w[I]||0:(b=[w[I]],_=1);while((I++<$||b[0]!==void 0)&&N--);y=b[0]!==void 0}v[0]||v.shift()}if(h==1)m.e=f,aW=y;else{for(l=1,d=v[0];d>=10;d/=10)l++;m.e=l+f*h-1,it(m,o?s+m.e+1:s,a,y)}return m}}();function it(r,e,t,n){var i,s,a,o,c,u,f,l,d,h=r.constructor;e:if(e!=null){if(l=r.d,!l)return r;for(i=1,o=l[0];o>=10;o/=10)i++;if(s=e-i,s<0)s+=at,a=e,f=l[d=0],c=f/bn(10,i-a-1)%10|0;else if(d=Math.ceil((s+1)/at),o=l.length,d>=o)if(n){for(;o++<=d;)l.push(0);f=c=0,i=1,s%=at,a=s-at+1}else break e;else{for(f=o=l[d],i=1;o>=10;o/=10)i++;s%=at,a=s-at+i,c=a<0?0:f/bn(10,i-a-1)%10|0}if(n=n||e<0||l[d+1]!==void 0||(a<0?f:f%bn(10,i-a-1)),u=t<4?(c||n)&&(t==0||t==(r.s<0?3:2)):c>5||c==5&&(t==4||n||t==6&&(s>0?a>0?f/bn(10,i-a):0:l[d-1])%10&1||t==(r.s<0?8:7)),e<1||!l[0])return l.length=0,u?(e-=r.e+1,l[0]=bn(10,(at-e%at)%at),r.e=-e||0):l[0]=r.e=0,r;if(s==0?(l.length=d,o=1,d--):(l.length=d+1,o=bn(10,at-s),l[d]=a>0?(f/bn(10,i-a)%bn(10,a)|0)*o:0),u)for(;;)if(d==0){for(s=1,a=l[0];a>=10;a/=10)s++;for(a=l[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(r.e++,l[0]==Ho&&(l[0]=1));break}else{if(l[d]+=o,l[d]!=Ho)break;l[d--]=0,o=1}for(s=l.length;l[--s]===0;)l.pop()}return ut&&(r.e>h.maxE?(r.d=null,r.e=NaN):r.e<h.minE&&(r.e=0,r.d=[0])),r}function nu(r,e,t){if(!r.isFinite())return pW(r);var n,i=r.e,s=ai(r.d),a=s.length;return e?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+wl(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+wl(-i-1)+s,t&&(n=t-a)>0&&(s+=wl(n))):i>=a?(s+=wl(i+1-a),t&&(n=t-i-1)>0&&(s=s+"."+wl(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(s+="."),s+=wl(n))),s}function b4(r,e){var t=r[0];for(e*=at;t>=10;t/=10)e++;return e}function xx(r,e,t){if(e>Nde)throw ut=!0,t&&(r.precision=t),Error(oW);return it(new r(gx),e,1,!0)}function Dc(r,e,t){if(e>cS)throw Error(oW);return it(new r(vx),e,t,!0)}function lW(r){var e=r.length-1,t=e*at+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function wl(r){for(var e="";r--;)e+="0";return e}function dW(r,e,t,n){var i,s=new r(1),a=Math.ceil(n/at+4);for(ut=!1;;){if(t%2&&(s=s.times(e),sB(s.d,a)&&(i=!0)),t=Fi(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),sB(e.d,a)}return ut=!0,s}function iB(r){return r.d[r.d.length-1]&1}function hW(r,e,t){for(var n,i,s=new r(e[0]),a=0;++a<e.length;){if(i=new r(e[a]),!i.s){s=i;break}n=s.cmp(i),(n===t||n===0&&s.s===t)&&(s=i)}return s}function uS(r,e){var t,n,i,s,a,o,c,u=0,f=0,l=0,d=r.constructor,h=d.rounding,y=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(ut=!1,c=y):c=e,o=new d(.03125);r.e>-2;)r=r.times(o),l+=5;for(n=Math.log(bn(2,l))/Math.LN10*2+5|0,c+=n,t=s=a=new d(1),d.precision=c;;){if(s=it(s.times(r),c,1),t=t.times(++f),o=a.plus(ir(s,t,c,1)),ai(o.d).slice(0,c)===ai(a.d).slice(0,c)){for(i=l;i--;)a=it(a.times(a),c,1);if(e==null)if(u<3&&Zg(a.d,c-n,h,u))d.precision=c+=10,t=s=o=new d(1),f=0,u++;else return it(a,d.precision=y,h,ut=!0);else return d.precision=y,a}a=o}}function s0(r,e){var t,n,i,s,a,o,c,u,f,l,d,h=1,y=10,p=r,g=p.d,m=p.constructor,v=m.rounding,b=m.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new m(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(e==null?(ut=!1,f=b):f=e,m.precision=f+=y,t=ai(g),n=t.charAt(0),Math.abs(s=p.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)p=p.times(r),t=ai(p.d),n=t.charAt(0),h++;s=p.e,n>1?(p=new m("0."+t),s++):p=new m(n+"."+t.slice(1))}else return u=xx(m,f+2,b).times(s+""),p=s0(new m(n+"."+t.slice(1)),f-y).plus(u),m.precision=b,e==null?it(p,b,v,ut=!0):p;for(l=p,c=a=p=ir(p.minus(1),p.plus(1),f,1),d=it(p.times(p),f,1),i=3;;){if(a=it(a.times(d),f,1),u=c.plus(ir(a,new m(i),f,1)),ai(u.d).slice(0,f)===ai(c.d).slice(0,f))if(c=c.times(2),s!==0&&(c=c.plus(xx(m,f+2,b).times(s+""))),c=ir(c,new m(h),f,1),e==null)if(Zg(c.d,f-y,v,o))m.precision=f+=y,u=a=p=ir(l.minus(1),l.plus(1),f,1),d=it(p.times(p),f,1),i=o=1;else return it(c,m.precision=b,v,ut=!0);else return m.precision=b,c;c=u,i+=2}}function pW(r){return String(r.s*r.s/0)}function Wv(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%at,t<0&&(n+=at),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=at;n<i;)r.d.push(+e.slice(n,n+=at));e=e.slice(n),n=at-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),ut&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function kde(r,e){var t,n,i,s,a,o,c,u,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),fW.test(e))return Wv(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(Cde.test(e))t=16,e=e.toLowerCase();else if(Tde.test(e))t=2;else if(Ide.test(e))t=8;else throw Error(O0+e);for(s=e.search(/p/i),s>0?(c=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,n=r.constructor,a&&(e=e.replace(".",""),o=e.length,s=o-s,i=dW(n,new n(t),s,s*2)),u=Hv(e,t,Ho),f=u.length-1,s=f;u[s]===0;--s)u.pop();return s<0?new n(r.s*0):(r.e=b4(u,f),r.d=u,ut=!1,a&&(r=ir(r,i,o*4)),c&&(r=r.times(Math.abs(c)<54?bn(2,c):vp.pow(2,c))),ut=!0,r)}function Dde(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:_m(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/g4(5,t)),e=_m(r,2,e,e);for(var i,s=new r(5),a=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(o))));return e}function _m(r,e,t,n,i){var s,a,o,c,u=r.precision,f=Math.ceil(u/at);for(ut=!1,c=t.times(t),o=new r(n);;){if(a=ir(o.times(c),new r(e++*e++),u,1),o=i?n.plus(a):n.minus(a),n=ir(a.times(c),new r(e++*e++),u,1),a=o.plus(n),a.d[f]!==void 0){for(s=f;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=n,n=a,a=s}return ut=!0,a.d.length=f+1,a}function g4(r,e){for(var t=r;--e;)t*=r;return t}function yW(r,e){var t,n=e.s<0,i=Dc(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return sf=n?4:1,e;if(t=e.divToInt(i),t.isZero())sf=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return sf=iB(t)?n?2:3:n?4:1,e;sf=iB(t)?n?1:4:n?3:2}return e.minus(i).abs()}function wI(r,e,t,n){var i,s,a,o,c,u,f,l,d,h=r.constructor,y=t!==void 0;if(y?(ks(t,1,z0),n===void 0?n=h.rounding:ks(n,0,8)):(t=h.precision,n=h.rounding),!r.isFinite())f=pW(r);else{for(f=nu(r),a=f.indexOf("."),y?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(f=f.replace(".",""),d=new h(1),d.e=f.length-a,d.d=Hv(nu(d),10,i),d.e=d.d.length),l=Hv(f,10,i),s=c=l.length;l[--c]==0;)l.pop();if(!l[0])f=y?"0p+0":"0";else{if(a<0?s--:(r=new h(r),r.d=l,r.e=s,r=ir(r,d,t,n,0,i),l=r.d,s=r.e,u=aW),a=l[t],o=i/2,u=u||l[t+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(r.s<0?3:2)):a>o||a===o&&(n===4||u||n===6&&l[t-1]&1||n===(r.s<0?8:7)),l.length=t,u)for(;++l[--t]>i-1;)l[t]=0,t||(++s,l.unshift(1));for(c=l.length;!l[c-1];--c);for(a=0,f="";a<c;a++)f+=aS.charAt(l[a]);if(y){if(c>1)if(e==16||e==8){for(a=e==16?4:3,--c;c%a;c++)f+="0";for(l=Hv(f,i,e),c=l.length;!l[c-1];--c);for(a=1,f="1.";a<c;a++)f+=aS.charAt(l[a])}else f=f.charAt(0)+"."+f.slice(1);f=f+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)f="0"+f;f="0."+f}else if(++s>c)for(s-=c;s--;)f+="0";else s<c&&(f=f.slice(0,s)+"."+f.slice(s))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return r.s<0?"-"+f:f}function sB(r,e){if(r.length>e)return r.length=e,!0}function Bde(r){return new this(r).abs()}function $de(r){return new this(r).acos()}function Lde(r){return new this(r).acosh()}function Ude(r,e){return new this(r).plus(e)}function Fde(r){return new this(r).asin()}function jde(r){return new this(r).asinh()}function qde(r){return new this(r).atan()}function Vde(r){return new this(r).atanh()}function zde(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Dc(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Dc(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Dc(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(ir(r,e,s,1)),e=Dc(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(ir(r,e,s,1)),t}function Hde(r){return new this(r).cbrt()}function Wde(r){return it(r=new this(r),r.e+1,2)}function Kde(r,e,t){return new this(r).clamp(e,t)}function Gde(r){if(!r||typeof r!="object")throw Error(m4+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,z0,"rounding",0,8,"toExpNeg",-A1,0,"toExpPos",0,A1,"maxE",0,A1,"minE",-A1,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=oS[t]),(n=r[t])!==void 0)if(Fi(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(O0+t+": "+n);if(t="crypto",i&&(this[t]=oS[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(cW);else this[t]=!1;else throw Error(O0+t+": "+n);return this}function Qde(r){return new this(r).cos()}function Zde(r){return new this(r).cosh()}function mW(r){var e,t,n;function i(s){var a,o,c,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,aB(s)){u.s=s.s,ut?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;ut?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Wv(u,s.toString())}if(c==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),fW.test(s)?Wv(u,s):kde(u,s);if(c==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,Wv(u,s.toString());throw Error(O0+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Gde,i.clone=mW,i.isDecimal=aB,i.abs=Bde,i.acos=$de,i.acosh=Lde,i.add=Ude,i.asin=Fde,i.asinh=jde,i.atan=qde,i.atanh=Vde,i.atan2=zde,i.cbrt=Hde,i.ceil=Wde,i.clamp=Kde,i.cos=Qde,i.cosh=Zde,i.div=Jde,i.exp=Yde,i.floor=Xde,i.hypot=ehe,i.ln=the,i.log=rhe,i.log10=ihe,i.log2=nhe,i.max=she,i.min=ahe,i.mod=ohe,i.mul=che,i.pow=uhe,i.random=fhe,i.round=lhe,i.sign=dhe,i.sin=hhe,i.sinh=phe,i.sqrt=yhe,i.sub=mhe,i.sum=bhe,i.tan=ghe,i.tanh=vhe,i.trunc=xhe,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function Jde(r,e){return new this(r).div(e)}function Yde(r){return new this(r).exp()}function Xde(r){return it(r=new this(r),r.e+1,3)}function ehe(){var r,e,t=new this(0);for(ut=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return ut=!0,new this(1/0);t=e}return ut=!0,t.sqrt()}function aB(r){return r instanceof vp||r&&r.toStringTag===uW||!1}function the(r){return new this(r).ln()}function rhe(r,e){return new this(r).log(e)}function nhe(r){return new this(r).log(2)}function ihe(r){return new this(r).log(10)}function she(){return hW(this,arguments,-1)}function ahe(){return hW(this,arguments,1)}function ohe(r,e){return new this(r).mod(e)}function che(r,e){return new this(r).mul(e)}function uhe(r,e){return new this(r).pow(e)}function fhe(r){var e,t,n,i,s=0,a=new this(1),o=[];if(r===void 0?r=this.precision:ks(r,1,z0),n=Math.ceil(r/at),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=n/4}else throw Error(cW);else for(;s<n;)o[s++]=Math.random()*1e7|0;for(n=o[--s],r%=at,n&&r&&(i=bn(10,at-r),o[s]=(n/i|0)*i);o[s]===0;s--)o.pop();if(s<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=at)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<at&&(t-=at-n)}return a.e=t,a.d=o,a}function lhe(r){return it(r=new this(r),r.e+1,this.rounding)}function dhe(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function hhe(r){return new this(r).sin()}function phe(r){return new this(r).sinh()}function yhe(r){return new this(r).sqrt()}function mhe(r,e){return new this(r).sub(e)}function bhe(){var r=0,e=arguments,t=new this(e[r]);for(ut=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return ut=!0,it(t,this.precision,this.rounding)}function ghe(r){return new this(r).tan()}function vhe(r){return new this(r).tanh()}function xhe(r){return it(r=new this(r),r.e+1,1)}Ae[Symbol.for("nodejs.util.inspect.custom")]=Ae.toString;Ae[Symbol.toStringTag]="Decimal";var vp=Ae.constructor=mW(oS);gx=new vp(gx);vx=new vp(vx);var _1;(function(r){r.Secp256r1="Secp256r1",r.Secp256k1="Secp256k1",r.Ed25519="Ed25519",r.X25519="X25519"})(_1||(_1={}));function whe(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function EI(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function Ehe(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var o=r.length,c=r.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,g=0,m=0,v=y.length;m!==v&&y[m]===0;)m++,p++;for(var b=(v-m)*f+1>>>0,_=new Uint8Array(b);m!==v;){for(var C=y[m],N=0,x=b-1;(C!==0||N<g)&&x!==-1;x--,N++)C+=256*_[x]>>>0,_[x]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=N,m++}for(var I=b-g;I!==b&&_[I]===0;)I++;for(var $=c.repeat(p);I<b;++I)$+=r.charAt(_[I]);return $}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var g=0,m=0;y[p]===c;)g++,p++;for(var v=(y.length-p)*u+1>>>0,b=new Uint8Array(v);y[p];){var _=t[y.charCodeAt(p)];if(_===255)return;for(var C=0,N=v-1;(_!==0||C<m)&&N!==-1;N--,C++)_+=o*b[N]>>>0,b[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");m=C,p++}if(y[p]!==" "){for(var x=v-m;x!==v&&b[x]===0;)x++;for(var I=new Uint8Array(g+(v-x)),$=g;x!==v;)I[$++]=b[x++];return I}}}function h(y){var p=d(y);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:h}}var Ahe=Ehe,_he=Ahe;let She=class{constructor(e,t,n){H(this,"name");H(this,"prefix");H(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Mhe=class{constructor(e,t,n){H(this,"name");H(this,"prefix");H(this,"baseDecode");H(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return bW(this,e)}},Phe=class{constructor(e){H(this,"decoders");this.decoders=e}or(e){return bW(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function bW(r,e){return new Phe({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let The=class{constructor(e,t,n,i){H(this,"name");H(this,"prefix");H(this,"baseEncode");H(this,"baseDecode");H(this,"encoder");H(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new She(e,t,n),this.decoder=new Mhe(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function gW({name:r,prefix:e,encode:t,decode:n}){return new The(r,e,t,n)}function v4({name:r,prefix:e,alphabet:t}){const{encode:n,decode:i}=_he(t,r);return gW({prefix:e,name:r,encode:n,decode:s=>EI(i(s))})}function Che(r,e,t,n){let i=r.length;for(;r[i-1]==="=";)--i;const s=new Uint8Array(i*t/8|0);let a=0,o=0,c=0;for(let u=0;u<i;++u){const f=e[r[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);o=o<<t|f,a+=t,a>=8&&(a-=8,s[c++]=255&o>>a)}if(a>=t||255&o<<8-a)throw new SyntaxError("Unexpected end of data");return s}function Ihe(r,e,t){const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a!==0&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s}function Rhe(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function Of({name:r,prefix:e,bitsPerChar:t,alphabet:n}){const i=Rhe(n);return gW({prefix:e,name:r,encode(s){return Ihe(s,n,t)},decode(s){return Che(s,i,t,r)}})}const Kv=Of({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});Of({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});Of({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});Of({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});Of({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});Of({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});Of({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});Of({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});Of({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const W7=v4({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});v4({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const El=v4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});v4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Nhe=vW,oB=128,Ohe=-128,khe=Math.pow(2,31);function vW(r,e,t){e=e||[],t=t||0;for(var n=t;r>=khe;)e[t++]=r&255|oB,r/=128;for(;r&Ohe;)e[t++]=r&255|oB,r>>>=7;return e[t]=r|0,vW.bytes=t-n+1,e}var Dhe=fS,Bhe=128,cB=127;function fS(r,n){var t=0,n=n||0,i=0,s=n,a,o=r.length;do{if(s>=o)throw fS.bytes=0,new RangeError("Could not decode varint");a=r[s++],t+=i<28?(a&cB)<<i:(a&cB)*Math.pow(2,i),i+=7}while(a>=Bhe);return fS.bytes=s-n,t}var $he=Math.pow(2,7),Lhe=Math.pow(2,14),Uhe=Math.pow(2,21),Fhe=Math.pow(2,28),jhe=Math.pow(2,35),qhe=Math.pow(2,42),Vhe=Math.pow(2,49),zhe=Math.pow(2,56),Hhe=Math.pow(2,63),Whe=function(r){return r<$he?1:r<Lhe?2:r<Uhe?3:r<Fhe?4:r<jhe?5:r<qhe?6:r<Vhe?7:r<zhe?8:r<Hhe?9:10},Khe={encode:Nhe,decode:Dhe,encodingLength:Whe},wx=Khe;function lS(r,e=0){return[wx.decode(r,e),wx.decode.bytes]}function Ex(r,e,t=0){return wx.encode(r,e,t),e}function Ax(r){return wx.encodingLength(r)}function Ghe(r,e){const t=e.byteLength,n=Ax(r),i=n+Ax(t),s=new Uint8Array(i+t);return Ex(r,s,0),Ex(t,s,n),s.set(e,i),new AI(r,t,e,s)}function Qhe(r){const e=EI(r),[t,n]=lS(e),[i,s]=lS(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new AI(t,i,a,e)}function Zhe(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&whe(r.bytes,t.bytes)}}let AI=class{constructor(e,t,n,i){H(this,"code");H(this,"size");H(this,"digest");H(this,"bytes");this.code=e,this.size=t,this.digest=n,this.bytes=i}};function uB(r,e){const{bytes:t,version:n}=r;switch(n){case 0:return Yhe(t,dS(r),e??El.encoder);default:return Xhe(t,dS(r),e??Kv.encoder)}}const fB=new WeakMap;function dS(r){const e=fB.get(r);if(e==null){const t=new Map;return fB.set(r,t),t}return e}var XF;let D8=class Mi{constructor(e,t,n,i){H(this,"code");H(this,"version");H(this,"multihash");H(this,"bytes");H(this,"/");H(this,XF,"CID");this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Q6)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==epe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Mi.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=Ghe(e,t);return Mi.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Mi.equals(this,e)}static equals(e,t){const n=t;return n!=null&&e.code===n.code&&e.version===n.version&&Zhe(e.multihash,n.multihash)}toString(e){return uB(this,e)}toJSON(){return{"/":uB(this)}}link(){return this}[(XF=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof Mi)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:i,multihash:s,bytes:a}=t;return new Mi(n,i,s,a??lB(n,i,s.bytes))}else if(t[tpe]===!0){const{version:n,multihash:i,code:s}=t,a=Qhe(i);return Mi.create(n,s,a)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Q6)throw new Error(`Version 0 CID must use dag-pb (code: ${Q6}) block encoding`);return new Mi(e,t,n,n.bytes)}case 1:{const i=lB(e,t,n.bytes);return new Mi(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Mi.create(0,Q6,e)}static createV1(e,t){return Mi.create(1,e,t)}static decode(e){const[t,n]=Mi.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Mi.inspectBytes(e),n=t.size-t.multihashSize,i=EI(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=i.subarray(t.multihashSize-t.digestSize),a=new AI(t.multihashCode,t.digestSize,s,i);return[t.version===0?Mi.createV0(a):Mi.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[l,d]=lS(e.subarray(t));return t+=d,l};let i=n(),s=Q6;if(i===18?(i=0,t=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=t,o=n(),c=n(),u=t+c,f=u-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:f,size:u}}static parse(e,t){const[n,i]=Jhe(e,t),s=Mi.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return dS(s).set(n,e),s}};function Jhe(r,e){switch(r[0]){case"Q":{const t=e??El;return[El.prefix,t.decode(`${El.prefix}${r}`)]}case El.prefix:{const t=e??El;return[El.prefix,t.decode(r)]}case Kv.prefix:{const t=e??Kv;return[Kv.prefix,t.decode(r)]}case W7.prefix:{const t=e??W7;return[W7.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function Yhe(r,e,t){const{prefix:n}=t;if(n!==El.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(n);if(i==null){const s=t.encode(r).slice(1);return e.set(n,s),s}else return i}function Xhe(r,e,t){const{prefix:n}=t,i=e.get(n);if(i==null){const s=t.encode(r);return e.set(n,s),s}else return i}const Q6=112,epe=18;function lB(r,e,t){const n=Ax(r),i=n+Ax(e),s=new Uint8Array(i+t.byteLength);return Ex(r,s,0),Ex(e,s,n),s.set(t,i),s}const tpe=Symbol.for("@ipld/js-cid/CID");new TextDecoder;const xW=new TextEncoder,dB=2**32,rpe=2**31;function npe(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Vb(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){const n=xW.encode(r.Name);t-=n.length,e.set(n,t),t=Vb(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Vb(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function ipe(r){const e=ape(r),t=new Uint8Array(e);let n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Vb(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){const s=npe(r.Links[i],t.subarray(0,n));n-=s,n=Vb(t,n,s)-1,t[n]=18}return t}function spe(r){let e=0;if(r.Hash){const t=r.Hash.length;e+=1+t+K1(t)}if(typeof r.Name=="string"){const t=xW.encode(r.Name).length;e+=1+t+K1(t)}return typeof r.Tsize=="number"&&(e+=1+K1(r.Tsize)),e}function ape(r){let e=0;if(r.Data){const t=r.Data.length;e+=1+t+K1(t)}if(r.Links)for(const t of r.Links){const n=spe(t);e+=1+n+K1(n)}return e}function Vb(r,e,t){e-=K1(t);const n=e;for(;t>=rpe;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function K1(r){return r%2===0&&r++,Math.floor((ope(r)+6)/7)}function ope(r){let e=0;return r>=dB&&(r=Math.floor(r/dB),e=32),r>=65536&&(r>>>=16,e+=16),r>=256&&(r>>>=8,e+=8),e+cpe[r]}const cpe=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],upe=["Data","Links"],fpe=["Hash","Name","Tsize"],hS=new TextEncoder;function wW(r,e){if(r===e)return 0;const t=r.Name?hS.encode(r.Name):[],n=e.Name?hS.encode(e.Name):[];let i=t.length,s=n.length;for(let a=0,o=Math.min(i,s);a<o;++a)if(t[a]!==n[a]){i=t[a],s=n[a];break}return i<s?-1:s<i?1:0}function hB(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function lpe(r){if(typeof r.asCID=="object"){const t=D8.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Hash){let t=D8.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=D8.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=D8.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function dpe(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=hS.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(lpe),e.Links.sort(wW);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function hpe(r){if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form");if(!hB(r,upe))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<r.Links.length;e++){const t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hB(t,fpe))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&wW(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}const ppe=112;function ype(r){hpe(r);const e={};return r.Links&&(e.Links=r.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),ipe(e)}function mpe(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function _I(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}var bpe=EW,pB=128,gpe=-128,vpe=Math.pow(2,31);function EW(r,e,t){e=e||[],t=t||0;for(var n=t;r>=vpe;)e[t++]=r&255|pB,r/=128;for(;r&gpe;)e[t++]=r&255|pB,r>>>=7;return e[t]=r|0,EW.bytes=t-n+1,e}var xpe=pS,wpe=128,yB=127;function pS(r,n){var t=0,n=n||0,i=0,s=n,a,o=r.length;do{if(s>=o)throw pS.bytes=0,new RangeError("Could not decode varint");a=r[s++],t+=i<28?(a&yB)<<i:(a&yB)*Math.pow(2,i),i+=7}while(a>=wpe);return pS.bytes=s-n,t}var Epe=Math.pow(2,7),Ape=Math.pow(2,14),_pe=Math.pow(2,21),Spe=Math.pow(2,28),Mpe=Math.pow(2,35),Ppe=Math.pow(2,42),Tpe=Math.pow(2,49),Cpe=Math.pow(2,56),Ipe=Math.pow(2,63),Rpe=function(r){return r<Epe?1:r<Ape?2:r<_pe?3:r<Spe?4:r<Mpe?5:r<Ppe?6:r<Tpe?7:r<Cpe?8:r<Ipe?9:10},Npe={encode:bpe,decode:xpe,encodingLength:Rpe},_x=Npe;function yS(r,e=0){return[_x.decode(r,e),_x.decode.bytes]}function Sx(r,e,t=0){return _x.encode(r,e,t),e}function Mx(r){return _x.encodingLength(r)}function AW(r,e){const t=e.byteLength,n=Mx(r),i=n+Mx(t),s=new Uint8Array(i+t);return Sx(r,s,0),Sx(t,s,n),s.set(e,i),new SI(r,t,e,s)}function Ope(r){const e=_I(r),[t,n]=yS(e),[i,s]=yS(e.subarray(n)),a=e.subarray(n+s);if(a.byteLength!==i)throw new Error("Incorrect length");return new SI(t,i,a,e)}function kpe(r,e){if(r===e)return!0;{const t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&mpe(r.bytes,t.bytes)}}class SI{constructor(e,t,n,i){H(this,"code");H(this,"size");H(this,"digest");H(this,"bytes");this.code=e,this.size=t,this.digest=n,this.bytes=i}}function Dpe(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var o=r.length,c=r.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,g=0,m=0,v=y.length;m!==v&&y[m]===0;)m++,p++;for(var b=(v-m)*f+1>>>0,_=new Uint8Array(b);m!==v;){for(var C=y[m],N=0,x=b-1;(C!==0||N<g)&&x!==-1;x--,N++)C+=256*_[x]>>>0,_[x]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=N,m++}for(var I=b-g;I!==b&&_[I]===0;)I++;for(var $=c.repeat(p);I<b;++I)$+=r.charAt(_[I]);return $}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var g=0,m=0;y[p]===c;)g++,p++;for(var v=(y.length-p)*u+1>>>0,b=new Uint8Array(v);y[p];){var _=t[y.charCodeAt(p)];if(_===255)return;for(var C=0,N=v-1;(_!==0||C<m)&&N!==-1;N--,C++)_+=o*b[N]>>>0,b[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");m=C,p++}if(y[p]!==" "){for(var x=v-m;x!==v&&b[x]===0;)x++;for(var I=new Uint8Array(g+(v-x)),$=g;x!==v;)I[$++]=b[x++];return I}}}function h(y){var p=d(y);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:h}}var Bpe=Dpe,$pe=Bpe;let Lpe=class{constructor(e,t,n){H(this,"name");H(this,"prefix");H(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Upe=class{constructor(e,t,n){H(this,"name");H(this,"prefix");H(this,"baseDecode");H(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _W(this,e)}},Fpe=class{constructor(e){H(this,"decoders");this.decoders=e}or(e){return _W(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function _W(r,e){return new Fpe({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let jpe=class{constructor(e,t,n,i){H(this,"name");H(this,"prefix");H(this,"baseEncode");H(this,"baseDecode");H(this,"encoder");H(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Lpe(e,t,n),this.decoder=new Upe(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function SW({name:r,prefix:e,encode:t,decode:n}){return new jpe(r,e,t,n)}function x4({name:r,prefix:e,alphabet:t}){const{encode:n,decode:i}=$pe(t,r);return SW({prefix:e,name:r,encode:n,decode:s=>_I(i(s))})}function qpe(r,e,t,n){let i=r.length;for(;r[i-1]==="=";)--i;const s=new Uint8Array(i*t/8|0);let a=0,o=0,c=0;for(let u=0;u<i;++u){const f=e[r[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);o=o<<t|f,a+=t,a>=8&&(a-=8,s[c++]=255&o>>a)}if(a>=t||255&o<<8-a)throw new SyntaxError("Unexpected end of data");return s}function Vpe(r,e,t){const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a!==0&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s}function zpe(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function kf({name:r,prefix:e,bitsPerChar:t,alphabet:n}){const i=zpe(n);return SW({prefix:e,name:r,encode(s){return Vpe(s,n,t)},decode(s){return qpe(s,i,t,r)}})}const Gv=kf({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});kf({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});kf({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});kf({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});kf({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});kf({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});kf({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});kf({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});kf({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const K7=x4({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});x4({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const Al=x4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});x4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});function mB(r,e){const{bytes:t,version:n}=r;switch(n){case 0:return Wpe(t,mS(r),e??Al.encoder);default:return Kpe(t,mS(r),e??Gv.encoder)}}const bB=new WeakMap;function mS(r){const e=bB.get(r);if(e==null){const t=new Map;return bB.set(r,t),t}return e}var ej;class Xn{constructor(e,t,n,i){H(this,"code");H(this,"version");H(this,"multihash");H(this,"bytes");H(this,"/");H(this,ej,"CID");this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Z6)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Gpe)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Xn.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=AW(e,t);return Xn.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Xn.equals(this,e)}static equals(e,t){const n=t;return n!=null&&e.code===n.code&&e.version===n.version&&kpe(e.multihash,n.multihash)}toString(e){return mB(this,e)}toJSON(){return{"/":mB(this)}}link(){return this}[(ej=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const t=e;if(t instanceof Xn)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:i,multihash:s,bytes:a}=t;return new Xn(n,i,s,a??gB(n,i,s.bytes))}else if(t[Qpe]===!0){const{version:n,multihash:i,code:s}=t,a=Ope(i);return Xn.create(n,s,a)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==Z6)throw new Error(`Version 0 CID must use dag-pb (code: ${Z6}) block encoding`);return new Xn(e,t,n,n.bytes)}case 1:{const i=gB(e,t,n.bytes);return new Xn(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Xn.create(0,Z6,e)}static createV1(e,t){return Xn.create(1,e,t)}static decode(e){const[t,n]=Xn.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Xn.inspectBytes(e),n=t.size-t.multihashSize,i=_I(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=i.subarray(t.multihashSize-t.digestSize),a=new SI(t.multihashCode,t.digestSize,s,i);return[t.version===0?Xn.createV0(a):Xn.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[l,d]=yS(e.subarray(t));return t+=d,l};let i=n(),s=Z6;if(i===18?(i=0,t=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=t,o=n(),c=n(),u=t+c,f=u-a;return{version:i,codec:s,multihashCode:o,digestSize:c,multihashSize:f,size:u}}static parse(e,t){const[n,i]=Hpe(e,t),s=Xn.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return mS(s).set(n,e),s}}function Hpe(r,e){switch(r[0]){case"Q":{const t=e??Al;return[Al.prefix,t.decode(`${Al.prefix}${r}`)]}case Al.prefix:{const t=e??Al;return[Al.prefix,t.decode(r)]}case Gv.prefix:{const t=e??Gv;return[Gv.prefix,t.decode(r)]}case K7.prefix:{const t=e??K7;return[K7.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function Wpe(r,e,t){const{prefix:n}=t;if(n!==Al.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const i=e.get(n);if(i==null){const s=t.encode(r).slice(1);return e.set(n,s),s}else return i}function Kpe(r,e,t){const{prefix:n}=t,i=e.get(n);if(i==null){const s=t.encode(r);return e.set(n,s),s}else return i}const Z6=112,Gpe=18;function gB(r,e,t){const n=Mx(r),i=n+Mx(e),s=new Uint8Array(i+t.byteLength);return Sx(r,s,0),Sx(e,s,n),s.set(t,i),s}const Qpe=Symbol.for("@ipld/js-cid/CID"),k1=class k1 extends Error{constructor(t="Invalid type"){super(t);H(this,"name",k1.name);H(this,"code",k1.code)}};H(k1,"name","InvalidTypeError"),H(k1,"code","ERR_INVALID_TYPE");let Px=k1;const D1=class D1 extends Error{constructor(t="Invalid message"){super(t);H(this,"name",D1.name);H(this,"code",D1.code)}};H(D1,"name","InvalidUnixFSMessageError"),H(D1,"code","ERR_INVALID_MESSAGE");let bS=D1;const Zpe=Math.pow(2,7),Jpe=Math.pow(2,14),Ype=Math.pow(2,21),MW=Math.pow(2,28),PW=Math.pow(2,35),TW=Math.pow(2,42),CW=Math.pow(2,49),Gi=128,tl=127;function MI(r){if(r<Zpe)return 1;if(r<Jpe)return 2;if(r<Ype)return 3;if(r<MW)return 4;if(r<PW)return 5;if(r<TW)return 6;if(r<CW)return 7;if(Number.MAX_SAFE_INTEGER!=null&&r>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Xpe(r,e,t=0){switch(MI(r)){case 8:e[t++]=r&255|Gi,r/=128;case 7:e[t++]=r&255|Gi,r/=128;case 6:e[t++]=r&255|Gi,r/=128;case 5:e[t++]=r&255|Gi,r/=128;case 4:e[t++]=r&255|Gi,r>>>=7;case 3:e[t++]=r&255|Gi,r>>>=7;case 2:e[t++]=r&255|Gi,r>>>=7;case 1:{e[t++]=r&255,r>>>=7;break}default:throw new Error("unreachable")}return e}function e1e(r,e){let t=r[e],n=0;if(n+=t&tl,t<Gi||(t=r[e+1],n+=(t&tl)<<7,t<Gi)||(t=r[e+2],n+=(t&tl)<<14,t<Gi)||(t=r[e+3],n+=(t&tl)<<21,t<Gi)||(t=r[e+4],n+=(t&tl)*MW,t<Gi)||(t=r[e+5],n+=(t&tl)*PW,t<Gi)||(t=r[e+6],n+=(t&tl)*TW,t<Gi)||(t=r[e+7],n+=(t&tl)*CW,t<Gi))return n;throw new RangeError("Could not decode varint")}const PI=new Float32Array([-0]),a0=new Uint8Array(PI.buffer);function t1e(r,e,t){PI[0]=r,e[t]=a0[0],e[t+1]=a0[1],e[t+2]=a0[2],e[t+3]=a0[3]}function r1e(r,e){return a0[0]=r[e],a0[1]=r[e+1],a0[2]=r[e+2],a0[3]=r[e+3],PI[0]}const TI=new Float64Array([-0]),Ii=new Uint8Array(TI.buffer);function n1e(r,e,t){TI[0]=r,e[t]=Ii[0],e[t+1]=Ii[1],e[t+2]=Ii[2],e[t+3]=Ii[3],e[t+4]=Ii[4],e[t+5]=Ii[5],e[t+6]=Ii[6],e[t+7]=Ii[7]}function i1e(r,e){return Ii[0]=r[e],Ii[1]=r[e+1],Ii[2]=r[e+2],Ii[3]=r[e+3],Ii[4]=r[e+4],Ii[5]=r[e+5],Ii[6]=r[e+6],Ii[7]=r[e+7],TI[0]}const s1e=BigInt(Number.MAX_SAFE_INTEGER),a1e=BigInt(Number.MIN_SAFE_INTEGER);class Ni{constructor(e,t){H(this,"lo");H(this,"hi");this.lo=e|0,this.hi=t|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return _h;if(e<s1e&&e>a1e)return this.fromNumber(Number(e));const t=e<0n;t&&(e=-e);let n=e>>32n,i=e-(n<<32n);return t&&(n=~n|0n,i=~i|0n,++i>vB&&(i=0n,++n>vB&&(n=0n))),new Ni(Number(i),Number(n))}static fromNumber(e){if(e===0)return _h;const t=e<0;t&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ni(n,i)}static from(e){return typeof e=="number"?Ni.fromNumber(e):typeof e=="bigint"?Ni.fromBigInt(e):typeof e=="string"?Ni.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new Ni(e.low>>>0,e.high>>>0):_h}}const _h=new Ni(0,0);_h.toBigInt=function(){return 0n};_h.zzEncode=_h.zzDecode=function(){return this};_h.length=function(){return 1};const vB=4294967296n;function o1e(r){let e=0,t=0;for(let n=0;n<r.length;++n)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function c1e(r,e,t){if(t-e<1)return"";let i;const s=[];let a=0,o;for(;e<t;)o=r[e++],o<128?s[a++]=o:o>191&&o<224?s[a++]=(o&31)<<6|r[e++]&63:o>239&&o<365?(o=((o&7)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,s[a++]=55296+(o>>10),s[a++]=56320+(o&1023)):s[a++]=(o&15)<<12|(r[e++]&63)<<6|r[e++]&63,a>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i!=null?(a>0&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))}function IW(r,e,t){const n=t;let i,s;for(let a=0;a<r.length;++a)i=r.charCodeAt(a),i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&((s=r.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++a,e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128);return t-n}function yo(r,e){return RangeError(`index out of range: ${r.pos} + ${e??1} > ${r.len}`)}function B8(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}class u1e{constructor(e){H(this,"buf");H(this,"pos");H(this,"len");H(this,"_slice",Uint8Array.prototype.subarray);this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,yo(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw yo(this,4);return B8(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw yo(this,4);return B8(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw yo(this,4);const e=r1e(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw yo(this,4);const e=i1e(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw yo(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const e=this.bytes();return c1e(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw yo(this,e);this.pos+=e}else do if(this.pos>=this.len)throw yo(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new Ni(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw yo(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw yo(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw yo(this,8);const e=B8(this.buf,this.pos+=4),t=B8(this.buf,this.pos+=4);return new Ni(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=e1e(this.buf,this.pos);return this.pos+=MI(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function f1e(r){return new u1e(r instanceof Uint8Array?r:r.subarray())}function CI(r,e,t){const n=f1e(r);return e.decode(n,void 0,t)}function Tx(r=0){return new Uint8Array(r)}function l1e(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function d1e(r){return new TextEncoder().encode(r)}function h1e(r){return new TextDecoder().decode(r)}function p1e(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var o=r.length,c=r.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,g=0,m=0,v=y.length;m!==v&&y[m]===0;)m++,p++;for(var b=(v-m)*f+1>>>0,_=new Uint8Array(b);m!==v;){for(var C=y[m],N=0,x=b-1;(C!==0||N<g)&&x!==-1;x--,N++)C+=256*_[x]>>>0,_[x]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=N,m++}for(var I=b-g;I!==b&&_[I]===0;)I++;for(var $=c.repeat(p);I<b;++I)$+=r.charAt(_[I]);return $}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var g=0,m=0;y[p]===c;)g++,p++;for(var v=(y.length-p)*u+1>>>0,b=new Uint8Array(v);y[p];){var _=t[y.charCodeAt(p)];if(_===255)return;for(var C=0,N=v-1;(_!==0||C<m)&&N!==-1;N--,C++)_+=o*b[N]>>>0,b[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");m=C,p++}if(y[p]!==" "){for(var x=v-m;x!==v&&b[x]===0;)x++;for(var I=new Uint8Array(g+(v-x)),$=g;x!==v;)I[$++]=b[x++];return I}}}function h(y){var p=d(y);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:h}}var y1e=p1e,m1e=y1e;let b1e=class{constructor(e,t,n){H(this,"name");H(this,"prefix");H(this,"baseEncode");this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},g1e=class{constructor(e,t,n){H(this,"name");H(this,"prefix");H(this,"baseDecode");H(this,"prefixCodePoint");this.name=e,this.prefix=t;const i=t.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return RW(this,e)}},v1e=class{constructor(e){H(this,"decoders");this.decoders=e}or(e){return RW(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function RW(r,e){return new v1e({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}let x1e=class{constructor(e,t,n,i){H(this,"name");H(this,"prefix");H(this,"baseEncode");H(this,"baseDecode");H(this,"encoder");H(this,"decoder");this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new b1e(e,t,n),this.decoder=new g1e(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function w4({name:r,prefix:e,encode:t,decode:n}){return new x1e(r,e,t,n)}function c5({name:r,prefix:e,alphabet:t}){const{encode:n,decode:i}=m1e(t,r);return w4({prefix:e,name:r,encode:n,decode:s=>l1e(i(s))})}function w1e(r,e,t,n){let i=r.length;for(;r[i-1]==="=";)--i;const s=new Uint8Array(i*t/8|0);let a=0,o=0,c=0;for(let u=0;u<i;++u){const f=e[r[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);o=o<<t|f,a+=t,a>=8&&(a-=8,s[c++]=255&o>>a)}if(a>=t||255&o<<8-a)throw new SyntaxError("Unexpected end of data");return s}function E1e(r,e,t){const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a!==0&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s}function A1e(r){const e={};for(let t=0;t<r.length;++t)e[r[t]]=t;return e}function mi({name:r,prefix:e,bitsPerChar:t,alphabet:n}){const i=A1e(n);return w4({prefix:e,name:r,encode(s){return E1e(s,n,t)},decode(s){return w1e(s,i,t,r)}})}const _1e=c5({prefix:"9",name:"base10",alphabet:"0123456789"}),S1e=Object.freeze(Object.defineProperty({__proto__:null,base10:_1e},Symbol.toStringTag,{value:"Module"})),M1e=mi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),P1e=mi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),T1e=Object.freeze(Object.defineProperty({__proto__:null,base16:M1e,base16upper:P1e},Symbol.toStringTag,{value:"Module"})),C1e=mi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),I1e=Object.freeze(Object.defineProperty({__proto__:null,base2:C1e},Symbol.toStringTag,{value:"Module"})),NW=Array.from(""),R1e=NW.reduce((r,e,t)=>(r[t]=e,r),[]),N1e=NW.reduce((r,e,t)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return r[n]=t,r},[]);function O1e(r){return r.reduce((e,t)=>(e+=R1e[t],e),"")}function k1e(r){const e=[];for(const t of r){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const i=N1e[n];if(i==null)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const D1e=w4({prefix:"",name:"base256emoji",encode:O1e,decode:k1e}),B1e=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:D1e},Symbol.toStringTag,{value:"Module"})),$1e=mi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),L1e=mi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),U1e=mi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),F1e=mi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),j1e=mi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),q1e=mi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),V1e=mi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),z1e=mi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),H1e=mi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),W1e=Object.freeze(Object.defineProperty({__proto__:null,base32:$1e,base32hex:j1e,base32hexpad:V1e,base32hexpadupper:z1e,base32hexupper:q1e,base32pad:U1e,base32padupper:F1e,base32upper:L1e,base32z:H1e},Symbol.toStringTag,{value:"Module"})),K1e=c5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),G1e=c5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Q1e=Object.freeze(Object.defineProperty({__proto__:null,base36:K1e,base36upper:G1e},Symbol.toStringTag,{value:"Module"})),Z1e=c5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),J1e=c5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Y1e=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Z1e,base58flickr:J1e},Symbol.toStringTag,{value:"Module"})),X1e=mi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),eye=mi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tye=mi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rye=mi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),nye=Object.freeze(Object.defineProperty({__proto__:null,base64:X1e,base64pad:eye,base64url:tye,base64urlpad:rye},Symbol.toStringTag,{value:"Module"})),iye=mi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sye=Object.freeze(Object.defineProperty({__proto__:null,base8:iye},Symbol.toStringTag,{value:"Module"})),aye=w4({prefix:"\0",name:"identity",encode:r=>h1e(r),decode:r=>d1e(r)}),oye=Object.freeze(Object.defineProperty({__proto__:null,identity:aye},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const xB={...oye,...I1e,...sye,...S1e,...T1e,...W1e,...Q1e,...Y1e,...nye,...B1e};function OW(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const wB=OW("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),G7=OW("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Tx(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),cye={utf8:wB,"utf-8":wB,hex:xB.base16,latin1:G7,ascii:G7,binary:G7,...xB};function uye(r,e="utf8"){const t=cye[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return t.decoder.decode(`${t.prefix}${r}`)}function fye(r){let n,i=8192;return function(a){if(a<1||a>4096)return Tx(a);i+a>8192&&(n=Tx(8192),i=0);const o=n.subarray(i,i+=a);return i&7&&(i=(i|7)+1),o}}class mb{constructor(e,t,n){H(this,"fn");H(this,"len");H(this,"next");H(this,"val");this.fn=e,this.len=t,this.next=void 0,this.val=n}}function Q7(){}class lye{constructor(e){H(this,"head");H(this,"tail");H(this,"len");H(this,"next");this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const dye=fye();function hye(r){return globalThis.Buffer!=null?Tx(r):dye(r)}class gS{constructor(){H(this,"len");H(this,"head");H(this,"tail");H(this,"states");this.len=0,this.head=new mb(Q7,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new mb(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new yye((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push($8,10,Ni.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const t=Ni.fromBigInt(e);return this._push($8,t.length(),t)}uint64Number(e){return this._push(Xpe,MI(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const t=Ni.fromBigInt(e).zzEncode();return this._push($8,t.length(),t)}sint64Number(e){const t=Ni.fromNumber(e).zzEncode();return this._push($8,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Z7,1,e?1:0)}fixed32(e){return this._push(J6,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const t=Ni.fromBigInt(e);return this._push(J6,4,t.lo)._push(J6,4,t.hi)}fixed64Number(e){const t=Ni.fromNumber(e);return this._push(J6,4,t.lo)._push(J6,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(t1e,4,e)}double(e){return this._push(n1e,8,e)}bytes(e){const t=e.length>>>0;return t===0?this._push(Z7,1,0):this.uint32(t)._push(mye,t,e)}string(e){const t=o1e(e);return t!==0?this.uint32(t)._push(IW,t,e):this._push(Z7,1,0)}fork(){return this.states=new lye(this),this.head=this.tail=new mb(Q7,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new mb(Q7,0,0),this.len=0),this}ldelim(){const e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next;const t=hye(this.len);let n=0;for(;e!=null;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t}}function Z7(r,e,t){e[t]=r&255}function pye(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}class yye extends mb{constructor(t,n){super(pye,t,n);H(this,"next");this.next=void 0}}function $8(r,e,t){for(;r.hi!==0;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}function J6(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function mye(r,e,t){e.set(r,t)}globalThis.Buffer!=null&&(gS.prototype.bytes=function(r){const e=r.length>>>0;return this.uint32(e),e>0&&this._push(bye,e,r),this},gS.prototype.string=function(r){const e=globalThis.Buffer.byteLength(r);return this.uint32(e),e>0&&this._push(gye,e,r),this});function bye(r,e,t){e.set(r,t)}function gye(r,e,t){r.length<40?IW(r,e,t):e.utf8Write!=null?e.utf8Write(r,t):e.set(uye(r),t)}function vye(){return new gS}function II(r,e){const t=vye();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var Cx;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(Cx||(Cx={}));function kW(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function xye(r){function e(i){if(r[i.toString()]==null)throw new Error("Invalid enum value");return r[i]}const t=function(s,a){const o=e(s);a.int32(o)},n=function(s){const a=s.int32();return e(a)};return kW("enum",Cx.VARINT,t,n)}function RI(r,e){return kW("message",Cx.LENGTH_DELIMITED,r,e)}var pc;(function(r){(function(n){n.Raw="Raw",n.Directory="Directory",n.File="File",n.Metadata="Metadata",n.Symlink="Symlink",n.HAMTShard="HAMTShard"})(r.DataType||(r.DataType={}));let e;(function(n){n[n.Raw=0]="Raw",n[n.Directory=1]="Directory",n[n.File=2]="File",n[n.Metadata=3]="Metadata",n[n.Symlink=4]="Symlink",n[n.HAMTShard=5]="HAMTShard"})(e||(e={})),function(n){n.codec=()=>xye(e)}(r.DataType||(r.DataType={}));let t;r.codec=()=>(t==null&&(t=RI((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.Type!=null&&(i.uint32(8),r.DataType.codec().encode(n.Type,i)),n.Data!=null&&(i.uint32(18),i.bytes(n.Data)),n.filesize!=null&&(i.uint32(24),i.uint64(n.filesize)),n.blocksizes!=null)for(const a of n.blocksizes)i.uint32(32),i.uint64(a);n.hashType!=null&&(i.uint32(40),i.uint64(n.hashType)),n.fanout!=null&&(i.uint32(48),i.uint64(n.fanout)),n.mode!=null&&(i.uint32(56),i.uint32(n.mode)),n.mtime!=null&&(i.uint32(66),Ix.codec().encode(n.mtime,i)),s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{const s={blocksizes:[]},a=i==null?n.len:n.pos+i;for(;n.pos<a;){const o=n.uint32();switch(o>>>3){case 1:s.Type=r.DataType.codec().decode(n);break;case 2:s.Data=n.bytes();break;case 3:s.filesize=n.uint64();break;case 4:s.blocksizes.push(n.uint64());break;case 5:s.hashType=n.uint64();break;case 6:s.fanout=n.uint64();break;case 7:s.mode=n.uint32();break;case 8:s.mtime=Ix.codec().decode(n,n.uint32());break;default:n.skipType(o&7);break}}return s})),t),r.encode=n=>II(n,r.codec()),r.decode=n=>CI(n,r.codec())})(pc||(pc={}));var Ix;(function(r){let e;r.codec=()=>(e==null&&(e=RI((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.Seconds!=null&&(n.uint32(8),n.int64(t.Seconds)),t.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(t.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{const i={},s=n==null?t.len:t.pos+n;for(;t.pos<s;){const a=t.uint32();switch(a>>>3){case 1:i.Seconds=t.int64();break;case 2:i.FractionalNanoseconds=t.fixed32();break;default:t.skipType(a&7);break}}return i})),e),r.encode=t=>II(t,r.codec()),r.decode=t=>CI(t,r.codec())})(Ix||(Ix={}));var EB;(function(r){let e;r.codec=()=>(e==null&&(e=RI((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.MimeType!=null&&(n.uint32(10),n.string(t.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{const i={},s=n==null?t.len:t.pos+n;for(;t.pos<s;){const a=t.uint32();switch(a>>>3){case 1:i.MimeType=t.string();break;default:t.skipType(a&7);break}}return i})),e),r.encode=t=>II(t,r.codec()),r.decode=t=>CI(t,r.codec())})(EB||(EB={}));const AB={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},wye=["directory","hamt-sharded-directory"],_B=parseInt("0644",8),SB=parseInt("0755",8),MB=BigInt(1024);class NI{constructor(e={type:"file"}){H(this,"type");H(this,"data");H(this,"blockSizes");H(this,"hashType");H(this,"fanout");H(this,"mtime");H(this,"_mode");H(this,"_originalMode");const{type:t,data:n,blockSizes:i,hashType:s,fanout:a,mtime:o,mode:c}=e;if(t!=null&&!Object.values(AB).includes(t))throw new Px("Type: "+t+" is not valid");this.type=t??"file",this.data=n,this.hashType=s,this.fanout=a,this.blockSizes=i??[],this._originalMode=0,this.mode=c,this.mtime=o}static unmarshal(e){const t=pc.decode(e);if(t.fanout!=null&&t.fanout>MB)throw new bS(`Fanout size was too large - ${t.fanout} > ${MB}`);const n=new NI({type:AB[t.Type!=null?t.Type.toString():"File"],data:t.Data,blockSizes:t.blocksizes,mode:t.mode,mtime:t.mtime!=null?{secs:t.mtime.Seconds??0n,nsecs:t.mtime.FractionalNanoseconds}:void 0,fanout:t.fanout});return n._originalMode=t.mode??0,n}set mode(e){e==null?this._mode=this.isDirectory()?SB:_B:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return wye.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(t=>{e+=t}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=pc.DataType.Raw;break;case"directory":e=pc.DataType.Directory;break;case"file":e=pc.DataType.File;break;case"metadata":e=pc.DataType.Metadata;break;case"symlink":e=pc.DataType.Symlink;break;case"hamt-sharded-directory":e=pc.DataType.HAMTShard;break;default:throw new Px(`Type: ${e} is not valid`)}let t=this.data;(this.data==null||this.data.length===0)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===_B&&!this.isDirectory()&&(n=void 0),n===SB&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),pc.encode({Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}}function OI(r){var s,a;let e;if(typeof r=="string")try{const o=JSON.parse(r);e=((s=o==null?void 0:o.proof)==null?void 0:s.jwt)||r}catch{e=r}else(a=r==null?void 0:r.proof)!=null&&a.jwt?e=r.proof.jwt:e=JSON.stringify(r);const t=new NI({type:"file",data:new TextEncoder().encode(e)}),n=ype(dpe({Data:t.marshal()})),i=AW(18,Vfe(n));return Xn.create(0,ppe,i).toString()}const E4="6.15.0";function Eye(r,e,t){const n=e.split("|").map(s=>s.trim());for(let s=0;s<n.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}async function yn(r){const e=Object.keys(r);return(await Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,i,s)=>(n[e[s]]=i,n),{})}function je(r,e,t){for(let n in e){let i=e[n];const s=t?t[n]:null;s&&Eye(i,s,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function S1(r,e){if(r==null)return"null";if(e==null&&(e=new Set),typeof r=="object"){if(e.has(r))return"[Circular]";e.add(r)}if(Array.isArray(r))return"[ "+r.map(t=>S1(t,e)).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let i=0;i<r.length;i++)n+=t[r[i]>>4],n+=t[r[i]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return S1(r.toJSON(),e);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(n=>`${S1(n,e)}: ${S1(r[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Zr(r,e){return r&&r.code===e}function u5(r){return Zr(r,"CALL_EXCEPTION")}function Jt(r,e,t){let n=r;{const s=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${S1(t)}`);for(const a in t){if(a==="shortMessage")continue;const o=t[a];s.push(a+"="+S1(o))}}s.push(`code=${e}`),s.push(`version=${E4}`),s.length&&(r+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return je(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&je(i,{shortMessage:n}),i}function ye(r,e,t,n){if(!r)throw Jt(e,t,n)}function ee(r,e,t,n){ye(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function A4(r,e,t){t==null&&(t=""),t&&(t=": "+t),ye(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),ye(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}const Aye=["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");r.push(e)}catch{}return r},[]);function _4(r){ye(Aye.indexOf(r)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:r}})}function hu(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),ye(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function DW(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let s=0;s<n.length;s++)n[s]=parseInt(r.substring(i,i+2),16),i+=2;return n}ee(!1,"invalid BytesLike value",e||"value",r)}function De(r,e){return DW(r,e,!1)}function gn(r,e){return DW(r,e,!0)}function Gt(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function h6(r){return Gt(r,!0)||r instanceof Uint8Array}const PB="0123456789abcdef";function we(r){const e=De(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=PB[(i&240)>>4]+PB[i&15]}return t}function _t(r){return"0x"+r.map(e=>we(e).substring(2)).join("")}function ff(r){return Gt(r,!0)?(r.length-2)/2:De(r).length}function Yt(r,e,t){const n=De(r);return t!=null&&t>n.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),we(n.slice(e??0,t??n.length))}function BW(r){let e=we(r).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function $W(r,e,t){const n=De(r);ye(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),we(i)}function Rs(r,e){return $W(r,e,!0)}function f5(r,e){return $W(r,e,!1)}const S4=BigInt(0),Uo=BigInt(1),M1=9007199254740991;function Sm(r,e){const t=p6(r,"value"),n=BigInt(ot(e,"width"));if(ye(t>>n===S4,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-Uo){const i=(Uo<<n)-Uo;return-((~t&i)+Uo)}return t}function l5(r,e){let t=He(r,"value");const n=BigInt(ot(e,"width")),i=Uo<<n-Uo;if(t<S4){t=-t,ye(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const s=(Uo<<n)-Uo;return(~t&s)+Uo}else ye(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function af(r,e){const t=p6(r,"value"),n=BigInt(ot(e,"bits"));return t&(Uo<<n)-Uo}function He(r,e){switch(typeof r){case"bigint":return r;case"number":return ee(Number.isInteger(r),"underflow",e||"value",r),ee(r>=-M1&&r<=M1,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){ee(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}ee(!1,"invalid BigNumberish value",e||"value",r)}function p6(r,e){const t=He(r,e);return ye(t>=S4,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const TB="0123456789abcdef";function xp(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=TB[t>>4],e+=TB[t&15];return BigInt(e)}return He(r)}function ot(r,e){switch(typeof r){case"bigint":return ee(r>=-M1&&r<=M1,"overflow",e||"value",r),Number(r);case"number":return ee(Number.isInteger(r),"underflow",e||"value",r),ee(r>=-M1&&r<=M1,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return ot(BigInt(r),e)}catch(t){ee(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}ee(!1,"invalid numeric value",e||"value",r)}function kI(r){return ot(xp(r))}function Go(r,e){let n=p6(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=ot(e,"width");for(ye(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function yr(r){const e=p6(r,"value");if(e===S4)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const s=i*2;n[i]=parseInt(t.substring(s,s+2),16)}return n}function Es(r){let e=we(h6(r)?r:yr(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const Rx="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let L8=null;function _ye(r){if(L8==null){L8={};for(let t=0;t<Rx.length;t++)L8[Rx[t]]=BigInt(t)}const e=L8[r];return ee(e!=null,"invalid base58 value","letter",r),e}const Sye=BigInt(0),vS=BigInt(58);function M4(r){const e=De(r);let t=xp(e),n="";for(;t;)n=Rx[Number(t%vS)]+n,t/=vS;for(let i=0;i<e.length&&!e[i];i++)n=Rx[0]+n;return n}function DI(r){let e=Sye;for(let t=0;t<r.length;t++)e*=vS,e+=_ye(r[t]);return e}function BI(r){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return De(e)}function $I(r){const e=De(r);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var oy;class P4{constructor(e,t,n){H(this,"filter");H(this,"emitter");le(this,oy);Q(this,oy,t),je(this,{emitter:e,filter:n})}async removeListener(){F(this,oy)!=null&&await this.emitter.off(this.filter,F(this,oy))}}oy=new WeakMap;function Mye(r,e,t,n,i){ee(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function LW(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let s=0;for(let a=e+1;a<t.length&&t[a]>>6===2;a++)s++;return s}return r==="OVERRUN"?t.length-e-1:0}function Pye(r,e,t,n,i){return r==="OVERLONG"?(ee(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),LW(r,e,t))}const LI=Object.freeze({error:Mye,ignore:LW,replace:Pye});function UW(r,e){e==null&&(e=LI.error);const t=De(r,"bytes"),n=[];let i=0;for(;i<t.length;){const s=t[i++];if(!(s>>7)){n.push(s);continue}let a=null,o=null;if((s&224)===192)a=1,o=127;else if((s&240)===224)a=2,o=2047;else if((s&248)===240)a=3,o=65535;else{(s&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+a>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let c=s&(1<<8-a-1)-1;for(let u=0;u<a;u++){let f=t[i];if((f&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),c=null;break}c=c<<6|f&63,i++}if(c!==null){if(c>1114111){i+=e("OUT_OF_RANGE",i-1-a,t,n,c);continue}if(c>=55296&&c<=57343){i+=e("UTF16_SURROGATE",i-1-a,t,n,c);continue}if(c<=o){i+=e("OVERLONG",i-1-a,t,n,c);continue}n.push(c)}}return n}function on(r,e){ee(typeof r=="string","invalid string value","str",r),e!=null&&(_4(e),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const s=r.charCodeAt(n);ee(n<r.length&&(s&64512)===56320,"invalid surrogate pair","str",r);const a=65536+((i&1023)<<10)+(s&1023);t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(a&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function Tye(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Tf(r,e){return Tye(UW(r,e))}function FW(r,e){return UW(on(r,e))}function jW(r){async function e(t,n){ye(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();ye(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),ye(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const a=new AbortController,o=setTimeout(()=>{s=Jt("request timeout","TIMEOUT"),a.abort()},t.timeout);n&&n.addListener(()=>{s=Jt("request cancelled","CANCELLED"),a.abort()});const c=Object.assign({},r,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:a.signal});let u;try{u=await fetch(t.url,c)}catch(h){throw clearTimeout(o),s||h}clearTimeout(o);const f={};u.headers.forEach((h,y)=>{f[y.toLowerCase()]=h});const l=await u.arrayBuffer(),d=l==null?null:new Uint8Array(l);return{statusCode:u.status,statusMessage:u.statusText,headers:f,body:d}}return e}const Cye=12,Iye=250;let CB=jW();const Rye=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Nye=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let J7=!1;async function qW(r,e){try{const t=r.match(Rye);if(!t)throw new Error("invalid data");return new Kc(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?BI(t[3]):Oye(t[3]))}catch{return new Kc(599,"BAD REQUEST (invalid data: URI)",{},null,new En(r))}}function VW(r){async function e(t,n){try{const i=t.match(Nye);if(!i)throw new Error("invalid link");return new En(`${r}${i[2]}`)}catch{return new Kc(599,"BAD REQUEST (invalid IPFS URI)",{},null,new En(t))}}return e}const U8={data:qW,ipfs:VW("https://gateway.ipfs.io/ipfs/")},zW=new WeakMap;var Wd,Nl;class UI{constructor(e){le(this,Wd);le(this,Nl);Q(this,Wd,[]),Q(this,Nl,!1),zW.set(e,()=>{if(!F(this,Nl)){Q(this,Nl,!0);for(const t of F(this,Wd))setTimeout(()=>{t()},0);Q(this,Wd,[])}})}addListener(e){ye(!F(this,Nl),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),F(this,Wd).push(e)}get cancelled(){return F(this,Nl)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Wd=new WeakMap,Nl=new WeakMap;function F8(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var cy,uy,So,Lu,fy,ly,Pn,Zs,Uu,Kd,Gd,Qd,bc,Mo,Ol,Zd,bb;const Ew=class Ew{constructor(e){le(this,Zd);le(this,cy);le(this,uy);le(this,So);le(this,Lu);le(this,fy);le(this,ly);le(this,Pn);le(this,Zs);le(this,Uu);le(this,Kd);le(this,Gd);le(this,Qd);le(this,bc);le(this,Mo);le(this,Ol);Q(this,ly,String(e)),Q(this,cy,!1),Q(this,uy,!0),Q(this,So,{}),Q(this,Lu,""),Q(this,fy,3e5),Q(this,Mo,{slotInterval:Iye,maxAttempts:Cye}),Q(this,Ol,null)}get url(){return F(this,ly)}set url(e){Q(this,ly,String(e))}get body(){return F(this,Pn)==null?null:new Uint8Array(F(this,Pn))}set body(e){if(e==null)Q(this,Pn,void 0),Q(this,Zs,void 0);else if(typeof e=="string")Q(this,Pn,on(e)),Q(this,Zs,"text/plain");else if(e instanceof Uint8Array)Q(this,Pn,e),Q(this,Zs,"application/octet-stream");else if(typeof e=="object")Q(this,Pn,on(JSON.stringify(e))),Q(this,Zs,"application/json");else throw new Error("invalid body")}hasBody(){return F(this,Pn)!=null}get method(){return F(this,Lu)?F(this,Lu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),Q(this,Lu,String(e).toUpperCase())}get headers(){const e=Object.assign({},F(this,So));return F(this,Uu)&&(e.authorization=`Basic ${$I(on(F(this,Uu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&F(this,Zs)&&(e["content-type"]=F(this,Zs)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){F(this,So)[String(e).toLowerCase()]=String(t)}clearHeaders(){Q(this,So,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return F(this,Uu)||null}setCredentials(e,t){ee(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),Q(this,Uu,`${e}:${t}`)}get allowGzip(){return F(this,uy)}set allowGzip(e){Q(this,uy,!!e)}get allowInsecureAuthentication(){return!!F(this,cy)}set allowInsecureAuthentication(e){Q(this,cy,!!e)}get timeout(){return F(this,fy)}set timeout(e){ee(e>=0,"timeout must be non-zero","timeout",e),Q(this,fy,e)}get preflightFunc(){return F(this,Kd)||null}set preflightFunc(e){Q(this,Kd,e)}get processFunc(){return F(this,Gd)||null}set processFunc(e){Q(this,Gd,e)}get retryFunc(){return F(this,Qd)||null}set retryFunc(e){Q(this,Qd,e)}get getUrlFunc(){return F(this,Ol)||CB}set getUrlFunc(e){Q(this,Ol,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${F(this,Pn)?we(F(this,Pn)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(F(this,Mo).slotInterval=e.slotInterval),e.maxAttempts!=null&&(F(this,Mo).maxAttempts=e.maxAttempts)}send(){return ye(F(this,bc)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),Q(this,bc,new UI(this)),ve(this,Zd,bb).call(this,0,IB()+this.timeout,0,this,new Kc(0,"",{},null,this))}cancel(){ye(F(this,bc)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=zW.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new Ew(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,Q(i,So,Object.assign({},F(this,So))),F(this,Pn)&&Q(i,Pn,new Uint8Array(F(this,Pn))),Q(i,Zs,F(this,Zs)),i}clone(){const e=new Ew(this.url);return Q(e,Lu,F(this,Lu)),F(this,Pn)&&Q(e,Pn,F(this,Pn)),Q(e,Zs,F(this,Zs)),Q(e,So,Object.assign({},F(this,So))),Q(e,Uu,F(this,Uu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),Q(e,Kd,F(this,Kd)),Q(e,Gd,F(this,Gd)),Q(e,Qd,F(this,Qd)),Q(e,Mo,Object.assign({},F(this,Mo))),Q(e,Ol,F(this,Ol)),e}static lockConfig(){J7=!0}static getGateway(e){return U8[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(J7)throw new Error("gateways locked");U8[e]=t}static registerGetUrl(e){if(J7)throw new Error("gateways locked");CB=e}static createGetUrlFunc(e){return jW(e)}static createDataGateway(){return qW}static createIpfsGatewayFunc(e){return VW(e)}};cy=new WeakMap,uy=new WeakMap,So=new WeakMap,Lu=new WeakMap,fy=new WeakMap,ly=new WeakMap,Pn=new WeakMap,Zs=new WeakMap,Uu=new WeakMap,Kd=new WeakMap,Gd=new WeakMap,Qd=new WeakMap,bc=new WeakMap,Mo=new WeakMap,Ol=new WeakMap,Zd=new WeakSet,bb=async function(e,t,n,i,s){var f,l,d;if(e>=F(this,Mo).maxAttempts)return s.makeServerError("exceeded maximum retry limit");ye(IB()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&await kye(n);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in U8){const h=await U8[o](a.url,F8(F(i,bc)));if(h instanceof Kc){let y=h;if(this.processFunc){F8(F(i,bc));try{y=await this.processFunc(a,y)}catch(p){(p.throttle==null||typeof p.stall!="number")&&y.makeServerError("error in post-processing function",p).assertOk()}}return y}a=h}this.preflightFunc&&(a=await this.preflightFunc(a));const c=await this.getUrlFunc(a,F8(F(i,bc)));let u=new Kc(c.statusCode,c.statusMessage,c.headers,c.body,i);if(u.statusCode===301||u.statusCode===302){try{const h=u.headers.location||"";return ve(f=a.redirect(h),Zd,bb).call(f,e+1,t,0,i,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,u,e))){const h=u.headers["retry-after"];let y=F(this,Mo).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof h=="string"&&h.match(/^[1-9][0-9]*$/)&&(y=parseInt(h)),ve(l=a.clone(),Zd,bb).call(l,e+1,t,y,i,u)}if(this.processFunc){F8(F(i,bc));try{u=await this.processFunc(a,u)}catch(h){(h.throttle==null||typeof h.stall!="number")&&u.makeServerError("error in post-processing function",h).assertOk();let y=F(this,Mo).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return h.stall>=0&&(y=h.stall),ve(d=a.clone(),Zd,bb).call(d,e+1,t,y,i,u)}}return u};let En=Ew;var E2,A2,_2,Js,dy,Jd;const KN=class KN{constructor(e,t,n,i,s){le(this,E2);le(this,A2);le(this,_2);le(this,Js);le(this,dy);le(this,Jd);Q(this,E2,e),Q(this,A2,t),Q(this,_2,Object.keys(n).reduce((a,o)=>(a[o.toLowerCase()]=String(n[o]),a),{})),Q(this,Js,i==null?null:new Uint8Array(i)),Q(this,dy,s||null),Q(this,Jd,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${F(this,Js)?we(F(this,Js)):"null"}>`}get statusCode(){return F(this,E2)}get statusMessage(){return F(this,A2)}get headers(){return Object.assign({},F(this,_2))}get body(){return F(this,Js)==null?null:new Uint8Array(F(this,Js))}get bodyText(){try{return F(this,Js)==null?"":Tf(F(this,Js))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new KN(599,n,this.headers,this.body,F(this,dy)||void 0);return Q(i,Jd,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:ee(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw je(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return F(this,Js)!=null}get request(){return F(this,dy)}ok(){return F(this,Jd).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=F(this,Jd);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let i=null;try{F(this,Js)&&(i=Tf(F(this,Js)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};E2=new WeakMap,A2=new WeakMap,_2=new WeakMap,Js=new WeakMap,dy=new WeakMap,Jd=new WeakMap;let Kc=KN;function IB(){return new Date().getTime()}function Oye(r){return on(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function kye(r){return new Promise(e=>setTimeout(e,r))}const Dye=BigInt(-1),vo=BigInt(0),P1=BigInt(1),Bye=BigInt(5),jp={};let G1="0000";for(;G1.length<80;)G1+=G1;function fd(r){let e=G1;for(;e.length<r;)e+=e;return BigInt("1"+e.substring(0,r))}function Y6(r,e,t){const n=BigInt(e.width);if(e.signed){const i=P1<<n-P1;ye(t==null||r>=-i&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r>vo?r=Sm(af(r,n),n):r=-Sm(af(-r,n),n)}else{const i=P1<<n;ye(t==null||r>=0&&r<i,"overflow","NUMERIC_FAULT",{operation:t,fault:"overflow",value:r}),r=(r%i+i)%i&i-P1}return r}function Y7(r){typeof r=="number"&&(r=`fixed128x${r}`);let e=!0,t=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")e=!1;else{const s=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);ee(s,"invalid fixed format","format",r),e=s[1]!=="u",t=parseInt(s[2]),n=parseInt(s[3])}}else if(r){const s=r,a=(o,c,u)=>s[o]==null?u:(ee(typeof s[o]===c,"invalid fixed format ("+o+" not "+c+")","format."+o,s[o]),s[o]);e=a("signed","boolean",e),t=a("width","number",t),n=a("decimals","number",n)}ee(t%8===0,"invalid FixedNumber width (not byte aligned)","format.width",t),ee(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const i=(e?"":"u")+"fixed"+String(t)+"x"+String(n);return{signed:e,width:t,decimals:n,name:i}}function $ye(r,e){let t="";r<vo&&(t="-",r*=Dye);let n=r.toString();if(e===0)return t+n;for(;n.length<=e;)n=G1+n;const i=n.length-e;for(n=n.substring(0,i)+"."+n.substring(i);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return t+n}var Po,Zt,Hi,zt,vd,Tu,xS,wS,ES,AS;const Ml=class Ml{constructor(e,t,n){le(this,zt);H(this,"format");le(this,Po);le(this,Zt);le(this,Hi);H(this,"_value");hu(e,jp,"FixedNumber"),Q(this,Zt,t),Q(this,Po,n);const i=$ye(t,n.decimals);je(this,{format:n.name,_value:i}),Q(this,Hi,fd(n.decimals))}get signed(){return F(this,Po).signed}get width(){return F(this,Po).width}get decimals(){return F(this,Po).decimals}get value(){return F(this,Zt)}addUnsafe(e){return ve(this,zt,xS).call(this,e)}add(e){return ve(this,zt,xS).call(this,e,"add")}subUnsafe(e){return ve(this,zt,wS).call(this,e)}sub(e){return ve(this,zt,wS).call(this,e,"sub")}mulUnsafe(e){return ve(this,zt,ES).call(this,e)}mul(e){return ve(this,zt,ES).call(this,e,"mul")}mulSignal(e){ve(this,zt,vd).call(this,e);const t=F(this,Zt)*F(e,Zt);return ye(t%F(this,Hi)===vo,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),ve(this,zt,Tu).call(this,t/F(this,Hi),"mulSignal")}divUnsafe(e){return ve(this,zt,AS).call(this,e)}div(e){return ve(this,zt,AS).call(this,e,"div")}divSignal(e){ye(F(e,Zt)!==vo,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ve(this,zt,vd).call(this,e);const t=F(this,Zt)*F(this,Hi);return ye(t%F(e,Zt)===vo,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),ve(this,zt,Tu).call(this,t/F(e,Zt),"divSignal")}cmp(e){let t=this.value,n=e.value;const i=this.decimals-e.decimals;return i>0?n*=fd(i):i<0&&(t*=fd(-i)),t<n?-1:t>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=F(this,Zt);return F(this,Zt)<vo&&(e-=F(this,Hi)-P1),e=F(this,Zt)/F(this,Hi)*F(this,Hi),ve(this,zt,Tu).call(this,e,"floor")}ceiling(){let e=F(this,Zt);return F(this,Zt)>vo&&(e+=F(this,Hi)-P1),e=F(this,Zt)/F(this,Hi)*F(this,Hi),ve(this,zt,Tu).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=Bye*fd(t-1);let i=this.value+n;const s=fd(t);return i=i/s*s,Y6(i,F(this,Po),"round"),new Ml(jp,i,F(this,Po))}isZero(){return F(this,Zt)===vo}isNegative(){return F(this,Zt)<vo}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ml.fromString(this.toString(),e)}static fromValue(e,t,n){const i=t==null?0:ot(t),s=Y7(n);let a=He(e,"value");const o=i-s.decimals;if(o>0){const c=fd(o);ye(a%c===vo,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),a/=c}else o<0&&(a*=fd(-o));return Y6(a,s,"fromValue"),new Ml(jp,a,s)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);ee(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const i=Y7(t);let s=n[2]||"0",a=n[3]||"";for(;a.length<i.decimals;)a+=G1;ye(a.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,i.decimals);const o=BigInt(n[1]+s+a);return Y6(o,i,"fromString"),new Ml(jp,o,i)}static fromBytes(e,t){let n=xp(De(e,"value"));const i=Y7(t);return i.signed&&(n=Sm(n,i.width)),Y6(n,i,"fromBytes"),new Ml(jp,n,i)}};Po=new WeakMap,Zt=new WeakMap,Hi=new WeakMap,zt=new WeakSet,vd=function(e){ee(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},Tu=function(e,t){return e=Y6(e,F(this,Po),t),new Ml(jp,e,F(this,Po))},xS=function(e,t){return ve(this,zt,vd).call(this,e),ve(this,zt,Tu).call(this,F(this,Zt)+F(e,Zt),t)},wS=function(e,t){return ve(this,zt,vd).call(this,e),ve(this,zt,Tu).call(this,F(this,Zt)-F(e,Zt),t)},ES=function(e,t){return ve(this,zt,vd).call(this,e),ve(this,zt,Tu).call(this,F(this,Zt)*F(e,Zt)/F(this,Hi),t)},AS=function(e,t){return ye(F(e,Zt)!==vo,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),ve(this,zt,vd).call(this,e),ve(this,zt,Tu).call(this,F(this,Zt)*F(this,Hi)/F(e,Zt),t)};let Mm=Ml;function Lye(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function RB(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function NB(r,e,t,n){const i=[];for(;t<e+1+n;){const s=HW(r,t);i.push(s.result),t+=s.consumed,ye(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:e})}return{consumed:1+n,result:i}}function HW(r,e){ye(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const t=n=>{ye(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[e]>=248){const n=r[e]-247;t(e+1+n);const i=RB(r,e+1,n);return t(e+1+n+i),NB(r,e,e+1+n,n+i)}else if(r[e]>=192){const n=r[e]-192;return t(e+1+n),NB(r,e,e+1,n)}else if(r[e]>=184){const n=r[e]-183;t(e+1+n);const i=RB(r,e+1,n);t(e+1+n+i);const s=we(r.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:s}}else if(r[e]>=128){const n=r[e]-128;t(e+1+n);const i=we(r.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:Lye(r[e])}}function wp(r){const e=De(r,"data"),t=HW(e,0);return ee(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function OB(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function WW(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(s){n=n.concat(WW(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=OB(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(De(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=OB(e.length);return t.unshift(183+t.length),t.concat(e)}const kB="0123456789abcdef";function Qo(r){let e="0x";for(const t of WW(r))e+=kB[t>>4],e+=kB[t&15];return e}const KW=["wei","kwei","mwei","gwei","szabo","finney","ether"];function T4(r,e){let t=18;if(typeof e=="string"){const n=KW.indexOf(e);ee(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=ot(e,"unit"));return Mm.fromValue(r,t,{decimals:t,width:512}).toString()}function C4(r,e){ee(typeof r=="string","value must be a string","value",r);let t=18;if(typeof e=="string"){const n=KW.indexOf(e);ee(n>=0,"invalid unit","unit",e),t=3*n}else e!=null&&(t=ot(e,"unit"));return Mm.fromString(r,{decimals:t,width:512}).value}function GW(r){return T4(r,18)}function QW(r){return C4(r,18)}function FI(r){const e=De(r,"randomBytes");e[6]=e[6]&15|64,e[8]=e[8]&63|128;const t=we(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}const is=32,_S=new Uint8Array(is),Uye=["then"],j8={},ZW=new WeakMap;function Ad(r){return ZW.get(r)}function DB(r,e){ZW.set(r,e)}function X6(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function SS(r,e,t){return r.indexOf(null)>=0?e.map((n,i)=>n instanceof k0?SS(Ad(n),n,t):n):r.reduce((n,i,s)=>{let a=e.getValue(i);return i in n||(t&&a instanceof k0&&(a=SS(Ad(a),a,t)),n[i]=a),n},{})}var hy;const B1=class B1 extends Array{constructor(...t){const n=t[0];let i=t[1],s=(t[2]||[]).slice(),a=!0;n!==j8&&(i=t,s=[],a=!1);super(i.length);le(this,hy);i.forEach((u,f)=>{this[f]=u});const o=s.reduce((u,f)=>(typeof f=="string"&&u.set(f,(u.get(f)||0)+1),u),new Map);if(DB(this,Object.freeze(i.map((u,f)=>{const l=s[f];return l!=null&&o.get(l)===1?l:null}))),Q(this,hy,[]),F(this,hy)==null&&F(this,hy),!a)return;Object.freeze(this);const c=new Proxy(this,{get:(u,f,l)=>{if(typeof f=="string"){if(f.match(/^[0-9]+$/)){const h=ot(f,"%index");if(h<0||h>=this.length)throw new RangeError("out of result range");const y=u[h];return y instanceof Error&&X6(`index ${h}`,y),y}if(Uye.indexOf(f)>=0)return Reflect.get(u,f,l);const d=u[f];if(d instanceof Function)return function(...h){return d.apply(this===l?u:this,h)};if(!(f in u))return u.getValue.apply(this===l?u:this,[f])}return Reflect.get(u,f,l)}});return DB(c,Ad(this)),c}toArray(t){const n=[];return this.forEach((i,s)=>{i instanceof Error&&X6(`index ${s}`,i),t&&i instanceof B1&&(i=i.toArray(t)),n.push(i)}),n}toObject(t){const n=Ad(this);return n.reduce((i,s,a)=>(ye(s!=null,`value at index ${a} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),SS(n,this,t)),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const i=Ad(this),s=[],a=[];for(let o=t;o<n;o++)s.push(this[o]),a.push(i[o]);return new B1(j8,s,a)}filter(t,n){const i=Ad(this),s=[],a=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&X6(`index ${o}`,c),t.call(n,c,o,this)&&(s.push(c),a.push(i[o]))}return new B1(j8,s,a)}map(t,n){const i=[];for(let s=0;s<this.length;s++){const a=this[s];a instanceof Error&&X6(`index ${s}`,a),i.push(t.call(n,a,s,this))}return i}getValue(t){const n=Ad(this).indexOf(t);if(n===-1)return;const i=this[n];return i instanceof Error&&X6(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,n){return new B1(j8,t,n)}};hy=new WeakMap;let k0=B1;function JW(r){const e=[],t=function(n,i){if(Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{t(a,i[s])}catch(o){e.push({path:a,error:o})}}};return t([],r),e}function BB(r){let e=yr(r);return ye(e.length<=is,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:is,offset:e.length}),e.length!==is&&(e=gn(_t([_S.slice(e.length%is),e]))),e}class Df{constructor(e,t,n,i){H(this,"name");H(this,"type");H(this,"localName");H(this,"dynamic");je(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){ee(!1,e,this.localName,t)}}var Fu,Yd,py,Qv;class MS{constructor(){le(this,py);le(this,Fu);le(this,Yd);Q(this,Fu,[]),Q(this,Yd,0)}get data(){return _t(F(this,Fu))}get length(){return F(this,Yd)}appendWriter(e){return ve(this,py,Qv).call(this,gn(e.data))}writeBytes(e){let t=gn(e);const n=t.length%is;return n&&(t=gn(_t([t,_S.slice(n)]))),ve(this,py,Qv).call(this,t)}writeValue(e){return ve(this,py,Qv).call(this,BB(e))}writeUpdatableValue(){const e=F(this,Fu).length;return F(this,Fu).push(_S),Q(this,Yd,F(this,Yd)+is),t=>{F(this,Fu)[e]=BB(t)}}}Fu=new WeakMap,Yd=new WeakMap,py=new WeakSet,Qv=function(e){return F(this,Fu).push(e),Q(this,Yd,F(this,Yd)+e.length),e.length};var bs,Ys,Xd,eh,kl,dp,TS,YW;const GN=class GN{constructor(e,t,n){le(this,dp);H(this,"allowLoose");le(this,bs);le(this,Ys);le(this,Xd);le(this,eh);le(this,kl);je(this,{allowLoose:!!t}),Q(this,bs,gn(e)),Q(this,Xd,0),Q(this,eh,null),Q(this,kl,n??1024),Q(this,Ys,0)}get data(){return we(F(this,bs))}get dataLength(){return F(this,bs).length}get consumed(){return F(this,Ys)}get bytes(){return new Uint8Array(F(this,bs))}subReader(e){const t=new GN(F(this,bs).slice(F(this,Ys)+e),this.allowLoose,F(this,kl));return Q(t,eh,this),t}readBytes(e,t){let n=ve(this,dp,YW).call(this,0,e,!!t);return ve(this,dp,TS).call(this,e),Q(this,Ys,F(this,Ys)+n.length),n.slice(0,e)}readValue(){return xp(this.readBytes(is))}readIndex(){return kI(this.readBytes(is))}};bs=new WeakMap,Ys=new WeakMap,Xd=new WeakMap,eh=new WeakMap,kl=new WeakMap,dp=new WeakSet,TS=function(e){var t;if(F(this,eh))return ve(t=F(this,eh),dp,TS).call(t,e);Q(this,Xd,F(this,Xd)+e),ye(F(this,kl)<1||F(this,Xd)<=F(this,kl)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${F(this,kl)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:gn(F(this,bs)),offset:F(this,Ys),length:e,info:{bytesRead:F(this,Xd),dataLength:this.dataLength}})},YW=function(e,t,n){let i=Math.ceil(t/is)*is;return F(this,Ys)+i>F(this,bs).length&&(this.allowLoose&&n&&F(this,Ys)+t<=F(this,bs).length?i=t:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:gn(F(this,bs)),length:F(this,bs).length,offset:F(this,Ys)+i})),F(this,bs).slice(F(this,Ys),F(this,Ys)+i)};let PS=GN;function ta(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function jI(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function XW(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ta(r.outputLen),ta(r.blockLen)}function Pm(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function eK(r,e){jI(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const X7=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tK=r=>r instanceof Uint8Array,Zv=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Jv=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),oc=(r,e)=>r<<32-e|r>>>e,Fye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Fye)throw new Error("Non little-endian hardware is not supported");const jye=async()=>{};async function $B(r,e,t){let n=Date.now();for(let i=0;i<r;i++){t(i);const s=Date.now()-n;s>=0&&s<e||(await jye(),n+=s)}}function qye(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Tm(r){if(typeof r=="string"&&(r=qye(r)),!tK(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function Vye(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!tK(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}let qI=class{clone(){return this._cloneInto()}};const zye={}.toString;function rK(r,e){if(e!==void 0&&zye.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(r,e)}function I4(r){const e=n=>r().update(Tm(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Hye(r=32){if(X7&&typeof X7.getRandomValues=="function")return X7.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class nK extends qI{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,XW(e);const n=Tm(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return Pm(this),this.iHash.update(e),this}digestInto(e){Pm(this),jI(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const R4=(r,e,t)=>new nK(r,e).update(t).digest();R4.create=(r,e)=>new nK(r,e);function Wye(r,e,t,n){XW(r);const i=rK({dkLen:32,asyncTick:10},n),{c:s,dkLen:a,asyncTick:o}=i;if(ta(s),ta(a),ta(o),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Tm(e),u=Tm(t),f=new Uint8Array(a),l=R4.create(r,c),d=l._cloneInto().update(u);return{c:s,dkLen:a,asyncTick:o,DK:f,PRF:l,PRFSalt:d}}function Kye(r,e,t,n,i){return r.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),t}function VI(r,e,t,n){const{c:i,dkLen:s,DK:a,PRF:o,PRFSalt:c}=Wye(r,e,t,n);let u;const f=new Uint8Array(4),l=Jv(f),d=new Uint8Array(o.outputLen);for(let h=1,y=0;y<s;h++,y+=o.outputLen){const p=a.subarray(y,y+o.outputLen);l.setInt32(0,h,!1),(u=c._cloneInto(u)).update(f).digestInto(d),p.set(d.subarray(0,p.length));for(let g=1;g<i;g++){o._cloneInto(u).update(d).digestInto(d);for(let m=0;m<p.length;m++)p[m]^=d[m]}}return Kye(o,c,a,u,d)}function Gye(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),a=Number(t>>i&s),o=Number(t&s),c=n?4:0,u=n?0:4;r.setUint32(e+c,a,n),r.setUint32(e+u,o,n)}class zI extends qI{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Jv(this.buffer)}update(e){Pm(this);const{view:t,buffer:n,blockLen:i}=this;e=Tm(e);const s=e.length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o===i){const c=Jv(e);for(;i<=s-a;a+=i)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Pm(this),eK(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let l=a;l<i;l++)t[l]=0;Gye(n,i-8,BigInt(this.length*8),s),this.process(n,0);const o=Jv(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,f[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%t&&e.buffer.set(n),e}}const Qye=(r,e,t)=>r&e^~r&t,Zye=(r,e,t)=>r&e^r&t^e&t,Jye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nl=new Uint32Array(64);class Yye extends zI{constructor(){super(64,32,8,!1),this.A=rl[0]|0,this.B=rl[1]|0,this.C=rl[2]|0,this.D=rl[3]|0,this.E=rl[4]|0,this.F=rl[5]|0,this.G=rl[6]|0,this.H=rl[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,t,n,i,s,a,o,c]}set(e,t,n,i,s,a,o,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,t){for(let l=0;l<16;l++,t+=4)nl[l]=e.getUint32(t,!1);for(let l=16;l<64;l++){const d=nl[l-15],h=nl[l-2],y=oc(d,7)^oc(d,18)^d>>>3,p=oc(h,17)^oc(h,19)^h>>>10;nl[l]=p+nl[l-7]+y+nl[l-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){const d=oc(o,6)^oc(o,11)^oc(o,25),h=f+d+Qye(o,c,u)+Jye[l]+nl[l]|0,p=(oc(n,2)^oc(n,13)^oc(n,22))+Zye(n,i,s)|0;f=u,u=c,c=o,o=a+h|0,a=s,s=i,i=n,n=h+p|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,a,o,c,u,f)}roundClean(){nl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const y6=I4(()=>new Yye),q8=BigInt(2**32-1),CS=BigInt(32);function iK(r,e=!1){return e?{h:Number(r&q8),l:Number(r>>CS&q8)}:{h:Number(r>>CS&q8)|0,l:Number(r&q8)|0}}function sK(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:a}=iK(r[i],e);[t[i],n[i]]=[s,a]}return[t,n]}const Xye=(r,e)=>BigInt(r>>>0)<<CS|BigInt(e>>>0),eme=(r,e,t)=>r>>>t,tme=(r,e,t)=>r<<32-t|e>>>t,rme=(r,e,t)=>r>>>t|e<<32-t,nme=(r,e,t)=>r<<32-t|e>>>t,ime=(r,e,t)=>r<<64-t|e>>>t-32,sme=(r,e,t)=>r>>>t-32|e<<64-t,ame=(r,e)=>e,ome=(r,e)=>r,aK=(r,e,t)=>r<<t|e>>>32-t,oK=(r,e,t)=>e<<t|r>>>32-t,cK=(r,e,t)=>e<<t-32|r>>>64-t,uK=(r,e,t)=>r<<t-32|e>>>64-t;function cme(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const ume=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),fme=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,lme=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),dme=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,hme=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),pme=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,mt={fromBig:iK,split:sK,toBig:Xye,shrSH:eme,shrSL:tme,rotrSH:rme,rotrSL:nme,rotrBH:ime,rotrBL:sme,rotr32H:ame,rotr32L:ome,rotlSH:aK,rotlSL:oK,rotlBH:cK,rotlBL:uK,add:cme,add3L:ume,add3H:fme,add4L:lme,add4H:dme,add5H:pme,add5L:hme},[yme,mme]=mt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),il=new Uint32Array(80),sl=new Uint32Array(80);let bme=class extends zI{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:f,Fh:l,Fl:d,Gh:h,Gl:y,Hh:p,Hl:g}=this;return[e,t,n,i,s,a,o,c,u,f,l,d,h,y,p,g]}set(e,t,n,i,s,a,o,c,u,f,l,d,h,y,p,g){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=d|0,this.Gh=h|0,this.Gl=y|0,this.Hh=p|0,this.Hl=g|0}process(e,t){for(let b=0;b<16;b++,t+=4)il[b]=e.getUint32(t),sl[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const _=il[b-15]|0,C=sl[b-15]|0,N=mt.rotrSH(_,C,1)^mt.rotrSH(_,C,8)^mt.shrSH(_,C,7),x=mt.rotrSL(_,C,1)^mt.rotrSL(_,C,8)^mt.shrSL(_,C,7),I=il[b-2]|0,$=sl[b-2]|0,j=mt.rotrSH(I,$,19)^mt.rotrBH(I,$,61)^mt.shrSH(I,$,6),O=mt.rotrSL(I,$,19)^mt.rotrBL(I,$,61)^mt.shrSL(I,$,6),E=mt.add4L(x,O,sl[b-7],sl[b-16]),S=mt.add4H(E,N,j,il[b-7],il[b-16]);il[b]=S|0,sl[b]=E|0}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:f,Eh:l,El:d,Fh:h,Fl:y,Gh:p,Gl:g,Hh:m,Hl:v}=this;for(let b=0;b<80;b++){const _=mt.rotrSH(l,d,14)^mt.rotrSH(l,d,18)^mt.rotrBH(l,d,41),C=mt.rotrSL(l,d,14)^mt.rotrSL(l,d,18)^mt.rotrBL(l,d,41),N=l&h^~l&p,x=d&y^~d&g,I=mt.add5L(v,C,x,mme[b],sl[b]),$=mt.add5H(I,m,_,N,yme[b],il[b]),j=I|0,O=mt.rotrSH(n,i,28)^mt.rotrBH(n,i,34)^mt.rotrBH(n,i,39),E=mt.rotrSL(n,i,28)^mt.rotrBL(n,i,34)^mt.rotrBL(n,i,39),S=n&s^n&o^s&o,A=i&a^i&c^a&c;m=p|0,v=g|0,p=h|0,g=y|0,h=l|0,y=d|0,{h:l,l:d}=mt.add(u|0,f|0,$|0,j|0),u=o|0,f=c|0,o=s|0,c=a|0,s=n|0,a=i|0;const w=mt.add3L(j,E,A);n=mt.add3H(w,$,O,S),i=w|0}({h:n,l:i}=mt.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:a}=mt.add(this.Bh|0,this.Bl|0,s|0,a|0),{h:o,l:c}=mt.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:f}=mt.add(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:d}=mt.add(this.Eh|0,this.El|0,l|0,d|0),{h,l:y}=mt.add(this.Fh|0,this.Fl|0,h|0,y|0),{h:p,l:g}=mt.add(this.Gh|0,this.Gl|0,p|0,g|0),{h:m,l:v}=mt.add(this.Hh|0,this.Hl|0,m|0,v|0),this.set(n,i,s,a,o,c,u,f,l,d,h,y,p,g,m,v)}roundClean(){il.fill(0),sl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const HI=I4(()=>new bme);function gme(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const LB=gme(),UB=LB.crypto||LB.msCrypto;function fK(r){switch(r){case"sha256":return y6.create();case"sha512":return HI.create()}ee(!1,"invalid hashing algorithm name","algorithm",r)}function vme(r,e){const t={sha256:y6,sha512:HI}[r];return ee(t!=null,"invalid hmac algorithm","algorithm",r),R4.create(t,e)}function xme(r,e,t,n,i){const s={sha256:y6,sha512:HI}[i];return ee(s!=null,"invalid pbkdf2 algorithm","algorithm",i),VI(s,r,e,{c:t,dkLen:n})}function wme(r){ye(UB!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),ee(Number.isInteger(r)&&r>0&&r<=1024,"invalid length","length",r);const e=new Uint8Array(r);return UB.getRandomValues(e),e}let lK=!1;const dK=function(r,e,t){return vme(r,e).update(t).digest()};let hK=dK;function Bf(r,e,t){const n=De(e,"key"),i=De(t,"data");return we(hK(r,n,i))}Bf._=dK;Bf.lock=function(){lK=!0};Bf.register=function(r){if(lK)throw new Error("computeHmac is locked");hK=r};Object.freeze(Bf);const[pK,yK,mK]=[[],[],[]],Eme=BigInt(0),eb=BigInt(1),Ame=BigInt(2),_me=BigInt(7),Sme=BigInt(256),Mme=BigInt(113);for(let r=0,e=eb,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],pK.push(2*(5*n+t)),yK.push((r+1)*(r+2)/2%64);let i=Eme;for(let s=0;s<7;s++)e=(e<<eb^(e>>_me)*Mme)%Sme,e&Ame&&(i^=eb<<(eb<<BigInt(s))-eb);mK.push(i)}const[Pme,Tme]=sK(mK,!0),FB=(r,e,t)=>t>32?cK(r,e,t):aK(r,e,t),jB=(r,e,t)=>t>32?uK(r,e,t):oK(r,e,t);function Cme(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)t[a]=r[a]^r[a+10]^r[a+20]^r[a+30]^r[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,u=t[c],f=t[c+1],l=FB(u,f,1)^t[o],d=jB(u,f,1)^t[o+1];for(let h=0;h<50;h+=10)r[a+h]^=l,r[a+h+1]^=d}let i=r[2],s=r[3];for(let a=0;a<24;a++){const o=yK[a],c=FB(i,s,o),u=jB(i,s,o),f=pK[a];i=r[f],s=r[f+1],r[f]=c,r[f+1]=u}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)t[o]=r[a+o];for(let o=0;o<10;o++)r[a+o]^=~t[(o+2)%10]&t[(o+4)%10]}r[0]^=Pme[n],r[1]^=Tme[n]}t.fill(0)}class WI extends qI{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ta(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Zv(this.state)}keccak(){Cme(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Pm(this);const{blockLen:t,state:n}=this;e=Tm(e);const i=e.length;for(let s=0;s<i;){const a=Math.min(t-this.pos,i-s);for(let o=0;o<a;o++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Pm(this,!1),jI(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ta(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new WI(t,n,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Ime=(r,e,t)=>I4(()=>new WI(e,r,t)),Rme=Ime(1,136,256/8);let bK=!1;const gK=function(r){return Rme(r)};let vK=gK;function Kt(r){const e=De(r,"data");return we(vK(e))}Kt._=gK;Kt.lock=function(){bK=!0};Kt.register=function(r){if(bK)throw new TypeError("keccak256 is locked");vK=r};Object.freeze(Kt);const Nme=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),xK=Uint8Array.from({length:16},(r,e)=>e),Ome=xK.map(r=>(9*r+5)%16);let KI=[xK],GI=[Ome];for(let r=0;r<4;r++)for(let e of[KI,GI])e.push(e[r].map(t=>Nme[t]));const wK=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>new Uint8Array(r)),kme=KI.map((r,e)=>r.map(t=>wK[e][t])),Dme=GI.map((r,e)=>r.map(t=>wK[e][t])),Bme=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),$me=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),V8=(r,e)=>r<<e|r>>>32-e;function qB(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const z8=new Uint32Array(16);class Lme extends zI{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:i,h4:s}=this;return[e,t,n,i,s]}set(e,t,n,i,s){this.h0=e|0,this.h1=t|0,this.h2=n|0,this.h3=i|0,this.h4=s|0}process(e,t){for(let h=0;h<16;h++,t+=4)z8[h]=e.getUint32(t,!0);let n=this.h0|0,i=n,s=this.h1|0,a=s,o=this.h2|0,c=o,u=this.h3|0,f=u,l=this.h4|0,d=l;for(let h=0;h<5;h++){const y=4-h,p=Bme[h],g=$me[h],m=KI[h],v=GI[h],b=kme[h],_=Dme[h];for(let C=0;C<16;C++){const N=V8(n+qB(h,s,o,u)+z8[m[C]]+p,b[C])+l|0;n=l,l=u,u=V8(o,10)|0,o=s,s=N}for(let C=0;C<16;C++){const N=V8(i+qB(y,a,c,f)+z8[v[C]]+g,_[C])+d|0;i=d,d=f,f=V8(c,10)|0,c=a,a=N}}this.set(this.h1+o+f|0,this.h2+u+d|0,this.h3+l+i|0,this.h4+n+a|0,this.h0+s+c|0)}roundClean(){z8.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ume=I4(()=>new Lme);let EK=!1;const AK=function(r){return Ume(r)};let _K=AK;function $f(r){const e=De(r,"data");return we(_K(e))}$f._=AK;$f.lock=function(){EK=!0};$f.register=function(r){if(EK)throw new TypeError("ripemd160 is locked");_K=r};Object.freeze($f);let SK=!1;const MK=function(r,e,t,n,i){return xme(r,e,t,n,i)};let PK=MK;function Yo(r,e,t,n,i){const s=De(r,"password"),a=De(e,"salt");return we(PK(s,a,t,n,i))}Yo._=MK;Yo.lock=function(){SK=!0};Yo.register=function(r){if(SK)throw new Error("pbkdf2 is locked");PK=r};Object.freeze(Yo);let TK=!1;const CK=function(r){return new Uint8Array(wme(r))};let IK=CK;function oa(r){return IK(r)}oa._=CK;oa.lock=function(){TK=!0};oa.register=function(r){if(TK)throw new Error("randomBytes is locked");IK=r};Object.freeze(oa);const Dt=(r,e)=>r<<e|r>>>32-e;function VB(r,e,t,n,i,s){let a=r[e++]^t[n++],o=r[e++]^t[n++],c=r[e++]^t[n++],u=r[e++]^t[n++],f=r[e++]^t[n++],l=r[e++]^t[n++],d=r[e++]^t[n++],h=r[e++]^t[n++],y=r[e++]^t[n++],p=r[e++]^t[n++],g=r[e++]^t[n++],m=r[e++]^t[n++],v=r[e++]^t[n++],b=r[e++]^t[n++],_=r[e++]^t[n++],C=r[e++]^t[n++],N=a,x=o,I=c,$=u,j=f,O=l,E=d,S=h,A=y,w=p,P=g,k=m,D=v,T=b,M=_,L=C;for(let K=0;K<8;K+=2)j^=Dt(N+D|0,7),A^=Dt(j+N|0,9),D^=Dt(A+j|0,13),N^=Dt(D+A|0,18),w^=Dt(O+x|0,7),T^=Dt(w+O|0,9),x^=Dt(T+w|0,13),O^=Dt(x+T|0,18),M^=Dt(P+E|0,7),I^=Dt(M+P|0,9),E^=Dt(I+M|0,13),P^=Dt(E+I|0,18),$^=Dt(L+k|0,7),S^=Dt($+L|0,9),k^=Dt(S+$|0,13),L^=Dt(k+S|0,18),x^=Dt(N+$|0,7),I^=Dt(x+N|0,9),$^=Dt(I+x|0,13),N^=Dt($+I|0,18),E^=Dt(O+j|0,7),S^=Dt(E+O|0,9),j^=Dt(S+E|0,13),O^=Dt(j+S|0,18),k^=Dt(P+w|0,7),A^=Dt(k+P|0,9),w^=Dt(A+k|0,13),P^=Dt(w+A|0,18),D^=Dt(L+M|0,7),T^=Dt(D+L|0,9),M^=Dt(T+D|0,13),L^=Dt(M+T|0,18);i[s++]=a+N|0,i[s++]=o+x|0,i[s++]=c+I|0,i[s++]=u+$|0,i[s++]=f+j|0,i[s++]=l+O|0,i[s++]=d+E|0,i[s++]=h+S|0,i[s++]=y+A|0,i[s++]=p+w|0,i[s++]=g+P|0,i[s++]=m+k|0,i[s++]=v+D|0,i[s++]=b+T|0,i[s++]=_+M|0,i[s++]=C+L|0}function Q1(r,e,t,n,i){let s=n+0,a=n+16*i;for(let o=0;o<16;o++)t[a+o]=r[e+(2*i-1)*16+o];for(let o=0;o<i;o++,s+=16,e+=16)VB(t,a,r,e,t,s),o>0&&(a+=16),VB(t,s,r,e+=16,t,a)}function RK(r,e,t){const n=rK({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:i,r:s,p:a,dkLen:o,asyncTick:c,maxmem:u,onProgress:f}=n;if(ta(i),ta(s),ta(a),ta(o),ta(c),ta(u),f!==void 0&&typeof f!="function")throw new Error("progressCb should be function");const l=128*s,d=l/4;if(i<=1||i&i-1||i>=2**(l/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(a<0||a>(2**32-1)*32/l)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(o<0||o>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const h=l*(i+a);if(h>u)throw new Error(`Scrypt: parameters too large, ${h} (128 * r * (N + p)) > ${u} (maxmem)`);const y=VI(y6,r,e,{c:1,dkLen:l*a}),p=Zv(y),g=Zv(new Uint8Array(l*i)),m=Zv(new Uint8Array(l));let v=()=>{};if(f){const b=2*i*a,_=Math.max(Math.floor(b/1e4),1);let C=0;v=()=>{C++,f&&(!(C%_)||C===b)&&f(C/b)}}return{N:i,r:s,p:a,dkLen:o,blockSize32:d,V:g,B32:p,B:y,tmp:m,blockMixCb:v,asyncTick:c}}function NK(r,e,t,n,i){const s=VI(y6,r,t,{c:1,dkLen:e});return t.fill(0),n.fill(0),i.fill(0),s}function Fme(r,e,t){const{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:c,B32:u,B:f,tmp:l,blockMixCb:d}=RK(r,e,t);for(let h=0;h<s;h++){const y=o*h;for(let p=0;p<o;p++)c[p]=u[y+p];for(let p=0,g=0;p<n-1;p++)Q1(c,g,c,g+=o,i),d();Q1(c,(n-1)*o,u,y,i),d();for(let p=0;p<n;p++){const g=u[y+o-16]%n;for(let m=0;m<o;m++)l[m]=u[y+m]^c[g*o+m];Q1(l,0,u,y,i),d()}}return NK(r,a,f,c,l)}async function jme(r,e,t){const{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:c,B32:u,B:f,tmp:l,blockMixCb:d,asyncTick:h}=RK(r,e,t);for(let y=0;y<s;y++){const p=o*y;for(let m=0;m<o;m++)c[m]=u[p+m];let g=0;await $B(n-1,h,()=>{Q1(c,g,c,g+=o,i),d()}),Q1(c,(n-1)*o,u,p,i),d(),await $B(n,h,()=>{const m=u[p+o-16]%n;for(let v=0;v<o;v++)l[v]=u[p+v]^c[m*o+v];Q1(l,0,u,p,i),d()})}return NK(r,a,f,c,l)}let OK=!1,kK=!1;const DK=async function(r,e,t,n,i,s,a){return await jme(r,e,{N:t,r:n,p:i,dkLen:s,onProgress:a})},BK=function(r,e,t,n,i,s){return Fme(r,e,{N:t,r:n,p:i,dkLen:s})};let $K=DK,LK=BK;async function Lf(r,e,t,n,i,s,a){const o=De(r,"passwd"),c=De(e,"salt");return we(await $K(o,c,t,n,i,s,a))}Lf._=DK;Lf.lock=function(){kK=!0};Lf.register=function(r){if(kK)throw new Error("scrypt is locked");$K=r};Object.freeze(Lf);function Uf(r,e,t,n,i,s){const a=De(r,"passwd"),o=De(e,"salt");return we(LK(a,o,t,n,i,s))}Uf._=BK;Uf.lock=function(){OK=!0};Uf.register=function(r){if(OK)throw new Error("scryptSync is locked");LK=r};Object.freeze(Uf);const UK=function(r){return fK("sha256").update(r).digest()},FK=function(r){return fK("sha512").update(r).digest()};let jK=UK,qK=FK,VK=!1,zK=!1;function ji(r){const e=De(r,"data");return we(jK(e))}ji._=UK;ji.lock=function(){VK=!0};ji.register=function(r){if(VK)throw new Error("sha256 is locked");jK=r};Object.freeze(ji);function m6(r){const e=De(r,"data");return we(qK(e))}m6._=FK;m6.lock=function(){zK=!0};m6.register=function(r){if(zK)throw new Error("sha512 is locked");qK=r};Object.freeze(ji);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HK=BigInt(0),N4=BigInt(1),qme=BigInt(2),O4=r=>r instanceof Uint8Array,Vme=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Cm(r){if(!O4(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=Vme[r[t]];return e}function WK(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function QI(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Im(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const i=n*2,s=r.slice(i,i+2),a=Number.parseInt(s,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[n]=a}return t}function Sh(r){return QI(Cm(r))}function ZI(r){if(!O4(r))throw new Error("Uint8Array expected");return QI(Cm(Uint8Array.from(r).reverse()))}function Rm(r,e){return Im(r.toString(16).padStart(e*2,"0"))}function JI(r,e){return Rm(r,e).reverse()}function zme(r){return Im(WK(r))}function _o(r,e,t){let n;if(typeof e=="string")try{n=Im(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else if(O4(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function Jg(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!O4(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function Hme(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Wme(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Kme(r){let e;for(e=0;r>HK;r>>=N4,e+=1);return e}function Gme(r,e){return r>>BigInt(e)&N4}const Qme=(r,e,t)=>r|(t?N4:HK)<<BigInt(e),YI=r=>(qme<<BigInt(r-1))-N4,eE=r=>new Uint8Array(r),zB=r=>Uint8Array.from(r);function KK(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=eE(r),i=eE(r),s=0;const a=()=>{n.fill(1),i.fill(0),s=0},o=(...l)=>t(i,n,...l),c=(l=eE())=>{i=o(zB([0]),l),n=o(),l.length!==0&&(i=o(zB([1]),l),n=o())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const d=[];for(;l<e;){n=o();const h=n.slice();d.push(h),l+=n.length}return Jg(...d)};return(l,d)=>{a(),c(l);let h;for(;!(h=d(u()));)c();return a(),h}}const Zme={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function d5(r,e,t={}){const n=(i,s,a)=>{const o=Zme[s];if(typeof o!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=r[i];if(!(a&&c===void 0)&&!o(c,r))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}const Jme=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Gme,bitLen:Kme,bitMask:YI,bitSet:Qme,bytesToHex:Cm,bytesToNumberBE:Sh,bytesToNumberLE:ZI,concatBytes:Jg,createHmacDrbg:KK,ensureBytes:_o,equalBytes:Hme,hexToBytes:Im,hexToNumber:QI,numberToBytesBE:Rm,numberToBytesLE:JI,numberToHexUnpadded:WK,numberToVarBytesBE:zme,utf8ToBytes:Wme,validateObject:d5},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $n=BigInt(0),an=BigInt(1),_d=BigInt(2),Yme=BigInt(3),IS=BigInt(4),HB=BigInt(5),WB=BigInt(8);BigInt(9);BigInt(16);function xs(r,e){const t=r%e;return t>=$n?t:e+t}function Xme(r,e,t){if(t<=$n||e<$n)throw new Error("Expected power/modulo > 0");if(t===an)return $n;let n=an;for(;e>$n;)e&an&&(n=n*r%t),r=r*r%t,e>>=an;return n}function Ea(r,e,t){let n=r;for(;e-- >$n;)n*=n,n%=t;return n}function RS(r,e){if(r===$n||e<=$n)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=xs(r,e),n=e,i=$n,s=an;for(;t!==$n;){const o=n/t,c=n%t,u=i-s*o;n=t,t=c,i=s,s=u}if(n!==an)throw new Error("invert: does not exist");return xs(i,e)}function e6e(r){const e=(r-an)/_d;let t,n,i;for(t=r-an,n=0;t%_d===$n;t/=_d,n++);for(i=_d;i<r&&Xme(i,e,r)!==r-an;i++);if(n===1){const a=(r+an)/IS;return function(c,u){const f=c.pow(u,a);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const s=(t+an)/_d;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=n,f=o.pow(o.mul(o.ONE,i),t),l=o.pow(c,s),d=o.pow(c,t);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<u&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const y=o.pow(f,an<<BigInt(u-h-1));f=o.sqr(y),l=o.mul(l,y),d=o.mul(d,f),u=h}return l}}function t6e(r){if(r%IS===Yme){const e=(r+an)/IS;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%WB===HB){const e=(r-HB)/WB;return function(n,i){const s=n.mul(i,_d),a=n.pow(s,e),o=n.mul(i,a),c=n.mul(n.mul(o,_d),a),u=n.mul(o,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),i))throw new Error("Cannot find square root");return u}}return e6e(r)}const r6e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function n6e(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=r6e.reduce((n,i)=>(n[i]="function",n),e);return d5(r,t)}function i6e(r,e,t){if(t<$n)throw new Error("Expected power > 0");if(t===$n)return r.ONE;if(t===an)return e;let n=r.ONE,i=e;for(;t>$n;)t&an&&(n=r.mul(n,i)),i=r.sqr(i),t>>=an;return n}function s6e(r,e){const t=new Array(e.length),n=e.reduce((s,a,o)=>r.is0(a)?s:(t[o]=s,r.mul(s,a)),r.ONE),i=r.inv(n);return e.reduceRight((s,a,o)=>r.is0(a)?s:(t[o]=r.mul(s,t[o]),r.mul(s,a)),i),t}function GK(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function a6e(r,e,t=!1,n={}){if(r<=$n)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=GK(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=t6e(r),o=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:YI(i),ZERO:$n,ONE:an,create:c=>xs(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return $n<=c&&c<r},is0:c=>c===$n,isOdd:c=>(c&an)===an,neg:c=>xs(-c,r),eql:(c,u)=>c===u,sqr:c=>xs(c*c,r),add:(c,u)=>xs(c+u,r),sub:(c,u)=>xs(c-u,r),mul:(c,u)=>xs(c*u,r),pow:(c,u)=>i6e(o,c,u),div:(c,u)=>xs(c*RS(u,r),r),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>RS(c,r),sqrt:n.sqrt||(c=>a(o,c)),invertBatch:c=>s6e(o,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>t?JI(c,s):Rm(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?ZI(c):Sh(c)}});return Object.freeze(o)}function QK(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function ZK(r){const e=QK(r);return e+Math.ceil(e/2)}function o6e(r,e,t=!1){const n=r.length,i=QK(e),s=ZK(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const a=t?Sh(r):ZI(r),o=xs(a,e-an)+an;return t?JI(o,i):Rm(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const c6e=BigInt(0),tE=BigInt(1);function u6e(r,e){const t=(i,s)=>{const a=s.negate();return i?a:s},n=i=>{const s=Math.ceil(e/i)+1,a=2**(i-1);return{windows:s,windowSize:a}};return{constTimeNegate:t,unsafeLadder(i,s){let a=r.ZERO,o=i;for(;s>c6e;)s&tE&&(a=a.add(o)),o=o.double(),s>>=tE;return a},precomputeWindow(i,s){const{windows:a,windowSize:o}=n(s),c=[];let u=i,f=u;for(let l=0;l<a;l++){f=u,c.push(f);for(let d=1;d<o;d++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(i,s,a){const{windows:o,windowSize:c}=n(i);let u=r.ZERO,f=r.BASE;const l=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let y=0;y<o;y++){const p=y*c;let g=Number(a&l);a>>=h,g>c&&(g-=d,a+=tE);const m=p,v=p+Math.abs(g)-1,b=y%2!==0,_=g<0;g===0?f=f.add(t(b,s[m])):u=u.add(t(_,s[v]))}return{p:u,f}},wNAFCached(i,s,a,o){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,o(u))),this.wNAF(c,u,a)}}}function JK(r){return n6e(r.Fp),d5(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...GK(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function f6e(r){const e=JK(r);d5(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:l6e,hexToBytes:d6e}=Jme,Ud={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=Ud;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:l6e(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=Ud,t=typeof r=="string"?d6e(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=Ud._parseInt(t.subarray(2)),{d:a,l:o}=Ud._parseInt(s);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(r){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,a=i.length/2,o=t(s),c=t(a);return`30${t(a+s+4)}02${c}${i}02${o}${n}`}},Zu=BigInt(0),Ba=BigInt(1);BigInt(2);const KB=BigInt(3);BigInt(4);function h6e(r){const e=f6e(r),{Fp:t}=e,n=e.toBytes||((y,p,g)=>{const m=p.toAffine();return Jg(Uint8Array.from([4]),t.toBytes(m.x),t.toBytes(m.y))}),i=e.fromBytes||(y=>{const p=y.subarray(1),g=t.fromBytes(p.subarray(0,t.BYTES)),m=t.fromBytes(p.subarray(t.BYTES,2*t.BYTES));return{x:g,y:m}});function s(y){const{a:p,b:g}=e,m=t.sqr(y),v=t.mul(m,y);return t.add(t.add(v,t.mul(y,p)),g)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function a(y){return typeof y=="bigint"&&Zu<y&&y<e.n}function o(y){if(!a(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){const{allowedPrivateKeyLengths:p,nByteLength:g,wrapPrivateKey:m,n:v}=e;if(p&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=Cm(y)),typeof y!="string"||!p.includes(y.length))throw new Error("Invalid key");y=y.padStart(g*2,"0")}let b;try{b=typeof y=="bigint"?y:Sh(_o("private key",y,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof y}`)}return m&&(b=xs(b,v)),o(b),b}const u=new Map;function f(y){if(!(y instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(p,g,m){if(this.px=p,this.py=g,this.pz=m,p==null||!t.isValid(p))throw new Error("x required");if(g==null||!t.isValid(g))throw new Error("y required");if(m==null||!t.isValid(m))throw new Error("z required")}static fromAffine(p){const{x:g,y:m}=p||{};if(!p||!t.isValid(g)||!t.isValid(m))throw new Error("invalid affine point");if(p instanceof l)throw new Error("projective point not allowed");const v=b=>t.eql(b,t.ZERO);return v(g)&&v(m)?l.ZERO:new l(g,m,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const g=t.invertBatch(p.map(m=>m.pz));return p.map((m,v)=>m.toAffine(g[v])).map(l.fromAffine)}static fromHex(p){const g=l.fromAffine(i(_o("pointHex",p)));return g.assertValidity(),g}static fromPrivateKey(p){return l.BASE.multiply(c(p))}_setWindowSize(p){this._WINDOW_SIZE=p,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:p,y:g}=this.toAffine();if(!t.isValid(p)||!t.isValid(g))throw new Error("bad point: x or y not FE");const m=t.sqr(g),v=s(p);if(!t.eql(m,v))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:p}=this.toAffine();if(t.isOdd)return!t.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){f(p);const{px:g,py:m,pz:v}=this,{px:b,py:_,pz:C}=p,N=t.eql(t.mul(g,C),t.mul(b,v)),x=t.eql(t.mul(m,C),t.mul(_,v));return N&&x}negate(){return new l(this.px,t.neg(this.py),this.pz)}double(){const{a:p,b:g}=e,m=t.mul(g,KB),{px:v,py:b,pz:_}=this;let C=t.ZERO,N=t.ZERO,x=t.ZERO,I=t.mul(v,v),$=t.mul(b,b),j=t.mul(_,_),O=t.mul(v,b);return O=t.add(O,O),x=t.mul(v,_),x=t.add(x,x),C=t.mul(p,x),N=t.mul(m,j),N=t.add(C,N),C=t.sub($,N),N=t.add($,N),N=t.mul(C,N),C=t.mul(O,C),x=t.mul(m,x),j=t.mul(p,j),O=t.sub(I,j),O=t.mul(p,O),O=t.add(O,x),x=t.add(I,I),I=t.add(x,I),I=t.add(I,j),I=t.mul(I,O),N=t.add(N,I),j=t.mul(b,_),j=t.add(j,j),I=t.mul(j,O),C=t.sub(C,I),x=t.mul(j,$),x=t.add(x,x),x=t.add(x,x),new l(C,N,x)}add(p){f(p);const{px:g,py:m,pz:v}=this,{px:b,py:_,pz:C}=p;let N=t.ZERO,x=t.ZERO,I=t.ZERO;const $=e.a,j=t.mul(e.b,KB);let O=t.mul(g,b),E=t.mul(m,_),S=t.mul(v,C),A=t.add(g,m),w=t.add(b,_);A=t.mul(A,w),w=t.add(O,E),A=t.sub(A,w),w=t.add(g,v);let P=t.add(b,C);return w=t.mul(w,P),P=t.add(O,S),w=t.sub(w,P),P=t.add(m,v),N=t.add(_,C),P=t.mul(P,N),N=t.add(E,S),P=t.sub(P,N),I=t.mul($,w),N=t.mul(j,S),I=t.add(N,I),N=t.sub(E,I),I=t.add(E,I),x=t.mul(N,I),E=t.add(O,O),E=t.add(E,O),S=t.mul($,S),w=t.mul(j,w),E=t.add(E,S),S=t.sub(O,S),S=t.mul($,S),w=t.add(w,S),O=t.mul(E,w),x=t.add(x,O),O=t.mul(P,w),N=t.mul(A,N),N=t.sub(N,O),O=t.mul(A,E),I=t.mul(P,I),I=t.add(I,O),new l(N,x,I)}subtract(p){return this.add(p.negate())}is0(){return this.equals(l.ZERO)}wNAF(p){return h.wNAFCached(this,u,p,g=>{const m=t.invertBatch(g.map(v=>v.pz));return g.map((v,b)=>v.toAffine(m[b])).map(l.fromAffine)})}multiplyUnsafe(p){const g=l.ZERO;if(p===Zu)return g;if(o(p),p===Ba)return this;const{endo:m}=e;if(!m)return h.unsafeLadder(this,p);let{k1neg:v,k1:b,k2neg:_,k2:C}=m.splitScalar(p),N=g,x=g,I=this;for(;b>Zu||C>Zu;)b&Ba&&(N=N.add(I)),C&Ba&&(x=x.add(I)),I=I.double(),b>>=Ba,C>>=Ba;return v&&(N=N.negate()),_&&(x=x.negate()),x=new l(t.mul(x.px,m.beta),x.py,x.pz),N.add(x)}multiply(p){o(p);let g=p,m,v;const{endo:b}=e;if(b){const{k1neg:_,k1:C,k2neg:N,k2:x}=b.splitScalar(g);let{p:I,f:$}=this.wNAF(C),{p:j,f:O}=this.wNAF(x);I=h.constTimeNegate(_,I),j=h.constTimeNegate(N,j),j=new l(t.mul(j.px,b.beta),j.py,j.pz),m=I.add(j),v=$.add(O)}else{const{p:_,f:C}=this.wNAF(g);m=_,v=C}return l.normalizeZ([m,v])[0]}multiplyAndAddUnsafe(p,g,m){const v=l.BASE,b=(C,N)=>N===Zu||N===Ba||!C.equals(v)?C.multiplyUnsafe(N):C.multiply(N),_=b(this,g).add(b(p,m));return _.is0()?void 0:_}toAffine(p){const{px:g,py:m,pz:v}=this,b=this.is0();p==null&&(p=b?t.ONE:t.inv(v));const _=t.mul(g,p),C=t.mul(m,p),N=t.mul(v,p);if(b)return{x:t.ZERO,y:t.ZERO};if(!t.eql(N,t.ONE))throw new Error("invZ was invalid");return{x:_,y:C}}isTorsionFree(){const{h:p,isTorsionFree:g}=e;if(p===Ba)return!0;if(g)return g(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:g}=e;return p===Ba?this:g?g(l,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return this.assertValidity(),n(l,this,p)}toHex(p=!0){return Cm(this.toRawBytes(p))}}l.BASE=new l(e.Gx,e.Gy,t.ONE),l.ZERO=new l(t.ZERO,t.ONE,t.ZERO);const d=e.nBitLength,h=u6e(l,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:a}}function p6e(r){const e=JK(r);return d5(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function y6e(r){const e=p6e(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function a(w){return Zu<w&&w<t.ORDER}function o(w){return xs(w,n)}function c(w){return RS(w,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:d}=h6e({...e,toBytes(w,P,k){const D=P.toAffine(),T=t.toBytes(D.x),M=Jg;return k?M(Uint8Array.from([P.hasEvenY()?2:3]),T):M(Uint8Array.from([4]),T,t.toBytes(D.y))},fromBytes(w){const P=w.length,k=w[0],D=w.subarray(1);if(P===i&&(k===2||k===3)){const T=Sh(D);if(!a(T))throw new Error("Point is not on curve");const M=l(T);let L=t.sqrt(M);const K=(L&Ba)===Ba;return(k&1)===1!==K&&(L=t.neg(L)),{x:T,y:L}}else if(P===s&&k===4){const T=t.fromBytes(D.subarray(0,t.BYTES)),M=t.fromBytes(D.subarray(t.BYTES,2*t.BYTES));return{x:T,y:M}}else throw new Error(`Point of length ${P} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),h=w=>Cm(Rm(w,e.nByteLength));function y(w){const P=n>>Ba;return w>P}function p(w){return y(w)?o(-w):w}const g=(w,P,k)=>Sh(w.slice(P,k));class m{constructor(P,k,D){this.r=P,this.s=k,this.recovery=D,this.assertValidity()}static fromCompact(P){const k=e.nByteLength;return P=_o("compactSignature",P,k*2),new m(g(P,0,k),g(P,k,2*k))}static fromDER(P){const{r:k,s:D}=Ud.toSig(_o("DER",P));return new m(k,D)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(P){return new m(this.r,this.s,P)}recoverPublicKey(P){const{r:k,s:D,recovery:T}=this,M=x(_o("msgHash",P));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const L=T===2||T===3?k+e.n:k;if(L>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=T&1?"03":"02",Y=u.fromHex(K+h(L)),re=c(L),ne=o(-M*re),ae=o(D*re),ie=u.BASE.multiplyAndAddUnsafe(Y,ne,ae);if(!ie)throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Im(this.toDERHex())}toDERHex(){return Ud.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Im(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(w){try{return f(w),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const w=ZK(e.n);return o6e(e.randomBytes(w),e.n)},precompute(w=8,P=u.BASE){return P._setWindowSize(w),P.multiply(BigInt(3)),P}};function b(w,P=!0){return u.fromPrivateKey(w).toRawBytes(P)}function _(w){const P=w instanceof Uint8Array,k=typeof w=="string",D=(P||k)&&w.length;return P?D===i||D===s:k?D===2*i||D===2*s:w instanceof u}function C(w,P,k=!0){if(_(w))throw new Error("first arg must be private key");if(!_(P))throw new Error("second arg must be public key");return u.fromHex(P).multiply(f(w)).toRawBytes(k)}const N=e.bits2int||function(w){const P=Sh(w),k=w.length*8-e.nBitLength;return k>0?P>>BigInt(k):P},x=e.bits2int_modN||function(w){return o(N(w))},I=YI(e.nBitLength);function $(w){if(typeof w!="bigint")throw new Error("bigint expected");if(!(Zu<=w&&w<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Rm(w,e.nByteLength)}function j(w,P,k=O){if(["recovered","canonical"].some(oe=>oe in k))throw new Error("sign() legacy options not supported");const{hash:D,randomBytes:T}=e;let{lowS:M,prehash:L,extraEntropy:K}=k;M==null&&(M=!0),w=_o("msgHash",w),L&&(w=_o("prehashed msgHash",D(w)));const Y=x(w),re=f(P),ne=[$(re),$(Y)];if(K!=null){const oe=K===!0?T(t.BYTES):K;ne.push(_o("extraEntropy",oe))}const ae=Jg(...ne),ie=Y;function fe(oe){const ce=N(oe);if(!d(ce))return;const xe=c(ce),ge=u.BASE.multiply(ce).toAffine(),me=o(ge.x);if(me===Zu)return;const Le=o(xe*o(ie+me*re));if(Le===Zu)return;let Oe=(ge.x===me?0:2)|Number(ge.y&Ba),Ue=Le;return M&&y(Le)&&(Ue=p(Le),Oe^=1),new m(me,Ue,Oe)}return{seed:ae,k2sig:fe}}const O={lowS:e.lowS,prehash:!1},E={lowS:e.lowS,prehash:!1};function S(w,P,k=O){const{seed:D,k2sig:T}=j(w,P,k),M=e;return KK(M.hash.outputLen,M.nByteLength,M.hmac)(D,T)}u.BASE._setWindowSize(8);function A(w,P,k,D=E){var ge;const T=w;if(P=_o("msgHash",P),k=_o("publicKey",k),"strict"in D)throw new Error("options.strict was renamed to lowS");const{lowS:M,prehash:L}=D;let K,Y;try{if(typeof T=="string"||T instanceof Uint8Array)try{K=m.fromDER(T)}catch(me){if(!(me instanceof Ud.Err))throw me;K=m.fromCompact(T)}else if(typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint"){const{r:me,s:Le}=T;K=new m(me,Le)}else throw new Error("PARSE");Y=u.fromHex(k)}catch(me){if(me.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(M&&K.hasHighS())return!1;L&&(P=e.hash(P));const{r:re,s:ne}=K,ae=x(P),ie=c(ne),fe=o(ae*ie),oe=o(re*ie),ce=(ge=u.BASE.multiplyAndAddUnsafe(Y,fe,oe))==null?void 0:ge.toAffine();return ce?o(ce.x)===re:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:C,sign:S,verify:A,ProjectivePoint:u,Signature:m,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function m6e(r){return{hash:r,hmac:(e,...t)=>R4(r,e,Vye(...t)),randomBytes:Hye}}function b6e(r,e){const t=n=>y6e({...r,...m6e(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YK=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),GB=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),g6e=BigInt(1),NS=BigInt(2),QB=(r,e)=>(r+e/NS)/e;function v6e(r){const e=YK,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),u=r*r*r%e,f=u*u*r%e,l=Ea(f,t,e)*f%e,d=Ea(l,t,e)*f%e,h=Ea(d,NS,e)*u%e,y=Ea(h,i,e)*h%e,p=Ea(y,s,e)*y%e,g=Ea(p,o,e)*p%e,m=Ea(g,c,e)*g%e,v=Ea(m,o,e)*p%e,b=Ea(v,t,e)*f%e,_=Ea(b,a,e)*y%e,C=Ea(_,n,e)*u%e,N=Ea(C,NS,e);if(!OS.eql(OS.sqr(N),r))throw new Error("Cannot find square root");return N}const OS=a6e(YK,void 0,void 0,{sqrt:v6e}),ml=b6e({a:BigInt(0),b:BigInt(7),Fp:OS,n:GB,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=GB,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-g6e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),o=QB(s*r,e),c=QB(-n*r,e);let u=xs(r-o*t-c*i,e),f=xs(-o*n-c*s,e);const l=u>a,d=f>a;if(l&&(u=e-u),d&&(f=e-f),u>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:l,k1:u,k2neg:d,k2:f}}}},y6);BigInt(0);ml.ProjectivePoint;const ep="0x0000000000000000000000000000000000000000",Nx="0x0000000000000000000000000000000000000000000000000000000000000000",XK=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eG=BigInt("1000000000000000000"),tG=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rG=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),nG=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iG="",XI=`Ethereum Signed Message:
`,ZB=BigInt(0),JB=BigInt(1),YB=BigInt(2),XB=BigInt(27),e$=BigInt(28),H8=BigInt(35),qp={};function t$(r){return Rs(yr(r),32)}var yy,gc,my,th;const wo=class wo{constructor(e,t,n,i){le(this,yy);le(this,gc);le(this,my);le(this,th);hu(e,qp,"Signature"),Q(this,yy,t),Q(this,gc,n),Q(this,my,i),Q(this,th,null)}get r(){return F(this,yy)}set r(e){ee(ff(e)===32,"invalid r","value",e),Q(this,yy,we(e))}get s(){return ee(parseInt(F(this,gc).substring(0,3))<8,"non-canonical s; use ._s","s",F(this,gc)),F(this,gc)}set s(e){ee(ff(e)===32,"invalid s","value",e),Q(this,gc,we(e))}get _s(){return F(this,gc)}isValid(){return parseInt(F(this,gc).substring(0,3))<8}get v(){return F(this,my)}set v(e){const t=ot(e,"value");ee(t===27||t===28,"invalid v","v",e),Q(this,my,t)}get networkV(){return F(this,th)}get legacyChainId(){const e=this.networkV;return e==null?null:wo.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=De(this.s);return this.yParity&&(e[0]|=128),we(e)}get compactSerialized(){return _t([this.r,this.yParityAndS])}get serialized(){return _t([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new wo(qp,this.r,this._s,this.v);return this.networkV&&Q(e,th,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=He(e,"v");return t==XB||t==e$?ZB:(ee(t>=H8,"invalid EIP-155 v","v",e),(t-H8)/YB)}static getChainIdV(e,t){return He(e)*YB+BigInt(35+t-27)}static getNormalizedV(e){const t=He(e);return t===ZB||t===XB?27:t===JB||t===e$?28:(ee(t>=H8,"invalid v","v",e),t&JB?27:28)}static from(e){function t(u,f){ee(u,f,"signature",e)}if(e==null)return new wo(qp,Nx,Nx,27);if(typeof e=="string"){const u=De(e,"signature");if(u.length===64){const f=we(u.slice(0,32)),l=u.slice(32,64),d=l[0]&128?28:27;return l[0]&=127,new wo(qp,f,we(l),d)}if(u.length===65){const f=we(u.slice(0,32)),l=we(u.slice(32,64)),d=wo.getNormalizedV(u[64]);return new wo(qp,f,l,d)}t(!1,"invalid raw signature length")}if(e instanceof wo)return e.clone();const n=e.r;t(n!=null,"missing r");const i=t$(n),s=function(u,f){if(u!=null)return t$(u);if(f!=null){t(Gt(f,32),"invalid yParityAndS");const l=De(f);return l[0]&=127,we(l)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:a,v:o}=function(u,f,l){if(u!=null){const d=He(u);return{networkV:d>=H8?d:void 0,v:wo.getNormalizedV(d)}}if(f!=null)return t(Gt(f,32),"invalid yParityAndS"),{v:De(f)[0]&128?28:27};if(l!=null){switch(ot(l,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new wo(qp,i,s,o);return a&&Q(c,th,a),t(e.yParity==null||ot(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};yy=new WeakMap,gc=new WeakMap,my=new WeakMap,th=new WeakMap;let Bi=wo;var ju;const Md=class Md{constructor(e){le(this,ju);ee(ff(e)===32,"invalid private key","privateKey","[REDACTED]"),Q(this,ju,we(e))}get privateKey(){return F(this,ju)}get publicKey(){return Md.computePublicKey(F(this,ju))}get compressedPublicKey(){return Md.computePublicKey(F(this,ju),!0)}sign(e){ee(ff(e)===32,"invalid digest length","digest",e);const t=ml.sign(gn(e),gn(F(this,ju)),{lowS:!0});return Bi.from({r:Go(t.r,32),s:Go(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Md.computePublicKey(e);return we(ml.getSharedSecret(gn(F(this,ju)),De(t),!1))}static computePublicKey(e,t){let n=De(e,"key");if(n.length===32){const s=ml.getPublicKey(n,!!t);return we(s)}if(n.length===64){const s=new Uint8Array(65);s[0]=4,s.set(n,1),n=s}const i=ml.ProjectivePoint.fromHex(n);return we(i.toRawBytes(t))}static recoverPublicKey(e,t){ee(ff(e)===32,"invalid digest length","digest",e);const n=Bi.from(t);let i=ml.Signature.fromCompact(gn(_t([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const s=i.recoverPublicKey(gn(e));return ee(s!=null,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,n){const i=ml.ProjectivePoint.fromHex(Md.computePublicKey(e).substring(2)),s=ml.ProjectivePoint.fromHex(Md.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!n)}};ju=new WeakMap;let ca=Md;function sG(){Bf.lock(),Kt.lock(),Yo.lock(),oa.lock(),$f.lock(),Lf.lock(),Uf.lock(),ji.lock(),m6.lock(),oa.lock()}const x6e=BigInt(0),w6e=BigInt(36);function r$(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=De(Kt(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const eR={};for(let r=0;r<10;r++)eR[String(r)]=String(r);for(let r=0;r<26;r++)eR[String.fromCharCode(65+r)]=String(10+r);const n$=15;function aG(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>eR[n]).join("");for(;e.length>=n$;){let n=e.substring(0,n$);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const E6e=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function A6e(r){r=r.toLowerCase();let e=x6e;for(let t=0;t<r.length;t++)e=e*w6e+E6e[r[t]];return e}function pt(r){if(ee(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=r$(r);return ee(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ee(r.substring(2,4)===aG(r),"bad icap checksum","address",r);let e=A6e(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return r$("0x"+e)}ee(!1,"invalid address","address",r)}function oG(r){let e=BigInt(pt(r)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+aG("XE00"+e)+e}function k4(r){const e=pt(r.from);let n=He(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,pt(Yt(Kt(Qo([e,n])),12))}function cG(r,e,t){const n=pt(r),i=De(e,"salt"),s=De(t,"initCodeHash");return ee(i.length===32,"salt must be 32 bytes","salt",e),ee(s.length===32,"initCodeHash must be 32 bytes","initCodeHash",t),pt(Yt(Kt(_t(["0xff",n,i,s])),12))}function D4(r){return r&&typeof r.getAddress=="function"}function uG(r){try{return pt(r),!0}catch{}return!1}async function rE(r,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ye(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),ee(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),pt(t)}function ln(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?pt(r):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),rE(r,e.resolveName(r)));if(D4(r))return rE(r,r.getAddress());if(r&&typeof r.then=="function")return rE(r,r);ee(!1,"unsupported addressable value","target",r)}const Nu={};function Ye(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new Fn(Nu,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function Bt(r,e){return new Fn(Nu,`bytes${e||""}`,r,{size:e})}const i$=Symbol.for("_ethers_typed");var rh;const Ou=class Ou{constructor(e,t,n,i){H(this,"type");H(this,"value");le(this,rh);H(this,"_typedSymbol");i==null&&(i=null),hu(Nu,e,"Typed"),je(this,{_typedSymbol:i$,type:t,value:n}),Q(this,rh,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return F(this,rh)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return F(this,rh)===!0?-1:F(this,rh)===!1?this.value.length:null}static from(e,t){return new Ou(Nu,e,t)}static uint8(e){return Ye(e,8)}static uint16(e){return Ye(e,16)}static uint24(e){return Ye(e,24)}static uint32(e){return Ye(e,32)}static uint40(e){return Ye(e,40)}static uint48(e){return Ye(e,48)}static uint56(e){return Ye(e,56)}static uint64(e){return Ye(e,64)}static uint72(e){return Ye(e,72)}static uint80(e){return Ye(e,80)}static uint88(e){return Ye(e,88)}static uint96(e){return Ye(e,96)}static uint104(e){return Ye(e,104)}static uint112(e){return Ye(e,112)}static uint120(e){return Ye(e,120)}static uint128(e){return Ye(e,128)}static uint136(e){return Ye(e,136)}static uint144(e){return Ye(e,144)}static uint152(e){return Ye(e,152)}static uint160(e){return Ye(e,160)}static uint168(e){return Ye(e,168)}static uint176(e){return Ye(e,176)}static uint184(e){return Ye(e,184)}static uint192(e){return Ye(e,192)}static uint200(e){return Ye(e,200)}static uint208(e){return Ye(e,208)}static uint216(e){return Ye(e,216)}static uint224(e){return Ye(e,224)}static uint232(e){return Ye(e,232)}static uint240(e){return Ye(e,240)}static uint248(e){return Ye(e,248)}static uint256(e){return Ye(e,256)}static uint(e){return Ye(e,256)}static int8(e){return Ye(e,-8)}static int16(e){return Ye(e,-16)}static int24(e){return Ye(e,-24)}static int32(e){return Ye(e,-32)}static int40(e){return Ye(e,-40)}static int48(e){return Ye(e,-48)}static int56(e){return Ye(e,-56)}static int64(e){return Ye(e,-64)}static int72(e){return Ye(e,-72)}static int80(e){return Ye(e,-80)}static int88(e){return Ye(e,-88)}static int96(e){return Ye(e,-96)}static int104(e){return Ye(e,-104)}static int112(e){return Ye(e,-112)}static int120(e){return Ye(e,-120)}static int128(e){return Ye(e,-128)}static int136(e){return Ye(e,-136)}static int144(e){return Ye(e,-144)}static int152(e){return Ye(e,-152)}static int160(e){return Ye(e,-160)}static int168(e){return Ye(e,-168)}static int176(e){return Ye(e,-176)}static int184(e){return Ye(e,-184)}static int192(e){return Ye(e,-192)}static int200(e){return Ye(e,-200)}static int208(e){return Ye(e,-208)}static int216(e){return Ye(e,-216)}static int224(e){return Ye(e,-224)}static int232(e){return Ye(e,-232)}static int240(e){return Ye(e,-240)}static int248(e){return Ye(e,-248)}static int256(e){return Ye(e,-256)}static int(e){return Ye(e,-256)}static bytes1(e){return Bt(e,1)}static bytes2(e){return Bt(e,2)}static bytes3(e){return Bt(e,3)}static bytes4(e){return Bt(e,4)}static bytes5(e){return Bt(e,5)}static bytes6(e){return Bt(e,6)}static bytes7(e){return Bt(e,7)}static bytes8(e){return Bt(e,8)}static bytes9(e){return Bt(e,9)}static bytes10(e){return Bt(e,10)}static bytes11(e){return Bt(e,11)}static bytes12(e){return Bt(e,12)}static bytes13(e){return Bt(e,13)}static bytes14(e){return Bt(e,14)}static bytes15(e){return Bt(e,15)}static bytes16(e){return Bt(e,16)}static bytes17(e){return Bt(e,17)}static bytes18(e){return Bt(e,18)}static bytes19(e){return Bt(e,19)}static bytes20(e){return Bt(e,20)}static bytes21(e){return Bt(e,21)}static bytes22(e){return Bt(e,22)}static bytes23(e){return Bt(e,23)}static bytes24(e){return Bt(e,24)}static bytes25(e){return Bt(e,25)}static bytes26(e){return Bt(e,26)}static bytes27(e){return Bt(e,27)}static bytes28(e){return Bt(e,28)}static bytes29(e){return Bt(e,29)}static bytes30(e){return Bt(e,30)}static bytes31(e){return Bt(e,31)}static bytes32(e){return Bt(e,32)}static address(e){return new Ou(Nu,"address",e)}static bool(e){return new Ou(Nu,"bool",!!e)}static bytes(e){return new Ou(Nu,"bytes",e)}static string(e){return new Ou(Nu,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Ou(Nu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===i$}static dereference(e,t){if(Ou.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};rh=new WeakMap;let Fn=Ou;class _6e extends Df{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=Fn.dereference(t,"string");try{n=pt(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return pt(Go(e.readValue(),20))}}class S6e extends Df{constructor(t){super(t.name,t.type,"_",t.dynamic);H(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}}function fG(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(u=>{const f=u.localName;return ye(f,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),ye(!c[f],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:t}),c[f]=!0,t[f]})}else ee(!1,"invalid tuple value","tuple",t);ee(e.length===n.length,"types/value length mismatch","tuple",t);let i=new MS,s=new MS,a=[];e.forEach((c,u)=>{let f=n[u];if(c.dynamic){let l=s.length;c.encode(s,f);let d=i.writeUpdatableValue();a.push(h=>{d(h+l)})}else c.encode(i,f)}),a.forEach(c=>{c(i.length)});let o=r.appendWriter(i);return o+=r.appendWriter(s),o}function lG(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(s=>{let a=null;if(s.dynamic){let o=r.readIndex(),c=i.subReader(o);try{a=s.decode(c)}catch(u){if(Zr(u,"BUFFER_OVERRUN"))throw u;a=u,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(r)}catch(o){if(Zr(o,"BUFFER_OVERRUN"))throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}if(a==null)throw new Error("investigate");t.push(a),n.push(s.localName||null)}),k0.fromItems(t,n)}class M6e extends Df{constructor(t,n,i){const s=t.type+"["+(n>=0?n:"")+"]",a=n===-1||t.dynamic;super("array",s,i,a);H(this,"coder");H(this,"length");je(this,{coder:t,length:n})}defaultValue(){const t=this.coder.defaultValue(),n=[];for(let i=0;i<this.length;i++)n.push(t);return n}encode(t,n){const i=Fn.dereference(n,"array");Array.isArray(i)||this._throwError("expected array value",i);let s=this.length;s===-1&&(s=i.length,t.writeValue(i.length)),A4(i.length,s,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let o=0;o<i.length;o++)a.push(this.coder);return fG(t,a,i)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),ye(n*is<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*is,length:t.dataLength}));let i=[];for(let s=0;s<n;s++)i.push(new S6e(this.coder));return lG(t,i)}}class P6e extends Df{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=Fn.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class dG extends Df{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=gn(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class T6e extends dG{constructor(e){super("bytes",e)}decode(e){return we(super.decode(e))}}class C6e extends Df{constructor(t,n){let i="bytes"+String(t);super(i,i,n,!1);H(this,"size");je(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let i=gn(Fn.dereference(n,this.type));return i.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(i)}decode(t){return we(t.readBytes(this.size))}}const I6e=new Uint8Array([]);class R6e extends Df{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(I6e)}decode(e){return e.readBytes(0),null}}const N6e=BigInt(0),O6e=BigInt(1),k6e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class D6e extends Df{constructor(t,n,i){const s=(n?"int":"uint")+t*8;super(s,s,i,!1);H(this,"size");H(this,"signed");je(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let i=He(Fn.dereference(n,this.type)),s=af(k6e,is*8);if(this.signed){let a=af(s,this.size*8-1);(i>a||i<-(a+O6e))&&this._throwError("value out-of-bounds",n),i=l5(i,8*is)}else(i<N6e||i>af(s,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(i)}decode(t){let n=af(t.readValue(),this.size*8);return this.signed&&(n=Sm(n,this.size*8)),n}}class B6e extends dG{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,on(Fn.dereference(t,"string")))}decode(e){return Tf(super.decode(e))}}class W8 extends Df{constructor(t,n){let i=!1;const s=[];t.forEach(o=>{o.dynamic&&(i=!0),s.push(o.type)});const a="tuple("+s.join(",")+")";super("tuple",a,n,i);H(this,"coders");je(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const n=this.coders.reduce((i,s)=>{const a=s.localName;return a&&(i[a]||(i[a]=0),i[a]++),i},{});return this.coders.forEach((i,s)=>{let a=i.localName;!a||n[a]!==1||(a==="length"&&(a="_length"),t[a]==null&&(t[a]=t[s]))}),Object.freeze(t)}encode(t,n){const i=Fn.dereference(n,"tuple");return fG(t,this.coders,i)}decode(t){return lG(t,this.coders)}}function nE(r,e){return{address:pt(r),storageKeys:e.map((t,n)=>(ee(Gt(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function pu(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(ee(t.length===2,"invalid slot set",`value[${n}]`,t),nE(t[0],t[1])):(ee(t!=null&&typeof t=="object","invalid address-slot set","value",r),nE(t.address,t.storageKeys)));ee(r!=null&&typeof r=="object","invalid access list","value",r);const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,s)=>(i[s]=!0,i),{});return nE(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function B4(r){return{address:pt(r.address),nonce:He(r.nonce!=null?r.nonce:0),chainId:He(r.chainId!=null?r.chainId:0),signature:Bi.from(r.signature)}}function Ep(r){let e;return typeof r=="string"?e=ca.computePublicKey(r,!1):e=r.publicKey,pt(Kt("0x"+e.substring(4)).substring(26))}function b6(r,e){return Ep(ca.recoverPublicKey(r,e))}const Bn=BigInt(0),$6e=BigInt(2),L6e=BigInt(27),U6e=BigInt(28),F6e=BigInt(35),j6e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iE=4096*32;function q6e(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return De(r.blobToKzgCommitment(we(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return De(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return De(r.blobToKZGCommitment(we(n)));ee(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,i)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return De(r.computeBlobProof(we(n),we(i)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,i);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return De(r.computeBlobKZGProof(we(n),we(i)));ee(!1,"unsupported KZG library","kzg",r)}}}function s$(r,e){let t=r.toString(16);for(;t.length<2;)t="0"+t;return t+=ji(e).substring(4),"0x"+t}function g6(r){return r==="0x"?null:pt(r)}function $4(r,e){try{return pu(r)}catch(t){ee(!1,t.message,e,r)}}function V6e(r,e){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const t=[];for(let n=0;n<r.length;n++){const i=r[n];if(!Array.isArray(i))throw new Error(`authorization[${n}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!i[1])throw new Error(`authorization[${n}]: null address`);t.push({address:g6(i[1]),nonce:Xt(i[2],"nonce"),chainId:Xt(i[0],"chainId"),signature:Bi.from({yParity:Ap(i[3],"yParity"),r:Rs(i[4],32),s:Rs(i[5],32)})})}return t}catch(t){ee(!1,t.message,e,r)}}function Ap(r,e){return r==="0x"?0:ot(r,e)}function Xt(r,e){if(r==="0x")return Bn;const t=He(r,e);return ee(t<=j6e,"value exceeds uint size",e,t),t}function It(r,e){const t=He(r,"value"),n=yr(t);return ee(n.length<=32,"value too large",`tx.${e}`,t),n}function L4(r){return pu(r).map(e=>[e.address,e.storageKeys])}function z6e(r){return r.map(e=>[It(e.chainId,"chainId"),e.address,It(e.nonce,"nonce"),It(e.signature.yParity,"yParity"),yr(e.signature.r),yr(e.signature.s)])}function H6e(r,e){ee(Array.isArray(r),`invalid ${e}`,"value",r);for(let t=0;t<r.length;t++)ee(Gt(r[t],32),"invalid ${ param } hash",`value[${t}]`,r[t]);return r}function W6e(r){const e=wp(r);ee(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);const t={type:0,nonce:Ap(e[0],"nonce"),gasPrice:Xt(e[1],"gasPrice"),gasLimit:Xt(e[2],"gasLimit"),to:g6(e[3]),value:Xt(e[4],"value"),data:we(e[5]),chainId:Bn};if(e.length===6)return t;const n=Xt(e[6],"v"),i=Xt(e[7],"r"),s=Xt(e[8],"s");if(i===Bn&&s===Bn)t.chainId=n;else{let a=(n-F6e)/$6e;a<Bn&&(a=Bn),t.chainId=a,ee(a!==Bn||n===L6e||n===U6e,"non-canonical legacy v","v",e[6]),t.signature=Bi.from({r:Rs(e[7],32),s:Rs(e[8],32),v:n})}return t}function K6e(r,e){const t=[It(r.nonce,"nonce"),It(r.gasPrice||0,"gasPrice"),It(r.gasLimit,"gasLimit"),r.to||"0x",It(r.value,"value"),r.data];let n=Bn;if(r.chainId!=Bn)n=He(r.chainId,"tx.chainId"),ee(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){const s=r.signature.legacyChainId;s!=null&&(n=s)}if(!e)return n!==Bn&&(t.push(yr(n)),t.push("0x"),t.push("0x")),Qo(t);let i=BigInt(27+e.yParity);return n!==Bn?i=Bi.getChainIdV(n,e.v):BigInt(e.v)!==i&&ee(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(yr(i)),t.push(yr(e.r)),t.push(yr(e.s)),Qo(t)}function U4(r,e){let t;try{if(t=Ap(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{ee(!1,"invalid yParity","yParity",e[0])}const n=Rs(e[1],32),i=Rs(e[2],32),s=Bi.from({r:n,s:i,yParity:t});r.signature=s}function G6e(r){const e=wp(De(r).slice(1));ee(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",we(r));const t={type:2,chainId:Xt(e[0],"chainId"),nonce:Ap(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:g6(e[5]),value:Xt(e[6],"value"),data:we(e[7]),accessList:$4(e[8],"accessList")};return e.length===9||U4(t,e.slice(9)),t}function Q6e(r,e){const t=[It(r.chainId,"chainId"),It(r.nonce,"nonce"),It(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),It(r.maxFeePerGas||0,"maxFeePerGas"),It(r.gasLimit,"gasLimit"),r.to||"0x",It(r.value,"value"),r.data,L4(r.accessList||[])];return e&&(t.push(It(e.yParity,"yParity")),t.push(yr(e.r)),t.push(yr(e.s))),_t(["0x02",Qo(t)])}function Z6e(r){const e=wp(De(r).slice(1));ee(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",we(r));const t={type:1,chainId:Xt(e[0],"chainId"),nonce:Ap(e[1],"nonce"),gasPrice:Xt(e[2],"gasPrice"),gasLimit:Xt(e[3],"gasLimit"),to:g6(e[4]),value:Xt(e[5],"value"),data:we(e[6]),accessList:$4(e[7],"accessList")};return e.length===8||U4(t,e.slice(8)),t}function J6e(r,e){const t=[It(r.chainId,"chainId"),It(r.nonce,"nonce"),It(r.gasPrice||0,"gasPrice"),It(r.gasLimit,"gasLimit"),r.to||"0x",It(r.value,"value"),r.data,L4(r.accessList||[])];return e&&(t.push(It(e.yParity,"recoveryParam")),t.push(yr(e.r)),t.push(yr(e.s))),_t(["0x01",Qo(t)])}function Y6e(r){let e=wp(De(r).slice(1)),t="3",n=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const s=e[1],a=e[2],o=e[3];ee(Array.isArray(s),"invalid network format: blobs not an array","fields[1]",s),ee(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),ee(Array.isArray(o),"invalid network format: proofs not an array","fields[3]",o),ee(s.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),ee(s.length===o.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let c=0;c<e[1].length;c++)n.push({data:s[c],commitment:a[c],proof:o[c]});e=e[0]}ee(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",we(r));const i={type:3,chainId:Xt(e[0],"chainId"),nonce:Ap(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:g6(e[5]),value:Xt(e[6],"value"),data:we(e[7]),accessList:$4(e[8],"accessList"),maxFeePerBlobGas:Xt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),ee(i.to!=null,`invalid address for transaction type: ${t}`,"data",r),ee(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let s=0;s<i.blobVersionedHashes.length;s++)ee(Gt(i.blobVersionedHashes[s],32),`invalid blobVersionedHash at index ${s}: must be length 32`,"data",r);return e.length===11||U4(i,e.slice(11)),i}function X6e(r,e,t){const n=[It(r.chainId,"chainId"),It(r.nonce,"nonce"),It(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),It(r.maxFeePerGas||0,"maxFeePerGas"),It(r.gasLimit,"gasLimit"),r.to||ep,It(r.value,"value"),r.data,L4(r.accessList||[]),It(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),H6e(r.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(It(e.yParity,"yParity")),n.push(yr(e.r)),n.push(yr(e.s)),t)?_t(["0x03",Qo([n,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):_t(["0x03",Qo(n)])}function ebe(r){const e=wp(De(r).slice(1));ee(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",we(r));const t={type:4,chainId:Xt(e[0],"chainId"),nonce:Ap(e[1],"nonce"),maxPriorityFeePerGas:Xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Xt(e[4],"gasLimit"),to:g6(e[5]),value:Xt(e[6],"value"),data:we(e[7]),accessList:$4(e[8],"accessList"),authorizationList:V6e(e[9],"authorizationList")};return e.length===10||U4(t,e.slice(10)),t}function tbe(r,e){const t=[It(r.chainId,"chainId"),It(r.nonce,"nonce"),It(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),It(r.maxFeePerGas||0,"maxFeePerGas"),It(r.gasLimit,"gasLimit"),r.to||"0x",It(r.value,"value"),r.data,L4(r.accessList||[]),z6e(r.authorizationList||[])];return e&&(t.push(It(e.yParity,"yParity")),t.push(yr(e.r)),t.push(yr(e.s))),_t(["0x04",Qo(t)])}var To,by,gy,vy,xy,wy,Ey,Ay,_y,Sy,My,Py,nh,Dl,vc,Bl,Ty,Cy,Yv;const yc=class yc{constructor(){le(this,Cy);le(this,To);le(this,by);le(this,gy);le(this,vy);le(this,xy);le(this,wy);le(this,Ey);le(this,Ay);le(this,_y);le(this,Sy);le(this,My);le(this,Py);le(this,nh);le(this,Dl);le(this,vc);le(this,Bl);le(this,Ty);Q(this,To,null),Q(this,by,null),Q(this,vy,0),Q(this,xy,Bn),Q(this,wy,null),Q(this,Ey,null),Q(this,Ay,null),Q(this,gy,"0x"),Q(this,_y,Bn),Q(this,Sy,Bn),Q(this,My,null),Q(this,Py,null),Q(this,nh,null),Q(this,Dl,null),Q(this,vc,null),Q(this,Bl,null),Q(this,Ty,null)}get type(){return F(this,To)}set type(e){switch(e){case null:Q(this,To,null);break;case 0:case"legacy":Q(this,To,0);break;case 1:case"berlin":case"eip-2930":Q(this,To,1);break;case 2:case"london":case"eip-1559":Q(this,To,2);break;case 3:case"cancun":case"eip-4844":Q(this,To,3);break;case 4:case"pectra":case"eip-7702":Q(this,To,4);break;default:ee(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=F(this,by);return e==null&&this.type===3?ep:e}set to(e){Q(this,by,e==null?null:pt(e))}get nonce(){return F(this,vy)}set nonce(e){Q(this,vy,ot(e,"value"))}get gasLimit(){return F(this,xy)}set gasLimit(e){Q(this,xy,He(e))}get gasPrice(){const e=F(this,wy);return e==null&&(this.type===0||this.type===1)?Bn:e}set gasPrice(e){Q(this,wy,e==null?null:He(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=F(this,Ey);return e??(this.type===2||this.type===3?Bn:null)}set maxPriorityFeePerGas(e){Q(this,Ey,e==null?null:He(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=F(this,Ay);return e??(this.type===2||this.type===3?Bn:null)}set maxFeePerGas(e){Q(this,Ay,e==null?null:He(e,"maxFeePerGas"))}get data(){return F(this,gy)}set data(e){Q(this,gy,we(e))}get value(){return F(this,_y)}set value(e){Q(this,_y,He(e,"value"))}get chainId(){return F(this,Sy)}set chainId(e){Q(this,Sy,He(e))}get signature(){return F(this,My)||null}set signature(e){Q(this,My,e==null?null:Bi.from(e))}get accessList(){const e=F(this,Py)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){Q(this,Py,e==null?null:pu(e))}get authorizationList(){const e=F(this,Ty)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){Q(this,Ty,e==null?null:e.map(t=>B4(t)))}get maxFeePerBlobGas(){const e=F(this,nh);return e==null&&this.type===3?Bn:e}set maxFeePerBlobGas(e){Q(this,nh,e==null?null:He(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=F(this,Dl);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){ee(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)ee(Gt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}Q(this,Dl,e)}get blobs(){return F(this,Bl)==null?null:F(this,Bl).map(e=>Object.assign({},e))}set blobs(e){if(e==null){Q(this,Bl,null);return}const t=[],n=[];for(let i=0;i<e.length;i++){const s=e[i];if(h6(s)){ye(F(this,vc),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=De(s);if(ee(a.length<=iE,"blob is too large",`blobs[${i}]`,s),a.length!==iE){const u=new Uint8Array(iE);u.set(a),a=u}const o=F(this,vc).blobToKzgCommitment(a),c=we(F(this,vc).computeBlobKzgProof(a,o));t.push({data:we(a),commitment:we(o),proof:c}),n.push(s$(1,o))}else{const a=we(s.commitment);t.push({data:we(s.data),commitment:a,proof:we(s.proof)}),n.push(s$(1,a))}}Q(this,Bl,t),Q(this,Dl,n)}get kzg(){return F(this,vc)}set kzg(e){e==null?Q(this,vc,null):Q(this,vc,q6e(e))}get hash(){return this.signature==null?null:Kt(ve(this,Cy,Yv).call(this,!0,!1))}get unsignedHash(){return Kt(this.unsignedSerialized)}get from(){return this.signature==null?null:b6(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ca.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return ve(this,Cy,Yv).call(this,!0,!0)}get unsignedSerialized(){return ve(this,Cy,Yv).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=F(this,nh)!=null||F(this,Dl);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return this.type!=null?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(i&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return yc.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new yc;if(typeof e=="string"){const n=De(e);if(n[0]>=127)return yc.from(W6e(n));switch(n[0]){case 1:return yc.from(Z6e(n));case 2:return yc.from(G6e(n));case 3:return yc.from(Y6e(n));case 4:return yc.from(ebe(n))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new yc;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Bi.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(ee(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ee(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(ee(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ee(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};To=new WeakMap,by=new WeakMap,gy=new WeakMap,vy=new WeakMap,xy=new WeakMap,wy=new WeakMap,Ey=new WeakMap,Ay=new WeakMap,_y=new WeakMap,Sy=new WeakMap,My=new WeakMap,Py=new WeakMap,nh=new WeakMap,Dl=new WeakMap,vc=new WeakMap,Bl=new WeakMap,Ty=new WeakMap,Cy=new WeakSet,Yv=function(e,t){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return K6e(this,n);case 1:return J6e(this,n);case 2:return Q6e(this,n);case 3:return X6e(this,n,t?this.blobs:null);case 4:return tbe(this,n)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let D0=yc;function F4(r){return ee(typeof r.address=="string","invalid address for hashAuthorization","auth.address",r),Kt(_t(["0x05",Qo([r.chainId!=null?yr(r.chainId):"0x",pt(r.address),r.nonce!=null?yr(r.nonce):"0x"])]))}function hG(r,e){return b6(F4(r),e)}function Zo(r){return Kt(on(r))}var rbe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const a$=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),o$=4;function nbe(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,s=[0,1];for(let C=1;C<n;C++)s.push(i+=t());let a=t(),o=e;e+=a;let c=0,u=0;function f(){return c==0&&(u=u<<8|r[e++],c=8),u>>--c&1}const l=31,d=2**l,h=d>>>1,y=h>>1,p=d-1;let g=0;for(let C=0;C<l;C++)g=g<<1|f();let m=[],v=0,b=d;for(;;){let C=Math.floor(((g-v+1)*i-1)/b),N=0,x=n;for(;x-N>1;){let j=N+x>>>1;C<s[j]?x=j:N=j}if(N==0)break;m.push(N);let I=v+Math.floor(b*s[N]/i),$=v+Math.floor(b*s[N+1]/i)-1;for(;!((I^$)&h);)g=g<<1&p|f(),I=I<<1&p,$=$<<1&p|1;for(;I&~$&y;)g=g&h|g<<1&p>>>1|f(),I=I<<1^h,$=($^h)<<1|h|1;v=I,b=1+$-I}let _=n-4;return m.map(C=>{switch(C-_){case 3:return _+65792+(r[o++]<<16|r[o++]<<8|r[o++]);case 2:return _+256+(r[o++]<<8|r[o++]);case 1:return _+r[o++];default:return C-1}})}function ibe(r){let e=0;return()=>r[e++]}function pG(r){return ibe(nbe(sbe(r)))}function sbe(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=r.length,n=new Uint8Array(6*t>>3);for(let i=0,s=0,a=0,o=0;i<t;i++)o=o<<6|e[r.charCodeAt(i)],a+=6,a>=8&&(n[s++]=o>>(a-=8));return n}function abe(r){return r&1?~r>>1:r>>1}function obe(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=abe(e());return t}function Yg(r,e=0){let t=[];for(;;){let n=r(),i=r();if(!i)break;e+=n;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function yG(r){return Xg(()=>{let e=Yg(r);if(e.length)return e})}function mG(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(cbe(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(ube(t,r))}return e.flat()}function Xg(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function bG(r,e,t){let n=Array(r).fill().map(()=>[]);for(let i=0;i<e;i++)obe(r,t).forEach((s,a)=>n[a].push(s));return n}function cbe(r,e){let t=1+e(),n=e(),i=Xg(e);return bG(i.length,1+r,e).flatMap((a,o)=>{let[c,...u]=a;return Array(i[o]).fill().map((f,l)=>{let d=l*n;return[c+l*t,u.map(h=>h+d)]})})}function ube(r,e){let t=1+e();return bG(t,1+r,e).map(i=>[i[0],i.slice(1)])}function fbe(r){let e=[],t=Yg(r);return i(n([]),[]),e;function n(s){let a=r(),o=Xg(()=>{let c=Yg(r).map(u=>t[u]);if(c.length)return n(c)});return{S:a,B:o,Q:s}}function i({S:s,B:a},o,c){if(!(s&4&&c===o[o.length-1])){s&2&&(c=o[o.length-1]),s&1&&e.push(o);for(let u of a)for(let f of u.Q)i(u,[...o,f],c)}}}function lbe(r){return r.toString(16).toUpperCase().padStart(2,"0")}function gG(r){return`{${lbe(r)}}`}function dbe(r){let e=[];for(let t=0,n=r.length;t<n;){let i=r.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Nm(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let n=[];for(let i=0;i<t;)n.push(String.fromCodePoint(...r.slice(i,i+=4096)));return n.join("")}function hbe(r,e){let t=r.length,n=t-e.length;for(let i=0;n==0&&i<t;i++)n=r[i]-e[i];return n}var pbe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const e2=44032,Ox=4352,kx=4449,Dx=4519,vG=19,xG=21,Om=28,Bx=xG*Om,ybe=vG*Bx,mbe=e2+ybe,bbe=Ox+vG,gbe=kx+xG,vbe=Dx+Om;function gb(r){return r>>24&255}function wG(r){return r&16777215}let kS,c$,DS,Xv;function xbe(){let r=pG(pbe);kS=new Map(yG(r).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),c$=new Set(Yg(r)),DS=new Map,Xv=new Map;for(let[e,t]of mG(r)){if(!c$.has(e)&&t.length==2){let[n,i]=t,s=Xv.get(n);s||(s=new Map,Xv.set(n,s)),s.set(i,e)}DS.set(e,t.reverse())}}function EG(r){return r>=e2&&r<mbe}function wbe(r,e){if(r>=Ox&&r<bbe&&e>=kx&&e<gbe)return e2+(r-Ox)*Bx+(e-kx)*Om;if(EG(r)&&e>Dx&&e<vbe&&(r-e2)%Om==0)return r+(e-Dx);{let t=Xv.get(r);return t&&(t=t.get(e),t)?t:-1}}function AG(r){kS||xbe();let e=[],t=[],n=!1;function i(s){let a=kS.get(s);a&&(n=!0,s|=a),e.push(s)}for(let s of r)for(;;){if(s<128)e.push(s);else if(EG(s)){let a=s-e2,o=a/Bx|0,c=a%Bx/Om|0,u=a%Om;i(Ox+o),i(kx+c),u>0&&i(Dx+u)}else{let a=DS.get(s);a?t.push(...a):i(s)}if(!t.length)break;s=t.pop()}if(n&&e.length>1){let s=gb(e[0]);for(let a=1;a<e.length;a++){let o=gb(e[a]);if(o==0||s<=o){s=o;continue}let c=a-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(s=gb(e[--c]),s<=o))break}s=gb(e[a])}}return e}function Ebe(r){let e=[],t=[],n=-1,i=0;for(let s of r){let a=gb(s),o=wG(s);if(n==-1)a==0?n=o:e.push(o);else if(i>0&&i>=a)a==0?(e.push(n,...t),t.length=0,n=o):t.push(o),i=a;else{let c=wbe(n,o);c>=0?n=c:i==0&&a==0?(e.push(n),n=o):(t.push(o),i=a)}}return n>=0&&e.push(n,...t),e}function _G(r){return AG(r).map(wG)}function Abe(r){return Ebe(AG(r))}const u$=45,SG=".",MG=65039,PG=1,$x=r=>Array.from(r);function t2(r,e){return r.P.has(e)||r.Q.has(e)}class _be extends Array{get is_emoji(){return!0}}let BS,TG,Fd,$S,CG,Z1,sE,r1,xd,f$,LS;function tR(){if(BS)return;let r=pG(rbe);const e=()=>Yg(r),t=()=>new Set(e()),n=(f,l)=>l.forEach(d=>f.add(d));BS=new Map(mG(r)),TG=t(),Fd=e(),$S=new Set(e().map(f=>Fd[f])),Fd=new Set(Fd),CG=t(),t();let i=yG(r),s=r();const a=()=>{let f=new Set;return e().forEach(l=>n(f,i[l])),n(f,e()),f};Z1=Xg(f=>{let l=Xg(r).map(d=>d+96);if(l.length){let d=f>=s;l[0]-=32,l=Nm(l),d&&(l=`Restricted[${l}]`);let h=a(),y=a(),p=!r();return{N:l,P:h,Q:y,M:p,R:d}}}),sE=t(),r1=new Map;let o=e().concat($x(sE)).sort((f,l)=>f-l);o.forEach((f,l)=>{let d=r(),h=o[l]=d?o[l-d]:{V:[],M:new Map};h.V.push(f),sE.has(f)||r1.set(f,h)});for(let{V:f,M:l}of new Set(r1.values())){let d=[];for(let y of f){let p=Z1.filter(m=>t2(m,y)),g=d.find(({G:m})=>p.some(v=>m.has(v)));g||(g={G:new Set,V:[]},d.push(g)),g.V.push(y),n(g.G,p)}let h=d.flatMap(y=>$x(y.G));for(let{G:y,V:p}of d){let g=new Set(h.filter(m=>!y.has(m)));for(let m of p)l.set(m,g)}}xd=new Set;let c=new Set;const u=f=>xd.has(f)?c.add(f):xd.add(f);for(let f of Z1){for(let l of f.P)u(l);for(let l of f.Q)u(l)}for(let f of xd)!r1.has(f)&&!c.has(f)&&r1.set(f,PG);n(xd,_G(xd)),f$=fbe(r).map(f=>_be.from(f)).sort(hbe),LS=new Map;for(let f of f$){let l=[LS];for(let d of f){let h=l.map(y=>{let p=y.get(d);return p||(p=new Map,y.set(d,p)),p});d===MG?l.push(...h):l=h}for(let d of l)d.V=f}}function rR(r){return(IG(r)?"":`${nR(j4([r]))} `)+gG(r)}function nR(r){return`"${r}"`}function Sbe(r){if(r.length>=4&&r[2]==u$&&r[3]==u$)throw new Error(`invalid label extension: "${Nm(r.slice(0,4))}"`)}function Mbe(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function Pbe(r){let e=r[0],t=a$.get(e);if(t)throw zb(`leading ${t}`);let n=r.length,i=-1;for(let s=1;s<n;s++){e=r[s];let a=a$.get(e);if(a){if(i==s)throw zb(`${t} + ${a}`);i=s+1,t=a}}if(i==n)throw zb(`trailing ${t}`)}function j4(r,e=1/0,t=gG){let n=[];Tbe(r[0])&&n.push(""),r.length>e&&(e>>=1,r=[...r.slice(0,e),8230,...r.slice(-e)]);let i=0,s=r.length;for(let a=0;a<s;a++){let o=r[a];IG(o)&&(n.push(Nm(r.slice(i,a))),n.push(t(o)),i=a+1)}return n.push(Nm(r.slice(i,s))),n.join("")}function Tbe(r){return tR(),Fd.has(r)}function IG(r){return tR(),CG.has(r)}function Cbe(r){return Obe(Ibe(r,Abe,Bbe))}function Ibe(r,e,t){if(!r)return[];tR();let n=0;return r.split(SG).map(i=>{let s=dbe(i),a={input:s,offset:n};n+=s.length+1;try{let o=a.tokens=Dbe(s,e,t),c=o.length,u;if(!c)throw new Error("empty label");let f=a.output=o.flat();if(Mbe(f),!(a.emoji=c>1||o[0].is_emoji)&&f.every(d=>d<128))Sbe(f),u="ASCII";else{let d=o.flatMap(h=>h.is_emoji?[]:h);if(!d.length)u="Emoji";else{if(Fd.has(f[0]))throw zb("leading combining mark");for(let p=1;p<c;p++){let g=o[p];if(!g.is_emoji&&Fd.has(g[0]))throw zb(`emoji + combining mark: "${Nm(o[p-1])} + ${j4([g[0]])}"`)}Pbe(f);let h=$x(new Set(d)),[y]=Nbe(h);kbe(y,d),Rbe(y,h),u=y.N}}a.type=u}catch(o){a.error=o}return a})}function Rbe(r,e){let t,n=[];for(let i of e){let s=r1.get(i);if(s===PG)return;if(s){let a=s.M.get(i);if(t=t?t.filter(o=>a.has(o)):$x(a),!t.length)return}else n.push(i)}if(t){for(let i of t)if(n.every(s=>t2(i,s)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function Nbe(r){let e=Z1;for(let t of r){let n=e.filter(i=>t2(i,t));if(!n.length)throw Z1.some(i=>t2(i,t))?NG(e[0],t):RG(t);if(e=n,n.length==1)break}return e}function Obe(r){return r.map(({input:e,error:t,output:n})=>{if(t){let i=t.message;throw new Error(r.length==1?i:`Invalid label ${nR(j4(e,63))}: ${i}`)}return Nm(n)}).join(SG)}function RG(r){return new Error(`disallowed character: ${rR(r)}`)}function NG(r,e){let t=rR(e),n=Z1.find(i=>i.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function zb(r){return new Error(`illegal placement: ${r}`)}function kbe(r,e){for(let t of e)if(!t2(r,t))throw NG(r,t);if(r.M){let t=_G(e);for(let n=1,i=t.length;n<i;n++)if($S.has(t[n])){let s=n+1;for(let a;s<i&&$S.has(a=t[s]);s++)for(let o=n;o<s;o++)if(t[o]==a)throw new Error(`duplicate non-spacing marks: ${rR(a)}`);if(s-n>o$)throw new Error(`excessive non-spacing marks: ${nR(j4(t.slice(n-1,s)))} (${s-n}/${o$})`);n=s}}}function Dbe(r,e,t){let n=[],i=[];for(r=r.slice().reverse();r.length;){let s=$be(r);if(s)i.length&&(n.push(e(i)),i=[]),n.push(t(s));else{let a=r.pop();if(xd.has(a))i.push(a);else{let o=BS.get(a);if(o)i.push(...o);else if(!TG.has(a))throw RG(a)}}}return i.length&&n.push(e(i)),n}function Bbe(r){return r.filter(e=>e!=MG)}function $be(r,e){let t=LS,n,i=r.length;for(;i&&(t=t.get(r[--i]),!!t);){let{V:s}=t;s&&(n=s,r.length=i)}return n}const OG=new Uint8Array(32);OG.fill(0);function l$(r){return ee(r.length!==0,"invalid ENS name; empty component","comp",r),r}function iR(r){const e=on(sR(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(l$(e.slice(n,i))),n=i+1);return ee(n<e.length,"invalid ENS name; empty component","name",r),t.push(l$(e.slice(n))),t}function sR(r){try{if(r.length===0)throw new Error("empty label");return Cbe(r)}catch(e){ee(!1,`invalid ENS name (${e.message})`,"name",r)}}function kG(r){try{return iR(r).length!==0}catch{}return!1}function r2(r){ee(typeof r=="string","invalid ENS name; not a string","name",r),ee(r.length,"invalid ENS name (empty label)","name",r);let e=OG;const t=iR(r);for(;t.length;)e=Kt(_t([e,Kt(t.pop())]));return we(e)}function aR(r,e){const t=e??63;return ee(t<=255,"DNS encoded label cannot exceed 255","length",t),we(_t(iR(r).map(n=>{ee(n.length<=t,`label ${JSON.stringify(r)} exceeds ${t} bytes`,"name",r);const i=new Uint8Array(n.length+1);return i.set(n,1),i[0]=i.length-1,i})))+"00"}function q4(r){return typeof r=="string"&&(r=on(r)),Kt(_t([on(XI),on(String(r.length)),r]))}function DG(r,e){const t=q4(r);return b6(t,e)}const Lbe=new RegExp("^bytes([0-9]+)$"),Ube=new RegExp("^(u?int)([0-9]*)$"),Fbe=new RegExp("^(.*)\\[([0-9]*)\\]$");function BG(r,e,t){switch(r){case"address":return De(t?Rs(e,32):pt(e));case"string":return on(e);case"bytes":return De(e);case"bool":return e=e?"0x01":"0x00",De(t?Rs(e,32):e)}let n=r.match(Ube);if(n){let i=n[1]==="int",s=parseInt(n[2]||"256");return ee((!n[2]||n[2]===String(s))&&s%8===0&&s!==0&&s<=256,"invalid number type","type",r),t&&(s=256),i&&(e=l5(e,s)),De(Rs(yr(e),s/8))}if(n=r.match(Lbe),n){const i=parseInt(n[1]);return ee(String(i)===n[1]&&i!==0&&i<=32,"invalid bytes type","type",r),ee(ff(e)===i,`invalid value for ${r}`,"value",e),t?De(f5(e,32)):e}if(n=r.match(Fbe),n&&Array.isArray(e)){const i=n[1],s=parseInt(n[2]||String(e.length));ee(s===e.length,`invalid array length for ${r}`,"value",e);const a=[];return e.forEach(function(o){a.push(BG(i,o,!0))}),De(_t(a))}ee(!1,"invalid type","type",r)}function V4(r,e){ee(r.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const t=[];return r.forEach(function(n,i){t.push(BG(n,e[i]))}),we(_t(t))}function $G(r,e){return Kt(V4(r,e))}function LG(r,e){return ji(V4(r,e))}const UG=new Uint8Array(32);UG.fill(0);const jbe=BigInt(-1),FG=BigInt(0),jG=BigInt(1),qbe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Vbe(r){const e=De(r),t=e.length%32;return t?_t([e,UG.slice(t)]):we(e)}const zbe=Go(jG,32),Hbe=Go(FG,32),d$={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},aE=["name","version","chainId","verifyingContract","salt"];function h$(r){return function(e){return ee(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const Wbe={name:h$("name"),version:h$("version"),chainId:function(r){const e=He(r,"domain.chainId");return ee(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):Es(e)},verifyingContract:function(r){try{return pt(r).toLowerCase()}catch{}ee(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const e=De(r,"domain.salt");return ee(e.length===32,'invalid domain value "salt"',"domain.salt",r),we(e)}};function oE(r){{const e=r.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",n=parseInt(e[2]);ee(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",r);const i=af(qbe,t?n-1:n),s=t?(i+jG)*jbe:FG;return function(a){const o=He(a,"value");return ee(o>=s&&o<=i,`value out-of-bounds for ${r}`,"value",o),Go(t?l5(o,256):o,32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return ee(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(n){const i=De(n);return ee(i.length===t,`invalid length for ${r}`,"value",n),Vbe(n)}}}switch(r){case"address":return function(e){return Rs(pt(e),32)};case"bool":return function(e){return e?zbe:Hbe};case"bytes":return function(e){return Kt(e)};case"string":return function(e){return Zo(e)}}return null}function p$(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}function K8(r){const e=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:r}}var S2,qu,Iy,Aw,qG;const Ca=class Ca{constructor(e){le(this,Aw);H(this,"primaryType");le(this,S2);le(this,qu);le(this,Iy);Q(this,qu,new Map),Q(this,Iy,new Map);const t=new Map,n=new Map,i=new Map,s={};Object.keys(e).forEach(c=>{s[c]=e[c].map(({name:u,type:f})=>{let{base:l,index:d}=K8(f);return l==="int"&&!e.int&&(l="int256"),l==="uint"&&!e.uint&&(l="uint256"),{name:u,type:l+(d||"")}}),t.set(c,new Set),n.set(c,[]),i.set(c,new Set)}),Q(this,S2,JSON.stringify(s));for(const c in s){const u=new Set;for(const f of s[c]){ee(!u.has(f.name),`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(c)}`,"types",e),u.add(f.name);const l=K8(f.type).base;ee(l!==c,`circular type reference to ${JSON.stringify(l)}`,"types",e),!oE(l)&&(ee(n.has(l),`unknown type ${JSON.stringify(l)}`,"types",e),n.get(l).push(c),t.get(c).add(l))}}const a=Array.from(n.keys()).filter(c=>n.get(c).length===0);ee(a.length!==0,"missing primary type","types",e),ee(a.length===1,`ambiguous primary types or unused types: ${a.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),je(this,{primaryType:a[0]});function o(c,u){ee(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const f of t.get(c))if(n.has(f)){o(f,u);for(const l of u)i.get(l).add(f)}u.delete(c)}o(this.primaryType,new Set);for(const[c,u]of i){const f=Array.from(u);f.sort(),F(this,qu).set(c,p$(c,s[c])+f.map(l=>p$(l,s[l])).join(""))}}get types(){return JSON.parse(F(this,S2))}getEncoder(e){let t=F(this,Iy).get(e);return t||(t=ve(this,Aw,qG).call(this,e),F(this,Iy).set(e,t)),t}encodeType(e){const t=F(this,qu).get(e);return ee(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Kt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(oE(e))return n(e,t);const i=K8(e).array;if(i)return ee(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(a=>this._visit(i.prefix,a,n));const s=this.types[e];if(s)return s.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,t[o],n),a),{});ee(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ca(e)}static getPrimaryType(e){return Ca.from(e).primaryType}static hashStruct(e,t,n){return Ca.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(e[n]==null)continue;const i=d$[n];ee(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>aE.indexOf(n.name)-aE.indexOf(i.name)),Ca.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return _t(["0x1901",Ca.hashDomain(e),Ca.from(t).hash(n)])}static hash(e,t,n){return Kt(Ca.encode(e,t,n))}static async resolveNames(e,t,n,i){e=Object.assign({},e);for(const o in e)e[o]==null&&delete e[o];const s={};e.verifyingContract&&!Gt(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=Ca.from(t);a.visit(n,(o,c)=>(o==="address"&&!Gt(c,20)&&(s[c]="0x"),c));for(const o in s)s[o]=await i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&s[c]?s[c]:c),{domain:e,value:n}}static getPayload(e,t,n){Ca.hashDomain(e);const i={},s=[];aE.forEach(c=>{const u=e[c];u!=null&&(i[c]=Wbe[c](u),s.push({name:c,type:d$[c]}))});const a=Ca.from(t);t=a.types;const o=Object.assign({},t);return ee(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return we(De(u));if(c.match(/^u?int/))return He(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return ee(typeof u=="string","invalid string","value",u),u}ee(!1,"unsupported type","type",c)})}}};S2=new WeakMap,qu=new WeakMap,Iy=new WeakMap,Aw=new WeakSet,qG=function(e){{const i=oE(e);if(i)return i}const t=K8(e).array;if(t){const i=t.prefix,s=this.getEncoder(i);return a=>{ee(t.count===-1||t.count===a.length,`array length mismatch; expected length ${t.count}`,"value",a);let o=a.map(s);return F(this,qu).has(i)&&(o=o.map(Kt)),Kt(_t(o))}}const n=this.types[e];if(n){const i=Zo(F(this,qu).get(e));return s=>{const a=n.map(({name:o,type:c})=>{const u=this.getEncoder(c)(s[o]);return F(this,qu).has(c)?Kt(u):u});return a.unshift(i),_t(a)}}ee(!1,`unknown type: ${e}`,"type",e)};let Cf=Ca;function VG(r,e,t,n){return b6(Cf.hash(r,e,t),n)}function ss(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const Kbe="external public payable override",Gbe=ss(Kbe.split(" ")),zG="constant external internal payable private public pure view override",Qbe=ss(zG.split(" ")),HG="constructor error event fallback function receive struct",WG=ss(HG.split(" ")),KG="calldata memory storage payable indexed",Zbe=ss(KG.split(" ")),Jbe="tuple returns",Ybe=[HG,KG,Jbe,zG].join(" "),Xbe=ss(Ybe.split(" ")),ege={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},tge=new RegExp("^(\\s*)"),rge=new RegExp("^([0-9]+)"),nge=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),GG=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),QG=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var ei,Co,M2,US;const _w=class _w{constructor(e){le(this,M2);le(this,ei);le(this,Co);Q(this,ei,0),Q(this,Co,e.slice())}get offset(){return F(this,ei)}get length(){return F(this,Co).length-F(this,ei)}clone(){return new _w(F(this,Co))}reset(){Q(this,ei,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=ve(this,M2,US).call(this,F(this,ei)+1,e.match+1);return Q(this,ei,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;F(this,ei)<e.match-1;){const n=this.peek().linkNext;t.push(ve(this,M2,US).call(this,F(this,ei)+1,n)),Q(this,ei,n)}return Q(this,ei,e.match+1),t}peek(){if(F(this,ei)>=F(this,Co).length)throw new Error("out-of-bounds");return F(this,Co)[F(this,ei)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return kp(this,ei)._++,e}toString(){const e=[];for(let t=F(this,ei);t<F(this,Co).length;t++){const n=F(this,Co)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};ei=new WeakMap,Co=new WeakMap,M2=new WeakSet,US=function(e=0,t=0){return new _w(F(this,Co).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let Jo=_w;function H0(r){const e=[],t=a=>{const o=s<r.length?JSON.stringify(r[s]):"$EOI";throw new Error(`invalid token ${o} at ${s}: ${a}`)};let n=[],i=[],s=0;for(;s<r.length;){let a=r.substring(s),o=a.match(tge);o&&(s+=o[1].length,a=r.substring(s));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(c);let u=ege[a[0]]||"";if(u){if(c.type=u,c.text=a[0],s++,u==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(u=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=i.pop(),e[c.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let f=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const l=e.pop().text;f=l+f,e[e.length-1].value=ot(l)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=f}continue}if(o=a.match(nge),o){if(c.text=o[1],s+=c.text.length,Xbe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(QG)){c.type="TYPE";continue}c.type="ID";continue}if(o=a.match(rge),o){c.text=o[1],c.type="NUMBER",s+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`)}return new Jo(e.map(a=>Object.freeze(a)))}function y$(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function z4(r,e){if(e.peekKeyword(WG)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function If(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function ZG(r){let e=If(r,Qbe);return y$(e,ss("constant payable nonpayable".split(" "))),y$(e,ss("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function lf(r,e){return r.popParams().map(t=>xn.from(t,e))}function JG(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return He(r.pop().text);throw new Error("invalid gas")}return null}function tp(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const ige=new RegExp(/^(.*)\[([0-9]*)\]$/);function m$(r){const e=r.match(QG);if(ee(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);ee(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);ee(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const $r={},Ds=Symbol.for("_ethers_internal"),b$="_ParamTypeInternal",g$="_ErrorInternal",v$="_EventInternal",x$="_ConstructorInternal",w$="_FallbackInternal",E$="_FunctionInternal",A$="_StructInternal";var Ry,e3;const Ia=class Ia{constructor(e,t,n,i,s,a,o,c){le(this,Ry);H(this,"name");H(this,"type");H(this,"baseType");H(this,"indexed");H(this,"components");H(this,"arrayLength");H(this,"arrayChildren");if(hu(e,$r,"ParamType"),Object.defineProperty(this,Ds,{value:b$}),a&&(a=Object.freeze(a.slice())),i==="array"){if(o==null||c==null)throw new Error("")}else if(o!=null||c!=null)throw new Error("");if(i==="tuple"){if(a==null)throw new Error("")}else if(a!=null)throw new Error("");je(this,{name:t,type:n,baseType:i,indexed:s,components:a,arrayLength:o,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const s=JSON.parse(this.arrayChildren.format("json"));return s.name=n,s.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(s)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,s)=>n.components[s].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],i=[e];return ve(this,Ry,e3).call(this,n,e,t,s=>{i[0]=s}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(Ia.isParamType(e))return e;if(typeof e=="string")try{return Ia.from(H0(e),t)}catch{ee(!1,"invalid param type","obj",e)}else if(e instanceof Jo){let o="",c="",u=null;If(e,ss(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(p=>Ia.from(p)),o=`tuple(${u.map(p=>p.format()).join(",")})`):(o=m$(e.popType("TYPE")),c=o);let f=null,l=null;for(;e.length&&e.peekType("BRACKET");){const p=e.pop();f=new Ia($r,"",o,c,null,u,l,f),l=p.value,o+=p.text,c="array",u=null}let d=null;if(If(e,Zbe).has("indexed")){if(!t)throw new Error("");d=!0}const y=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ia($r,y,o,c,d,u,l,f)}const n=e.name;ee(!n||typeof n=="string"&&n.match(GG),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(ee(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let s=e.type,a=s.match(ige);if(a){const o=parseInt(a[2]||"-1"),c=Ia.from({type:a[1],components:e.components});return new Ia($r,n||"",s,"array",i,null,o,c)}if(s==="tuple"||s.startsWith("tuple(")||s.startsWith("(")){const o=e.components!=null?e.components.map(u=>Ia.from(u)):null;return new Ia($r,n||"",s,"tuple",i,o,null,null)}return s=m$(e.type),new Ia($r,n||"",s,s,i,null,null,null)}static isParamType(e){return e&&e[Ds]===b$}};Ry=new WeakSet,e3=function(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const a=this.arrayChildren,o=t.slice();o.forEach((c,u)=>{var f;ve(f=a,Ry,e3).call(f,e,c,n,l=>{o[u]=l})}),i(o);return}if(this.isTuple()){const a=this.components;let o;if(Array.isArray(t))o=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");o=a.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(o.length!==this.components.length)throw new Error("array is wrong length");o.forEach((c,u)=>{var f;ve(f=a[u],Ry,e3).call(f,e,c,n,l=>{o[u]=l})}),i(o);return}const s=n(this.type,t);s.then?e.push(async function(){i(await s)}()):i(s)};let xn=Ia;class Rf{constructor(e,t,n){H(this,"type");H(this,"inputs");hu(e,$r,"Fragment"),n=Object.freeze(n.slice()),je(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{Rf.from(JSON.parse(e))}catch{}return Rf.from(H0(e))}if(e instanceof Jo)switch(e.peekKeyword(WG)){case"constructor":return qo.from(e);case"error":return Oi.from(e);case"event":return qa.from(e);case"fallback":case"receive":return Bo.from(e);case"function":return Va.from(e);case"struct":return df.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return qo.from(e);case"error":return Oi.from(e);case"event":return qa.from(e);case"fallback":case"receive":return Bo.from(e);case"function":return Va.from(e);case"struct":return df.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ee(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return qo.isFragment(e)}static isError(e){return Oi.isFragment(e)}static isEvent(e){return qa.isFragment(e)}static isFunction(e){return Va.isFragment(e)}static isStruct(e){return df.isFragment(e)}}class v6 extends Rf{constructor(t,n,i,s){super(t,n,s);H(this,"name");ee(typeof i=="string"&&i.match(GG),"invalid identifier","name",i),s=Object.freeze(s.slice()),je(this,{name:i})}}function n2(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class Oi extends v6{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,Ds,{value:g$})}get selector(){return Zo(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+n2(e,this.inputs)),t.join(" ")}static from(e){if(Oi.isFragment(e))return e;if(typeof e=="string")return Oi.from(H0(e));if(e instanceof Jo){const t=z4("error",e),n=lf(e);return tp(e),new Oi($r,t,n)}return new Oi($r,e.name,e.inputs?e.inputs.map(xn.from):[])}static isFragment(e){return e&&e[Ds]===g$}}class qa extends v6{constructor(t,n,i,s){super(t,"event",n,i);H(this,"anonymous");Object.defineProperty(this,Ds,{value:v$}),je(this,{anonymous:s})}get topicHash(){return Zo(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+n2(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(s=>xn.from(s)),new qa($r,t,n,!1).topicHash}static from(t){if(qa.isFragment(t))return t;if(typeof t=="string")try{return qa.from(H0(t))}catch{ee(!1,"invalid event fragment","obj",t)}else if(t instanceof Jo){const n=z4("event",t),i=lf(t,!0),s=!!If(t,ss(["anonymous"])).has("anonymous");return tp(t),new qa($r,n,i,s)}return new qa($r,t.name,t.inputs?t.inputs.map(n=>xn.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Ds]===v$}}class qo extends Rf{constructor(t,n,i,s,a){super(t,n,i);H(this,"payable");H(this,"gas");Object.defineProperty(this,Ds,{value:x$}),je(this,{payable:s,gas:a})}format(t){if(ye(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[`constructor${n2(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(qo.isFragment(t))return t;if(typeof t=="string")try{return qo.from(H0(t))}catch{ee(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Jo){If(t,ss(["constructor"]));const n=lf(t),i=!!If(t,Gbe).has("payable"),s=JG(t);return tp(t),new qo($r,"constructor",n,i,s)}return new qo($r,"constructor",t.inputs?t.inputs.map(xn.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Ds]===x$}}class Bo extends Rf{constructor(t,n,i){super(t,"fallback",n);H(this,"payable");Object.defineProperty(this,Ds,{value:w$}),je(this,{payable:i})}format(t){const n=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:i})}return`${n}()${this.payable?" payable":""}`}static from(t){if(Bo.isFragment(t))return t;if(typeof t=="string")try{return Bo.from(H0(t))}catch{ee(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Jo){const n=t.toString(),i=t.peekKeyword(ss(["fallback","receive"]));if(ee(i,"type must be fallback or receive","obj",n),t.popKeyword(ss(["fallback","receive"]))==="receive"){const c=lf(t);return ee(c.length===0,"receive cannot have arguments","obj.inputs",c),If(t,ss(["payable"])),tp(t),new Bo($r,[],!0)}let a=lf(t);a.length?ee(a.length===1&&a[0].type==="bytes","invalid fallback inputs","obj.inputs",a.map(c=>c.format("minimal")).join(", ")):a=[xn.from("bytes")];const o=ZG(t);if(ee(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),If(t,ss(["returns"])).has("returns")){const c=lf(t);ee(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return tp(t),new Bo($r,a,o==="payable")}if(t.type==="receive")return new Bo($r,[],!0);if(t.type==="fallback"){const n=[xn.from("bytes")],i=t.stateMutability==="payable";return new Bo($r,n,i)}ee(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Ds]===w$}}class Va extends v6{constructor(t,n,i,s,a,o){super(t,"function",n,s);H(this,"constant");H(this,"outputs");H(this,"stateMutability");H(this,"payable");H(this,"gas");Object.defineProperty(this,Ds,{value:E$}),a=Object.freeze(a.slice()),je(this,{constant:i==="view"||i==="pure",gas:o,outputs:a,payable:i==="payable",stateMutability:i})}get selector(){return Zo(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+n2(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(n2(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(s=>xn.from(s)),new Va($r,t,"view",n,[],null).selector}static from(t){if(Va.isFragment(t))return t;if(typeof t=="string")try{return Va.from(H0(t))}catch{ee(!1,"invalid function fragment","obj",t)}else if(t instanceof Jo){const i=z4("function",t),s=lf(t),a=ZG(t);let o=[];If(t,ss(["returns"])).has("returns")&&(o=lf(t));const c=JG(t);return tp(t),new Va($r,i,a,s,o,c)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new Va($r,t.name,n,t.inputs?t.inputs.map(xn.from):[],t.outputs?t.outputs.map(xn.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Ds]===E$}}class df extends v6{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,Ds,{value:A$})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return df.from(H0(e))}catch{ee(!1,"invalid struct fragment","obj",e)}else if(e instanceof Jo){const t=z4("struct",e),n=lf(e);return tp(e),new df($r,t,n)}return new df($r,e.name,e.inputs?e.inputs.map(xn.from):[])}static isFragment(e){return e&&e[Ds]===A$}}const Xo=new Map;Xo.set(0,"GENERIC_PANIC");Xo.set(1,"ASSERT_FALSE");Xo.set(17,"OVERFLOW");Xo.set(18,"DIVIDE_BY_ZERO");Xo.set(33,"ENUM_RANGE_ERROR");Xo.set(34,"BAD_STORAGE_DATA");Xo.set(49,"STACK_UNDERFLOW");Xo.set(50,"ARRAY_RANGE_ERROR");Xo.set(65,"OUT_OF_MEMORY");Xo.set(81,"UNINITIALIZED_FUNCTION_CALL");const sge=new RegExp(/^bytes([0-9]*)$/),age=new RegExp(/^(u?int)([0-9]*)$/);let cE=null,_$=1024;function oge(r,e,t,n){let i="missing revert data",s=null;const a=null;let o=null;if(t){i="execution reverted";const u=De(t);if(t=we(t),u.length===0)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(u.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(we(u.slice(0,4))==="0x08c379a0")try{s=n.decode(["string"],u.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(we(u.slice(0,4))==="0x4e487b71")try{const f=Number(n.decode(["uint256"],u.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[f]},s=`Panic due to ${Xo.get(f)||"UNKNOWN"}(${f})`,i+=`: ${s}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const c={to:e.to?pt(e.to):null,data:e.data||"0x"};return e.from&&(c.from=pt(e.from)),Jt(i,"CALL_EXCEPTION",{action:r,data:t,reason:s,transaction:c,invocation:a,revert:o})}var $l,n1;const Sw=class Sw{constructor(){le(this,$l)}getDefaultValue(e){const t=e.map(i=>ve(this,$l,n1).call(this,xn.from(i)));return new W8(t,"_").defaultValue()}encode(e,t){A4(t.length,e.length,"types/values length mismatch");const n=e.map(a=>ve(this,$l,n1).call(this,xn.from(a))),i=new W8(n,"_"),s=new MS;return i.encode(s,t),s.data}decode(e,t,n){const i=e.map(a=>ve(this,$l,n1).call(this,xn.from(a)));return new W8(i,"_").decode(new PS(t,n,_$))}static _setDefaultMaxInflation(e){ee(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),_$=e}static defaultAbiCoder(){return cE==null&&(cE=new Sw),cE}static getBuiltinCallException(e,t,n){return oge(e,t,n,Sw.defaultAbiCoder())}};$l=new WeakSet,n1=function(e){if(e.isArray())return new M6e(ve(this,$l,n1).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new W8(e.components.map(n=>ve(this,$l,n1).call(this,n)),e.name);switch(e.baseType){case"address":return new _6e(e.name);case"bool":return new P6e(e.name);case"string":return new B6e(e.name);case"bytes":return new T6e(e.name);case"":return new R6e(e.name)}let t=e.type.match(age);if(t){let n=parseInt(t[2]||"256");return ee(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new D6e(n/8,t[1]==="int",e.name)}if(t=e.type.match(sge),t){let n=parseInt(t[1]);return ee(n!==0&&n<=32,"invalid bytes length","param",e),new C6e(n,e.name)}ee(!1,"invalid type","type",e.type)};let B0=Sw;function YG(r){const e=on(r);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return f5(e,32)}function XG(r){const e=De(r,"bytes");if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let t=31;for(;e[t-1]===0;)t--;return Tf(e.slice(0,t))}class oR{constructor(e,t,n){H(this,"fragment");H(this,"name");H(this,"signature");H(this,"topic");H(this,"args");const i=e.name,s=e.format();je(this,{fragment:e,name:i,signature:s,topic:t,args:n})}}class cR{constructor(e,t,n,i){H(this,"fragment");H(this,"name");H(this,"args");H(this,"signature");H(this,"selector");H(this,"value");const s=e.name,a=e.format();je(this,{fragment:e,name:s,args:n,signature:a,selector:t,value:i})}}class uR{constructor(e,t,n){H(this,"fragment");H(this,"name");H(this,"args");H(this,"signature");H(this,"selector");const i=e.name,s=e.format();je(this,{fragment:e,name:i,args:n,signature:s,selector:t})}}class Lx{constructor(e){H(this,"hash");H(this,"_isIndexed");je(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const S$={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},M$={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&S$[r.toString()]&&(e=S$[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};var xc,wc,Ec,Pi,Zc,t3,r3;const Pd=class Pd{constructor(e){le(this,Zc);H(this,"fragments");H(this,"deploy");H(this,"fallback");H(this,"receive");le(this,xc);le(this,wc);le(this,Ec);le(this,Pi);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,Q(this,Ec,new Map),Q(this,xc,new Map),Q(this,wc,new Map);const n=[];for(const a of t)try{n.push(Rf.from(a))}catch(o){console.log(`[Warning] Invalid Fragment ${JSON.stringify(a)}:`,o.message)}je(this,{fragments:Object.freeze(n)});let i=null,s=!1;Q(this,Pi,this.getAbiCoder()),this.fragments.forEach((a,o)=>{let c;switch(a.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}je(this,{deploy:a});return;case"fallback":a.inputs.length===0?s=!0:(ee(!i||a.payable!==i.payable,"conflicting fallback fragments",`fragments[${o}]`,a),i=a,s=i.payable);return;case"function":c=F(this,Ec);break;case"event":c=F(this,wc);break;case"error":c=F(this,xc);break;default:return}const u=a.format();c.has(u)||c.set(u,a)}),this.deploy||je(this,{deploy:qo.from("constructor()")}),je(this,{fallback:i,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return B0.defaultAbiCoder()}getFunctionName(e){const t=ve(this,Zc,t3).call(this,e,null,!1);return ee(t,"no matching function","key",e),t.name}hasFunction(e){return!!ve(this,Zc,t3).call(this,e,null,!1)}getFunction(e,t){return ve(this,Zc,t3).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(F(this,Ec).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(F(this,Ec).get(i),n)}}getEventName(e){const t=ve(this,Zc,r3).call(this,e,null,!1);return ee(t,"no matching event","key",e),t.name}hasEvent(e){return!!ve(this,Zc,r3).call(this,e,null,!1)}getEvent(e,t){return ve(this,Zc,r3).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(F(this,wc).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(F(this,wc).get(i),n)}}getError(e,t){if(Gt(e)){const i=e.toLowerCase();if(M$[i])return Oi.from(M$[i].signature);for(const s of F(this,xc).values())if(i===s.selector)return s;return null}if(e.indexOf("(")===-1){const i=[];for(const[s,a]of F(this,xc))s.split("(")[0]===e&&i.push(a);if(i.length===0)return e==="Error"?Oi.from("error Error(string)"):e==="Panic"?Oi.from("error Panic(uint256)"):null;if(i.length>1){const s=i.map(a=>JSON.stringify(a.format())).join(", ");ee(!1,`ambiguous error description (i.e. ${s})`,"name",e)}return i[0]}if(e=Oi.from(e).format(),e==="Error(string)")return Oi.from("error Error(string)");if(e==="Panic(uint256)")return Oi.from("error Panic(uint256)");const n=F(this,xc).get(e);return n||null}forEachError(e){const t=Array.from(F(this,xc).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(F(this,xc).get(i),n)}}_decodeParams(e,t){return F(this,Pi).decode(e,t)}_encodeParams(e,t){return F(this,Pi).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);ee(n,"unknown error","fragment",e),e=n}return ee(Yt(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Yt(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);ee(n,"unknown error","fragment",e),e=n}return _t([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);ee(n,"unknown function","fragment",e),e=n}return ee(Yt(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Yt(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);ee(n,"unknown function","fragment",e),e=n}return _t([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const s=this.getFunction(e);ee(s,"unknown function","fragment",e),e=s}let n="invalid length for result data";const i=gn(t);if(i.length%32===0)try{return F(this,Pi).decode(e.outputs,i)}catch{n="could not decode result data"}ye(!1,n,"BAD_DATA",{value:we(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=De(e,"data"),i=B0.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const o=we(n.slice(0,4)),c=this.getError(o);if(c)try{const u=F(this,Pi).decode(c.inputs,n.slice(4));i.revert={name:c.name,signature:c.format(),args:u},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const a=this.parseTransaction(t);return a&&(i.invocation={method:a.name,signature:a.signature,args:a.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);ee(n,"unknown function","fragment",e),e=n}return we(F(this,Pi).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const s=this.getEvent(e);ee(s,"unknown event","eventFragment",e),e=s}ye(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(s,a)=>s.type==="string"?Zo(a):s.type==="bytes"?Kt(we(a)):(s.type==="bool"&&typeof a=="boolean"?a=a?"0x01":"0x00":s.type.match(/^u?int/)?a=Go(a):s.type.match(/^bytes/)?a=f5(a,32):s.type==="address"&&F(this,Pi).encode(["address"],[a]),Rs(we(a),32));for(t.forEach((s,a)=>{const o=e.inputs[a];if(!o.indexed){ee(s==null,"cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?ee(!1,"filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(c=>i(o,c))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const a=this.getEvent(e);ee(a,"unknown event","eventFragment",e),e=a}const n=[],i=[],s=[];return e.anonymous||n.push(e.topicHash),ee(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((a,o)=>{const c=t[o];if(a.indexed)if(a.type==="string")n.push(Zo(c));else if(a.type==="bytes")n.push(Kt(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(F(this,Pi).encode([a.type],[c]))}else i.push(a),s.push(c)}),{data:F(this,Pi).encode(i,s),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const h=this.getEvent(e);ee(h,"unknown event","eventFragment",e),e=h}if(n!=null&&!e.anonymous){const h=e.topicHash;ee(Gt(n[0],32)&&n[0].toLowerCase()===h,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],s=[],a=[];e.inputs.forEach((h,y)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(xn.from({type:"bytes32",name:h.name})),a.push(!0)):(i.push(h),a.push(!1)):(s.push(h),a.push(!1))});const o=n!=null?F(this,Pi).decode(i,_t(n)):null,c=F(this,Pi).decode(s,t,!0),u=[],f=[];let l=0,d=0;return e.inputs.forEach((h,y)=>{let p=null;if(h.indexed)if(o==null)p=new Lx(null);else if(a[y])p=new Lx(o[d++]);else try{p=o[d++]}catch(g){p=g}else try{p=c[l++]}catch(g){p=g}u.push(p),f.push(h.name||null)}),k0.fromItems(u,f)}parseTransaction(e){const t=De(e.data,"tx.data"),n=He(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(we(t.slice(0,4)));if(!i)return null;const s=F(this,Pi).decode(i.inputs,t.slice(4));return new cR(i,i.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new oR(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=we(e),n=this.getError(Yt(t,0,4));if(!n)return null;const i=F(this,Pi).decode(n.inputs,Yt(t,4));return new uR(n,n.selector,i)}static from(e){return e instanceof Pd?e:typeof e=="string"?new Pd(JSON.parse(e)):typeof e.formatJson=="function"?new Pd(e.formatJson()):typeof e.format=="function"?new Pd(e.format("json")):new Pd(e)}};xc=new WeakMap,wc=new WeakMap,Ec=new WeakMap,Pi=new WeakMap,Zc=new WeakSet,t3=function(e,t,n){if(Gt(e)){const s=e.toLowerCase();for(const a of F(this,Ec).values())if(s===a.selector)return a;return null}if(e.indexOf("(")===-1){const s=[];for(const[a,o]of F(this,Ec))a.split("(")[0]===e&&s.push(o);if(t){const a=t.length>0?t[t.length-1]:null;let o=t.length,c=!0;Fn.isTyped(a)&&a.type==="overrides"&&(c=!1,o--);for(let u=s.length-1;u>=0;u--){const f=s[u].inputs.length;f!==o&&(!c||f!==o-1)&&s.splice(u,1)}for(let u=s.length-1;u>=0;u--){const f=s[u].inputs;for(let l=0;l<t.length;l++)if(Fn.isTyped(t[l])){if(l>=f.length){if(t[l].type==="overrides")continue;s.splice(u,1);break}if(t[l].type!==f[l].baseType){s.splice(u,1);break}}}}if(s.length===1&&t&&t.length!==s[0].inputs.length){const a=t[t.length-1];(a==null||Array.isArray(a)||typeof a!="object")&&s.splice(0,1)}if(s.length===0)return null;if(s.length>1&&n){const a=s.map(o=>JSON.stringify(o.format())).join(", ");ee(!1,`ambiguous function description (i.e. matches ${a})`,"key",e)}return s[0]}const i=F(this,Ec).get(Va.from(e).format());return i||null},r3=function(e,t,n){if(Gt(e)){const s=e.toLowerCase();for(const a of F(this,wc).values())if(s===a.topicHash)return a;return null}if(e.indexOf("(")===-1){const s=[];for(const[a,o]of F(this,wc))a.split("(")[0]===e&&s.push(o);if(t){for(let a=s.length-1;a>=0;a--)s[a].inputs.length<t.length&&s.splice(a,1);for(let a=s.length-1;a>=0;a--){const o=s[a].inputs;for(let c=0;c<t.length;c++)if(Fn.isTyped(t[c])&&t[c].type!==o[c].baseType){s.splice(a,1);break}}}if(s.length===0)return null;if(s.length>1&&n){const a=s.map(o=>JSON.stringify(o.format())).join(", ");ee(!1,`ambiguous event description (i.e. matches ${a})`,"key",e)}return s[0]}const i=F(this,wc).get(qa.from(e).format());return i||null};let rp=Pd;const eQ=BigInt(0);function J1(r){return r??null}function nn(r){return r==null?null:r.toString()}class Ux{constructor(e,t,n){H(this,"gasPrice");H(this,"maxFeePerGas");H(this,"maxPriorityFeePerGas");je(this,{gasPrice:J1(e),maxFeePerGas:J1(t),maxPriorityFeePerGas:J1(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:nn(e),maxFeePerGas:nn(t),maxPriorityFeePerGas:nn(n)}}}function np(r){const e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=we(r.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in r)||r[i]==null||(e[i]=He(r[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)!(i in r)||r[i]==null||(e[i]=ot(r[i],`request.${i}`));return r.accessList&&(e.accessList=pu(r.accessList)),r.authorizationList&&(e.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(e.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(e.kzg=r.kzg),"blobs"in r&&r.blobs&&(e.blobs=r.blobs.map(i=>h6(i)?we(i):Object.assign({},i))),e}var Vu;class fR{constructor(e,t){H(this,"provider");H(this,"number");H(this,"hash");H(this,"timestamp");H(this,"parentHash");H(this,"parentBeaconBlockRoot");H(this,"nonce");H(this,"difficulty");H(this,"gasLimit");H(this,"gasUsed");H(this,"stateRoot");H(this,"receiptsRoot");H(this,"blobGasUsed");H(this,"excessBlobGas");H(this,"miner");H(this,"prevRandao");H(this,"extraData");H(this,"baseFeePerGas");le(this,Vu);Q(this,Vu,e.transactions.map(n=>typeof n!="string"?new ip(n,t):n)),je(this,{provider:t,hash:J1(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:J1(e.prevRandao),extraData:e.extraData,baseFeePerGas:J1(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return F(this,Vu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=F(this,Vu).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:i,gasUsed:s,hash:a,miner:o,prevRandao:c,nonce:u,number:f,parentHash:l,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:y,timestamp:p,transactions:g}=this;return{_type:"Block",baseFeePerGas:nn(e),difficulty:nn(t),extraData:n,gasLimit:nn(i),gasUsed:nn(s),blobGasUsed:nn(this.blobGasUsed),excessBlobGas:nn(this.excessBlobGas),hash:a,miner:o,prevRandao:c,nonce:u,number:f,parentHash:l,timestamp:p,parentBeaconBlockRoot:d,stateRoot:h,receiptsRoot:y,transactions:g}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return F(this,Vu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=F(this,Vu)[e];else{const n=e.toLowerCase();for(const i of F(this,Vu))if(typeof i=="string"){if(i!==n)continue;t=i;break}else{if(i.hash!==n)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;ee(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return cge(this)}}Vu=new WeakMap;class _p{constructor(e,t){H(this,"provider");H(this,"transactionHash");H(this,"blockHash");H(this,"blockNumber");H(this,"removed");H(this,"address");H(this,"data");H(this,"topics");H(this,"index");H(this,"transactionIndex");this.provider=t;const n=Object.freeze(e.topics.slice());je(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:a,topics:o,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:i,index:s,removed:a,topics:o,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return uge(this)}}var P2;class H4{constructor(e,t){H(this,"provider");H(this,"to");H(this,"from");H(this,"contractAddress");H(this,"hash");H(this,"index");H(this,"blockHash");H(this,"blockNumber");H(this,"logsBloom");H(this,"gasUsed");H(this,"blobGasUsed");H(this,"cumulativeGasUsed");H(this,"gasPrice");H(this,"blobGasPrice");H(this,"type");H(this,"status");H(this,"root");le(this,P2);Q(this,P2,Object.freeze(e.logs.map(i=>new _p(i,t))));let n=eQ;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),je(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return F(this,P2)}toJSON(){const{to:e,from:t,contractAddress:n,hash:i,index:s,blockHash:a,blockNumber:o,logsBloom:c,logs:u,status:f,root:l}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:n,cumulativeGasUsed:nn(this.cumulativeGasUsed),from:t,gasPrice:nn(this.gasPrice),blobGasUsed:nn(this.blobGasUsed),blobGasPrice:nn(this.blobGasPrice),gasUsed:nn(this.gasUsed),hash:i,index:s,logs:u,logsBloom:c,root:l,status:f,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return rQ(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),tQ(this,e)}}P2=new WeakMap;var Ll;const QN=class QN{constructor(e,t){H(this,"provider");H(this,"blockNumber");H(this,"blockHash");H(this,"index");H(this,"hash");H(this,"type");H(this,"to");H(this,"from");H(this,"nonce");H(this,"gasLimit");H(this,"gasPrice");H(this,"maxPriorityFeePerGas");H(this,"maxFeePerGas");H(this,"maxFeePerBlobGas");H(this,"data");H(this,"value");H(this,"chainId");H(this,"signature");H(this,"accessList");H(this,"blobVersionedHashes");H(this,"authorizationList");le(this,Ll);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,Q(this,Ll,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:i,type:s,to:a,from:o,nonce:c,data:u,signature:f,accessList:l,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:l,blockNumber:e,blockHash:t,blobVersionedHashes:d,chainId:nn(this.chainId),data:u,from:o,gasLimit:nn(this.gasLimit),gasPrice:nn(this.gasPrice),hash:i,maxFeePerGas:nn(this.maxFeePerGas),maxPriorityFeePerGas:nn(this.maxPriorityFeePerGas),maxFeePerBlobGas:nn(this.maxFeePerBlobGas),nonce:c,signature:f,to:a,index:n,type:s,value:nn(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:n}=await yn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=e??1,i=t??0;let s=F(this,Ll),a=-1,o=s===-1;const c=async()=>{if(o)return null;const{blockNumber:d,nonce:h}=await yn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(h<this.nonce){s=d;return}if(o)return null;const y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(a===-1&&(a=s-3,a<F(this,Ll)&&(a=F(this,Ll)));a<=d;){if(o)return null;const p=await this.provider.getBlock(a,!0);if(p==null)return;for(const g of p)if(g===this.hash)return;for(let g=0;g<p.length;g++){const m=await p.getTransaction(g);if(m.from===this.from&&m.nonce===this.nonce){if(o)return null;const v=await this.provider.getTransactionReceipt(m.hash);if(v==null||d-v.blockNumber+1<n)return;let b="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?b="repriced":m.data==="0x"&&m.from===m.to&&m.value===eQ&&(b="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:b==="replaced"||b==="cancelled",reason:b,replacement:m.replaceableTransaction(s),hash:m.hash,receipt:v})}}a++}},u=d=>{if(d==null||d.status!==0)return d;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:d.to,from:d.from,data:""},receipt:d})},f=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(f);if(f){if(n===1||await f.confirmations()>=n)return u(f)}else if(await c(),n===0)return null;return await new Promise((d,h)=>{const y=[],p=()=>{y.forEach(m=>m())};if(y.push(()=>{o=!0}),i>0){const m=setTimeout(()=>{p(),h(Jt("wait for transaction timeout","TIMEOUT"))},i);y.push(()=>{clearTimeout(m)})}const g=async m=>{if(await m.confirmations()>=n){p();try{d(u(m))}catch(v){h(v)}}};if(y.push(()=>{this.provider.off(this.hash,g)}),this.provider.on(this.hash,g),s>=0){const m=async()=>{try{await c()}catch(v){if(Zr(v,"TRANSACTION_REPLACED")){p(),h(v);return}}o||this.provider.once("block",m)};y.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),rQ(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),tQ(this,e)}replaceableTransaction(e){ee(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new QN(this,this.provider);return Q(t,Ll,e),t}};Ll=new WeakMap;let ip=QN;function cge(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function tQ(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function rQ(r){return{orphan:"drop-transaction",tx:r}}function uge(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class h5 extends _p{constructor(t,n,i){super(t,t.provider);H(this,"interface");H(this,"fragment");H(this,"args");const s=n.decodeEventLog(i,t.data,t.topics);je(this,{args:s,fragment:i,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class W4 extends _p{constructor(t,n){super(t,t.provider);H(this,"error");je(this,{error:n})}}var Ny;class lR extends H4{constructor(t,n,i){super(i,n);le(this,Ny);Q(this,Ny,t)}get logs(){return super.logs.map(t=>{const n=t.topics.length?F(this,Ny).getEvent(t.topics[0]):null;if(n)try{return new h5(t,F(this,Ny),n)}catch(i){return new W4(t,i)}return t})}}Ny=new WeakMap;var T2;class p5 extends ip{constructor(t,n,i){super(i,n);le(this,T2);Q(this,T2,t)}async wait(t,n){const i=await super.wait(t,n);return i==null?null:new lR(F(this,T2),this.provider,i)}}T2=new WeakMap;class K4 extends P4{constructor(t,n,i,s){super(t,n,i);H(this,"log");je(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class dR extends K4{constructor(e,t,n,i,s){super(e,t,n,new h5(s,e.interface,i));const a=e.interface.decodeEventLog(i,this.log.data,this.log.topics);je(this,{args:a,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const P$=BigInt(0);function nQ(r){return r&&typeof r.call=="function"}function iQ(r){return r&&typeof r.estimateGas=="function"}function G4(r){return r&&typeof r.resolveName=="function"}function sQ(r){return r&&typeof r.sendTransaction=="function"}function aQ(r){if(r!=null){if(G4(r))return r;if(r.provider)return r.provider}}var C2;class fge{constructor(e,t,n){le(this,C2);H(this,"fragment");if(je(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const i=sp(e.runner,"resolveName"),s=G4(i)?i:null;Q(this,C2,async function(){const a=await Promise.all(t.inputs.map((o,c)=>n[c]==null?null:o.walkAsync(n[c],(f,l)=>f==="address"?Array.isArray(l)?Promise.all(l.map(d=>ln(d,s))):ln(l,s):l)));return e.interface.encodeFilterTopics(t,a)}())}getTopicFilter(){return F(this,C2)}}C2=new WeakMap;function sp(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function jd(r){return r==null?null:r.provider||null}async function hR(r,e){const t=Fn.dereference(r,"overrides");ee(typeof t=="object","invalid overrides parameter","overrides",r);const n=np(t);return ee(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),ee(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function oQ(r,e,t){const n=sp(r,"resolveName"),i=G4(n)?n:null;return await Promise.all(e.map((s,a)=>s.walkAsync(t[a],(o,c)=>(c=Fn.dereference(c,o),o==="address"?ln(c,i):c))))}function lge(r){const e=async function(a){const o=await hR(a,["data"]);o.to=await r.getAddress(),o.from&&(o.from=await ln(o.from,aQ(r.runner)));const c=r.interface,u=He(o.value||P$,"overrides.value")===P$,f=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!f&&!u&&ee(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),ee(c.fallback||f,"cannot send data to receive-only contract","overrides.data",o.data);const l=c.receive||c.fallback&&c.fallback.payable;return ee(l||u,"cannot send value to non-payable fallback","overrides.value",o.value),ee(c.fallback||f,"cannot send data to receive-only contract","overrides.data",o.data),o},t=async function(a){const o=sp(r.runner,"call");ye(nQ(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(a);try{return await o.call(c)}catch(u){throw u5(u)&&u.data?r.interface.makeError(u.data,c):u}},n=async function(a){const o=r.runner;ye(sQ(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await e(a)),u=jd(r.runner);return new p5(r.interface,u,c)},i=async function(a){const o=sp(r.runner,"estimateGas");return ye(iQ(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await e(a))},s=async a=>await n(a);return je(s,{_contract:r,estimateGas:i,populateTransaction:e,send:n,staticCall:t}),s}function dge(r,e){const t=function(...u){const f=r.interface.getFunction(e,u);return ye(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),f},n=async function(...u){const f=t(...u);let l={};if(f.inputs.length+1===u.length&&(l=await hR(u.pop()),l.from&&(l.from=await ln(l.from,aQ(r.runner)))),f.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const d=await oQ(r.runner,f.inputs,u);return Object.assign({},l,await yn({to:r.getAddress(),data:r.interface.encodeFunctionData(f,d)}))},i=async function(...u){const f=await o(...u);return f.length===1?f[0]:f},s=async function(...u){const f=r.runner;ye(sQ(f),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await f.sendTransaction(await n(...u)),d=jd(r.runner);return new p5(r.interface,d,l)},a=async function(...u){const f=sp(r.runner,"estimateGas");return ye(iQ(f),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await f.estimateGas(await n(...u))},o=async function(...u){const f=sp(r.runner,"call");ye(nQ(f),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await n(...u);let d="0x";try{d=await f.call(l)}catch(y){throw u5(y)&&y.data?r.interface.makeError(y.data,l):y}const h=t(...u);return r.interface.decodeFunctionResult(h,d)},c=async(...u)=>t(...u).constant?await i(...u):await s(...u);return je(c,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:a,populateTransaction:n,send:s,staticCall:i,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=r.interface.getFunction(e);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function hge(r,e){const t=function(...i){const s=r.interface.getEvent(e,i);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),s},n=function(...i){return new fge(r,t(...i),i)};return je(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=r.interface.getEvent(e);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),n}const Fx=Symbol.for("_ethersInternal_contract"),cQ=new WeakMap;function pge(r,e){cQ.set(r[Fx],e)}function Qs(r){return cQ.get(r[Fx])}function yge(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function pR(r,e){let t,n=null;if(Array.isArray(e)){const s=function(a){if(Gt(a,32))return a;const o=r.interface.getEvent(a);return ee(o,"unknown fragment","name",a),o.topicHash};t=e.map(a=>a==null?null:Array.isArray(a)?a.map(s):s(a))}else e==="*"?t=[null]:typeof e=="string"?Gt(e,32)?t=[e]:(n=r.interface.getEvent(e),ee(n,"unknown fragment","event",e),t=[n.topicHash]):yge(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):ee(!1,"unknown event name","event",e);t=t.map(s=>{if(s==null)return null;if(Array.isArray(s)){const a=Array.from(new Set(s.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return s.toLowerCase()});const i=t.map(s=>s==null?"null":Array.isArray(s)?s.join("|"):s).join("&");return{fragment:n,tag:i,topics:t}}async function vb(r,e){const{subs:t}=Qs(r);return t.get((await pR(r,e)).tag)||null}async function T$(r,e,t){const n=jd(r.runner);ye(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:s,topics:a}=await pR(r,t),{addr:o,subs:c}=Qs(r);let u=c.get(s);if(!u){const l={address:o||r,topics:a},d=g=>{let m=i;if(m==null)try{m=r.interface.getEvent(g.topics[0])}catch{}if(m){const v=m,b=i?r.interface.decodeEventLog(i,g.data,g.topics):[];jS(r,t,b,_=>new dR(r,_,t,v,g))}else jS(r,t,[],v=>new K4(r,v,t,g))};let h=[];u={tag:s,listeners:[],start:()=>{h.length||h.push(n.on(l,d))},stop:async()=>{if(h.length==0)return;let g=h;h=[],await Promise.all(g),n.off(l,d)}},c.set(s,u)}return u}let FS=Promise.resolve();async function mge(r,e,t,n){await FS;const i=await vb(r,e);if(!i)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:a,once:o})=>{const c=Array.from(t);n&&c.push(n(o?null:a));try{a.call(r,...c)}catch{}return!o}),i.listeners.length===0&&(i.stop(),Qs(r).subs.delete(i.tag)),s>0}async function jS(r,e,t,n){try{await FS}catch{}const i=mge(r,e,t,n);return FS=i,await i}const G8=["then"];var tj;tj=Fx;const Xb=class Xb{constructor(e,t,n,i){H(this,"target");H(this,"interface");H(this,"runner");H(this,"filters");H(this,tj);H(this,"fallback");ee(typeof e=="string"||D4(e),"invalid value for Contract target","target",e),n==null&&(n=null);const s=rp.from(t);je(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,Fx,{value:{}});let a,o=null,c=null;if(i){const l=jd(n);c=new p5(this.interface,l,i)}let u=new Map;if(typeof e=="string")if(Gt(e))o=e,a=Promise.resolve(e);else{const l=sp(n,"resolveName");if(!G4(l))throw Jt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=l.resolveName(e).then(d=>{if(d==null)throw Jt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Qs(this).addr=d,d})}else a=e.getAddress().then(l=>{if(l==null)throw new Error("TODO");return Qs(this).addr=l,l});pge(this,{addrPromise:a,addr:o,deployTx:c,subs:u});const f=new Proxy({},{get:(l,d,h)=>{if(typeof d=="symbol"||G8.indexOf(d)>=0)return Reflect.get(l,d,h);try{return this.getEvent(d)}catch(y){if(!Zr(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(l,d)=>G8.indexOf(d)>=0?Reflect.has(l,d):Reflect.has(l,d)||this.interface.hasEvent(String(d))});return je(this,{filters:f}),je(this,{fallback:s.receive||s.fallback?lge(this):null}),new Proxy(this,{get:(l,d,h)=>{if(typeof d=="symbol"||d in l||G8.indexOf(d)>=0)return Reflect.get(l,d,h);try{return l.getFunction(d)}catch(y){if(!Zr(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(l,d)=>typeof d=="symbol"||d in l||G8.indexOf(d)>=0?Reflect.has(l,d):l.interface.hasFunction(d)})}connect(e){return new Xb(this.target,this.interface,e)}attach(e){return new Xb(e,this.interface,this.runner)}async getAddress(){return await Qs(this).addrPromise}async getDeployedCode(){const e=jd(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=jd(this.runner);return ye(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,s)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);n.once("block",a)}catch(o){s(o)}};a()})}deploymentTransaction(){return Qs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),dge(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),hge(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");const{addr:i,addrPromise:s}=Qs(this),a=i||await s,{fragment:o,topics:c}=await pR(this,e),u={address:a,topics:c,fromBlock:t,toBlock:n},f=jd(this.runner);return ye(f,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await f.getLogs(u)).map(l=>{let d=o;if(d==null)try{d=this.interface.getEvent(l.topics[0])}catch{}if(d)try{return new h5(l,this.interface,d)}catch(h){return new W4(l,h)}return new _p(l,f)})}async on(e,t){const n=await T$(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await T$(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await jS(this,e,t,null)}async listenerCount(e){if(e){const i=await vb(this,e);return i?i.listeners.length:0}const{subs:t}=Qs(this);let n=0;for(const{listeners:i}of t.values())n+=i.length;return n}async listeners(e){if(e){const i=await vb(this,e);return i?i.listeners.map(({listener:s})=>s):[]}const{subs:t}=Qs(this);let n=[];for(const{listeners:i}of t.values())n=n.concat(i.map(({listener:s})=>s));return n}async off(e,t){const n=await vb(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(t==null||n.listeners.length===0)&&(n.stop(),Qs(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await vb(this,e);if(!t)return this;t.stop(),Qs(this).subs.delete(t.tag)}else{const{subs:t}=Qs(this);for(const{tag:n,stop:i}of t.values())i(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Xb{constructor(i,s=null){super(i,e,s)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};let ap=Xb;function bge(){return ap}class hf extends bge(){}class y5{constructor(e,t,n){H(this,"interface");H(this,"bytecode");H(this,"runner");const i=rp.from(e);t instanceof Uint8Array||(typeof t=="object"&&(t=t.object),t.startsWith("0x")||(t="0x"+t)),t=we(De(t)),je(this,{bytecode:t,interface:i,runner:n||null})}attach(e){return new ap(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={};const n=this.interface.deploy;if(n.inputs.length+1===e.length&&(t=await hR(e.pop())),n.inputs.length!==e.length)throw new Error("incorrect number of arguments to constructor");const i=await oQ(this.runner,n.inputs,e),s=_t([this.bytecode,this.interface.encodeDeploy(i)]);return Object.assign({},t,{data:s})}async deploy(...e){const t=await this.getDeployTransaction(...e);ye(this.runner&&typeof this.runner.sendTransaction=="function","factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await this.runner.sendTransaction(t),i=k4(n);return new ap(i,this.interface,this.runner,n)}connect(e){return new y5(this.interface,this.bytecode,e)}static fromSolidity(e,t){ee(e!=null,"bad compiler output","output",e),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i="";return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,t)}}function uE(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):ee(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class yR{constructor(e){H(this,"name");je(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const uQ=new RegExp("^(ipfs)://(.*)$","i"),C$=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),uQ,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Ul,ih,Fl,i1,Mw,fQ;const $1=class $1{constructor(e,t,n){le(this,Fl);H(this,"provider");H(this,"address");H(this,"name");le(this,Ul);le(this,ih);je(this,{provider:e,address:t,name:n}),Q(this,Ul,null),Q(this,ih,new hf(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return F(this,Ul)==null&&Q(this,Ul,(async()=>{try{return await F(this,ih).supportsInterface("0x9061b923")}catch(e){if(Zr(e,"CALL_EXCEPTION"))return!1;throw Q(this,Ul,null),e}})()),await F(this,Ul)}async getAddress(e){if(e==null&&(e=60),e===60)try{const s=await ve(this,Fl,i1).call(this,"addr(bytes32)");return s==null||s===ep?null:s}catch(s){if(Zr(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let s=e+2147483648;const a=await ve(this,Fl,i1).call(this,"addr(bytes32,uint)",[s]);if(Gt(a,20))return pt(a)}let t=null;for(const s of this.provider.plugins)if(s instanceof yR&&s.supportsCoinType(e)){t=s;break}if(t==null)return null;const n=await ve(this,Fl,i1).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const i=await t.decodeAddress(e,n);if(i!=null)return i;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await ve(this,Fl,i1).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await ve(this,Fl,i1).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",s=parseInt(t[4],16);if(t[5].length===s*2)return`${i}://${M4("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<C$.length;n++){const i=t.match(C$[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const a=uE(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:a}),{linkage:e,url:a}}case"erc721":case"erc1155":{const a=s==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:t});const o=await this.getAddress();if(o==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(i[2]||"").split("/");if(c.length!==2)return e.push({type:`!${s}caip`,value:i[2]||""}),{url:null,linkage:e};const u=c[1],f=new hf(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(s==="erc721"){const p=await f.ownerOf(u);if(o!==p)return e.push({type:"!owner",value:p}),{url:null,linkage:e};e.push({type:"owner",value:p})}else if(s==="erc1155"){const p=await f.balanceOf(o,u);if(!p)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:p.toString()})}let l=await f[a](u);if(l==null||l==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:l}),s==="erc1155"&&(l=l.replace("{id}",Go(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=uE(l)),e.push({type:"metadata-url",value:l});let d={};const h=await new En(l).send();h.assertOk();try{d=h.bodyJson}catch{try{e.push({type:"!metadata",value:h.bodyText})}catch{const m=h.body;return m&&e.push({type:"!metadata",value:we(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!d)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(d)});let y=d.image;if(typeof y!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!y.match(/^(https:\/\/|data:)/i)){if(y.match(uQ)==null)return e.push({type:"!imageUrl-ipfs",value:y}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:y}),y=uE(y)}return e.push({type:"url",value:y}),{linkage:e,url:y}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return ye(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){var i;let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;const s=await ve(i=$1,Mw,fQ).call(i,e,n);if(s!=null){const a=new $1(e,s,t);return n!==t&&!await a.supportsWildcard()?null:a}n=n.split(".").slice(1).join(".")}}};Ul=new WeakMap,ih=new WeakMap,Fl=new WeakSet,i1=async function(e,t){t=(t||[]).slice();const n=F(this,ih).interface;t.unshift(r2(this.name));let i=null;await this.supportsWildcard()&&(i=n.getFunction(e),ye(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[aR(this.name,255),n.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await F(this,ih)[e](...t);return i?n.decodeFunctionResult(i,s)[0]:s}catch(s){if(!Zr(s,"CALL_EXCEPTION"))throw s}return null},Mw=new WeakSet,fQ=async function(e,t){const n=await $1.getEnsAddress(e);try{const s=await new hf(n,["function resolver(bytes32) view returns (address)"],e).resolver(r2(t),{enableCcipRead:!0});return s===ep?null:s}catch(i){throw i}return null},le($1,Mw);let km=$1;const I$=BigInt(0);function Pt(r,e){return function(t){return t==null?e:r(t)}}function i2(r,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(n=>r(n))}}function m5(r,e){return t=>{const n={};for(const i in r){let s=i;if(e&&i in e&&!(s in t)){for(const a of e[i])if(a in t){s=a;break}}try{const a=r[i](t[s]);a!==void 0&&(n[i]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";ye(!1,`invalid value for value.${i} (${o})`,"BAD_DATA",{value:t})}}return n}}function gge(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}ee(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function Dm(r){return ee(Gt(r,!0),"invalid data","value",r),r}function si(r){return ee(Gt(r,32),"invalid hash","value",r),r}const vge=m5({address:pt,blockHash:si,blockNumber:ot,data:Dm,index:ot,removed:Pt(gge,!1),topics:i2(si),transactionHash:si,transactionIndex:ot},{index:["logIndex"]});function xge(r){return vge(r)}const wge=m5({hash:Pt(si),parentHash:si,parentBeaconBlockRoot:Pt(si,null),number:ot,timestamp:ot,nonce:Pt(Dm),difficulty:He,gasLimit:He,gasUsed:He,stateRoot:Pt(si,null),receiptsRoot:Pt(si,null),blobGasUsed:Pt(He,null),excessBlobGas:Pt(He,null),miner:Pt(pt),prevRandao:Pt(si,null),extraData:Dm,baseFeePerGas:Pt(He)},{prevRandao:["mixHash"]});function Ege(r){const e=wge(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:lQ(t)),e}const Age=m5({transactionIndex:ot,blockNumber:ot,transactionHash:si,address:pt,topics:i2(si),data:Dm,index:ot,blockHash:si},{index:["logIndex"]});function _ge(r){return Age(r)}const Sge=m5({to:Pt(pt,null),from:Pt(pt,null),contractAddress:Pt(pt,null),index:ot,root:Pt(we),gasUsed:He,blobGasUsed:Pt(He,null),logsBloom:Pt(Dm),blockHash:si,hash:si,logs:i2(_ge),blockNumber:ot,cumulativeGasUsed:He,effectiveGasPrice:Pt(He),blobGasPrice:Pt(He,null),status:Pt(ot),type:Pt(ot,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Mge(r){return Sge(r)}function lQ(r){r.to&&He(r.to)===I$&&(r.to="0x0000000000000000000000000000000000000000");const e=m5({hash:si,index:Pt(ot,void 0),type:t=>t==="0x"||t==null?0:ot(t),accessList:Pt(pu,null),blobVersionedHashes:Pt(i2(si,!0),null),authorizationList:Pt(i2(t=>{let n;if(t.signature)n=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),n=Object.assign({},t,{yParity:i})}return{address:pt(t.address),chainId:He(t.chainId),nonce:He(t.nonce),signature:Bi.from(n)}},!1),null),blockHash:Pt(si,null),blockNumber:Pt(ot,null),transactionIndex:Pt(ot,null),from:pt,gasPrice:Pt(He),maxPriorityFeePerGas:Pt(He),maxFeePerGas:Pt(He),maxFeePerBlobGas:Pt(He,null),gasLimit:He,to:Pt(pt,null),value:He,nonce:ot,data:Dm,creates:Pt(pt,null),chainId:Pt(He,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(e.to==null&&e.creates==null&&(e.creates=k4(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=Bi.from(r.signature):e.signature=Bi.from(r),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&He(e.blockHash)===I$&&(e.blockHash=null),e}const Pge="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ff{constructor(e){H(this,"name");je(this,{name:e})}clone(){return new Ff(this.name)}}class x6 extends Ff{constructor(t,n){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);H(this,"effectiveBlock");H(this,"txBase");H(this,"txCreate");H(this,"txDataZero");H(this,"txDataNonzero");H(this,"txAccessListStorageKey");H(this,"txAccessListAddress");const i={effectiveBlock:t};function s(a,o){let c=(n||{})[a];c==null&&(c=o),ee(typeof c=="number",`invalud value for ${a}`,"costs",n),i[a]=c}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),je(this,i)}clone(){return new x6(this.effectiveBlock,this)}}class w6 extends Ff{constructor(t,n){super("org.ethers.plugins.network.Ens");H(this,"address");H(this,"targetNetwork");je(this,{address:t||Pge,targetNetwork:n??1})}clone(){return new w6(this.address,this.targetNetwork)}}var sh;const ZN=class ZN extends Ff{constructor(t){super("org.ethers.plugins.network.FeeData");le(this,sh);Q(this,sh,t)}get feeDataFunc(){return F(this,sh)}async getFeeData(t){return await F(this,sh).call(this,t)}clone(){return new ZN(F(this,sh))}};sh=new WeakMap;let jx=ZN;var I2,R2;class mR extends Ff{constructor(t,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");le(this,I2);le(this,R2);Q(this,I2,t),Q(this,R2,n)}get url(){return F(this,I2)}get processFunc(){return F(this,R2)}clone(){return this}}I2=new WeakMap,R2=new WeakMap;const fE=new Map;var Oy,ky,jl;const L1=class L1{constructor(e,t){le(this,Oy);le(this,ky);le(this,jl);Q(this,Oy,e),Q(this,ky,He(t)),Q(this,jl,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return F(this,Oy)}set name(e){Q(this,Oy,e)}get chainId(){return F(this,ky)}set chainId(e){Q(this,ky,He(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===He(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===He(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===He(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(F(this,jl).values())}attachPlugin(e){if(F(this,jl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return F(this,jl).set(e.name,e.clone()),this}getPlugin(e){return F(this,jl).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new L1(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new x6;let n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const i=pu(e.accessList);for(const s in i)n+=t.txAccessListAddress+t.txAccessListStorageKey*i[s].storageKeys.length}return n}static from(e){if(Tge(),e==null)return L1.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=fE.get(e);if(t)return t();if(typeof e=="bigint")return new L1("unknown",e);ee(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){ee(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new L1(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new w6(e.ensAddress,e.ensNetwork)),t}ee(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const n=fE.get(e);n&&ee(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),fE.set(e,t)}};Oy=new WeakMap,ky=new WeakMap,jl=new WeakMap;let Ur=L1;function R$(r,e){const t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function N$(r){return new mR(r,async(e,t,n)=>{n.setHeader("User-Agent","ethers");let i;try{const[s,a]=await Promise.all([n.send(),e()]);i=s;const o=i.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:R$(o.maxFee,9),maxPriorityFeePerGas:R$(o.maxPriorityFee,9)}}catch(s){ye(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:s})}})}let O$=!1;function Tge(){if(O$)return;O$=!0;function r(e,t,n){const i=function(){const s=new Ur(e,t);return n.ensNetwork!=null&&s.attachPlugin(new w6(null,n.ensNetwork)),s.attachPlugin(new x6),(n.plugins||[]).forEach(a=>{s.attachPlugin(a)}),s};Ur.register(e,i),Ur.register(t,i),n.altNames&&n.altNames.forEach(s=>{Ur.register(s,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[N$("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[N$("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function qS(r){return JSON.parse(JSON.stringify(r))}var zu,Na,ql,Ac,Dy,n3;class Cge{constructor(e){le(this,Dy);le(this,zu);le(this,Na);le(this,ql);le(this,Ac);Q(this,zu,e),Q(this,Na,null),Q(this,ql,4e3),Q(this,Ac,-2)}get pollingInterval(){return F(this,ql)}set pollingInterval(e){Q(this,ql,e)}start(){F(this,Na)||(Q(this,Na,F(this,zu)._setTimeout(ve(this,Dy,n3).bind(this),F(this,ql))),ve(this,Dy,n3).call(this))}stop(){F(this,Na)&&(F(this,zu)._clearTimeout(F(this,Na)),Q(this,Na,null))}pause(e){this.stop(),e&&Q(this,Ac,-2)}resume(){this.start()}}zu=new WeakMap,Na=new WeakMap,ql=new WeakMap,Ac=new WeakMap,Dy=new WeakSet,n3=async function(){try{const e=await F(this,zu).getBlockNumber();if(F(this,Ac)===-2){Q(this,Ac,e);return}if(e!==F(this,Ac)){for(let t=F(this,Ac)+1;t<=e;t++){if(F(this,Na)==null)return;await F(this,zu).emit("block",t)}Q(this,Ac,e)}}catch{}F(this,Na)!=null&&Q(this,Na,F(this,zu)._setTimeout(ve(this,Dy,n3).bind(this),F(this,ql)))};var ah,oh,Vl;class bR{constructor(e){le(this,ah);le(this,oh);le(this,Vl);Q(this,ah,e),Q(this,Vl,!1),Q(this,oh,t=>{this._poll(t,F(this,ah))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){F(this,Vl)||(Q(this,Vl,!0),F(this,oh).call(this,-2),F(this,ah).on("block",F(this,oh)))}stop(){F(this,Vl)&&(Q(this,Vl,!1),F(this,ah).off("block",F(this,oh)))}pause(e){this.stop()}resume(){this.start()}}ah=new WeakMap,oh=new WeakMap,Vl=new WeakMap;var By,Hu;class Ige extends bR{constructor(t,n){super(t);le(this,By);le(this,Hu);Q(this,By,n),Q(this,Hu,-2)}pause(t){t&&Q(this,Hu,-2),super.pause(t)}async _poll(t,n){const i=await n.getBlock(F(this,By));i!=null&&(F(this,Hu)===-2?Q(this,Hu,i.number):i.number>F(this,Hu)&&(n.emit(F(this,By),i.number),Q(this,Hu,i.number)))}}By=new WeakMap,Hu=new WeakMap;var Pw;class Rge extends bR{constructor(t,n){super(t);le(this,Pw);Q(this,Pw,qS(n))}async _poll(t,n){throw new Error("@TODO")}}Pw=new WeakMap;var $y;class Nge extends bR{constructor(t,n){super(t);le(this,$y);Q(this,$y,n)}async _poll(t,n){const i=await n.getTransactionReceipt(F(this,$y));i&&n.emit(F(this,$y),i)}}$y=new WeakMap;var Wu,Ly,Uy,zl,Oa,Tw,dQ;class gR{constructor(e,t){le(this,Tw);le(this,Wu);le(this,Ly);le(this,Uy);le(this,zl);le(this,Oa);Q(this,Wu,e),Q(this,Ly,qS(t)),Q(this,Uy,ve(this,Tw,dQ).bind(this)),Q(this,zl,!1),Q(this,Oa,-2)}start(){F(this,zl)||(Q(this,zl,!0),F(this,Oa)===-2&&F(this,Wu).getBlockNumber().then(e=>{Q(this,Oa,e)}),F(this,Wu).on("block",F(this,Uy)))}stop(){F(this,zl)&&(Q(this,zl,!1),F(this,Wu).off("block",F(this,Uy)))}pause(e){this.stop(),e&&Q(this,Oa,-2)}resume(){this.start()}}Wu=new WeakMap,Ly=new WeakMap,Uy=new WeakMap,zl=new WeakMap,Oa=new WeakMap,Tw=new WeakSet,dQ=async function(e){if(F(this,Oa)===-2)return;const t=qS(F(this,Ly));t.fromBlock=F(this,Oa)+1,t.toBlock=e;const n=await F(this,Wu).getLogs(t);if(n.length===0){F(this,Oa)<e-60&&Q(this,Oa,e-60);return}for(const i of n)F(this,Wu).emit(F(this,Ly),i),Q(this,Oa,i.blockNumber)};const Oge=BigInt(2),kge=10;function Q8(r){return r&&typeof r.then=="function"}function i3(r,e){return r+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n);return i.sort(),i.reduce((s,a)=>(s[a]=n[a],s),{})}return n})}class Bm{constructor(e){H(this,"name");je(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Dge(r){return JSON.parse(JSON.stringify(r))}function VS(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function lE(r,e){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(Gt(r,32)){const t=r.toLowerCase();return{type:"transaction",tag:i3("tx",{hash:t}),hash:t}}if(r.orphan){const t=r;return{type:"orphan",tag:i3("orphan",t),filter:Dge(t)}}if(r.address||r.topics){const t=r,n={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?VS(i.map(s=>s.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],s=[],a=o=>{Gt(o)?i.push(o):s.push((async()=>{i.push(await ln(o,e))})())};Array.isArray(t.address)?t.address.forEach(a):a(t.address),s.length&&await Promise.all(s),n.address=VS(i.map(o=>o.toLowerCase()))}return{filter:n,tag:i3("event",n),type:"event"}}ee(!1,"unknown ProviderEvent","event",r)}function dE(){return new Date().getTime()}const Bge={cacheTimeout:250,pollingInterval:4e3};var Ti,Hl,Ci,Fy,Xs,ch,Wl,Ku,N2,ka,jy,qy,xt,Ws,zS,HS,xb,WS,wb,s3;class $m{constructor(e,t){le(this,xt);le(this,Ti);le(this,Hl);le(this,Ci);le(this,Fy);le(this,Xs);le(this,ch);le(this,Wl);le(this,Ku);le(this,N2);le(this,ka);le(this,jy);le(this,qy);if(Q(this,qy,Object.assign({},Bge,t||{})),e==="any")Q(this,ch,!0),Q(this,Xs,null);else if(e){const n=Ur.from(e);Q(this,ch,!1),Q(this,Xs,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else Q(this,ch,!1),Q(this,Xs,null);Q(this,Ku,-1),Q(this,Wl,new Map),Q(this,Ti,new Map),Q(this,Hl,new Map),Q(this,Ci,null),Q(this,Fy,!1),Q(this,N2,1),Q(this,ka,new Map),Q(this,jy,!1)}get pollingInterval(){return F(this,qy).pollingInterval}get provider(){return this}get plugins(){return Array.from(F(this,Hl).values())}attachPlugin(e){if(F(this,Hl).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return F(this,Hl).set(e.name,e.connect(this)),this}getPlugin(e){return F(this,Hl).get(e)||null}get disableCcipRead(){return F(this,jy)}set disableCcipRead(e){Q(this,jy,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const i=e.to.toLowerCase(),s=t.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const c=n[o],u=c.replace("{sender}",i).replace("{data}",s),f=new En(u);c.indexOf("{data}")===-1&&(f.body={data:s,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:o,urls:n});let l="unknown error",d;try{d=await f.send()}catch(h){a.push(h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:{error:h}});continue}try{const h=d.bodyJson;if(h.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:h}),h.data;h.message&&(l=h.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:h})}catch{}ye(d.statusCode<400||d.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:l}}),a.push(l)}ye(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:a}})}_wrapBlock(e,t){return new fR(Ege(e),this)}_wrapLog(e,t){return new _p(xge(e),this)}_wrapTransactionReceipt(e,t){return new H4(Mge(e),this)}_wrapTransactionResponse(e,t){return new ip(lQ(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=ot(await ve(this,xt,Ws).call(this,{method:"getBlockNumber"}),"%response");return F(this,Ku)>=0&&Q(this,Ku,e),e}_getAddress(e){return ln(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Gt(e))return Gt(e,32)?e:Es(e);if(typeof e=="bigint"&&(e=ot(e,"blockTag")),typeof e=="number")return e>=0?Es(e):F(this,Ku)>=0?Es(F(this,Ku)+e):this.getBlockNumber().then(t=>Es(t+e));ee(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?VS(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,i=(c,u,f)=>{let l;switch(c.length){case 0:break;case 1:l=c[0];break;default:c.sort(),l=c}if(n&&(u!=null||f!=null))throw new Error("invalid filter");const d={};return l&&(d.address=l),t.length&&(d.topics=t),u&&(d.fromBlock=u),f&&(d.toBlock=f),n&&(d.blockHash=n),d};let s=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)s.push(this._getAddress(c));else s.push(this._getAddress(e.address));let a;"fromBlock"in e&&(a=this._getBlockTag(e.fromBlock));let o;return"toBlock"in e&&(o=this._getBlockTag(e.toBlock)),s.filter(c=>typeof c!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(s),a,o]).then(c=>i(c[0],c[1],c[2])):i(s,a,o)}_getTransactionRequest(e){const t=np(e),n=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const s=ln(t[i],this);Q8(s)?n.push(async function(){t[i]=await s}()):t[i]=s}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);Q8(i)?n.push(async function(){t.blockTag=await i}()):t.blockTag=i}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(F(this,Xs)==null){const i=(async()=>{try{const s=await this._detectNetwork();return this.emit("network",s,null),s}catch(s){throw F(this,Xs)===i&&Q(this,Xs,null),s}})();return Q(this,Xs,i),(await i).clone()}const e=F(this,Xs),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(F(this,ch)?(this.emit("network",n,t),F(this,Xs)===e&&Q(this,Xs,Promise.resolve(n))):ye(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:s,priorityFee:a}=await yn({_block:ve(this,xt,WS).call(this,"latest",!1),gasPrice:(async()=>{try{const f=await ve(this,xt,Ws).call(this,{method:"getGasPrice"});return He(f,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const f=await ve(this,xt,Ws).call(this,{method:"getPriorityFee"});return He(f,"%response")}catch{}return null})()});let o=null,c=null;const u=this._wrapBlock(i,e);return u&&u.baseFeePerGas&&(c=a??BigInt("1000000000"),o=u.baseFeePerGas*Oge+c),new Ux(s,o,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const i=new En(n.url),s=await n.processFunc(t,this,i);return new Ux(s.gasPrice,s.maxFeePerGas,s.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return Q8(t)&&(t=await t),He(await ve(this,xt,Ws).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await yn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await ve(this,xt,HS).call(this,ve(this,xt,zS).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return He(await ve(this,xt,xb).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return ot(await ve(this,xt,xb).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return we(await ve(this,xt,xb).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const i=He(t,"position");return we(await ve(this,xt,xb).call(this,{method:"getStorage",position:i},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:i}=await yn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=D0.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,i).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:i}=await yn({network:this.getNetwork(),params:ve(this,xt,WS).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,n)}async getTransaction(e){const{network:t,params:n}=await yn({network:this.getNetwork(),params:ve(this,xt,Ws).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await yn({network:this.getNetwork(),params:ve(this,xt,Ws).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const i=await ve(this,xt,Ws).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await yn({network:this.getNetwork(),result:ve(this,xt,Ws).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:we(t)}async getLogs(e){let t=this._getFilter(e);Q8(t)&&(t=await t);const{network:n,params:i}=await yn({network:this.getNetwork(),params:ve(this,xt,Ws).call(this,{method:"getLogs",filter:t})});return i.map(s=>this._wrapLog(s,n))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await km.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=pt(e);const t=r2(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await km.getEnsAddress(this),s=await new hf(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(s==null||s===ep)return null;const o=await new hf(s,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(o)!==e?null:o}catch(n){if(Zr(n,"BAD_DATA")&&n.value==="0x"||Zr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(s,a)=>{let o=null;const c=async u=>{try{const f=await this.getTransactionReceipt(e);if(f!=null&&u-f.blockNumber+1>=i){s(f),o&&(clearTimeout(o),o=null);return}}catch(f){console.log("EEE",f)}this.once("block",c)};n!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",c),a(Jt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=F(this,ka).get(e);t&&(t.timer&&clearTimeout(t.timer),F(this,ka).delete(e))}_setTimeout(e,t){t==null&&(t=0);const n=kp(this,N2)._++,i=()=>{F(this,ka).delete(n),e()};if(this.paused)F(this,ka).set(n,{timer:null,func:i,time:t});else{const s=setTimeout(i,t);F(this,ka).set(n,{timer:s,func:i,time:dE()})}return n}_forEachSubscriber(e){for(const t of F(this,Ti).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Bm(e.type);case"block":{const t=new Cge(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Ige(this,e.type);case"event":return new gR(this,e.filter);case"transaction":return new Nge(this,e.hash);case"orphan":return new Rge(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of F(this,Ti).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),F(this,Ci)!=null&&t.pause(F(this,Ci));break}}async on(e,t){const n=await ve(this,xt,s3).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,F(this,Ci)!=null&&n.subscriber.pause(F(this,Ci))),this}async once(e,t){const n=await ve(this,xt,s3).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,F(this,Ci)!=null&&n.subscriber.pause(F(this,Ci))),this}async emit(e,...t){const n=await ve(this,xt,wb).call(this,e,t);if(!n||n.listeners.length===0)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:s,once:a})=>{const o=new P4(this,a?null:s,e);try{s.call(this,...t,o)}catch{}return!a}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),F(this,Ti).delete(n.tag)),i>0}async listenerCount(e){if(e){const n=await ve(this,xt,wb).call(this,e);return n?n.listeners.length:0}let t=0;for(const{listeners:n}of F(this,Ti).values())t+=n.length;return t}async listeners(e){if(e){const n=await ve(this,xt,wb).call(this,e);return n?n.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:n}of F(this,Ti).values())t=t.concat(n.map(({listener:i})=>i));return t}async off(e,t){const n=await ve(this,xt,wb).call(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:s})=>s).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),F(this,Ti).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:i}=await ve(this,xt,s3).call(this,e);n&&i.stop(),F(this,Ti).delete(t)}else for(const[t,{started:n,subscriber:i}]of F(this,Ti))n&&i.stop(),F(this,Ti).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return F(this,Fy)}destroy(){this.removeAllListeners();for(const e of F(this,ka).keys())this._clearTimeout(e);Q(this,Fy,!0)}get paused(){return F(this,Ci)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(Q(this,Ku,-1),F(this,Ci)!=null){if(F(this,Ci)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),Q(this,Ci,!!e);for(const t of F(this,ka).values())t.timer&&clearTimeout(t.timer),t.time=dE()-t.time}resume(){if(F(this,Ci)!=null){this._forEachSubscriber(e=>e.resume()),Q(this,Ci,null);for(const e of F(this,ka).values()){let t=e.time;t<0&&(t=0),e.time=dE(),setTimeout(e.func,t)}}}}Ti=new WeakMap,Hl=new WeakMap,Ci=new WeakMap,Fy=new WeakMap,Xs=new WeakMap,ch=new WeakMap,Wl=new WeakMap,Ku=new WeakMap,N2=new WeakMap,ka=new WeakMap,jy=new WeakMap,qy=new WeakMap,xt=new WeakSet,Ws=async function(e){const t=F(this,qy).cacheTimeout;if(t<0)return await this._perform(e);const n=i3(e.method,e);let i=F(this,Wl).get(n);return i||(i=this._perform(e),F(this,Wl).set(n,i),setTimeout(()=>{F(this,Wl).get(n)===i&&F(this,Wl).delete(n)},t)),await i},zS=async function(e,t,n){ye(n<kge,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=np(e);try{return we(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(s){if(!this.disableCcipRead&&u5(s)&&s.data&&n>=0&&t==="latest"&&i.to!=null&&Yt(s.data,0,4)==="0x556f1830"){const a=s.data,o=await ln(i.to,this);let c;try{c=jge(Yt(s.data,4))}catch(l){ye(!1,l.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:a}})}ye(c.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(i,c.calldata,c.urls);ye(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:s.data,errorArgs:c.errorArgs}});const f={to:o,data:_t([c.selector,Fge([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const l=await ve(this,xt,zS).call(this,f,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:l}),l}catch(l){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:l}),l}}throw s}},HS=async function(e){const{value:t}=await yn({network:this.getNetwork(),value:e});return t},xb=async function(e,t,n){let i=this._getAddress(t),s=this._getBlockTag(n);return(typeof i!="string"||typeof s!="string")&&([i,s]=await Promise.all([i,s])),await ve(this,xt,HS).call(this,ve(this,xt,Ws).call(this,Object.assign(e,{address:i,blockTag:s})))},WS=async function(e,t){if(Gt(e,32))return await ve(this,xt,Ws).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await ve(this,xt,Ws).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})},wb=async function(e,t){let n=await lE(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=await lE({orphan:"drop-log",log:t[0]},this)),F(this,Ti).get(n.tag)||null},s3=async function(e){const t=await lE(e,this),n=t.tag;let i=F(this,Ti).get(n);return i||(i={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},F(this,Ti).set(n,i)),i};function $ge(r,e){try{const t=KS(r,e);if(t)return Tf(t)}catch{}return null}function KS(r,e){if(r==="0x")return null;try{const t=ot(Yt(r,e,e+32)),n=ot(Yt(r,t,t+32));return Yt(r,t+32,t+32+n)}catch{}return null}function k$(r){const e=yr(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function Lge(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}const Uge=new Uint8Array([]);function Fge(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(Uge),t+=32;for(let n=0;n<r.length;n++){const i=De(r[n]);e[n]=k$(t),e.push(k$(i.length)),e.push(Lge(i)),t+=32+Math.ceil(i.length/32)*32}return _t(e)}const D$="0x0000000000000000000000000000000000000000000000000000000000000000";function jge(r){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(ff(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Yt(r,0,32);ye(Yt(t,0,12)===Yt(D$,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Yt(t,12);try{const n=[],i=ot(Yt(r,32,64)),s=ot(Yt(r,i,i+32)),a=Yt(r,i+32);for(let o=0;o<s;o++){const c=$ge(a,o*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=KS(r,64);if(n==null)throw new Error("abort");e.calldata=n}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Yt(r,100,128)===Yt(D$,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Yt(r,96,100);try{const n=KS(r,128);if(n==null)throw new Error("abort");e.extraData=n}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function ld(r,e){if(r.provider)return r.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function B$(r,e){let t=np(e);if(t.to!=null&&(t.to=ln(t.to,r)),t.from!=null){const n=t.from;t.from=Promise.all([r.getAddress(),ln(n,r)]).then(([i,s])=>(ee(i.toLowerCase()===s.toLowerCase(),"transaction from mismatch","tx.from",s),i))}else t.from=r.getAddress();return await yn(t)}class E6{constructor(e){H(this,"provider");je(this,{provider:e||null})}async getNonce(e){return ld(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await B$(this,e)}async populateTransaction(e){const t=ld(this,"populateTransaction"),n=await B$(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(n.chainId!=null){const a=He(n.chainId);ee(a===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=i.chainId;const s=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||s)?ee(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&s&&ee(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const a=await t.getFeeData();ye(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice)}else{const a=await t.getFeeData();if(n.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const o=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=o,n.maxPriorityFeePerGas=o}else n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(ye(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice),n.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await yn(n)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await ld(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return ld(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ld(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ld(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=ld(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const i=D0.from(n);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Vy,a3;const JN=class JN extends E6{constructor(t,n){super(n);le(this,Vy);H(this,"address");je(this,{address:t})}async getAddress(){return this.address}connect(t){return new JN(this.address,t)}async signTransaction(t){ve(this,Vy,a3).call(this,"transactions","signTransaction")}async signMessage(t){ve(this,Vy,a3).call(this,"messages","signMessage")}async signTypedData(t,n,i){ve(this,Vy,a3).call(this,"typed-data","signTypedData")}};Vy=new WeakSet,a3=function(t,n){ye(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:n})};let s2=JN;const $$=new Set;function jf(r){$$.has(r)||($$.add(r),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${r} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}function qge(r){return JSON.parse(JSON.stringify(r))}var Wi,_c,uh,Kl,fh,zy,U0,GS,QS;class hQ{constructor(e){le(this,U0);le(this,Wi);le(this,_c);le(this,uh);le(this,Kl);le(this,fh);le(this,zy);Q(this,Wi,e),Q(this,_c,null),Q(this,uh,ve(this,U0,GS).bind(this)),Q(this,Kl,!1),Q(this,fh,null),Q(this,zy,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){F(this,Kl)||(Q(this,Kl,!0),ve(this,U0,GS).call(this,-2))}stop(){F(this,Kl)&&(Q(this,Kl,!1),Q(this,zy,!0),ve(this,U0,QS).call(this),F(this,Wi).off("block",F(this,uh)))}pause(e){e&&ve(this,U0,QS).call(this),F(this,Wi).off("block",F(this,uh))}resume(){this.start()}}Wi=new WeakMap,_c=new WeakMap,uh=new WeakMap,Kl=new WeakMap,fh=new WeakMap,zy=new WeakMap,U0=new WeakSet,GS=async function(e){try{F(this,_c)==null&&Q(this,_c,this._subscribe(F(this,Wi)));let t=null;try{t=await F(this,_c)}catch(s){if(!Zr(s,"UNSUPPORTED_OPERATION")||s.operation!=="eth_newFilter")throw s}if(t==null){Q(this,_c,null),F(this,Wi)._recoverSubscriber(this,this._recover(F(this,Wi)));return}const n=await F(this,Wi).getNetwork();if(F(this,fh)||Q(this,fh,n),F(this,fh).chainId!==n.chainId)throw new Error("chaid changed");if(F(this,zy))return;const i=await F(this,Wi).send("eth_getFilterChanges",[t]);await this._emitResults(F(this,Wi),i)}catch(t){console.log("@TODO",t)}F(this,Wi).once("block",F(this,uh))},QS=function(){const e=F(this,_c);e&&(Q(this,_c,null),e.then(t=>{F(this,Wi).destroyed||F(this,Wi).send("eth_uninstallFilter",[t])}))};var lh;class Vge extends hQ{constructor(t,n){super(t);le(this,lh);Q(this,lh,qge(n))}_recover(t){return new gR(t,F(this,lh))}async _subscribe(t){return await t.send("eth_newFilter",[F(this,lh)])}async _emitResults(t,n){for(const i of n)t.emit(F(this,lh),t._wrapLog(i,t._network))}}lh=new WeakMap;class zge extends hQ{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const Hge="bigint,boolean,function,number,string,symbol".split(/,/g);function o3(r){if(r==null||Hge.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(o3);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function Wge(r){return new Promise(e=>{setTimeout(e,r)})}function Vp(r){return r&&r.toLowerCase()}function L$(r){return r&&typeof r.pollingInterval=="number"}const pQ={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Hb extends E6{constructor(t,n){super(t);H(this,"address");n=pt(n),je(this,{address:n})}connect(t){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const n=o3(t),i=[];if(n.from){const a=n.from;i.push((async()=>{const o=await ln(a,this.provider);ee(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=o})())}else n.from=this.address;if(n.gasLimit==null&&i.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const a=n.to;i.push((async()=>{n.to=await ln(a,this.provider)})())}i.length&&await Promise.all(i);const s=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(t){const n=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((s,a)=>{const o=[1e3,100];let c=0;const u=async()=>{try{const f=await this.provider.getTransaction(i);if(f!=null){s(f.replaceableTransaction(n));return}}catch(f){if(Zr(f,"CANCELLED")||Zr(f,"BAD_DATA")||Zr(f,"NETWORK_ERROR")||Zr(f,"UNSUPPORTED_OPERATION")){f.info==null&&(f.info={}),f.info.sendTransactionHash=i,a(f);return}if(Zr(f,"INVALID_ARGUMENT")&&(c++,f.info==null&&(f.info={}),f.info.sendTransactionHash=i,c>10)){a(f);return}this.provider.emit("error",Jt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:f}))}this.provider._setTimeout(()=>{u()},o.pop()||4e3)};u()})}async signTransaction(t){const n=o3(t);if(n.from){const s=await ln(n.from,this.provider);ee(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=s}else n.from=this.address;const i=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const n=typeof t=="string"?on(t):t;return await this.provider.send("personal_sign",[we(n),this.address.toLowerCase()])}async signTypedData(t,n,i){const s=o3(i),a=await Cf.resolveNames(t,n,s,async o=>{const c=await ln(o);return ee(c!=null,"TypedData does not support null address","value",o),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Cf.getPayload(a.domain,n,a.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const n=typeof t=="string"?on(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),we(n)])}}var dh,Hy,Gu,Sc,Io,Da,gs,O2,ZS;class Q4 extends $m{constructor(t,n){super(t,n);le(this,O2);le(this,dh);le(this,Hy);le(this,Gu);le(this,Sc);le(this,Io);le(this,Da);le(this,gs);Q(this,Hy,1),Q(this,dh,Object.assign({},pQ,n||{})),Q(this,Gu,[]),Q(this,Sc,null),Q(this,Da,null),Q(this,gs,null);{let s=null;const a=new Promise(o=>{s=o});Q(this,Io,{promise:a,resolve:s})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(ee(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",n),i&&t!=null&&Q(this,Da,Ur.from(t))):i&&(ee(t==null||i.matches(t),"staticNetwork MUST match network object","options",n),Q(this,Da,i))}_getOption(t){return F(this,dh)[t]}get _network(){return ye(F(this,Da),"network is not available yet","NETWORK_ERROR"),F(this,Da)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&He(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const n=this.getRpcRequest(t);return n!=null?await this.send(n.method,n.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(F(this,Da))return F(this,Da)}else return t;return F(this,gs)?await F(this,gs):this.ready?(Q(this,gs,(async()=>{try{const n=Ur.from(He(await this.send("eth_chainId",[])));return Q(this,gs,null),n}catch(n){throw Q(this,gs,null),n}})()),await F(this,gs)):(Q(this,gs,(async()=>{const n={id:kp(this,Hy)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let i;try{i=(await this._send(n))[0],Q(this,gs,null)}catch(s){throw Q(this,gs,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Ur.from(He(i.result));throw this.getRpcError(n,i)})()),await F(this,gs))}_start(){F(this,Io)==null||F(this,Io).resolve==null||(F(this,Io).resolve(),Q(this,Io,null),(async()=>{for(;F(this,Da)==null&&!this.destroyed;)try{Q(this,Da,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Jt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await Wge(1e3)}ve(this,O2,ZS).call(this)})())}async _waitUntilReady(){if(F(this,Io)!=null)return await F(this,Io).promise}_getSubscriber(t){return t.type==="pending"?new zge(this):t.type==="event"?this._getOption("polling")?new gR(this,t.filter):new Vge(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new Bm("orphan"):super._getSubscriber(t)}get ready(){return F(this,Io)==null}getRpcTransaction(t){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let s=i;i==="gasLimit"&&(s="gas"),n[s]=Es(He(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(n[i]=we(t[i]))}),t.accessList&&(n.accessList=pu(t.accessList)),t.blobVersionedHashes&&(n.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(n.authorizationList=t.authorizationList.map(i=>{const s=B4(i);return{address:s.address,nonce:Es(s.nonce),chainId:Es(s.chainId),yParity:Es(s.signature.yParity),r:Es(s.signature.r),s:Es(s.signature.s)}})),n}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Vp(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Vp(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Vp(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Vp(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Vp):t.filter.address=Vp(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,n){const{method:i}=t,{error:s}=n;if(i==="eth_estimateGas"&&s.message){const c=s.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return Jt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:s}});if(c.match(/nonce/i)&&c.match(/too low/i))return Jt("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:s}})}if(i==="eth_call"||i==="eth_estimateGas"){const c=JS(s),u=B0.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],c?c.data:null);return u.info={error:s,payload:t},u}const a=JSON.stringify(Kge(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Jt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:s}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const c=t.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return Jt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:s}});if(a.match(/nonce/i)&&a.match(/too low/i))return Jt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:s}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return Jt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:s}});if(a.match(/only replay-protected/i))return Jt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:c,info:{error:s}}})}let o=!!a.match(/the method .* does not exist/i);return o||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(o=!0),o?Jt("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:s,payload:t}}):Jt("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:t})}send(t,n){if(this.destroyed)return Promise.reject(Jt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=kp(this,Hy)._++,s=new Promise((a,o)=>{F(this,Gu).push({resolve:a,reject:o,payload:{method:t,params:n,id:i,jsonrpc:"2.0"}})});return ve(this,O2,ZS).call(this),s}async getSigner(t){t==null&&(t=0);const n=this.send("eth_accounts",[]);if(typeof t=="number"){const s=await n;if(t>=s.length)throw new Error("no such account");return new Hb(this,s[t])}const{accounts:i}=await yn({network:this.getNetwork(),accounts:n});t=pt(t);for(const s of i)if(pt(s)===t)return new Hb(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Hb(this,n))}destroy(){F(this,Sc)&&(clearTimeout(F(this,Sc)),Q(this,Sc,null));for(const{payload:t,reject:n}of F(this,Gu))n(Jt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));Q(this,Gu,[]),super.destroy()}}dh=new WeakMap,Hy=new WeakMap,Gu=new WeakMap,Sc=new WeakMap,Io=new WeakMap,Da=new WeakMap,gs=new WeakMap,O2=new WeakSet,ZS=function(){if(F(this,Sc))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");Q(this,Sc,setTimeout(()=>{Q(this,Sc,null);const n=F(this,Gu);for(Q(this,Gu,[]);n.length;){const i=[n.shift()];for(;n.length&&i.length!==F(this,dh).batchMaxCount;)if(i.push(n.shift()),JSON.stringify(i.map(a=>a.payload)).length>F(this,dh).batchMaxSize){n.unshift(i.pop());break}(async()=>{const s=i.length===1?i[0].payload:i.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const a=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:c,payload:u}of i){if(this.destroyed){c(Jt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const f=a.filter(l=>l.id===u.id)[0];if(f==null){const l=Jt("missing response for request","BAD_DATA",{value:a,info:{payload:u}});this.emit("error",l),c(l);continue}if("error"in f){c(this.getRpcError(u,f));continue}o(f.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of i)o(a)}})()}},t))};var Gl;class yQ extends Q4{constructor(t,n){super(t,n);le(this,Gl);let i=this._getOption("pollingInterval");i==null&&(i=pQ.pollingInterval),Q(this,Gl,i)}_getSubscriber(t){const n=super._getSubscriber(t);return L$(n)&&(n.pollingInterval=F(this,Gl)),n}get pollingInterval(){return F(this,Gl)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");Q(this,Gl,t),this._forEachSubscriber(n=>{L$(n)&&(n.pollingInterval=F(this,Gl))})}}Gl=new WeakMap;var Wy;class os extends yQ{constructor(t,n,i){t==null&&(t="http://localhost:8545");super(n,i);le(this,Wy);typeof t=="string"?Q(this,Wy,new En(t)):Q(this,Wy,t.clone())}_getConnection(){return F(this,Wy).clone()}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){const n=this._getConnection();n.body=JSON.stringify(t),n.setHeader("content-type","application/json");const i=await n.send();i.assertOk();let s=i.bodyJson;return Array.isArray(s)||(s=[s]),s}}Wy=new WeakMap;function JS(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&Gt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const e in r){const t=JS(r[e]);if(t)return t}return null}if(typeof r=="string")try{return JS(JSON.parse(r))}catch{}return null}function YS(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(const t in r)YS(r[t],e);if(typeof r=="string")try{return YS(JSON.parse(r),e)}catch{}}}function Kge(r){const e=[];return YS(r,e),e}const Z8="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Gge(r){switch(r){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}ee(!1,"unsupported network","network",r)}class Lm extends os{constructor(t,n){t==null&&(t="mainnet");const i=Ur.from(t);n==null&&(n=Z8);const s={polling:!0,staticNetwork:i},a=Lm.getRequest(i,n);super(a,i,s);H(this,"apiKey");je(this,{apiKey:n})}_getProvider(t){try{return new Lm(t,this.apiKey)}catch{}return super._getProvider(t)}static getRequest(t,n){n==null&&(n=Z8);const i=new En(`https://${Gge(t.name)}/${n}`);return i.allowGzip=!0,n===Z8&&(i.retryFunc=async(s,a,o)=>(jf("AnkrProvider"),!0)),i}getRpcError(t,n){return t.method==="eth_sendRawTransaction"&&n&&n.error&&n.error.message==="INTERNAL_ERROR: could not replace existing tx"&&(n.error.message="replacement transaction underpriced"),super.getRpcError(t,n)}isCommunityResource(){return this.apiKey===Z8}}const J8="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";function Qge(r){switch(r){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}ee(!1,"unsupported network","network",r)}class Um extends os{constructor(t,n){t==null&&(t="mainnet");const i=Ur.from(t);n==null&&(n=J8);const s=Um.getRequest(i,n);super(s,i,{staticNetwork:i});H(this,"apiKey");je(this,{apiKey:n})}_getProvider(t){try{return new Um(t,this.apiKey)}catch{}return super._getProvider(t)}async _perform(t){if(t.method==="getTransactionResult"){const{trace:n,tx:i}=await yn({trace:this.send("trace_transaction",[t.hash]),tx:this.getTransaction(t.hash)});if(n==null||i==null)return null;let s,a=!1;try{s=n[0].result.output,a=n[0].error==="Reverted"}catch{}if(s)return ye(!a,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:s,reason:null,transaction:i,invocation:null,revert:null}),s;ye(!1,"could not parse trace result","BAD_DATA",{value:n})}return await super._perform(t)}isCommunityResource(){return this.apiKey===J8}static getRequest(t,n){n==null&&(n=J8);const i=new En(`https://${Qge(t.name)}/v2/${n}`);return i.allowGzip=!0,n===J8&&(i.retryFunc=async(s,a,o)=>(jf("alchemy"),!0)),i}}function Y8(r){switch(r){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}ee(!1,"unsupported network","network",r)}function Zge(r){switch(r){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}ee(!1,"unsupported network","network",r)}class Fm extends os{constructor(t,n){t==null&&(t="mainnet");const i=Ur.from(t);n==null&&(n=Y8(i.name));const s=Fm.getRequest(i,n);super(s,i,{staticNetwork:i});H(this,"apiKey");je(this,{apiKey:n})}_getProvider(t){try{return new Fm(t,this.apiKey)}catch{}return super._getProvider(t)}isCommunityResource(){return this.apiKey===Y8(this._network.name)}static getRequest(t,n){n==null&&(n=Y8(t.name));const i=new En(`https://${Zge(t.name)}/${n}`);return i.allowGzip=!0,n===Y8(t.name)&&(i.retryFunc=async(s,a,o)=>(jf("ChainstackProvider"),!0)),i}}class vR extends os{constructor(e){e==null&&(e="mainnet");const t=Ur.from(e);ee(t.name==="mainnet","unsupported network","network",e),super("https://cloudflare-eth.com/",t,{staticNetwork:t})}}const U$=2e3;function Jge(r){return r&&typeof r.then=="function"}const mQ="org.ethers.plugins.provider.Etherscan";class Z4 extends Ff{constructor(t){super(mQ);H(this,"baseUrl");je(this,{baseUrl:t})}clone(){return new Z4(this.baseUrl)}}const Yge=["enableCcipRead"];let Xge=1;var Ky;class xR extends $m{constructor(t,n){const i=n??null;super();H(this,"network");H(this,"apiKey");le(this,Ky);const s=Ur.from(t);Q(this,Ky,s.getPlugin(mQ)),je(this,{apiKey:i,network:s})}getBaseUrl(){if(F(this,Ky))return F(this,Ky).baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}ee(!1,"unsupported network","network",this.network)}getUrl(t,n){let i=Object.keys(n).reduce((s,a)=>{const o=n[a];return o!=null&&(s+=`&${a}=${o}`),s},"");return this.apiKey&&(i+=`&apikey=${this.apiKey}`),`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${t}${i}`}getPostUrl(){return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`}getPostData(t,n){return n.module=t,n.apikey=this.apiKey,n.chainid=this.network.chainId,n}async detectNetwork(){return this.network}async fetch(t,n,i){const s=Xge++,a=i?this.getPostUrl():this.getUrl(t,n),o=i?this.getPostData(t,n):null;this.emit("debug",{action:"sendRequest",id:s,url:a,payload:o});const c=new En(a);c.setThrottleParams({slotInterval:1e3}),c.retryFunc=(l,d,h)=>(this.isCommunityResource()&&jf("Etherscan"),Promise.resolve(!0)),c.processFunc=async(l,d)=>{const h=d.hasBody()?JSON.parse(Tf(d.body)):{},y=(typeof h.result=="string"?h.result:"").toLowerCase().indexOf("rate limit")>=0;return t==="proxy"?h&&h.status==0&&h.message=="NOTOK"&&y&&(this.emit("debug",{action:"receiveError",id:s,reason:"proxy-NOTOK",error:h}),d.throwThrottleError(h.result,U$)):y&&(this.emit("debug",{action:"receiveError",id:s,reason:"null result",error:h.result}),d.throwThrottleError(h.result,U$)),d},o&&(c.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),c.body=Object.keys(o).map(l=>`${l}=${o[l]}`).join("&"));const u=await c.send();try{u.assertOk()}catch(l){this.emit("debug",{action:"receiveError",id:s,error:l,reason:"assertOk"}),ye(!1,"response error","SERVER_ERROR",{request:c,response:u})}u.hasBody()||(this.emit("debug",{action:"receiveError",id:s,error:"missing body",reason:"null body"}),ye(!1,"missing response","SERVER_ERROR",{request:c,response:u}));const f=JSON.parse(Tf(u.body));return t==="proxy"?(f.jsonrpc!="2.0"&&(this.emit("debug",{action:"receiveError",id:s,result:f,reason:"invalid JSON-RPC"}),ye(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:c,response:u,info:{result:f}})),f.error&&(this.emit("debug",{action:"receiveError",id:s,result:f,reason:"JSON-RPC error"}),ye(!1,"error response","SERVER_ERROR",{request:c,response:u,info:{result:f}})),this.emit("debug",{action:"receiveRequest",id:s,result:f}),f.result):f.status==0&&(f.message==="No records found"||f.message==="No transactions found")?(this.emit("debug",{action:"receiveRequest",id:s,result:f}),f.result):((f.status!=1||typeof f.message=="string"&&!f.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:s,result:f}),ye(!1,"error response","SERVER_ERROR",{request:c,response:u,info:{result:f}})),this.emit("debug",{action:"receiveRequest",id:s,result:f}),f.result)}_getTransactionPostData(t){const n={};for(let i in t){if(Yge.indexOf(i)>=0||t[i]==null)continue;let s=t[i];if(!(i==="type"&&s===0)&&!(i==="blockTag"&&s==="latest")){if({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[i])s=Es(s);else if(i==="accessList")s="["+pu(s).map(a=>`{address:"${a.address}",storageKeys:["${a.storageKeys.join('","')}"]}`).join(",")+"]";else if(i==="blobVersionedHashes"){if(s.length===0)continue;ye(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:t}})}else s=we(s);n[i]=s}}return n}_checkError(t,n,i){let s="";if(Zr(n,"SERVER_ERROR")){try{s=n.info.result.error.message}catch{}if(!s)try{s=n.info.message}catch{}}if(t.method==="estimateGas"&&!s.match(/revert/i)&&s.match(/insufficient funds/i)&&ye(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.transaction}),(t.method==="call"||t.method==="estimateGas")&&s.match(/execution reverted/i)){let a="";try{a=n.info.result.error.data}catch{}const o=B0.getBuiltinCallException(t.method,t.transaction,a);throw o.info={request:t,error:n},o}if(s&&t.method==="broadcastTransaction"){const a=D0.from(t.signedTransaction);s.match(/replacement/i)&&s.match(/underpriced/i)&&ye(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a}),s.match(/insufficient funds/)&&ye(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a}),s.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ye(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:a})}throw n}async _detectNetwork(){return this.network}async _perform(t){switch(t.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if(this.network.name==="mainnet")return"1000000000";if(this.network.name==="optimism")return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(n=>this._checkError(t,n,t.signedTransaction));case"getBlock":if("blockTag"in t)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});ye(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.hash});case"call":{if(t.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const n=this._getTransactionPostData(t.transaction);n.module="proxy",n.action="eth_call";try{return await this.fetch("proxy",n,!0)}catch(i){return this._checkError(t,i,t.transaction)}}case"estimateGas":{const n=this._getTransactionPostData(t.transaction);n.module="proxy",n.action="eth_estimateGas";try{return await this.fetch("proxy",n,!0)}catch(i){return this._checkError(t,i,t.transaction)}}}return super._perform(t)}async getNetwork(){return this.network}async getEtherPrice(){return this.network.name!=="mainnet"?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(t){let n=this._getAddress(t);Jge(n)&&(n=await n);try{const i=await this.fetch("contract",{action:"getabi",address:n}),s=JSON.parse(i);return new hf(n,s,this)}catch{return null}}isCommunityResource(){return this.apiKey==null}}Ky=new WeakMap;function e2e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const t2e=e2e().WebSocket;var Mc,k2,Ql,hh,Zl;class b5{constructor(e,t){le(this,Mc);le(this,k2);le(this,Ql);le(this,hh);le(this,Zl);Q(this,Mc,e),Q(this,k2,JSON.stringify(t)),Q(this,Ql,null),Q(this,hh,null),Q(this,Zl,null)}get filter(){return JSON.parse(F(this,k2))}start(){Q(this,Ql,F(this,Mc).send("eth_subscribe",this.filter).then(e=>(F(this,Mc)._register(e,this),e)))}stop(){F(this,Ql).then(e=>{F(this,Mc).destroyed||F(this,Mc).send("eth_unsubscribe",[e])}),Q(this,Ql,null)}pause(e){ye(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),Q(this,hh,!!e)}resume(){Q(this,hh,null)}_handleMessage(e){if(F(this,Ql)!=null&&F(this,hh)===null){let t=F(this,Zl);t==null?t=this._emit(F(this,Mc),e):t=t.then(async()=>{await this._emit(F(this,Mc),e)}),Q(this,Zl,t.then(()=>{F(this,Zl)===t&&Q(this,Zl,null)}))}}async _emit(e,t){throw new Error("sub-classes must implemente this; _emit")}}Mc=new WeakMap,k2=new WeakMap,Ql=new WeakMap,hh=new WeakMap,Zl=new WeakMap;class wR extends b5{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}class ER extends b5{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}var D2;class AR extends b5{constructor(t,n){super(t,["logs",n]);le(this,D2);Q(this,D2,JSON.stringify(n))}get logFilter(){return JSON.parse(F(this,D2))}async _emit(t,n){t.emit(this.logFilter,t._wrapLog(n,t._network))}}D2=new WeakMap;var ph,Gy,Jl;class _R extends Q4{constructor(t,n){const i=Object.assign({},n??{});ee(i.batchMaxCount==null||i.batchMaxCount===1,"sockets-based providers do not support batches","options.batchMaxCount",n),i.batchMaxCount=1,i.staticNetwork==null&&(i.staticNetwork=!0);super(t,i);le(this,ph);le(this,Gy);le(this,Jl);Q(this,ph,new Map),Q(this,Gy,new Map),Q(this,Jl,new Map)}_getSubscriber(t){switch(t.type){case"close":return new Bm("close");case"block":return new wR(this);case"pending":return new ER(this);case"event":return new AR(this,t.filter);case"orphan":if(t.filter.orphan==="drop-log")return new Bm("drop-log")}return super._getSubscriber(t)}_register(t,n){F(this,Gy).set(t,n);const i=F(this,Jl).get(t);if(i){for(const s of i)n._handleMessage(s);F(this,Jl).delete(t)}}async _send(t){ee(!Array.isArray(t),"WebSocket does not support batch send","payload",t);const n=new Promise((i,s)=>{F(this,ph).set(t.id,{payload:t,resolve:i,reject:s})});return await this._waitUntilReady(),await this._write(JSON.stringify(t)),[await n]}async _processMessage(t){const n=JSON.parse(t);if(n&&typeof n=="object"&&"id"in n){const i=F(this,ph).get(n.id);if(i==null){this.emit("error",Jt("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:n}));return}F(this,ph).delete(n.id),i.resolve(n)}else if(n&&n.method==="eth_subscription"){const i=n.params.subscription,s=F(this,Gy).get(i);if(s)s._handleMessage(n.params.result);else{let a=F(this,Jl).get(i);a==null&&(a=[],F(this,Jl).set(i,a)),a.push(n.params.result)}}else{this.emit("error",Jt("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:n}));return}}async _write(t){throw new Error("sub-classes must override this")}}ph=new WeakMap,Gy=new WeakMap,Jl=new WeakMap;var yh,Ro;class J4 extends _R{constructor(t,n,i){super(n,i);le(this,yh);le(this,Ro);typeof t=="string"?(Q(this,yh,()=>new t2e(t)),Q(this,Ro,F(this,yh).call(this))):typeof t=="function"?(Q(this,yh,t),Q(this,Ro,t())):(Q(this,yh,null),Q(this,Ro,t)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(s){console.log("failed to start WebsocketProvider",s)}},this.websocket.onmessage=s=>{this._processMessage(s.data)}}get websocket(){if(F(this,Ro)==null)throw new Error("websocket closed");return F(this,Ro)}async _write(t){this.websocket.send(t)}async destroy(){F(this,Ro)!=null&&(F(this,Ro).close(),Q(this,Ro,null)),super.destroy()}}yh=new WeakMap,Ro=new WeakMap;const Eb="84842078b09946638c03157f83405213";function r2e(r){switch(r){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}ee(!1,"unsupported network","network",r)}class SR extends J4{constructor(t,n){const i=new op(t,n),s=i._getConnection();ye(!s.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"});const a=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(a,i._network);H(this,"projectId");H(this,"projectSecret");je(this,{projectId:i.projectId,projectSecret:i.projectSecret})}isCommunityResource(){return this.projectId===Eb}}class op extends os{constructor(t,n,i){t==null&&(t="mainnet");const s=Ur.from(t);n==null&&(n=Eb),i==null&&(i=null);const a=op.getRequest(s,n,i);super(a,s,{staticNetwork:s});H(this,"projectId");H(this,"projectSecret");je(this,{projectId:n,projectSecret:i})}_getProvider(t){try{return new op(t,this.projectId,this.projectSecret)}catch{}return super._getProvider(t)}isCommunityResource(){return this.projectId===Eb}static getWebSocketProvider(t,n){return new SR(t,n)}static getRequest(t,n,i){n==null&&(n=Eb),i==null&&(i=null);const s=new En(`https://${r2e(t.name)}/v3/${n}`);return s.allowGzip=!0,i&&s.setCredentials("",i),n===Eb&&(s.retryFunc=async(a,o,c)=>(jf("InfuraProvider"),!0)),s}}const X8="919b412a057b5e9c9b6dce193c5a60242d6efadb";function n2e(r){switch(r){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}ee(!1,"unsupported network","network",r)}class jm extends os{constructor(t,n){t==null&&(t="mainnet");const i=Ur.from(t);n==null&&(n=X8);const s=jm.getRequest(i,n);super(s,i,{staticNetwork:i});H(this,"token");je(this,{token:n})}_getProvider(t){try{return new jm(t,this.token)}catch{}return super._getProvider(t)}isCommunityResource(){return this.token===X8}static getRequest(t,n){n==null&&(n=X8);const i=new En(`https://${n2e(t.name)}/${n}`);return i.allowGzip=!0,n===X8&&(i.retryFunc=async(s,a,o)=>(jf("QuickNodeProvider"),!0)),i}}const i2e=BigInt("1"),s2e=BigInt("2");function a2e(r){for(let e=r.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),n=r[e];r[e]=r[t],r[t]=n}}function o2e(r){return new Promise(e=>{setTimeout(e,r)})}function XS(){return new Date().getTime()}function hE(r){return JSON.stringify(r,(e,t)=>typeof t=="bigint"?{type:"bigint",value:t.toString()}:t)}const F$={stallTimeout:400,priority:1,weight:1},j$={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function c2e(r,e){for(;(r.blockNumber<0||r.blockNumber<e)&&(r._updateNumber||(r._updateNumber=(async()=>{try{const t=await r.provider.getBlockNumber();t>r.blockNumber&&(r.blockNumber=t)}catch(t){r.blockNumber=-2,r._lastFatalError=t,r._lastFatalErrorTimestamp=XS()}r._updateNumber=null})()),await r._updateNumber,r.outOfSync++,!r._lastFatalError););}function Y1(r){if(r==null)return"null";if(Array.isArray(r))return"["+r.map(Y1).join(",")+"]";if(typeof r=="object"&&typeof r.toJSON=="function")return Y1(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":case"number":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const e=Object.keys(r);return e.sort(),"{"+e.map(t=>`${JSON.stringify(t)}:${Y1(r[t])}`).join(",")+"}"}}throw console.log("Could not serialize",r),new Error("Hmm...")}function pE(r,e){if("error"in e){const n=e.error;let i;return Zr(n,"CALL_EXCEPTION")?i=Y1(Object.assign({},n,{shortMessage:void 0,reason:void 0,info:void 0})):i=Y1(n),{tag:i,value:n}}const t=e.result;return{tag:Y1(t),value:t}}function c3(r,e){const t=new Map;for(const{value:i,tag:s,weight:a}of e){const o=t.get(s)||{value:i,weight:0};o.weight+=a,t.set(s,o)}let n=null;for(const i of t.values())i.weight>=r&&(!n||i.weight>n.weight)&&(n=i);if(n)return n.value}function eM(r,e){let t=0;const n=new Map;let i=null;const s=[];for(const{value:o,tag:c,weight:u}of e)if(o instanceof Error){const f=n.get(c)||{value:o,weight:0};f.weight+=u,n.set(c,f),(i==null||f.weight>i.weight)&&(i=f)}else s.push(BigInt(o)),t+=u;if(t<r)return i&&i.weight>=r?i.value:void 0;s.sort((o,c)=>o<c?-1:c>o?1:0);const a=Math.floor(s.length/2);return s.length%2?s[a]:(s[a-1]+s[a]+i2e)/s2e}function yE(r,e){const t=c3(r,e);if(t!==void 0)return t;for(const n of e)if(n.value)return n.value}function u2e(r,e){if(r===1)return ot(eM(r,e),"%internal");const t=new Map,n=(a,o)=>{const c=t.get(a)||{result:a,weight:0};c.weight+=o,t.set(a,c)};for(const{weight:a,value:o}of e){const c=ot(o);n(c-1,a),n(c,a),n(c+1,a)}let i=0,s;for(const{weight:a,result:o}of t.values())a>=r&&(a>i||s!=null&&a===i&&o>s)&&(i=a,s=o);return s}var vs,Qu,Qy,Fs,bQ,tM,gQ,vQ,rM;class MR extends $m{constructor(t,n,i){super(n,i);le(this,Fs);H(this,"quorum");H(this,"eventQuorum");H(this,"eventWorkers");le(this,vs);le(this,Qu);le(this,Qy);Q(this,vs,t.map(s=>s instanceof $m?Object.assign({provider:s},F$,j$):Object.assign({},F$,s,j$))),Q(this,Qu,-2),Q(this,Qy,null),i&&i.quorum!=null?this.quorum=i.quorum:this.quorum=Math.ceil(F(this,vs).reduce((s,a)=>(s+=a.weight,s),0)/2),this.eventQuorum=1,this.eventWorkers=1,ee(this.quorum<=F(this,vs).reduce((s,a)=>s+a.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return F(this,vs).map(t=>{const n=Object.assign({},t);for(const i in n)i[0]==="_"&&delete n[i];return n})}async _detectNetwork(){return Ur.from(He(await this._perform({method:"chainId"})))}async _translatePerform(t,n){switch(n.method){case"broadcastTransaction":return await t.broadcastTransaction(n.signedTransaction);case"call":return await t.call(Object.assign({},n.transaction,{blockTag:n.blockTag}));case"chainId":return(await t.getNetwork()).chainId;case"estimateGas":return await t.estimateGas(n.transaction);case"getBalance":return await t.getBalance(n.address,n.blockTag);case"getBlock":{const i="blockHash"in n?n.blockHash:n.blockTag;return await t.getBlock(i,n.includeTransactions)}case"getBlockNumber":return await t.getBlockNumber();case"getCode":return await t.getCode(n.address,n.blockTag);case"getGasPrice":return(await t.getFeeData()).gasPrice;case"getPriorityFee":return(await t.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await t.getLogs(n.filter);case"getStorage":return await t.getStorage(n.address,n.position,n.blockTag);case"getTransaction":return await t.getTransaction(n.hash);case"getTransactionCount":return await t.getTransactionCount(n.address,n.blockTag);case"getTransactionReceipt":return await t.getTransactionReceipt(n.hash);case"getTransactionResult":return await t.getTransactionResult(n.hash)}}async _perform(t){if(t.method==="broadcastTransaction"){const a=F(this,vs).map(u=>null),o=F(this,vs).map(async({provider:u,weight:f},l)=>{try{const d=await u._perform(t);a[l]=Object.assign(pE(t.method,{result:d}),{weight:f})}catch(d){a[l]=Object.assign(pE(t.method,{error:d}),{weight:f})}});for(;;){const u=a.filter(d=>d!=null);for(const{value:d}of u)if(!(d instanceof Error))return d;const f=c3(this.quorum,a.filter(d=>d!=null));if(Zr(f,"INSUFFICIENT_FUNDS"))throw f;const l=o.filter((d,h)=>a[h]==null);if(l.length===0)break;await Promise.race(l)}const c=yE(this.quorum,a);if(ye(c!==void 0,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:a.map(hE)}}),c instanceof Error)throw c;return c}await ve(this,Fs,gQ).call(this);const n=new Set;let i=0;for(;;){const a=ve(this,Fs,tM).call(this,n,t);if(a==null||(i+=a.config.weight,i>=this.quorum))break}const s=await ve(this,Fs,rM).call(this,n,t);for(const a of n)a.perform&&a.result==null&&a.config.lateResponses++;return s}async destroy(){for(const{provider:t}of F(this,vs))t.destroy();super.destroy()}}vs=new WeakMap,Qu=new WeakMap,Qy=new WeakMap,Fs=new WeakSet,bQ=function(t){const n=Array.from(t).map(s=>s.config),i=F(this,vs).slice();a2e(i),i.sort((s,a)=>s.priority-a.priority);for(const s of i)if(!s._lastFatalError&&n.indexOf(s)===-1)return s;return null},tM=function(t,n){const i=ve(this,Fs,bQ).call(this,t);if(i==null)return null;const s={config:i,result:null,didBump:!1,perform:null,staller:null},a=XS();return s.perform=(async()=>{try{i.requests++;const c=await this._translatePerform(i.provider,n);s.result={result:c}}catch(c){i.errorResponses++,s.result={error:c}}const o=XS()-a;i._totalTime+=o,i.rollingDuration=.95*i.rollingDuration+.05*o,s.perform=null})(),s.staller=(async()=>{await o2e(i.stallTimeout),s.staller=null})(),t.add(s),s},gQ=async function(){let t=F(this,Qy);if(!t){const n=[];F(this,vs).forEach(i=>{n.push((async()=>{await c2e(i,0),i._lastFatalError||(i._network=await i.provider.getNetwork())})())}),Q(this,Qy,t=(async()=>{await Promise.all(n);let i=null;for(const s of F(this,vs)){if(s._lastFatalError)continue;const a=s._network;i==null?i=a.chainId:a.chainId!==i&&ye(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})())}await t},vQ=async function(t,n){const i=[];for(const s of t)if(s.result!=null){const{tag:a,value:o}=pE(n.method,s.result);i.push({tag:a,value:o,weight:s.config.weight})}if(!(i.reduce((s,a)=>s+a.weight,0)<this.quorum)){switch(n.method){case"getBlockNumber":{F(this,Qu)===-2&&Q(this,Qu,Math.ceil(ot(eM(this.quorum,F(this,vs).filter(a=>!a._lastFatalError).map(a=>({value:a.blockNumber,tag:ot(a.blockNumber).toString(),weight:a.weight}))))));const s=u2e(this.quorum,i);return s===void 0?void 0:(s>F(this,Qu)&&Q(this,Qu,s),F(this,Qu))}case"getGasPrice":case"getPriorityFee":case"estimateGas":return eM(this.quorum,i);case"getBlock":return"blockTag"in n&&n.blockTag==="pending"?yE(this.quorum,i):c3(this.quorum,i);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return c3(this.quorum,i);case"broadcastTransaction":return yE(this.quorum,i)}ye(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${hE(n.method)})`})}},rM=async function(t,n){if(t.size===0)throw new Error("no runners?!");const i=[];let s=0;for(const o of t){if(o.perform&&i.push(o.perform),o.staller){i.push(o.staller);continue}o.didBump||(o.didBump=!0,s++)}const a=await ve(this,Fs,vQ).call(this,t,n);if(a!==void 0){if(a instanceof Error)throw a;return a}for(let o=0;o<s;o++)ve(this,Fs,tM).call(this,t,n);return ye(i.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:n,results:Array.from(t).map(o=>hE(o.result))}}),await Promise.race(i),await ve(this,Fs,rM).call(this,t,n)};function f2e(r){return r&&typeof r.send=="function"&&typeof r.close=="function"}const l2e="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function xQ(r,e){e==null&&(e={});const t=a=>e[a]==="-"?!1:typeof e.exclusive=="string"?a===e.exclusive:Array.isArray(e.exclusive)?e.exclusive.indexOf(a)!==-1:!0;if(typeof r=="string"&&r.match(/^https?:/))return new os(r);if(typeof r=="string"&&r.match(/^wss?:/)||f2e(r))return new J4(r);let n=null;try{n=Ur.from(r)}catch{}const i=[];if(t("publicPolygon")&&n&&(n.name==="matic"?i.push(new os("https://polygon-rpc.com/",n,{staticNetwork:n})):n.name==="matic-amoy"&&i.push(new os("https://rpc-amoy.polygon.technology/",n,{staticNetwork:n}))),t("alchemy"))try{i.push(new Um(r,e.alchemy))}catch{}if(t("ankr")&&e.ankr!=null)try{i.push(new Lm(r,e.ankr))}catch{}if(t("chainstack"))try{i.push(new Fm(r,e.chainstack))}catch{}if(t("cloudflare"))try{i.push(new vR(r))}catch{}if(t("etherscan"))try{i.push(new xR(r,e.etherscan))}catch{}if(t("infura"))try{let a=e.infura,o;typeof a=="object"&&(o=a.projectSecret,a=a.projectId),i.push(new op(r,a,o))}catch{}if(t("quicknode"))try{let a=e.quicknode;i.push(new jm(r,a))}catch{}if(ye(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),i.length===1)return i[0];let s=Math.floor(i.length/2);return s>2&&(s=2),n&&l2e.indexOf(n.name)!==-1&&(s=1),e&&e.quorum&&(s=e.quorum),new MR(i,void 0,{quorum:s})}var Yl,mh;const YN=class YN extends E6{constructor(t){super(t.provider);H(this,"signer");le(this,Yl);le(this,mh);je(this,{signer:t}),Q(this,Yl,null),Q(this,mh,0)}async getAddress(){return this.signer.getAddress()}connect(t){return new YN(this.signer.connect(t))}async getNonce(t){if(t==="pending"){F(this,Yl)==null&&Q(this,Yl,super.getNonce("pending"));const n=F(this,mh);return await F(this,Yl)+n}return super.getNonce(t)}increment(){kp(this,mh)._++}reset(){Q(this,mh,0),Q(this,Yl,null)}async sendTransaction(t){const n=this.getNonce("pending");return this.increment(),t=await this.signer.populateTransaction(t),t.nonce=await n,await this.signer.sendTransaction(t)}signTransaction(t){return this.signer.signTransaction(t)}signMessage(t){return this.signer.signMessage(t)}signTypedData(t,n,i){return this.signer.signTypedData(t,n,i)}};Yl=new WeakMap,mh=new WeakMap;let qx=YN;var Zy,Jy;const Td=class Td extends yQ{constructor(t,n,i){const s=Object.assign({},i??{},{batchMaxCount:1});ee(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(n,s);le(this,Zy);le(this,Jy);Q(this,Jy,null),i&&i.providerInfo&&Q(this,Jy,i.providerInfo),Q(this,Zy,async(a,o)=>{const c={method:a,params:o};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await t.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const f=new Error(u.message);throw f.code=u.code,f.data=u.data,f.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:f}),f}})}get providerInfo(){return F(this,Jy)}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){ee(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const n=await F(this,Zy).call(this,t.method,t.params||[]);return[{id:t.id,result:n}]}catch(n){return[{id:t.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(t,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(t,n)}async hasSigner(t){t==null&&(t=0);const n=await this.send("eth_accounts",[]);return typeof t=="number"?n.length>t:(t=t.toLowerCase(),n.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await F(this,Zy).call(this,"eth_requestAccounts",[])}catch(n){const i=n.payload;throw this.getRpcError(i,{id:i.id,error:n})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new Td(t.provider);const n=t.window?t.window:typeof window<"u"?window:null;if(n==null)return null;const i=t.anyProvider;if(i&&n.ethereum)return new Td(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const s=t.timeout?t.timeout:300;return s===0?null:await new Promise((a,o)=>{let c=[];const u=d=>{c.push(d.detail),i&&f()},f=()=>{if(clearTimeout(l),c.length)if(t&&t.filter){const d=t.filter(c.map(h=>Object.assign({},h.info)));if(d==null)a(null);else if(d instanceof Td)a(d);else{let h=null;if(d.uuid&&(h=c.filter(p=>d.uuid===p.info.uuid)[0]),h){const{provider:y,info:p}=h;a(new Td(y,void 0,{providerInfo:p}))}else o(Jt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:d}))}}else{const{provider:d,info:h}=c[0];a(new Td(d,void 0,{providerInfo:h}))}else a(null);n.removeEventListener("eip6963:announceProvider",u)},l=setTimeout(()=>{f()},s);n.addEventListener("eip6963:announceProvider",u),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};Zy=new WeakMap,Jy=new WeakMap;let Vx=Td;function d2e(r){switch(r){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}ee(!1,"unsupported network","network",r)}class a2 extends os{constructor(t,n){t==null&&(t="mainnet");const i=Ur.from(t);n==null&&(n=null);const s=a2.getRequest(i);super(s,i,{staticNetwork:i});H(this,"apiKey");je(this,{apiKey:n})}_getProvider(t){try{return new a2(t,this.apiKey)}catch{}return super._getProvider(t)}isCommunityResource(){return this.apiKey===null}getRpcRequest(t){const n=super.getRpcRequest(t);return n&&n.method==="eth_estimateGas"&&n.args.length==1&&(n.args=n.args.slice(),n.args.push("latest")),n}getRpcError(t,n){const i=n?n.error:null;if(i&&i.code===-32015&&!Gt(i.data||"",!0)){const s={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"};let a="";i.message==="VM execution error."?a=s[i.data]||"":s[i.message||""]&&(a=s[i.message||""]),a&&(i.message+=` (reverted: ${i.data})`,i.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+a)}else i&&i.code===-32e3&&i.message==="wrong transaction nonce"&&(i.message+=" (nonce too low)");return super.getRpcError(t,n)}static getRequest(t){const n=new En(d2e(t.name));return n.allowGzip=!0,n}}const ev="62e1ad51b37b8e00394bda3b";function h2e(r){switch(r){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}ee(!1,"unsupported network","network",r)}class o2 extends os{constructor(t,n,i){t==null&&(t="mainnet");const s=Ur.from(t);n==null&&(n=ev),i==null&&(i=null);const a={staticNetwork:s},o=o2.getRequest(s,n,i);super(o,s,a);H(this,"applicationId");H(this,"applicationSecret");je(this,{applicationId:n,applicationSecret:i})}_getProvider(t){try{return new o2(t,this.applicationId,this.applicationSecret)}catch{}return super._getProvider(t)}static getRequest(t,n,i){n==null&&(n=ev);const s=new En(`https://${h2e(t.name)}/v1/lb/${n}`);return s.allowGzip=!0,i&&s.setCredentials("",i),n===ev&&(s.retryFunc=async(a,o,c)=>(jf("PocketProvider"),!0)),s}isCommunityResource(){return this.applicationId===ev}}const wQ=void 0;var Yy;const XN=class XN extends E6{constructor(t,n){super(n);H(this,"address");le(this,Yy);ee(t&&typeof t.sign=="function","invalid private key","privateKey","[ REDACTED ]"),Q(this,Yy,t);const i=Ep(this.signingKey.publicKey);je(this,{address:i})}get signingKey(){return F(this,Yy)}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new XN(F(this,Yy),t)}async signTransaction(t){t=np(t);const{to:n,from:i}=await yn({to:t.to?ln(t.to,this):void 0,from:t.from?ln(t.from,this):void 0});n!=null&&(t.to=n),i!=null&&(t.from=i),t.from!=null&&(ee(pt(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const s=D0.from(t);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(q4(t)).serialized}authorizeSync(t){ee(typeof t.address=="string","invalid address for authorizeSync","auth.address",t);const n=this.signingKey.sign(F4(t));return Object.assign({},{address:pt(t.address),nonce:He(t.nonce||0),chainId:He(t.chainId||0)},{signature:n})}async authorize(t){return t=Object.assign({},t,{address:await ln(t.address,this)}),this.authorizeSync(await this.populateAuthorization(t))}async signTypedData(t,n,i){const s=await Cf.resolveNames(t,n,i,async a=>{ye(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:a}});const o=await this.provider.resolveName(a);return ye(o!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:a}),o});return this.signingKey.sign(Cf.hash(s.domain,n,s.value)).serialized}};Yy=new WeakMap;let qm=XN;const zx=" !#$%&'()*+,-./<=>?@[]^_`{|}~",p2e=/^[a-z]*$/i;function q$(r,e){let t=97;return r.reduce((n,i)=>(i===e?t++:i.match(p2e)?n.push(String.fromCharCode(t)+i):(t=97,n.push(i)),n),[])}function y2e(r,e){for(let i=zx.length-1;i>=0;i--)r=r.split(zx[i]).join(e.substring(2*i,2*i+2));const t=[],n=r.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(i,s,a,o)=>{if(a)for(let c=parseInt(a);c>=0;c--)t.push(";");else t.push(s.toLowerCase());return""});if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return q$(q$(t,";"),":")}function EQ(r){return ee(r[0]==="0","unsupported auwl data","data",r),y2e(r.substring(1+2*zx.length),r.substring(1,1+2*zx.length))}class PR{constructor(e){H(this,"locale");je(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}var Xy,B2,bh,$2,nM;class Y4 extends PR{constructor(t,n,i){super(t);le(this,$2);le(this,Xy);le(this,B2);le(this,bh);Q(this,Xy,n),Q(this,B2,i),Q(this,bh,null)}get _data(){return F(this,Xy)}_decodeWords(){return EQ(F(this,Xy))}getWord(t){const n=ve(this,$2,nM).call(this);return ee(t>=0&&t<n.length,`invalid word index: ${t}`,"index",t),n[t]}getWordIndex(t){return ve(this,$2,nM).call(this).indexOf(t)}}Xy=new WeakMap,B2=new WeakMap,bh=new WeakMap,$2=new WeakSet,nM=function(){if(F(this,bh)==null){const t=this._decodeWords();if(Zo(t.join(`
`)+`
`)!==F(this,B2))throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);Q(this,bh,t)}return F(this,bh)};const m2e="0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO",b2e="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60";let mE=null;class iu extends Y4{constructor(){super("en",m2e,b2e)}static wordlist(){return mE==null&&(mE=new iu),mE}}function AQ(r){return(1<<r)-1<<8-r&255}function g2e(r){return(1<<r)-1&255}function bE(r,e){_4("NFKD"),e==null&&(e=iu.wordlist());const t=e.split(r);ee(t.length%3===0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*t.length/8));let i=0;for(let u=0;u<t.length;u++){let f=e.getWordIndex(t[u].normalize("NFKD"));ee(f>=0,`invalid mnemonic word at index ${u}`,"mnemonic","[ REDACTED ]");for(let l=0;l<11;l++)f&1<<10-l&&(n[i>>3]|=1<<7-i%8),i++}const s=32*t.length/3,a=t.length/3,o=AQ(a),c=De(ji(n.slice(0,s/8)))[0]&o;return ee(c===(n[n.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),we(n.slice(0,s/8))}function gE(r,e){ee(r.length%4===0&&r.length>=16&&r.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=iu.wordlist());const t=[0];let n=11;for(let a=0;a<r.length;a++)n>8?(t[t.length-1]<<=8,t[t.length-1]|=r[a],n-=8):(t[t.length-1]<<=n,t[t.length-1]|=r[a]>>8-n,t.push(r[a]&g2e(8-n)),n+=3);const i=r.length/4,s=parseInt(ji(r).substring(2,4),16)&AQ(i);return t[t.length-1]<<=i,t[t.length-1]|=s>>8-i,e.join(t.map(a=>e.getWord(a)))}const vE={};class $0{constructor(e,t,n,i,s){H(this,"phrase");H(this,"password");H(this,"wordlist");H(this,"entropy");i==null&&(i=""),s==null&&(s=iu.wordlist()),hu(e,vE,"Mnemonic"),je(this,{phrase:n,password:i,wordlist:s,entropy:t})}computeSeed(){const e=on("mnemonic"+this.password,"NFKD");return Yo(on(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,n){const i=bE(e,n);return e=gE(De(i),n),new $0(vE,i,e,t,n)}static fromEntropy(e,t,n){const i=De(e,"entropy"),s=gE(i,n);return new $0(vE,we(i),s,t,n)}static entropyToPhrase(e,t){const n=De(e,"entropy");return gE(n,t)}static phraseToEntropy(e,t){return bE(e,t)}static isValidMnemonic(e,t){try{return bE(e,t),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Gn=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},xE=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},u3,Ma,lc;const v2e={16:10,24:12,32:14},x2e=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Aa=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],tv=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],w2e=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],E2e=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],A2e=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],_2e=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],S2e=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],M2e=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],P2e=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],T2e=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],C2e=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],I2e=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],R2e=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],N2e=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function wE(r){const e=[];for(let t=0;t<r.length;t+=4)e.push(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3]);return e}class TR{get key(){return Gn(this,u3,"f").slice()}constructor(e){if(u3.set(this,void 0),Ma.set(this,void 0),lc.set(this,void 0),!(this instanceof TR))throw Error("AES must be instanitated with `new`");xE(this,u3,new Uint8Array(e),"f");const t=v2e[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");xE(this,lc,[],"f"),xE(this,Ma,[],"f");for(let f=0;f<=t;f++)Gn(this,lc,"f").push([0,0,0,0]),Gn(this,Ma,"f").push([0,0,0,0]);const n=(t+1)*4,i=this.key.length/4,s=wE(this.key);let a;for(let f=0;f<i;f++)a=f>>2,Gn(this,lc,"f")[a][f%4]=s[f],Gn(this,Ma,"f")[t-a][f%4]=s[f];let o=0,c=i,u;for(;c<n;){if(u=s[i-1],s[0]^=Aa[u>>16&255]<<24^Aa[u>>8&255]<<16^Aa[u&255]<<8^Aa[u>>24&255]^x2e[o]<<24,o+=1,i!=8)for(let h=1;h<i;h++)s[h]^=s[h-1];else{for(let h=1;h<i/2;h++)s[h]^=s[h-1];u=s[i/2-1],s[i/2]^=Aa[u&255]^Aa[u>>8&255]<<8^Aa[u>>16&255]<<16^Aa[u>>24&255]<<24;for(let h=i/2+1;h<i;h++)s[h]^=s[h-1]}let f=0,l,d;for(;f<i&&c<n;)l=c>>2,d=c%4,Gn(this,lc,"f")[l][d]=s[f],Gn(this,Ma,"f")[t-l][d]=s[f++],c++}for(let f=1;f<t;f++)for(let l=0;l<4;l++)u=Gn(this,Ma,"f")[f][l],Gn(this,Ma,"f")[f][l]=C2e[u>>24&255]^I2e[u>>16&255]^R2e[u>>8&255]^N2e[u&255]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const t=Gn(this,lc,"f").length-1,n=[0,0,0,0];let i=wE(e);for(let o=0;o<4;o++)i[o]^=Gn(this,lc,"f")[0][o];for(let o=1;o<t;o++){for(let c=0;c<4;c++)n[c]=w2e[i[c]>>24&255]^E2e[i[(c+1)%4]>>16&255]^A2e[i[(c+2)%4]>>8&255]^_2e[i[(c+3)%4]&255]^Gn(this,lc,"f")[o][c];i=n.slice()}const s=new Uint8Array(16);let a=0;for(let o=0;o<4;o++)a=Gn(this,lc,"f")[t][o],s[4*o]=(Aa[i[o]>>24&255]^a>>24)&255,s[4*o+1]=(Aa[i[(o+1)%4]>>16&255]^a>>16)&255,s[4*o+2]=(Aa[i[(o+2)%4]>>8&255]^a>>8)&255,s[4*o+3]=(Aa[i[(o+3)%4]&255]^a)&255;return s}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const t=Gn(this,Ma,"f").length-1,n=[0,0,0,0];let i=wE(e);for(let o=0;o<4;o++)i[o]^=Gn(this,Ma,"f")[0][o];for(let o=1;o<t;o++){for(let c=0;c<4;c++)n[c]=S2e[i[c]>>24&255]^M2e[i[(c+3)%4]>>16&255]^P2e[i[(c+2)%4]>>8&255]^T2e[i[(c+1)%4]&255]^Gn(this,Ma,"f")[o][c];i=n.slice()}const s=new Uint8Array(16);let a=0;for(let o=0;o<4;o++)a=Gn(this,Ma,"f")[t][o],s[4*o]=(tv[i[o]>>24&255]^a>>24)&255,s[4*o+1]=(tv[i[(o+3)%4]>>16&255]^a>>16)&255,s[4*o+2]=(tv[i[(o+2)%4]>>8&255]^a>>8)&255,s[4*o+3]=(tv[i[(o+1)%4]&255]^a)&255;return s}}u3=new WeakMap,Ma=new WeakMap,lc=new WeakMap;class _Q{constructor(e,t,n){if(n&&!(this instanceof n))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new TR(t)},name:{enumerable:!0,value:e}})}}var rv=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},zp=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ab,Cu;class CR extends _Q{constructor(e,t){if(super("ECC",e,CR),Ab.set(this,void 0),Cu.set(this,void 0),t){if(t.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");rv(this,Ab,new Uint8Array(t),"f")}else rv(this,Ab,new Uint8Array(16),"f");rv(this,Cu,this.iv,"f")}get iv(){return new Uint8Array(zp(this,Ab,"f"))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let n=0;n<e.length;n+=16){for(let i=0;i<16;i++)zp(this,Cu,"f")[i]^=e[n+i];rv(this,Cu,this.aes.encrypt(zp(this,Cu,"f")),"f"),t.set(zp(this,Cu,"f"),n)}return t}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let n=0;n<e.length;n+=16){const i=this.aes.decrypt(e.subarray(n,n+16));for(let s=0;s<16;s++)t[n+s]=i[s]^zp(this,Cu,"f")[s],zp(this,Cu,"f")[s]=e[n+s]}return t}}Ab=new WeakMap,Cu=new WeakMap;var Hp=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},_a=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_b,wd,Pa;class Vm extends _Q{constructor(e,t){super("CTR",e,Vm),_b.set(this,void 0),wd.set(this,void 0),Pa.set(this,void 0),Hp(this,Pa,new Uint8Array(16),"f"),_a(this,Pa,"f").fill(0),Hp(this,_b,_a(this,Pa,"f"),"f"),Hp(this,wd,16,"f"),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(_a(this,Pa,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)_a(this,Pa,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");_a(this,Pa,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(_a(this,Pa,"f")[e]===255)_a(this,Pa,"f")[e]=0;else{_a(this,Pa,"f")[e]++;break}}encrypt(e){var t,n;const i=new Uint8Array(e);for(let s=0;s<i.length;s++)_a(this,wd,"f")===16&&(Hp(this,_b,this.aes.encrypt(_a(this,Pa,"f")),"f"),Hp(this,wd,0,"f"),this.increment()),i[s]^=_a(this,_b,"f")[Hp(this,wd,(n=_a(this,wd,"f"),t=n++,n),"f"),t];return i}decrypt(e){return this.encrypt(e)}}_b=new WeakMap,wd=new WeakMap,Pa=new WeakMap;function O2e(r){if(r.length<16)throw new TypeError("PKCS#7 invalid length");const e=r[r.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const t=r.length-e;for(let n=0;n<e;n++)if(r[t+n]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(r.subarray(0,t))}function SQ(r){return typeof r=="string"&&!r.startsWith("0x")&&(r="0x"+r),gn(r)}function tb(r,e){for(r=String(r);r.length<e;)r="0"+r;return r}function g5(r){return typeof r=="string"?on(r,"NFKC"):gn(r)}function rn(r,e){const t=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);ee(t!=null,"invalid path","path",e);const n=t[1],i=t[3],s=t[4]==="!";let a=r;for(const o of n.toLowerCase().split(".")){if(Array.isArray(a)){if(!o.match(/^[0-9]+$/))break;a=a[parseInt(o)]}else if(typeof a=="object"){let c=null;for(const u in a)if(u.toLowerCase()===o){c=a[u];break}a=c}else a=null;if(a==null)break}if(ee(!s||a!=null,"missing required value","path",n),i&&a!=null){if(i==="int"){if(typeof a=="string"&&a.match(/^-?[0-9]+$/))return parseInt(a);if(Number.isSafeInteger(a))return a}if(i==="number"&&typeof a=="string"&&a.match(/^-?[0-9.]*$/))return parseFloat(a);if(i==="data"&&typeof a=="string")return SQ(a);if(i==="array"&&Array.isArray(a)||i===typeof a)return a;ee(!1,`wrong type found for ${i} `,"path",n)}return a}const MQ="m/44'/60'/0'/0/0";function Hx(r){try{const e=JSON.parse(r);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function k2e(r,e,t){if(rn(r,"crypto.cipher:string")==="aes-128-ctr"){const i=rn(r,"crypto.cipherparams.iv:data!"),s=new Vm(e,i);return we(s.decrypt(t))}ye(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}function Wx(r,e){const t=De(e),n=rn(r,"crypto.ciphertext:data!"),i=we(Kt(_t([t.slice(16,32),n]))).substring(2);ee(i===rn(r,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=k2e(r,t.slice(0,16),n),a=Ep(s);if(r.address){let u=r.address.toLowerCase();u.startsWith("0x")||(u="0x"+u),ee(pt(u)===a,"keystore address/privateKey mismatch","address",r.address)}const o={address:a,privateKey:s};if(rn(r,"x-ethers.version:string")==="0.1"){const u=t.slice(32,64),f=rn(r,"x-ethers.mnemonicCiphertext:data!"),l=rn(r,"x-ethers.mnemonicCounter:data!"),d=new Vm(u,l);o.mnemonic={path:rn(r,"x-ethers.path:string")||MQ,locale:rn(r,"x-ethers.locale:string")||"en",entropy:we(De(d.decrypt(f)))}}return o}function PQ(r){const e=rn(r,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const t=rn(r,"crypto.kdfparams.salt:data!"),n=rn(r,"crypto.kdfparams.n:int!"),i=rn(r,"crypto.kdfparams.r:int!"),s=rn(r,"crypto.kdfparams.p:int!");ee(n>0&&(n&n-1)===0,"invalid kdf.N","kdf.N",n),ee(i>0&&s>0,"invalid kdf","kdf",e);const a=rn(r,"crypto.kdfparams.dklen:int!");return ee(a===32,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:t,N:n,r:i,p:s,dkLen:64}}else if(e.toLowerCase()==="pbkdf2"){const t=rn(r,"crypto.kdfparams.salt:data!"),n=rn(r,"crypto.kdfparams.prf:string!"),i=n.split("-").pop();ee(i==="sha256"||i==="sha512","invalid kdf.pdf","kdf.pdf",n);const s=rn(r,"crypto.kdfparams.c:int!"),a=rn(r,"crypto.kdfparams.dklen:int!");return ee(a===32,"invalid kdf.dklen","kdf.dklen",a),{name:"pbkdf2",salt:t,count:s,dkLen:a,algorithm:i}}}ee(!1,"unsupported key-derivation function","kdf",e)}function IR(r,e){const t=JSON.parse(r),n=g5(e),i=PQ(t);if(i.name==="pbkdf2"){const{salt:l,count:d,dkLen:h,algorithm:y}=i,p=Yo(n,l,d,h,y);return Wx(t,p)}ye(i.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:s,N:a,r:o,p:c,dkLen:u}=i,f=Uf(n,s,a,o,c,u);return Wx(t,f)}function V$(r){return new Promise(e=>{setTimeout(()=>{e()},r)})}async function RR(r,e,t){const n=JSON.parse(r),i=g5(e),s=PQ(n);if(s.name==="pbkdf2"){t&&(t(0),await V$(0));const{salt:d,count:h,dkLen:y,algorithm:p}=s,g=Yo(i,d,h,y,p);return t&&(t(1),await V$(0)),Wx(n,g)}ye(s.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:a,N:o,r:c,p:u,dkLen:f}=s,l=await Lf(i,a,o,c,u,f,t);return Wx(n,l)}function TQ(r){const e=r.salt!=null?De(r.salt,"options.salt"):oa(32);let t=1<<17,n=8,i=1;return r.scrypt&&(r.scrypt.N&&(t=r.scrypt.N),r.scrypt.r&&(n=r.scrypt.r),r.scrypt.p&&(i=r.scrypt.p)),ee(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),ee(typeof n=="number"&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),ee(typeof i=="number"&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:e,N:t,r:n,p:i}}function CQ(r,e,t,n){const i=De(t.privateKey,"privateKey"),s=n.iv!=null?De(n.iv,"options.iv"):oa(16);ee(s.length===16,"invalid options.iv length","options.iv",n.iv);const a=n.uuid!=null?De(n.uuid,"options.uuid"):oa(16);ee(a.length===16,"invalid options.uuid length","options.uuid",n.iv);const o=r.slice(0,16),c=r.slice(16,32),u=new Vm(o,s),f=De(u.encrypt(i)),l=Kt(_t([c,f])),d={address:t.address.substring(2).toLowerCase(),id:FI(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:we(s).substring(2)},ciphertext:we(f).substring(2),kdf:"scrypt",kdfparams:{salt:we(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:l.substring(2)}};if(t.mnemonic){const h=n.client!=null?n.client:`ethers/${E4}`,y=t.mnemonic.path||MQ,p=t.mnemonic.locale||"en",g=r.slice(32,64),m=De(t.mnemonic.entropy,"account.mnemonic.entropy"),v=oa(16),b=new Vm(g,v),_=De(b.encrypt(m)),C=new Date,x="UTC--"+(C.getUTCFullYear()+"-"+tb(C.getUTCMonth()+1,2)+"-"+tb(C.getUTCDate(),2)+"T"+tb(C.getUTCHours(),2)+"-"+tb(C.getUTCMinutes(),2)+"-"+tb(C.getUTCSeconds(),2)+".0Z")+"--"+d.address;d["x-ethers"]={client:h,gethFilename:x,path:y,locale:p,mnemonicCounter:we(v).substring(2),mnemonicCiphertext:we(_).substring(2),version:"0.1"}}return JSON.stringify(d)}function X4(r,e,t){t==null&&(t={});const n=g5(e),i=TQ(t),s=Uf(n,i.salt,i.N,i.r,i.p,64);return CQ(De(s),i,r,t)}async function e9(r,e,t){t==null&&(t={});const n=g5(e),i=TQ(t),s=await Lf(n,i.salt,i.N,i.r,i.p,64,t.progressCallback);return CQ(De(s),i,r,t)}const Wb="m/44'/60'/0'/0/0",D2e=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Gc=2147483648,B2e=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$2e="0123456789abcdef";function Kx(r,e){let t="";for(;r;)t=$2e[r%16]+t,r=Math.trunc(r/16);for(;t.length<e*2;)t="0"+t;return"0x"+t}function iM(r){const e=De(r),t=Yt(ji(ji(e)),0,4),n=_t([e,t]);return M4(n)}const mc={};function IQ(r,e,t,n){const i=new Uint8Array(37);r&Gc?(ye(n!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set(De(n),1)):i.set(De(t));for(let a=24;a>=0;a-=8)i[33+(a>>3)]=r>>24-a&255;const s=De(Bf("sha512",e,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function RQ(r,e){const t=e.split("/");ee(t.length>0,"invalid path","path",e),t[0]==="m"&&(ee(r.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${r.depth}`,"path",e),t.shift());let n=r;for(let i=0;i<t.length;i++){const s=t[i];if(s.match(/^[0-9]+'$/)){const a=parseInt(s.substring(0,s.length-1));ee(a<Gc,"invalid path index",`path[${i}]`,s),n=n.deriveChild(Gc+a)}else if(s.match(/^[0-9]+$/)){const a=parseInt(s);ee(a<Gc,"invalid path index",`path[${i}]`,s),n=n.deriveChild(a)}else ee(!1,"invalid path component",`path[${i}]`,s)}return n}var L2,sM,gh,Sb;const Eo=class Eo extends qm{constructor(t,n,i,s,a,o,c,u,f){super(n,f);le(this,L2);H(this,"publicKey");H(this,"fingerprint");H(this,"parentFingerprint");H(this,"mnemonic");H(this,"chainCode");H(this,"path");H(this,"index");H(this,"depth");hu(t,mc,"HDNodeWallet"),je(this,{publicKey:n.compressedPublicKey});const l=Yt($f(ji(this.publicKey)),0,4);je(this,{parentFingerprint:i,fingerprint:l,chainCode:s,path:a,index:o,depth:c}),je(this,{mnemonic:u})}connect(t){return new Eo(mc,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}async encrypt(t,n){return await e9(ve(this,L2,sM).call(this),t,{progressCallback:n})}encryptSync(t){return X4(ve(this,L2,sM).call(this),t)}get extendedKey(){return ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),iM(_t(["0x0488ADE4",Kx(this.depth,1),this.parentFingerprint,Kx(this.index,4),this.chainCode,_t(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new cp(mc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const n=ot(t,"index");ee(n<=4294967295,"invalid index","index",n);let i=this.path;i&&(i+="/"+(n&~Gc),n&Gc&&(i+="'"));const{IR:s,IL:a}=IQ(n,this.chainCode,this.publicKey,this.privateKey),o=new ca(Go((xp(a)+BigInt(this.privateKey))%B2e,32));return new Eo(mc,o,this.fingerprint,we(s),i,n,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return RQ(this,t)}static fromExtendedKey(t){const n=yr(DI(t));ee(n.length===82||iM(n.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const i=n[4],s=we(n.slice(5,9)),a=parseInt(we(n.slice(9,13)).substring(2),16),o=we(n.slice(13,45)),c=n.slice(45,78);switch(we(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const u=we(c);return new cp(mc,Ep(u),u,s,o,null,a,i,null)}case"0x0488ade4":case"0x04358394 ":if(c[0]!==0)break;return new Eo(mc,new ca(c.slice(1)),s,o,null,a,i,null,null)}ee(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,n,i){var a;t==null&&(t=""),n==null&&(n=Wb),i==null&&(i=iu.wordlist());const s=$0.fromEntropy(oa(16),t,i);return ve(a=Eo,gh,Sb).call(a,s.computeSeed(),s).derivePath(n)}static fromMnemonic(t,n){var i;return n||(n=Wb),ve(i=Eo,gh,Sb).call(i,t.computeSeed(),t).derivePath(n)}static fromPhrase(t,n,i,s){var o;n==null&&(n=""),i==null&&(i=Wb),s==null&&(s=iu.wordlist());const a=$0.fromPhrase(t,n,s);return ve(o=Eo,gh,Sb).call(o,a.computeSeed(),a).derivePath(i)}static fromSeed(t){var n;return ve(n=Eo,gh,Sb).call(n,t,null)}};L2=new WeakSet,sM=function(){const t={address:this.address,privateKey:this.privateKey},n=this.mnemonic;return this.path&&n&&n.wordlist.locale==="en"&&n.password===""&&(t.mnemonic={path:this.path,locale:"en",entropy:n.entropy}),t},gh=new WeakSet,Sb=function(t,n){ee(h6(t),"invalid seed","seed","[REDACTED]");const i=De(t,"seed");ee(i.length>=16&&i.length<=64,"invalid seed","seed","[REDACTED]");const s=De(Bf("sha512",D2e,i)),a=new ca(we(s.slice(0,32)));return new Eo(mc,a,"0x00000000",we(s.slice(32)),"m",0,0,n,null)},le(Eo,gh);let Mh=Eo;class cp extends s2{constructor(t,n,i,s,a,o,c,u,f){super(n,f);H(this,"publicKey");H(this,"fingerprint");H(this,"parentFingerprint");H(this,"chainCode");H(this,"path");H(this,"index");H(this,"depth");hu(t,mc,"HDNodeVoidWallet"),je(this,{publicKey:i});const l=Yt($f(ji(i)),0,4);je(this,{publicKey:i,fingerprint:l,parentFingerprint:s,chainCode:a,path:o,index:c,depth:u})}connect(t){return new cp(mc,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return ye(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),iM(_t(["0x0488B21E",Kx(this.depth,1),this.parentFingerprint,Kx(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(t){const n=ot(t,"index");ee(n<=4294967295,"invalid index","index",n);let i=this.path;i&&(i+="/"+(n&~Gc),n&Gc&&(i+="'"));const{IR:s,IL:a}=IQ(n,this.chainCode,this.publicKey,null),o=ca.addPoints(a,this.publicKey,!0),c=Ep(o);return new cp(mc,c,o,this.fingerprint,we(s),i,n,this.depth+1,this.provider)}derivePath(t){return RQ(this,t)}}function NQ(r){const e=ot(r,"index");return ee(e>=0&&e<Gc,"invalid account index","index",e),`m/44'/60'/${e}'/0/0`}function OQ(r){const e=ot(r,"index");return ee(e>=0&&e<Gc,"invalid account index","index",e),`m/44'/60'/0'/0/${e}`}function Gx(r){try{if(JSON.parse(r).encseed)return!0}catch{}return!1}function Qx(r,e){const t=JSON.parse(r),n=g5(e),i=pt(rn(t,"ethaddr:string!")),s=SQ(rn(t,"encseed:string!"));ee(s&&s.length%16===0,"invalid encseed","json",r);const a=De(Yo(n,n,2e3,32,"sha256")).slice(0,16),o=s.slice(0,16),c=s.slice(16),u=new CR(a,o),f=O2e(De(u.decrypt(c)));let l="";for(let d=0;d<f.length;d++)l+=String.fromCharCode(f[d]);return{address:i,privateKey:Zo(l)}}function z$(r){return new Promise(e=>{setTimeout(()=>{e()},r)})}var U2,aM;const Cd=class Cd extends qm{constructor(e,t){typeof e=="string"&&!e.startsWith("0x")&&(e="0x"+e);let n=typeof e=="string"?new ca(e):e;super(n,t)}connect(e){return new Cd(this.signingKey,e)}async encrypt(e,t){const n={address:this.address,privateKey:this.privateKey};return await e9(n,e,{progressCallback:t})}encryptSync(e){const t={address:this.address,privateKey:this.privateKey};return X4(t,e)}static async fromEncryptedJson(e,t,n){var s;let i=null;return Hx(e)?i=await RR(e,t,n):Gx(e)&&(n&&(n(0),await z$(0)),i=Qx(e,t),n&&(n(1),await z$(0))),ve(s=Cd,U2,aM).call(s,i)}static fromEncryptedJsonSync(e,t){var i;let n=null;return Hx(e)?n=IR(e,t):Gx(e)?n=Qx(e,t):ee(!1,"invalid JSON wallet","json","[ REDACTED ]"),ve(i=Cd,U2,aM).call(i,n)}static createRandom(e){const t=Mh.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){const n=Mh.fromPhrase(e);return t?n.connect(t):n}};U2=new WeakSet,aM=function(e){if(ee(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const n=$0.fromEntropy(e.mnemonic.entropy),i=Mh.fromMnemonic(n,e.mnemonic.path);if(i.address===e.address&&i.privateKey===e.privateKey)return i;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new Cd(e.privateKey);return ee(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t},le(Cd,U2);let Zx=Cd;const L2e=")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_";function U2e(r,e){const t=(1<<r)-1,n=[];let i=0,s=0,a=0;for(let o=0;o<e.length;o++)for(i=i<<6|L2e.indexOf(e[o]),s+=6;s>=r;){const c=i>>s-r;i&=(1<<s-r)-1,s-=r,c===0?a+=t:(n.push(c+a),a=0)}return n}function F2e(r,e){let t=EQ(r).join(",");return e.split(/,/g).forEach(n=>{const i=n.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);ee(i!==null,"internal error parsing accents","accents",e);let s=0;const a=U2e(parseInt(i[3]),i[4]),o=parseInt(i[2]),c=new RegExp(`([${i[1]}])`,"g");t=t.replace(c,(u,f)=>(--a[s]===0&&(f=String.fromCharCode(f.charCodeAt(0),o),s++),f))}),t.split(",")}var F2;class kQ extends Y4{constructor(t,n,i,s){super(t,n,s);le(this,F2);Q(this,F2,i)}get _accent(){return F(this,F2)}_decodeWords(){return F2e(this._data,this._accent)}}F2=new WeakMap;const DQ={en:iu.wordlist()},j2e=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:B0,AbstractProvider:$m,AbstractSigner:E6,AlchemyProvider:Um,AnkrProvider:Lm,BaseContract:ap,BaseWallet:qm,Block:fR,BlockscoutProvider:a2,BrowserProvider:Vx,ChainstackProvider:Fm,CloudflareProvider:vR,ConstructorFragment:qo,Contract:hf,ContractEventPayload:dR,ContractFactory:y5,ContractTransactionReceipt:lR,ContractTransactionResponse:p5,ContractUnknownEventPayload:K4,EnsPlugin:w6,EnsResolver:km,ErrorDescription:uR,ErrorFragment:Oi,EtherSymbol:iG,EtherscanPlugin:Z4,EtherscanProvider:xR,EventFragment:qa,EventLog:h5,EventPayload:P4,FallbackFragment:Bo,FallbackProvider:MR,FeeData:Ux,FeeDataNetworkPlugin:jx,FetchCancelSignal:UI,FetchRequest:En,FetchResponse:Kc,FetchUrlFeeDataNetworkPlugin:mR,FixedNumber:Mm,Fragment:Rf,FunctionFragment:Va,GasCostPlugin:x6,HDNodeVoidWallet:cp,HDNodeWallet:Mh,Indexed:Lx,InfuraProvider:op,InfuraWebSocketProvider:SR,Interface:rp,IpcSocketProvider:wQ,JsonRpcApiProvider:Q4,JsonRpcProvider:os,JsonRpcSigner:Hb,LangEn:iu,Log:_p,LogDescription:oR,MaxInt256:nG,MaxUint256:tG,MessagePrefix:XI,MinInt256:rG,Mnemonic:$0,MulticoinProviderPlugin:yR,N:XK,NamedFragment:v6,Network:Ur,NetworkPlugin:Ff,NonceManager:qx,ParamType:xn,PocketProvider:o2,QuickNodeProvider:jm,Result:k0,Signature:Bi,SigningKey:ca,SocketBlockSubscriber:wR,SocketEventSubscriber:AR,SocketPendingSubscriber:ER,SocketProvider:_R,SocketSubscriber:b5,StructFragment:df,Transaction:D0,TransactionDescription:cR,TransactionReceipt:H4,TransactionResponse:ip,Typed:Fn,TypedDataEncoder:Cf,UndecodedEventLog:W4,UnmanagedSubscriber:Bm,Utf8ErrorFuncs:LI,VoidSigner:s2,Wallet:Zx,WebSocketProvider:J4,WeiPerEther:eG,Wordlist:PR,WordlistOwl:Y4,WordlistOwlA:kQ,ZeroAddress:ep,ZeroHash:Nx,accessListify:pu,assert:ye,assertArgument:ee,assertArgumentCount:A4,assertNormalize:_4,assertPrivate:hu,authorizationify:B4,checkResultErrors:JW,computeAddress:Ep,computeHmac:Bf,concat:_t,copyRequest:np,dataLength:ff,dataSlice:Yt,decodeBase58:DI,decodeBase64:BI,decodeBytes32String:XG,decodeRlp:wp,decryptCrowdsaleJson:Qx,decryptKeystoreJson:RR,decryptKeystoreJsonSync:IR,defaultPath:Wb,defineProperties:je,dnsEncode:aR,encodeBase58:M4,encodeBase64:$I,encodeBytes32String:YG,encodeRlp:Qo,encryptKeystoreJson:e9,encryptKeystoreJsonSync:X4,ensNormalize:sR,formatEther:GW,formatUnits:T4,fromTwos:Sm,getAccountPath:NQ,getAddress:pt,getBigInt:He,getBytes:De,getBytesCopy:gn,getCreate2Address:cG,getCreateAddress:k4,getDefaultProvider:xQ,getIcapAddress:oG,getIndexedAccountPath:OQ,getNumber:ot,getUint:p6,hashAuthorization:F4,hashMessage:q4,hexlify:we,id:Zo,isAddress:uG,isAddressable:D4,isBytesLike:h6,isCallException:u5,isCrowdsaleJson:Gx,isError:Zr,isHexString:Gt,isKeystoreJson:Hx,isValidName:kG,keccak256:Kt,lock:sG,makeError:Jt,mask:af,namehash:r2,parseEther:QW,parseUnits:C4,pbkdf2:Yo,randomBytes:oa,recoverAddress:b6,resolveAddress:ln,resolveProperties:yn,ripemd160:$f,scrypt:Lf,scryptSync:Uf,sha256:ji,sha512:m6,showThrottleMessage:jf,solidityPacked:V4,solidityPackedKeccak256:$G,solidityPackedSha256:LG,stripZerosLeft:BW,toBeArray:yr,toBeHex:Go,toBigInt:xp,toNumber:kI,toQuantity:Es,toTwos:l5,toUtf8Bytes:on,toUtf8CodePoints:FW,toUtf8String:Tf,uuidV4:FI,verifyAuthorization:hG,verifyMessage:DG,verifyTypedData:VG,version:E4,wordlists:DQ,zeroPadBytes:f5,zeroPadValue:Rs},Symbol.toStringTag,{value:"Module"})),q2e=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:B0,AbstractProvider:$m,AbstractSigner:E6,AlchemyProvider:Um,AnkrProvider:Lm,BaseContract:ap,BaseWallet:qm,Block:fR,BlockscoutProvider:a2,BrowserProvider:Vx,ChainstackProvider:Fm,CloudflareProvider:vR,ConstructorFragment:qo,Contract:hf,ContractEventPayload:dR,ContractFactory:y5,ContractTransactionReceipt:lR,ContractTransactionResponse:p5,ContractUnknownEventPayload:K4,EnsPlugin:w6,EnsResolver:km,ErrorDescription:uR,ErrorFragment:Oi,EtherSymbol:iG,EtherscanPlugin:Z4,EtherscanProvider:xR,EventFragment:qa,EventLog:h5,EventPayload:P4,FallbackFragment:Bo,FallbackProvider:MR,FeeData:Ux,FeeDataNetworkPlugin:jx,FetchCancelSignal:UI,FetchRequest:En,FetchResponse:Kc,FetchUrlFeeDataNetworkPlugin:mR,FixedNumber:Mm,Fragment:Rf,FunctionFragment:Va,GasCostPlugin:x6,HDNodeVoidWallet:cp,HDNodeWallet:Mh,Indexed:Lx,InfuraProvider:op,InfuraWebSocketProvider:SR,Interface:rp,IpcSocketProvider:wQ,JsonRpcApiProvider:Q4,JsonRpcProvider:os,JsonRpcSigner:Hb,LangEn:iu,Log:_p,LogDescription:oR,MaxInt256:nG,MaxUint256:tG,MessagePrefix:XI,MinInt256:rG,Mnemonic:$0,MulticoinProviderPlugin:yR,N:XK,NamedFragment:v6,Network:Ur,NetworkPlugin:Ff,NonceManager:qx,ParamType:xn,PocketProvider:o2,QuickNodeProvider:jm,Result:k0,Signature:Bi,SigningKey:ca,SocketBlockSubscriber:wR,SocketEventSubscriber:AR,SocketPendingSubscriber:ER,SocketProvider:_R,SocketSubscriber:b5,StructFragment:df,Transaction:D0,TransactionDescription:cR,TransactionReceipt:H4,TransactionResponse:ip,Typed:Fn,TypedDataEncoder:Cf,UndecodedEventLog:W4,UnmanagedSubscriber:Bm,Utf8ErrorFuncs:LI,VoidSigner:s2,Wallet:Zx,WebSocketProvider:J4,WeiPerEther:eG,Wordlist:PR,WordlistOwl:Y4,WordlistOwlA:kQ,ZeroAddress:ep,ZeroHash:Nx,accessListify:pu,assert:ye,assertArgument:ee,assertArgumentCount:A4,assertNormalize:_4,assertPrivate:hu,authorizationify:B4,checkResultErrors:JW,computeAddress:Ep,computeHmac:Bf,concat:_t,copyRequest:np,dataLength:ff,dataSlice:Yt,decodeBase58:DI,decodeBase64:BI,decodeBytes32String:XG,decodeRlp:wp,decryptCrowdsaleJson:Qx,decryptKeystoreJson:RR,decryptKeystoreJsonSync:IR,defaultPath:Wb,defineProperties:je,dnsEncode:aR,encodeBase58:M4,encodeBase64:$I,encodeBytes32String:YG,encodeRlp:Qo,encryptKeystoreJson:e9,encryptKeystoreJsonSync:X4,ensNormalize:sR,ethers:j2e,formatEther:GW,formatUnits:T4,fromTwos:Sm,getAccountPath:NQ,getAddress:pt,getBigInt:He,getBytes:De,getBytesCopy:gn,getCreate2Address:cG,getCreateAddress:k4,getDefaultProvider:xQ,getIcapAddress:oG,getIndexedAccountPath:OQ,getNumber:ot,getUint:p6,hashAuthorization:F4,hashMessage:q4,hexlify:we,id:Zo,isAddress:uG,isAddressable:D4,isBytesLike:h6,isCallException:u5,isCrowdsaleJson:Gx,isError:Zr,isHexString:Gt,isKeystoreJson:Hx,isValidName:kG,keccak256:Kt,lock:sG,makeError:Jt,mask:af,namehash:r2,parseEther:QW,parseUnits:C4,pbkdf2:Yo,randomBytes:oa,recoverAddress:b6,resolveAddress:ln,resolveProperties:yn,ripemd160:$f,scrypt:Lf,scryptSync:Uf,sha256:ji,sha512:m6,showThrottleMessage:jf,solidityPacked:V4,solidityPackedKeccak256:$G,solidityPackedSha256:LG,stripZerosLeft:BW,toBeArray:yr,toBeHex:Go,toBigInt:xp,toNumber:kI,toQuantity:Es,toTwos:l5,toUtf8Bytes:on,toUtf8CodePoints:FW,toUtf8String:Tf,uuidV4:FI,verifyAuthorization:hG,verifyMessage:DG,verifyTypedData:VG,version:E4,wordlists:DQ,zeroPadBytes:f5,zeroPadValue:Rs},Symbol.toStringTag,{value:"Module"}));function V2e(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var o=r.length,c=r.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,g=0,m=0,v=y.length;m!==v&&y[m]===0;)m++,p++;for(var b=(v-m)*f+1>>>0,_=new Uint8Array(b);m!==v;){for(var C=y[m],N=0,x=b-1;(C!==0||N<g)&&x!==-1;x--,N++)C+=256*_[x]>>>0,_[x]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=N,m++}for(var I=b-g;I!==b&&_[I]===0;)I++;for(var $=c.repeat(p);I<b;++I)$+=r.charAt(_[I]);return $}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var g=0,m=0;y[p]===c;)g++,p++;for(var v=(y.length-p)*u+1>>>0,b=new Uint8Array(v);y[p];){var _=t[y.charCodeAt(p)];if(_===255)return;for(var C=0,N=v-1;(_!==0||C<m)&&N!==-1;N--,C++)_+=o*b[N]>>>0,b[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");m=C,p++}if(y[p]!==" "){for(var x=v-m;x!==v&&b[x]===0;)x++;for(var I=new Uint8Array(g+(v-x)),$=g;x!==v;)I[$++]=b[x++];return I}}}function h(y){var p=d(y);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:h}}var z2e=V2e,H2e=z2e;const W2e=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},K2e=r=>new TextEncoder().encode(r),G2e=r=>new TextDecoder().decode(r);let Q2e=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Z2e=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return BQ(this,e)}},J2e=class{constructor(e){this.decoders=e}or(e){return BQ(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const BQ=(r,e)=>new J2e({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let Y2e=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Q2e(e,t,n),this.decoder=new Z2e(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const t9=({name:r,prefix:e,encode:t,decode:n})=>new Y2e(r,e,t,n),v5=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=H2e(t,e);return t9({prefix:r,name:e,encode:n,decode:s=>W2e(i(s))})},X2e=(r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=r.length;for(;r[s-1]==="=";)--s;const a=new Uint8Array(s*t/8|0);let o=0,c=0,u=0;for(let f=0;f<s;++f){const l=i[r[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|l,o+=t,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=t||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},e5e=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s},bi=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>t9({prefix:e,name:r,encode(i){return e5e(i,n,t)},decode(i){return X2e(i,n,t,r)}});v5({prefix:"9",name:"base10",alphabet:"0123456789"});bi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});bi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});bi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});const $Q=Array.from(""),t5e=$Q.reduce((r,e,t)=>(r[t]=e,r),[]),r5e=$Q.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function n5e(r){return r.reduce((e,t)=>(e+=t5e[t],e),"")}function i5e(r){const e=[];for(const t of r){const n=r5e[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}t9({prefix:"",name:"base256emoji",encode:n5e,decode:i5e});bi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});bi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});bi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});bi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});bi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});bi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});bi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});bi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});bi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});v5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});v5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});v5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});v5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});bi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});bi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});bi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});bi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});bi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t9({prefix:"\0",name:"identity",encode:r=>G2e(r),decode:r=>K2e(r)});new TextEncoder;new TextDecoder;Mt("veramo:utils");function s5e(r){const e=qD.CURVE.Fp,{y:t}=qD.ExtendedPoint.fromHex(r),n=BigInt(1);return e.toBytes(e.create((n+t)*e.inv(n-t)))}function a5e(r,e){if(e){if(e!=="sig"&&e!=="enc")throw new Error("illegal_argument: Key use must be sig or enc");if(e==="sig"&&r==="X25519")throw new Error("illegal_argument: X25519 keys cannot be used for signing");if(e==="enc"&&r==="Ed25519")throw new Error("illegal_argument: Ed25519 keys cannot be used for encryption");return e}switch(r){case"Secp256k1":case"Secp256r1":case"Ed25519":return"sig";case"X25519":return"enc";default:throw new Error("illegal_argument: Unknown key type")}}function Jx(r,e,t){try{const n=a5e(r,t);switch(r){case _1.Secp256k1:{const i=kH.ProjectivePoint.fromHex(e).toAffine();return{alg:"ES256K",crv:"secp256k1",kty:"EC",...n&&{use:n},x:vl(bd(i.x.toString(16))),y:vl(bd(i.y.toString(16)))}}case _1.Secp256r1:{const i=LH.ProjectivePoint.fromHex(e).toAffine();return{alg:"ES256",crv:"P-256",kty:"EC",...n&&{use:n},x:vl(bd(i.x.toString(16))),y:vl(bd(i.y.toString(16)))}}case _1.Ed25519:return{alg:"EdDSA",crv:"Ed25519",kty:"OKP",...n&&{use:n},x:vl(typeof e=="string"?bd(e):e)};case _1.X25519:return{alg:"ECDH-ES",crv:"X25519",kty:"OKP",...n&&{use:n},x:vl(typeof e=="string"?bd(e):e)};default:throw new Error(`not_supported: Failed to create JWK using ${r}`)}}catch(n){throw n}}Mt("veramo:did-key:identifier-provider");var H$;(function(r){r[r.JsonWebKey2020=0]="JsonWebKey2020",r[r.Multikey=1]="Multikey",r[r.EcdsaSecp256k1VerificationKey2019=2]="EcdsaSecp256k1VerificationKey2019",r[r.EcdsaSecp256k1VerificationKey2020=3]="EcdsaSecp256k1VerificationKey2020",r[r.Ed25519VerificationKey2020=4]="Ed25519VerificationKey2020",r[r.Ed25519VerificationKey2018=5]="Ed25519VerificationKey2018",r[r.X25519KeyAgreementKey2020=6]="X25519KeyAgreementKey2020",r[r.X25519KeyAgreementKey2019=7]="X25519KeyAgreementKey2019",r[r.EcdsaSecp256r1VerificationKey2019=8]="EcdsaSecp256r1VerificationKey2019"})(H$||(H$={}));const Kb={JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",Multikey:"https://w3id.org/security/multikey/v1",EcdsaSecp256k1VerificationKey2020:"https://w3id.org/security/suites/secp256k1-2020/v1",EcdsaSecp256k1VerificationKey2019:"https://w3id.org/security/suites/secp256k1-2019/v1",Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",Ed25519VerificationKey2018:"https://w3id.org/security/suites/ed25519-2018/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1",X25519KeyAgreementKey2019:"https://w3id.org/security/suites/x25519-2019/v1",EcdsaSecp256r1VerificationKey2019:{EcdsaSecp256r1VerificationKey2019:"https://w3id.org/security#EcdsaSecp256r1VerificationKey2019",publicKeyJwk:{"@id":"https://w3id.org/security#publicKeyJwk","@type":"@json"}}};function EE(r,e){const t=(e==null?void 0:e.publicKeyFormat)??"JsonWebKey2020",n=r.substring(8),{keyBytes:i,keyType:s}=mI(n);if(!s)throw new Error(`invalidDid: the key type cannot be deduced for ${r}`);const a=s==="P-256"?"Secp256r1":s;let o={id:`${r}#${n}`,type:t,controller:r};switch(t){case"JsonWebKey2020":case"EcdsaSecp256r1VerificationKey2019":o.publicKeyJwk=Jx(a,i,"sig");break;case"Multikey":case"EcdsaSecp256k1VerificationKey2019":case"EcdsaSecp256k1VerificationKey2020":o.publicKeyMultibase=n;break;default:throw new Error(`invalidPublicKeyType: Unsupported public key format ${t}`)}let c={};const u=e.accept??"application/did+ld+json";if(e.accept==="application/did+json")c={};else if(u==="application/did+ld+json")c={"@context":["https://www.w3.org/ns/did/v1",Kb[t]]};else throw new Error(`unsupportedFormat: The DID resolver does not support the requested 'accept' format: ${e.accept}`);return{didResolutionMetadata:{},didDocumentMetadata:{contentType:e.accept??"application/did+ld+json"},didDocument:{...c,id:r,verificationMethod:[o],authentication:[o.id],assertionMethod:[o.id],capabilityDelegation:[o.id],capabilityInvocation:[o.id]}}}function o5e(r,e){var h,y;const t=(e==null?void 0:e.publicKeyFormat)??"JsonWebKey2020",n=r.substring(8),{keyBytes:i,keyType:s}=mI(n);if(!s||s!=="Ed25519")throw new Error(`invalidDid: the key type cannot be deduced for ${r}`);let a={id:`${r}#${n}`,type:t,controller:r},o=t;switch(t){case"JsonWebKey2020":a.publicKeyJwk=Jx(s,i,"sig");break;case"Multikey":a.publicKeyMultibase=n;break;case"Ed25519VerificationKey2020":o="X25519KeyAgreementKey2020",a.publicKeyMultibase=n;break;case"Ed25519VerificationKey2018":o="X25519KeyAgreementKey2019",a.publicKeyBase58=X_(i);break;default:throw new Error(`invalidPublicKeyType: Unsupported public key format ${t}`)}const c=["https://www.w3.org/ns/did/v1",Kb[t]],u={didResolutionMetadata:{},didDocumentMetadata:{contentType:e.accept??"application/did+ld+json"},didDocument:{id:r,verificationMethod:[a],authentication:[a.id],assertionMethod:[a.id],capabilityDelegation:[a.id],capabilityInvocation:[a.id]}};if(e.enableEncryptionKeyDerivation??!0){const p=s5e(i),g=Hfe(p,"base58btc","x25519-pub"),m={id:`${r}#${g}`,type:o,controller:r};o==="JsonWebKey2020"?m.publicKeyJwk=Jx("X25519",p,"enc"):o==="X25519KeyAgreementKey2019"?(c.push(Kb[o]),m.publicKeyBase58=X_(p)):(o==="X25519KeyAgreementKey2020"&&c.push(Kb[o]),m.publicKeyMultibase=g),(y=(h=u.didDocument)==null?void 0:h.verificationMethod)==null||y.push(m),u.didDocument.keyAgreement=[m.id]}let l={};const d=e.accept??"application/did+ld+json";if(e.accept==="application/did+json")l={};else if(d==="application/did+ld+json")l={"@context":c};else throw new Error(`unsupportedFormat: The DID resolver does not support the requested 'accept' format: ${e.accept}`);return u.didDocument={...u.didDocument,...l},u}function c5e(r,e){const t=(e==null?void 0:e.publicKeyFormat)??"JsonWebKey2020",n=r.substring(8),{keyBytes:i,keyType:s}=mI(n);if(!s||s!=="X25519")throw new Error(`invalidDid: the key type cannot be deduced for ${r}`);let a={id:`${r}#${n}`,type:t,controller:r};switch(t){case"JsonWebKey2020":a.publicKeyJwk=Jx(s,i,"enc");break;case"Multikey":case"X25519KeyAgreementKey2020":a.publicKeyMultibase=n;break;case"X25519KeyAgreementKey2019":a.publicKeyBase58=X_(i);break;default:throw new Error(`invalidPublicKeyType: Unsupported public key format ${t}`)}const o=["https://www.w3.org/ns/did/v1",Kb[t]],c={didResolutionMetadata:{},didDocumentMetadata:{contentType:e.accept??"application/did+ld+json"},didDocument:{id:r,verificationMethod:[a],keyAgreement:[a.id]}};let u={};const f=e.accept??"application/did+ld+json";if(e.accept==="application/did+json")u={};else if(f==="application/did+ld+json")u={"@context":o};else throw new Error(`unsupportedFormat: The DID resolver does not support the requested 'accept' format: ${e.accept}`);return c.didDocument={...c.didDocument,...u},c}const W$={"did:key:z6Mk":o5e,"did:key:z6LS":c5e,"did:key:zQ3s":EE,"did:key:z7r8":EE,"did:key:zDn":EE},u5e=async(r,e,t,n)=>{try{const i=Object.keys(W$).filter(s=>r.startsWith(s)).shift();if(i){const s=await W$[i](r,n);return{didDocumentMetadata:{},didResolutionMetadata:{},...s}}else return{didDocumentMetadata:{},didResolutionMetadata:{error:"invalidDid",message:"unsupported key type for did:key"},didDocument:null}}catch(i){return{didDocumentMetadata:{},didResolutionMetadata:{error:"invalidDid",message:i.toString()},didDocument:null}}};function f5e(){return{key:u5e}}var NR={},r9={};Object.defineProperty(r9,"__esModule",{value:!0});function l5e(r){return String.fromCharCode(parseInt(r.slice(1),16))}function d5e(r){return btoa(encodeURIComponent(r).replace(/%[0-9A-F]{2}/g,l5e))}r9.encode=d5e;function h5e(r){return`%${`00${r.charCodeAt(0).toString(16)}`.slice(-2)}`}function p5e(r){return decodeURIComponent(Array.from(atob(r),h5e).join(""))}r9.decode=p5e;Object.defineProperty(NR,"__esModule",{value:!0});const LQ=r9;function y5e(r){return LQ.decode(r.replace(/\-/g,"+").replace(/_/g,"/"))}var m5e=NR.decode=y5e;function b5e(r){return LQ.encode(r).replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}var g5e=NR.encode=b5e;const su=Object.create(null);su.open="0";su.close="1";su.ping="2";su.pong="3";su.message="4";su.upgrade="5";su.noop="6";const f3=Object.create(null);Object.keys(su).forEach(r=>{f3[su[r]]=r});const oM={type:"error",data:"parser error"},UQ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",FQ=typeof ArrayBuffer=="function",jQ=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,OR=({type:r,data:e},t,n)=>UQ&&e instanceof Blob?t?n(e):K$(e,n):FQ&&(e instanceof ArrayBuffer||jQ(e))?t?n(e):K$(new Blob([e]),n):n(su[r]+(e||"")),K$=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)};function G$(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let AE;function v5e(r,e){if(UQ&&r.data instanceof Blob)return r.data.arrayBuffer().then(G$).then(e);if(FQ&&(r.data instanceof ArrayBuffer||jQ(r.data)))return e(G$(r.data));OR(r,!1,t=>{AE||(AE=new TextEncoder),e(AE.encode(t))})}const Q$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mb=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Q$.length;r++)Mb[Q$.charCodeAt(r)]=r;const x5e=r=>{let e=r.length*.75,t=r.length,n,i=0,s,a,o,c;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const u=new ArrayBuffer(e),f=new Uint8Array(u);for(n=0;n<t;n+=4)s=Mb[r.charCodeAt(n)],a=Mb[r.charCodeAt(n+1)],o=Mb[r.charCodeAt(n+2)],c=Mb[r.charCodeAt(n+3)],f[i++]=s<<2|a>>4,f[i++]=(a&15)<<4|o>>2,f[i++]=(o&3)<<6|c&63;return u},w5e=typeof ArrayBuffer=="function",kR=(r,e)=>{if(typeof r!="string")return{type:"message",data:qQ(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:E5e(r.substring(1),e)}:f3[t]?r.length>1?{type:f3[t],data:r.substring(1)}:{type:f3[t]}:oM},E5e=(r,e)=>{if(w5e){const t=x5e(r);return qQ(t,e)}else return{base64:!0,data:r}},qQ=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},VQ="",A5e=(r,e)=>{const t=r.length,n=new Array(t);let i=0;r.forEach((s,a)=>{OR(s,!1,o=>{n[a]=o,++i===t&&e(n.join(VQ))})})},_5e=(r,e)=>{const t=r.split(VQ),n=[];for(let i=0;i<t.length;i++){const s=kR(t[i],e);if(n.push(s),s.type==="error")break}return n};function S5e(){return new TransformStream({transform(r,e){v5e(r,t=>{const n=t.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let _E;function nv(r){return r.reduce((e,t)=>e+t.length,0)}function iv(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)t[i]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),t}function M5e(r,e){_E||(_E=new TextDecoder);const t=[];let n=0,i=-1,s=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(n===0){if(nv(t)<1)break;const c=iv(t,1);s=(c[0]&128)===128,i=c[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(nv(t)<2)break;const c=iv(t,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(nv(t)<8)break;const c=iv(t,8),u=new DataView(c.buffer,c.byteOffset,c.length),f=u.getUint32(0);if(f>Math.pow(2,21)-1){o.enqueue(oM);break}i=f*Math.pow(2,32)+u.getUint32(4),n=3}else{if(nv(t)<i)break;const c=iv(t,i);o.enqueue(kR(s?c:_E.decode(c),e)),n=0}if(i===0||i>r){o.enqueue(oM);break}}}})}const zQ=4;function dn(r){if(r)return P5e(r)}function P5e(r){for(var e in dn.prototype)r[e]=dn.prototype[e];return r}dn.prototype.on=dn.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};dn.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};dn.prototype.off=dn.prototype.removeListener=dn.prototype.removeAllListeners=dn.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,i=0;i<t.length;i++)if(n=t[i],n===e||n.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+r],this};dn.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,i=t.length;n<i;++n)t[n].apply(this,e)}return this};dn.prototype.emitReserved=dn.prototype.emit;dn.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};dn.prototype.hasListeners=function(r){return!!this.listeners(r).length};const n9=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Ua=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),T5e="arraybuffer";function HQ(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const C5e=Ua.setTimeout,I5e=Ua.clearTimeout;function i9(r,e){e.useNativeTimers?(r.setTimeoutFn=C5e.bind(Ua),r.clearTimeoutFn=I5e.bind(Ua)):(r.setTimeoutFn=Ua.setTimeout.bind(Ua),r.clearTimeoutFn=Ua.clearTimeout.bind(Ua))}const R5e=1.33;function N5e(r){return typeof r=="string"?O5e(r):Math.ceil((r.byteLength||r.size)*R5e)}function O5e(r){let e=0,t=0;for(let n=0,i=r.length;n<i;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function WQ(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function k5e(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function D5e(r){let e={},t=r.split("&");for(let n=0,i=t.length;n<i;n++){let s=t[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class B5e extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class DR extends dn{constructor(e){super(),this.writable=!1,i9(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new B5e(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=kR(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=k5e(e);return t.length?"?"+t:""}}class $5e extends DR{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};_5e(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,A5e(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=WQ()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let KQ=!1;try{KQ=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const L5e=KQ;function U5e(){}class F5e extends $5e{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class Qc extends dn{constructor(e,t,n){super(),this.createRequest=e,i9(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=HQ(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Qc.requestsCount++,Qc.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=U5e,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Qc.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Qc.requestsCount=0;Qc.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Z$);else if(typeof addEventListener=="function"){const r="onpagehide"in Ua?"pagehide":"unload";addEventListener(r,Z$,!1)}}function Z$(){for(let r in Qc.requests)Qc.requests.hasOwnProperty(r)&&Qc.requests[r].abort()}const j5e=function(){const r=GQ({xdomain:!1});return r&&r.responseType!==null}();class q5e extends F5e{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=j5e&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Qc(GQ,this.uri(),e)}}function GQ(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||L5e))return new XMLHttpRequest}catch{}if(!e)try{return new Ua[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const QQ=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class V5e extends DR{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=QQ?{}:HQ(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;OR(n,this.supportsBinary,s=>{try{this.doWrite(n,s)}catch{}i&&n9(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=WQ()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const SE=Ua.WebSocket||Ua.MozWebSocket;class z5e extends V5e{createSocket(e,t,n){return QQ?new SE(e,t,n):t?new SE(e,t):new SE(e)}doWrite(e,t){this.ws.send(t)}}class H5e extends DR{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=M5e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=S5e();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{n.read().then(({done:o,value:c})=>{o||(this.onPacket(c),s())}).catch(o=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then(()=>{i&&n9(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const W5e={websocket:z5e,webtransport:H5e,polling:q5e},K5e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,G5e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function cM(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let i=K5e.exec(r||""),s={},a=14;for(;a--;)s[G5e[a]]=i[a]||"";return t!=-1&&n!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Q5e(s,s.path),s.queryKey=Z5e(s,s.query),s}function Q5e(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Z5e(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,s){i&&(t[i]=s)}),t}const uM=typeof addEventListener=="function"&&typeof removeEventListener=="function",l3=[];uM&&addEventListener("offline",()=>{l3.forEach(r=>r())},!1);class w0 extends dn{constructor(e,t){if(super(),this.binaryType=T5e,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=cM(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=cM(t.host).host);i9(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=D5e(this.opts.query)),uM&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},l3.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=zQ,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&w0.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",w0.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(t+=N5e(i)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,n9(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if(typeof t=="function"&&(i=t,t=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(w0.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),uM&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=l3.indexOf(this._offlineEventListener);n!==-1&&l3.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}w0.protocol=zQ;class J5e extends w0{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;w0.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",l=>{if(!n)if(l.type==="pong"&&l.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;w0.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function s(){n||(n=!0,f(),t.close(),t=null)}const a=l=>{const d=new Error("probe error: "+l);d.transport=t.name,s(),this.emitReserved("upgradeError",d)};function o(){a("transport closed")}function c(){a("socket closed")}function u(l){t&&l.name!==t.name&&s()}const f=()=>{t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",o),this.off("close",c),this.off("upgrading",u)};t.once("open",i),t.once("error",a),t.once("close",o),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let Y5e=class extends J5e{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>W5e[i]).filter(i=>!!i)),super(e,n)}};function X5e(r,e="",t){let n=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),n=cM(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+e,n.href=n.protocol+"://"+s+(t&&t.port===n.port?"":":"+n.port),n}const e8e=typeof ArrayBuffer=="function",t8e=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,ZQ=Object.prototype.toString,r8e=typeof Blob=="function"||typeof Blob<"u"&&ZQ.call(Blob)==="[object BlobConstructor]",n8e=typeof File=="function"||typeof File<"u"&&ZQ.call(File)==="[object FileConstructor]";function BR(r){return e8e&&(r instanceof ArrayBuffer||t8e(r))||r8e&&r instanceof Blob||n8e&&r instanceof File}function d3(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(d3(r[t]))return!0;return!1}if(BR(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return d3(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&d3(r[t]))return!0;return!1}function i8e(r){const e=[],t=r.data,n=r;return n.data=fM(t,e),n.attachments=e.length,{packet:n,buffers:e}}function fM(r,e){if(!r)return r;if(BR(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=fM(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=fM(r[n],e));return t}return r}function s8e(r,e){return r.data=lM(r.data,e),delete r.attachments,r}function lM(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=lM(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=lM(r[t],e));return r}const a8e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],o8e=5;var Tt;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Tt||(Tt={}));let c8e=class{constructor(e){this.replacer=e}encode(e){return(e.type===Tt.EVENT||e.type===Tt.ACK)&&d3(e)?this.encodeAsBinary({type:e.type===Tt.EVENT?Tt.BINARY_EVENT:Tt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Tt.BINARY_EVENT||e.type===Tt.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=i8e(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}};function J$(r){return Object.prototype.toString.call(r)==="[object Object]"}let u8e=class JQ extends dn{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Tt.BINARY_EVENT;n||t.type===Tt.BINARY_ACK?(t.type=n?Tt.EVENT:Tt.ACK,this.reconstructor=new f8e(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(BR(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(Tt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Tt.BINARY_EVENT||n.type===Tt.BINARY_ACK){const s=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(s,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(e.charAt(t+1)==="/"){const s=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(s,t)}else n.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const s=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}n.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(JQ.isPayloadValid(n.type,s))n.data=s;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Tt.CONNECT:return J$(t);case Tt.DISCONNECT:return t===void 0;case Tt.CONNECT_ERROR:return typeof t=="string"||J$(t);case Tt.EVENT:case Tt.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&a8e.indexOf(t[0])===-1);case Tt.ACK:case Tt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class f8e{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=s8e(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const l8e=Object.freeze(Object.defineProperty({__proto__:null,Decoder:u8e,Encoder:c8e,get PacketType(){return Tt},protocol:o8e},Symbol.toStringTag,{value:"Module"}));function Oo(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const d8e=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class YQ extends dn{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Oo(e,"open",this.onopen.bind(this)),Oo(e,"packet",this.onpacket.bind(this)),Oo(e,"error",this.onerror.bind(this)),Oo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,i,s;if(d8e.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:Tt.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,l=t.pop();this._registerAckCallback(f,l),a.id=f}const o=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},i),a=(...o)=>{this.io.clearTimeoutFn(s),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((n,i)=>{const s=(a,o)=>a?i(a):n(o);s.withError=!0,t.push(s),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...s)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Tt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Tt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Tt.EVENT:case Tt.BINARY_EVENT:this.onevent(e);break;case Tt.ACK:case Tt.BINARY_ACK:this.onack(e);break;case Tt.DISCONNECT:this.ondisconnect();break;case Tt.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...i){n||(n=!0,t.packet({type:Tt.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Tt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function A6(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}A6.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=Math.floor(e*10)&1?r+t:r-t}return Math.min(r,this.max)|0};A6.prototype.reset=function(){this.attempts=0};A6.prototype.setMin=function(r){this.ms=r};A6.prototype.setMax=function(r){this.max=r};A6.prototype.setJitter=function(r){this.jitter=r};class dM extends dn{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,i9(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new A6({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||l8e;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Y5e(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Oo(t,"open",function(){n.onopen(),e&&e()}),s=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=Oo(t,"error",s);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),t.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Oo(e,"ping",this.onping.bind(this)),Oo(e,"data",this.ondata.bind(this)),Oo(e,"error",this.onerror.bind(this)),Oo(e,"close",this.onclose.bind(this)),Oo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){n9(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new YQ(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const rb={};function h3(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=X5e(r,e.path||"/socket.io"),n=t.source,i=t.id,s=t.path,a=rb[i]&&s in rb[i].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new dM(n,e):(rb[i]||(rb[i]=new dM(n,e)),c=rb[i]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(h3,{Manager:dM,Socket:YQ,io:h3,connect:h3});/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Y$;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof Ht=="object"?Ht:typeof self=="object"?self:typeof this=="object"?this:o(),n=i(r);typeof t.Reflect<"u"&&(n=i(t.Reflect,n)),e(n,t),typeof t.Reflect>"u"&&(t.Reflect=r);function i(c,u){return function(f,l){Object.defineProperty(c,f,{configurable:!0,writable:!0,value:l}),u&&u(f,l)}}function s(){try{return Function("return this;")()}catch{}}function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}function o(){return s()||a()}})(function(e,t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",s=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",c={__proto__:[]}instanceof Array,u=!o&&!c,f={create:o?function(){return W(Object.create(null))}:c?function(){return W({__proto__:null})}:function(){return W({})},has:u?function(z,G){return n.call(z,G)}:function(z,G){return G in z},get:u?function(z,G){return n.call(z,G)?z[G]:void 0}:function(z,G){return z[G]}},l=Object.getPrototypeOf(Function),d=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:V(),h=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:R(),y=typeof WeakMap=="function"?WeakMap:B(),p=i?Symbol.for("@reflect-metadata:registry"):void 0,g=Te(),m=_e(g);function v(z,G,Z,de){if(K(Z)){if(!xe(z))throw new TypeError;if(!me(G))throw new TypeError;return E(z,G)}else{if(!xe(z))throw new TypeError;if(!ne(G))throw new TypeError;if(!ne(de)&&!K(de)&&!Y(de))throw new TypeError;return Y(de)&&(de=void 0),Z=ce(Z),S(z,G,Z,de)}}e("decorate",v);function b(z,G){function Z(de,Pe){if(!ne(de))throw new TypeError;if(!K(Pe)&&!Le(Pe))throw new TypeError;D(z,G,de,Pe)}return Z}e("metadata",b);function _(z,G,Z,de){if(!ne(Z))throw new TypeError;return K(de)||(de=ce(de)),D(z,G,Z,de)}e("defineMetadata",_);function C(z,G,Z){if(!ne(G))throw new TypeError;return K(Z)||(Z=ce(Z)),A(z,G,Z)}e("hasMetadata",C);function N(z,G,Z){if(!ne(G))throw new TypeError;return K(Z)||(Z=ce(Z)),w(z,G,Z)}e("hasOwnMetadata",N);function x(z,G,Z){if(!ne(G))throw new TypeError;return K(Z)||(Z=ce(Z)),P(z,G,Z)}e("getMetadata",x);function I(z,G,Z){if(!ne(G))throw new TypeError;return K(Z)||(Z=ce(Z)),k(z,G,Z)}e("getOwnMetadata",I);function $(z,G){if(!ne(z))throw new TypeError;return K(G)||(G=ce(G)),T(z,G)}e("getMetadataKeys",$);function j(z,G){if(!ne(z))throw new TypeError;return K(G)||(G=ce(G)),M(z,G)}e("getOwnMetadataKeys",j);function O(z,G,Z){if(!ne(G))throw new TypeError;if(K(Z)||(Z=ce(Z)),!ne(G))throw new TypeError;K(Z)||(Z=ce(Z));var de=tt(G,Z,!1);return K(de)?!1:de.OrdinaryDeleteMetadata(z,G,Z)}e("deleteMetadata",O);function E(z,G){for(var Z=z.length-1;Z>=0;--Z){var de=z[Z],Pe=de(G);if(!K(Pe)&&!Y(Pe)){if(!me(Pe))throw new TypeError;G=Pe}}return G}function S(z,G,Z,de){for(var Pe=z.length-1;Pe>=0;--Pe){var Ve=z[Pe],Qe=Ve(G,Z,de);if(!K(Qe)&&!Y(Qe)){if(!ne(Qe))throw new TypeError;de=Qe}}return de}function A(z,G,Z){var de=w(z,G,Z);if(de)return!0;var Pe=pe(G);return Y(Pe)?!1:A(z,Pe,Z)}function w(z,G,Z){var de=tt(G,Z,!1);return K(de)?!1:fe(de.OrdinaryHasOwnMetadata(z,G,Z))}function P(z,G,Z){var de=w(z,G,Z);if(de)return k(z,G,Z);var Pe=pe(G);if(!Y(Pe))return P(z,Pe,Z)}function k(z,G,Z){var de=tt(G,Z,!1);if(!K(de))return de.OrdinaryGetOwnMetadata(z,G,Z)}function D(z,G,Z,de){var Pe=tt(Z,de,!0);Pe.OrdinaryDefineOwnMetadata(z,G,Z,de)}function T(z,G){var Z=M(z,G),de=pe(z);if(de===null)return Z;var Pe=T(de,G);if(Pe.length<=0)return Z;if(Z.length<=0)return Pe;for(var Ve=new h,Qe=[],ze=0,Se=Z;ze<Se.length;ze++){var Ne=Se[ze],We=Ve.has(Ne);We||(Ve.add(Ne),Qe.push(Ne))}for(var Be=0,et=Pe;Be<et.length;Be++){var Ne=et[Be],We=Ve.has(Ne);We||(Ve.add(Ne),Qe.push(Ne))}return Qe}function M(z,G){var Z=tt(z,G,!1);return Z?Z.OrdinaryOwnMetadataKeys(z,G):[]}function L(z){if(z===null)return 1;switch(typeof z){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return z===null?1:6;default:return 6}}function K(z){return z===void 0}function Y(z){return z===null}function re(z){return typeof z=="symbol"}function ne(z){return typeof z=="object"?z!==null:typeof z=="function"}function ae(z,G){switch(L(z)){case 0:return z;case 1:return z;case 2:return z;case 3:return z;case 4:return z;case 5:return z}var Z="string",de=Ue(z,s);if(de!==void 0){var Pe=de.call(z,Z);if(ne(Pe))throw new TypeError;return Pe}return ie(z)}function ie(z,G){var Z,de,Pe;{var Ve=z.toString;if(ge(Ve)){var de=Ve.call(z);if(!ne(de))return de}var Z=z.valueOf;if(ge(Z)){var de=Z.call(z);if(!ne(de))return de}}throw new TypeError}function fe(z){return!!z}function oe(z){return""+z}function ce(z){var G=ae(z);return re(G)?G:oe(G)}function xe(z){return Array.isArray?Array.isArray(z):z instanceof Object?z instanceof Array:Object.prototype.toString.call(z)==="[object Array]"}function ge(z){return typeof z=="function"}function me(z){return typeof z=="function"}function Le(z){switch(L(z)){case 3:return!0;case 4:return!0;default:return!1}}function Oe(z,G){return z===G||z!==z&&G!==G}function Ue(z,G){var Z=z[G];if(Z!=null){if(!ge(Z))throw new TypeError;return Z}}function te(z){var G=Ue(z,a);if(!ge(G))throw new TypeError;var Z=G.call(z);if(!ne(Z))throw new TypeError;return Z}function J(z){return z.value}function se(z){var G=z.next();return G.done?!1:G}function be(z){var G=z.return;G&&G.call(z)}function pe(z){var G=Object.getPrototypeOf(z);if(typeof z!="function"||z===l||G!==l)return G;var Z=z.prototype,de=Z&&Object.getPrototypeOf(Z);if(de==null||de===Object.prototype)return G;var Pe=de.constructor;return typeof Pe!="function"||Pe===z?G:Pe}function he(){var z;!K(p)&&typeof t.Reflect<"u"&&!(p in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(z=ke(t.Reflect));var G,Z,de,Pe=new y,Ve={registerProvider:Qe,getProvider:Se,setProvider:We};return Ve;function Qe(Be){if(!Object.isExtensible(Ve))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case z===Be:break;case K(G):G=Be;break;case G===Be:break;case K(Z):Z=Be;break;case Z===Be:break;default:de===void 0&&(de=new h),de.add(Be);break}}function ze(Be,et){if(!K(G)){if(G.isProviderFor(Be,et))return G;if(!K(Z)){if(Z.isProviderFor(Be,et))return G;if(!K(de))for(var Et=te(de);;){var ct=se(Et);if(!ct)return;var vt=J(ct);if(vt.isProviderFor(Be,et))return be(Et),vt}}}if(!K(z)&&z.isProviderFor(Be,et))return z}function Se(Be,et){var Et=Pe.get(Be),ct;return K(Et)||(ct=Et.get(et)),K(ct)&&(ct=ze(Be,et),K(ct)||(K(Et)&&(Et=new d,Pe.set(Be,Et)),Et.set(et,ct))),ct}function Ne(Be){if(K(Be))throw new TypeError;return G===Be||Z===Be||!K(de)&&de.has(Be)}function We(Be,et,Et){if(!Ne(Et))throw new Error("Metadata provider not registered.");var ct=Se(Be,et);if(ct!==Et){if(!K(ct))return!1;var vt=Pe.get(Be);K(vt)&&(vt=new d,Pe.set(Be,vt)),vt.set(et,Et)}return!0}}function Te(){var z;return!K(p)&&ne(t.Reflect)&&Object.isExtensible(t.Reflect)&&(z=t.Reflect[p]),K(z)&&(z=he()),!K(p)&&ne(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,p,{enumerable:!1,configurable:!1,writable:!1,value:z}),z}function _e(z){var G=new y,Z={isProviderFor:function(Ne,We){var Be=G.get(Ne);return K(Be)?!1:Be.has(We)},OrdinaryDefineOwnMetadata:Qe,OrdinaryHasOwnMetadata:Pe,OrdinaryGetOwnMetadata:Ve,OrdinaryOwnMetadataKeys:ze,OrdinaryDeleteMetadata:Se};return g.registerProvider(Z),Z;function de(Ne,We,Be){var et=G.get(Ne),Et=!1;if(K(et)){if(!Be)return;et=new d,G.set(Ne,et),Et=!0}var ct=et.get(We);if(K(ct)){if(!Be)return;if(ct=new d,et.set(We,ct),!z.setProvider(Ne,We,Z))throw et.delete(We),Et&&G.delete(Ne),new Error("Wrong provider for target.")}return ct}function Pe(Ne,We,Be){var et=de(We,Be,!1);return K(et)?!1:fe(et.has(Ne))}function Ve(Ne,We,Be){var et=de(We,Be,!1);if(!K(et))return et.get(Ne)}function Qe(Ne,We,Be,et){var Et=de(Be,et,!0);Et.set(Ne,We)}function ze(Ne,We){var Be=[],et=de(Ne,We,!1);if(K(et))return Be;for(var Et=et.keys(),ct=te(Et),vt=0;;){var fo=se(ct);if(!fo)return Be.length=vt,Be;var qt=J(fo);try{Be[vt]=qt}catch(sr){try{be(ct)}finally{throw sr}}vt++}}function Se(Ne,We,Be){var et=de(We,Be,!1);if(K(et)||!et.delete(Ne))return!1;if(et.size===0){var Et=G.get(We);K(Et)||(Et.delete(Be),Et.size===0&&G.delete(Et))}return!0}}function ke(z){var G=z.defineMetadata,Z=z.hasOwnMetadata,de=z.getOwnMetadata,Pe=z.getOwnMetadataKeys,Ve=z.deleteMetadata,Qe=new y,ze={isProviderFor:function(Se,Ne){var We=Qe.get(Se);return!K(We)&&We.has(Ne)?!0:Pe(Se,Ne).length?(K(We)&&(We=new h,Qe.set(Se,We)),We.add(Ne),!0):!1},OrdinaryDefineOwnMetadata:G,OrdinaryHasOwnMetadata:Z,OrdinaryGetOwnMetadata:de,OrdinaryOwnMetadataKeys:Pe,OrdinaryDeleteMetadata:Ve};return ze}function tt(z,G,Z){var de=g.getProvider(z,G);if(!K(de))return de;if(Z){if(g.setProvider(z,G,m))return m;throw new Error("Illegal state.")}}function V(){var z={},G=[],Z=function(){function ze(Se,Ne,We){this._index=0,this._keys=Se,this._values=Ne,this._selector=We}return ze.prototype["@@iterator"]=function(){return this},ze.prototype[a]=function(){return this},ze.prototype.next=function(){var Se=this._index;if(Se>=0&&Se<this._keys.length){var Ne=this._selector(this._keys[Se],this._values[Se]);return Se+1>=this._keys.length?(this._index=-1,this._keys=G,this._values=G):this._index++,{value:Ne,done:!1}}return{value:void 0,done:!0}},ze.prototype.throw=function(Se){throw this._index>=0&&(this._index=-1,this._keys=G,this._values=G),Se},ze.prototype.return=function(Se){return this._index>=0&&(this._index=-1,this._keys=G,this._values=G),{value:Se,done:!0}},ze}(),de=function(){function ze(){this._keys=[],this._values=[],this._cacheKey=z,this._cacheIndex=-2}return Object.defineProperty(ze.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ze.prototype.has=function(Se){return this._find(Se,!1)>=0},ze.prototype.get=function(Se){var Ne=this._find(Se,!1);return Ne>=0?this._values[Ne]:void 0},ze.prototype.set=function(Se,Ne){var We=this._find(Se,!0);return this._values[We]=Ne,this},ze.prototype.delete=function(Se){var Ne=this._find(Se,!1);if(Ne>=0){for(var We=this._keys.length,Be=Ne+1;Be<We;Be++)this._keys[Be-1]=this._keys[Be],this._values[Be-1]=this._values[Be];return this._keys.length--,this._values.length--,Oe(Se,this._cacheKey)&&(this._cacheKey=z,this._cacheIndex=-2),!0}return!1},ze.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=z,this._cacheIndex=-2},ze.prototype.keys=function(){return new Z(this._keys,this._values,Pe)},ze.prototype.values=function(){return new Z(this._keys,this._values,Ve)},ze.prototype.entries=function(){return new Z(this._keys,this._values,Qe)},ze.prototype["@@iterator"]=function(){return this.entries()},ze.prototype[a]=function(){return this.entries()},ze.prototype._find=function(Se,Ne){if(!Oe(this._cacheKey,Se)){this._cacheIndex=-1;for(var We=0;We<this._keys.length;We++)if(Oe(this._keys[We],Se)){this._cacheIndex=We;break}}return this._cacheIndex<0&&Ne&&(this._cacheIndex=this._keys.length,this._keys.push(Se),this._values.push(void 0)),this._cacheIndex},ze}();return de;function Pe(ze,Se){return ze}function Ve(ze,Se){return Se}function Qe(ze,Se){return[ze,Se]}}function R(){var z=function(){function G(){this._map=new d}return Object.defineProperty(G.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),G.prototype.has=function(Z){return this._map.has(Z)},G.prototype.add=function(Z){return this._map.set(Z,Z),this},G.prototype.delete=function(Z){return this._map.delete(Z)},G.prototype.clear=function(){this._map.clear()},G.prototype.keys=function(){return this._map.keys()},G.prototype.values=function(){return this._map.keys()},G.prototype.entries=function(){return this._map.entries()},G.prototype["@@iterator"]=function(){return this.keys()},G.prototype[a]=function(){return this.keys()},G}();return z}function B(){var z=16,G=f.create(),Z=de();return function(){function Se(){this._key=de()}return Se.prototype.has=function(Ne){var We=Pe(Ne,!1);return We!==void 0?f.has(We,this._key):!1},Se.prototype.get=function(Ne){var We=Pe(Ne,!1);return We!==void 0?f.get(We,this._key):void 0},Se.prototype.set=function(Ne,We){var Be=Pe(Ne,!0);return Be[this._key]=We,this},Se.prototype.delete=function(Ne){var We=Pe(Ne,!1);return We!==void 0?delete We[this._key]:!1},Se.prototype.clear=function(){this._key=de()},Se}();function de(){var Se;do Se="@@WeakMap@@"+ze();while(f.has(G,Se));return G[Se]=!0,Se}function Pe(Se,Ne){if(!n.call(Se,Z)){if(!Ne)return;Object.defineProperty(Se,Z,{value:f.create()})}return Se[Z]}function Ve(Se,Ne){for(var We=0;We<Ne;++We)Se[We]=Math.random()*255|0;return Se}function Qe(Se){if(typeof Uint8Array=="function"){var Ne=new Uint8Array(Se);return typeof crypto<"u"?crypto.getRandomValues(Ne):typeof msCrypto<"u"?msCrypto.getRandomValues(Ne):Ve(Ne,Se),Ne}return Ve(new Array(Se),Se)}function ze(){var Se=Qe(z);Se[6]=Se[6]&79|64,Se[8]=Se[8]&191|128;for(var Ne="",We=0;We<z;++We){var Be=Se[We];(We===4||We===6||We===8)&&(Ne+="-"),Be<16&&(Ne+="0"),Ne+=Be.toString(16).toLowerCase()}return Ne}}function W(z){return z.__=void 0,delete z.__,z}})})(Y$||(Y$={}));let h8e=class{static getInheritanceTree(e){const t=[e],n=i=>{const s=Object.getPrototypeOf(i);s&&s.name&&(t.push(s),n(s))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter(n=>n.target&&t.indexOf(n.target)!==-1):e}},p8e=class{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.propertyName===t)}findTree(e){return this.trees.find(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterUniques(e){return this.uniques.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterChecks(e){return this.checks.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterExclusions(e){return this.exclusions.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find(n=>n.target===e&&n.propertyName===t)}filterJoinColumns(e,t){return this.joinColumns.filter(n=>n.target===e&&n.propertyName===t)}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterTransactionRepository(e,t){return this.transactionRepositories.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterSingleTableChildren(e){return this.tables.filter(t=>typeof t.target=="function"&&typeof e=="function"&&h8e.isInherited(t.target,e)&&t.type==="entity-child")}findInheritanceType(e){return this.inheritances.find(t=>t.target===e)}findDiscriminatorValue(e){return this.discriminatorValues.find(t=>t.target===e)}filterByTarget(e,t){return e.filter(n=>Array.isArray(t)?t.indexOf(n.target)!==-1:n.target===t)}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(a=>a.propertyName===i.propertyName)||n.push(i))}),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach(i=>{if(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t){const a=n.findIndex(o=>o.propertyName===i.propertyName);if(Array.isArray(t)&&a!==-1&&t.indexOf(i.target)<t.indexOf(n[a].target)){const o=Object.create(n[a]);o.type=i.type,n[a]=o}else a===-1&&n.push(i)}}),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(o=>o.prefix===i.prefix&&o.propertyName===i.propertyName)||n.push(i))}),n}};var x5={},s9={};s9.byteLength=b8e;s9.toByteArray=v8e;s9.fromByteArray=E8e;var Nc=[],Ra=[],y8e=typeof Uint8Array<"u"?Uint8Array:Array,ME="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Wp=0,m8e=ME.length;Wp<m8e;++Wp)Nc[Wp]=ME[Wp],Ra[ME.charCodeAt(Wp)]=Wp;Ra[45]=62;Ra[95]=63;function XQ(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function b8e(r){var e=XQ(r),t=e[0],n=e[1];return(t+n)*3/4-n}function g8e(r,e,t){return(e+t)*3/4-t}function v8e(r){var e,t=XQ(r),n=t[0],i=t[1],s=new y8e(g8e(r,n,i)),a=0,o=i>0?n-4:n,c;for(c=0;c<o;c+=4)e=Ra[r.charCodeAt(c)]<<18|Ra[r.charCodeAt(c+1)]<<12|Ra[r.charCodeAt(c+2)]<<6|Ra[r.charCodeAt(c+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Ra[r.charCodeAt(c)]<<2|Ra[r.charCodeAt(c+1)]>>4,s[a++]=e&255),i===1&&(e=Ra[r.charCodeAt(c)]<<10|Ra[r.charCodeAt(c+1)]<<4|Ra[r.charCodeAt(c+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function x8e(r){return Nc[r>>18&63]+Nc[r>>12&63]+Nc[r>>6&63]+Nc[r&63]}function w8e(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(x8e(n));return i.join("")}function E8e(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,o=t-n;a<o;a+=s)i.push(w8e(r,a,a+s>o?o:a+s));return n===1?(e=r[t-1],i.push(Nc[e>>2]+Nc[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Nc[e>>10]+Nc[e>>4&63]+Nc[e<<2&63]+"=")),i.join("")}var $R={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */$R.read=function(r,e,t,n,i){var s,a,o=i*8-n-1,c=(1<<o)-1,u=c>>1,f=-7,l=t?i-1:0,d=t?-1:1,h=r[e+l];for(l+=d,s=h&(1<<-f)-1,h>>=-f,f+=o;f>0;s=s*256+r[e+l],l+=d,f-=8);for(a=s&(1<<-f)-1,s>>=-f,f+=n;f>0;a=a*256+r[e+l],l+=d,f-=8);if(s===0)s=1-u;else{if(s===c)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(h?-1:1)*a*Math.pow(2,s-n)};$R.write=function(r,e,t,n,i,s){var a,o,c,u=s*8-i-1,f=(1<<u)-1,l=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:s-1,y=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+l>=1?e+=d/c:e+=d*Math.pow(2,1-l),e*c>=2&&(a++,c/=2),a+l>=f?(o=0,a=f):a+l>=1?(o=(e*c-1)*Math.pow(2,i),a=a+l):(o=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;r[t+h]=o&255,h+=y,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;r[t+h]=a&255,h+=y,a/=256,u-=8);r[t+h-y]|=p*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=s9,t=$R,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=o,r.SlowBuffer=v,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const V=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(V,R),V.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(V){if(V>i)throw new RangeError('The value "'+V+'" is invalid for option "size"');const R=new Uint8Array(V);return Object.setPrototypeOf(R,o.prototype),R}function o(V,R,B){if(typeof V=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(V)}return c(V,R,B)}o.poolSize=8192;function c(V,R,B){if(typeof V=="string")return d(V,R);if(ArrayBuffer.isView(V))return y(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(he(V,ArrayBuffer)||V&&he(V.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(he(V,SharedArrayBuffer)||V&&he(V.buffer,SharedArrayBuffer)))return p(V,R,B);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=V.valueOf&&V.valueOf();if(W!=null&&W!==V)return o.from(W,R,B);const z=g(V);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return o.from(V[Symbol.toPrimitive]("string"),R,B);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}o.from=function(V,R,B){return c(V,R,B)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function u(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function f(V,R,B){return u(V),V<=0?a(V):R!==void 0?typeof B=="string"?a(V).fill(R,B):a(V).fill(R):a(V)}o.alloc=function(V,R,B){return f(V,R,B)};function l(V){return u(V),a(V<0?0:m(V)|0)}o.allocUnsafe=function(V){return l(V)},o.allocUnsafeSlow=function(V){return l(V)};function d(V,R){if((typeof R!="string"||R==="")&&(R="utf8"),!o.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const B=b(V,R)|0;let W=a(B);const z=W.write(V,R);return z!==B&&(W=W.slice(0,z)),W}function h(V){const R=V.length<0?0:m(V.length)|0,B=a(R);for(let W=0;W<R;W+=1)B[W]=V[W]&255;return B}function y(V){if(he(V,Uint8Array)){const R=new Uint8Array(V);return p(R.buffer,R.byteOffset,R.byteLength)}return h(V)}function p(V,R,B){if(R<0||V.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<R+(B||0))throw new RangeError('"length" is outside of buffer bounds');let W;return R===void 0&&B===void 0?W=new Uint8Array(V):B===void 0?W=new Uint8Array(V,R):W=new Uint8Array(V,R,B),Object.setPrototypeOf(W,o.prototype),W}function g(V){if(o.isBuffer(V)){const R=m(V.length)|0,B=a(R);return B.length===0||V.copy(B,0,0,R),B}if(V.length!==void 0)return typeof V.length!="number"||Te(V.length)?a(0):h(V);if(V.type==="Buffer"&&Array.isArray(V.data))return h(V.data)}function m(V){if(V>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return V|0}function v(V){return+V!=V&&(V=0),o.alloc(+V)}o.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==o.prototype},o.compare=function(R,B){if(he(R,Uint8Array)&&(R=o.from(R,R.offset,R.byteLength)),he(B,Uint8Array)&&(B=o.from(B,B.offset,B.byteLength)),!o.isBuffer(R)||!o.isBuffer(B))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===B)return 0;let W=R.length,z=B.length;for(let G=0,Z=Math.min(W,z);G<Z;++G)if(R[G]!==B[G]){W=R[G],z=B[G];break}return W<z?-1:z<W?1:0},o.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(R,B){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return o.alloc(0);let W;if(B===void 0)for(B=0,W=0;W<R.length;++W)B+=R[W].length;const z=o.allocUnsafe(B);let G=0;for(W=0;W<R.length;++W){let Z=R[W];if(he(Z,Uint8Array))G+Z.length>z.length?(o.isBuffer(Z)||(Z=o.from(Z)),Z.copy(z,G)):Uint8Array.prototype.set.call(z,Z,G);else if(o.isBuffer(Z))Z.copy(z,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Z.length}return z};function b(V,R){if(o.isBuffer(V))return V.length;if(ArrayBuffer.isView(V)||he(V,ArrayBuffer))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const B=V.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&B===0)return 0;let z=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return B;case"utf8":case"utf-8":return te(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B*2;case"hex":return B>>>1;case"base64":return be(V).length;default:if(z)return W?-1:te(V).length;R=(""+R).toLowerCase(),z=!0}}o.byteLength=b;function _(V,R,B){let W=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((B===void 0||B>this.length)&&(B=this.length),B<=0)||(B>>>=0,R>>>=0,B<=R))return"";for(V||(V="utf8");;)switch(V){case"hex":return T(this,R,B);case"utf8":case"utf-8":return A(this,R,B);case"ascii":return k(this,R,B);case"latin1":case"binary":return D(this,R,B);case"base64":return S(this,R,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,R,B);default:if(W)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),W=!0}}o.prototype._isBuffer=!0;function C(V,R,B){const W=V[R];V[R]=V[B],V[B]=W}o.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let B=0;B<R;B+=2)C(this,B,B+1);return this},o.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let B=0;B<R;B+=4)C(this,B,B+3),C(this,B+1,B+2);return this},o.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let B=0;B<R;B+=8)C(this,B,B+7),C(this,B+1,B+6),C(this,B+2,B+5),C(this,B+3,B+4);return this},o.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?A(this,0,R):_.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(R){if(!o.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:o.compare(this,R)===0},o.prototype.inspect=function(){let R="";const B=r.INSPECT_MAX_BYTES;return R=this.toString("hex",0,B).replace(/(.{2})/g,"$1 ").trim(),this.length>B&&(R+=" ... "),"<Buffer "+R+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(R,B,W,z,G){if(he(R,Uint8Array)&&(R=o.from(R,R.offset,R.byteLength)),!o.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(B===void 0&&(B=0),W===void 0&&(W=R?R.length:0),z===void 0&&(z=0),G===void 0&&(G=this.length),B<0||W>R.length||z<0||G>this.length)throw new RangeError("out of range index");if(z>=G&&B>=W)return 0;if(z>=G)return-1;if(B>=W)return 1;if(B>>>=0,W>>>=0,z>>>=0,G>>>=0,this===R)return 0;let Z=G-z,de=W-B;const Pe=Math.min(Z,de),Ve=this.slice(z,G),Qe=R.slice(B,W);for(let ze=0;ze<Pe;++ze)if(Ve[ze]!==Qe[ze]){Z=Ve[ze],de=Qe[ze];break}return Z<de?-1:de<Z?1:0};function N(V,R,B,W,z){if(V.length===0)return-1;if(typeof B=="string"?(W=B,B=0):B>2147483647?B=2147483647:B<-2147483648&&(B=-2147483648),B=+B,Te(B)&&(B=z?0:V.length-1),B<0&&(B=V.length+B),B>=V.length){if(z)return-1;B=V.length-1}else if(B<0)if(z)B=0;else return-1;if(typeof R=="string"&&(R=o.from(R,W)),o.isBuffer(R))return R.length===0?-1:x(V,R,B,W,z);if(typeof R=="number")return R=R&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(V,R,B):Uint8Array.prototype.lastIndexOf.call(V,R,B):x(V,[R],B,W,z);throw new TypeError("val must be string, number or Buffer")}function x(V,R,B,W,z){let G=1,Z=V.length,de=R.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(V.length<2||R.length<2)return-1;G=2,Z/=2,de/=2,B/=2}function Pe(Qe,ze){return G===1?Qe[ze]:Qe.readUInt16BE(ze*G)}let Ve;if(z){let Qe=-1;for(Ve=B;Ve<Z;Ve++)if(Pe(V,Ve)===Pe(R,Qe===-1?0:Ve-Qe)){if(Qe===-1&&(Qe=Ve),Ve-Qe+1===de)return Qe*G}else Qe!==-1&&(Ve-=Ve-Qe),Qe=-1}else for(B+de>Z&&(B=Z-de),Ve=B;Ve>=0;Ve--){let Qe=!0;for(let ze=0;ze<de;ze++)if(Pe(V,Ve+ze)!==Pe(R,ze)){Qe=!1;break}if(Qe)return Ve}return-1}o.prototype.includes=function(R,B,W){return this.indexOf(R,B,W)!==-1},o.prototype.indexOf=function(R,B,W){return N(this,R,B,W,!0)},o.prototype.lastIndexOf=function(R,B,W){return N(this,R,B,W,!1)};function I(V,R,B,W){B=Number(B)||0;const z=V.length-B;W?(W=Number(W),W>z&&(W=z)):W=z;const G=R.length;W>G/2&&(W=G/2);let Z;for(Z=0;Z<W;++Z){const de=parseInt(R.substr(Z*2,2),16);if(Te(de))return Z;V[B+Z]=de}return Z}function $(V,R,B,W){return pe(te(R,V.length-B),V,B,W)}function j(V,R,B,W){return pe(J(R),V,B,W)}function O(V,R,B,W){return pe(be(R),V,B,W)}function E(V,R,B,W){return pe(se(R,V.length-B),V,B,W)}o.prototype.write=function(R,B,W,z){if(B===void 0)z="utf8",W=this.length,B=0;else if(W===void 0&&typeof B=="string")z=B,W=this.length,B=0;else if(isFinite(B))B=B>>>0,isFinite(W)?(W=W>>>0,z===void 0&&(z="utf8")):(z=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-B;if((W===void 0||W>G)&&(W=G),R.length>0&&(W<0||B<0)||B>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let Z=!1;for(;;)switch(z){case"hex":return I(this,R,B,W);case"utf8":case"utf-8":return $(this,R,B,W);case"ascii":case"latin1":case"binary":return j(this,R,B,W);case"base64":return O(this,R,B,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,R,B,W);default:if(Z)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),Z=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(V,R,B){return R===0&&B===V.length?e.fromByteArray(V):e.fromByteArray(V.slice(R,B))}function A(V,R,B){B=Math.min(V.length,B);const W=[];let z=R;for(;z<B;){const G=V[z];let Z=null,de=G>239?4:G>223?3:G>191?2:1;if(z+de<=B){let Pe,Ve,Qe,ze;switch(de){case 1:G<128&&(Z=G);break;case 2:Pe=V[z+1],(Pe&192)===128&&(ze=(G&31)<<6|Pe&63,ze>127&&(Z=ze));break;case 3:Pe=V[z+1],Ve=V[z+2],(Pe&192)===128&&(Ve&192)===128&&(ze=(G&15)<<12|(Pe&63)<<6|Ve&63,ze>2047&&(ze<55296||ze>57343)&&(Z=ze));break;case 4:Pe=V[z+1],Ve=V[z+2],Qe=V[z+3],(Pe&192)===128&&(Ve&192)===128&&(Qe&192)===128&&(ze=(G&15)<<18|(Pe&63)<<12|(Ve&63)<<6|Qe&63,ze>65535&&ze<1114112&&(Z=ze))}}Z===null?(Z=65533,de=1):Z>65535&&(Z-=65536,W.push(Z>>>10&1023|55296),Z=56320|Z&1023),W.push(Z),z+=de}return P(W)}const w=4096;function P(V){const R=V.length;if(R<=w)return String.fromCharCode.apply(String,V);let B="",W=0;for(;W<R;)B+=String.fromCharCode.apply(String,V.slice(W,W+=w));return B}function k(V,R,B){let W="";B=Math.min(V.length,B);for(let z=R;z<B;++z)W+=String.fromCharCode(V[z]&127);return W}function D(V,R,B){let W="";B=Math.min(V.length,B);for(let z=R;z<B;++z)W+=String.fromCharCode(V[z]);return W}function T(V,R,B){const W=V.length;(!R||R<0)&&(R=0),(!B||B<0||B>W)&&(B=W);let z="";for(let G=R;G<B;++G)z+=_e[V[G]];return z}function M(V,R,B){const W=V.slice(R,B);let z="";for(let G=0;G<W.length-1;G+=2)z+=String.fromCharCode(W[G]+W[G+1]*256);return z}o.prototype.slice=function(R,B){const W=this.length;R=~~R,B=B===void 0?W:~~B,R<0?(R+=W,R<0&&(R=0)):R>W&&(R=W),B<0?(B+=W,B<0&&(B=0)):B>W&&(B=W),B<R&&(B=R);const z=this.subarray(R,B);return Object.setPrototypeOf(z,o.prototype),z};function L(V,R,B){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+R>B)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(R,B,W){R=R>>>0,B=B>>>0,W||L(R,B,this.length);let z=this[R],G=1,Z=0;for(;++Z<B&&(G*=256);)z+=this[R+Z]*G;return z},o.prototype.readUintBE=o.prototype.readUIntBE=function(R,B,W){R=R>>>0,B=B>>>0,W||L(R,B,this.length);let z=this[R+--B],G=1;for(;B>0&&(G*=256);)z+=this[R+--B]*G;return z},o.prototype.readUint8=o.prototype.readUInt8=function(R,B){return R=R>>>0,B||L(R,1,this.length),this[R]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(R,B){return R=R>>>0,B||L(R,2,this.length),this[R]|this[R+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(R,B){return R=R>>>0,B||L(R,2,this.length),this[R]<<8|this[R+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(R,B){return R=R>>>0,B||L(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(R,B){return R=R>>>0,B||L(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},o.prototype.readBigUInt64LE=ke(function(R){R=R>>>0,me(R,"offset");const B=this[R],W=this[R+7];(B===void 0||W===void 0)&&Le(R,this.length-8);const z=B+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,G=this[++R]+this[++R]*2**8+this[++R]*2**16+W*2**24;return BigInt(z)+(BigInt(G)<<BigInt(32))}),o.prototype.readBigUInt64BE=ke(function(R){R=R>>>0,me(R,"offset");const B=this[R],W=this[R+7];(B===void 0||W===void 0)&&Le(R,this.length-8);const z=B*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],G=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+W;return(BigInt(z)<<BigInt(32))+BigInt(G)}),o.prototype.readIntLE=function(R,B,W){R=R>>>0,B=B>>>0,W||L(R,B,this.length);let z=this[R],G=1,Z=0;for(;++Z<B&&(G*=256);)z+=this[R+Z]*G;return G*=128,z>=G&&(z-=Math.pow(2,8*B)),z},o.prototype.readIntBE=function(R,B,W){R=R>>>0,B=B>>>0,W||L(R,B,this.length);let z=B,G=1,Z=this[R+--z];for(;z>0&&(G*=256);)Z+=this[R+--z]*G;return G*=128,Z>=G&&(Z-=Math.pow(2,8*B)),Z},o.prototype.readInt8=function(R,B){return R=R>>>0,B||L(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},o.prototype.readInt16LE=function(R,B){R=R>>>0,B||L(R,2,this.length);const W=this[R]|this[R+1]<<8;return W&32768?W|4294901760:W},o.prototype.readInt16BE=function(R,B){R=R>>>0,B||L(R,2,this.length);const W=this[R+1]|this[R]<<8;return W&32768?W|4294901760:W},o.prototype.readInt32LE=function(R,B){return R=R>>>0,B||L(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},o.prototype.readInt32BE=function(R,B){return R=R>>>0,B||L(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},o.prototype.readBigInt64LE=ke(function(R){R=R>>>0,me(R,"offset");const B=this[R],W=this[R+7];(B===void 0||W===void 0)&&Le(R,this.length-8);const z=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(W<<24);return(BigInt(z)<<BigInt(32))+BigInt(B+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),o.prototype.readBigInt64BE=ke(function(R){R=R>>>0,me(R,"offset");const B=this[R],W=this[R+7];(B===void 0||W===void 0)&&Le(R,this.length-8);const z=(B<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(z)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+W)}),o.prototype.readFloatLE=function(R,B){return R=R>>>0,B||L(R,4,this.length),t.read(this,R,!0,23,4)},o.prototype.readFloatBE=function(R,B){return R=R>>>0,B||L(R,4,this.length),t.read(this,R,!1,23,4)},o.prototype.readDoubleLE=function(R,B){return R=R>>>0,B||L(R,8,this.length),t.read(this,R,!0,52,8)},o.prototype.readDoubleBE=function(R,B){return R=R>>>0,B||L(R,8,this.length),t.read(this,R,!1,52,8)};function K(V,R,B,W,z,G){if(!o.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>z||R<G)throw new RangeError('"value" argument is out of bounds');if(B+W>V.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(R,B,W,z){if(R=+R,B=B>>>0,W=W>>>0,!z){const de=Math.pow(2,8*W)-1;K(this,R,B,W,de,0)}let G=1,Z=0;for(this[B]=R&255;++Z<W&&(G*=256);)this[B+Z]=R/G&255;return B+W},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(R,B,W,z){if(R=+R,B=B>>>0,W=W>>>0,!z){const de=Math.pow(2,8*W)-1;K(this,R,B,W,de,0)}let G=W-1,Z=1;for(this[B+G]=R&255;--G>=0&&(Z*=256);)this[B+G]=R/Z&255;return B+W},o.prototype.writeUint8=o.prototype.writeUInt8=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,1,255,0),this[B]=R&255,B+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,2,65535,0),this[B]=R&255,this[B+1]=R>>>8,B+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,2,65535,0),this[B]=R>>>8,this[B+1]=R&255,B+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,4,4294967295,0),this[B+3]=R>>>24,this[B+2]=R>>>16,this[B+1]=R>>>8,this[B]=R&255,B+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,4,4294967295,0),this[B]=R>>>24,this[B+1]=R>>>16,this[B+2]=R>>>8,this[B+3]=R&255,B+4};function Y(V,R,B,W,z){ge(R,W,z,V,B,7);let G=Number(R&BigInt(4294967295));V[B++]=G,G=G>>8,V[B++]=G,G=G>>8,V[B++]=G,G=G>>8,V[B++]=G;let Z=Number(R>>BigInt(32)&BigInt(4294967295));return V[B++]=Z,Z=Z>>8,V[B++]=Z,Z=Z>>8,V[B++]=Z,Z=Z>>8,V[B++]=Z,B}function re(V,R,B,W,z){ge(R,W,z,V,B,7);let G=Number(R&BigInt(4294967295));V[B+7]=G,G=G>>8,V[B+6]=G,G=G>>8,V[B+5]=G,G=G>>8,V[B+4]=G;let Z=Number(R>>BigInt(32)&BigInt(4294967295));return V[B+3]=Z,Z=Z>>8,V[B+2]=Z,Z=Z>>8,V[B+1]=Z,Z=Z>>8,V[B]=Z,B+8}o.prototype.writeBigUInt64LE=ke(function(R,B=0){return Y(this,R,B,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=ke(function(R,B=0){return re(this,R,B,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(R,B,W,z){if(R=+R,B=B>>>0,!z){const Pe=Math.pow(2,8*W-1);K(this,R,B,W,Pe-1,-Pe)}let G=0,Z=1,de=0;for(this[B]=R&255;++G<W&&(Z*=256);)R<0&&de===0&&this[B+G-1]!==0&&(de=1),this[B+G]=(R/Z>>0)-de&255;return B+W},o.prototype.writeIntBE=function(R,B,W,z){if(R=+R,B=B>>>0,!z){const Pe=Math.pow(2,8*W-1);K(this,R,B,W,Pe-1,-Pe)}let G=W-1,Z=1,de=0;for(this[B+G]=R&255;--G>=0&&(Z*=256);)R<0&&de===0&&this[B+G+1]!==0&&(de=1),this[B+G]=(R/Z>>0)-de&255;return B+W},o.prototype.writeInt8=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,1,127,-128),R<0&&(R=255+R+1),this[B]=R&255,B+1},o.prototype.writeInt16LE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,2,32767,-32768),this[B]=R&255,this[B+1]=R>>>8,B+2},o.prototype.writeInt16BE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,2,32767,-32768),this[B]=R>>>8,this[B+1]=R&255,B+2},o.prototype.writeInt32LE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,4,2147483647,-2147483648),this[B]=R&255,this[B+1]=R>>>8,this[B+2]=R>>>16,this[B+3]=R>>>24,B+4},o.prototype.writeInt32BE=function(R,B,W){return R=+R,B=B>>>0,W||K(this,R,B,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[B]=R>>>24,this[B+1]=R>>>16,this[B+2]=R>>>8,this[B+3]=R&255,B+4},o.prototype.writeBigInt64LE=ke(function(R,B=0){return Y(this,R,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=ke(function(R,B=0){return re(this,R,B,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(V,R,B,W,z,G){if(B+W>V.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("Index out of range")}function ae(V,R,B,W,z){return R=+R,B=B>>>0,z||ne(V,R,B,4),t.write(V,R,B,W,23,4),B+4}o.prototype.writeFloatLE=function(R,B,W){return ae(this,R,B,!0,W)},o.prototype.writeFloatBE=function(R,B,W){return ae(this,R,B,!1,W)};function ie(V,R,B,W,z){return R=+R,B=B>>>0,z||ne(V,R,B,8),t.write(V,R,B,W,52,8),B+8}o.prototype.writeDoubleLE=function(R,B,W){return ie(this,R,B,!0,W)},o.prototype.writeDoubleBE=function(R,B,W){return ie(this,R,B,!1,W)},o.prototype.copy=function(R,B,W,z){if(!o.isBuffer(R))throw new TypeError("argument should be a Buffer");if(W||(W=0),!z&&z!==0&&(z=this.length),B>=R.length&&(B=R.length),B||(B=0),z>0&&z<W&&(z=W),z===W||R.length===0||this.length===0)return 0;if(B<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),R.length-B<z-W&&(z=R.length-B+W);const G=z-W;return this===R&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(B,W,z):Uint8Array.prototype.set.call(R,this.subarray(W,z),B),G},o.prototype.fill=function(R,B,W,z){if(typeof R=="string"){if(typeof B=="string"?(z=B,B=0,W=this.length):typeof W=="string"&&(z=W,W=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!o.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(R.length===1){const Z=R.charCodeAt(0);(z==="utf8"&&Z<128||z==="latin1")&&(R=Z)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(B<0||this.length<B||this.length<W)throw new RangeError("Out of range index");if(W<=B)return this;B=B>>>0,W=W===void 0?this.length:W>>>0,R||(R=0);let G;if(typeof R=="number")for(G=B;G<W;++G)this[G]=R;else{const Z=o.isBuffer(R)?R:o.from(R,z),de=Z.length;if(de===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(G=0;G<W-B;++G)this[G+B]=Z[G%de]}return this};const fe={};function oe(V,R,B){fe[V]=class extends B{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(V,R){return`The "${V}" argument must be of type number. Received type ${typeof R}`},TypeError),oe("ERR_OUT_OF_RANGE",function(V,R,B){let W=`The value of "${V}" is out of range.`,z=B;return Number.isInteger(B)&&Math.abs(B)>2**32?z=ce(String(B)):typeof B=="bigint"&&(z=String(B),(B>BigInt(2)**BigInt(32)||B<-(BigInt(2)**BigInt(32)))&&(z=ce(z)),z+="n"),W+=` It must be ${R}. Received ${z}`,W},RangeError);function ce(V){let R="",B=V.length;const W=V[0]==="-"?1:0;for(;B>=W+4;B-=3)R=`_${V.slice(B-3,B)}${R}`;return`${V.slice(0,B)}${R}`}function xe(V,R,B){me(R,"offset"),(V[R]===void 0||V[R+B]===void 0)&&Le(R,V.length-(B+1))}function ge(V,R,B,W,z,G){if(V>B||V<R){const Z=typeof R=="bigint"?"n":"";let de;throw R===0||R===BigInt(0)?de=`>= 0${Z} and < 2${Z} ** ${(G+1)*8}${Z}`:de=`>= -(2${Z} ** ${(G+1)*8-1}${Z}) and < 2 ** ${(G+1)*8-1}${Z}`,new fe.ERR_OUT_OF_RANGE("value",de,V)}xe(W,z,G)}function me(V,R){if(typeof V!="number")throw new fe.ERR_INVALID_ARG_TYPE(R,"number",V)}function Le(V,R,B){throw Math.floor(V)!==V?(me(V,B),new fe.ERR_OUT_OF_RANGE("offset","an integer",V)):R<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,V)}const Oe=/[^+/0-9A-Za-z-_]/g;function Ue(V){if(V=V.split("=")[0],V=V.trim().replace(Oe,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function te(V,R){R=R||1/0;let B;const W=V.length;let z=null;const G=[];for(let Z=0;Z<W;++Z){if(B=V.charCodeAt(Z),B>55295&&B<57344){if(!z){if(B>56319){(R-=3)>-1&&G.push(239,191,189);continue}else if(Z+1===W){(R-=3)>-1&&G.push(239,191,189);continue}z=B;continue}if(B<56320){(R-=3)>-1&&G.push(239,191,189),z=B;continue}B=(z-55296<<10|B-56320)+65536}else z&&(R-=3)>-1&&G.push(239,191,189);if(z=null,B<128){if((R-=1)<0)break;G.push(B)}else if(B<2048){if((R-=2)<0)break;G.push(B>>6|192,B&63|128)}else if(B<65536){if((R-=3)<0)break;G.push(B>>12|224,B>>6&63|128,B&63|128)}else if(B<1114112){if((R-=4)<0)break;G.push(B>>18|240,B>>12&63|128,B>>6&63|128,B&63|128)}else throw new Error("Invalid code point")}return G}function J(V){const R=[];for(let B=0;B<V.length;++B)R.push(V.charCodeAt(B)&255);return R}function se(V,R){let B,W,z;const G=[];for(let Z=0;Z<V.length&&!((R-=2)<0);++Z)B=V.charCodeAt(Z),W=B>>8,z=B%256,G.push(z),G.push(W);return G}function be(V){return e.toByteArray(Ue(V))}function pe(V,R,B,W){let z;for(z=0;z<W&&!(z+B>=R.length||z>=V.length);++z)R[z+B]=V[z];return z}function he(V,R){return V instanceof R||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===R.name}function Te(V){return V!==V}const _e=function(){const V="0123456789abcdef",R=new Array(256);for(let B=0;B<16;++B){const W=B*16;for(let z=0;z<16;++z)R[W+z]=V[B]+V[z]}return R}();function ke(V){return typeof BigInt>"u"?tt:V}function tt(){throw new Error("BigInt not supported")}})(x5);let eZ=class{static getGlobalVariable(){return typeof window<"u"?window:global}static load(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: require("${e}").`);return""}static pathNormalize(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize("${e}").`);return""}static pathExtname(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname("${e}").`);return""}static pathResolve(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve("${e}").`);return""}static fileExist(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync("${e}").`);return!1}static dotenv(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "${e}" }).`)}static getEnvVariable(e){}static readFileSync(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("${e}").`);return null}static appendFileSync(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("${e}").`)}static writeFile(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile("${e}").`);return Promise.reject(null)}static highlightSql(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}};eZ.type="browser";typeof window<"u"&&(window.Buffer=x5.Buffer);typeof global<"u"&&typeof require<"u"&&(global.Buffer=require("buffer/").Buffer);let Lr=class{static isObject(e){return e!==null&&typeof e=="object"}static isObjectWithName(e){return e!==null&&typeof e=="object"&&e.name!==void 0}static assign(e,...t){for(const n of t)for(const i of Object.getOwnPropertyNames(n))e[i]=n[i]}static mixedListToArray(e){return e!==null&&typeof e=="object"?Object.keys(e).map(t=>e[t]):e}},Fe=class extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}},Kp=class extends Fe{constructor(){super("Locking not supported on given driver.")}},hM=class extends Fe{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}},tr=class{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return typeof e=="function"&&typeof e.hasId=="function"&&typeof e.save=="function"&&typeof e.useDataSource=="function"}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return typeof e=="object"&&e!==null&&e["@instanceof"]===Symbol.for(t)}},A8e=class extends Fe{constructor(e,t){super(),this.entityClass=e,this.criteria=t,this.message=`Could not find any entity of type "${this.stringifyTarget(e)}" matching: ${this.stringifyCriteria(t)}`}stringifyTarget(e){return tr.isEntitySchema(e)?e.options.name:typeof e=="function"||Lr.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch{}return""+e}},X$=class extends Fe{constructor(e,t,n){super(`The optimistic lock on entity ${e} failed, version ${t} was expected, but is actually ${n}.`)}},tZ=class extends Fe{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}},_8e=class extends Fe{constructor(e,t){super(`Primary column ${e.constructor.name}#${t} cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.`)}},S8e=class extends Fe{constructor(e){super(`Entity "${e.name}" does not have delete date columns.`)}},a9=class extends Fe{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}},Rl=class rZ extends Fe{constructor(e,t){super(e),Object.setPrototypeOf(this,rZ.prototype),this.message=`Property "${e}" was not found in "${t.targetName}". Make sure your query is correct.`}},M8e=class extends Fe{constructor(e){super(`Entity ${e} does not have version or update date columns.`)}},P8e=class extends Fe{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}},nb=class extends Fe{constructor(){super("The optimistic lock can be used only with getOne() method.")}},T8e=class extends Fe{constructor(e){super(),e.length===1?this.message=`Relation "${e[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${e.map(t=>`"${t}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}},C8e=class extends Fe{constructor(){super("An open transaction is required for pessimistic lock.")}},nZ=class extends Fe{constructor(e,t){super(`Column type for ${e.constructor.name}#${t} is not defined and cannot be guessed. Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.`)}},I8e=class extends Fe{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}},eL=class{constructor(e){Lr.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new Fe(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}},Bc=class{static isAliasProperty(e){if(typeof e!="string"||e.indexOf(".")===-1)return!1;const[t,n]=e.split(".");return!(!t||!n||e.indexOf("(")!==-1||e.indexOf(")")!==-1)}};var iZ={exports:{}},pM={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=x5,n=t.Buffer;function i(a,o){for(var c in a)o[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(a,o,c){return n(a,o,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,c)},s.alloc=function(a,o,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return o!==void 0?typeof c=="string"?u.fill(o,c):u.fill(o):u.fill(0),u},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(pM,pM.exports);var W0=pM.exports,R8e={}.toString,N8e=Array.isArray||function(r){return R8e.call(r)=="[object Array]"},w5=TypeError,sZ=Object,O8e=Error,k8e=EvalError,D8e=RangeError,B8e=ReferenceError,aZ=SyntaxError,$8e=URIError,L8e=Math.abs,U8e=Math.floor,F8e=Math.max,j8e=Math.min,q8e=Math.pow,V8e=Math.round,z8e=Number.isNaN||function(e){return e!==e},H8e=z8e,W8e=function(e){return H8e(e)||e===0?e:e<0?-1:1},K8e=Object.getOwnPropertyDescriptor,p3=K8e;if(p3)try{p3([],"length")}catch{p3=null}var E5=p3,y3=Object.defineProperty||!1;if(y3)try{y3({},"a",{value:1})}catch{y3=!1}var o9=y3,PE,tL;function oZ(){return tL||(tL=1,PE=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),PE}var TE,rL;function G8e(){if(rL)return TE;rL=1;var r=typeof Symbol<"u"&&Symbol,e=oZ();return TE=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},TE}var CE,nL;function cZ(){return nL||(nL=1,CE=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),CE}var IE,iL;function uZ(){if(iL)return IE;iL=1;var r=sZ;return IE=r.getPrototypeOf||null,IE}var Q8e="Function.prototype.bind called on incompatible ",Z8e=Object.prototype.toString,J8e=Math.max,Y8e="[object Function]",sL=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},X8e=function(e,t){for(var n=[],i=t,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},eve=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},tve=function(e){var t=this;if(typeof t!="function"||Z8e.apply(t)!==Y8e)throw new TypeError(Q8e+t);for(var n=X8e(arguments,1),i,s=function(){if(this instanceof i){var f=t.apply(this,sL(n,arguments));return Object(f)===f?f:this}return t.apply(e,sL(n,arguments))},a=J8e(0,t.length-n.length),o=[],c=0;c<a;c++)o[c]="$"+c;if(i=Function("binder","return function ("+eve(o,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,i.prototype=new u,u.prototype=null}return i},rve=tve,A5=Function.prototype.bind||rve,LR=Function.prototype.call,UR=Function.prototype.apply,nve=typeof Reflect<"u"&&Reflect&&Reflect.apply,ive=A5,sve=UR,ave=LR,ove=nve,fZ=ove||ive.call(ave,sve),cve=A5,uve=w5,fve=LR,lve=fZ,FR=function(e){if(e.length<1||typeof e[0]!="function")throw new uve("a function is required");return lve(cve,fve,e)},RE,aL;function dve(){if(aL)return RE;aL=1;var r=FR,e=E5,t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return RE=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,RE}var NE,oL;function lZ(){if(oL)return NE;oL=1;var r=cZ(),e=uZ(),t=dve();return NE=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,NE}var OE,cL;function hve(){if(cL)return OE;cL=1;const r=(async function(){}).constructor;return OE=()=>r,OE}var kE,uL;function pve(){if(uL)return kE;uL=1;const r=(function*(){}).constructor;return kE=()=>r,kE}var DE,fL;function yve(){if(fL)return DE;fL=1;const r=(async function*(){}).constructor;return DE=()=>r,DE}var BE,lL;function mve(){if(lL)return BE;lL=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=A5;return BE=t.call(r,e),BE}var bt,bve=sZ,gve=O8e,vve=k8e,xve=D8e,wve=B8e,zm=aZ,X1=w5,Eve=$8e,Ave=L8e,_ve=U8e,Sve=F8e,Mve=j8e,Pve=q8e,Tve=V8e,Cve=W8e,c2=E5,Ive=o9,$E=function(){throw new X1},Rve=c2?function(){try{return arguments.callee,$E}catch{try{return c2(arguments,"callee").get}catch{return $E}}}():$E,Gp=G8e()(),In=lZ(),Nve=uZ(),Ove=cZ(),dZ=UR,_5=LR,s1={},kve=typeof Uint8Array>"u"||!In?bt:In(Uint8Array),Ph={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?bt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?bt:ArrayBuffer,"%ArrayIteratorPrototype%":Gp&&In?In([][Symbol.iterator]()):bt,"%AsyncFromSyncIteratorPrototype%":bt,"%AsyncFunction%":s1,"%AsyncGenerator%":s1,"%AsyncGeneratorFunction%":s1,"%AsyncIteratorPrototype%":s1,"%Atomics%":typeof Atomics>"u"?bt:Atomics,"%BigInt%":typeof BigInt>"u"?bt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?bt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?bt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?bt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":gve,"%eval%":eval,"%EvalError%":vve,"%Float16Array%":typeof Float16Array>"u"?bt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?bt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?bt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?bt:FinalizationRegistry,"%Function%":Function,"%GeneratorFunction%":s1,"%Int8Array%":typeof Int8Array>"u"?bt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?bt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?bt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Gp&&In?In(In([][Symbol.iterator]())):bt,"%JSON%":typeof JSON=="object"?JSON:bt,"%Map%":typeof Map>"u"?bt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Gp||!In?bt:In(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":bve,"%Object.getOwnPropertyDescriptor%":c2,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?bt:Promise,"%Proxy%":typeof Proxy>"u"?bt:Proxy,"%RangeError%":xve,"%ReferenceError%":wve,"%Reflect%":typeof Reflect>"u"?bt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?bt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Gp||!In?bt:In(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?bt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Gp&&In?In(""[Symbol.iterator]()):bt,"%Symbol%":Gp?Symbol:bt,"%SyntaxError%":zm,"%ThrowTypeError%":Rve,"%TypedArray%":kve,"%TypeError%":X1,"%Uint8Array%":typeof Uint8Array>"u"?bt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?bt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?bt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?bt:Uint32Array,"%URIError%":Eve,"%WeakMap%":typeof WeakMap>"u"?bt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?bt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?bt:WeakSet,"%Function.prototype.call%":_5,"%Function.prototype.apply%":dZ,"%Object.defineProperty%":Ive,"%Object.getPrototypeOf%":Nve,"%Math.abs%":Ave,"%Math.floor%":_ve,"%Math.max%":Sve,"%Math.min%":Mve,"%Math.pow%":Pve,"%Math.round%":Tve,"%Math.sign%":Cve,"%Reflect.getPrototypeOf%":Ove};if(In)try{null.error}catch(r){var Dve=In(In(r));Ph["%Error.prototype%"]=Dve}var Bve=hve(),$ve=pve(),Lve=yve(),Uve=function r(e){var t;if(e==="%AsyncFunction%")t=Bve()||void 0;else if(e==="%GeneratorFunction%")t=$ve()||void 0;else if(e==="%AsyncGeneratorFunction%")t=Lve()||void 0;else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&In&&(t=In(i.prototype))}return Ph[e]=t,t},dL={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},S5=A5,Yx=mve(),Fve=S5.call(_5,Array.prototype.concat),jve=S5.call(dZ,Array.prototype.splice),hL=S5.call(_5,String.prototype.replace),Xx=S5.call(_5,String.prototype.slice),qve=S5.call(_5,RegExp.prototype.exec),Vve=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,zve=/\\(\\)?/g,Hve=function(e){var t=Xx(e,0,1),n=Xx(e,-1);if(t==="%"&&n!=="%")throw new zm("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new zm("invalid intrinsic syntax, expected opening `%`");var i=[];return hL(e,Vve,function(s,a,o,c){i[i.length]=o?hL(c,zve,"$1"):a||s}),i},Wve=function(e,t){var n=e,i;if(Yx(dL,n)&&(i=dL[n],n="%"+i[0]+"%"),Yx(Ph,n)){var s=Ph[n];if(s===s1&&(s=Uve(n)),typeof s>"u"&&!t)throw new X1("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new zm("intrinsic "+e+" does not exist!")},hZ=function(e,t){if(typeof e!="string"||e.length===0)throw new X1("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new X1('"allowMissing" argument must be a boolean');if(qve(/^%?[^%]*%?$/,e)===null)throw new zm("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Hve(e),i=n.length>0?n[0]:"",s=Wve("%"+i+"%",t),a=s.name,o=s.value,c=!1,u=s.alias;u&&(i=u[0],jve(n,Fve([0,1],u)));for(var f=1,l=!0;f<n.length;f+=1){var d=n[f],h=Xx(d,0,1),y=Xx(d,-1);if((h==='"'||h==="'"||h==="`"||y==='"'||y==="'"||y==="`")&&h!==y)throw new zm("property names with quotes must have matching quotes");if((d==="constructor"||!l)&&(c=!0),i+="."+d,a="%"+i+"%",Yx(Ph,a))o=Ph[a];else if(o!=null){if(!(d in o)){if(!t)throw new X1("base intrinsic for "+e+" exists, but the property is not available.");return}if(c2&&f+1>=n.length){var p=c2(o,d);l=!!p,l&&"get"in p&&!("originalValue"in p.get)?o=p.get:o=o[d]}else l=Yx(o,d),o=o[d];l&&!c&&(Ph[a]=o)}}return o},pZ=hZ,yZ=FR,Kve=yZ([pZ("%String.prototype.indexOf%")]),mZ=function(e,t){var n=pZ(e,!!t);return typeof n=="function"&&Kve(e,".prototype.")>-1?yZ([n]):n},LE,pL;function Gve(){if(pL)return LE;pL=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,n;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},e(function(){throw 42},null,t)}catch(v){v!==n&&(e=null)}else e=null;var i=/^\s*class\b/,s=function(b){try{var _=r.call(b);return i.test(_)}catch{return!1}},a=function(b){try{return s(b)?!1:(r.call(b),!0)}catch{return!1}},o=Object.prototype.toString,c="[object Object]",u="[object Function]",f="[object GeneratorFunction]",l="[object HTMLAllCollection]",d="[object HTML document.all class]",h="[object HTMLCollection]",y=typeof Symbol=="function"&&!!Symbol.toStringTag,p=!(0 in[,]),g=function(){return!1};if(typeof document=="object"){var m=document.all;o.call(m)===o.call(document.all)&&(g=function(b){if((p||!b)&&(typeof b>"u"||typeof b=="object"))try{var _=o.call(b);return(_===l||_===d||_===h||_===c)&&b("")==null}catch{}return!1})}return LE=e?function(b){if(g(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;try{e(b,null,t)}catch(_){if(_!==n)return!1}return!s(b)&&a(b)}:function(b){if(g(b))return!0;if(!b||typeof b!="function"&&typeof b!="object")return!1;if(y)return a(b);if(s(b))return!1;var _=o.call(b);return _!==u&&_!==f&&!/^\[object HTML/.test(_)?!1:a(b)},LE}var UE,yL;function Qve(){if(yL)return UE;yL=1;var r=Gve(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,n=function(c,u,f){for(var l=0,d=c.length;l<d;l++)t.call(c,l)&&(f==null?u(c[l],l,c):u.call(f,c[l],l,c))},i=function(c,u,f){for(var l=0,d=c.length;l<d;l++)f==null?u(c.charAt(l),l,c):u.call(f,c.charAt(l),l,c)},s=function(c,u,f){for(var l in c)t.call(c,l)&&(f==null?u(c[l],l,c):u.call(f,c[l],l,c))};function a(o){return e.call(o)==="[object Array]"}return UE=function(c,u,f){if(!r(u))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=f),a(c)?n(c,u,l):typeof c=="string"?i(c,u,l):s(c,u,l)},UE}var FE,mL;function Zve(){return mL||(mL=1,FE=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),FE}var jE,bL;function Jve(){if(bL)return jE;bL=1;var r=Zve(),e=typeof globalThis>"u"?Ht:globalThis;return jE=function(){for(var n=[],i=0;i<r.length;i++)typeof e[r[i]]=="function"&&(n[n.length]=r[i]);return n},jE}var qE={exports:{}},VE,gL;function Yve(){if(gL)return VE;gL=1;var r=o9,e=aZ,t=w5,n=E5;return VE=function(s,a,o){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,l=arguments.length>6?arguments[6]:!1,d=!!n&&n(s,a);if(r)r(s,a,{configurable:f===null&&d?d.configurable:!f,enumerable:c===null&&d?d.enumerable:!c,value:o,writable:u===null&&d?d.writable:!u});else if(l||!c&&!u&&!f)s[a]=o;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},VE}var zE,vL;function Xve(){if(vL)return zE;vL=1;var r=o9,e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},zE=e,zE}var HE,xL;function e3e(){if(xL)return HE;xL=1;var r=hZ,e=Yve(),t=Xve()(),n=E5,i=w5,s=r("%Math.floor%");return HE=function(o,c){if(typeof o!="function")throw new i("`fn` is not a function");if(typeof c!="number"||c<0||c>4294967295||s(c)!==c)throw new i("`length` must be a positive 32-bit integer");var u=arguments.length>2&&!!arguments[2],f=!0,l=!0;if("length"in o&&n){var d=n(o,"length");d&&!d.configurable&&(f=!1),d&&!d.writable&&(l=!1)}return(f||l||!u)&&(t?e(o,"length",c,!0,!0):e(o,"length",c)),o},HE}var WE,wL;function t3e(){if(wL)return WE;wL=1;var r=A5,e=UR,t=fZ;return WE=function(){return t(r,e,arguments)},WE}var EL;function r3e(){return EL||(EL=1,function(r){var e=e3e(),t=o9,n=FR,i=t3e();r.exports=function(a){var o=n(arguments),c=a.length-(arguments.length-1);return e(o,1+(c>0?c:0),!0)},t?t(r.exports,"apply",{value:i}):r.exports.apply=i}(qE)),qE.exports}var KE,AL;function n3e(){if(AL)return KE;AL=1;var r=oZ();return KE=function(){return r()&&!!Symbol.toStringTag},KE}var GE,_L;function i3e(){if(_L)return GE;_L=1;var r=Qve(),e=Jve(),t=r3e(),n=mZ,i=E5,s=lZ(),a=n("Object.prototype.toString"),o=n3e()(),c=typeof globalThis>"u"?Ht:globalThis,u=e(),f=n("String.prototype.slice"),l=n("Array.prototype.indexOf",!0)||function(g,m){for(var v=0;v<g.length;v+=1)if(g[v]===m)return v;return-1},d={__proto__:null};o&&i&&s?r(u,function(p){var g=new c[p];if(Symbol.toStringTag in g&&s){var m=s(g),v=i(m,Symbol.toStringTag);if(!v&&m){var b=s(m);v=i(b,Symbol.toStringTag)}d["$"+p]=t(v.get)}}):r(u,function(p){var g=new c[p],m=g.slice||g.set;m&&(d["$"+p]=t(m))});var h=function(g){var m=!1;return r(d,function(v,b){if(!m)try{"$"+v(g)===b&&(m=f(b,1))}catch{}}),m},y=function(g){var m=!1;return r(d,function(v,b){if(!m)try{v(g),m=f(b,1)}catch{}}),m};return GE=function(g){if(!g||typeof g!="object")return!1;if(!o){var m=f(a(g),8,-1);return l(u,m)>-1?m:m!=="Object"?!1:y(g)}return i?h(g):null},GE}var QE,SL;function s3e(){if(SL)return QE;SL=1;var r=i3e();return QE=function(t){return!!r(t)},QE}var a3e=w5,o3e=mZ,c3e=o3e("TypedArray.prototype.buffer",!0),u3e=s3e(),f3e=c3e||function(e){if(!u3e(e))throw new a3e("Not a Typed Array");return e.buffer},xo=W0.Buffer,l3e=N8e,d3e=f3e,h3e=ArrayBuffer.isView||function(e){try{return d3e(e),!0}catch{return!1}},p3e=typeof Uint8Array<"u",bZ=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",y3e=bZ&&(xo.prototype instanceof Uint8Array||xo.TYPED_ARRAY_SUPPORT),m3e=function(e,t){if(xo.isBuffer(e))return e.constructor&&!("isBuffer"in e)?xo.from(e):e;if(typeof e=="string")return xo.from(e,t);if(bZ&&h3e(e)){if(e.byteLength===0)return xo.alloc(0);if(y3e){var n=xo.from(e.buffer,e.byteOffset,e.byteLength);if(n.byteLength===e.byteLength)return n}var i=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s=xo.from(i);if(s.length===e.byteLength)return s}if(p3e&&e instanceof Uint8Array)return xo.from(e);var a=l3e(e);if(a)for(var o=0;o<e.length;o+=1){var c=e[o];if(typeof c!="number"||c<0||c>255||~~c!==c)throw new RangeError("Array items must be numbers in the range 0-255.")}if(a||xo.isBuffer(e)&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))return xo.from(e);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},b3e=W0.Buffer,g3e=m3e;function c9(r,e){this._block=b3e.alloc(r),this._finalSize=e,this._blockSize=r,this._len=0}c9.prototype.update=function(r,e){r=g3e(r,e||"utf8");for(var t=this._block,n=this._blockSize,i=r.length,s=this._len,a=0;a<i;){for(var o=s%n,c=Math.min(i-a,n-o),u=0;u<c;u++)t[o+u]=r[a+u];s+=c,a+=c,s%n===0&&this._update(t)}return this._len+=i,this};c9.prototype.digest=function(r){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var t=this._len*8;if(t<=4294967295)this._block.writeUInt32BE(t,this._blockSize-4);else{var n=(t&4294967295)>>>0,i=(t-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var s=this._hash();return r?s.toString(r):s};c9.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var _6=c9,v3e=cu,gZ=_6,x3e=W0.Buffer,w3e=[1518500249,1859775393,-1894007588,-899497514],E3e=new Array(80);function M5(){this.init(),this._w=E3e,gZ.call(this,64,56)}v3e(M5,gZ);M5.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function A3e(r){return r<<5|r>>>27}function _3e(r){return r<<30|r>>>2}function S3e(r,e,t,n){return r===0?e&t|~e&n:r===2?e&t|e&n|t&n:e^t^n}M5.prototype._update=function(r){for(var e=this._w,t=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=r.readInt32BE(o*4);for(;o<80;++o)e[o]=e[o-3]^e[o-8]^e[o-14]^e[o-16];for(var c=0;c<80;++c){var u=~~(c/20),f=A3e(t)+S3e(u,n,i,s)+a+e[c]+w3e[u]|0;a=s,s=i,i=_3e(n),n=t,t=f}this._a=t+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};M5.prototype._hash=function(){var r=x3e.allocUnsafe(20);return r.writeInt32BE(this._a|0,0),r.writeInt32BE(this._b|0,4),r.writeInt32BE(this._c|0,8),r.writeInt32BE(this._d|0,12),r.writeInt32BE(this._e|0,16),r};var M3e=M5,P3e=cu,vZ=_6,T3e=W0.Buffer,C3e=[1518500249,1859775393,-1894007588,-899497514],I3e=new Array(80);function P5(){this.init(),this._w=I3e,vZ.call(this,64,56)}P3e(P5,vZ);P5.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function R3e(r){return r<<1|r>>>31}function N3e(r){return r<<5|r>>>27}function O3e(r){return r<<30|r>>>2}function k3e(r,e,t,n){return r===0?e&t|~e&n:r===2?e&t|e&n|t&n:e^t^n}P5.prototype._update=function(r){for(var e=this._w,t=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=0;o<16;++o)e[o]=r.readInt32BE(o*4);for(;o<80;++o)e[o]=R3e(e[o-3]^e[o-8]^e[o-14]^e[o-16]);for(var c=0;c<80;++c){var u=~~(c/20),f=N3e(t)+k3e(u,n,i,s)+a+e[c]+C3e[u]|0;a=s,s=i,i=O3e(n),n=t,t=f}this._a=t+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0};P5.prototype._hash=function(){var r=T3e.allocUnsafe(20);return r.writeInt32BE(this._a|0,0),r.writeInt32BE(this._b|0,4),r.writeInt32BE(this._c|0,8),r.writeInt32BE(this._d|0,12),r.writeInt32BE(this._e|0,16),r};var D3e=P5,B3e=cu,xZ=_6,$3e=W0.Buffer,L3e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],U3e=new Array(64);function T5(){this.init(),this._w=U3e,xZ.call(this,64,56)}B3e(T5,xZ);T5.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function F3e(r,e,t){return t^r&(e^t)}function j3e(r,e,t){return r&e|t&(r|e)}function q3e(r){return(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10)}function V3e(r){return(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7)}function z3e(r){return(r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3}function H3e(r){return(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10}T5.prototype._update=function(r){for(var e=this._w,t=this._a|0,n=this._b|0,i=this._c|0,s=this._d|0,a=this._e|0,o=this._f|0,c=this._g|0,u=this._h|0,f=0;f<16;++f)e[f]=r.readInt32BE(f*4);for(;f<64;++f)e[f]=H3e(e[f-2])+e[f-7]+z3e(e[f-15])+e[f-16]|0;for(var l=0;l<64;++l){var d=u+V3e(a)+F3e(a,o,c)+L3e[l]+e[l]|0,h=q3e(t)+j3e(t,n,i)|0;u=c,c=o,o=a,a=s+d|0,s=i,i=n,n=t,t=d+h|0}this._a=t+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=o+this._f|0,this._g=c+this._g|0,this._h=u+this._h|0};T5.prototype._hash=function(){var r=$3e.allocUnsafe(32);return r.writeInt32BE(this._a,0),r.writeInt32BE(this._b,4),r.writeInt32BE(this._c,8),r.writeInt32BE(this._d,12),r.writeInt32BE(this._e,16),r.writeInt32BE(this._f,20),r.writeInt32BE(this._g,24),r.writeInt32BE(this._h,28),r};var wZ=T5,W3e=cu,K3e=wZ,G3e=_6,Q3e=W0.Buffer,Z3e=new Array(64);function u9(){this.init(),this._w=Z3e,G3e.call(this,64,56)}W3e(u9,K3e);u9.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};u9.prototype._hash=function(){var r=Q3e.allocUnsafe(28);return r.writeInt32BE(this._a,0),r.writeInt32BE(this._b,4),r.writeInt32BE(this._c,8),r.writeInt32BE(this._d,12),r.writeInt32BE(this._e,16),r.writeInt32BE(this._f,20),r.writeInt32BE(this._g,24),r};var J3e=u9,Y3e=cu,EZ=_6,X3e=W0.Buffer,ML=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],exe=new Array(160);function C5(){this.init(),this._w=exe,EZ.call(this,128,112)}Y3e(C5,EZ);C5.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function PL(r,e,t){return t^r&(e^t)}function TL(r,e,t){return r&e|t&(r|e)}function CL(r,e){return(r>>>28|e<<4)^(e>>>2|r<<30)^(e>>>7|r<<25)}function IL(r,e){return(r>>>14|e<<18)^(r>>>18|e<<14)^(e>>>9|r<<23)}function txe(r,e){return(r>>>1|e<<31)^(r>>>8|e<<24)^r>>>7}function rxe(r,e){return(r>>>1|e<<31)^(r>>>8|e<<24)^(r>>>7|e<<25)}function nxe(r,e){return(r>>>19|e<<13)^(e>>>29|r<<3)^r>>>6}function ixe(r,e){return(r>>>19|e<<13)^(e>>>29|r<<3)^(r>>>6|e<<26)}function Mn(r,e){return r>>>0<e>>>0?1:0}C5.prototype._update=function(r){for(var e=this._w,t=this._ah|0,n=this._bh|0,i=this._ch|0,s=this._dh|0,a=this._eh|0,o=this._fh|0,c=this._gh|0,u=this._hh|0,f=this._al|0,l=this._bl|0,d=this._cl|0,h=this._dl|0,y=this._el|0,p=this._fl|0,g=this._gl|0,m=this._hl|0,v=0;v<32;v+=2)e[v]=r.readInt32BE(v*4),e[v+1]=r.readInt32BE(v*4+4);for(;v<160;v+=2){var b=e[v-30],_=e[v-15*2+1],C=txe(b,_),N=rxe(_,b);b=e[v-2*2],_=e[v-2*2+1];var x=nxe(b,_),I=ixe(_,b),$=e[v-7*2],j=e[v-7*2+1],O=e[v-16*2],E=e[v-16*2+1],S=N+j|0,A=C+$+Mn(S,N)|0;S=S+I|0,A=A+x+Mn(S,I)|0,S=S+E|0,A=A+O+Mn(S,E)|0,e[v]=A,e[v+1]=S}for(var w=0;w<160;w+=2){A=e[w],S=e[w+1];var P=TL(t,n,i),k=TL(f,l,d),D=CL(t,f),T=CL(f,t),M=IL(a,y),L=IL(y,a),K=ML[w],Y=ML[w+1],re=PL(a,o,c),ne=PL(y,p,g),ae=m+L|0,ie=u+M+Mn(ae,m)|0;ae=ae+ne|0,ie=ie+re+Mn(ae,ne)|0,ae=ae+Y|0,ie=ie+K+Mn(ae,Y)|0,ae=ae+S|0,ie=ie+A+Mn(ae,S)|0;var fe=T+k|0,oe=D+P+Mn(fe,T)|0;u=c,m=g,c=o,g=p,o=a,p=y,y=h+ae|0,a=s+ie+Mn(y,h)|0,s=i,h=d,i=n,d=l,n=t,l=f,f=ae+fe|0,t=ie+oe+Mn(f,ae)|0}this._al=this._al+f|0,this._bl=this._bl+l|0,this._cl=this._cl+d|0,this._dl=this._dl+h|0,this._el=this._el+y|0,this._fl=this._fl+p|0,this._gl=this._gl+g|0,this._hl=this._hl+m|0,this._ah=this._ah+t+Mn(this._al,f)|0,this._bh=this._bh+n+Mn(this._bl,l)|0,this._ch=this._ch+i+Mn(this._cl,d)|0,this._dh=this._dh+s+Mn(this._dl,h)|0,this._eh=this._eh+a+Mn(this._el,y)|0,this._fh=this._fh+o+Mn(this._fl,p)|0,this._gh=this._gh+c+Mn(this._gl,g)|0,this._hh=this._hh+u+Mn(this._hl,m)|0};C5.prototype._hash=function(){var r=X3e.allocUnsafe(64);function e(t,n,i){r.writeInt32BE(t,i),r.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),r};var AZ=C5,sxe=cu,axe=AZ,oxe=_6,cxe=W0.Buffer,uxe=new Array(160);function f9(){this.init(),this._w=uxe,oxe.call(this,128,112)}sxe(f9,axe);f9.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};f9.prototype._hash=function(){var r=cxe.allocUnsafe(48);function e(t,n,i){r.writeInt32BE(t,i),r.writeInt32BE(n,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),r};var fxe=f9;(function(r){r.exports=function(t){var n=t.toLowerCase(),i=r.exports[n];if(!i)throw new Error(n+" is not supported (we accept pull requests)");return new i},r.exports.sha=M3e,r.exports.sha1=D3e,r.exports.sha224=J3e,r.exports.sha256=wZ,r.exports.sha384=fxe,r.exports.sha512=AZ})(iZ);var lxe=iZ.exports;const _Z=so(lxe);function dxe(r,e={}){const{segmentLength:t=4,separator:n="__",termLength:i=2}=e;return r.split(n).reduce((o,c)=>{const u=c.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),f=u.length>1?i:t,l=u.map(d=>d.substr(0,f)).join("");return o.push(l),o},[]).join(n)}function hxe(r,e={}){const t=_Z("sha1");t.update(r,"utf8");const n=t.digest("hex");return e.length?n.slice(0,e.length):n}let pxe=class{static isGreaterOrEqual(e,t){if(!e)return!1;const n=RL(e),i=RL(t);for(let s=0;s<n.length&&s<i.length;s++){if(n[s]>i[s])return!0;if(n[s]<i[s])return!1}return!0}};function RL(r){return r.split(".").map(e=>parseInt(e,10))}let Ke=class{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return pxe.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){const i=t&&t.joiner?t.joiner:"_",s=n.length===1?n[0]:n.join(i);if(e&&e>0&&s.length>e){if(t&&t.shorten===!0){const a=dxe(s);if(a.length<e)return a}return hxe(s,{length:e})}return s}static buildColumnAlias({maxAliasLength:e},t,...n){return typeof t=="string"?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),s=i.indexOf("/"),a=s!==-1?i.substr(0,s):i;let o=s!==-1?i.substr(s+1):void 0;o&&o.indexOf("?")!==-1&&(o=o.substr(0,o.indexOf("?")));const c=a.lastIndexOf("@"),u=a.substr(0,c),f=a.substr(c+1);let l=u,d="";const h=u.indexOf(":");h!==-1&&(l=u.substr(0,h),d=u.substr(h+1));const[y,p]=f.split(":");return{type:t,host:y,username:decodeURIComponent(l),password:decodeURIComponent(d),port:p?parseInt(p):void 0,database:o||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),s=i.indexOf("/"),a=s!==-1?i.substr(0,s):i;let o=s!==-1?i.substr(s+1):void 0,c="",u,f,l,d;const h={};if(o&&o.indexOf("?")!==-1){c=o.substr(o.indexOf("?")+1,o.length);const C=c.split("&");let N,x;C.forEach(I=>{N=I.split("=")[0],x=I.split("=")[1],h[N]=x}),d=h.replicaSet,o=o.substr(0,o.indexOf("?"))}const y=a.lastIndexOf("@"),p=a.substr(0,y),g=a.substr(y+1);let m=p,v="";const b=p.indexOf(":");b!==-1&&(m=p.substr(0,b),v=p.substr(b+1)),d?l=g:[u,f]=g.split(":");const _={type:t,host:u,hostReplicaSet:l,username:decodeURIComponent(m),password:decodeURIComponent(v),port:f?parseInt(f):void 0,database:o||void 0};for(const[C,N]of Object.entries(h))_[C]=N;return _}},SZ=class{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,n&&Lr.assign(this,n)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){const e=()=>{for(const t of this.queryExpressionMap.selects)if(t.selection===this.alias.name||this.metadata&&this.metadata.columns.find(n=>t.selection===this.alias.name+"."+n.propertyPath))return!0;return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(Bc.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(Bc.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){const e=()=>{if(!Bc.isAliasProperty(this.entityOrProperty))return;const t=this.queryExpressionMap.findAliasByName(this.parentAlias);let n=t.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(n||t.metadata.parentEntityMetadata&&(n=t.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),n))return n;throw new Fe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new Fe("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new Fe("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?Ke.buildAlias(this.connection.driver,void 0,e,this.alias.name):Ke.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}},jR=class{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,Lr.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new Fe(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}},qR=class{constructor(e,t){this.expressionMap=e,Lr.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),i=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!i)throw new Fe(`Relation with property path ${t} in entity was not found.`);return i}get metadata(){if(!Bc.isAliasProperty(this.relationName))throw new Fe("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}},yxe=class MZ{constructor(e){var t;this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=((t=e.options)==null?void 0:t.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&typeof e.target=="function"&&(t=e.target.name),!t&&typeof e.target=="string"&&(t=e.target);const n=new eL;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find(n=>n.name===e);if(!t)throw new Fe(`"${e}" alias was not found. Maybe you forgot to join it?`);return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new Fe("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new Fe(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return e}clone(){const e=new MZ(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map(t=>t),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(t=>e.aliases.push(new eL(t))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map(t=>new SZ(this.connection,this,t)),e.relationIdAttributes=this.relationIdAttributes.map(t=>new jR(this,t)),e.relationCountAttributes=this.relationCountAttributes.map(t=>new qR(this,t)),e.wheres=this.wheres.map(t=>({...t})),e.havings=this.havings.map(t=>({...t})),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map(t=>t),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map(t=>({alias:t.alias,queryBuilder:typeof t.queryBuilder=="string"?t.queryBuilder:t.queryBuilder.clone(),options:t.options})),e}},NL=class{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}},yM=class{static transformFrom(e,t){return Array.isArray(e)?e.slice().reverse().reduce((i,s)=>s.from(i),t):e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce((n,i)=>i.to(n),t):e.to(t)}},ew=class PZ{constructor(e,t,n=!0,i=!1,s,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=i,this._getSql=s,this._objectLiteralParameters=a}get useParameter(){return tr.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return tr.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return tr.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return tr.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(tr.isFindOperator(this._value))return this._value}get getSql(){return tr.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof PZ?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(t=>e&&yM.transformTo(e,t)):yM.transformTo(e,this._value)}};function mxe(r){return new ew("in",r,!0,!0)}const bxe=/[.*+\-?^${}()|[\]\\]/g,gxe=r=>r.replace(bxe,"\\$&");let ra=class Iu{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,tr.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new yxe(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}static registerQueryBuilderClass(e,t){Iu.queryBuilderRegistry[e]=t}get alias(){if(!this.expressionMap.mainAlias)throw new Fe("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){return this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map(n=>({selection:n})):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]),tr.isSelectQueryBuilder(this)?this:Iu.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",tr.isInsertQueryBuilder(this)?this:Iu.queryBuilderRegistry.InsertQueryBuilder(this)}update(e,t){const n=t||e;if(e=tr.isEntitySchema(e)?e.options.name:e,typeof e=="function"||typeof e=="string"){const i=this.createFromAlias(e);this.expressionMap.setMainAlias(i)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=n,tr.isUpdateQueryBuilder(this)?this:Iu.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",tr.isDeleteQueryBuilder(this)?this:Iu.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",tr.isSoftDeleteQueryBuilder(this)?this:Iu.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",tr.isSoftDeleteQueryBuilder(this)?this:Iu.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(e,t){const n=arguments.length===2?e:void 0,i=arguments.length===2?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=i,n){const s=this.createFromAlias(n);this.expressionMap.setMainAlias(s)}return tr.isRelationQueryBuilder(this)?this:Iu.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every(s=>!!n.findRelationWithPropertyPath(s))}hasParameter(e){var t;return((t=this.parentQueryBuilder)==null?void 0:t.hasParameter(e))||e in this.expressionMap.parameters}setParameter(e,t){if(typeof t=="function")throw new Fe(`Function parameter isn't supported in the parameters. Please check "${e}" parameter.`);if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new Fe("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do t=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(t));return this.setParameter(t,e),`:${t}`}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach(t=>{this.expressionMap.nativeParameters[t]=e[t]}),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter(i=>i.discriminatorColumn).map(i=>i.discriminatorValue);n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(e){return new this.constructor(this.connection,e??this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map(t=>t===""?t:this.escape(t)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new Fe('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}else{if(typeof e=="string"){const s=e.substr(0,1)==="("&&e.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:t,tablePath:s?void 0:e,subQuery:s?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const i=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:i})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const s of this.expressionMap.aliases){if(!s.hasMetadata)continue;const a=this.expressionMap.aliasNamePrefixingEnabled&&s.name?`${s.name}.`:"";t[a]||(t[a]={});for(const o of s.metadata.relations)o.joinColumns.length>0&&(t[a][o.propertyPath]=o.joinColumns[0].databaseName);for(const o of s.metadata.relations){const c=[...o.joinColumns,...o.inverseJoinColumns];for(const u of c){const f=`${o.propertyPath}.${u.referencedColumn.propertyPath}`;t[a][f]=u.databaseName}}for(const o of s.metadata.columns)t[a][o.databaseName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyPath]=o.databaseName}const n=Object.keys(t),i=n.map(s=>gxe(s)).join("|");return n.length>0&&(e=e.replace(new RegExp(`([ =(]|^.{0})${i?"("+i+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...s)=>{let a,o,c;if(i){if(a=s[0],o=s[1],c=s[3],t[s[2]][c])return`${o}${this.escape(s[2].substring(0,s[2].length-1))}.${this.escape(t[s[2]][c])}`}else if(a=s[0],o=s[1],c=s[2],t[""][c])return`${o}${this.escape(t[""][c])}`;return a})),e}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&t!=="1=1"&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&i.deleteDateColumn){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.deleteDateColumn.propertyName:i.deleteDateColumn.propertyName,a=`${this.replacePropertyNames(s)} IS NULL`;e.push(a)}if(i.discriminatorColumn&&i.parentEntityMetadata){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.discriminatorColumn.databaseName:i.discriminatorColumn.databaseName,a=`${this.replacePropertyNames(s)} IN (:...discriminatorColumnValues)`;e.push(a)}}if(this.expressionMap.extraAppendedAndWhereCondition){const i=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(i)}let n="";return n+=this.createTimeTravelQuery(),e.length?e.length===1?n+=` WHERE ${e[0]}`:n+=` WHERE ( ${e.join(" ) AND ( ")} )`:n+="",n}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter(i=>t.indexOf(i)===-1)),t.length){let i=t.map(s=>{const a=this.escape(s.databaseName);return n.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+a:this.escape(this.getMainTableName())+"."+a:a}).join(", ");return n.options.type==="oracle"&&(i+=" INTO "+t.map(s=>this.createParameter({type:n.columnTypeToNativeParameter(s.type),dir:n.oracle.BIND_OUT})).join(", ")),n.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(i+=" INTO @OutputTable"),i}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))}),e}createWhereClausesExpression(e){return e.map((t,n)=>{const i=this.createWhereConditionExpression(t.condition);switch(t.type){case"and":return(n>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(n>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`}return i}).join(" ").trim()}createWhereConditionExpression(e,t=!1){if(typeof e=="string")return e;if(Array.isArray(e))return e.length===0?"1=1":e.length===1&&!t?this.createWhereClausesExpression(e):"("+this.createWhereClausesExpression(e)+")";const{driver:n}=this.connection;switch(e.operator){case"lessThan":return`${e.parameters[0]} < ${e.parameters[1]}`;case"lessThanOrEqual":return`${e.parameters[0]} <= ${e.parameters[1]}`;case"arrayContains":return`${e.parameters[0]} @> ${e.parameters[1]}`;case"jsonContains":return`${e.parameters[0]} ::jsonb @> ${e.parameters[1]}`;case"arrayContainedBy":return`${e.parameters[0]} <@ ${e.parameters[1]}`;case"arrayOverlap":return`${e.parameters[0]} && ${e.parameters[1]}`;case"moreThan":return`${e.parameters[0]} > ${e.parameters[1]}`;case"moreThanOrEqual":return`${e.parameters[0]} >= ${e.parameters[1]}`;case"notEqual":return`${e.parameters[0]} != ${e.parameters[1]}`;case"equal":return`${e.parameters[0]} = ${e.parameters[1]}`;case"ilike":return n.options.type==="postgres"||n.options.type==="cockroachdb"?`${e.parameters[0]} ILIKE ${e.parameters[1]}`:`UPPER(${e.parameters[0]}) LIKE UPPER(${e.parameters[1]})`;case"like":return`${e.parameters[0]} LIKE ${e.parameters[1]}`;case"between":return`${e.parameters[0]} BETWEEN ${e.parameters[1]} AND ${e.parameters[2]}`;case"in":return e.parameters.length<=1?"0=1":`${e.parameters[0]} IN (${e.parameters.slice(1).join(", ")})`;case"any":return n.options.type==="cockroachdb"?`${e.parameters[0]}::STRING = ANY(${e.parameters[1]}::STRING[])`:`${e.parameters[0]} = ANY(${e.parameters[1]})`;case"isNull":return`${e.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(e.condition)})`;case"brackets":return`${this.createWhereConditionExpression(e.condition,!0)}`;case"and":return"("+e.parameters.join(" AND ")+")";case"or":return"("+e.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${ew.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{let i=typeof n.queryBuilder=="string"?n.queryBuilder:"";if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new Fe(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(i=n.queryBuilder.getQuery(),!this.connection.driver.cteCapabilities.writable&&!tr.isSelectQueryBuilder(n.queryBuilder))throw new Fe(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let s=this.escape(n.alias);if(n.options.columnNames){const c=n.options.columnNames.map(u=>this.escape(u));if(tr.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new Fe(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);s+=`(${c.join(", ")})`}const a=n.options.recursive&&e?"RECURSIVE":"";let o="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(o=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,s,"AS",o,`(${i})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map(i=>t.ensureEntityIdMap(i));if(!t.hasMultiplePrimaryKeys){const i=t.primaryColumns[0];if(!i.transformer&&!i.relationMetadata&&!i.embeddedMetadata)return{[i.propertyName]:mxe(n.map(s=>i.getEntityValue(s,!1)))}}return new NL(i=>{for(const s of n)i.orWhere(new NL(a=>a.where(s)))})}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${t.getQuery()})`,t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],i=e.split(".");for(;i.length>1;){const o=i[0];if(!(t!=null&&t.hasMetadata))break;if(t.metadata.hasEmbeddedWithPropertyPath(o)){i.unshift(`${i.shift()}.${i.shift()}`);continue}if(t.metadata.hasRelationWithPropertyPath(o)){const c=this.expressionMap.joinAttributes.find(u=>u.relationPropertyPath===o);if(!(c!=null&&c.alias)){const u=n.length>0?`${n.join(".")}.${o}`:o;throw new Error(`Cannot find alias for relation at ${u}`)}t=c.alias,n.push(...o.split(".")),i.shift();continue}break}if(!t)throw new Error(`Cannot find alias for property ${e}`);const s=i.join("."),a=t.metadata.findColumnsWithPropertyPath(s);if(!a.length)throw new Rl(e,t.metadata);return[t,n,a]}createPropertyPath(e,t,n=""){const i=[];for(const s of Object.keys(t)){const a=n?`${n}.${s}`:s;if(t[s]===null||typeof t[s]!="object"||tr.isFindOperator(t[s])){i.push(a);continue}if(e.hasEmbeddedWithPropertyPath(a)){const o=this.createPropertyPath(e,t[s],a);i.push(...o);continue}if(e.hasRelationWithPropertyPath(a)){const o=e.findRelationWithPropertyPath(a);if(o.relationType==="one-to-one"||o.relationType==="many-to-one"){const l=o.joinColumns.map(h=>h.referencedColumn).filter(h=>!!h);if(l.length>0&&l.every(h=>h.getEntityValue(t[s],!1))){i.push(a);continue}}if(o.relationType==="one-to-many"||o.relationType==="many-to-many")throw new Error(`Cannot query across ${o.relationType} for property ${a}`);const c=o.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(l=>l.getEntityValue(t[s],!1))){const l=c.map(d=>`${a}.${d.propertyPath}`);i.push(...l);continue}const f=this.createPropertyPath(o.inverseEntityMetadata,t[s]).map(l=>`${a}.${l}`);i.push(...f);continue}i.push(a)}return i}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[i,s,a]=this.findColumnsForPropertyPath(n);for(const o of a){let c=e;for(const l of s){if(!c||!(l in c)){c={};break}c=c[l]}const u=this.expressionMap.aliasNamePrefixingEnabled?`${i.name}.${o.propertyPath}`:o.propertyPath,f=o.getEntityValue(c,!0);yield[u,f]}}}else for(const t of Object.keys(e)){const n=e[t];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${t}`:t,n]}}getWherePredicateCondition(e,t){if(tr.isFindOperator(t)){const n=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const i of t.value)n.push(this.createParameter(i));else n.push(this.createParameter(t.value));if(t.type==="raw")return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if(t.type==="not")return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...n]};if(t.type==="and"){const i=t.value;return{operator:t.type,parameters:i.map(s=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,s)))}}else if(t.type==="or"){const i=t.value;return{operator:t.type,parameters:i.map(s=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,s)))}}else return{operator:t.type,parameters:[e,...n]}}else return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if(typeof e=="string")return e;if(tr.isBrackets(e)){const i=this.createQueryBuilder();return i.parentQueryBuilder=this,i.expressionMap.mainAlias=this.expressionMap.mainAlias,i.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,i.expressionMap.parameters=this.expressionMap.parameters,i.expressionMap.nativeParameters=this.expressionMap.nativeParameters,i.expressionMap.wheres=[],e.whereFactory(i),{operator:tr.isNotBrackets(e)?"not":"brackets",condition:i.expressionMap.wheres}}if(typeof e=="function")return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const i of t){const s=[];for(const[a,o]of this.getPredicates(i))s.push({type:"and",condition:this.getWherePredicateCondition(a,o)});n.push({type:"or",condition:s})}return n.length===1?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}};ra.queryBuilderRegistry={};let vxe=class{static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}},xxe=class extends ra{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const s=await n.query(e,t,!0),a=vxe.from(s);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),i&&await n.commitTransaction(),a}catch(s){if(i)try{await n.rollbackTransaction()}catch{}throw s}finally{n!==this.queryRunner&&await n.release()}}from(e,t){e=tr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new a9;return this.expressionMap.returning=e,this}createDeleteExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createWhereExpression(),n=this.createReturningExpression("delete");return n===""?`DELETE FROM ${e}${t}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${e} OUTPUT ${n}${t}`:`DELETE FROM ${e}${t} RETURNING ${n}`}};const Zn=[];for(let r=0;r<256;++r)Zn.push((r+256).toString(16).slice(1));function wxe(r,e=0){return(Zn[r[e+0]]+Zn[r[e+1]]+Zn[r[e+2]]+Zn[r[e+3]]+"-"+Zn[r[e+4]]+Zn[r[e+5]]+"-"+Zn[r[e+6]]+Zn[r[e+7]]+"-"+Zn[r[e+8]]+Zn[r[e+9]]+"-"+Zn[r[e+10]]+Zn[r[e+11]]+Zn[r[e+12]]+Zn[r[e+13]]+Zn[r[e+14]]+Zn[r[e+15]]).toLowerCase()}let ZE;const Exe=new Uint8Array(16);function Axe(){if(!ZE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ZE=crypto.getRandomValues.bind(crypto)}return ZE(Exe)}const _xe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),OL={randomUUID:_xe};function Sxe(r,e,t){var i;if(OL.randomUUID&&!r)return OL.randomUUID();r=r||{};const n=r.random??((i=r.rng)==null?void 0:i.call(r))??Axe();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,wxe(n)}let kL=class{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}},DL=class{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.raw,t}},VR=class{constructor(e,t){this.queryRunner=e,this.expressionMap=t}async update(e,t){const n=this.expressionMap.mainAlias.metadata;await Promise.all(t.map(async(i,s)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce((c,u,f)=>(c[this.expressionMap.extraReturningColumns[f].databaseName]=u[0],c),{}));const a=Array.isArray(e.raw)?e.raw[s]:e.raw,o=this.queryRunner.connection.driver.createGeneratedMap(n,a);o&&(this.queryRunner.manager.merge(n.target,i,o),e.generatedMaps.push(o))}else{const a=this.expressionMap.extraReturningColumns;if(a.length>0){const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(i);if(!o)throw new Fe("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(u=>n.targetName+"."+u.propertyPath)).addSelect(a.map(u=>n.targetName+"."+u.propertyPath)).from(n.target,n.targetName).where(o).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(n.target,i,c),e.generatedMaps.push(c))}}}))}async insert(e,t){const n=this.expressionMap.mainAlias.metadata;let i=n.getInsertionReturningColumns();const s=this.queryRunner.connection.driver.isReturningSqlSupported("insert");i=i.filter(o=>o.isGenerated?s===!0:!0);const a=t.map((o,c)=>{this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce((l,d,h)=>(l[this.expressionMap.extraReturningColumns[h].databaseName]=d[0],l),{}));const u=Array.isArray(e.raw)?e.raw[c]:e.raw,f=this.queryRunner.connection.driver.createGeneratedMap(n,u,c,t.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(n.target,f,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(n.target,o,f),f});if(i.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const o=t.map(u=>{const f=n.getEntityIdMap(u);if(!f)throw new Fe("Cannot update entity because entity id is not set in the entity.");return f}),c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(u=>n.targetName+"."+u.propertyPath)).addSelect(i.map(u=>n.targetName+"."+u.propertyPath)).from(n.target,n.targetName).where(o).setOption("create-pojo").getMany();t.forEach((u,f)=>{this.queryRunner.manager.merge(n.target,a[f],c[f]),this.queryRunner.manager.merge(n.target,u,c[f])})}t.forEach((o,c)=>{const u=n.getEntityIdMap(o);e.identifiers.push(u),e.generatedMaps.push(a[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion||e.isDeleteDate)}},Mxe=class extends ra{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.getValueSets();if(e.length===0)return new DL;const t=this.obtainQueryRunner();let n=!1;try{if(this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const y=new kL;e.forEach(p=>{t.broadcaster.broadcastBeforeInsertEvent(y,this.expressionMap.mainAlias.metadata,p)}),await y.wait()}let i=null,s=null;const a=new VR(t,this.expressionMap),o=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const y of this.expressionMap.returning)o.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(y));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(e.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),o.push(...this.expressionMap.extraReturningColumns.filter(y=>!o.includes(y)))),o.length>0&&this.connection.driver.options.type==="mssql"&&(i=this.connection.driver.buildTableVariableDeclaration("@OutputTable",o),s="SELECT * FROM @OutputTable");const[c,u]=this.getQueryAndParameters(),l=[i,c,s].filter(y=>y!=null).join(`;

`),d=await t.query(l,u,!0),h=DL.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await a.insert(h,e),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const y=new kL;e.forEach(p=>{t.broadcaster.broadcastAfterInsertEvent(y,this.expressionMap.mainAlias.metadata,p)}),await y.wait()}return n&&await t.commitTransaction(),h}catch(i){if(n)try{await t.rollbackTransaction()}catch{}throw i}finally{t!==this.queryRunner&&await t.release()}}into(e,t){e=tr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e);return this.expressionMap.setMainAlias(n),this.expressionMap.insertColumns=t||[],this}values(e){return this.expressionMap.valuesSet=e,this}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new a9;return this.expressionMap.returning=e,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}onConflict(e){return this.expressionMap.onConflict=e,this}orIgnore(e=!0){return this.expressionMap.onIgnore=!!e,this}orUpdate(e,t,n){return Array.isArray(e)?(this.expressionMap.onUpdate={overwrite:e,conflict:t,skipUpdateIfNoValuesChanged:n==null?void 0:n.skipUpdateIfNoValuesChanged,indexPredicate:n==null?void 0:n.indexPredicate,upsertType:n==null?void 0:n.upsertType},this):(this.expressionMap.onUpdate={conflict:e==null?void 0:e.conflict_target,columns:e==null?void 0:e.columns,overwrite:e==null?void 0:e.overwrite,skipUpdateIfNoValuesChanged:n==null?void 0:n.skipUpdateIfNoValuesChanged,upsertType:n==null?void 0:n.upsertType},this)}createInsertExpression(){var a,o;const e=this.getTableName(this.getMainTableName()),t=this.createValuesExpression(),n=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),i=this.createColumnNamesExpression();let s="INSERT ";if(((a=this.expressionMap.onUpdate)==null?void 0:a.upsertType)==="primary-key"&&(s="UPSERT "),(Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(s+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),s+=`INTO ${e}`,this.alias!==this.getMainTableName()&&Ke.isPostgresFamily(this.connection.driver)&&(s+=` AS "${this.alias}"`),i?s+=`(${i})`:!t&&(Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(s+="()"),n&&this.connection.driver.options.type==="mssql"&&(s+=` OUTPUT ${n}`),t?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?s+=` ${t}`:s+=` VALUES ${t}`:Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?s+=" VALUES ()":s+=" DEFAULT VALUES",((o=this.expressionMap.onUpdate)==null?void 0:o.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)s+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)s+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:c,columns:u,conflict:f,skipUpdateIfNoValuesChanged:l,indexPredicate:d}=this.expressionMap.onUpdate;let h="ON CONFLICT";if(Array.isArray(f)){if(h+=` ( ${f.map(p=>this.escape(p)).join(", ")} )`,d&&!Ke.isPostgresFamily(this.connection.driver))throw new Fe("indexPredicate option is not supported by the current database driver");d&&Ke.isPostgresFamily(this.connection.driver)&&(h+=` WHERE ( ${d} )`)}else f&&(h+=` ON CONSTRAINT ${this.escape(f)}`);const y=[];Array.isArray(c)?y.push(...c.map(p=>`${this.escape(p)} = EXCLUDED.${this.escape(p)}`)):u&&y.push(...u.map(p=>`${this.escape(p)} = :${p}`)),y.length>0&&(s+=` ${h} DO UPDATE SET `,y.push(...this.expressionMap.mainAlias.metadata.columns.filter(p=>p.isUpdateDate&&!(c!=null&&c.includes(p.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||Ke.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(p=>`${this.escape(p.databaseName)} = DEFAULT`)),s+=y.join(", ")),Array.isArray(c)&&l&&Ke.isPostgresFamily(this.connection.driver)&&(s+=" WHERE (",s+=c.map(p=>`${this.escape(this.alias)}.${this.escape(p)} IS DISTINCT FROM EXCLUDED.${this.escape(p)}`).join(" OR "),s+=") ")}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:c,columns:u}=this.expressionMap.onUpdate;Array.isArray(c)?(s+=" ON DUPLICATE KEY UPDATE ",s+=c.map(f=>`${this.escape(f)} = VALUES(${this.escape(f)})`).join(", "),s+=" "):Array.isArray(u)&&(s+=" ON DUPLICATE KEY UPDATE ",s+=u.map(f=>`${this.escape(f)} = :${f}`).join(", "),s+=" ")}}else if(this.expressionMap.onUpdate)throw new Fe("onUpdate is not supported by the current database driver")}return n&&(Ke.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||Ke.isMySQLFamily(this.connection.driver))&&(s+=` RETURNING ${n}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(c=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(c.propertyPath)!==-1:c.isInsert).some(c=>this.isOverridingAutoIncrementBehavior(c))&&(s=`SET IDENTITY_INSERT ${e} ON; ${s}; SET IDENTITY_INSERT ${e} OFF`),s}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(e=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(e.propertyPath)!==-1:!(!e.isInsert||e.isGenerated&&e.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!Ke.isSQLiteFamily(this.connection.driver)&&!Ke.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(e)))):[]}createColumnNamesExpression(){const e=this.getInsertedColumns();if(e.length>0)return e.map(t=>this.escape(t.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const t=this.getValueSets();if(t.length===1)return Object.keys(t[0]).map(n=>this.escape(n)).join(", ")}return this.expressionMap.insertColumns.map(t=>this.escape(t)).join(", ")}createValuesExpression(){const e=this.getValueSets(),t=this.getInsertedColumns();if(t.length>0){let n="";return e.forEach((i,s)=>{t.forEach((a,o)=>{o===0&&(this.connection.driver.options.type==="oracle"&&e.length>1||this.connection.driver.options.type==="sap"&&e.length>1?n+=" SELECT ":n+="(");let c=a.getEntityValue(i);if(typeof c!="function"&&(c=this.connection.driver.preparePersistentValue(c,a)),a.isVersion&&c===void 0)n+="1";else if(a.isDiscriminator)n+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(a.isGenerated&&a.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&c===void 0)c=Sxe(),n+=this.createParameter(c),s in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[s]={}),a.setEntityValue(this.expressionMap.locallyGenerated[s],c);else if(c===void 0)this.connection.driver.options.type==="oracle"&&e.length>1||Ke.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?a.default!==void 0&&a.default!==null?n+=this.connection.driver.normalizeDefault(a):n+="NULL":n+="DEFAULT";else if(c===null&&(this.connection.driver.options.type==="spanner"||this.connection.driver.options.type==="oracle"))n+="NULL";else if(typeof c=="function")n+=c();else{this.connection.driver.options.type==="mssql"&&(c=this.connection.driver.parametrizeValue(a,c));const u=this.createParameter(c);if((Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(a.type)!==-1){const l=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";a.srid!=null?n+=`${l}(${u}, ${a.srid})`:n+=`${l}(${u})`}else Ke.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(a.type)!==-1?a.srid!=null?n+=`ST_SetSRID(ST_GeomFromGeoJSON(${u}), ${a.srid})::${a.type}`:n+=`ST_GeomFromGeoJSON(${u})::${a.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(a.type)!==-1?n+=a.type+"::STGeomFromText("+u+", "+(a.srid||"0")+")":n+=u}o===t.length-1?s===e.length-1?this.connection.driver.options.type==="oracle"&&e.length>1?n+=" FROM DUAL ":this.connection.driver.options.type==="sap"&&e.length>1?n+=" FROM dummy ":n+=")":this.connection.driver.options.type==="oracle"&&e.length>1?n+=" FROM DUAL UNION ALL ":this.connection.driver.options.type==="sap"&&e.length>1?n+=" FROM dummy UNION ALL ":n+="), ":n+=", "})}),n==="()"?"":n}else{let n="";return e.forEach((i,s)=>{Object.keys(i).forEach((o,c)=>{c===0&&(n+="(");const u=i[o];typeof u=="function"?n+=u():u===void 0?this.connection.driver.options.type==="oracle"&&e.length>1||Ke.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?n+="NULL":n+="DEFAULT":u===null&&this.connection.driver.options.type==="spanner"||(n+=this.createParameter(u)),c===Object.keys(i).length-1?s===e.length-1?n+=")":n+="), ":n+=", "})}),n==="()"?"":n}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(Lr.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new P8e}isOverridingAutoIncrementBehavior(e){return e.isPrimary&&e.isGenerated&&e.generationStrategy==="increment"&&this.getValueSets().some(t=>e.getEntityValue(t)!==void 0&&e.getEntityValue(t)!==null)}},BL=class{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async update(e){const t=this.expressionMap.relationMetadata;if(t.isManyToOne||t.isOneToOneOwner){const n=t.joinColumns.reduce((i,s)=>{const a=Lr.isObject(e)?s.referencedColumn.getEntityValue(e):e;return s.setEntityValue(i,a),i},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(t.entityMetadata.target).set(n).whereInIds(this.expressionMap.of).execute()}else if((t.isOneToOneNotOwner||t.isOneToMany)&&e===null){const n={};t.inverseRelation.joinColumns.forEach(c=>{n[c.propertyName]=null});const i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],s={},a=[];i.forEach((c,u)=>{t.inverseRelation.joinColumns.map((f,l)=>{const d="joinColumn_"+u+"_"+l;s[d]=Lr.isObject(c)?f.referencedColumn.getEntityValue(c):c,a.push(`${f.propertyPath} = :${d}`)})});const o=a.map(c=>"("+c+")").join(" OR ");if(!o)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(n).where(o).setParameters(s).execute()}else if(t.isOneToOneNotOwner||t.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new Fe("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const n=this.expressionMap.of,i=t.inverseRelation.joinColumns.reduce((s,a)=>{const o=Lr.isObject(n)?a.referencedColumn.getEntityValue(n):n;return a.setEntityValue(s,o),s},{});if(!e||Array.isArray(e)&&!e.length)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(i).whereInIds(e).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],s=Array.isArray(e)?e:[e],a=t.isManyToManyOwner?i:s,o=t.isManyToManyOwner?s:i,c=[];if(a.forEach(u=>{o.forEach(f=>{const l={};n.ownerColumns.forEach(d=>{l[d.databaseName]=Lr.isObject(u)?d.referencedColumn.getEntityValue(u):u}),n.inverseColumns.forEach(d=>{l[d.databaseName]=Lr.isObject(f)?d.referencedColumn.getEntityValue(f):f}),c.push(l)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(u=>this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(u).execute())):await this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(c).execute()}}},Pxe=class{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async remove(e){const t=this.expressionMap.relationMetadata;if(t.isOneToMany){const n=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(e)?e:[e],s={};t.inverseRelation.joinColumns.forEach(u=>{s[u.propertyName]=null});const a={},o=[];n.forEach((u,f)=>{o.push(...i.map((l,d)=>[...t.inverseRelation.joinColumns.map((h,y)=>{const p="joinColumn_"+f+"_"+d+"_"+y;return a[p]=Lr.isObject(u)?h.referencedColumn.getEntityValue(u):u,`${h.propertyPath} = :${p}`}),...t.inverseRelation.entityMetadata.primaryColumns.map((h,y)=>{const p="primaryColumn_"+d+"_"+d+"_"+y;return a[p]=Lr.isObject(l)?h.getEntityValue(l):l,`${h.propertyPath} = :${p}`})].join(" AND ")))});const c=o.map(u=>"("+u+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(s).where(c).setParameters(a).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],s=Array.isArray(e)?e:[e],a=t.isManyToManyOwner?i:s,o=t.isManyToManyOwner?s:i,c={},u=[];a.forEach((l,d)=>{u.push(...o.map((h,y)=>[...n.ownerColumns.map((p,g)=>{const m="firstValue_"+d+"_"+y+"_"+g;return c[m]=Lr.isObject(l)?p.referencedColumn.getEntityValue(l):l,`${p.databaseName} = :${m}`}),...n.inverseColumns.map((p,g)=>{const m="secondValue_"+d+"_"+y+"_"+g;return c[m]=Lr.isObject(h)?p.referencedColumn.getEntityValue(h):h,`${p.databaseName} = :${m}`})].join(" AND ")))});const f=u.map(l=>"("+l+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(n.tableName).where(f).setParameters(c).execute()}}},Txe=class extends ra{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(e){return this.expressionMap.of=e,this}async set(e){const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new Fe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToMany||t.isOneToMany)throw new Fe(`Set operation is only supported for many-to-one and one-to-one relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .add() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!Lr.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new Fe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new BL(this,this.expressionMap).update(e)}async add(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new Fe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new Fe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!Lr.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new Fe('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new BL(this,this.expressionMap).update(e)}async remove(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new Fe("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new Fe(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set(null) method instead.`);return new Pxe(this,this.expressionMap).remove(e)}async addAndRemove(e,t){await this.remove(t),await this.add(e)}async loadOne(){return this.loadMany().then(e=>e[0])}async loadMany(){let e=this.expressionMap.of;if(!Lr.isObject(e)){const t=this.expressionMap.mainAlias.metadata;if(t.hasMultiplePrimaryKeys)throw new Fe("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");e=t.primaryColumns[0].createValueMap(e)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,e,this.queryRunner)}},ms=class mM{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),(n,i)=>e.slice(i*t,i*t+t))}static splitClassesAndStrings(e){return[e.filter(t=>typeof t!="string"),e.filter(t=>typeof t=="string")]}static groupBy(e,t){return e.reduce((n,i)=>{const s=t(i);let a=n.find(o=>o.id===s);return a||(a={id:s,items:[]},n.push(a)),a.items.push(i),n},[])}static uniq(e,t){return e.reduce((n,i)=>{let s=!1;if(typeof t=="function"){const a=t(i);s=!!n.find(o=>t(o)===a)}else typeof t=="string"?s=!!n.find(a=>a[t]===i[t]):s=n.indexOf(i)!==-1;return s||n.push(i),n},[])}static isPlainObject(e){return e==null?!1:!e.constructor||e.constructor===Object}static mergeArrayKey(e,t,n,i){if(i.has(n)){e[t]=i.get(n);return}if(!(n instanceof Promise)){if(!this.isPlainObject(n)&&!Array.isArray(n)){e[t]=n;return}e[t]||(e[t]=Array.isArray(n)?[]:{}),i.set(n,e[t]),this.merge(e[t],n,i),i.delete(n)}}static mergeObjectKey(e,t,n,i){if(i.has(n)){Object.assign(e,{[t]:i.get(n)});return}if(!(n instanceof Promise)){if(!this.isPlainObject(n)&&!Array.isArray(n)){Object.assign(e,{[t]:n});return}e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),i.set(n,e[t]),this.merge(e[t],n,i),i.delete(n)}}static merge(e,t,n=new Map){if(this.isPlainObject(e)&&this.isPlainObject(t))for(const i of Object.keys(t))i!=="__proto__"&&this.mergeObjectKey(e,i,t[i],n);if(Array.isArray(e)&&Array.isArray(t))for(let i=0;i<t.length;i++)this.mergeArrayKey(e,i,t[i],n)}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)mM.merge(e,n);return e}static deepCompare(...e){let t,n,i,s;if(arguments.length<1)return!0;for(t=1,n=arguments.length;t<n;t++)if(i=[],s=[],!this.compare2Objects(i,s,arguments[0],arguments[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let i=0,s=n.length;i<s;i++)e=e[n[i]];return e}static replaceEmptyObjectsWithBooleans(e){for(const t in e)e[t]&&typeof e[t]=="object"&&(Object.keys(e[t]).length===0?e[t]=!0:this.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){const t={};for(const n of e){const i=n.split(".");if(!i.length)continue;(!t[i[0]]||t[i[0]]===!0)&&(t[i[0]]={});let s=t[i[0]];for(const[a,o]of i.entries())a!==0&&(s[o]?s=s[o]:a===i.length-1?(s[o]={},s=null):(s[o]={},s=s[o]))}return this.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return e==null||t===void 0||t===null?!1:(typeof e.id=="string"&&typeof t.id=="string"||typeof e.id=="number"&&typeof t.id=="number")&&Object.keys(e).length===1&&Object.keys(t).length===1?e.id===t.id:mM.deepCompare(e,t)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e==="true"||e==="1":typeof e=="number"?e>0:!1}static zipObject(e,t){return e.reduce((n,i,s)=>(n[i]=t[s],n),{})}static isArraysEqual(e,t){return e.length!==t.length?!1:e.every(n=>t.indexOf(n)!==-1)}static areMutuallyExclusive(...e){return!e.some(n=>{const i=e.filter(s=>s!==n);return n.some(s=>i.some(a=>a.includes(s)))})}static parseSqlCheckExpression(e,t){const n=e.match(new RegExp(`"${t}" varchar CHECK\\s*\\(\\s*"${t}"\\s+IN\\s*`));if(n&&n.index){const s=e.substring(n.index+n[0].length);let a="",o="";const c=[];for(let u=0;u<s.length;u++){const f=s[u];switch(f){case",":a==""?(c.push(o),o=""):o+=f;break;case"'":a==f?s[u+1]===f?(o+=f,u+=1):a="":a=f;break;case")":if(a=="")return c.push(o),c;o+=f;break;default:a!=""&&(o+=f)}}}}static compare2Objects(e,t,n,i){let s;if(Number.isNaN(n)&&Number.isNaN(i)||n===i)return!0;if(n===null||i===null||n===void 0||i===void 0)return!1;if((typeof n.equals=="function"||typeof n.equals=="function")&&n.equals(i))return!0;if(typeof n=="function"&&typeof i=="function"||n instanceof Date&&i instanceof Date||n instanceof RegExp&&i instanceof RegExp||typeof n=="string"&&typeof i=="string"||typeof n=="number"&&typeof i=="number")return n.toString()===i.toString();if(!(typeof n=="object"&&typeof i=="object")||Object.prototype.isPrototypeOf.call(n,i)||Object.prototype.isPrototypeOf.call(i,n)||n.constructor!==i.constructor||n.prototype!==i.prototype||e.indexOf(n)>-1||t.indexOf(i)>-1)return!1;for(s in i){if(i.hasOwnProperty(s)!==n.hasOwnProperty(s))return!1;if(typeof i[s]!=typeof n[s])return!1}for(s in n){if(i.hasOwnProperty(s)!==n.hasOwnProperty(s))return!1;if(typeof i[s]!=typeof n[s])return!1;switch(typeof n[s]){case"object":case"function":if(e.push(n),t.push(i),!this.compare2Objects(e,t,n[s],i[s]))return!1;e.pop(),t.pop();break;default:if(n[s]!==i[s])return!1;break}}return!0}},Cxe=class{constructor(e,t,n,i,s){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=i,this.queryRunner=s,this.pojo=this.expressionMap.options.includes("create-pojo"),this.selections=new Set(this.expressionMap.selects.map(a=>a.selection)),this.aliasCache=new Map,this.columnsCache=new Map}transform(e,t){const n=this.group(e,t),i=[];for(const s of n.values()){const a=this.transformRawResultsGroup(s,t);a!==void 0&&i.push(a)}return i}buildAlias(e,t){let n=this.aliasCache.get(e);n||(n=new Map,this.aliasCache.set(e,n));let i=n.get(t);return i||(i=Ke.buildAlias(this.driver,void 0,e,t),n.set(t,i)),i}group(e,t){const n=new Map,i=[];t.metadata.tableType==="view"?i.push(...t.metadata.columns.map(s=>this.buildAlias(t.name,s.databaseName))):i.push(...t.metadata.primaryColumns.map(s=>this.buildAlias(t.name,s.databaseName)));for(const s of e){const a=i.map(c=>{const u=s[c];return Buffer.isBuffer(u)?u.toString("hex"):Lr.isObject(u)?JSON.stringify(u):u}).join("_"),o=n.get(a);o?o.push(s):n.set(a,[s])}return n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const f=e.map(d=>d[this.buildAlias(t.name,t.metadata.discriminatorColumn.databaseName)]),l=n.childEntityMetadatas.find(d=>typeof f.find(h=>h===d.discriminatorValue)<"u");l&&(n=l)}const i=n.create(this.queryRunner,{fromDeserializer:!0,pojo:this.pojo}),s=this.transformColumns(e,t,i,n),a=this.transformJoins(e,i,t,n),o=this.transformRelationIds(e,t,i,n),c=this.transformRelationCounts(e,t,i);if(s||n.primaryColumns.every(f=>f.isVirtual===!0)&&(a||o||c))return i}transformColumns(e,t,n,i){let s=!1;const a=e[0];for(const[o,c]of this.getColumnsToProcess(t.name,i)){const u=a[o];u!==void 0&&(u!==null&&!c.isVirtualProperty&&(s=!0),c.setEntityValue(n,this.driver.prepareHydratedValue(u,c)))}return s}transformJoins(e,t,n,i){let s=!1;for(const a of this.expressionMap.joinAttributes){if(!a.metadata||!a.isSelected||a.relation&&!i.relations.find(c=>c===a.relation))continue;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==n.name)continue}else if(!a.relation||a.parentAlias!==n.name||a.relationPropertyPath!==a.relation.propertyPath)continue;let o=this.transform(e,a.alias);o=a.isMany?o:o[0],o=!a.isMany&&o===void 0?null:o,o!==void 0&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=o:a.relation.setEntityValue(t,o),s=!0)}return s}transformRelationIds(e,t,n,i){let s=!1;for(const[a,o]of this.rawRelationIdResults.entries()){if(o.relationIdAttribute.parentAlias!==t.name)continue;const c=o.relationIdAttribute.relation,u=this.createValueMapFromJoinColumns(c,o.relationIdAttribute.parentAlias,e);if(u==null)continue;this.prepareDataForTransformRelationIds();const f=this.hashEntityIds(c,u),l=this.relationIdMaps[a][f]||[],d=o.relationIdAttribute.mapToPropertyPropertyPath.split("."),h=(y,p,g)=>{const m=y.shift();if(m&&y.length===0)return p[m]=g,p;if(m&&y.length>0)h(y,p[m],g);else return p};c.isOneToOne||c.isManyToOne?l[0]!==void 0&&(h(d,n,l[0]),s=!0):(h(d,n,l),s=s||l.length>0)}return s}transformRelationCounts(e,t,n){let i=!1;for(const s of this.rawRelationCountResults){if(s.relationCountAttribute.parentAlias!==t.name)continue;const a=s.relationCountAttribute.relation;let o;a.isOneToMany?o=a.inverseRelation.joinColumns[0].referencedColumn.databaseName:o=a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=e[0][this.buildAlias(t.name,o)];if(c!=null){n[s.relationCountAttribute.mapToPropertyPropertyName]=0;for(const u of s.results)u.parentId===c&&(n[s.relationCountAttribute.mapToPropertyPropertyName]=parseInt(u.cnt),i=!0)}}return i}getColumnsToProcess(e,t){let n=this.columnsCache.get(e);n||(n=new Map,this.columnsCache.set(e,n));let i=n.get(t);return i||(i=t.columns.filter(s=>!s.isVirtual&&(this.selections.has(e)||this.selections.has(`${e}.${s.propertyPath}`))&&!t.childEntityMetadatas.some(a=>a.target===s.target)).map(s=>[this.buildAlias(e,s.databaseName),s]),n.set(t,i)),i}createValueMapFromJoinColumns(e,t,n){let i;return e.isManyToOne||e.isOneToOneOwner?i=e.entityMetadata.primaryColumns.map(s=>s):e.isOneToMany||e.isOneToOneNotOwner?i=e.inverseRelation.joinColumns.map(s=>s):e.isOwning?i=e.joinColumns.map(s=>s):i=e.inverseRelation.inverseJoinColumns.map(s=>s),i.reduce((s,a)=>{for(const o of n)e.isManyToOne||e.isOneToOneOwner?s[a.databaseName]=this.driver.prepareHydratedValue(o[this.buildAlias(t,a.databaseName)],a):s[a.databaseName]=this.driver.prepareHydratedValue(o[this.buildAlias(t,a.referencedColumn.databaseName)],a.referencedColumn);return s},{})}extractEntityPrimaryIds(e,t){let n;return e.isManyToOne||e.isOneToOneOwner?n=e.entityMetadata.primaryColumns.map(i=>i):e.isOneToMany||e.isOneToOneNotOwner?n=e.inverseRelation.joinColumns.map(i=>i):e.isOwning?n=e.joinColumns.map(i=>i):n=e.inverseRelation.inverseJoinColumns.map(i=>i),n.reduce((i,s)=>(i[s.databaseName]=t[s.databaseName],i),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(e=>{const t=e.relationIdAttribute.relation;let n;return t.isManyToOne||t.isOneToOneOwner?n=t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?n=t.inverseEntityMetadata.primaryColumns:t.isOwning?n=t.inverseJoinColumns:n=t.inverseRelation.joinColumns,e.results.reduce((i,s)=>{let a=n.reduce((o,c)=>{let u=s[c.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(u=c.referencedColumn.createValueMap(u)),ms.mergeDeep(o,c.createValueMap(u))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(u=c.referencedColumn.referencedColumn.createValueMap(u)),ms.mergeDeep(o,c.referencedColumn.createValueMap(u)))},{});if(n.length===1&&!e.relationIdAttribute.disableMixedMap&&(t.isOneToMany||t.isOneToOneNotOwner?a=n[0].getEntityValue(a):a=n[0].referencedColumn.getEntityValue(a)),a!==void 0){const o=this.hashEntityIds(t,s);i[o]?i[o].push(a):i[o]=[a]}return i},{})}))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}},Ixe=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new Fe("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const i={},s=e.map(a=>{const o={},c=[];n.relation.joinColumns.forEach(f=>{o[f.databaseName]=this.connection.driver.prepareHydratedValue(a[Ke.buildAlias(this.connection.driver,void 0,n.parentAlias,f.databaseName)],f.referencedColumn);const l=`${f.databaseName}:${o[f.databaseName]}`;c.indexOf(l)===-1&&c.push(l)}),n.relation.entityMetadata.primaryColumns.forEach(f=>{o[f.databaseName]=this.connection.driver.prepareHydratedValue(a[Ke.buildAlias(this.connection.driver,void 0,n.parentAlias,f.databaseName)],f);const l=`${f.databaseName}:${o[f.databaseName]}`;c.indexOf(l)===-1&&c.push(l)}),c.sort();const u=c.join("::");return i[u]?null:(i[u]=!0,o)}).filter(a=>a);return{relationIdAttribute:n,results:s}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const i=n.relation,s=i.isOwning?i.joinColumns:i.inverseRelation.joinColumns,a=i.inverseEntityMetadata.target,o=i.inverseEntityMetadata.tableName,c=n.alias||o,u={},f={},l=e.map((p,g)=>{const m=[],v={},b=s.map(C=>{const N=C.databaseName+g,x=p[Ke.buildAlias(this.connection.driver,void 0,n.parentAlias,C.referencedColumn.databaseName)],I=`${c}:${C.propertyPath}:${x}`;return m.indexOf(I)!==-1?"":(m.push(I),v[N]=x,c+"."+C.propertyPath+" = :"+N)}).filter(C=>C).join(" AND ");m.sort();const _=m.join("::");return u[_]?"":(u[_]=!0,Object.assign(f,v),b)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!l)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);ms.uniq([...s,...i.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{d.addSelect(c+"."+p.propertyPath,p.databaseName)}),d.from(a,c).where("("+l+")").setParameters(f),n.queryBuilderFactory&&n.queryBuilderFactory(d);const y=await d.getRawMany();return y.forEach(p=>{s.forEach(g=>{p[g.databaseName]=this.connection.driver.prepareHydratedValue(p[g.databaseName],g.referencedColumn)}),i.inverseRelation.entityMetadata.primaryColumns.forEach(g=>{p[g.databaseName]=this.connection.driver.prepareHydratedValue(p[g.databaseName],g)})}),{relationIdAttribute:n,results:y}}else{const i=n.relation,s=i.isOwning?i.joinColumns:i.inverseRelation.inverseJoinColumns,a=i.isOwning?i.inverseJoinColumns:i.inverseRelation.joinColumns,o=n.junctionAlias,c=n.joinInverseSideMetadata.tableName,u=n.alias||c,f=i.isOwning?i.junctionEntityMetadata.tableName:i.inverseRelation.junctionEntityMetadata.tableName,l=e.map(b=>s.reduce((_,C)=>(_[C.propertyPath]=b[Ke.buildAlias(this.connection.driver,void 0,n.parentAlias,C.referencedColumn.databaseName)],_),{}));if(l.length===0)return{relationIdAttribute:n,results:[]};const d={},h={},y=l.map((b,_)=>{const C=[],N={},x=Object.keys(b).map($=>{const j=$+_,O=b[$],E=`${o}:${$}:${O}`;return C.indexOf(E)!==-1?"":(C.push(E),N[j]=O,o+"."+$+" = :"+j)}).filter($=>$).join(" AND ");C.sort();const I=C.join("::");return h[I]?"":(h[I]=!0,Object.assign(d,N),x)}).filter(b=>b),p=a.map(b=>o+"."+b.propertyPath+" = "+u+"."+b.referencedColumn.propertyPath).join(" AND "),g=y.map(b=>"("+b+" AND "+p+")").join(" OR "),m=this.connection.createQueryBuilder(this.queryRunner);a.forEach(b=>{m.addSelect(o+"."+b.propertyPath,b.databaseName).addOrderBy(o+"."+b.propertyPath)}),s.forEach(b=>{m.addSelect(o+"."+b.propertyPath,b.databaseName).addOrderBy(o+"."+b.propertyPath)}),m.from(c,u).innerJoin(f,o,g).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(m);const v=await m.getRawMany();return v.forEach(b=>{[...s,...a].forEach(_=>{b[_.databaseName]=this.connection.driver.prepareHydratedValue(b[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:v}}});return Promise.all(t)}},Rxe=class{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,n){const i=Array.isArray(t)?t:[t],s=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,i,s):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,i,s):this.loadForOneToManyAndOneToOneNotOwner(e,i,s)}async loadManyToManyRelationIdsAndGroup(e,t,n,i){const s=e.isManyToMany||e.isOneToMany,a=Array.isArray(t)?t:[t];if(!n&&(n=await this.connection.relationLoader.load(e,t,this.queryRunner,i),!n.length))return a.map(l=>({entity:l,related:s?[]:void 0}));const o=await this.load(e,t,n),c=Array.isArray(n)?n:[n];let u=[],f=[];return e.isManyToManyOwner?(u=e.junctionEntityMetadata.inverseColumns.map(l=>l.referencedColumn),f=e.junctionEntityMetadata.ownerColumns.map(l=>l.referencedColumn)):e.isManyToManyNotOwner?(u=e.junctionEntityMetadata.ownerColumns.map(l=>l.referencedColumn),f=e.junctionEntityMetadata.inverseColumns.map(l=>l.referencedColumn)):e.isManyToOne||e.isOneToOneOwner?(u=e.joinColumns.map(l=>l.referencedColumn),f=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(u=e.inverseRelation.entityMetadata.primaryColumns,f=e.inverseRelation.joinColumns.map(l=>l.referencedColumn)),a.map(l=>{const d={entity:l,related:s?[]:void 0},h=o.filter(y=>f.every(p=>p.compareEntityValue(l,y[p.entityMetadata.name+"_"+p.propertyAliasName])));return h.length&&c.forEach(y=>{h.forEach(p=>{u.every(m=>m.compareEntityValue(y,p[Ke.buildAlias(this.connection.driver,void 0,m.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+m.propertyPath.replace(".","_"))]))&&(s?d.related.push(y):d.related=y)})}),d})}loadForManyToMany(e,t,n){const i=e.junctionEntityMetadata,s=i.name,a=e.isOwning?i.ownerColumns:i.inverseColumns,o=e.isOwning?i.inverseColumns:i.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);a.forEach(d=>{const h=Ke.buildAlias(this.connection.driver,void 0,d.referencedColumn.entityMetadata.name+"_"+d.referencedColumn.propertyPath.replace(".","_"));c.addSelect(s+"."+d.propertyPath,h)}),o.forEach(d=>{const h=Ke.buildAlias(this.connection.driver,void 0,d.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+d.referencedColumn.propertyPath.replace(".","_"));c.addSelect(s+"."+d.propertyPath,h)});let u="";if(a.length===1){const d=t.map(y=>a[0].referencedColumn.getEntityValue(y));d.every(y=>typeof y=="number")?u=`${s}.${a[0].propertyPath} IN (${d.join(", ")})`:(c.setParameter("values1",d),u=s+"."+a[0].propertyPath+" IN (:...values1)")}else u="("+t.map((d,h)=>a.map(y=>{const p="entity1_"+h+"_"+y.propertyName;return c.setParameter(p,y.referencedColumn.getEntityValue(d)),s+"."+y.propertyPath+" = :"+p}).join(" AND ")).map(d=>"("+d+")").join(" OR ")+")";let f="";if(n)if(o.length===1){const d=n.map(y=>o[0].referencedColumn.getEntityValue(y));d.every(y=>typeof y=="number")?f=`${s}.${o[0].propertyPath} IN (${d.join(", ")})`:(c.setParameter("values2",d),f=s+"."+o[0].propertyPath+" IN (:...values2)")}else f="("+n.map((d,h)=>o.map(y=>{const p="entity2_"+h+"_"+y.propertyName;return c.setParameter(p,y.referencedColumn.getEntityValue(d)),s+"."+y.propertyPath+" = :"+p}).join(" AND ")).map(d=>"("+d+")").join(" OR ")+")";const l=[u,f].filter(d=>d.length>0).join(" AND ");return c.from(i.target,s).where(l).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const i=e.entityMetadata.targetName,s=e.joinColumns.every(c=>!!e.entityMetadata.nonVirtualColumns.find(u=>u===c));if(n&&s){const c=[];if(t.forEach(u=>{const f={};e.entityMetadata.primaryColumns.forEach(l=>{const d=l.entityMetadata.name+"_"+l.propertyPath.replace(".","_");f[d]=l.getEntityValue(u)}),n.forEach(l=>{e.joinColumns.forEach(d=>{const h=d.getEntityValue(u),y=d.referencedColumn.getEntityValue(l);if(!(h===void 0||y===void 0)&&h===y){const p=d.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+d.referencedColumn.propertyPath.replace(".","_");f[p]=y}})}),Object.keys(f).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&c.push(f)}),c.length===t.length)return Promise.resolve(c)}const a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const u=Ke.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));a.addSelect(i+"."+c.propertyPath,u)}),e.joinColumns.forEach(c=>{const u=Ke.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));a.addSelect(i+"."+c.propertyPath,u)});let o="";if(e.entityMetadata.primaryColumns.length===1){const c=t.map(f=>e.entityMetadata.primaryColumns[0].getEntityValue(f));c.every(f=>typeof f=="number")?o=`${i}.${e.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(a.setParameter("values",c),o=i+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else o=t.map((c,u)=>e.entityMetadata.primaryColumns.map((f,l)=>{const d="entity"+u+"_"+l;return a.setParameter(d,f.getEntityValue(c)),i+"."+f.propertyPath+" = :"+d}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return a.from(e.entityMetadata.target,i).where(o).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){const i=e;if(e=e.inverseRelation,e.entityMetadata.primaryColumns.length===e.joinColumns.length&&e.entityMetadata.primaryColumns.every(u=>e.joinColumns.indexOf(u)!==-1))return Promise.resolve(t.map(u=>{const f={};return e.joinColumns.forEach(function(l){const d=l.referencedColumn.getEntityValue(u),h=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),y=l.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");f[h]=d,f[y]=d}),f}));const s=e.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const u=Ke.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+c.propertyPath.replace(".","_"));a.addSelect(s+"."+c.propertyPath,u)}),e.joinColumns.forEach(c=>{const u=Ke.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+c.referencedColumn.propertyPath.replace(".","_"));a.addSelect(s+"."+c.propertyPath,u)});let o="";if(e.joinColumns.length===1){const c=t.map(f=>e.joinColumns[0].referencedColumn.getEntityValue(f));c.every(f=>typeof f=="number")?o=`${s}.${e.joinColumns[0].propertyPath} IN (${c.join(", ")})`:(a.setParameter("values",c),o=s+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else o=t.map((c,u)=>e.joinColumns.map((f,l)=>{const d="entity"+u+"_"+l;return a.setParameter(d,f.referencedColumn.getEntityValue(c)),s+"."+f.propertyPath+" = :"+d}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return a.from(e.entityMetadata.target,s).where(o).getRawMany()}},Nxe=class{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)})})}metadataToAttribute(e,t){return new jR(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}},Oxe=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(i,s,a)=>a.indexOf(i)===s,n=this.relationCountAttributes.map(async i=>{if(i.relation.isOneToMany){const s=i.relation,a=s.inverseRelation,o=a.joinColumns[0].referencedColumn.propertyName,c=s.inverseEntityMetadata.target,u=s.inverseEntityMetadata.tableName,f=i.alias||u,l=a.propertyName;let d=e.map(y=>y[i.parentAlias+"_"+o]).filter(y=>!!y);if(d=d.filter(t),d.length===0)return{relationCountAttribute:i,results:[]};const h=this.connection.createQueryBuilder(this.queryRunner);return h.select(f+"."+l,"parentId").addSelect("COUNT(*)","cnt").from(c,f).where(f+"."+l+" IN (:...ids)").addGroupBy(f+"."+l).setParameter("ids",d),i.queryBuilderFactory&&i.queryBuilderFactory(h),{relationCountAttribute:i,results:await h.getRawMany()}}else{let s,a,o,c;i.relation.isOwning?(s=i.relation.joinColumns[0].referencedColumn.databaseName,a=i.relation.inverseJoinColumns[0].referencedColumn.databaseName,o=i.relation.junctionEntityMetadata.columns[0],c=i.relation.junctionEntityMetadata.columns[1]):(s=i.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,a=i.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,o=i.relation.junctionEntityMetadata.columns[1],c=i.relation.junctionEntityMetadata.columns[0]);let u=e.map(g=>g[i.parentAlias+"_"+s]).filter(g=>!!g);if(u=u.filter(t),u.length===0)return{relationCountAttribute:i,results:[]};const f=i.junctionAlias,l=i.joinInverseSideMetadata.tableName,d=i.alias||l,h=i.relation.junctionEntityMetadata.tableName,y=f+"."+o.propertyName+" IN ("+u.map(g=>isNaN(g)?"'"+g+"'":g)+") AND "+f+"."+c.propertyName+" = "+d+"."+a,p=this.connection.createQueryBuilder(this.queryRunner);return p.select(f+"."+o.propertyName,"parentId").addSelect("COUNT("+p.escape(d)+"."+p.escape(a)+")","cnt").from(l,d).innerJoin(h,f,y).addGroupBy(f+"."+o.propertyName),i.queryBuilderFactory&&i.queryBuilderFactory(p),{relationCountAttribute:i,results:await p.getRawMany()}}});return Promise.all(n)}},kxe=class{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)})})}metadataToAttribute(e,t){return new qR(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}},Dxe=class TZ{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||typeof t.select=="object"||typeof t.relations=="object"||typeof t.where=="object"||typeof t.join=="object"||typeof t.order=="object"||typeof t.cache=="object"||typeof t.cache=="boolean"||typeof t.cache=="number"||typeof t.comment=="string"||typeof t.lock=="object"||typeof t.loadRelationIds=="object"||typeof t.loadRelationIds=="boolean"||typeof t.loadEagerRelations=="boolean"||typeof t.withDeleted=="boolean"||typeof t.relationLoadStrategy=="string"||typeof t.transaction=="boolean")}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||typeof t.skip=="number"||typeof t.take=="number"||typeof t.skip=="string"||typeof t.take=="string")}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(t!=null&&t.relations){const n=[...t.relations];if(TZ.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new T8e(n)}return e}static applyRelationsRecursively(e,t,n,i,s){let a=[];if(s){const o=new RegExp("^"+s.replace(".","\\.")+"\\.");a=t.filter(c=>c.match(o)).map(c=>i.findRelationWithPropertyPath(c.replace(o,""))).filter(c=>c)}else a=t.map(o=>i.findRelationWithPropertyPath(o)).filter(o=>o);a.forEach(o=>{const c=Ke.buildAlias(e.connection.driver,{joiner:"__"},n,o.propertyPath),u=n+"."+o.propertyPath;e.expressionMap.relationLoadStrategy==="query"?e.concatRelationMetadata(o):e.leftJoinAndSelect(u,c),t.splice(t.indexOf(s?s+"."+o.propertyPath:o.propertyPath),1);let f,l;if(e.expressionMap.relationLoadStrategy==="query")f=o.inverseEntityMetadata,l=c;else{const d=e.expressionMap.joinAttributes.find(h=>h.entityOrProperty===u);f=d.metadata,l=d.alias.name}if(!l||!f)throw new Rl(o.propertyPath,i);if(this.applyRelationsRecursively(e,t,l,f,s?s+"."+o.propertyPath:o.propertyPath),e.expressionMap.relationLoadStrategy==="join"){const d=i.relations.find(h=>h.propertyName===o.propertyPath);d&&this.joinEagerRelations(e,c,d.inverseEntityMetadata)}})}static joinEagerRelations(e,t,n){n.eagerRelations.forEach(i=>{let s=Ke.buildAlias(e.connection.driver,{joiner:"__"},t,i.propertyName),a=!0;for(const u of e.expressionMap.joinAttributes)if(!(u.condition!==void 0||u.mapToProperty!==void 0||u.isMappingMany!==void 0||u.direction!=="LEFT"||u.entityOrProperty!==`${t}.${i.propertyPath}`)){a=!1,s=u.alias.name;break}const o=!!e.expressionMap.joinAttributes.find(u=>u.alias.name===s);a&&!o&&e.leftJoin(t+"."+i.propertyPath,s);let c=!0;for(const u of e.expressionMap.selects)if(!(u.aliasName!==void 0||u.virtual!==void 0||u.selection!==s)){c=!1;break}c&&e.addSelect(s),this.joinEagerRelations(e,s,i.inverseEntityMetadata)})}},Bxe=class CZ extends ra{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map(n=>({selection:n}));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map(n=>({selection:n})));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,i){return this.join("INNER",e,t,n,i),this}leftJoin(e,t,n,i){return this.join("LEFT",e,t,n,i),this}innerJoinAndSelect(e,t,n,i){return this.addSelect(t),this.innerJoin(e,t,n,i),this}leftJoinAndSelect(e,t,n,i){return this.addSelect(t),this.leftJoin(e,t,n,i),this}innerJoinAndMapMany(e,t,n,i,s){return this.addSelect(n),this.join("INNER",t,n,i,s,e,!0),this}innerJoinAndMapOne(e,t,n,i,s,a){return this.addSelect(n),this.join("INNER",t,n,i,s,e,!1,a),this}leftJoinAndMapMany(e,t,n,i,s){return this.addSelect(n),this.join("LEFT",t,n,i,s,e,!0),this}leftJoinAndMapOne(e,t,n,i,s,a){return this.addSelect(n),this.join("LEFT",t,n,i,s,e,!1,a),this}loadRelationIdAndMap(e,t,n,i){const s=new jR(this.expressionMap);return s.mapToProperty=e,s.relationName=t,typeof n=="string"&&(s.alias=n),typeof n=="object"&&n.disableMixedMap&&(s.disableMixedMap=!0),s.queryBuilderFactory=i,this.expressionMap.relationIdAttributes.push(s),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,i){const s=new qR(this.expressionMap);return s.mapToProperty=e,s.relationName=t,s.alias=n,s.queryBuilderFactory=i,this.expressionMap.relationCountAttributes.push(s),this.expressionMap.createAlias({type:"other",name:s.junctionAlias}),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach(t=>{e!==void 0&&e.relations!==void 0&&e.relations.indexOf(t.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)}),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return e?this.expressionMap.groupBys=[e]:this.expressionMap.groupBys=[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return this.connection.driver.options.type==="cockroachdb"&&(e===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=e),this}orderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new Fe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new Fe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new Fe('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new Fe('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new Fe('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new Fe('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new Fe('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new Fe('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new nb;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const i=n.updateDateColumn.getEntityValue(t);if(i.getTime()!==this.expressionMap.lockVersion.getTime())throw new X$(n.name,this.expressionMap.lockVersion,i)}else{const i=n.versionColumn.getEntityValue(t);if(i!==this.expressionMap.lockVersion)throw new X$(n.name,this.expressionMap.lockVersion,i)}}return t===void 0?null:t}async getOneOrFail(){const e=await this.getOne();if(!e)throw new A8e(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new nb;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new nb;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new nb;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new nb;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;const i=this.expressionMap.cacheId;this.expressionMap.cacheId=i&&`${i}-count`;const s=await this.executeCountQuery(e),a=[n.entities,s];return t&&await e.commitTransaction(),a}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0);const s=()=>{if(n!==this.queryRunner)return n.release()},a=n.stream(e,t,s,s);return i&&await n.commitTransaction(),a}catch(s){if(i)try{await n.rollbackTransaction()}catch{}throw s}}cache(e,t){return typeof e=="boolean"?this.expressionMap.cache=e:typeof e=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):(typeof e=="string"||typeof e=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,i,s,a,o,c){s&&this.setParameters(s);const u=new SZ(this.connection,this.expressionMap);u.direction=e,u.mapAsEntity=c,u.mapToProperty=a,u.isMappingMany=o,u.entityOrProperty=t,u.condition=i,this.expressionMap.joinAttributes.push(u);const f=u.metadata;if(f){if(f.deleteDateColumn&&!this.expressionMap.withDeleted){const l=`${n}.${f.deleteDateColumn.propertyName} IS NULL`;u.condition=u.condition?` ${u.condition} AND ${l}`:`${l}`}u.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:f}),u.relation&&u.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:u.junctionAlias,metadata:u.relation.junctionEntityMetadata})}else{let l="";if(typeof t=="function"){const h=t(this.subQuery());this.setParameters(h.getParameters()),l=h.getQuery()}else l=t;const d=typeof t=="function"||t.substr(0,1)==="("&&t.substr(-1)===")";u.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:d===!1?t:void 0,subQuery:d===!0?l:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new Fe("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,o)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,o))}this.expressionMap.joinAttributes.forEach(o=>{if(o.metadata)e.push(...this.buildEscapedEntityColumnSelects(o.alias.name,o.metadata)),t.push(...this.findEntityColumnSelects(o.alias.name,o.metadata));else if(this.expressionMap.selects.some(u=>u.selection===o.alias.name)){e.push({selection:this.escape(o.alias.name)+".*"});const u=this.expressionMap.selects.find(f=>f.selection===o.alias.name);t.push(u)}}),this.expressionMap.selects.filter(o=>t.indexOf(o)===-1).forEach(o=>e.push({selection:this.replacePropertyNames(o.selection),aliasName:o.aliasName})),e.length===0&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&Ke.isMySQLFamily(this.connection.driver)&&(n=` USE INDEX (${this.expressionMap.useIndex})`);const i=this.expressionMap.aliases.filter(o=>o.type==="from"&&(o.tablePath||o.subQuery)).map(o=>o.subQuery?o.subQuery+" "+this.escape(o.name):this.getTableName(o.tablePath)+" "+this.escape(o.name)),s=this.createSelectDistinctExpression(),a=e.map(o=>o.selection+(o.aliasName?" AS "+this.escape(o.aliasName):"")).join(", ");return s+a+" FROM "+i.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:i}=this.connection;let s="SELECT ";return n>0&&Ke.isMySQLFamily(i)&&(s+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),Ke.isPostgresFamily(i)&&t.length>0?s=`SELECT DISTINCT ON (${t.map(o=>this.replacePropertyNames(o)).join(", ")}) `:e&&(s="SELECT DISTINCT "),s}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,i=t.tablePath,s=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const o=t.parentAlias;if(!o||!n){const c=t.alias.subQuery?t.alias.subQuery:this.getTableName(i);return" "+t.direction+" JOIN "+c+" "+this.escape(s)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const c=n.joinColumns.map(u=>s+"."+u.referencedColumn.propertyPath+"="+o+"."+n.propertyPath+"."+u.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const c=n.inverseRelation.joinColumns.map(u=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+s+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),s+"."+n.inverseRelation.propertyPath+"."+u.referencedColumn.propertyPath+"="+o+"."+u.referencedColumn.propertyPath)).join(" AND ");if(!c)throw new Fe(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+a)}else{const c=n.junctionEntityMetadata.tablePath,u=t.junctionAlias;let f="",l="";return n.isOwning?(f=n.joinColumns.map(d=>u+"."+d.propertyPath+"="+o+"."+d.referencedColumn.propertyPath).join(" AND "),l=n.inverseJoinColumns.map(d=>s+"."+d.referencedColumn.propertyPath+"="+u+"."+d.propertyPath).join(" AND ")):(f=n.inverseRelation.inverseJoinColumns.map(d=>u+"."+d.propertyPath+"="+o+"."+d.referencedColumn.propertyPath).join(" AND "),l=n.inverseRelation.joinColumns.map(d=>s+"."+d.referencedColumn.propertyPath+"="+u+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(c)+" "+this.escape(u)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(f)+" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length===0?"":" ORDER BY "+Object.keys(e).map(t=>{const n=typeof e[t]=="string"?e[t]:e[t].order+" "+e[t].nulls,i=this.expressionMap.selects.find(s=>s.selection===t);if(i&&!i.aliasName&&t.indexOf(".")!==-1){const s=t.split("."),a=s[0],o=s.slice(1).join("."),c=this.expressionMap.aliases.find(u=>u.name===a);if(c){const u=c.metadata.findColumnWithPropertyPath(o);if(u){const f=Ke.buildAlias(this.connection.driver,void 0,a,u.databaseName);return this.escape(f)+" "+n}}}return this.replacePropertyNames(t)+" "+n}).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;if(!e&&!t&&this.expressionMap.joinAttributes.length===0&&(e=this.expressionMap.skip,t=this.expressionMap.take),this.connection.driver.options.type==="mssql"){let n="";if((t||e)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(n=" ORDER BY (SELECT NULL)"),t&&e)return n+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return n+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return n+" OFFSET "+e+" ROWS"}else if(Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new I8e}else if(Ke.isSQLiteFamily(this.connection.driver)){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else if(this.connection.driver.options.type==="oracle"){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!(Ke.isPostgresFamily(e)||e.options.type==="cockroachdb"))throw new Fe("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new Fe("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch(this.expressionMap.onLocked==="nowait"?n=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(e.options.type==="mysql"||e.options.type==="aurora-mysql")return Ke.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if(e.options.type==="mariadb")return" LOCK IN SHARE MODE";if(Ke.isPostgresFamily(e))return" FOR SHARE"+t+n;if(e.options.type==="oracle")return" FOR UPDATE";if(e.options.type==="mssql")return"";throw new Kp;case"pessimistic_write":if(Ke.isMySQLFamily(e)||e.options.type==="aurora-mysql"||e.options.type==="oracle")return" FOR UPDATE"+n;if(Ke.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+n;if(e.options.type==="mssql")return"";throw new Kp;case"pessimistic_partial_write":if(Ke.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(Ke.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new Kp;case"pessimistic_write_or_fail":if(Ke.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+" NOWAIT";if(Ke.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new Kp;case"for_no_key_update":if(Ke.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+t+n;throw new Kp;case"for_key_share":if(Ke.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new Kp;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map((t,n)=>{switch(t.type){case"and":return(n>0?"AND ":"")+this.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+this.replacePropertyNames(t.condition);default:return this.replacePropertyNames(t.condition)}}).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some(u=>u.selection===e),i=[];if(n&&i.push(...t.columns.filter(u=>u.isSelect===!0)),i.push(...t.columns.filter(u=>this.expressionMap.selects.some(f=>f.selection===e+"."+u.propertyPath))),i.length===0)return[];const s=this.expressionMap.queryEntity?t.primaryColumns.filter(u=>i.indexOf(u)===-1):[],a=[...i,...s],o=[],c=this.escape(e);return a.forEach(u=>{let f=c+"."+this.escape(u.databaseName);u.isVirtualProperty&&u.query&&(f=`(${u.query(c)})`),this.connection.driver.spatialTypes.indexOf(u.type)!==-1&&((Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(f=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${f})`),Ke.isPostgresFamily(this.connection.driver)&&(u.precision?f=`ST_AsGeoJSON(${f}, ${u.precision})::json`:f=`ST_AsGeoJSON(${f})::json`),this.connection.driver.options.type==="mssql"&&(f=`${f}.ToString()`));const l=this.expressionMap.selects.filter(d=>d.selection===e+"."+u.propertyPath);l.length?l.forEach(d=>{o.push({selection:f,aliasName:d.aliasName?d.aliasName:Ke.buildAlias(this.connection.driver,void 0,e,u.databaseName),virtual:d.virtual})}):o.push({selection:f,aliasName:Ke.buildAlias(this.connection.driver,void 0,e,u.databaseName),virtual:n})}),o}findEntityColumnSelects(e,t){const n=this.expressionMap.selects.find(i=>i.selection===e);return n?[n]:this.expressionMap.selects.filter(i=>t.columns.some(s=>i.selection===e+"."+s.propertyPath))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,i=this.escape(e);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||Ke.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(s=>`${i}.${this.escape(s.databaseName)}`).join(", ")+"))";if(Ke.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(s=>`${i}.${this.escape(s.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const s=n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${s}))`:`COUNT(DISTINCT(CONCAT(${s})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${i}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(a=>`CAST(${i}.${this.escape(a.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(s=>`${i}.${this.escape(s.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return!n||!n[0]||!n[0].cnt?0:parseInt(n[0].cnt)}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?ms.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?ms.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(e=>{e.select&&!e.selection?e.type==="inner"?this.innerJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):e.type==="inner"?this.innerJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map(t=>{const n=this.expressionMap.aliases.find(i=>i.metadata.tableNameWithoutPrefix===t);if(!n)throw new Fe(`"${t}" is not part of this query`);return this.escape(n.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&Dxe.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new Fe('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!e.isTransactionActive)throw new C8e;if(this.expressionMap.lockMode==="optimistic"){const c=this.expressionMap.mainAlias.metadata;if(!c.versionColumn&&!c.updateDateColumn)throw new M8e(c.name)}const t=new Ixe(this.connection,e,this.expressionMap.relationIdAttributes),n=new Oxe(this.connection,e,this.expressionMap.relationCountAttributes);new Nxe(this.expressionMap).transform(),new kxe(this.expressionMap).transform();let a=[],o=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[c,u]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),f=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,d=f.primaryColumns.map(p=>{const g=this.escape("distinctAlias"),m=this.escape(Ke.buildAlias(this.connection.driver,void 0,l,p.databaseName));u[m]||(u[m]="ASC");const v=Ke.buildAlias(this.connection.driver,void 0,"ids_"+l,p.databaseName);return`${g}.${m} AS ${this.escape(v)}`}),h=this.clone(),y=h.expressionMap.timeTravel;if(a=await new CZ(this.connection,e).select(`DISTINCT ${d.join(", ")}`).addSelect(c).from(`(${h.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(y).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(u).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),a.length>0){let p="";const g={};if(f.hasMultiplePrimaryKeys)p=a.map((m,v)=>f.primaryColumns.map(b=>{const _=`orm_distinct_ids_${v}_${b.databaseName}`,C=Ke.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return g[_]=m[C],`${l}.${b.propertyPath}=:${_}`}).join(" AND ")).join(" OR ");else{const m=Ke.buildAlias(this.connection.driver,void 0,"ids_"+l,f.primaryColumns[0].databaseName),v=a.map(_=>_[m]);v.every(_=>typeof _=="number")?p=`${l}.${f.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(g.orm_distinct_ids=v,p=l+"."+f.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}a=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(g).loadRawResults(e)}}else a=await this.loadRawResults(e);if(a.length>0){const c=await t.load(a),u=await n.load(a);o=new Cxe(this.expressionMap,this.connection.driver,c,u,this.queryRunner).transform(a,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,o)}if(this.expressionMap.relationLoadStrategy==="query"){const c=new Rxe(this.connection,e);await Promise.all(this.relationMetadatas.map(async u=>{const f=u.inverseEntityMetadata.target,l=u.inverseEntityMetadata.targetName,d=Array.isArray(this.findOptions.select)?ms.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,h=Array.isArray(this.findOptions.relations)?ms.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,y=this.createQueryBuilder(e).select(l).from(f,l).setFindOptions({select:d?ms.deepValue(d,u.propertyPath):void 0,order:this.findOptions.order?ms.deepValue(this.findOptions.order,u.propertyPath):void 0,relations:h?ms.deepValue(h,u.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(o.length>0){const p=await c.loadManyToManyRelationIdsAndGroup(u,o,void 0,y);o.forEach(g=>{const m=p.find(v=>v.entity===g);if(m){const v=m.related===void 0?null:m.related;u.setEntityValue(g,v)}})}}))}return{raw:a,entities:o}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],c=a.slice(1).join("."),f=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(c);return this.escape(e)+"."+this.escape(Ke.buildAlias(this.connection.driver,void 0,o,f.databaseName))}else return this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?this.escape(e)+"."+this.escape(s):""}).join(", "),i={};return Object.keys(t).forEach(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],c=a.slice(1).join("."),f=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(c);i[this.escape(e)+"."+this.escape(Ke.buildAlias(this.connection.driver,void 0,o,f.databaseName))]=t[s]}else this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?i[this.escape(e)+"."+this.escape(s)]=t[s]:i[s]=t[s]}),[n,i]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),i=t+" -- PARAMETERS: "+JSON.stringify(n,(f,l)=>typeof l=="bigint"?l.toString():l),s=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let a;const o=s.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&o)try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:i,duration:this.expressionMap.cacheDuration||s.duration||1e3},e),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(f){if(!s.ignoreErrors)throw f;c=!0}const u=await e.query(t,n,!0);if(!c&&this.connection.queryResultCache&&o)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:i,time:new Date().getTime(),duration:this.expressionMap.cacheDuration||s.duration||1e3,result:JSON.stringify(u.records)},a,e)}catch(f){if(!s.ignoreErrors)throw f}return u.records}mergeExpressionMap(e){return Lr.assign(this.expressionMap,e),this}normalizeNumber(e){return typeof e=="number"||e===void 0||e===null?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(e,t,n,i){for(const s in e){if(e[s]===void 0||e[s]===!1)continue;const a=i?i+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),c=t.findEmbeddedWithPropertyPath(a),u=t.findRelationWithPropertyPath(a);if(!c&&!o&&!u)throw new Rl(a,t);o?this.selects.push(n+"."+a):c&&this.buildSelect(e[s],t,n,a)}}buildRelations(e,t,n,i,s){e&&Object.keys(e).forEach(a=>{const o=e[a],c=s?s+"."+a:a,u=n.findEmbeddedWithPropertyPath(c),f=n.findRelationWithPropertyPath(c);if(!u&&!f)throw new Rl(c,n);if(u)this.buildRelations(o,typeof t=="object"?ms.deepValue(t,u.propertyPath):void 0,n,i,c);else if(f){let l=i+"_"+c.replace(".","_");l=Ke.buildAlias(this.connection.driver,{joiner:"__"},i,l),(o===!0||typeof o=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(f):(this.joins.push({type:"left",select:!0,selection:t&&typeof t[a]=="object"?t[a]:void 0,alias:l,parentAlias:i,relationMetadata:f}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],f.inverseEntityMetadata,l))),typeof o=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(o,typeof t=="object"?ms.deepValue(t,f.propertyPath):void 0,f.inverseEntityMetadata,l,void 0)}})}buildEagerRelations(e,t,n,i,s){e&&Object.keys(e).forEach(a=>{const o=e[a],c=s?s+"."+a:a,u=n.findEmbeddedWithPropertyPath(c),f=n.findRelationWithPropertyPath(c);if(!u&&!f)throw new Rl(c,n);if(u)this.buildEagerRelations(o,typeof t=="object"?ms.deepValue(t,u.propertyPath):void 0,n,i,c);else if(f){let l=i+"_"+c.replace(".","_");l=Ke.buildAlias(this.connection.driver,{joiner:"__"},i,l),(o===!0||typeof o=="object")&&f.inverseEntityMetadata.eagerRelations.forEach(d=>{let h=l+"_"+d.propertyPath.replace(".","_");h=Ke.buildAlias(this.connection.driver,{joiner:"__"},l,h),this.joins.find(p=>p.alias===h)||this.joins.push({type:"left",select:!0,alias:h,parentAlias:l,selection:void 0,relationMetadata:d}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],f.inverseEntityMetadata,l)}),typeof o=="object"&&this.buildEagerRelations(o,typeof t=="object"?ms.deepValue(t,f.propertyPath):void 0,f.inverseEntityMetadata,l,void 0)}})}buildOrder(e,t,n,i){for(const s in e){if(e[s]===void 0)continue;const a=i?i+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),c=t.findEmbeddedWithPropertyPath(a),u=t.findRelationWithPropertyPath(a);if(!c&&!o&&!u)throw new Rl(a,t);if(o){let f=typeof e[s]=="object"?e[s].direction:e[s];f=f==="DESC"||f==="desc"||f===-1?"DESC":"ASC";let l=typeof e[s]=="object"?e[s].nulls:void 0;l=(l==null?void 0:l.toLowerCase())==="first"?"NULLS FIRST":(l==null?void 0:l.toLowerCase())==="last"?"NULLS LAST":void 0;const d=`${n}.${a}`;this.addOrderBy(d,f,l)}else if(c)this.buildOrder(e[s],t,n,a);else if(u){let f=n+"_"+a.replace(".","_");f=Ke.buildAlias(this.connection.driver,{joiner:"__"},n,f),this.joins.find(d=>d.alias===f)||this.joins.push({type:"left",select:!1,alias:f,parentAlias:n,selection:void 0,relationMetadata:u}),this.buildOrder(e[s],u.inverseEntityMetadata,f)}}}buildWhere(e,t,n,i){let s="";if(Array.isArray(e))e.length&&(s=e.map(a=>this.buildWhere(a,t,n,i)).filter(a=>!!a).map(a=>"("+a+")").join(" OR "));else{const a=[];for(const o in e){if(e[o]===void 0||e[o]===null)continue;const c=i?i+"."+o:o,u=t.findColumnWithPropertyPathStrict(c),f=t.findEmbeddedWithPropertyPath(c),l=t.findRelationWithPropertyPath(c);if(!f&&!u&&!l)throw new Rl(c,t);if(u){let d=`${n}.${c}`;u.isVirtualProperty&&u.query&&(d=`(${u.query(this.escape(n))})`);let h=e[o];if(tr.isEqualOperator(e[o])&&(h=e[o].value),u.transformer&&(h instanceof ew?h.transformValue(u.transformer):h=yM.transformTo(u.transformer,h)),this.connection.driver.options.type==="mssql"){const y=this.connection.driver;h instanceof ew?h.type!=="raw"&&h.transformValue({to:p=>y.parametrizeValue(u,p),from:p=>p}):h=y.parametrizeValue(u,h)}a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(d,h)))}else if(f){const d=this.buildWhere(e[o],t,n,c);d&&a.push(d)}else if(l){if(typeof e[o]=="object"&&Object.keys(e[o]).every(h=>e[o][h]===void 0))continue;if(tr.isFindOperator(e[o]))if(e[o].type==="moreThan"||e[o].type==="lessThan"||e[o].type==="moreThanOrEqual"||e[o].type==="lessThanOrEqual"){let d="";e[o].type==="moreThan"?d=">":e[o].type==="lessThan"?d="<":e[o].type==="moreThanOrEqual"?d=">=":e[o].type==="lessThanOrEqual"&&(d="<=");const h=this.subQuery();if(l.isManyToManyOwner)h.select("COUNT(*)").from(l.joinTableName,l.joinTableName).where(l.joinColumns.map(y=>`${l.joinTableName}.${y.propertyName} = ${n}.${y.referencedColumn.propertyName}`).join(" AND "));else if(l.isManyToManyNotOwner)h.select("COUNT(*)").from(l.inverseRelation.joinTableName,l.inverseRelation.joinTableName).where(l.inverseRelation.inverseJoinColumns.map(y=>`${l.inverseRelation.joinTableName}.${y.propertyName} = ${n}.${y.referencedColumn.propertyName}`).join(" AND "));else if(l.isOneToMany)h.select("COUNT(*)").from(l.inverseEntityMetadata.target,l.inverseEntityMetadata.tableName).where(l.inverseRelation.joinColumns.map(y=>`${l.inverseEntityMetadata.tableName}.${y.propertyName} = ${n}.${y.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(h.getSql()+" "+d+" "+parseInt(e[o].value))}else if(l.isManyToOne||l.isOneToOne&&l.isOneToOneOwner){const d=`${n}.${c}`;a.push(this.createWhereConditionExpression(this.getWherePredicateCondition(d,e[o])))}else throw new Error("This relation isn't supported by given find operator");else{let d=n+"_"+l.propertyPath.replace(".","_");d=Ke.buildAlias(this.connection.driver,{joiner:"__"},n,d),this.joins.find(p=>p.alias===d)||this.joins.push({type:"left",select:!1,selection:void 0,alias:d,parentAlias:n,relationMetadata:l});const y=this.buildWhere(e[o],l.inverseEntityMetadata,d);y&&a.push(y)}}}s=a.length?"("+a.join(") AND (")+")":a.join(" AND ")}return s.length?"("+s+")":s}},IZ=class{constructor(){this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}},$xe=class extends ra{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createUpdateExpression();return e+=this.createCteExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const n=new VR(e,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=n.getSoftDeletionReturningColumns());const[i,s]=this.getQueryAndParameters(),a=await e.query(i,s,!0),o=IZ.from(a);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await n.update(o,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),t&&await e.commitTransaction(),o}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}from(e,t){e=tr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new a9;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new Fe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new Fe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!e)throw new Fe(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!e.deleteDateColumn)throw new S8e(e);const t=[];switch(this.expressionMap.queryType){case"soft-delete":t.push(this.escape(e.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":t.push(this.escape(e.deleteDateColumn.databaseName)+" = NULL");break;default:throw new Fe('The queryType must be "soft-delete" or "restore"')}if(e.versionColumn&&t.push(this.escape(e.versionColumn.databaseName)+" = "+this.escape(e.versionColumn.databaseName)+" + 1"),e.updateDateColumn&&t.push(this.escape(e.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),t.length<=0)throw new hM;const n=this.createWhereExpression(),i=this.createReturningExpression("update");return i===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")} OUTPUT ${i}${n}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n} RETURNING ${i}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(Ke.isMySQLFamily(this.connection.driver))return" LIMIT "+e;throw new tZ}return""}},Lxe=class extends ra{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createUpdateExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let n=null,i=null;const s=new VR(e,this.expressionMap),a=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const d of this.expressionMap.returning)a.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(d));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=s.getUpdationReturningColumns(),a.push(...this.expressionMap.extraReturningColumns.filter(d=>!a.includes(d)))),a.length>0&&this.connection.driver.options.type==="mssql"&&(n=this.connection.driver.buildTableVariableDeclaration("@OutputTable",a),i="SELECT * FROM @OutputTable");const[o,c]=this.getQueryAndParameters(),u=[n,o,i],f=await e.query(u.filter(d=>d!=null).join(`;

`),c,!0),l=IZ.from(f);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await s.update(l,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),t&&await e.commitTransaction(),l}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}set(e){return this.expressionMap.valuesSet=e,this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new a9;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new Fe(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new Fe("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.getValueSet(),t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,n={};for(const c in e)e[c]!==void 0&&(n[c]=e[c]);const i=[],s=[];if(t?(this.createPropertyPath(t,n).forEach(c=>{const u=t.findColumnsWithPropertyPath(c);if(u.length<=0)throw new Rl(c,t);u.forEach(f=>{if(!f.isUpdate||s.includes(f))return;s.push(f);let l=f.getEntityValue(n);if(f.referencedColumn&&typeof l=="object"&&!(l instanceof Date)&&l!==null&&!Buffer.isBuffer(l)?l=f.referencedColumn.getEntityValue(l):typeof l!="function"&&(l=this.connection.driver.preparePersistentValue(l,f)),typeof l=="function")i.push(this.escape(f.databaseName)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)i.push(this.escape(f.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(l=this.connection.driver.parametrizeValue(f,l));const d=this.createParameter(l);let h=null;if((Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(f.type)!==-1){const p=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";f.srid!=null?h=`${p}(${d}, ${f.srid})`:h=`${p}(${d})`}else Ke.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(f.type)!==-1?f.srid!=null?h=`ST_SetSRID(ST_GeomFromGeoJSON(${d}), ${f.srid})::${f.type}`:h=`ST_GeomFromGeoJSON(${d})::${f.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(f.type)!==-1?h=f.type+"::STGeomFromText("+d+", "+(f.srid||"0")+")":h=d;i.push(this.escape(f.databaseName)+" = "+h)}})}),(i.length>0||Object.keys(n).length===0)&&(t.versionColumn&&s.indexOf(t.versionColumn)===-1&&i.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&s.indexOf(t.updateDateColumn)===-1&&i.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(n).map(c=>{const u=n[c];if(typeof u=="function")i.push(this.escape(c)+" = "+u());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&u===null)i.push(this.escape(c)+" = NULL");else{const f=this.createParameter(u);i.push(this.escape(c)+" = "+f)}}),i.length<=0)throw new hM;const a=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${a}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")} OUTPUT ${o}${a}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${a} RETURNING ${o}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(Ke.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+e;throw new tZ}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new hM}};function Uxe(){ra.registerQueryBuilderClass("DeleteQueryBuilder",r=>new xxe(r)),ra.registerQueryBuilderClass("InsertQueryBuilder",r=>new Mxe(r)),ra.registerQueryBuilderClass("RelationQueryBuilder",r=>new Txe(r)),ra.registerQueryBuilderClass("SelectQueryBuilder",r=>new Bxe(r)),ra.registerQueryBuilderClass("SoftDeleteQueryBuilder",r=>new $xe(r)),ra.registerQueryBuilderClass("UpdateQueryBuilder",r=>new Lxe(r))}var Fxe={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(Ht,function(){var t=1e3,n=6e4,i=36e5,s="millisecond",a="second",o="minute",c="hour",u="day",f="week",l="month",d="quarter",h="year",y="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var w=["th","st","nd","rd"],P=A%100;return"["+A+(w[(P-20)%10]||w[P]||w[0])+"]"}},b=function(A,w,P){var k=String(A);return!k||k.length>=w?A:""+Array(w+1-k.length).join(P)+A},_={s:b,z:function(A){var w=-A.utcOffset(),P=Math.abs(w),k=Math.floor(P/60),D=P%60;return(w<=0?"+":"-")+b(k,2,"0")+":"+b(D,2,"0")},m:function A(w,P){if(w.date()<P.date())return-A(P,w);var k=12*(P.year()-w.year())+(P.month()-w.month()),D=w.clone().add(k,l),T=P-D<0,M=w.clone().add(k+(T?-1:1),l);return+(-(k+(P-D)/(T?D-M:M-D))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:l,y:h,w:f,d:u,D:y,h:c,m:o,s:a,ms:s,Q:d}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},C="en",N={};N[C]=v;var x="$isDayjsObject",I=function(A){return A instanceof E||!(!A||!A[x])},$=function A(w,P,k){var D;if(!w)return C;if(typeof w=="string"){var T=w.toLowerCase();N[T]&&(D=T),P&&(N[T]=P,D=T);var M=w.split("-");if(!D&&M.length>1)return A(M[0])}else{var L=w.name;N[L]=w,D=L}return!k&&D&&(C=D),D||!k&&C},j=function(A,w){if(I(A))return A.clone();var P=typeof w=="object"?w:{};return P.date=A,P.args=arguments,new E(P)},O=_;O.l=$,O.i=I,O.w=function(A,w){return j(A,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var E=function(){function A(P){this.$L=$(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[x]=!0}var w=A.prototype;return w.parse=function(P){this.$d=function(k){var D=k.date,T=k.utc;if(D===null)return new Date(NaN);if(O.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var M=D.match(g);if(M){var L=M[2]-1||0,K=(M[7]||"0").substring(0,3);return T?new Date(Date.UTC(M[1],L,M[3]||1,M[4]||0,M[5]||0,M[6]||0,K)):new Date(M[1],L,M[3]||1,M[4]||0,M[5]||0,M[6]||0,K)}}return new Date(D)}(P),this.init()},w.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},w.$utils=function(){return O},w.isValid=function(){return this.$d.toString()!==p},w.isSame=function(P,k){var D=j(P);return this.startOf(k)<=D&&D<=this.endOf(k)},w.isAfter=function(P,k){return j(P)<this.startOf(k)},w.isBefore=function(P,k){return this.endOf(k)<j(P)},w.$g=function(P,k,D){return O.u(P)?this[k]:this.set(D,P)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(P,k){var D=this,T=!!O.u(k)||k,M=O.p(P),L=function(oe,ce){var xe=O.w(D.$u?Date.UTC(D.$y,ce,oe):new Date(D.$y,ce,oe),D);return T?xe:xe.endOf(u)},K=function(oe,ce){return O.w(D.toDate()[oe].apply(D.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(ce)),D)},Y=this.$W,re=this.$M,ne=this.$D,ae="set"+(this.$u?"UTC":"");switch(M){case h:return T?L(1,0):L(31,11);case l:return T?L(1,re):L(0,re+1);case f:var ie=this.$locale().weekStart||0,fe=(Y<ie?Y+7:Y)-ie;return L(T?ne-fe:ne+(6-fe),re);case u:case y:return K(ae+"Hours",0);case c:return K(ae+"Minutes",1);case o:return K(ae+"Seconds",2);case a:return K(ae+"Milliseconds",3);default:return this.clone()}},w.endOf=function(P){return this.startOf(P,!1)},w.$set=function(P,k){var D,T=O.p(P),M="set"+(this.$u?"UTC":""),L=(D={},D[u]=M+"Date",D[y]=M+"Date",D[l]=M+"Month",D[h]=M+"FullYear",D[c]=M+"Hours",D[o]=M+"Minutes",D[a]=M+"Seconds",D[s]=M+"Milliseconds",D)[T],K=T===u?this.$D+(k-this.$W):k;if(T===l||T===h){var Y=this.clone().set(y,1);Y.$d[L](K),Y.init(),this.$d=Y.set(y,Math.min(this.$D,Y.daysInMonth())).$d}else L&&this.$d[L](K);return this.init(),this},w.set=function(P,k){return this.clone().$set(P,k)},w.get=function(P){return this[O.p(P)]()},w.add=function(P,k){var D,T=this;P=Number(P);var M=O.p(k),L=function(re){var ne=j(T);return O.w(ne.date(ne.date()+Math.round(re*P)),T)};if(M===l)return this.set(l,this.$M+P);if(M===h)return this.set(h,this.$y+P);if(M===u)return L(1);if(M===f)return L(7);var K=(D={},D[o]=n,D[c]=i,D[a]=t,D)[M]||1,Y=this.$d.getTime()+P*K;return O.w(Y,this)},w.subtract=function(P,k){return this.add(-1*P,k)},w.format=function(P){var k=this,D=this.$locale();if(!this.isValid())return D.invalidDate||p;var T=P||"YYYY-MM-DDTHH:mm:ssZ",M=O.z(this),L=this.$H,K=this.$m,Y=this.$M,re=D.weekdays,ne=D.months,ae=D.meridiem,ie=function(ce,xe,ge,me){return ce&&(ce[xe]||ce(k,T))||ge[xe].slice(0,me)},fe=function(ce){return O.s(L%12||12,ce,"0")},oe=ae||function(ce,xe,ge){var me=ce<12?"AM":"PM";return ge?me.toLowerCase():me};return T.replace(m,function(ce,xe){return xe||function(ge){switch(ge){case"YY":return String(k.$y).slice(-2);case"YYYY":return O.s(k.$y,4,"0");case"M":return Y+1;case"MM":return O.s(Y+1,2,"0");case"MMM":return ie(D.monthsShort,Y,ne,3);case"MMMM":return ie(ne,Y);case"D":return k.$D;case"DD":return O.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return ie(D.weekdaysMin,k.$W,re,2);case"ddd":return ie(D.weekdaysShort,k.$W,re,3);case"dddd":return re[k.$W];case"H":return String(L);case"HH":return O.s(L,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return oe(L,K,!0);case"A":return oe(L,K,!1);case"m":return String(K);case"mm":return O.s(K,2,"0");case"s":return String(k.$s);case"ss":return O.s(k.$s,2,"0");case"SSS":return O.s(k.$ms,3,"0");case"Z":return M}return null}(ce)||M.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(P,k,D){var T,M=this,L=O.p(k),K=j(P),Y=(K.utcOffset()-this.utcOffset())*n,re=this-K,ne=function(){return O.m(M,K)};switch(L){case h:T=ne()/12;break;case l:T=ne();break;case d:T=ne()/3;break;case f:T=(re-Y)/6048e5;break;case u:T=(re-Y)/864e5;break;case c:T=re/i;break;case o:T=re/n;break;case a:T=re/t;break;default:T=re}return D?T:O.a(T)},w.daysInMonth=function(){return this.endOf(l).$D},w.$locale=function(){return N[this.$L]},w.locale=function(P,k){if(!P)return this.$L;var D=this.clone(),T=$(P,k,!0);return T&&(D.$L=T),D},w.clone=function(){return O.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},A}(),S=E.prototype;return j.prototype=S,[["$ms",s],["$s",a],["$m",o],["$H",c],["$W",u],["$M",l],["$y",h],["$D",y]].forEach(function(A){S[A[1]]=function(w){return this.$g(w,A[0],A[1])}}),j.extend=function(A,w){return A.$i||(A(w,E,j),A.$i=!0),j},j.locale=$,j.isDayjs=I,j.unix=function(A){return j(1e3*A)},j.en=N[C],j.Ls=N,j.p={},j})})(Fxe);var $L;(function(r){r.VIEW="VIEW",r.MATERIALIZED_VIEW="MATERIALIZED_VIEW",r.GENERATED_COLUMN="GENERATED_COLUMN"})($L||($L={}));Uxe();function o0(){const r=eZ.getGlobalVariable();return r.typeormMetadataArgsStorage||(r.typeormMetadataArgsStorage=new p8e),r.typeormMetadataArgsStorage}function Au(r,e){return function(t,n){let i;typeof r=="string"||typeof r=="function"?i=r:r&&(e=r,i=r.type),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&s&&(i=s),!e.type&&i&&(e.type=i),e.type==="hstore"&&!e.hstoreType&&(e.hstoreType=s===Object?"object":"string"),typeof r=="function")o0().embeddeds.push({target:t.constructor,propertyName:n,isArray:s===Array||e.array===!0,prefix:e.prefix!==void 0?e.prefix:void 0,type:r});else{if(!e.type)throw new nZ(t,n);e.unique===!0&&o0().uniques.push({target:t.constructor,columns:[n]}),o0().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&o0().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}}function jxe(r,e){return function(t,n){let i;typeof r=="string"||r===String||r===Boolean||r===Number?i=r:e=Object.assign({},r),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&s&&(i=s),!e.type&&i&&(e.type=i),!e.type)throw new nZ(t,n);if(e.nullable)throw new _8e(t,n);e.primary=!0,o0().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&o0().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}function qxe(r,e){const t=(Lr.isObject(r)?r:e)||{},n=r;return function(i){o0().tables.push({target:i,name:n,type:"regular",orderBy:t.orderBy?t.orderBy:void 0,engine:t.engine?t.engine:void 0,database:t.database?t.database:void 0,schema:t.schema?t.schema:void 0,synchronize:t.synchronize,withoutRowid:t.withoutRowid,comment:t.comment?t.comment:void 0})}}function JE(r,e,t){const i=r;let s=Lr.isObject(r)&&!Array.isArray(r)?r:t;return s||(s=Lr.isObject(e)&&!Array.isArray(e)?e:t),function(a,o){o0().indices.push({target:o?a.constructor:a,name:void 0,columns:o?[o]:i,synchronize:!(s&&s.synchronize===!1),where:s?s.where:void 0,unique:!!(s&&s.unique),spatial:!!(s&&s.spatial),fulltext:!!(s&&s.fulltext),nullFiltered:!!(s&&s.nullFiltered),parser:s?s.parser:void 0,sparse:!!(s&&s.sparse),background:!!(s&&s.background),concurrent:!!(s&&s.concurrent),expireAfterSeconds:s?s.expireAfterSeconds:void 0})}}typeof Number.isFinite!="function"&&(Number.isFinite=function(e){return!(typeof e!="number"||e!==e||e===1/0||e===-1/0)});var Vxe="Expected a function",RZ="__lodash_hash_undefined__",zxe="[object Function]",Hxe="[object GeneratorFunction]",Wxe="[object Symbol]",Kxe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gxe=/^\w*$/,Qxe=/^\./,Zxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jxe=/[\\^$.*+?()[\]{}|]/g,Yxe=/\\(\\)?/g,Xxe=/^\[object .+?Constructor\]$/,ewe=typeof Ht=="object"&&Ht&&Ht.Object===Object&&Ht,twe=typeof self=="object"&&self&&self.Object===Object&&self,zR=ewe||twe||Function("return this")();function rwe(r,e){return r==null?void 0:r[e]}function nwe(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}var iwe=Array.prototype,swe=Function.prototype,NZ=Object.prototype,YE=zR["__core-js_shared__"],LL=function(){var r=/[^.]+$/.exec(YE&&YE.keys&&YE.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),OZ=swe.toString,HR=NZ.hasOwnProperty,kZ=NZ.toString,awe=RegExp("^"+OZ.call(HR).replace(Jxe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),UL=zR.Symbol,owe=iwe.splice,cwe=DZ(zR,"Map"),u2=DZ(Object,"create"),FL=UL?UL.prototype:void 0,jL=FL?FL.toString:void 0;function up(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function uwe(){this.__data__=u2?u2(null):{}}function fwe(r){return this.has(r)&&delete this.__data__[r]}function lwe(r){var e=this.__data__;if(u2){var t=e[r];return t===RZ?void 0:t}return HR.call(e,r)?e[r]:void 0}function dwe(r){var e=this.__data__;return u2?e[r]!==void 0:HR.call(e,r)}function hwe(r,e){var t=this.__data__;return t[r]=u2&&e===void 0?RZ:e,this}up.prototype.clear=uwe;up.prototype.delete=fwe;up.prototype.get=lwe;up.prototype.has=dwe;up.prototype.set=hwe;function S6(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function pwe(){this.__data__=[]}function ywe(r){var e=this.__data__,t=l9(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():owe.call(e,t,1),!0}function mwe(r){var e=this.__data__,t=l9(e,r);return t<0?void 0:e[t][1]}function bwe(r){return l9(this.__data__,r)>-1}function gwe(r,e){var t=this.__data__,n=l9(t,r);return n<0?t.push([r,e]):t[n][1]=e,this}S6.prototype.clear=pwe;S6.prototype.delete=ywe;S6.prototype.get=mwe;S6.prototype.has=bwe;S6.prototype.set=gwe;function Sp(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function vwe(){this.__data__={hash:new up,map:new(cwe||S6),string:new up}}function xwe(r){return d9(this,r).delete(r)}function wwe(r){return d9(this,r).get(r)}function Ewe(r){return d9(this,r).has(r)}function Awe(r,e){return d9(this,r).set(r,e),this}Sp.prototype.clear=vwe;Sp.prototype.delete=xwe;Sp.prototype.get=wwe;Sp.prototype.has=Ewe;Sp.prototype.set=Awe;function l9(r,e){for(var t=r.length;t--;)if(kwe(r[t][0],e))return t;return-1}function _we(r,e){e=Twe(e,r)?[e]:Pwe(e);for(var t=0,n=e.length;r!=null&&t<n;)r=r[Nwe(e[t++])];return t&&t==n?r:void 0}function Swe(r){if(!$Z(r)||Iwe(r))return!1;var e=Dwe(r)||nwe(r)?awe:Xxe;return e.test(Owe(r))}function Mwe(r){if(typeof r=="string")return r;if(KR(r))return jL?jL.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Pwe(r){return BZ(r)?r:Rwe(r)}function d9(r,e){var t=r.__data__;return Cwe(e)?t[typeof e=="string"?"string":"hash"]:t.map}function DZ(r,e){var t=rwe(r,e);return Swe(t)?t:void 0}function Twe(r,e){if(BZ(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||KR(r)?!0:Gxe.test(r)||!Kxe.test(r)||e!=null&&r in Object(e)}function Cwe(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Iwe(r){return!!LL&&LL in r}var Rwe=WR(function(r){r=$we(r);var e=[];return Qxe.test(r)&&e.push(""),r.replace(Zxe,function(t,n,i,s){e.push(i?s.replace(Yxe,"$1"):n||t)}),e});function Nwe(r){if(typeof r=="string"||KR(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function Owe(r){if(r!=null){try{return OZ.call(r)}catch{}try{return r+""}catch{}}return""}function WR(r,e){if(typeof r!="function"||e&&typeof e!="function")throw new TypeError(Vxe);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=r.apply(this,n);return t.cache=s.set(i,a),a};return t.cache=new(WR.Cache||Sp),t}WR.Cache=Sp;function kwe(r,e){return r===e||r!==r&&e!==e}var BZ=Array.isArray;function Dwe(r){var e=$Z(r)?kZ.call(r):"";return e==zxe||e==Hxe}function $Z(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function Bwe(r){return!!r&&typeof r=="object"}function KR(r){return typeof r=="symbol"||Bwe(r)&&kZ.call(r)==Wxe}function $we(r){return r==null?"":Mwe(r)}function Lwe(r,e,t){var n=r==null?void 0:_we(r,e);return n===void 0?t:n}var LZ=Lwe,Uwe={INVALID_TYPE:"Expected type {0} but found type {1}",INVALID_FORMAT:"Object didn't pass validation for format {0}: {1}",ENUM_MISMATCH:"No enum match for: {0}",ENUM_CASE_MISMATCH:"Enum does not match case for: {0}",ANY_OF_MISSING:"Data does not match any schemas from 'anyOf'",ONE_OF_MISSING:"Data does not match any schemas from 'oneOf'",ONE_OF_MULTIPLE:"Data is valid against more than one schema from 'oneOf'",NOT_PASSED:"Data matches schema from 'not'",ARRAY_LENGTH_SHORT:"Array is too short ({0}), minimum {1}",ARRAY_LENGTH_LONG:"Array is too long ({0}), maximum {1}",ARRAY_UNIQUE:"Array items are not unique (indexes {0} and {1})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",MULTIPLE_OF:"Value {0} is not a multiple of {1}",MINIMUM:"Value {0} is less than minimum {1}",MINIMUM_EXCLUSIVE:"Value {0} is equal or less than exclusive minimum {1}",MAXIMUM:"Value {0} is greater than maximum {1}",MAXIMUM_EXCLUSIVE:"Value {0} is equal or greater than exclusive maximum {1}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({0}), minimum {1}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({0}), maximum {1}",OBJECT_MISSING_REQUIRED_PROPERTY:"Missing required property: {0}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed: {0}",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {0} (due to key: {1})",MIN_LENGTH:"String is too short ({0} chars), minimum {1}",MAX_LENGTH:"String is too long ({0} chars), maximum {1}",PATTERN:"String does not match pattern {0}: {1}",KEYWORD_TYPE_EXPECTED:"Keyword '{0}' is expected to be of type '{1}'",KEYWORD_UNDEFINED_STRICT:"Keyword '{0}' must be defined in strict mode",KEYWORD_UNEXPECTED:"Keyword '{0}' is not expected to appear in the schema",KEYWORD_MUST_BE:"Keyword '{0}' must be {1}",KEYWORD_DEPENDENCY:"Keyword '{0}' requires keyword '{1}'",KEYWORD_PATTERN:"Keyword '{0}' is not a valid RegExp pattern: {1}",KEYWORD_VALUE_TYPE:"Each element of keyword '{0}' array must be a '{1}'",UNKNOWN_FORMAT:"There is no validation function for format '{0}'",CUSTOM_MODE_FORCE_PROPERTIES:"{0} must define at least one property if present",REF_UNRESOLVED:"Reference has not been resolved during compilation: {0}",UNRESOLVABLE_REFERENCE:"Reference could not be resolved: {0}",SCHEMA_NOT_REACHABLE:"Validator was not able to read schema with uri: {0}",SCHEMA_TYPE_EXPECTED:"Schema is expected to be of type 'object'",SCHEMA_NOT_AN_OBJECT:"Schema is not an object: {0}",ASYNC_TIMEOUT:"{0} asynchronous task(s) have timed out after {1} ms",PARENT_SCHEMA_VALIDATION_FAILED:"Schema failed to validate against its parent schema, see inner errors for details.",REMOTE_NOT_VALID:"Remote reference didn't compile successfully: {0}"},Mp={};(function(r){r.jsonSymbol=Symbol.for("z-schema/json"),r.schemaSymbol=Symbol.for("z-schema/schema");var e=r.sortedKeys=function(t){return Object.keys(t).sort()};r.isAbsoluteUri=function(t){return/^https?:\/\//.test(t)},r.isRelativeUri=function(t){return/.+#/.test(t)},r.whatIs=function(t){var n=typeof t;return n==="object"?t===null?"null":Array.isArray(t)?"array":"object":n==="number"?Number.isFinite(t)?t%1===0?"integer":"number":Number.isNaN(t)?"not-a-number":"unknown-number":n},r.areEqual=function t(n,i,s){s=s||{};var a=s.caseInsensitiveComparison||!1;if(n===i||a===!0&&typeof n=="string"&&typeof i=="string"&&n.toUpperCase()===i.toUpperCase())return!0;var o,c;if(Array.isArray(n)&&Array.isArray(i)){if(n.length!==i.length)return!1;for(c=n.length,o=0;o<c;o++)if(!t(n[o],i[o],{caseInsensitiveComparison:a}))return!1;return!0}if(r.whatIs(n)==="object"&&r.whatIs(i)==="object"){var u=e(n),f=e(i);if(!t(u,f,{caseInsensitiveComparison:a}))return!1;for(c=u.length,o=0;o<c;o++)if(!t(n[u[o]],i[u[o]],{caseInsensitiveComparison:a}))return!1;return!0}return!1},r.isUniqueArray=function(t,n){var i,s,a=t.length;for(i=0;i<a;i++)for(s=i+1;s<a;s++)if(r.areEqual(t[i],t[s]))return n&&n.push(i,s),!1;return!0},r.difference=function(t,n){for(var i=[],s=t.length;s--;)n.indexOf(t[s])===-1&&i.push(t[s]);return i},r.clone=function(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)return t;var n,i;if(Array.isArray(t))for(n=[],i=t.length;i--;)n[i]=t[i];else{n={};var s=Object.keys(t);for(i=s.length;i--;){var a=s[i];n[a]=t[a]}}return n}},r.cloneDeep=function(t){var n=0,i=new Map,s=[];function a(o){if(typeof o!="object"||o===null)return o;var c,u,f;if(f=i.get(o),f!==void 0)return s[f];if(i.set(o,n++),Array.isArray(o))for(c=[],s.push(c),u=o.length;u--;)c[u]=a(o[u]);else{c={},s.push(c);var l=Object.keys(o);for(u=l.length;u--;){var d=l[u];c[d]=a(o[d])}}return c}return a(t)},r.ucs2decode=function(t){for(var n=[],i=0,s=t.length,a,o;i<s;)a=t.charCodeAt(i++),a>=55296&&a<=56319&&i<s?(o=t.charCodeAt(i++),(o&64512)==56320?n.push(((a&1023)<<10)+(o&1023)+65536):(n.push(a),i--)):n.push(a);return n}})(Mp);var Fwe=LZ,jwe=Uwe,m3=Mp;function la(r,e){this.parentReport=r instanceof la?r:void 0,this.options=r instanceof la?r.options:r||{},this.reportOptions=e||{},this.errors=[],this.path=[],this.asyncTasks=[],this.rootSchema=void 0,this.commonErrorMessage=void 0,this.json=void 0}la.prototype.isValid=function(){if(this.asyncTasks.length>0)throw new Error("Async tasks pending, can't answer isValid");return this.errors.length===0};la.prototype.addAsyncTask=function(r,e,t){this.asyncTasks.push([r,e,t])};la.prototype.getAncestor=function(r){if(this.parentReport)return this.parentReport.getSchemaId()===r?this.parentReport:this.parentReport.getAncestor(r)};la.prototype.processAsyncTasks=function(r,e){var t=r||2e3,n=this.asyncTasks.length,i=n,s=!1,a=this;function o(){process.nextTick(function(){var f=a.errors.length===0,l=f?null:a.errors;e(l,f)})}function c(f){return function(l){s||(f(l),--n===0&&o())}}if(n===0||this.errors.length>0&&this.options.breakOnFirstError){o();return}for(;i--;){var u=this.asyncTasks[i];u[0].apply(null,u[1].concat(c(u[2])))}setTimeout(function(){n>0&&(s=!0,a.addError("ASYNC_TIMEOUT",[n,t]),e(a.errors,!1))},t)};la.prototype.getPath=function(r){var e=[];return this.parentReport&&(e=e.concat(this.parentReport.path)),e=e.concat(this.path),r!==!0&&(e="#/"+e.map(function(t){return t=t.toString(),m3.isAbsoluteUri(t)?"uri("+t+")":t.replace(/\~/g,"~0").replace(/\//g,"~1")}).join("/")),e};la.prototype.getSchemaId=function(){if(!this.rootSchema)return null;var r=[];for(this.parentReport&&(r=r.concat(this.parentReport.path)),r=r.concat(this.path);r.length>0;){var e=Fwe(this.rootSchema,r);if(e&&e.id)return e.id;r.pop()}return this.rootSchema.id};la.prototype.hasError=function(r,e){for(var t=this.errors.length;t--;)if(this.errors[t].code===r){for(var n=!0,i=this.errors[t].params.length;i--;)this.errors[t].params[i]!==e[i]&&(n=!1);if(n)return n}return!1};la.prototype.addError=function(r,e,t,n){if(!r)throw new Error("No errorCode passed into addError()");this.addCustomError(r,jwe[r],e,t,n)};la.prototype.getJson=function(){for(var r=this;r.json===void 0;)if(r=r.parentReport,r===void 0)return;return r.json};la.prototype.addCustomError=function(r,e,t,n,i){if(!(this.errors.length>=this.reportOptions.maxErrors)){if(!e)throw new Error("No errorMessage known for code "+r);t=t||[];for(var s=t.length;s--;){var a=m3.whatIs(t[s]),o=a==="object"||a==="null"?JSON.stringify(t[s]):t[s];e=e.replace("{"+s+"}",o)}var c={code:r,params:t,message:e,path:this.getPath(this.options.reportPathAsArray),schemaId:this.getSchemaId()};if(c[m3.schemaSymbol]=i,c[m3.jsonSymbol]=this.getJson(),i&&typeof i=="string"?c.description=i:i&&typeof i=="object"&&(i.title&&(c.title=i.title),i.description&&(c.description=i.description)),n!=null){for(Array.isArray(n)||(n=[n]),c.inner=[],s=n.length;s--;)for(var u=n[s],f=u.errors.length;f--;)c.inner.push(u.errors[f]);c.inner.length===0&&(c.inner=void 0)}this.errors.push(c)}};var I5=la,bM={exports:{}},gM={exports:{}},vM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){if(n==null)throw new TypeError("Expected a string but received a ".concat(n));if(n.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(n.constructor.name))}r.exports=e.default,r.exports.default=e.default})(vM,vM.exports);var Ie=vM.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s=Date.parse(s),isNaN(s)?null:new Date(s)}r.exports=e.default,r.exports.default=e.default})(gM,gM.exports);var GR=gM.exports,xM={exports:{}},M6={},wM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n){return n==null}r.exports=e.default,r.exports.default=e.default})(wM,wM.exports);var UZ=wM.exports,Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.farsiLocales=Mr.englishLocales=Mr.dotDecimal=Mr.decimal=Mr.commaDecimal=Mr.bengaliLocales=Mr.arabicLocales=Mr.alphanumeric=Mr.alpha=void 0;var Bs=Mr.alpha={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZ]+$/i,"bg-BG":/^[-]+$/i,"cs-CZ":/^[A-Z]+$/i,"da-DK":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"el-GR":/^[-]+$/i,"es-ES":/^[A-Z]+$/i,"fa-IR":/^[]+$/i,"fi-FI":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"it-IT":/^[A-Z]+$/i,"ja-JP":/^[----]+$/i,"nb-NO":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"nn-NO":/^[A-Z]+$/i,"hu-HU":/^[A-Z]+$/i,"pl-PL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[-]+$/i,"kk-KZ":/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[A-Z]+$/i,"sk-SK":/^[A-Z]+$/i,"sr-RS@latin":/^[A-Z]+$/i,"sr-RS":/^[-]+$/i,"sv-SE":/^[A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[A-Z]+$/i,"uk-UA":/^[-I]+$/i,"vi-VN":/^[A-Z]+$/i,"ko-KR":/^[---]*$/,"ku-IQ":/^[]+$/i,ar:/^[]+$/,he:/^[-]+$/,fa:/^['']+$/i,bn:/^['']+$/,eo:/^[ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0961]+[\u0972-\u097F]*$/i,"si-LK":/^[\u0D80-\u0DFF]+$/},$s=Mr.alphanumeric={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZ]+$/i,"bg-BG":/^[0-9-]+$/i,"cs-CZ":/^[0-9A-Z]+$/i,"da-DK":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"el-GR":/^[0-9-]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fi-FI":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"it-IT":/^[0-9A-Z]+$/i,"ja-JP":/^[0-9-----]+$/i,"hu-HU":/^[0-9A-Z]+$/i,"nb-NO":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"nn-NO":/^[0-9A-Z]+$/i,"pl-PL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9-]+$/i,"kk-KZ":/^[0-9-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA]+$/i,"sl-SI":/^[0-9A-Z]+$/i,"sk-SK":/^[0-9A-Z]+$/i,"sr-RS@latin":/^[0-9A-Z]+$/i,"sr-RS":/^[0-9-]+$/i,"sv-SE":/^[0-9A-Z]+$/i,"th-TH":/^[-\s]+$/i,"tr-TR":/^[0-9A-Z]+$/i,"uk-UA":/^[0-9-I]+$/i,"ko-KR":/^[0-9---]*$/,"ku-IQ":/^[0-9]+$/i,"vi-VN":/^[0-9A-Z]+$/i,ar:/^[0-9]+$/,he:/^[0-9-]+$/,fa:/^['0-9']+$/i,bn:/^['']+$/,eo:/^[0-9ABCD-GHIJK-PRSTUVZ]+$/i,"hi-IN":/^[\u0900-\u0963]+[\u0966-\u097F]*$/i,"si-LK":/^[0-9\u0D80-\u0DFF]+$/},fs=Mr.decimal={"en-US":".",ar:""},qL=Mr.englishLocales=["AU","GB","HK","IN","NZ","ZA","ZM"];for(var sv,XE=0;XE<qL.length;XE++)sv="en-".concat(qL[XE]),Bs[sv]=Bs["en-US"],$s[sv]=$s["en-US"],fs[sv]=fs["en-US"];var VL=Mr.arabicLocales=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];for(var av,eA=0;eA<VL.length;eA++)av="ar-".concat(VL[eA]),Bs[av]=Bs.ar,$s[av]=$s.ar,fs[av]=fs.ar;var zL=Mr.farsiLocales=["IR","AF"];for(var tA,rA=0;rA<zL.length;rA++)tA="fa-".concat(zL[rA]),$s[tA]=$s.fa,fs[tA]=fs.ar;var HL=Mr.bengaliLocales=["BD","IN"];for(var ov,nA=0;nA<HL.length;nA++)ov="bn-".concat(HL[nA]),Bs[ov]=Bs.bn,$s[ov]=$s.bn,fs[ov]=fs["en-US"];var WL=Mr.dotDecimal=["ar-EG","ar-LB","ar-LY"],KL=Mr.commaDecimal=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","eo","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hi-IN","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","kk-KZ","si-LK","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"];for(var iA=0;iA<WL.length;iA++)fs[WL[iA]]=fs["en-US"];for(var sA=0;sA<KL.length;sA++)fs[KL[sA]]=",";Bs["fr-CA"]=Bs["fr-FR"];$s["fr-CA"]=$s["fr-FR"];Bs["pt-BR"]=Bs["pt-PT"];$s["pt-BR"]=$s["pt-PT"];fs["pt-BR"]=fs["pt-PT"];Bs["pl-Pl"]=Bs["pl-PL"];$s["pl-Pl"]=$s["pl-PL"];fs["pl-Pl"]=fs["pl-PL"];Bs["fa-AF"]=Bs.fa;Object.defineProperty(M6,"__esModule",{value:!0});M6.default=Vwe;M6.locales=void 0;var qwe=jZ(Ie),cv=jZ(UZ),FZ=Mr;function jZ(r){return r&&r.__esModule?r:{default:r}}function Vwe(r,e){(0,qwe.default)(r),e=e||{};var t=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(e.locale?FZ.decimal[e.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(r===""||r==="."||r===","||r==="-"||r==="+")return!1;var n=parseFloat(r.replace(",","."));return t.test(r)&&(!e.hasOwnProperty("min")||(0,cv.default)(e.min)||n>=e.min)&&(!e.hasOwnProperty("max")||(0,cv.default)(e.max)||n<=e.max)&&(!e.hasOwnProperty("lt")||(0,cv.default)(e.lt)||n<e.lt)&&(!e.hasOwnProperty("gt")||(0,cv.default)(e.gt)||n>e.gt)}M6.locales=Object.keys(FZ.decimal);(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(M6);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s)?parseFloat(s):NaN}r.exports=e.default,r.exports.default=e.default})(xM,xM.exports);var qZ=xM.exports,EM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){return(0,t.default)(s),parseInt(s,a||10)}r.exports=e.default,r.exports.default=e.default})(EM,EM.exports);var zwe=EM.exports,AM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){return(0,t.default)(s),a?s==="1"||/^true$/i.test(s):s!=="0"&&!/^false$/i.test(s)&&s!==""}r.exports=e.default,r.exports.default=e.default})(AM,AM.exports);var Hwe=AM.exports,_M={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){return(0,t.default)(s),s===a}r.exports=e.default,r.exports.default=e.default})(_M,_M.exports);var Wwe=_M.exports,SM={exports:{}},MM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(i){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t(i)}function n(i){return t(i)==="object"&&i!==null?typeof i.toString=="function"?i=i.toString():i="[object Object]":(i===null||typeof i>"u"||isNaN(i)&&!i.length)&&(i=""),String(i)}r.exports=e.default,r.exports.default=e.default})(MM,MM.exports);var VZ=MM.exports,PM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var s in i)typeof n[s]>"u"&&(n[s]=i[s]);return n}r.exports=e.default,r.exports.default=e.default})(PM,PM.exports);var hs=PM.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=s(Ie),n=s(VZ),i=s(hs);function s(c){return c&&c.__esModule?c:{default:c}}var a={ignoreCase:!1,minOccurrences:1};function o(c,u,f){return(0,t.default)(c),f=(0,i.default)(f,a),f.ignoreCase?c.toLowerCase().split((0,n.default)(u).toLowerCase()).length>f.minOccurrences:c.split((0,n.default)(u)).length>f.minOccurrences}r.exports=e.default,r.exports.default=e.default})(SM,SM.exports);var Kwe=SM.exports,TM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a,o){return(0,t.default)(s),Object.prototype.toString.call(a)!=="[object RegExp]"&&(a=new RegExp(a,o)),!!s.match(a)}r.exports=e.default,r.exports.default=e.default})(TM,TM.exports);var Gwe=TM.exports,CM={exports:{}},IM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function t(i){return Object.prototype.toString.call(i)==="[object RegExp]"}function n(i,s){for(var a=0;a<s.length;a++){var o=s[a];if(i===o||t(o)&&o.test(i))return!0}return!1}r.exports=e.default,r.exports.default=e.default})(IM,IM.exports);var zZ=IM.exports,RM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}function i(a){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i(a)}function s(a,o){(0,t.default)(a);var c,u;i(o)==="object"?(c=o.min||0,u=o.max):(c=arguments[1],u=arguments[2]);var f=encodeURI(a).split(/%..|./).length-1;return f>=c&&(typeof u>"u"||f<=u)}r.exports=e.default,r.exports.default=e.default})(RM,RM.exports);var HZ=RM.exports,NM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ie),n=i(hs);function i(o){return o&&o.__esModule?o:{default:o}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function a(o,c){(0,t.default)(o),c=(0,n.default)(c,s),c.allow_trailing_dot&&o[o.length-1]==="."&&(o=o.substring(0,o.length-1)),c.allow_wildcard===!0&&o.indexOf("*.")===0&&(o=o.substring(2));var u=o.split("."),f=u[u.length-1];return c.require_tld&&(u.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(f)||/\s/.test(f))||!c.allow_numeric_tld&&/^\d+$/.test(f)?!1:u.every(function(l){return!(l.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(l)||/[\uff01-\uff5e]/.test(l)||/^-|-$/.test(l)||!c.allow_underscores&&/_/.test(l))})}r.exports=e.default,r.exports.default=e.default})(NM,NM.exports);var QR=NM.exports,OM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=n(Ie);function n(l){return l&&l.__esModule?l:{default:l}}function i(l){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(l)}var s="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",a="(".concat(s,"[.]){3}").concat(s),o=new RegExp("^".concat(a,"$")),c="(?:[0-9a-fA-F]{1,4})",u=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(a,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(a,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(a,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(a,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(a,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(a,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(a,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function f(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(l);var h=(i(d)==="object"?d.version:arguments[1])||"";return h?h.toString()==="4"?o.test(l):h.toString()==="6"?u.test(l):!1:f(l,{version:4})||f(l,{version:6})}r.exports=e.default,r.exports.default=e.default})(OM,OM.exports);var h9=OM.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var t=c(Ie),n=c(zZ),i=c(HZ),s=c(QR),a=c(h9),o=c(hs);function c(b){return b&&b.__esModule?b:{default:b}}var u={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},f=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,l=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,d=/^[a-z\d]+$/,h=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,y=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,g=254;function m(b){var _=b.replace(/^"(.+)"$/,"$1");if(!_.trim())return!1;var C=/[\.";<>]/.test(_);if(C){if(_===b)return!1;var N=_.split('"').length===_.split('\\"').length;if(!N)return!1}return!0}function v(b,_){if((0,t.default)(b),_=(0,o.default)(_,u),_.require_display_name||_.allow_display_name){var C=b.match(f);if(C){var N=C[1];if(b=b.replace(N,"").replace(/(^<|>$)/g,""),N.endsWith(" ")&&(N=N.slice(0,-1)),!m(N))return!1}else if(_.require_display_name)return!1}if(!_.ignore_max_length&&b.length>g)return!1;var x=b.split("@"),I=x.pop(),$=I.toLowerCase();if(_.host_blacklist.length>0&&(0,n.default)($,_.host_blacklist)||_.host_whitelist.length>0&&!(0,n.default)($,_.host_whitelist))return!1;var j=x.join("@");if(_.domain_specific_validation&&($==="gmail.com"||$==="googlemail.com")){j=j.toLowerCase();var O=j.split("+")[0];if(!(0,i.default)(O.replace(/\./g,""),{min:6,max:30}))return!1;for(var E=O.split("."),S=0;S<E.length;S++)if(!d.test(E[S]))return!1}if(_.ignore_max_length===!1&&(!(0,i.default)(j,{max:64})||!(0,i.default)(I,{max:254})))return!1;if(!(0,s.default)(I,{require_tld:_.require_tld,ignore_max_length:_.ignore_max_length,allow_underscores:_.allow_underscores})){if(!_.allow_ip_domain)return!1;if(!(0,a.default)(I)){if(!I.startsWith("[")||!I.endsWith("]"))return!1;var A=I.slice(1,-1);if(A.length===0||!(0,a.default)(A))return!1}}if(_.blacklisted_chars&&j.search(new RegExp("[".concat(_.blacklisted_chars,"]+"),"g"))!==-1)return!1;if(j[0]==='"'&&j[j.length-1]==='"')return j=j.slice(1,j.length-1),_.allow_utf8_local_part?p.test(j):h.test(j);for(var w=_.allow_utf8_local_part?y:l,P=j.split("."),k=0;k<P.length;k++)if(!w.test(P[k]))return!1;return!0}r.exports=e.default,r.exports.default=e.default})(CM,CM.exports);var WZ=CM.exports,kM={exports:{}},DM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(i,s){return i.indexOf(s)!==-1};e.default=t,r.exports=e.default,r.exports.default=e.default})(DM,DM.exports);var KZ=DM.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=c(Ie),n=c(zZ),i=c(KZ),s=c(QR),a=c(h9),o=c(hs);function c(v){return v&&v.__esModule?v:{default:v}}function u(v,b){return y(v)||h(v,b)||l(v,b)||f()}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(v,b){if(v){if(typeof v=="string")return d(v,b);var _={}.toString.call(v).slice(8,-1);return _==="Object"&&v.constructor&&(_=v.constructor.name),_==="Map"||_==="Set"?Array.from(v):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?d(v,b):void 0}}function d(v,b){(b==null||b>v.length)&&(b=v.length);for(var _=0,C=Array(b);_<b;_++)C[_]=v[_];return C}function h(v,b){var _=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(_!=null){var C,N,x,I,$=[],j=!0,O=!1;try{if(x=(_=_.call(v)).next,b!==0)for(;!(j=(C=x.call(_)).done)&&($.push(C.value),$.length!==b);j=!0);}catch(E){O=!0,N=E}finally{try{if(!j&&_.return!=null&&(I=_.return(),Object(I)!==I))return}finally{if(O)throw N}}return $}}function y(v){if(Array.isArray(v))return v}var p={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},g=/^\[([^\]]+)\](?::([0-9]+))?$/;function m(v,b){if((0,t.default)(v),!v||/[\s<>]/.test(v)||v.indexOf("mailto:")===0||(b=(0,o.default)(b,p),b.validate_length&&v.length>b.max_allowed_length)||!b.allow_fragments&&(0,i.default)(v,"#")||!b.allow_query_components&&((0,i.default)(v,"?")||(0,i.default)(v,"&")))return!1;var _,C,N,x,I,$,j,O;if(j=v.split("#"),v=j.shift(),j=v.split("?"),v=j.shift(),j=v.split("://"),j.length>1){if(_=j.shift().toLowerCase(),b.require_valid_protocol&&b.protocols.indexOf(_)===-1)return!1}else{if(b.require_protocol)return!1;if(v.slice(0,2)==="//"){if(!b.allow_protocol_relative_urls)return!1;j[0]=v.slice(2)}}if(v=j.join("://"),v==="")return!1;if(j=v.split("/"),v=j.shift(),v===""&&!b.require_host)return!0;if(j=v.split("@"),j.length>1){if(b.disallow_auth||j[0]===""||(C=j.shift(),C.indexOf(":")>=0&&C.split(":").length>2))return!1;var E=C.split(":"),S=u(E,2),A=S[0],w=S[1];if(A===""&&w==="")return!1}x=j.join("@"),$=null,O=null;var P=x.match(g);if(P?(N="",O=P[1],$=P[2]||null):(j=x.split(":"),N=j.shift(),j.length&&($=j.join(":"))),$!==null&&$.length>0){if(I=parseInt($,10),!/^[0-9]+$/.test($)||I<=0||I>65535)return!1}else if(b.require_port)return!1;return b.host_whitelist?(0,n.default)(N,b.host_whitelist):N===""&&!b.require_host?!0:!(!(0,a.default)(N)&&!(0,s.default)(N,b)&&(!O||!(0,a.default)(O,6))||(N=N||O,b.host_blacklist&&(0,n.default)(N,b.host_blacklist)))}r.exports=e.default,r.exports.default=e.default})(kM,kM.exports);var Qwe=kM.exports,BM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=n(Ie);function n(l){return l&&l.__esModule?l:{default:l}}var i=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){4}([0-9a-fA-F]{2})$/,s=/^([0-9a-fA-F]){12}$/,a=/^([0-9a-fA-F]{4}\.){2}([0-9a-fA-F]{4})$/,o=/^(?:[0-9a-fA-F]{2}([-:\s]))([0-9a-fA-F]{2}\1){6}([0-9a-fA-F]{2})$/,c=/^([0-9a-fA-F]){16}$/,u=/^([0-9a-fA-F]{4}\.){3}([0-9a-fA-F]{4})$/;function f(l,d){return(0,t.default)(l),d!=null&&d.eui&&(d.eui=String(d.eui)),d!=null&&d.no_colons||d!=null&&d.no_separators?d.eui==="48"?s.test(l):d.eui==="64"?c.test(l):s.test(l)||c.test(l):(d==null?void 0:d.eui)==="48"?i.test(l)||a.test(l):(d==null?void 0:d.eui)==="64"?o.test(l)||u.test(l):f(l,{eui:"48"})||f(l,{eui:"64"})}r.exports=e.default,r.exports.default=e.default})(BM,BM.exports);var Zwe=BM.exports,$M={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(Ie),n=i(h9);function i(u){return u&&u.__esModule?u:{default:u}}var s=/^\d{1,3}$/,a=32,o=128;function c(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(0,t.default)(u);var l=u.split("/");if(l.length!==2||!s.test(l[1])||l[1].length>1&&l[1].startsWith("0"))return!1;var d=(0,n.default)(l[0],f);if(!d)return!1;var h=null;switch(String(f)){case"4":h=a;break;case"6":h=o;break;default:h=(0,n.default)(l[0],"6")?o:a}return l[1]<=h&&l[1]>=0}r.exports=e.default,r.exports.default=e.default})($M,$M.exports);var Jwe=$M.exports,LM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var t=n(hs);function n(p){return p&&p.__esModule?p:{default:p}}function i(p,g){return o(p)||a(p,g)||u(p,g)||s()}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a(p,g){var m=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(m!=null){var v,b,_,C,N=[],x=!0,I=!1;try{if(_=(m=m.call(p)).next,g!==0)for(;!(x=(v=_.call(m)).done)&&(N.push(v.value),N.length!==g);x=!0);}catch($){I=!0,b=$}finally{try{if(!x&&m.return!=null&&(C=m.return(),Object(C)!==C))return}finally{if(I)throw b}}return N}}function o(p){if(Array.isArray(p))return p}function c(p,g){var m=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!m){if(Array.isArray(p)||(m=u(p))||g){m&&(p=m);var v=0,b=function(){};return{s:b,n:function(){return v>=p.length?{done:!0}:{done:!1,value:p[v++]}},e:function(I){throw I},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,C=!0,N=!1;return{s:function(){m=m.call(p)},n:function(){var I=m.next();return C=I.done,I},e:function(I){N=!0,_=I},f:function(){try{C||m.return==null||m.return()}finally{if(N)throw _}}}}function u(p,g){if(p){if(typeof p=="string")return f(p,g);var m={}.toString.call(p).slice(8,-1);return m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set"?Array.from(p):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?f(p,g):void 0}}function f(p,g){(g==null||g>p.length)&&(g=p.length);for(var m=0,v=Array(g);m<g;m++)v[m]=p[m];return v}var l={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function d(p){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(p)}function h(p,g){for(var m=[],v=Math.max(p.length,g.length),b=0;b<v;b++)m.push([p[b],g[b]]);return m}function y(p,g){if(typeof g=="string"?g=(0,t.default)({format:g},l):g=(0,t.default)(g,l),typeof p=="string"&&d(g.format)){if(g.strictMode&&p.length!==g.format.length)return!1;var m=g.delimiters.find(function(w){return g.format.indexOf(w)!==-1}),v=g.strictMode?m:g.delimiters.find(function(w){return p.indexOf(w)!==-1}),b=h(p.split(v),g.format.toLowerCase().split(m)),_={},C=c(b),N;try{for(C.s();!(N=C.n()).done;){var x=i(N.value,2),I=x[0],$=x[1];if(!I||!$||I.length!==$.length)return!1;_[$.charAt(0)]=I}}catch(w){C.e(w)}finally{C.f()}var j=_.y;if(j.startsWith("-"))return!1;if(_.y.length===2){var O=parseInt(_.y,10);if(isNaN(O))return!1;var E=new Date().getFullYear()%100;O<E?j="20".concat(_.y):j="19".concat(_.y)}var S=_.m;_.m.length===1&&(S="0".concat(_.m));var A=_.d;return _.d.length===1&&(A="0".concat(_.d)),new Date("".concat(j,"-").concat(S,"-").concat(A,"T00:00:00.000Z")).getUTCDate()===+_.d}return g.strictMode?!1:Object.prototype.toString.call(p)==="[object Date]"&&isFinite(p)}r.exports=e.default,r.exports.default=e.default})(LM,LM.exports);var GZ=LM.exports,UM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(hs);function n(o){return o&&o.__esModule?o:{default:o}}var i={hourFormat:"hour24",mode:"default"},s={hour24:{default:/^([01]?[0-9]|2[0-3]):([0-5][0-9])$/,withSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,withOptionalSeconds:/^([01]?[0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$/},hour12:{default:/^(0?[1-9]|1[0-2]):([0-5][0-9]) (A|P)M$/,withSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9]):([0-5][0-9]) (A|P)M$/,withOptionalSeconds:/^(0?[1-9]|1[0-2]):([0-5][0-9])(?::([0-5][0-9]))? (A|P)M$/}};function a(o,c){return c=(0,t.default)(c,i),typeof o!="string"?!1:s[c.hourFormat][c.mode].test(o)}r.exports=e.default,r.exports.default=e.default})(UM,UM.exports);var Ywe=UM.exports,FM={exports:{}},jM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(i,s){return i.some(function(a){return s===a})};e.default=t,r.exports=e.default,r.exports.default=e.default})(jM,jM.exports);var R5=jM.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(Ie),n=i(R5);function i(u){return u&&u.__esModule?u:{default:u}}var s={loose:!1},a=["true","false","1","0"],o=[].concat(a,["yes","no"]);function c(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return(0,t.default)(u),f.loose?(0,n.default)(o,u.toLowerCase()):(0,n.default)(a,u)}r.exports=e.default,r.exports.default=e.default})(FM,FM.exports);var Xwe=FM.exports,qM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var t=n(Ie);function n(b){return b&&b.__esModule?b:{default:b}}var i="([A-Za-z]{3}(-[A-Za-z]{3}){0,2})",s="(([a-zA-Z]{2,3}(-".concat(i,")?)|([a-zA-Z]{5,8}))"),a="([A-Za-z]{4})",o="([A-Za-z]{2}|\\d{3})",c="([A-Za-z0-9]{5,8}|(\\d[A-Z-a-z0-9]{3}))",u="(\\d|[A-W]|[Y-Z]|[a-w]|[y-z])",f="(".concat(u,"(-[A-Za-z0-9]{2,8})+)"),l="(x(-[A-Za-z0-9]{1,8})+)",d="((en-GB-oed)|(i-ami)|(i-bnn)|(i-default)|(i-enochian)|(i-hak)|(i-klingon)|(i-lux)|(i-mingo)|(i-navajo)|(i-pwn)|(i-tao)|(i-tay)|(i-tsu)|(sgn-BE-FR)|(sgn-BE-NL)|(sgn-CH-DE))",h="((art-lojban)|(cel-gaulish)|(no-bok)|(no-nyn)|(zh-guoyu)|(zh-hakka)|(zh-min)|(zh-min-nan)|(zh-xiang))",y="(".concat(d,"|").concat(h,")"),p="(-|_)",g="".concat(s,"(").concat(p).concat(a,")?(").concat(p).concat(o,")?(").concat(p).concat(c,")*(").concat(p).concat(f,")*(").concat(p).concat(l,")?"),m=new RegExp("(^".concat(l,"$)|(^").concat(y,"$)|(^").concat(g,"$)"));function v(b){return(0,t.default)(b),m.test(b)}r.exports=e.default,r.exports.default=e.default})(qM,qM.exports);var e4e=qM.exports,VM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^(?!(1[3-9])|(20)|(3[3-9])|(4[0-9])|(5[0-9])|(60)|(7[3-9])|(8[1-9])|(9[0-2])|(9[3-9]))[0-9]{9}$/;function s(a){if((0,t.default)(a),!i.test(a))return!1;for(var o=0,c=0;c<a.length;c++)c%3===0?o+=a[c]*3:c%3===1?o+=a[c]*7:o+=a[c]*1;return o%10===0}r.exports=e.default,r.exports.default=e.default})(VM,VM.exports);var t4e=VM.exports,N5={};Object.defineProperty(N5,"__esModule",{value:!0});N5.default=i4e;N5.locales=void 0;var r4e=n4e(Ie),zM=Mr;function n4e(r){return r&&r.__esModule?r:{default:r}}function i4e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,r4e.default)(r);var n=r,i=t.ignore;if(i)if(i instanceof RegExp)n=n.replace(i,"");else if(typeof i=="string")n=n.replace(new RegExp("[".concat(i.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(e in zM.alpha)return zM.alpha[e].test(n);throw new Error("Invalid locale '".concat(e,"'"))}N5.locales=Object.keys(zM.alpha);var O5={};Object.defineProperty(O5,"__esModule",{value:!0});O5.default=o4e;O5.locales=void 0;var s4e=a4e(Ie),HM=Mr;function a4e(r){return r&&r.__esModule?r:{default:r}}function o4e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,s4e.default)(r);var n=r,i=t.ignore;if(i)if(i instanceof RegExp)n=n.replace(i,"");else if(typeof i=="string")n=n.replace(new RegExp("[".concat(i.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"");else throw new Error("ignore should be instance of a String or RegExp");if(e in HM.alphanumeric)return HM.alphanumeric[e].test(n);throw new Error("Invalid locale '".concat(e,"'"))}O5.locales=Object.keys(HM.alphanumeric);var WM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ie),n=Mr;function i(o){return o&&o.__esModule?o:{default:o}}var s=/^[0-9]+$/;function a(o,c){return(0,t.default)(o),c&&c.no_symbols?s.test(o):new RegExp("^[+-]?([0-9]*[".concat((c||{}).locale?n.decimal[c.locale]:".","])?[0-9]+$")).test(o)}r.exports=e.default,r.exports.default=e.default})(WM,WM.exports);var c4e=WM.exports,k5={};Object.defineProperty(k5,"__esModule",{value:!0});k5.default=l4e;k5.locales=void 0;var u4e=f4e(Ie);function f4e(r){return r&&r.__esModule?r:{default:r}}var KM={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,AZ:/^[A-Z]{1}\d{8}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BR:/^[A-Z]{2}\d{6}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$|^[A-Z]\d{6}[A-Z]{2}$/,CH:/^[A-Z]\d{7}$/,CN:/^G\d{8}$|^E(?![IO])[A-Z0-9]\d{7}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,ID:/^[A-C]\d{7}$/,IR:/^[A-Z]\d{8}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JM:/^[Aa]\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,KZ:/^[a-zA-Z]\d{7}$/,LI:/^[a-zA-Z]\d{5}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,LY:/^[A-Z0-9]{8}$/,MT:/^\d{7}$/,MZ:/^([A-Z]{2}\d{7})|(\d{2}[A-Z]{2}\d{5})$/,MY:/^[AHK]\d{8}$/,MX:/^\d{10,11}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,NZ:/^([Ll]([Aa]|[Dd]|[Ff]|[Hh])|[Ee]([Aa]|[Pp])|[Nn])\d{6}$/,PH:/^([A-Z](\d{6}|\d{7}[A-Z]))|([A-Z]{2}(\d{6}|\d{7}))$/,PK:/^[A-Z]{2}\d{7}$/,PL:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{9}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TH:/^[A-Z]{1,2}\d{6,7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$|^[A-Z]\d{8}$/,ZA:/^[TAMD]\d{8}$/};k5.locales=Object.keys(KM);function l4e(r,e){(0,u4e.default)(r);var t=r.replace(/\s/g,"").toUpperCase();return e.toUpperCase()in KM&&KM[e].test(t)}var GM={exports:{}},QM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(Ie),n=i(UZ);function i(c){return c&&c.__esModule?c:{default:c}}var s=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,a=/^[-+]?[0-9]+$/;function o(c,u){(0,t.default)(c),u=u||{};var f=u.allow_leading_zeroes===!1?s:a,l=!u.hasOwnProperty("min")||(0,n.default)(u.min)||c>=u.min,d=!u.hasOwnProperty("max")||(0,n.default)(u.max)||c<=u.max,h=!u.hasOwnProperty("lt")||(0,n.default)(u.lt)||c<u.lt,y=!u.hasOwnProperty("gt")||(0,n.default)(u.gt)||c>u.gt;return f.test(c)&&l&&d&&h&&y}r.exports=e.default,r.exports.default=e.default})(QM,QM.exports);var ZR=QM.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(ZR);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s,{allow_leading_zeroes:!1,min:0,max:65535})}r.exports=e.default,r.exports.default=e.default})(GM,GM.exports);var d4e=GM.exports,ZM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s===s.toLowerCase()}r.exports=e.default,r.exports.default=e.default})(ZM,ZM.exports);var h4e=ZM.exports,JM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s===s.toUpperCase()}r.exports=e.default,r.exports.default=e.default})(JM,JM.exports);var p4e=JM.exports,YM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(Ie);function n(o){return o&&o.__esModule?o:{default:o}}var i=/^[0-9]{15}$/,s=/^\d{2}-\d{6}-\d{6}-\d{1}$/;function a(o,c){(0,t.default)(o),c=c||{};var u=i;if(c.allow_hyphens&&(u=s),!u.test(o))return!1;o=o.replace(/-/g,"");for(var f=0,l=2,d=14,h=0;h<d;h++){var y=o.substring(d-h-1,d-h),p=parseInt(y,10)*l;p>=10?f+=p%10+1:f+=p,l===1?l+=1:l-=1}var g=(10-f%10)%10;return g===parseInt(o.substring(14,15),10)}r.exports=e.default,r.exports.default=e.default})(YM,YM.exports);var y4e=YM.exports,XM={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^[\x00-\x7F]+$/;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(XM,XM.exports);var m4e=XM.exports,P6={};Object.defineProperty(P6,"__esModule",{value:!0});P6.default=x4e;P6.fullWidth=void 0;var b4e=g4e(Ie);function g4e(r){return r&&r.__esModule?r:{default:r}}var v4e=P6.fullWidth=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function x4e(r){return(0,b4e.default)(r),v4e.test(r)}var T6={};Object.defineProperty(T6,"__esModule",{value:!0});T6.default=_4e;T6.halfWidth=void 0;var w4e=E4e(Ie);function E4e(r){return r&&r.__esModule?r:{default:r}}var A4e=T6.halfWidth=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;function _4e(r){return(0,w4e.default)(r),A4e.test(r)}var eP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=s(Ie),n=P6,i=T6;function s(o){return o&&o.__esModule?o:{default:o}}function a(o){return(0,t.default)(o),n.fullWidth.test(o)&&i.halfWidth.test(o)}r.exports=e.default,r.exports.default=e.default})(eP,eP.exports);var S4e=eP.exports,tP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/[^\x00-\x7F]/;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(tP,tP.exports);var M4e=tP.exports,rP={exports:{}},nP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(n,i){var s=n.join("");return new RegExp(s,i)}r.exports=e.default,r.exports.default=e.default})(nP,nP.exports);var P4e=nP.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ie),n=i(P4e);function i(o){return o&&o.__esModule?o:{default:o}}var s=(0,n.default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");function a(o){return(0,t.default)(o),s.test(o)}r.exports=e.default,r.exports.default=e.default})(rP,rP.exports);var T4e=rP.exports,iP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(iP,iP.exports);var C4e=iP.exports,sP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=a(hs),n=a(Ie),i=a(R5),s=Mr;function a(l){return l&&l.__esModule?l:{default:l}}function o(l){var d=new RegExp("^[-+]?([0-9]+)?(\\".concat(s.decimal[l.locale],"[0-9]{").concat(l.decimal_digits,"})").concat(l.force_decimal?"":"?","$"));return d}var c={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},u=["","-","+"];function f(l,d){if((0,n.default)(l),d=(0,t.default)(d,c),d.locale in s.decimal)return!(0,i.default)(u,l.replace(/ /g,""))&&o(d).test(l);throw new Error("Invalid locale '".concat(d.locale,"'"))}r.exports=e.default,r.exports.default=e.default})(sP,sP.exports);var I4e=sP.exports,aP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^(0x|0h)?[0-9A-F]+$/i;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(aP,aP.exports);var QZ=aP.exports,oP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^(0o)?[0-7]+$/i;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(oP,oP.exports);var R4e=oP.exports,cP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(Ie),n=i(qZ);function i(a){return a&&a.__esModule?a:{default:a}}function s(a,o){return(0,t.default)(a),(0,n.default)(a)%parseInt(o,10)===0}r.exports=e.default,r.exports.default=e.default})(cP,cP.exports);var N4e=cP.exports,uP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(uP,uP.exports);var O4e=uP.exports,fP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=n(Ie);function n(l){return l&&l.__esModule?l:{default:l}}function i(l){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(l)}var s=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,a=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d\d?|1(\.0)?|0(\.0)?)\)$/,o=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)$/,c=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d\d?|1(\.0)?|0(\.0)?)\)$/,u=/^rgba?/;function f(l,d){(0,t.default)(l);var h=!1,y=!0;if(i(d)!=="object"?arguments.length>=2&&(y=arguments[1]):(h=d.allowSpaces!==void 0?d.allowSpaces:h,y=d.includePercentValues!==void 0?d.includePercentValues:y),h){if(!u.test(l))return!1;l=l.replace(/\s/g,"")}return y?s.test(l)||a.test(l)||o.test(l)||c.test(l):s.test(l)||a.test(l)}r.exports=e.default,r.exports.default=e.default})(fP,fP.exports);var k4e=fP.exports,lP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(Ie);function n(o){return o&&o.__esModule?o:{default:o}}var i=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(,(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}(,((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?))?\)$/i,s=/^hsla?\(((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn)?(\s(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s?(\/\s((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s?)?\)$/i;function a(o){(0,t.default)(o);var c=o.replace(/\s+/g," ").replace(/\s?(hsla?\(|\)|,)\s?/ig,"$1");return c.indexOf(",")!==-1?i.test(c):s.test(c)}r.exports=e.default,r.exports.default=e.default})(lP,lP.exports);var D4e=lP.exports,dP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(dP,dP.exports);var B4e=dP.exports,D5={};Object.defineProperty(D5,"__esModule",{value:!0});D5.default=j4e;D5.locales=void 0;var $4e=ZZ(Ie),GL=ZZ(R5);function ZZ(r){return r&&r.__esModule?r:{default:r}}var tw={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,DZ:/^(DZ\d{24})$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MA:/^(MA[0-9]{26})$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,MZ:/^(MZ[0-9]{2})\d{21}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};function L4e(r){var e=r.filter(function(t){return!(t in tw)});return!(e.length>0)}function U4e(r,e){var t=r.replace(/[\s\-]+/gi,"").toUpperCase(),n=t.slice(0,2).toUpperCase(),i=n in tw;if(e.whitelist){if(!L4e(e.whitelist))return!1;var s=(0,GL.default)(e.whitelist,n);if(!s)return!1}if(e.blacklist){var a=(0,GL.default)(e.blacklist,n);if(a)return!1}return i&&tw[n].test(t)}function F4e(r){var e=r.replace(/[^A-Z0-9]+/gi,"").toUpperCase(),t=e.slice(4)+e.slice(0,4),n=t.replace(/[A-Z]/g,function(s){return s.charCodeAt(0)-55}),i=n.match(/\d{1,7}/g).reduce(function(s,a){return Number(s+a)%97},"");return i===1}function j4e(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,$4e.default)(r),U4e(r,e)&&F4e(r)}D5.locales=Object.keys(tw);var hP={exports:{}},C6={};Object.defineProperty(C6,"__esModule",{value:!0});C6.CountryCodes=void 0;C6.default=z4e;var q4e=V4e(Ie);function V4e(r){return r&&r.__esModule?r:{default:r}}var JZ=new Set(["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"]);function z4e(r){return(0,q4e.default)(r),JZ.has(r.toUpperCase())}C6.CountryCodes=JZ;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ie),n=C6;function i(o){return o&&o.__esModule?o:{default:o}}var s=/^[A-Za-z]{6}[A-Za-z0-9]{2}([A-Za-z0-9]{3})?$/;function a(o){(0,t.default)(o);var c=o.slice(4,6).toUpperCase();return!n.CountryCodes.has(c)&&c!=="XK"?!1:s.test(o)}r.exports=e.default,r.exports.default=e.default})(hP,hP.exports);var H4e=hP.exports,pP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^[a-f0-9]{32}$/;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(pP,pP.exports);var W4e=pP.exports,yP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};function s(a,o){(0,t.default)(a);var c=new RegExp("^[a-fA-F0-9]{".concat(i[o],"}$"));return c.test(a)}r.exports=e.default,r.exports.default=e.default})(yP,yP.exports);var K4e=yP.exports,mP={exports:{}},bP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=i(Ie),n=i(hs);function i(f){return f&&f.__esModule?f:{default:f}}var s=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})$/,a=/^[A-Za-z0-9+/]+$/,o=/^(?:[A-Za-z0-9_-]{4})*(?:[A-Za-z0-9_-]{2}==|[A-Za-z0-9_-]{3}=|[A-Za-z0-9_-]{4})$/,c=/^[A-Za-z0-9_-]+$/;function u(f,l){var d;if((0,t.default)(f),l=(0,n.default)(l,{urlSafe:!1,padding:!((d=l)!==null&&d!==void 0&&d.urlSafe)}),f==="")return!0;var h;return l.urlSafe?h=l.padding?o:c:h=l.padding?s:a,(!l.padding||f.length%4===0)&&h.test(f)}r.exports=e.default,r.exports.default=e.default})(bP,bP.exports);var YZ=bP.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(Ie),n=i(YZ);function i(a){return a&&a.__esModule?a:{default:a}}function s(a){(0,t.default)(a);var o=a.split("."),c=o.length;return c!==3?!1:o.reduce(function(u,f){return u&&(0,n.default)(f,{urlSafe:!0})},!0)}r.exports=e.default,r.exports.default=e.default})(mP,mP.exports);var G4e=mP.exports,gP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=s(Ie),n=s(R5),i=s(hs);function s(u){return u&&u.__esModule?u:{default:u}}function a(u){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},a(u)}var o={allow_primitives:!1};function c(u,f){(0,t.default)(u);try{f=(0,i.default)(f,o);var l=[];f.allow_primitives&&(l=[null,!1,!0]);var d=JSON.parse(u);return(0,n.default)(l,d)||!!d&&a(d)==="object"}catch{}return!1}r.exports=e.default,r.exports.default=e.default})(gP,gP.exports);var Q4e=gP.exports,vP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ie),n=i(hs);function i(o){return o&&o.__esModule?o:{default:o}}var s={ignore_whitespace:!1};function a(o,c){return(0,t.default)(o),c=(0,n.default)(c,s),(c.ignore_whitespace?o.trim().length:o.length)===0}r.exports=e.default,r.exports.default=e.default})(vP,vP.exports);var Z4e=vP.exports,xP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}function i(a){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i(a)}function s(a,o){(0,t.default)(a);var c,u;i(o)==="object"?(c=o.min||0,u=o.max):(c=arguments[1]||0,u=arguments[2]);var f=a.match(/(\uFE0F|\uFE0E)/g)||[],l=a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],d=a.length-f.length-l.length,h=d>=c&&(typeof u>"u"||d<=u);return h&&Array.isArray(o==null?void 0:o.discreteLengths)?o.discreteLengths.some(function(y){return y===d}):h}r.exports=e.default,r.exports.default=e.default})(xP,xP.exports);var J4e=xP.exports,wP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),/^[0-7][0-9A-HJKMNP-TV-Z]{25}$/i.test(s)}r.exports=e.default,r.exports.default=e.default})(wP,wP.exports);var Y4e=wP.exports,EP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,6:/^[0-9A-F]{8}-[0-9A-F]{4}-6[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,7:/^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,8:/^[0-9A-F]{8}-[0-9A-F]{4}-8[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,nil:/^00000000-0000-0000-0000-000000000000$/i,max:/^ffffffff-ffff-ffff-ffff-ffffffffffff$/i,loose:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,all:/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i};function s(a,o){return(0,t.default)(a),o==null&&(o="all"),o in i?i[o].test(a):!1}r.exports=e.default,r.exports.default=e.default})(EP,EP.exports);var X4e=EP.exports,AP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(Ie),n=i(QZ);function i(a){return a&&a.__esModule?a:{default:a}}function s(a){return(0,t.default)(a),(0,n.default)(a)&&a.length===24}r.exports=e.default,r.exports.default=e.default})(AP,AP.exports);var e9e=AP.exports,_P={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(GR);function n(a){return a&&a.__esModule?a:{default:a}}function i(a){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i(a)}function s(a,o){var c=(i(o)==="object"?o.comparisonDate:o)||Date().toString(),u=(0,t.default)(c),f=(0,t.default)(a);return!!(f&&u&&f>u)}r.exports=e.default,r.exports.default=e.default})(_P,_P.exports);var t9e=_P.exports,SP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(GR);function n(a){return a&&a.__esModule?a:{default:a}}function i(a){"@babel/helpers - typeof";return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},i(a)}function s(a,o){var c=(i(o)==="object"?o.comparisonDate:o)||Date().toString(),u=(0,t.default)(c),f=(0,t.default)(a);return!!(f&&u&&f<u)}r.exports=e.default,r.exports.default=e.default})(SP,SP.exports);var r9e=SP.exports,MP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=i(Ie),n=i(VZ);function i(o){return o&&o.__esModule?o:{default:o}}function s(o){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(o)}function a(o,c){(0,t.default)(o);var u;if(Object.prototype.toString.call(c)==="[object Array]"){var f=[];for(u in c)({}).hasOwnProperty.call(c,u)&&(f[u]=(0,n.default)(c[u]));return f.indexOf(o)>=0}else{if(s(c)==="object")return c.hasOwnProperty(o);if(c&&typeof c.indexOf=="function")return c.indexOf(o)>=0}return!1}r.exports=e.default,r.exports.default=e.default})(MP,MP.exports);var n9e=MP.exports,PP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){(0,t.default)(s);for(var a=s.replace(/[- ]+/g,""),o=0,c,u,f,l=a.length-1;l>=0;l--)c=a.substring(l,l+1),u=parseInt(c,10),f?(u*=2,u>=10?o+=u%10+1:o+=u):o+=u,f=!f;return!!(o%10===0&&a)}r.exports=e.default,r.exports.default=e.default})(PP,PP.exports);var XZ=PP.exports,TP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(Ie),n=i(XZ);function i(c){return c&&c.__esModule?c:{default:c}}var s={amex:/^3[47][0-9]{13}$/,dinersclub:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,discover:/^6(?:011|5[0-9][0-9])[0-9]{12,15}$/,jcb:/^(?:2131|1800|35\d{3})\d{11}$/,mastercard:/^5[1-5][0-9]{2}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/,unionpay:/^(6[27][0-9]{14}|^(81[0-9]{14,17}))$/,visa:/^(?:4[0-9]{12})(?:[0-9]{3,6})?$/},a=function(){var c=[];for(var u in s)s.hasOwnProperty(u)&&c.push(s[u]);return c}();function o(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(c);var f=u.provider,l=c.replace(/[- ]+/g,"");if(f&&f.toLowerCase()in s){if(!s[f.toLowerCase()].test(l))return!1}else{if(f&&!(f.toLowerCase()in s))throw new Error("".concat(f," is not a valid credit card provider."));if(!a.some(function(d){return d.test(l)}))return!1}return(0,n.default)(c)}r.exports=e.default,r.exports.default=e.default})(TP,TP.exports);var i9e=TP.exports,CP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=s(Ie),n=s(R5),i=s(ZR);function s(c){return c&&c.__esModule?c:{default:c}}var a={PL:function(u){(0,t.default)(u);var f={1:1,2:3,3:7,4:9,5:1,6:3,7:7,8:9,9:1,10:3,11:0};if(u!=null&&u.length===11&&(0,i.default)(u,{allow_leading_zeroes:!0})){var l=u.split("").slice(0,-1),d=l.reduce(function(p,g,m){return p+Number(g)*f[m+1]},0),h=d%10,y=Number(u.charAt(u.length-1));if(h===0&&y===0||y===10-h)return!0}return!1},ES:function(u){(0,t.default)(u);var f=/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/,l={X:0,Y:1,Z:2},d=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"],h=u.trim().toUpperCase();if(!f.test(h))return!1;var y=h.slice(0,-1).replace(/[X,Y,Z]/g,function(p){return l[p]});return h.endsWith(d[y%23])},FI:function(u){if((0,t.default)(u),u.length!==11||!u.match(/^\d{6}[\-A\+]\d{3}[0-9ABCDEFHJKLMNPRSTUVWXY]{1}$/))return!1;var f="0123456789ABCDEFHJKLMNPRSTUVWXY",l=parseInt(u.slice(0,6),10)*1e3+parseInt(u.slice(7,10),10),d=l%31,h=f[d];return h===u.slice(10,11)},IN:function(u){var f=/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/,l=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],d=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],h=u.trim();if(!f.test(h))return!1;var y=0,p=h.replace(/\s/g,"").split("").map(Number).reverse();return p.forEach(function(g,m){y=l[y][d[m%8][g]]}),y===0},IR:function(u){if(!u.match(/^\d{10}$/)||(u="0000".concat(u).slice(u.length-6),parseInt(u.slice(3,9),10)===0))return!1;for(var f=parseInt(u.slice(9,10),10),l=0,d=0;d<9;d++)l+=parseInt(u.slice(d,d+1),10)*(10-d);return l%=11,l<2&&f===l||l>=2&&f===11-l},IT:function(u){return u.length!==9||u==="CA00000AA"?!1:u.search(/C[A-Z]\d{5}[A-Z]{2}/i)>-1},NO:function(u){var f=u.trim();if(isNaN(Number(f))||f.length!==11||f==="00000000000")return!1;var l=f.split("").map(Number),d=(11-(3*l[0]+7*l[1]+6*l[2]+1*l[3]+8*l[4]+9*l[5]+4*l[6]+5*l[7]+2*l[8])%11)%11,h=(11-(5*l[0]+4*l[1]+3*l[2]+2*l[3]+7*l[4]+6*l[5]+5*l[6]+4*l[7]+3*l[8]+2*d)%11)%11;return!(d!==l[9]||h!==l[10])},TH:function(u){if(!u.match(/^[1-8]\d{12}$/))return!1;for(var f=0,l=0;l<12;l++)f+=parseInt(u[l],10)*(13-l);return u[12]===((11-f%11)%10).toString()},LK:function(u){var f=/^[1-9]\d{8}[vx]$/i,l=/^[1-9]\d{11}$/i;return u.length===10&&f.test(u)?!0:!!(u.length===12&&l.test(u))},"he-IL":function(u){var f=/^\d{9}$/,l=u.trim();if(!f.test(l))return!1;for(var d=l,h=0,y,p=0;p<d.length;p++)y=Number(d[p])*(p%2+1),h+=y>9?y-9:y;return h%10===0},"ar-LY":function(u){var f=/^(1|2)\d{11}$/,l=u.trim();return!!f.test(l)},"ar-TN":function(u){var f=/^\d{8}$/,l=u.trim();return!!f.test(l)},"zh-CN":function(u){var f=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],l=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],d=["1","0","X","9","8","7","6","5","4","3","2"],h=function(C){return(0,n.default)(f,C)},y=function(C){var N=parseInt(C.substring(0,4),10),x=parseInt(C.substring(4,6),10),I=parseInt(C.substring(6),10),$=new Date(N,x-1,I);return $>new Date?!1:$.getFullYear()===N&&$.getMonth()===x-1&&$.getDate()===I},p=function(C){for(var N=C.substring(0,17),x=0,I=0;I<17;I++)x+=parseInt(N.charAt(I),10)*parseInt(l[I],10);var $=x%11;return d[$]},g=function(C){return p(C)===C.charAt(17).toUpperCase()},m=function(C){var N=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(C);if(!N)return!1;var x=C.substring(0,2);if(N=h(x),!N)return!1;var I="19".concat(C.substring(6,12));return N=y(I),!!N},v=function(C){var N=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(C);if(!N)return!1;var x=C.substring(0,2);if(N=h(x),!N)return!1;var I=C.substring(6,14);return N=y(I),N?g(C):!1},b=function(C){var N=/^\d{15}|(\d{17}(\d|x|X))$/.test(C);return N?C.length===15?m(C):v(C):!1};return b(u)},"zh-HK":function(u){u=u.trim();var f=/^[A-Z]{1,2}[0-9]{6}((\([0-9A]\))|(\[[0-9A]\])|([0-9A]))$/,l=/^[0-9]$/;if(u=u.toUpperCase(),!f.test(u))return!1;u=u.replace(/\[|\]|\(|\)/g,""),u.length===8&&(u="3".concat(u));for(var d=0,h=0;h<=7;h++){var y=void 0;l.test(u[h])?y=u[h]:y=(u[h].charCodeAt(0)-55)%11,d+=y*(9-h)}d%=11;var p;return d===0?p="0":d===1?p="A":p=String(11-d),p===u[u.length-1]},"zh-TW":function(u){var f={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},l=u.trim().toUpperCase();return/^[A-Z][0-9]{9}$/.test(l)?Array.from(l).reduce(function(d,h,y){if(y===0){var p=f[h];return p%10*9+Math.floor(p/10)}return y===9?(10-d%10-Number(h))%10===0:d+Number(h)*(9-y)},0):!1},PK:function(u){var f=/^[1-7][0-9]{4}-[0-9]{7}-[1-9]$/,l=u.trim();return f.test(l)}};function o(c,u){if((0,t.default)(c),u in a)return a[u](c);if(u==="any"){for(var f in a)if(a.hasOwnProperty(f)){var l=a[f];if(l(c))return!0}return!1}throw new Error("Invalid locale '".concat(u,"'"))}r.exports=e.default,r.exports.default=e.default})(CP,CP.exports);var s9e=CP.exports,IP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var t=n(Ie);function n(f){return f&&f.__esModule?f:{default:f}}var i=8,s=14,a=/^(\d{8}|\d{13}|\d{14})$/;function o(f,l){return f===i||f===s?l%2===0?3:1:l%2===0?1:3}function c(f){var l=f.slice(0,-1).split("").map(function(h,y){return Number(h)*o(f.length,y)}).reduce(function(h,y){return h+y},0),d=10-l%10;return d<10?d:0}function u(f){(0,t.default)(f);var l=Number(f.slice(-1));return a.test(f)&&l===c(f)}r.exports=e.default,r.exports.default=e.default})(IP,IP.exports);var a9e=IP.exports,RP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;function s(a){if((0,t.default)(a),!i.test(a))return!1;for(var o=!0,c=0,u=a.length-2;u>=0;u--)if(a[u]>="A"&&a[u]<="Z")for(var f=a[u].charCodeAt(0)-55,l=f%10,d=Math.trunc(f/10),h=0,y=[l,d];h<y.length;h++){var p=y[h];o?p>=5?c+=1+(p-5)*2:c+=p*2:c+=p,o=!o}else{var g=a[u].charCodeAt(0)-48;o?g>=5?c+=1+(g-5)*2:c+=g*2:c+=g,o=!o}var m=Math.trunc((c+9)/10)*10-c;return+a[a.length-1]===m}r.exports=e.default,r.exports.default=e.default})(RP,RP.exports);var o9e=RP.exports,NP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(Ie);function n(c){return c&&c.__esModule?c:{default:c}}var i=/^(?:[0-9]{9}X|[0-9]{10})$/,s=/^(?:[0-9]{13})$/,a=[1,3];function o(c,u){(0,t.default)(c);var f=String((u==null?void 0:u.version)||u);if(!(u!=null&&u.version||u))return o(c,{version:10})||o(c,{version:13});var l=c.replace(/[\s-]+/g,""),d=0;if(f==="10"){if(!i.test(l))return!1;for(var h=0;h<f-1;h++)d+=(h+1)*l.charAt(h);if(l.charAt(9)==="X"?d+=10*10:d+=10*l.charAt(9),d%11===0)return!0}else if(f==="13"){if(!s.test(l))return!1;for(var y=0;y<12;y++)d+=a[y%2]*l.charAt(y);if(l.charAt(12)-(10-d%10)%10===0)return!0}return!1}r.exports=e.default,r.exports.default=e.default})(NP,NP.exports);var c9e=NP.exports,OP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i="^\\d{4}-?\\d{3}[\\dX]$";function s(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(a);var c=i;if(c=o.require_hyphen?c.replace("?",""):c,c=o.case_sensitive?new RegExp(c):new RegExp(c,"i"),!c.test(a))return!1;for(var u=a.replace("-","").toUpperCase(),f=0,l=0;l<u.length;l++){var d=u[l];f+=(d==="X"?10:+d)*(8-l)}return f%11===0}r.exports=e.default,r.exports.default=e.default})(OP,OP.exports);var u9e=OP.exports,kP={exports:{}},Pp={};Object.defineProperty(Pp,"__esModule",{value:!0});Pp.iso7064Check=f9e;Pp.luhnCheck=l9e;Pp.reverseMultiplyAndSum=d9e;Pp.verhoeffCheck=h9e;function f9e(r){for(var e=10,t=0;t<r.length-1;t++)e=(parseInt(r[t],10)+e)%10===0?10*2%11:(parseInt(r[t],10)+e)%10*2%11;return e=e===1?0:11-e,e===parseInt(r[10],10)}function l9e(r){for(var e=0,t=!1,n=r.length-1;n>=0;n--){if(t){var i=parseInt(r[n],10)*2;i>9?e+=i.toString().split("").map(function(s){return parseInt(s,10)}).reduce(function(s,a){return s+a},0):e+=i}else e+=parseInt(r[n],10);t=!t}return e%10===0}function d9e(r,e){for(var t=0,n=0;n<r.length;n++)t+=r[n]*(e-n);return t}function h9e(r){for(var e=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],t=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],n=r.split("").reverse().join(""),i=0,s=0;s<n.length;s++)i=e[i][t[s%8][parseInt(n[s],10)]];return i===0}(function(r,e){function t(te){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},t(te)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ue;var n=o(Ie),i=a(Pp),s=o(GZ);function a(te,J){if(typeof WeakMap=="function")var se=new WeakMap,be=new WeakMap;return(a=function(he,Te){if(!Te&&he&&he.__esModule)return he;var _e,ke,tt={__proto__:null,default:he};if(he===null||t(he)!="object"&&typeof he!="function")return tt;if(_e=Te?be:se){if(_e.has(he))return _e.get(he);_e.set(he,tt)}for(var V in he)V!=="default"&&{}.hasOwnProperty.call(he,V)&&((ke=(_e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(he,V))&&(ke.get||ke.set)?_e(tt,V,ke):tt[V]=he[V]);return tt})(te,J)}function o(te){return te&&te.__esModule?te:{default:te}}function c(te){return d(te)||l(te)||f(te)||u()}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(te,J){if(te){if(typeof te=="string")return h(te,J);var se={}.toString.call(te).slice(8,-1);return se==="Object"&&te.constructor&&(se=te.constructor.name),se==="Map"||se==="Set"?Array.from(te):se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se)?h(te,J):void 0}}function l(te){if(typeof Symbol<"u"&&te[Symbol.iterator]!=null||te["@@iterator"]!=null)return Array.from(te)}function d(te){if(Array.isArray(te))return h(te)}function h(te,J){(J==null||J>te.length)&&(J=te.length);for(var se=0,be=Array(J);se<J;se++)be[se]=te[se];return be}function y(te){var J=te.slice(0,2),se=parseInt(te.slice(2,4),10);se>40?(se-=40,J="20".concat(J)):se>20?(se-=20,J="18".concat(J)):J="19".concat(J),se<10&&(se="0".concat(se));var be="".concat(J,"/").concat(se,"/").concat(te.slice(4,6));if(!(0,s.default)(be,"YYYY/MM/DD"))return!1;for(var pe=te.split("").map(function(ke){return parseInt(ke,10)}),he=[2,4,8,5,10,9,7,3,6],Te=0,_e=0;_e<he.length;_e++)Te+=pe[_e]*he[_e];return Te=Te%11===10?0:Te%11,Te===pe[9]}function p(te){var J=te.split(""),se=J.filter(function(pe,he){return he%2}).map(function(pe){return Number(pe)*2}).join("").split(""),be=J.filter(function(pe,he){return!(he%2)}).concat(se).map(function(pe){return Number(pe)}).reduce(function(pe,he){return pe+he});return be%10===0}function g(te){te=te.replace(/\W/,"");var J=parseInt(te.slice(0,2),10);if(te.length===10)J<54?J="20".concat(J):J="19".concat(J);else{if(te.slice(6)==="000")return!1;if(J<54)J="19".concat(J);else return!1}J.length===3&&(J=[J.slice(0,2),"0",J.slice(2)].join(""));var se=parseInt(te.slice(2,4),10);if(se>50&&(se-=50),se>20){if(parseInt(J,10)<2004)return!1;se-=20}se<10&&(se="0".concat(se));var be="".concat(J,"/").concat(se,"/").concat(te.slice(4,6));if(!(0,s.default)(be,"YYYY/MM/DD"))return!1;if(te.length===10&&parseInt(te,10)%11!==0){var pe=parseInt(te.slice(0,9),10)%11;if(parseInt(J,10)<1986&&pe===10){if(parseInt(te.slice(9),10)!==0)return!1}else return!1}return!0}function m(te){return i.luhnCheck(te)}function v(te){for(var J=te.split("").map(function(ke){return parseInt(ke,10)}),se=[],be=0;be<J.length-1;be++){se.push("");for(var pe=0;pe<J.length-1;pe++)J[be]===J[pe]&&(se[be]+=pe)}if(se=se.filter(function(ke){return ke.length>1}),se.length!==2&&se.length!==3)return!1;if(se[0].length===3){for(var he=se[0].split("").map(function(ke){return parseInt(ke,10)}),Te=0,_e=0;_e<he.length-1;_e++)he[_e]+1===he[_e+1]&&(Te+=1);if(Te===2)return!1}return i.iso7064Check(te)}function b(te){te=te.replace(/\W/,"");var J=parseInt(te.slice(4,6),10),se=te.slice(6,7);switch(se){case"0":case"1":case"2":case"3":J="19".concat(J);break;case"4":case"9":J<37?J="20".concat(J):J="19".concat(J);break;default:if(J<37)J="20".concat(J);else if(J>58)J="18".concat(J);else return!1;break}J.length===3&&(J=[J.slice(0,2),"0",J.slice(2)].join(""));var be="".concat(J,"/").concat(te.slice(2,4),"/").concat(te.slice(0,2));if(!(0,s.default)(be,"YYYY/MM/DD"))return!1;for(var pe=te.split("").map(function(ke){return parseInt(ke,10)}),he=0,Te=4,_e=0;_e<9;_e++)he+=pe[_e]*Te,Te-=1,Te===1&&(Te=7);return he%=11,he===1?!1:he===0?pe[9]===0:pe[9]===11-he}function _(te){for(var J=te.slice(0,8).split("").map(function(he){return parseInt(he,10)}),se=0,be=1;be<J.length;be+=2)se+=J[be];for(var pe=0;pe<J.length;pe+=2)J[pe]<2?se+=1-J[pe]:(se+=2*(J[pe]-2)+5,J[pe]>4&&(se+=2));return String.fromCharCode(se%26+65)===te.charAt(8)}function C(te){for(var J=te.split("").map(function(pe){return parseInt(pe,10)}),se=0,be=0;be<8;be++)se+=J[be]*Math.pow(2,8-be);return se%11%10===J[8]}function N(te){var J=i.reverseMultiplyAndSum(te.split("").slice(0,7).map(function(se){return parseInt(se,10)}),8);return te.length===9&&te[8]!=="W"&&(J+=(te[8].charCodeAt(0)-64)*9),J%=23,J===0?te[7].toUpperCase()==="W":te[7].toUpperCase()===String.fromCharCode(64+J)}var x={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function I(){var te=[];for(var J in x)x.hasOwnProperty(J)&&te.push.apply(te,c(x[J]));return te}function $(te){return I().indexOf(te.slice(0,2))!==-1}function j(te){for(var J=0,se=te.split(""),be=parseInt(se.pop(),10),pe=0;pe<se.length;pe++)J+=se[9-pe]*(2+pe%6);var he=11-J%11;return he===11?he=0:he===10&&(he=9),be===he}function O(te){var J=te.toUpperCase().split("");if(isNaN(parseInt(J[0],10))&&J.length>1){var se=0;switch(J[0]){case"Y":se=1;break;case"Z":se=2;break}J.splice(0,1,se)}else for(;J.length<9;)J.unshift(0);var be=["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"];J=J.join("");var pe=parseInt(J.slice(0,8),10)%23;return J[8]===be[pe]}function E(te){var J=te.slice(1,3),se=te.slice(0,1);switch(se){case"1":case"2":J="18".concat(J);break;case"3":case"4":J="19".concat(J);break;default:J="20".concat(J);break}var be="".concat(J,"/").concat(te.slice(3,5),"/").concat(te.slice(5,7));if(!(0,s.default)(be,"YYYY/MM/DD"))return!1;for(var pe=te.split("").map(function(tt){return parseInt(tt,10)}),he=0,Te=1,_e=0;_e<10;_e++)he+=pe[_e]*Te,Te+=1,Te===10&&(Te=1);if(he%11===10){he=0,Te=3;for(var ke=0;ke<10;ke++)he+=pe[ke]*Te,Te+=1,Te===10&&(Te=1);if(he%11===10)return pe[10]===0}return he%11===pe[10]}function S(te){var J=te.slice(4,6),se=te.slice(6,7);switch(se){case"+":J="18".concat(J);break;case"-":J="19".concat(J);break;default:J="20".concat(J);break}var be="".concat(J,"/").concat(te.slice(2,4),"/").concat(te.slice(0,2));if(!(0,s.default)(be,"YYYY/MM/DD"))return!1;var pe=parseInt(te.slice(0,6)+te.slice(7,10),10)%31;if(pe<10)return pe===parseInt(te.slice(10),10);pe-=10;var he=["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"];return he[pe]===te.slice(10)}function A(te){if(te.slice(2,4)!=="00"||te.slice(4,6)!=="00"){var J="".concat(te.slice(0,2),"/").concat(te.slice(2,4),"/").concat(te.slice(4,6));if(!(0,s.default)(J,"YY/MM/DD"))return!1}var se=97-parseInt(te.slice(0,9),10)%97,be=parseInt(te.slice(9,11),10);return!(se!==be&&(se=97-parseInt("2".concat(te.slice(0,9)),10)%97,se!==be))}function w(te){te=te.replace(/\s/g,"");var J=parseInt(te.slice(0,10),10)%511,se=parseInt(te.slice(10,13),10);return J===se}function P(te){var J="".concat(te.slice(0,4),"/").concat(te.slice(4,6),"/").concat(te.slice(6,8));return!(0,s.default)(J,"YYYY/MM/DD")||!i.luhnCheck(te.slice(0,12))?!1:i.verhoeffCheck("".concat(te.slice(0,11)).concat(te[12]))}function k(te){return i.iso7064Check(te)}function D(te){for(var J=te.split("").map(function(pe){return parseInt(pe,10)}),se=8,be=1;be<9;be++)se+=J[be]*(be+1);return se%11===J[9]}function T(te){for(var J=!1,se=!1,be=0;be<3;be++)if(!J&&/[AEIOU]/.test(te[be]))J=!0;else if(!se&&J&&te[be]==="X")se=!0;else if(be>0&&(J&&!se&&!/[AEIOU]/.test(te[be])||se&&!/X/.test(te[be])))return!1;return!0}function M(te){var J=te.toUpperCase().split("");if(!T(J.slice(0,3))||!T(J.slice(3,6)))return!1;for(var se=[6,7,9,10,12,13,14],be={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},pe=0,he=se;pe<he.length;pe++){var Te=he[pe];J[Te]in be&&J.splice(Te,1,be[J[Te]])}var _e={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"},ke=_e[J[8]],tt=parseInt(J[9]+J[10],10);tt>40&&(tt-=40),tt<10&&(tt="0".concat(tt));var V="".concat(J[6]).concat(J[7],"/").concat(ke,"/").concat(tt);if(!(0,s.default)(V,"YY/MM/DD"))return!1;for(var R=0,B=1;B<J.length-1;B+=2){var W=parseInt(J[B],10);isNaN(W)&&(W=J[B].charCodeAt(0)-65),R+=W}for(var z={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},G=0;G<J.length-1;G+=2){var Z=0;if(J[G]in z)Z=z[J[G]];else{var de=parseInt(J[G],10);Z=2*de+1,de>4&&(Z+=2)}R+=Z}return String.fromCharCode(65+R%26)===J[15]}function L(te){te=te.replace(/\W/,"");var J=te.slice(0,2);if(J!=="32"){var se=te.slice(2,4);if(se!=="00"){var be=te.slice(4,6);switch(te[6]){case"0":be="18".concat(be);break;case"1":be="19".concat(be);break;default:be="20".concat(be);break}var pe="".concat(be,"/").concat(te.slice(2,4),"/").concat(J);if(!(0,s.default)(pe,"YYYY/MM/DD"))return!1}for(var he=1101,Te=[1,6,3,7,9,10,5,8,4,2],_e=0;_e<te.length-1;_e++)he-=parseInt(te[_e],10)*Te[_e];return parseInt(te[10],10)===he%11}return!0}function K(te){if(te.length!==9){for(var J=te.toUpperCase().split("");J.length<8;)J.unshift(0);switch(te[7]){case"A":case"P":if(parseInt(J[6],10)===0)return!1;break;default:{var se=parseInt(J.join("").slice(0,5),10);if(se>32e3)return!1;var be=parseInt(J.join("").slice(5,7),10);if(se===be)return!1}}}return!0}function Y(te){return i.reverseMultiplyAndSum(te.split("").slice(0,8).map(function(J){return parseInt(J,10)}),9)%11===parseInt(te[8],10)}function re(te){if(te.length===10){for(var J=[6,5,7,2,3,4,5,6,7],se=0,be=0;be<J.length;be++)se+=parseInt(te[be],10)*J[be];return se%=11,se===10?!1:se===parseInt(te[9],10)}var pe=te.slice(0,2),he=parseInt(te.slice(2,4),10);he>80?(pe="18".concat(pe),he-=80):he>60?(pe="22".concat(pe),he-=60):he>40?(pe="21".concat(pe),he-=40):he>20?(pe="20".concat(pe),he-=20):pe="19".concat(pe),he<10&&(he="0".concat(he));var Te="".concat(pe,"/").concat(he,"/").concat(te.slice(4,6));if(!(0,s.default)(Te,"YYYY/MM/DD"))return!1;for(var _e=0,ke=1,tt=0;tt<te.length-1;tt++)_e+=parseInt(te[tt],10)*ke%10,ke+=2,ke>10?ke=1:ke===5&&(ke+=2);return _e=10-_e%10,_e===parseInt(te[10],10)}function ne(te){if(te.length===11){var J,se;if(J=0,te==="11111111111"||te==="22222222222"||te==="33333333333"||te==="44444444444"||te==="55555555555"||te==="66666666666"||te==="77777777777"||te==="88888888888"||te==="99999999999"||te==="00000000000")return!1;for(var be=1;be<=9;be++)J+=parseInt(te.substring(be-1,be),10)*(11-be);if(se=J*10%11,se===10&&(se=0),se!==parseInt(te.substring(9,10),10))return!1;J=0;for(var pe=1;pe<=10;pe++)J+=parseInt(te.substring(pe-1,pe),10)*(12-pe);return se=J*10%11,se===10&&(se=0),se===parseInt(te.substring(10,11),10)}if(te==="00000000000000"||te==="11111111111111"||te==="22222222222222"||te==="33333333333333"||te==="44444444444444"||te==="55555555555555"||te==="66666666666666"||te==="77777777777777"||te==="88888888888888"||te==="99999999999999")return!1;for(var he=te.length-2,Te=te.substring(0,he),_e=te.substring(he),ke=0,tt=he-7,V=he;V>=1;V--)ke+=Te.charAt(he-V)*tt,tt-=1,tt<2&&(tt=9);var R=ke%11<2?0:11-ke%11;if(R!==parseInt(_e.charAt(0),10))return!1;he+=1,Te=te.substring(0,he),ke=0,tt=he-7;for(var B=he;B>=1;B--)ke+=Te.charAt(he-B)*tt,tt-=1,tt<2&&(tt=9);return R=ke%11<2?0:11-ke%11,R===parseInt(_e.charAt(1),10)}function ae(te){var J=11-i.reverseMultiplyAndSum(te.split("").slice(0,8).map(function(se){return parseInt(se,10)}),9)%11;return J>9?parseInt(te[8],10)===0:J===parseInt(te[8],10)}function ie(te){if(te.slice(0,4)!=="9000"){var J=te.slice(1,3);switch(te[0]){case"1":case"2":J="19".concat(J);break;case"3":case"4":J="18".concat(J);break;case"5":case"6":J="20".concat(J);break}var se="".concat(J,"/").concat(te.slice(3,5),"/").concat(te.slice(5,7));if(se.length===8){if(!(0,s.default)(se,"YY/MM/DD"))return!1}else if(!(0,s.default)(se,"YYYY/MM/DD"))return!1;for(var be=te.split("").map(function(_e){return parseInt(_e,10)}),pe=[2,7,9,1,4,6,3,5,8,2,7,9],he=0,Te=0;Te<pe.length;Te++)he+=be[Te]*pe[Te];return he%11===10?be[12]===1:be[12]===he%11}return!0}function fe(te){if(te.length===9){if(te=te.replace(/\W/,""),te.slice(6)==="000")return!1;var J=parseInt(te.slice(0,2),10);if(J>53)return!1;J<10?J="190".concat(J):J="19".concat(J);var se=parseInt(te.slice(2,4),10);se>50&&(se-=50),se<10&&(se="0".concat(se));var be="".concat(J,"/").concat(se,"/").concat(te.slice(4,6));if(!(0,s.default)(be,"YYYY/MM/DD"))return!1}return!0}function oe(te){var J=11-i.reverseMultiplyAndSum(te.split("").slice(0,7).map(function(se){return parseInt(se,10)}),8)%11;return J===10?parseInt(te[7],10)===0:J===parseInt(te[7],10)}function ce(te){var J=te.slice(0);te.length>11&&(J=J.slice(2));var se="",be=J.slice(2,4),pe=parseInt(J.slice(4,6),10);if(te.length>11)se=te.slice(0,4);else if(se=te.slice(0,2),te.length===11&&pe<60){var he=new Date().getFullYear().toString(),Te=parseInt(he.slice(0,2),10);if(he=parseInt(he,10),te[6]==="-")parseInt("".concat(Te).concat(se),10)>he?se="".concat(Te-1).concat(se):se="".concat(Te).concat(se);else if(se="".concat(Te-1).concat(se),he-parseInt(se,10)<100)return!1}pe>60&&(pe-=60),pe<10&&(pe="0".concat(pe));var _e="".concat(se,"/").concat(be,"/").concat(pe);if(_e.length===8){if(!(0,s.default)(_e,"YY/MM/DD"))return!1}else if(!(0,s.default)(_e,"YYYY/MM/DD"))return!1;return i.luhnCheck(te.replace(/\W/,""))}function xe(te){for(var J=te.split("").map(function(he){return parseInt(he,10)}),se=[-1,5,7,9,4,6,10,5,7],be=0,pe=0;pe<se.length;pe++)be+=J[pe]*se[pe];return be%11===10?J[9]===0:J[9]===be%11}var ge={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-CA":/^\d{9}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-AR":/(20|23|24|27|30|33|34)[0-9]{8}[0-9]/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-BR":/(?:^\d{11}$)|(?:^\d{14}$)/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/,"uk-UA":/^\d{10}$/};ge["lb-LU"]=ge["fr-LU"],ge["lt-LT"]=ge["et-EE"],ge["nl-BE"]=ge["fr-BE"],ge["fr-CA"]=ge["en-CA"];var me={"bg-BG":y,"cs-CZ":g,"de-AT":m,"de-DE":v,"dk-DK":b,"el-CY":_,"el-GR":C,"en-CA":p,"en-IE":N,"en-US":$,"es-AR":j,"es-ES":O,"et-EE":E,"fi-FI":S,"fr-BE":A,"fr-FR":w,"fr-LU":P,"hr-HR":k,"hu-HU":D,"it-IT":M,"lv-LV":L,"mt-MT":K,"nl-NL":Y,"pl-PL":re,"pt-BR":ne,"pt-PT":ae,"ro-RO":ie,"sk-SK":fe,"sl-SI":oe,"sv-SE":ce,"uk-UA":xe};me["lb-LU"]=me["fr-LU"],me["lt-LT"]=me["et-EE"],me["nl-BE"]=me["fr-BE"],me["fr-CA"]=me["en-CA"];var Le=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,Oe={"de-AT":Le,"de-DE":/[\/\\]/g,"fr-BE":Le};Oe["nl-BE"]=Oe["fr-BE"];function Ue(te){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en-US";(0,n.default)(te);var se=te.slice(0);if(J in ge)return J in Oe&&(se=se.replace(Oe[J],"")),ge[J].test(se)?J in me?me[J](se):!0:!1;throw new Error("Invalid locale '".concat(J,"'"))}r.exports=e.default,r.exports.default=e.default})(kP,kP.exports);var p9e=kP.exports,B5={};Object.defineProperty(B5,"__esModule",{value:!0});B5.default=b9e;B5.locales=void 0;var y9e=m9e(Ie);function m9e(r){return r&&r.__esModule?r:{default:r}}var Tr={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?([79][1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|7|6|5|4)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+?244)?9\d{8}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};Tr["en-CA"]=Tr["en-US"];Tr["fr-CA"]=Tr["en-CA"];Tr["fr-BE"]=Tr["nl-BE"];Tr["zh-HK"]=Tr["en-HK"];Tr["zh-MO"]=Tr["en-MO"];Tr["ga-IE"]=Tr["en-IE"];Tr["fr-CH"]=Tr["de-CH"];Tr["it-CH"]=Tr["fr-CH"];function b9e(r,e,t){if((0,y9e.default)(r),t&&t.strictMode&&!r.startsWith("+"))return!1;if(Array.isArray(e))return e.some(function(s){if(Tr.hasOwnProperty(s)){var a=Tr[s];if(a.test(r))return!0}return!1});if(e in Tr)return Tr[e].test(r);if(!e||e==="any"){for(var n in Tr)if(Tr.hasOwnProperty(n)){var i=Tr[n];if(i.test(r))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}B5.locales=Object.keys(Tr);var DP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^(0x)[0-9a-f]{40}$/i;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(DP,DP.exports);var g9e=DP.exports,BP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=i(hs),n=i(Ie);function i(c){return c&&c.__esModule?c:{default:c}}function s(c){var u="\\d{".concat(c.digits_after_decimal[0],"}");c.digits_after_decimal.forEach(function(v,b){b!==0&&(u="".concat(u,"|\\d{").concat(v,"}"))});var f="(".concat(c.symbol.replace(/\W/,function(v){return"\\".concat(v)}),")").concat(c.require_symbol?"":"?"),l="-?",d="[1-9]\\d*",h="[1-9]\\d{0,2}(\\".concat(c.thousands_separator,"\\d{3})*"),y=["0",d,h],p="(".concat(y.join("|"),")?"),g="(\\".concat(c.decimal_separator,"(").concat(u,"))").concat(c.require_decimal?"":"?"),m=p+(c.allow_decimal||c.require_decimal?g:"");return c.allow_negatives&&!c.parens_for_negatives&&(c.negative_sign_after_digits?m+=l:c.negative_sign_before_digits&&(m=l+m)),c.allow_negative_sign_placeholder?m="( (?!\\-))?".concat(m):c.allow_space_after_symbol?m=" ?".concat(m):c.allow_space_after_digits&&(m+="( (?!$))?"),c.symbol_after_digits?m+=f:m=f+m,c.allow_negatives&&(c.parens_for_negatives?m="(\\(".concat(m,"\\)|").concat(m,")"):c.negative_sign_before_digits||c.negative_sign_after_digits||(m=l+m)),new RegExp("^(?!-? )(?=.*\\d)".concat(m,"$"))}var a={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};function o(c,u){return(0,n.default)(c),u=(0,t.default)(u,a),s(u).test(c)}r.exports=e.default,r.exports.default=e.default})(BP,BP.exports);var v9e=BP.exports,$P={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=n(Ie);function n(o){return o&&o.__esModule?o:{default:o}}var i=/^(bc1|tb1|bc1p|tb1p)[ac-hj-np-z02-9]{39,58}$/,s=/^(1|2|3|m)[A-HJ-NP-Za-km-z1-9]{25,39}$/;function a(o){return(0,t.default)(o),i.test(o)||s.test(o)}r.exports=e.default,r.exports.default=e.default})($P,$P.exports);var x9e=$P.exports,$5={};Object.defineProperty($5,"__esModule",{value:!0});$5.isFreightContainerID=void 0;$5.isISO6346=eJ;var w9e=E9e(Ie);function E9e(r){return r&&r.__esModule?r:{default:r}}var A9e=/^[A-Z]{3}(U[0-9]{7})|([J,Z][0-9]{6,7})$/,_9e=/^[0-9]$/;function eJ(r){if((0,w9e.default)(r),r=r.toUpperCase(),!A9e.test(r))return!1;if(r.length===11){for(var e=0,t=0;t<r.length-1;t++)if(_9e.test(r[t]))e+=r[t]*Math.pow(2,t);else{var n=void 0,i=r.charCodeAt(t)-55;i<11?n=i:i>=11&&i<=20?n=12+i%11:i>=21&&i<=30?n=23+i%21:n=34+i%31,e+=n*Math.pow(2,t)}var s=e%11;return s===10&&(s=0),Number(r[r.length-1])===s}return!0}$5.isFreightContainerID=eJ;var LP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]);function s(a){return(0,t.default)(a),i.has(a)}r.exports=e.default,r.exports.default=e.default})(LP,LP.exports);var S9e=LP.exports,UP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(Ie);function n(c){return c&&c.__esModule?c:{default:c}}var i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,s=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,a=function(u){var f=u.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(f){var l=Number(f[1]),d=Number(f[2]);return l%4===0&&l%100!==0||l%400===0?d<=366:d<=365}var h=u.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),y=h[1],p=h[2],g=h[3],m=p&&"0".concat(p).slice(-2),v=g&&"0".concat(g).slice(-2),b=new Date("".concat(y,"-").concat(m||"01","-").concat(v||"01"));return p&&g?b.getUTCFullYear()===y&&b.getUTCMonth()+1===p&&b.getUTCDate()===g:!0};function o(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,t.default)(c);var f=u.strictSeparator?s.test(c):i.test(c);return f&&u.strict?a(c):f}r.exports=e.default,r.exports.default=e.default})(UP,UP.exports);var M9e=UP.exports,FP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=m;var t=n(Ie);function n(v){return v&&v.__esModule?v:{default:v}}var i=/[0-9]{4}/,s=/(0[1-9]|1[0-2])/,a=/([12]\d|0[1-9]|3[01])/,o=/([01][0-9]|2[0-3])/,c=/[0-5][0-9]/,u=/([0-5][0-9]|60)/,f=/(\.[0-9]+)?/,l=new RegExp("[-+]".concat(o.source,":").concat(c.source)),d=new RegExp("([zZ]|".concat(l.source,")")),h=new RegExp("".concat(o.source,":").concat(c.source,":").concat(u.source).concat(f.source)),y=new RegExp("".concat(i.source,"-").concat(s.source,"-").concat(a.source)),p=new RegExp("".concat(h.source).concat(d.source)),g=new RegExp("^".concat(y.source,"[ tT]").concat(p.source,"$"));function m(v){return(0,t.default)(v),g.test(v)}r.exports=e.default,r.exports.default=e.default})(FP,FP.exports);var P9e=FP.exports,L5={};Object.defineProperty(L5,"__esModule",{value:!0});L5.ScriptCodes=void 0;L5.default=I9e;var T9e=C9e(Ie);function C9e(r){return r&&r.__esModule?r:{default:r}}var tJ=new Set(["Adlm","Afak","Aghb","Ahom","Arab","Aran","Armi","Armn","Avst","Bali","Bamu","Bass","Batk","Beng","Bhks","Blis","Bopo","Brah","Brai","Bugi","Buhd","Cakm","Cans","Cari","Cham","Cher","Chis","Chrs","Cirt","Copt","Cpmn","Cprt","Cyrl","Cyrs","Deva","Diak","Dogr","Dsrt","Dupl","Egyd","Egyh","Egyp","Elba","Elym","Ethi","Gara","Geok","Geor","Glag","Gong","Gonm","Goth","Gran","Grek","Gujr","Gukh","Guru","Hanb","Hang","Hani","Hano","Hans","Hant","Hatr","Hebr","Hira","Hluw","Hmng","Hmnp","Hrkt","Hung","Inds","Ital","Jamo","Java","Jpan","Jurc","Kali","Kana","Kawi","Khar","Khmr","Khoj","Kitl","Kits","Knda","Kore","Kpel","Krai","Kthi","Lana","Laoo","Latf","Latg","Latn","Leke","Lepc","Limb","Lina","Linb","Lisu","Loma","Lyci","Lydi","Mahj","Maka","Mand","Mani","Marc","Maya","Medf","Mend","Merc","Mero","Mlym","Modi","Mong","Moon","Mroo","Mtei","Mult","Mymr","Nagm","Nand","Narb","Nbat","Newa","Nkdb","Nkgb","Nkoo","Nshu","Ogam","Olck","Onao","Orkh","Orya","Osge","Osma","Ougr","Palm","Pauc","Pcun","Pelm","Perm","Phag","Phli","Phlp","Phlv","Phnx","Plrd","Piqd","Prti","Psin","Qaaa","Qaab","Qaac","Qaad","Qaae","Qaaf","Qaag","Qaah","Qaai","Qaaj","Qaak","Qaal","Qaam","Qaan","Qaao","Qaap","Qaaq","Qaar","Qaas","Qaat","Qaau","Qaav","Qaaw","Qaax","Qaay","Qaaz","Qaba","Qabb","Qabc","Qabd","Qabe","Qabf","Qabg","Qabh","Qabi","Qabj","Qabk","Qabl","Qabm","Qabn","Qabo","Qabp","Qabq","Qabr","Qabs","Qabt","Qabu","Qabv","Qabw","Qabx","Ranj","Rjng","Rohg","Roro","Runr","Samr","Sara","Sarb","Saur","Sgnw","Shaw","Shrd","Shui","Sidd","Sidt","Sind","Sinh","Sogd","Sogo","Sora","Soyo","Sund","Sunu","Sylo","Syrc","Syre","Syrj","Syrn","Tagb","Takr","Tale","Talu","Taml","Tang","Tavt","Tayo","Telu","Teng","Tfng","Tglg","Thaa","Thai","Tibt","Tirh","Tnsa","Todr","Tols","Toto","Tutg","Ugar","Vaii","Visp","Vith","Wara","Wcho","Wole","Xpeo","Xsux","Yezi","Yiii","Zanb","Zinh","Zmth","Zsye","Zsym","Zxxx","Zyyy","Zzzz"]);function I9e(r){return(0,T9e.default)(r),tJ.has(r)}L5.ScriptCodes=tJ;var jP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=new Set(["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"]);function s(a){return(0,t.default)(a),i.has(a.toUpperCase())}r.exports=e.default,r.exports.default=e.default})(jP,jP.exports);var R9e=jP.exports,qP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=new Set(["004","008","010","012","016","020","024","028","031","032","036","040","044","048","050","051","052","056","060","064","068","070","072","074","076","084","086","090","092","096","100","104","108","112","116","120","124","132","136","140","144","148","152","156","158","162","166","170","174","175","178","180","184","188","191","192","196","203","204","208","212","214","218","222","226","231","232","233","234","238","239","242","246","248","250","254","258","260","262","266","268","270","275","276","288","292","296","300","304","308","312","316","320","324","328","332","334","336","340","344","348","352","356","360","364","368","372","376","380","384","388","392","398","400","404","408","410","414","417","418","422","426","428","430","434","438","440","442","446","450","454","458","462","466","470","474","478","480","484","492","496","498","499","500","504","508","512","516","520","524","528","531","533","534","535","540","548","554","558","562","566","570","574","578","580","581","583","584","585","586","591","598","600","604","608","612","616","620","624","626","630","634","638","642","643","646","652","654","659","660","662","663","666","670","674","678","682","686","688","690","694","702","703","704","705","706","710","716","724","728","729","732","740","744","748","752","756","760","762","764","768","772","776","780","784","788","792","795","796","798","800","804","807","818","826","831","832","833","834","840","850","854","858","860","862","876","882","887","894"]);function s(a){return(0,t.default)(a),i.has(a)}r.exports=e.default,r.exports.default=e.default})(qP,qP.exports);var N9e=qP.exports,U5={};Object.defineProperty(U5,"__esModule",{value:!0});U5.CurrencyCodes=void 0;U5.default=D9e;var O9e=k9e(Ie);function k9e(r){return r&&r.__esModule?r:{default:r}}var rJ=new Set(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLE","SLL","SOS","SRD","SSP","STN","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UYW","UZS","VED","VES","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]);function D9e(r){return(0,O9e.default)(r),rJ.has(r.toUpperCase())}U5.CurrencyCodes=rJ;var VP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var t=i(Ie),n=i(hs);function i(u){return u&&u.__esModule?u:{default:u}}var s=/^[A-Z2-7]+=*$/,a=/^[A-HJKMNP-TV-Z0-9]+$/,o={crockford:!1};function c(u,f){if((0,t.default)(u),f=(0,n.default)(f,o),f.crockford)return a.test(u);var l=u.length;return!!(l%8===0&&s.test(u))}r.exports=e.default,r.exports.default=e.default})(VP,VP.exports);var B9e=VP.exports,zP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^[A-HJ-NP-Za-km-z1-9]*$/;function s(a){return(0,t.default)(a),!!i.test(a)}r.exports=e.default,r.exports.default=e.default})(zP,zP.exports);var $9e=zP.exports,HP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(Ie);function n(c){return c&&c.__esModule?c:{default:c}}var i=/^[a-z]+\/[a-z0-9\-\+\._]+$/i,s=/^[a-z\-]+=[a-z0-9\-]+$/i,a=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;function o(c){(0,t.default)(c);var u=c.split(",");if(u.length<2)return!1;var f=u.shift().trim().split(";"),l=f.shift();if(l.slice(0,5)!=="data:")return!1;var d=l.slice(5);if(d!==""&&!i.test(d))return!1;for(var h=0;h<f.length;h++)if(!(h===f.length-1&&f[h].toLowerCase()==="base64")&&!s.test(f[h]))return!1;for(var y=0;y<u.length;y++)if(!a.test(u[y]))return!1;return!0}r.exports=e.default,r.exports.default=e.default})(HP,HP.exports);var L9e=HP.exports,WP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/(?:^magnet:\?|[^?&]&)xt(?:\.1)?=urn:(?:(?:aich|bitprint|btih|ed2k|ed2khash|kzhash|md5|sha1|tree:tiger):[a-z0-9]{32}(?:[a-z0-9]{8})?|btmh:1220[a-z0-9]{64})(?:$|&)/i;function s(a){return(0,t.default)(a),a.indexOf("magnet:?")!==0?!1:i.test(a)}r.exports=e.default,r.exports.default=e.default})(WP,WP.exports);var U9e=WP.exports,KP={exports:{}},GP={exports:{}},QP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){if((0,t.default)(s),a){var o=new RegExp("[".concat(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g");return s.replace(o,"")}for(var c=s.length-1;/\s/.test(s.charAt(c));)c-=1;return s.slice(0,c+1)}r.exports=e.default,r.exports.default=e.default})(QP,QP.exports);var nJ=QP.exports,ZP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){(0,t.default)(s);var o=a?new RegExp("^[".concat(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return s.replace(o,"")}r.exports=e.default,r.exports.default=e.default})(ZP,ZP.exports);var iJ=ZP.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(nJ),n=i(iJ);function i(a){return a&&a.__esModule?a:{default:a}}function s(a,o){return(0,t.default)((0,n.default)(a,o),o)}r.exports=e.default,r.exports.default=e.default})(GP,GP.exports);var sJ=GP.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var t=s(sJ),n=s(WZ),i=s(Ie);function s(p){return p&&p.__esModule?p:{default:p}}function a(p,g){return u(p)||c(p,g)||l(p,g)||o()}function o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(p,g){var m=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(m!=null){var v,b,_,C,N=[],x=!0,I=!1;try{if(_=(m=m.call(p)).next,g!==0)for(;!(x=(v=_.call(m)).done)&&(N.push(v.value),N.length!==g);x=!0);}catch($){I=!0,b=$}finally{try{if(!x&&m.return!=null&&(C=m.return(),Object(C)!==C))return}finally{if(I)throw b}}return N}}function u(p){if(Array.isArray(p))return p}function f(p,g){var m=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!m){if(Array.isArray(p)||(m=l(p))||g){m&&(p=m);var v=0,b=function(){};return{s:b,n:function(){return v>=p.length?{done:!0}:{done:!1,value:p[v++]}},e:function(I){throw I},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _,C=!0,N=!1;return{s:function(){m=m.call(p)},n:function(){var I=m.next();return C=I.done,I},e:function(I){N=!0,_=I},f:function(){try{C||m.return==null||m.return()}finally{if(N)throw _}}}}function l(p,g){if(p){if(typeof p=="string")return d(p,g);var m={}.toString.call(p).slice(8,-1);return m==="Object"&&p.constructor&&(m=p.constructor.name),m==="Map"||m==="Set"?Array.from(p):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?d(p,g):void 0}}function d(p,g){(g==null||g>p.length)&&(g=p.length);for(var m=0,v=Array(g);m<g;m++)v[m]=p[m];return v}function h(p){var g=new Set(["subject","body","cc","bcc"]),m={cc:"",bcc:""},v=!1,b=p.split("&");if(b.length>4)return!1;var _=f(b),C;try{for(_.s();!(C=_.n()).done;){var N=C.value,x=N.split("="),I=a(x,2),$=I[0],j=I[1];if($&&!g.has($)){v=!0;break}j&&($==="cc"||$==="bcc")&&(m[$]=j),$&&g.delete($)}}catch(O){_.e(O)}finally{_.f()}return v?!1:m}function y(p,g){if((0,i.default)(p),p.indexOf("mailto:")!==0)return!1;var m=p.replace("mailto:","").split("?"),v=a(m,2),b=v[0],_=v[1],C=_===void 0?"":_;if(!b&&!C)return!0;var N=h(C);return N?"".concat(b,",").concat(N.cc,",").concat(N.bcc).split(",").every(function(x){return x=(0,t.default)(x," "),x?(0,n.default)(x,g):!0}):!1}r.exports=e.default,r.exports.default=e.default})(KP,KP.exports);var F9e=KP.exports,JP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=n(Ie);function n(c){return c&&c.__esModule?c:{default:c}}var i=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+_]{1,100}$/i,s=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,a=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;function o(c){return(0,t.default)(c),i.test(c)||s.test(c)||a.test(c)}r.exports=e.default,r.exports.default=e.default})(JP,JP.exports);var j9e=JP.exports,YP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var t=s(Ie),n=s(hs),i=s(KZ);function s(d){return d&&d.__esModule?d:{default:d}}var a=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,o=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,c=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,u=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,f={checkDMS:!1};function l(d,h){if((0,t.default)(d),h=(0,n.default)(h,f),!(0,i.default)(d,","))return!1;var y=d.split(",");return y[0].startsWith("(")&&!y[1].endsWith(")")||y[1].endsWith(")")&&!y[0].startsWith("(")?!1:h.checkDMS?c.test(y[0])&&u.test(y[1]):a.test(y[0])&&o.test(y[1])}r.exports=e.default,r.exports.default=e.default})(YP,YP.exports);var q9e=YP.exports,F5={};Object.defineProperty(F5,"__esModule",{value:!0});F5.default=H9e;F5.locales=void 0;var V9e=z9e(Ie);function z9e(r){return r&&r.__esModule?r:{default:r}}var QL=/^\d{3}$/,zs=/^\d{4}$/,_i=/^\d{5}$/,aA=/^\d{6}$/,a1={AD:/^AD\d{3}$/,AT:zs,AU:zs,AZ:/^AZ\d{4}$/,BA:/^([7-8]\d{4}$)/,BD:/^([1-8][0-9]{3}|9[0-4][0-9]{2})$/,BE:zs,BG:zs,BR:/^\d{5}-?\d{3}$/,BY:/^2[1-4]\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:zs,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CO:/^(05|08|11|13|15|17|18|19|20|23|25|27|41|44|47|50|52|54|63|66|68|70|73|76|81|85|86|88|91|94|95|97|99)(\d{4})$/,CZ:/^\d{3}\s?\d{2}$/,DE:_i,DK:zs,DO:_i,DZ:_i,EE:_i,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:_i,FR:/^(?:(?:0[1-9]|[1-8]\d|9[0-5])\d{3}|97[1-46]\d{2})$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:zs,ID:_i,IE:/^(?!.*(?:o))[A-Za-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/^(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}$/,IS:QL,IT:_i,JP:/^\d{3}\-\d{4}$/,KE:_i,KR:/^(\d{5}|\d{6})$/,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:zs,LV:/^LV\-\d{4}$/,LK:_i,MG:QL,MX:_i,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:_i,NL:/^[1-9]\d{3}\s?(?!sa|sd|ss)[a-z]{2}$/i,NO:zs,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:zs,PK:_i,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:aA,RU:aA,SA:_i,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:aA,SI:zs,SK:/^\d{3}\s?\d{2}$/,TH:_i,TN:zs,TW:/^\d{3}(\d{2,3})?$/,UA:_i,US:/^\d{5}(-\d{4})?$/,ZA:zs,ZM:_i};F5.locales=Object.keys(a1);function H9e(r,e){if((0,V9e.default)(r),e in a1)return a1[e].test(r);if(e==="any"){for(var t in a1)if(a1.hasOwnProperty(t)){var n=a1[t];if(n.test(r))return!0}return!1}throw new Error("Invalid locale '".concat(e,"'"))}var XP={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}r.exports=e.default,r.exports.default=e.default})(XP,XP.exports);var W9e=XP.exports,eT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s){return(0,t.default)(s),s.replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`").replace(/&amp;/g,"&")}r.exports=e.default,r.exports.default=e.default})(eT,eT.exports);var K9e=eT.exports,tT={exports:{}},rT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){return(0,t.default)(s),s.replace(new RegExp("[".concat(a,"]+"),"g"),"")}r.exports=e.default,r.exports.default=e.default})(rT,rT.exports);var aJ=rT.exports;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=i(Ie),n=i(aJ);function i(a){return a&&a.__esModule?a:{default:a}}function s(a,o){(0,t.default)(a);var c=o?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return(0,n.default)(a,c)}r.exports=e.default,r.exports.default=e.default})(tT,tT.exports);var G9e=tT.exports,nT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){return(0,t.default)(s),s.replace(new RegExp("[^".concat(a,"]+"),"g"),"")}r.exports=e.default,r.exports.default=e.default})(nT,nT.exports);var Q9e=nT.exports,iT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var t=n(Ie);function n(s){return s&&s.__esModule?s:{default:s}}function i(s,a){(0,t.default)(s);for(var o=s.length-1;o>=0;o--)if(a.indexOf(s[o])===-1)return!1;return!0}r.exports=e.default,r.exports.default=e.default})(iT,iT.exports);var Z9e=iT.exports,sT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var t=n(hs);function n(l){return l&&l.__esModule?l:{default:l}}var i={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,yandex_convert_yandexru:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},s=["icloud.com","me.com"],a=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],o=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],c=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function u(l){return l.length>1?l:""}function f(l,d){d=(0,t.default)(d,i);var h=l.split("@"),y=h.pop(),p=h.join("@"),g=[p,y];if(g[1]=g[1].toLowerCase(),g[1]==="gmail.com"||g[1]==="googlemail.com"){if(d.gmail_remove_subaddress&&(g[0]=g[0].split("+")[0]),d.gmail_remove_dots&&(g[0]=g[0].replace(/\.+/g,u)),!g[0].length)return!1;(d.all_lowercase||d.gmail_lowercase)&&(g[0]=g[0].toLowerCase()),g[1]=d.gmail_convert_googlemaildotcom?"gmail.com":g[1]}else if(s.indexOf(g[1])>=0){if(d.icloud_remove_subaddress&&(g[0]=g[0].split("+")[0]),!g[0].length)return!1;(d.all_lowercase||d.icloud_lowercase)&&(g[0]=g[0].toLowerCase())}else if(a.indexOf(g[1])>=0){if(d.outlookdotcom_remove_subaddress&&(g[0]=g[0].split("+")[0]),!g[0].length)return!1;(d.all_lowercase||d.outlookdotcom_lowercase)&&(g[0]=g[0].toLowerCase())}else if(o.indexOf(g[1])>=0){if(d.yahoo_remove_subaddress){var m=g[0].split("-");g[0]=m.length>1?m.slice(0,-1).join("-"):m[0]}if(!g[0].length)return!1;(d.all_lowercase||d.yahoo_lowercase)&&(g[0]=g[0].toLowerCase())}else c.indexOf(g[1])>=0?((d.all_lowercase||d.yandex_lowercase)&&(g[0]=g[0].toLowerCase()),g[1]=d.yandex_convert_yandexru?"yandex.ru":g[1]):d.all_lowercase&&(g[0]=g[0].toLowerCase());return g.join("@")}r.exports=e.default,r.exports.default=e.default})(sT,sT.exports);var J9e=sT.exports,aT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i=/^[^\s-_](?!.*?[-_]{2,})[a-z0-9-\\][^\s]*[^-_\s]$/;function s(a){return(0,t.default)(a),i.test(a)}r.exports=e.default,r.exports.default=e.default})(aT,aT.exports);var Y9e=aT.exports,oT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=n(Ie);function n(a){return a&&a.__esModule?a:{default:a}}var i={"cs-CZ":function(o){return/^(([ABCDEFHIJKLMNPRSTUVXYZ]|[0-9])-?){5,8}$/.test(o)},"de-DE":function(o){return/^((A|AA|AB|AC|AE|AH|AK|AM|AN|A|AP|AS|AT|AU|AW|AZ|B|BA|BB|BC|BE|BF|BH|BI|BK|BL|BM|BN|BO|B|BS|BT|BZ|C|CA|CB|CE|CO|CR|CW|D|DA|DD|DE|DH|DI|DL|DM|DN|DO|DU|DW|DZ|E|EA|EB|ED|EE|EF|EG|EH|EI|EL|EM|EN|ER|ES|EU|EW|F|FB|FD|FF|FG|FI|FL|FN|FO|FR|FS|FT|F|FW|FZ|G|GA|GC|GD|GE|GF|GG|GI|GK|GL|GM|GN|G|GP|GR|GS|GT|G|GV|GW|GZ|H|HA|HB|HC|HD|HE|HF|HG|HH|HI|HK|HL|HM|HN|HO|HP|HR|HS|HU|HV|HX|HY|HZ|IK|IL|IN|IZ|J|JE|JL|K|KA|KB|KC|KE|KF|KG|KH|KI|KK|KL|KM|KN|KO|KR|KS|KT|KU|KW|KY|L|LA|LB|LC|LD|LF|LG|LH|LI|LL|LM|LN|L|LP|LR|LU|M|MA|MB|MC|MD|ME|MG|MH|MI|MK|ML|MM|MN|MO|MQ|MR|MS|M|MW|MY|MZ|N|NB|ND|NE|NF|NH|NI|NK|NM|N|NP|NR|NT|NU|NW|NY|NZ|OA|OB|OC|OD|OE|OF|OG|OH|OK|OL|OP|OS|OZ|P|PA|PB|PE|PF|PI|PL|PM|PN|PR|PS|PW|PZ|R|RA|RC|RD|RE|RG|RH|RI|RL|RM|RN|RO|RP|RS|RT|RU|RV|RW|RZ|S|SB|SC|SE|SG|SI|SK|SL|SM|SN|SO|SP|SR|ST|SU|SW|SY|SZ|TE|TF|TG|TO|TP|TR|TS|TT|T|B|UE|UH|UL|UM|UN|V|VB|VG|VK|VR|VS|W|WA|WB|WE|WF|WI|WK|WL|WM|WN|WO|WR|WS|WT|W|WW|WZ|Z|ZE|ZI|ZP|ZR|ZW|ZZ)[- ]?[A-Z]{1,2}[- ]?\d{1,4}|(ABG|ABI|AIB|AIC|ALF|ALZ|ANA|ANG|ANK|APD|ARN|ART|ASL|ASZ|AUR|AZE|BAD|BAR|BBG|BCH|BED|BER|BGD|BGL|BID|BIN|BIR|BIT|BIW|BKS|BLB|BLK|BNA|BOG|BOH|BOR|BOT|BRA|BRB|BRG|BRK|BRL|BRV|BSB|BSK|BTF|BD|BUL|BR|BS|BZ|CAS|CHA|CLP|CLZ|COC|COE|CUX|DAH|DAN|DAU|DBR|DEG|DEL|DGF|DIL|DIN|DIZ|DKB|DLG|DON|DUD|DW|EBE|EBN|EBS|ECK|EIC|EIL|EIN|EIS|EMD|EMS|ERB|ERH|ERK|ERZ|ESB|ESW|FDB|FDS|FEU|FFB|FKB|FL|FOR|FRG|FRI|FRW|FTL|FS|GAN|GAP|GDB|GEL|GEO|GER|GHA|GHC|GLA|GMN|GNT|GOA|GOH|GRA|GRH|GRI|GRM|GRZ|GTH|GUB|GUN|GVM|HAB|HAL|HAM|HAS|HBN|HBS|HCH|HDH|HDL|HEB|HEF|HEI|HER|HET|HGN|HGW|HHM|HIG|HIP|HM|HOG|HOH|HOL|HOM|HOR|HS|HOT|HRO|HSK|HST|HVL|HWI|IGB|ILL|JL|KEH|KEL|KEM|KIB|KLE|KLZ|KN|KT|KZ|KRU|KN|KUS|KYF|LAN|LAU|LBS|LBZ|LDK|LDS|LEO|LER|LEV|LIB|LIF|LIP|LB|LOS|LRO|LSZ|LN|LUP|LWL|MAB|MAI|MAK|MAL|MED|MEG|MEI|MEK|MEL|MER|MET|MGH|MGN|MHL|MIL|MKK|MOD|MOL|MON|MOS|MSE|MSH|MSP|MST|MTK|MTL|MB|MR|MYK|MZG|NAB|NAI|NAU|NDH|NEA|NEB|NEC|NEN|NES|NEW|NMB|NMS|NOH|NOL|NOM|NOR|NVP|NWM|OAL|OBB|OBG|OCH|OHA|HR|OHV|OHZ|OPR|OSL|OVI|OVL|OVP|PAF|PAN|PAR|PCH|PEG|PIR|PL|PR|QFT|QLB|RDG|REG|REH|REI|RID|RIE|ROD|ROF|ROK|ROL|ROS|ROT|ROW|RSL|RD|RG|SAB|SAD|SAN|SAW|SBG|SBK|SCZ|SDH|SDL|SDT|SEB|SEE|SEF|SEL|SFB|SFT|SGH|SHA|SHG|SHK|SHL|SIG|SIM|SLE|SLF|SLK|SLN|SLS|SL|SLZ|SM|SOB|SOG|SOK|SM|SON|SPB|SPN|SRB|SRO|STA|STB|STD|STE|STL|SUL|SW|SWA|SZB|TBB|TDO|TET|TIR|TL|TUT|UEM|UER|UFF|USI|VAI|VEC|VER|VIB|VIE|VIT|VOH|WAF|WAK|WAN|WAR|WAT|WBS|WDA|WEL|WEN|WER|WES|WHV|WIL|WIS|WIT|WIZ|WLG|WMS|WND|WOB|WOH|WOL|WOR|WOS|WRN|WSF|WST|WSW|WTL|WTM|WUG|WM|WUN|WUR|WZL|ZEL|ZIG)[- ]?(([A-Z][- ]?\d{1,4})|([A-Z]{2}[- ]?\d{1,3})))[- ]?(E|H)?$/.test(o)},"de-LI":function(o){return/^FL[- ]?\d{1,5}[UZ]?$/.test(o)},"en-IN":function(o){return/^[A-Z]{2}[ -]?[0-9]{1,2}(?:[ -]?[A-Z])(?:[ -]?[A-Z]*)?[ -]?[0-9]{4}$/.test(o)},"en-SG":function(o){return/^[A-Z]{3}[ -]?[\d]{4}[ -]?[A-Z]{1}$/.test(o)},"es-AR":function(o){return/^(([A-Z]{2} ?[0-9]{3} ?[A-Z]{2})|([A-Z]{3} ?[0-9]{3}))$/.test(o)},"fi-FI":function(o){return/^(?=.{4,7})(([A-Z]{1,3}|[0-9]{1,3})[\s-]?([A-Z]{1,3}|[0-9]{1,5}))$/.test(o)},"hu-HU":function(o){return/^((((?!AAA)(([A-NPRSTVZWXY]{1})([A-PR-Z]{1})([A-HJ-NPR-Z]))|(A[ABC]I)|A[ABC]O|A[A-W]Q|BPI|BPO|UCO|UDO|XAO)-(?!000)\d{3})|(M\d{6})|((CK|DT|CD|HC|H[ABEFIKLMNPRSTVX]|MA|OT|R[A-Z]) \d{2}-\d{2})|(CD \d{3}-\d{3})|(C-(C|X) \d{4})|(X-(A|B|C) \d{4})|(([EPVZ]-\d{5}))|(S A[A-Z]{2} \d{2})|(SP \d{2}-\d{2}))$/.test(o)},"pt-BR":function(o){return/^[A-Z]{3}[ -]?[0-9][A-Z][0-9]{2}|[A-Z]{3}[ -]?[0-9]{4}$/.test(o)},"pt-PT":function(o){return/^(([A-Z]{2}[ -]?[0-9]{2}[ -]?[0-9]{2})|([0-9]{2}[ -]?[A-Z]{2}[ -]?[0-9]{2})|([0-9]{2}[ -]?[0-9]{2}[ -]?[A-Z]{2})|([A-Z]{2}[ -]?[0-9]{2}[ -]?[A-Z]{2}))$/.test(o)},"sq-AL":function(o){return/^[A-Z]{2}[- ]?((\d{3}[- ]?(([A-Z]{2})|T))|(R[- ]?\d{3}))$/.test(o)},"sv-SE":function(o){return/^[A-HJ-PR-UW-Z]{3} ?[\d]{2}[A-HJ-PR-UW-Z1-9]$|(^[A-Z ]{2,7}$)/.test(o.trim())},"en-PK":function(o){return/(^[A-Z]{2}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{3}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]{4}((\s|-){0,1})[0-9]{3,4}((\s|-)[0-9]{2}){0,1}$)|(^[A-Z]((\s|-){0,1})[0-9]{4}((\s|-)[0-9]{2}){0,1}$)/.test(o.trim())}};function s(a,o){if((0,t.default)(a),o in i)return i[o](a);if(o==="any"){for(var c in i){var u=i[c];if(u(a))return!0}return!1}throw new Error("Invalid locale '".concat(o,"'"))}r.exports=e.default,r.exports.default=e.default})(oT,oT.exports);var X9e=oT.exports,cT={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;var t=i(hs),n=i(Ie);function i(y){return y&&y.__esModule?y:{default:y}}var s=/^[A-Z]$/,a=/^[a-z]$/,o=/^[0-9]$/,c=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/\\ ]$/,u={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function f(y){var p={};return Array.from(y).forEach(function(g){var m=p[g];m?p[g]+=1:p[g]=1}),p}function l(y){var p=f(y),g={length:y.length,uniqueChars:Object.keys(p).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(p).forEach(function(m){s.test(m)?g.uppercaseCount+=p[m]:a.test(m)?g.lowercaseCount+=p[m]:o.test(m)?g.numberCount+=p[m]:c.test(m)&&(g.symbolCount+=p[m])}),g}function d(y,p){var g=0;return g+=y.uniqueChars*p.pointsPerUnique,g+=(y.length-y.uniqueChars)*p.pointsPerRepeat,y.lowercaseCount>0&&(g+=p.pointsForContainingLower),y.uppercaseCount>0&&(g+=p.pointsForContainingUpper),y.numberCount>0&&(g+=p.pointsForContainingNumber),y.symbolCount>0&&(g+=p.pointsForContainingSymbol),g}function h(y){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;(0,n.default)(y);var g=l(y);return p=(0,t.default)(p||{},u),p.returnScore?d(g,p):g.length>=p.minLength&&g.lowercaseCount>=p.minLowercase&&g.uppercaseCount>=p.minUppercase&&g.numberCount>=p.minNumbers&&g.symbolCount>=p.minSymbols}r.exports=e.default,r.exports.default=e.default})(cT,cT.exports);var e7e=cT.exports,j5={};function uT(r){"@babel/helpers - typeof";return uT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uT(r)}Object.defineProperty(j5,"__esModule",{value:!0});j5.default=a7e;j5.vatMatchers=void 0;var ZL=r7e(Ie),t7e=oJ(Pp);function oJ(r,e){if(typeof WeakMap=="function")var t=new WeakMap,n=new WeakMap;return(oJ=function(s,a){if(!a&&s&&s.__esModule)return s;var o,c,u={__proto__:null,default:s};if(s===null||uT(s)!="object"&&typeof s!="function")return u;if(o=a?n:t){if(o.has(s))return o.get(s);o.set(s,u)}for(var f in s)f!=="default"&&{}.hasOwnProperty.call(s,f)&&((c=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,f))&&(c.get||c.set)?o(u,f,c):u[f]=s[f]);return u})(r,e)}function r7e(r){return r&&r.__esModule?r:{default:r}}var n7e=function(e){var t=e.match(/^(AU)?(\d{11})$/);if(!t)return!1;var n=[10,1,3,5,7,9,11,13,15,17,19];e=e.replace(/^AU/,"");for(var i=(parseInt(e.slice(0,1),10)-1).toString()+e.slice(1),s=0,a=0;a<11;a++)s+=n[a]*i.charAt(a);return s!==0&&s%89===0},i7e=function(e){var t=function(i){var s=i.pop(),a=[5,4,3,2,7,6,5,4],o=(11-i.reduce(function(c,u,f){return c+u*a[f]},0)%11)%11;return s===o};return/^(CHE[- ]?)?(\d{9}|(\d{3}\.\d{3}\.\d{3})|(\d{3} \d{3} \d{3})) ?(TVA|MWST|IVA)?$/.test(e)&&t(e.match(/\d/g).map(function(n){return+n}))},s7e=function(e){var t=e.match(/^(PT)?(\d{9})$/);if(!t)return!1;var n=t[2],i=11-t7e.reverseMultiplyAndSum(n.split("").slice(0,8).map(function(s){return parseInt(s,10)}),9)%11;return i>9?parseInt(n[8],10)===0:i===parseInt(n[8],10)},JL=j5.vatMatchers={AT:function(e){return/^(AT)?U\d{8}$/.test(e)},BE:function(e){return/^(BE)?\d{10}$/.test(e)},BG:function(e){return/^(BG)?\d{9,10}$/.test(e)},HR:function(e){return/^(HR)?\d{11}$/.test(e)},CY:function(e){return/^(CY)?\w{9}$/.test(e)},CZ:function(e){return/^(CZ)?\d{8,10}$/.test(e)},DK:function(e){return/^(DK)?\d{8}$/.test(e)},EE:function(e){return/^(EE)?\d{9}$/.test(e)},FI:function(e){return/^(FI)?\d{8}$/.test(e)},FR:function(e){return/^(FR)?\w{2}\d{9}$/.test(e)},DE:function(e){return/^(DE)?\d{9}$/.test(e)},EL:function(e){return/^(EL)?\d{9}$/.test(e)},HU:function(e){return/^(HU)?\d{8}$/.test(e)},IE:function(e){return/^(IE)?\d{7}\w{1}(W)?$/.test(e)},IT:function(e){return/^(IT)?\d{11}$/.test(e)},LV:function(e){return/^(LV)?\d{11}$/.test(e)},LT:function(e){return/^(LT)?\d{9,12}$/.test(e)},LU:function(e){return/^(LU)?\d{8}$/.test(e)},MT:function(e){return/^(MT)?\d{8}$/.test(e)},NL:function(e){return/^(NL)?\d{9}B\d{2}$/.test(e)},PL:function(e){return/^(PL)?(\d{10}|(\d{3}-\d{3}-\d{2}-\d{2})|(\d{3}-\d{2}-\d{2}-\d{3}))$/.test(e)},PT:s7e,RO:function(e){return/^(RO)?\d{2,10}$/.test(e)},SK:function(e){return/^(SK)?\d{10}$/.test(e)},SI:function(e){return/^(SI)?\d{8}$/.test(e)},ES:function(e){return/^(ES)?\w\d{7}[A-Z]$/.test(e)},SE:function(e){return/^(SE)?\d{12}$/.test(e)},AL:function(e){return/^(AL)?\w{9}[A-Z]$/.test(e)},MK:function(e){return/^(MK)?\d{13}$/.test(e)},AU:n7e,BY:function(e){return/^( )?\d{9}$/.test(e)},CA:function(e){return/^(CA)?\d{9}$/.test(e)},IS:function(e){return/^(IS)?\d{5,6}$/.test(e)},IN:function(e){return/^(IN)?\d{15}$/.test(e)},ID:function(e){return/^(ID)?(\d{15}|(\d{2}.\d{3}.\d{3}.\d{1}-\d{3}.\d{3}))$/.test(e)},IL:function(e){return/^(IL)?\d{9}$/.test(e)},KZ:function(e){return/^(KZ)?\d{12}$/.test(e)},NZ:function(e){return/^(NZ)?\d{9}$/.test(e)},NG:function(e){return/^(NG)?(\d{12}|(\d{8}-\d{4}))$/.test(e)},NO:function(e){return/^(NO)?\d{9}MVA$/.test(e)},PH:function(e){return/^(PH)?(\d{12}|\d{3} \d{3} \d{3} \d{3})$/.test(e)},RU:function(e){return/^(RU)?(\d{10}|\d{12})$/.test(e)},SM:function(e){return/^(SM)?\d{5}$/.test(e)},SA:function(e){return/^(SA)?\d{15}$/.test(e)},RS:function(e){return/^(RS)?\d{9}$/.test(e)},CH:i7e,TR:function(e){return/^(TR)?\d{10}$/.test(e)},UA:function(e){return/^(UA)?\d{12}$/.test(e)},GB:function(e){return/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/.test(e)},UZ:function(e){return/^(UZ)?\d{9}$/.test(e)},AR:function(e){return/^(AR)?\d{11}$/.test(e)},BO:function(e){return/^(BO)?\d{7}$/.test(e)},BR:function(e){return/^(BR)?((\d{2}.\d{3}.\d{3}\/\d{4}-\d{2})|(\d{3}.\d{3}.\d{3}-\d{2}))$/.test(e)},CL:function(e){return/^(CL)?\d{8}-\d{1}$/.test(e)},CO:function(e){return/^(CO)?\d{10}$/.test(e)},CR:function(e){return/^(CR)?\d{9,12}$/.test(e)},EC:function(e){return/^(EC)?\d{13}$/.test(e)},SV:function(e){return/^(SV)?\d{4}-\d{6}-\d{3}-\d{1}$/.test(e)},GT:function(e){return/^(GT)?\d{7}-\d{1}$/.test(e)},HN:function(e){return/^(HN)?$/.test(e)},MX:function(e){return/^(MX)?\w{3,4}\d{6}\w{3}$/.test(e)},NI:function(e){return/^(NI)?\d{3}-\d{6}-\d{4}\w{1}$/.test(e)},PA:function(e){return/^(PA)?$/.test(e)},PY:function(e){return/^(PY)?\d{6,8}-\d{1}$/.test(e)},PE:function(e){return/^(PE)?\d{11}$/.test(e)},DO:function(e){return/^(DO)?(\d{11}|(\d{3}-\d{7}-\d{1})|[1,4,5]{1}\d{8}|([1,4,5]{1})-\d{2}-\d{5}-\d{1})$/.test(e)},UY:function(e){return/^(UY)?\d{12}$/.test(e)},VE:function(e){return/^(VE)?[J,G,V,E]{1}-(\d{9}|(\d{8}-\d{1}))$/.test(e)}};function a7e(r,e){if((0,ZL.default)(r),(0,ZL.default)(e),e in JL)return JL[e](r);throw new Error("Invalid country code: '".concat(e,"'"))}(function(r,e){function t(ys){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Hn){return typeof Hn}:function(Hn){return Hn&&typeof Symbol=="function"&&Hn.constructor===Symbol&&Hn!==Symbol.prototype?"symbol":typeof Hn},t(ys)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=Me(GR),i=Me(qZ),s=Me(zwe),a=Me(Hwe),o=Me(Wwe),c=Me(Kwe),u=Me(Gwe),f=Me(WZ),l=Me(Qwe),d=Me(Zwe),h=Me(h9),y=Me(Jwe),p=Me(QR),g=Me(GZ),m=Me(Ywe),v=Me(Xwe),b=Me(e4e),_=Me(t4e),C=ps(N5),N=ps(O5),x=Me(c4e),I=ps(k5),$=Me(d4e),j=Me(h4e),O=Me(p4e),E=Me(y4e),S=Me(m4e),A=Me(P6),w=Me(T6),P=Me(S4e),k=Me(M4e),D=Me(T4e),T=Me(C4e),M=Me(ZR),L=ps(M6),K=Me(I4e),Y=Me(QZ),re=Me(R4e),ne=Me(N4e),ae=Me(O4e),ie=Me(k4e),fe=Me(D4e),oe=Me(B4e),ce=ps(D5),xe=Me(H4e),ge=Me(W4e),me=Me(K4e),Le=Me(G4e),Oe=Me(Q4e),Ue=Me(Z4e),te=Me(J4e),J=Me(HZ),se=Me(Y4e),be=Me(X4e),pe=Me(e9e),he=Me(t9e),Te=Me(r9e),_e=Me(n9e),ke=Me(XZ),tt=Me(i9e),V=Me(s9e),R=Me(a9e),B=Me(o9e),W=Me(c9e),z=Me(u9e),G=Me(p9e),Z=ps(B5),de=Me(g9e),Pe=Me(v9e),Ve=Me(x9e),Qe=$5,ze=Me(S9e),Se=Me(M9e),Ne=Me(P9e),We=Me(L5),Be=Me(C6),et=Me(R9e),Et=Me(N9e),ct=Me(U5),vt=Me(B9e),fo=Me($9e),qt=Me(YZ),sr=Me(L9e),Cp=Me(U9e),vr=Me(F9e),xr=Me(j9e),Ip=Me(q9e),ar=ps(F5),or=Me(iJ),ga=Me(nJ),wr=Me(sJ),Er=Me(W9e),Rp=Me(K9e),Ar=Me(G9e),_r=Me(Q9e),qi=Me(aJ),Z0=Me(Z9e),J0=Me(J9e),Y0=Me(Y9e),X0=Me(X9e),ed=Me(e7e),js=Me(j5);function ps(ys,Hn){if(typeof WeakMap=="function")var nd=new WeakMap,id=new WeakMap;return(ps=function(cn,zf){if(!zf&&cn&&cn.__esModule)return cn;var va,Np,sd={__proto__:null,default:cn};if(cn===null||t(cn)!="object"&&typeof cn!="function")return sd;if(va=zf?id:nd){if(va.has(cn))return va.get(cn);va.set(cn,sd)}for(var Hf in cn)Hf!=="default"&&{}.hasOwnProperty.call(cn,Hf)&&((Np=(va=Object.defineProperty)&&Object.getOwnPropertyDescriptor(cn,Hf))&&(Np.get||Np.set)?va(sd,Hf,Np):sd[Hf]=cn[Hf]);return sd})(ys,Hn)}function Me(ys){return ys&&ys.__esModule?ys:{default:ys}}var td="13.15.15",rd={version:td,toDate:n.default,toFloat:i.default,toInt:s.default,toBoolean:a.default,equals:o.default,contains:c.default,matches:u.default,isEmail:f.default,isURL:l.default,isMACAddress:d.default,isIP:h.default,isIPRange:y.default,isFQDN:p.default,isBoolean:v.default,isIBAN:ce.default,isBIC:xe.default,isAbaRouting:_.default,isAlpha:C.default,isAlphaLocales:C.locales,isAlphanumeric:N.default,isAlphanumericLocales:N.locales,isNumeric:x.default,isPassportNumber:I.default,passportNumberLocales:I.locales,isPort:$.default,isLowercase:j.default,isUppercase:O.default,isAscii:S.default,isFullWidth:A.default,isHalfWidth:w.default,isVariableWidth:P.default,isMultibyte:k.default,isSemVer:D.default,isSurrogatePair:T.default,isInt:M.default,isIMEI:E.default,isFloat:L.default,isFloatLocales:L.locales,isDecimal:K.default,isHexadecimal:Y.default,isOctal:re.default,isDivisibleBy:ne.default,isHexColor:ae.default,isRgbColor:ie.default,isHSL:fe.default,isISRC:oe.default,isMD5:ge.default,isHash:me.default,isJWT:Le.default,isJSON:Oe.default,isEmpty:Ue.default,isLength:te.default,isLocale:b.default,isByteLength:J.default,isULID:se.default,isUUID:be.default,isMongoId:pe.default,isAfter:he.default,isBefore:Te.default,isIn:_e.default,isLuhnNumber:ke.default,isCreditCard:tt.default,isIdentityCard:V.default,isEAN:R.default,isISIN:B.default,isISBN:W.default,isISSN:z.default,isMobilePhone:Z.default,isMobilePhoneLocales:Z.locales,isPostalCode:ar.default,isPostalCodeLocales:ar.locales,isEthereumAddress:de.default,isCurrency:Pe.default,isBtcAddress:Ve.default,isISO6346:Qe.isISO6346,isFreightContainerID:Qe.isFreightContainerID,isISO6391:ze.default,isISO8601:Se.default,isISO15924:We.default,isRFC3339:Ne.default,isISO31661Alpha2:Be.default,isISO31661Alpha3:et.default,isISO31661Numeric:Et.default,isISO4217:ct.default,isBase32:vt.default,isBase58:fo.default,isBase64:qt.default,isDataURI:sr.default,isMagnetURI:Cp.default,isMailtoURI:vr.default,isMimeType:xr.default,isLatLong:Ip.default,ltrim:or.default,rtrim:ga.default,trim:wr.default,escape:Er.default,unescape:Rp.default,stripLow:Ar.default,whitelist:_r.default,blacklist:qi.default,isWhitelisted:Z0.default,normalizeEmail:J0.default,toString,isSlug:Y0.default,isStrongPassword:ed.default,isTaxID:G.default,isDate:g.default,isTime:m.default,isLicensePlate:X0.default,isVAT:js.default,ibanLocales:ce.locales};e.default=rd,r.exports=e.default,r.exports.default=e.default})(bM,bM.exports);var o7e=bM.exports,uv=o7e,b3={date:function(r){if(typeof r!="string")return!0;var e=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/.exec(r);return!(e===null||e[2]<"01"||e[2]>"12"||e[3]<"01"||e[3]>"31")},"date-time":function(r){if(typeof r!="string")return!0;var e=r.toLowerCase().split("t");if(!b3.date(e[0]))return!1;var t=/^([0-9]{2}):([0-9]{2}):([0-9]{2})(.[0-9]+)?(z|([+-][0-9]{2}:[0-9]{2}))$/.exec(e[1]);return!(t===null||t[1]>"23"||t[2]>"59"||t[3]>"59")},email:function(r){return typeof r!="string"?!0:uv.isEmail(r,{require_tld:!0})},hostname:function(r){if(typeof r!="string")return!0;var e=/^[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?(\.[a-zA-Z](([-0-9a-zA-Z]+)?[0-9a-zA-Z])?)*$/.test(r);if(e){if(r.length>255)return!1;for(var t=r.split("."),n=0;n<t.length;n++)if(t[n].length>63)return!1}return e},"host-name":function(r){return b3.hostname.call(this,r)},ipv4:function(r){return typeof r!="string"?!0:uv.isIP(r,4)},ipv6:function(r){return typeof r!="string"?!0:uv.isIP(r,6)},regex:function(r){try{return RegExp(r),!0}catch{return!1}},uri:function(r){return this.options.strictUris?b3["strict-uri"].apply(this,arguments):typeof r!="string"||RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?").test(r)},"strict-uri":function(r){return typeof r!="string"||uv.isURL(r)}},JR=b3,YR={};(function(r){var e=JR,t=I5,n=Mp,i=function(c,u){return c&&Array.isArray(c.includeErrors)&&c.includeErrors.length>0&&!u.some(function(f){return c.includeErrors.includes(f)})},s={multipleOf:function(c,u,f){if(!i(this.validateOptions,["MULTIPLE_OF"])&&typeof f=="number"){var l=String(u.multipleOf),d=Math.pow(10,l.length-l.indexOf(".")-1);n.whatIs(f*d/(u.multipleOf*d))!=="integer"&&c.addError("MULTIPLE_OF",[f,u.multipleOf],null,u)}},maximum:function(c,u,f){i(this.validateOptions,["MAXIMUM","MAXIMUM_EXCLUSIVE"])||typeof f=="number"&&(u.exclusiveMaximum!==!0?f>u.maximum&&c.addError("MAXIMUM",[f,u.maximum],null,u):f>=u.maximum&&c.addError("MAXIMUM_EXCLUSIVE",[f,u.maximum],null,u))},exclusiveMaximum:function(){},minimum:function(c,u,f){i(this.validateOptions,["MINIMUM","MINIMUM_EXCLUSIVE"])||typeof f=="number"&&(u.exclusiveMinimum!==!0?f<u.minimum&&c.addError("MINIMUM",[f,u.minimum],null,u):f<=u.minimum&&c.addError("MINIMUM_EXCLUSIVE",[f,u.minimum],null,u))},exclusiveMinimum:function(){},maxLength:function(c,u,f){i(this.validateOptions,["MAX_LENGTH"])||typeof f=="string"&&n.ucs2decode(f).length>u.maxLength&&c.addError("MAX_LENGTH",[f.length,u.maxLength],null,u)},minLength:function(c,u,f){i(this.validateOptions,["MIN_LENGTH"])||typeof f=="string"&&n.ucs2decode(f).length<u.minLength&&c.addError("MIN_LENGTH",[f.length,u.minLength],null,u)},pattern:function(c,u,f){i(this.validateOptions,["PATTERN"])||typeof f=="string"&&RegExp(u.pattern).test(f)===!1&&c.addError("PATTERN",[u.pattern,f],null,u)},additionalItems:function(c,u,f){i(this.validateOptions,["ARRAY_ADDITIONAL_ITEMS"])||Array.isArray(f)&&u.additionalItems===!1&&Array.isArray(u.items)&&f.length>u.items.length&&c.addError("ARRAY_ADDITIONAL_ITEMS",null,null,u)},items:function(){},maxItems:function(c,u,f){i(this.validateOptions,["ARRAY_LENGTH_LONG"])||Array.isArray(f)&&f.length>u.maxItems&&c.addError("ARRAY_LENGTH_LONG",[f.length,u.maxItems],null,u)},minItems:function(c,u,f){i(this.validateOptions,["ARRAY_LENGTH_SHORT"])||Array.isArray(f)&&f.length<u.minItems&&c.addError("ARRAY_LENGTH_SHORT",[f.length,u.minItems],null,u)},uniqueItems:function(c,u,f){if(!i(this.validateOptions,["ARRAY_UNIQUE"])&&Array.isArray(f)&&u.uniqueItems===!0){var l=[];n.isUniqueArray(f,l)===!1&&c.addError("ARRAY_UNIQUE",l,null,u)}},maxProperties:function(c,u,f){if(!i(this.validateOptions,["OBJECT_PROPERTIES_MAXIMUM"])&&n.whatIs(f)==="object"){var l=Object.keys(f).length;l>u.maxProperties&&c.addError("OBJECT_PROPERTIES_MAXIMUM",[l,u.maxProperties],null,u)}},minProperties:function(c,u,f){if(!i(this.validateOptions,["OBJECT_PROPERTIES_MINIMUM"])&&n.whatIs(f)==="object"){var l=Object.keys(f).length;l<u.minProperties&&c.addError("OBJECT_PROPERTIES_MINIMUM",[l,u.minProperties],null,u)}},required:function(c,u,f){if(!i(this.validateOptions,["OBJECT_MISSING_REQUIRED_PROPERTY"])&&n.whatIs(f)==="object")for(var l=u.required.length;l--;){var d=u.required[l];f[d]===void 0&&c.addError("OBJECT_MISSING_REQUIRED_PROPERTY",[d],null,u)}},additionalProperties:function(c,u,f){if(u.properties===void 0&&u.patternProperties===void 0)return s.properties.call(this,c,u,f)},patternProperties:function(c,u,f){if(u.properties===void 0)return s.properties.call(this,c,u,f)},properties:function(c,u,f){if(!i(this.validateOptions,["OBJECT_ADDITIONAL_PROPERTIES"])&&n.whatIs(f)==="object"){var l=u.properties!==void 0?u.properties:{},d=u.patternProperties!==void 0?u.patternProperties:{};if(u.additionalProperties===!1){var h=Object.keys(f),y=Object.keys(l),p=Object.keys(d);h=n.difference(h,y);for(var g=p.length;g--;)for(var m=RegExp(p[g]),v=h.length;v--;)m.test(h[v])===!0&&h.splice(v,1);if(h.length>0){var b=this.options.assumeAdditional.length;if(b)for(;b--;){var _=h.indexOf(this.options.assumeAdditional[b]);_!==-1&&h.splice(_,1)}var C=h.length;if(C)for(;C--;)c.addError("OBJECT_ADDITIONAL_PROPERTIES",[h[C]],null,u)}}}},dependencies:function(c,u,f){if(!i(this.validateOptions,["OBJECT_DEPENDENCY_KEY"])&&n.whatIs(f)==="object")for(var l=Object.keys(u.dependencies),d=l.length;d--;){var h=l[d];if(f[h]){var y=u.dependencies[h];if(n.whatIs(y)==="object")r.validate.call(this,c,y,f);else for(var p=y.length;p--;){var g=y[p];f[g]===void 0&&c.addError("OBJECT_DEPENDENCY_KEY",[g,h],null,u)}}}},enum:function(c,u,f){if(!i(this.validateOptions,["ENUM_CASE_MISMATCH","ENUM_MISMATCH"])){for(var l=!1,d=!1,h=u.enum.length;h--;)if(n.areEqual(f,u.enum[h])){l=!0;break}else n.areEqual(f,u.enum[h]),d=!0;if(l===!1){var y=d&&this.options.enumCaseInsensitiveComparison?"ENUM_CASE_MISMATCH":"ENUM_MISMATCH";c.addError(y,[f],null,u)}}},type:function(c,u,f){if(!i(this.validateOptions,["INVALID_TYPE"])){var l=n.whatIs(f);typeof u.type=="string"?l!==u.type&&(l!=="integer"||u.type!=="number")&&c.addError("INVALID_TYPE",[u.type,l],null,u):u.type.indexOf(l)===-1&&(l!=="integer"||u.type.indexOf("number")===-1)&&c.addError("INVALID_TYPE",[u.type,l],null,u)}},allOf:function(c,u,f){for(var l=u.allOf.length;l--;){var d=r.validate.call(this,c,u.allOf[l],f);if(this.options.breakOnFirstError&&d===!1)break}},anyOf:function(c,u,f){for(var l=[],d=!1,h=u.anyOf.length;h--&&d===!1;){var y=new t(c);l.push(y),d=r.validate.call(this,y,u.anyOf[h],f)}d===!1&&c.addError("ANY_OF_MISSING",void 0,l,u)},oneOf:function(c,u,f){for(var l=0,d=[],h=u.oneOf.length;h--;){var y=new t(c,{maxErrors:1});d.push(y),r.validate.call(this,y,u.oneOf[h],f)===!0&&l++}l===0?c.addError("ONE_OF_MISSING",void 0,d,u):l>1&&c.addError("ONE_OF_MULTIPLE",null,null,u)},not:function(c,u,f){var l=new t(c);r.validate.call(this,l,u.not,f)===!0&&c.addError("NOT_PASSED",null,null,u)},definitions:function(){},format:function(c,u,f){var l=e[u.format];if(typeof l=="function"){if(i(this.validateOptions,["INVALID_FORMAT"])||c.hasError("INVALID_TYPE",[u.type,n.whatIs(f)]))return;if(l.length===2){var d=n.clone(c.path);c.addAsyncTask(l,[f],function(h){if(h!==!0){var y=c.path;c.path=d,c.addError("INVALID_FORMAT",[u.format,f],null,u),c.path=y}})}else l.call(this,f)!==!0&&c.addError("INVALID_FORMAT",[u.format,f],null,u)}else this.options.ignoreUnknownFormats!==!0&&c.addError("UNKNOWN_FORMAT",[u.format],null,u)}},a=function(c,u,f){var l=f.length;if(Array.isArray(u.items))for(;l--;)l<u.items.length?(c.path.push(l),r.validate.call(this,c,u.items[l],f[l]),c.path.pop()):typeof u.additionalItems=="object"&&(c.path.push(l),r.validate.call(this,c,u.additionalItems,f[l]),c.path.pop());else if(typeof u.items=="object")for(;l--;)c.path.push(l),r.validate.call(this,c,u.items,f[l]),c.path.pop()},o=function(c,u,f){var l=u.additionalProperties;(l===!0||l===void 0)&&(l={});for(var d=u.properties?Object.keys(u.properties):[],h=u.patternProperties?Object.keys(u.patternProperties):[],y=Object.keys(f),p=y.length;p--;){var g=y[p],m=f[g],v=[];d.indexOf(g)!==-1&&v.push(u.properties[g]);for(var b=h.length;b--;){var _=h[b];RegExp(_).test(g)===!0&&v.push(u.patternProperties[_])}for(v.length===0&&l!==!1&&v.push(l),b=v.length;b--;)c.path.push(g),r.validate.call(this,c,v[b],m),c.path.pop()}};r.JsonValidators=s,r.validate=function(c,u,f){c.commonErrorMessage="JSON_OBJECT_VALIDATION_FAILED";var l=n.whatIs(u);if(l!=="object")return c.addError("SCHEMA_NOT_AN_OBJECT",[l],null,u),!1;var d=Object.keys(u);if(d.length===0)return!0;var h=!1;if(c.rootSchema||(c.rootSchema=u,h=!0),u.$ref!==void 0){for(var y=99;u.$ref&&y>0;){if(u.__$refResolved){if(u.__$refResolved===u)break;u=u.__$refResolved,d=Object.keys(u)}else{c.addError("REF_UNRESOLVED",[u.$ref],null,u);break}y--}if(y===0)throw new Error("Circular dependency by $ref references!")}var p=n.whatIs(f);if(u.type&&(d.splice(d.indexOf("type"),1),s.type.call(this,c,u,f),c.errors.length&&this.options.breakOnFirstError))return!1;for(var g=d.length;g--&&!(s[d[g]]&&(s[d[g]].call(this,c,u,f),c.errors.length&&this.options.breakOnFirstError)););return(c.errors.length===0||this.options.breakOnFirstError===!1)&&(p==="array"?a.call(this,c,u,f):p==="object"&&o.call(this,c,u,f)),typeof this.options.customValidator=="function"&&this.options.customValidator.call(this,c,u,f),h&&(c.rootSchema=void 0),c.errors.length===0}})(YR);var oA={},rw={exports:{}};rw.exports;(function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,s=2,a=9007199254740991,o="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",l="[object Date]",d="[object Error]",h="[object Function]",y="[object GeneratorFunction]",p="[object Map]",g="[object Number]",m="[object Null]",v="[object Object]",b="[object Promise]",_="[object Proxy]",C="[object RegExp]",N="[object Set]",x="[object String]",I="[object Symbol]",$="[object Undefined]",j="[object WeakMap]",O="[object ArrayBuffer]",E="[object DataView]",S="[object Float32Array]",A="[object Float64Array]",w="[object Int8Array]",P="[object Int16Array]",k="[object Int32Array]",D="[object Uint8Array]",T="[object Uint8ClampedArray]",M="[object Uint16Array]",L="[object Uint32Array]",K=/[\\^$.*+?()[\]{}|]/g,Y=/^\[object .+?Constructor\]$/,re=/^(?:0|[1-9]\d*)$/,ne={};ne[S]=ne[A]=ne[w]=ne[P]=ne[k]=ne[D]=ne[T]=ne[M]=ne[L]=!0,ne[o]=ne[c]=ne[O]=ne[f]=ne[E]=ne[l]=ne[d]=ne[h]=ne[p]=ne[g]=ne[v]=ne[C]=ne[N]=ne[x]=ne[j]=!1;var ae=typeof Ht=="object"&&Ht&&Ht.Object===Object&&Ht,ie=typeof self=="object"&&self&&self.Object===Object&&self,fe=ae||ie||Function("return this")(),oe=e&&!e.nodeType&&e,ce=oe&&!0&&r&&!r.nodeType&&r,xe=ce&&ce.exports===oe,ge=xe&&ae.process,me=function(){try{return ge&&ge.binding&&ge.binding("util")}catch{}}(),Le=me&&me.isTypedArray;function Oe(X,ue){for(var Ee=-1,Je=X==null?0:X.length,dr=0,yt=[];++Ee<Je;){var zr=X[Ee];ue(zr,Ee,X)&&(yt[dr++]=zr)}return yt}function Ue(X,ue){for(var Ee=-1,Je=ue.length,dr=X.length;++Ee<Je;)X[dr+Ee]=ue[Ee];return X}function te(X,ue){for(var Ee=-1,Je=X==null?0:X.length;++Ee<Je;)if(ue(X[Ee],Ee,X))return!0;return!1}function J(X,ue){for(var Ee=-1,Je=Array(X);++Ee<X;)Je[Ee]=ue(Ee);return Je}function se(X){return function(ue){return X(ue)}}function be(X,ue){return X.has(ue)}function pe(X,ue){return X==null?void 0:X[ue]}function he(X){var ue=-1,Ee=Array(X.size);return X.forEach(function(Je,dr){Ee[++ue]=[dr,Je]}),Ee}function Te(X,ue){return function(Ee){return X(ue(Ee))}}function _e(X){var ue=-1,Ee=Array(X.size);return X.forEach(function(Je){Ee[++ue]=Je}),Ee}var ke=Array.prototype,tt=Function.prototype,V=Object.prototype,R=fe["__core-js_shared__"],B=tt.toString,W=V.hasOwnProperty,z=function(){var X=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}(),G=V.toString,Z=RegExp("^"+B.call(W).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),de=xe?fe.Buffer:void 0,Pe=fe.Symbol,Ve=fe.Uint8Array,Qe=V.propertyIsEnumerable,ze=ke.splice,Se=Pe?Pe.toStringTag:void 0,Ne=Object.getOwnPropertySymbols,We=de?de.isBuffer:void 0,Be=Te(Object.keys,Object),et=Op(fe,"DataView"),Et=Op(fe,"Map"),ct=Op(fe,"Promise"),vt=Op(fe,"Set"),fo=Op(fe,"WeakMap"),qt=Op(Object,"create"),sr=ad(et),Cp=ad(Et),vr=ad(ct),xr=ad(vt),Ip=ad(fo),ar=Pe?Pe.prototype:void 0,or=ar?ar.valueOf:void 0;function ga(X){var ue=-1,Ee=X==null?0:X.length;for(this.clear();++ue<Ee;){var Je=X[ue];this.set(Je[0],Je[1])}}function wr(){this.__data__=qt?qt(null):{},this.size=0}function Er(X){var ue=this.has(X)&&delete this.__data__[X];return this.size-=ue?1:0,ue}function Rp(X){var ue=this.__data__;if(qt){var Ee=ue[X];return Ee===n?void 0:Ee}return W.call(ue,X)?ue[X]:void 0}function Ar(X){var ue=this.__data__;return qt?ue[X]!==void 0:W.call(ue,X)}function _r(X,ue){var Ee=this.__data__;return this.size+=this.has(X)?0:1,Ee[X]=qt&&ue===void 0?n:ue,this}ga.prototype.clear=wr,ga.prototype.delete=Er,ga.prototype.get=Rp,ga.prototype.has=Ar,ga.prototype.set=_r;function qi(X){var ue=-1,Ee=X==null?0:X.length;for(this.clear();++ue<Ee;){var Je=X[ue];this.set(Je[0],Je[1])}}function Z0(){this.__data__=[],this.size=0}function J0(X){var ue=this.__data__,Ee=t8(ue,X);if(Ee<0)return!1;var Je=ue.length-1;return Ee==Je?ue.pop():ze.call(ue,Ee,1),--this.size,!0}function Y0(X){var ue=this.__data__,Ee=t8(ue,X);return Ee<0?void 0:ue[Ee][1]}function X0(X){return t8(this.__data__,X)>-1}function ed(X,ue){var Ee=this.__data__,Je=t8(Ee,X);return Je<0?(++this.size,Ee.push([X,ue])):Ee[Je][1]=ue,this}qi.prototype.clear=Z0,qi.prototype.delete=J0,qi.prototype.get=Y0,qi.prototype.has=X0,qi.prototype.set=ed;function js(X){var ue=-1,Ee=X==null?0:X.length;for(this.clear();++ue<Ee;){var Je=X[ue];this.set(Je[0],Je[1])}}function ps(){this.size=0,this.__data__={hash:new ga,map:new(Et||qi),string:new ga}}function Me(X){var ue=r8(this,X).delete(X);return this.size-=ue?1:0,ue}function td(X){return r8(this,X).get(X)}function rd(X){return r8(this,X).has(X)}function ys(X,ue){var Ee=r8(this,X),Je=Ee.size;return Ee.set(X,ue),this.size+=Ee.size==Je?0:1,this}js.prototype.clear=ps,js.prototype.delete=Me,js.prototype.get=td,js.prototype.has=rd,js.prototype.set=ys;function Hn(X){var ue=-1,Ee=X==null?0:X.length;for(this.__data__=new js;++ue<Ee;)this.add(X[ue])}function nd(X){return this.__data__.set(X,n),this}function id(X){return this.__data__.has(X)}Hn.prototype.add=Hn.prototype.push=nd,Hn.prototype.has=id;function qs(X){var ue=this.__data__=new qi(X);this.size=ue.size}function cn(){this.__data__=new qi,this.size=0}function zf(X){var ue=this.__data__,Ee=ue.delete(X);return this.size=ue.size,Ee}function va(X){return this.__data__.get(X)}function Np(X){return this.__data__.has(X)}function sd(X,ue){var Ee=this.__data__;if(Ee instanceof qi){var Je=Ee.__data__;if(!Et||Je.length<t-1)return Je.push([X,ue]),this.size=++Ee.size,this;Ee=this.__data__=new js(Je)}return Ee.set(X,ue),this.size=Ee.size,this}qs.prototype.clear=cn,qs.prototype.delete=zf,qs.prototype.get=va,qs.prototype.has=Np,qs.prototype.set=sd;function Hf(X,ue){var Ee=n8(X),Je=!Ee&&TX(X),dr=!Ee&&!Je&&D9(X),yt=!Ee&&!Je&&!dr&&cO(X),zr=Ee||Je||dr||yt,Sn=zr?J(X.length,String):[],Wn=Sn.length;for(var kr in X)W.call(X,kr)&&!(zr&&(kr=="length"||dr&&(kr=="offset"||kr=="parent")||yt&&(kr=="buffer"||kr=="byteLength"||kr=="byteOffset")||AX(kr,Wn)))&&Sn.push(kr);return Sn}function t8(X,ue){for(var Ee=X.length;Ee--;)if(iO(X[Ee][0],ue))return Ee;return-1}function pX(X,ue,Ee){var Je=ue(X);return n8(X)?Je:Ue(Je,Ee(X))}function D6(X){return X==null?X===void 0?$:m:Se&&Se in Object(X)?wX(X):PX(X)}function eO(X){return B6(X)&&D6(X)==o}function tO(X,ue,Ee,Je,dr){return X===ue?!0:X==null||ue==null||!B6(X)&&!B6(ue)?X!==X&&ue!==ue:yX(X,ue,Ee,Je,tO,dr)}function yX(X,ue,Ee,Je,dr,yt){var zr=n8(X),Sn=n8(ue),Wn=zr?c:Wf(X),kr=Sn?c:Wf(ue);Wn=Wn==o?v:Wn,kr=kr==o?v:kr;var Vs=Wn==v,lo=kr==v,vi=Wn==kr;if(vi&&D9(X)){if(!D9(ue))return!1;zr=!0,Vs=!1}if(vi&&!Vs)return yt||(yt=new qs),zr||cO(X)?rO(X,ue,Ee,Je,dr,yt):vX(X,ue,Wn,Ee,Je,dr,yt);if(!(Ee&i)){var xa=Vs&&W.call(X,"__wrapped__"),wa=lo&&W.call(ue,"__wrapped__");if(xa||wa){var Kf=xa?X.value():X,vu=wa?ue.value():ue;return yt||(yt=new qs),dr(Kf,vu,Ee,Je,yt)}}return vi?(yt||(yt=new qs),xX(X,ue,Ee,Je,dr,yt)):!1}function mX(X){if(!oO(X)||SX(X))return!1;var ue=sO(X)?Z:Y;return ue.test(ad(X))}function bX(X){return B6(X)&&aO(X.length)&&!!ne[D6(X)]}function gX(X){if(!MX(X))return Be(X);var ue=[];for(var Ee in Object(X))W.call(X,Ee)&&Ee!="constructor"&&ue.push(Ee);return ue}function rO(X,ue,Ee,Je,dr,yt){var zr=Ee&i,Sn=X.length,Wn=ue.length;if(Sn!=Wn&&!(zr&&Wn>Sn))return!1;var kr=yt.get(X);if(kr&&yt.get(ue))return kr==ue;var Vs=-1,lo=!0,vi=Ee&s?new Hn:void 0;for(yt.set(X,ue),yt.set(ue,X);++Vs<Sn;){var xa=X[Vs],wa=ue[Vs];if(Je)var Kf=zr?Je(wa,xa,Vs,ue,X,yt):Je(xa,wa,Vs,X,ue,yt);if(Kf!==void 0){if(Kf)continue;lo=!1;break}if(vi){if(!te(ue,function(vu,od){if(!be(vi,od)&&(xa===vu||dr(xa,vu,Ee,Je,yt)))return vi.push(od)})){lo=!1;break}}else if(!(xa===wa||dr(xa,wa,Ee,Je,yt))){lo=!1;break}}return yt.delete(X),yt.delete(ue),lo}function vX(X,ue,Ee,Je,dr,yt,zr){switch(Ee){case E:if(X.byteLength!=ue.byteLength||X.byteOffset!=ue.byteOffset)return!1;X=X.buffer,ue=ue.buffer;case O:return!(X.byteLength!=ue.byteLength||!yt(new Ve(X),new Ve(ue)));case f:case l:case g:return iO(+X,+ue);case d:return X.name==ue.name&&X.message==ue.message;case C:case x:return X==ue+"";case p:var Sn=he;case N:var Wn=Je&i;if(Sn||(Sn=_e),X.size!=ue.size&&!Wn)return!1;var kr=zr.get(X);if(kr)return kr==ue;Je|=s,zr.set(X,ue);var Vs=rO(Sn(X),Sn(ue),Je,dr,yt,zr);return zr.delete(X),Vs;case I:if(or)return or.call(X)==or.call(ue)}return!1}function xX(X,ue,Ee,Je,dr,yt){var zr=Ee&i,Sn=nO(X),Wn=Sn.length,kr=nO(ue),Vs=kr.length;if(Wn!=Vs&&!zr)return!1;for(var lo=Wn;lo--;){var vi=Sn[lo];if(!(zr?vi in ue:W.call(ue,vi)))return!1}var xa=yt.get(X);if(xa&&yt.get(ue))return xa==ue;var wa=!0;yt.set(X,ue),yt.set(ue,X);for(var Kf=zr;++lo<Wn;){vi=Sn[lo];var vu=X[vi],od=ue[vi];if(Je)var uO=zr?Je(od,vu,vi,ue,X,yt):Je(vu,od,vi,X,ue,yt);if(!(uO===void 0?vu===od||dr(vu,od,Ee,Je,yt):uO)){wa=!1;break}Kf||(Kf=vi=="constructor")}if(wa&&!Kf){var i8=X.constructor,s8=ue.constructor;i8!=s8&&"constructor"in X&&"constructor"in ue&&!(typeof i8=="function"&&i8 instanceof i8&&typeof s8=="function"&&s8 instanceof s8)&&(wa=!1)}return yt.delete(X),yt.delete(ue),wa}function nO(X){return pX(X,RX,EX)}function r8(X,ue){var Ee=X.__data__;return _X(ue)?Ee[typeof ue=="string"?"string":"hash"]:Ee.map}function Op(X,ue){var Ee=pe(X,ue);return mX(Ee)?Ee:void 0}function wX(X){var ue=W.call(X,Se),Ee=X[Se];try{X[Se]=void 0;var Je=!0}catch{}var dr=G.call(X);return Je&&(ue?X[Se]=Ee:delete X[Se]),dr}var EX=Ne?function(X){return X==null?[]:(X=Object(X),Oe(Ne(X),function(ue){return Qe.call(X,ue)}))}:NX,Wf=D6;(et&&Wf(new et(new ArrayBuffer(1)))!=E||Et&&Wf(new Et)!=p||ct&&Wf(ct.resolve())!=b||vt&&Wf(new vt)!=N||fo&&Wf(new fo)!=j)&&(Wf=function(X){var ue=D6(X),Ee=ue==v?X.constructor:void 0,Je=Ee?ad(Ee):"";if(Je)switch(Je){case sr:return E;case Cp:return p;case vr:return b;case xr:return N;case Ip:return j}return ue});function AX(X,ue){return ue=ue??a,!!ue&&(typeof X=="number"||re.test(X))&&X>-1&&X%1==0&&X<ue}function _X(X){var ue=typeof X;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?X!=="__proto__":X===null}function SX(X){return!!z&&z in X}function MX(X){var ue=X&&X.constructor,Ee=typeof ue=="function"&&ue.prototype||V;return X===Ee}function PX(X){return G.call(X)}function ad(X){if(X!=null){try{return B.call(X)}catch{}try{return X+""}catch{}}return""}function iO(X,ue){return X===ue||X!==X&&ue!==ue}var TX=eO(function(){return arguments}())?eO:function(X){return B6(X)&&W.call(X,"callee")&&!Qe.call(X,"callee")},n8=Array.isArray;function CX(X){return X!=null&&aO(X.length)&&!sO(X)}var D9=We||OX;function IX(X,ue){return tO(X,ue)}function sO(X){if(!oO(X))return!1;var ue=D6(X);return ue==h||ue==y||ue==u||ue==_}function aO(X){return typeof X=="number"&&X>-1&&X%1==0&&X<=a}function oO(X){var ue=typeof X;return X!=null&&(ue=="object"||ue=="function")}function B6(X){return X!=null&&typeof X=="object"}var cO=Le?se(Le):bX;function RX(X){return CX(X)?Hf(X):gX(X)}function NX(){return[]}function OX(){return!1}r.exports=IX})(rw,rw.exports);var c7e=rw.exports,cA={},YL;function cJ(){return YL||(YL=1,function(r){var e=I5,t=uJ(),n=Mp;function i(u,f){if(n.isAbsoluteUri(f))return f;var l=u.join(""),d=n.isAbsoluteUri(l),h=n.isRelativeUri(l),y=n.isRelativeUri(f),p;d&&y?(p=l.match(/\/[^\/]*$/),p&&(l=l.slice(0,p.index+1))):h&&y?l="":(p=l.match(/[^#/]+$/),p&&(l=l.slice(0,p.index)));var g=l+f;return g=g.replace(/##/,"#"),g}function s(u,f,l,d){if(f=f||[],l=l||[],d=d||[],typeof u!="object"||u===null)return f;typeof u.id=="string"&&l.push(u.id),typeof u.$ref=="string"&&typeof u.__$refResolved>"u"&&f.push({ref:i(l,u.$ref),key:"$ref",obj:u,path:d.slice(0)}),typeof u.$schema=="string"&&typeof u.__$schemaResolved>"u"&&f.push({ref:i(l,u.$schema),key:"$schema",obj:u,path:d.slice(0)});var h;if(Array.isArray(u))for(h=u.length;h--;)d.push(h.toString()),s(u[h],f,l,d),d.pop();else{var y=Object.keys(u);for(h=y.length;h--;)y[h].indexOf("__$")!==0&&(d.push(y[h]),s(u[y[h]],f,l,d),d.pop())}return typeof u.id=="string"&&l.pop(),f}var a=function(u,f){for(var l=f.length,d=0;l--;){var h=new e(u),y=r.compileSchema.call(this,h,f[l]);y&&d++,u.errors=u.errors.concat(h.errors)}return d};function o(u,f){for(var l=u.length;l--;)if(u[l].id===f)return u[l];return null}var c=function(u,f){var l=0,d;do{for(var h=u.errors.length;h--;)u.errors[h].code==="UNRESOLVABLE_REFERENCE"&&u.errors.splice(h,1);for(d=l,l=a.call(this,u,f),h=f.length;h--;){var y=f[h];if(y.__$missingReferences){for(var p=y.__$missingReferences.length;p--;){var g=y.__$missingReferences[p],m=o(f,g.ref);m&&(g.obj["__"+g.key+"Resolved"]=m,y.__$missingReferences.splice(p,1))}y.__$missingReferences.length===0&&delete y.__$missingReferences}}}while(l!==f.length&&l!==d);return u.isValid()};r.compileSchema=function(u,f){if(u.commonErrorMessage="SCHEMA_COMPILATION_FAILED",typeof f=="string"){var l=t.getSchemaByUri.call(this,u,f);if(!l)return u.addError("SCHEMA_NOT_REACHABLE",[f]),!1;f=l}if(Array.isArray(f))return c.call(this,u,f);if(f.__$compiled&&f.id&&t.checkCacheForUri.call(this,f.id)===!1&&(f.__$compiled=void 0),f.__$compiled)return!0;f.id&&typeof f.id=="string"&&t.cacheSchemaByUri.call(this,f.id,f);var d=!1;u.rootSchema||(u.rootSchema=f,d=!0);var h=u.isValid();delete f.__$missingReferences;for(var y=s.call(this,f),p=y.length;p--;){var g=y[p],m=t.getSchemaByUri.call(this,u,g.ref,f);if(!m){var v=this.getSchemaReader();if(v){var b=v(g.ref);if(b){b.id=g.ref;var _=new e(u);r.compileSchema.call(this,_,b)?m=t.getSchemaByUri.call(this,u,g.ref,f):u.errors=u.errors.concat(_.errors)}}}if(!m){var C=u.hasError("REMOTE_NOT_VALID",[g.ref]),N=n.isAbsoluteUri(g.ref),x=!1,I=this.options.ignoreUnresolvableReferences===!0;N&&(x=t.checkCacheForUri.call(this,g.ref)),C||I&&N||x||(Array.prototype.push.apply(u.path,g.path),u.addError("UNRESOLVABLE_REFERENCE",[g.ref]),u.path=u.path.slice(0,-g.path.length),h&&(f.__$missingReferences=f.__$missingReferences||[],f.__$missingReferences.push(g)))}g.obj["__"+g.key+"Resolved"]=m}var $=u.isValid();return $?f.__$compiled=!0:f.id&&typeof f.id=="string"&&t.removeFromCacheByUri.call(this,f.id),d&&(u.rootSchema=void 0),$}}(cA)),cA}var XR={};(function(r){var e=JR,t=YR,n=I5,i=Mp,s={$ref:function(o,c){typeof c.$ref!="string"&&o.addError("KEYWORD_TYPE_EXPECTED",["$ref","string"])},$schema:function(o,c){typeof c.$schema!="string"&&o.addError("KEYWORD_TYPE_EXPECTED",["$schema","string"])},multipleOf:function(o,c){typeof c.multipleOf!="number"?o.addError("KEYWORD_TYPE_EXPECTED",["multipleOf","number"]):c.multipleOf<=0&&o.addError("KEYWORD_MUST_BE",["multipleOf","strictly greater than 0"])},maximum:function(o,c){typeof c.maximum!="number"&&o.addError("KEYWORD_TYPE_EXPECTED",["maximum","number"])},exclusiveMaximum:function(o,c){typeof c.exclusiveMaximum!="boolean"?o.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMaximum","boolean"]):c.maximum===void 0&&o.addError("KEYWORD_DEPENDENCY",["exclusiveMaximum","maximum"])},minimum:function(o,c){typeof c.minimum!="number"&&o.addError("KEYWORD_TYPE_EXPECTED",["minimum","number"])},exclusiveMinimum:function(o,c){typeof c.exclusiveMinimum!="boolean"?o.addError("KEYWORD_TYPE_EXPECTED",["exclusiveMinimum","boolean"]):c.minimum===void 0&&o.addError("KEYWORD_DEPENDENCY",["exclusiveMinimum","minimum"])},maxLength:function(o,c){i.whatIs(c.maxLength)!=="integer"?o.addError("KEYWORD_TYPE_EXPECTED",["maxLength","integer"]):c.maxLength<0&&o.addError("KEYWORD_MUST_BE",["maxLength","greater than, or equal to 0"])},minLength:function(o,c){i.whatIs(c.minLength)!=="integer"?o.addError("KEYWORD_TYPE_EXPECTED",["minLength","integer"]):c.minLength<0&&o.addError("KEYWORD_MUST_BE",["minLength","greater than, or equal to 0"])},pattern:function(o,c){if(typeof c.pattern!="string")o.addError("KEYWORD_TYPE_EXPECTED",["pattern","string"]);else try{RegExp(c.pattern)}catch{o.addError("KEYWORD_PATTERN",["pattern",c.pattern])}},additionalItems:function(o,c){var u=i.whatIs(c.additionalItems);u!=="boolean"&&u!=="object"?o.addError("KEYWORD_TYPE_EXPECTED",["additionalItems",["boolean","object"]]):u==="object"&&(o.path.push("additionalItems"),r.validateSchema.call(this,o,c.additionalItems),o.path.pop())},items:function(o,c){var u=i.whatIs(c.items);if(u==="object")o.path.push("items"),r.validateSchema.call(this,o,c.items),o.path.pop();else if(u==="array")for(var f=c.items.length;f--;)o.path.push("items"),o.path.push(f.toString()),r.validateSchema.call(this,o,c.items[f]),o.path.pop(),o.path.pop();else o.addError("KEYWORD_TYPE_EXPECTED",["items",["array","object"]]);this.options.forceAdditional===!0&&c.additionalItems===void 0&&Array.isArray(c.items)&&o.addError("KEYWORD_UNDEFINED_STRICT",["additionalItems"]),this.options.assumeAdditional&&c.additionalItems===void 0&&Array.isArray(c.items)&&(c.additionalItems=!1)},maxItems:function(o,c){typeof c.maxItems!="number"?o.addError("KEYWORD_TYPE_EXPECTED",["maxItems","integer"]):c.maxItems<0&&o.addError("KEYWORD_MUST_BE",["maxItems","greater than, or equal to 0"])},minItems:function(o,c){i.whatIs(c.minItems)!=="integer"?o.addError("KEYWORD_TYPE_EXPECTED",["minItems","integer"]):c.minItems<0&&o.addError("KEYWORD_MUST_BE",["minItems","greater than, or equal to 0"])},uniqueItems:function(o,c){typeof c.uniqueItems!="boolean"&&o.addError("KEYWORD_TYPE_EXPECTED",["uniqueItems","boolean"])},maxProperties:function(o,c){i.whatIs(c.maxProperties)!=="integer"?o.addError("KEYWORD_TYPE_EXPECTED",["maxProperties","integer"]):c.maxProperties<0&&o.addError("KEYWORD_MUST_BE",["maxProperties","greater than, or equal to 0"])},minProperties:function(o,c){i.whatIs(c.minProperties)!=="integer"?o.addError("KEYWORD_TYPE_EXPECTED",["minProperties","integer"]):c.minProperties<0&&o.addError("KEYWORD_MUST_BE",["minProperties","greater than, or equal to 0"])},required:function(o,c){if(i.whatIs(c.required)!=="array")o.addError("KEYWORD_TYPE_EXPECTED",["required","array"]);else if(c.required.length===0)o.addError("KEYWORD_MUST_BE",["required","an array with at least one element"]);else{for(var u=c.required.length;u--;)typeof c.required[u]!="string"&&o.addError("KEYWORD_VALUE_TYPE",["required","string"]);i.isUniqueArray(c.required)===!1&&o.addError("KEYWORD_MUST_BE",["required","an array with unique items"])}},additionalProperties:function(o,c){var u=i.whatIs(c.additionalProperties);u!=="boolean"&&u!=="object"?o.addError("KEYWORD_TYPE_EXPECTED",["additionalProperties",["boolean","object"]]):u==="object"&&(o.path.push("additionalProperties"),r.validateSchema.call(this,o,c.additionalProperties),o.path.pop())},properties:function(o,c){if(i.whatIs(c.properties)!=="object"){o.addError("KEYWORD_TYPE_EXPECTED",["properties","object"]);return}for(var u=Object.keys(c.properties),f=u.length;f--;){var l=u[f],d=c.properties[l];o.path.push("properties"),o.path.push(l),r.validateSchema.call(this,o,d),o.path.pop(),o.path.pop()}this.options.forceAdditional===!0&&c.additionalProperties===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["additionalProperties"]),this.options.assumeAdditional&&c.additionalProperties===void 0&&(c.additionalProperties=!1),this.options.forceProperties===!0&&u.length===0&&o.addError("CUSTOM_MODE_FORCE_PROPERTIES",["properties"])},patternProperties:function(o,c){if(i.whatIs(c.patternProperties)!=="object"){o.addError("KEYWORD_TYPE_EXPECTED",["patternProperties","object"]);return}for(var u=Object.keys(c.patternProperties),f=u.length;f--;){var l=u[f],d=c.patternProperties[l];try{RegExp(l)}catch{o.addError("KEYWORD_PATTERN",["patternProperties",l])}o.path.push("patternProperties"),o.path.push(l.toString()),r.validateSchema.call(this,o,d),o.path.pop(),o.path.pop()}this.options.forceProperties===!0&&u.length===0&&o.addError("CUSTOM_MODE_FORCE_PROPERTIES",["patternProperties"])},dependencies:function(o,c){if(i.whatIs(c.dependencies)!=="object")o.addError("KEYWORD_TYPE_EXPECTED",["dependencies","object"]);else for(var u=Object.keys(c.dependencies),f=u.length;f--;){var l=u[f],d=c.dependencies[l],h=i.whatIs(d);if(h==="object")o.path.push("dependencies"),o.path.push(l),r.validateSchema.call(this,o,d),o.path.pop(),o.path.pop();else if(h==="array"){var y=d.length;for(y===0&&o.addError("KEYWORD_MUST_BE",["dependencies","not empty array"]);y--;)typeof d[y]!="string"&&o.addError("KEYWORD_VALUE_TYPE",["dependensices","string"]);i.isUniqueArray(d)===!1&&o.addError("KEYWORD_MUST_BE",["dependencies","an array with unique items"])}else o.addError("KEYWORD_VALUE_TYPE",["dependencies","object or array"])}},enum:function(o,c){Array.isArray(c.enum)===!1?o.addError("KEYWORD_TYPE_EXPECTED",["enum","array"]):c.enum.length===0?o.addError("KEYWORD_MUST_BE",["enum","an array with at least one element"]):i.isUniqueArray(c.enum)===!1&&o.addError("KEYWORD_MUST_BE",["enum","an array with unique elements"])},type:function(o,c){var u=["array","boolean","integer","number","null","object","string"],f=u.join(","),l=Array.isArray(c.type);if(l){for(var d=c.type.length;d--;)u.indexOf(c.type[d])===-1&&o.addError("KEYWORD_TYPE_EXPECTED",["type",f]);i.isUniqueArray(c.type)===!1&&o.addError("KEYWORD_MUST_BE",["type","an object with unique properties"])}else typeof c.type=="string"?u.indexOf(c.type)===-1&&o.addError("KEYWORD_TYPE_EXPECTED",["type",f]):o.addError("KEYWORD_TYPE_EXPECTED",["type",["string","array"]]);this.options.noEmptyStrings===!0&&(c.type==="string"||l&&c.type.indexOf("string")!==-1)&&c.minLength===void 0&&c.enum===void 0&&c.format===void 0&&(c.minLength=1),this.options.noEmptyArrays===!0&&(c.type==="array"||l&&c.type.indexOf("array")!==-1)&&c.minItems===void 0&&(c.minItems=1),this.options.forceProperties===!0&&(c.type==="object"||l&&c.type.indexOf("object")!==-1)&&c.properties===void 0&&c.patternProperties===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["properties"]),this.options.forceItems===!0&&(c.type==="array"||l&&c.type.indexOf("array")!==-1)&&c.items===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["items"]),this.options.forceMinItems===!0&&(c.type==="array"||l&&c.type.indexOf("array")!==-1)&&c.minItems===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["minItems"]),this.options.forceMaxItems===!0&&(c.type==="array"||l&&c.type.indexOf("array")!==-1)&&c.maxItems===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["maxItems"]),this.options.forceMinLength===!0&&(c.type==="string"||l&&c.type.indexOf("string")!==-1)&&c.minLength===void 0&&c.format===void 0&&c.enum===void 0&&c.pattern===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["minLength"]),this.options.forceMaxLength===!0&&(c.type==="string"||l&&c.type.indexOf("string")!==-1)&&c.maxLength===void 0&&c.format===void 0&&c.enum===void 0&&c.pattern===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["maxLength"])},allOf:function(o,c){if(Array.isArray(c.allOf)===!1)o.addError("KEYWORD_TYPE_EXPECTED",["allOf","array"]);else if(c.allOf.length===0)o.addError("KEYWORD_MUST_BE",["allOf","an array with at least one element"]);else for(var u=c.allOf.length;u--;)o.path.push("allOf"),o.path.push(u.toString()),r.validateSchema.call(this,o,c.allOf[u]),o.path.pop(),o.path.pop()},anyOf:function(o,c){if(Array.isArray(c.anyOf)===!1)o.addError("KEYWORD_TYPE_EXPECTED",["anyOf","array"]);else if(c.anyOf.length===0)o.addError("KEYWORD_MUST_BE",["anyOf","an array with at least one element"]);else for(var u=c.anyOf.length;u--;)o.path.push("anyOf"),o.path.push(u.toString()),r.validateSchema.call(this,o,c.anyOf[u]),o.path.pop(),o.path.pop()},oneOf:function(o,c){if(Array.isArray(c.oneOf)===!1)o.addError("KEYWORD_TYPE_EXPECTED",["oneOf","array"]);else if(c.oneOf.length===0)o.addError("KEYWORD_MUST_BE",["oneOf","an array with at least one element"]);else for(var u=c.oneOf.length;u--;)o.path.push("oneOf"),o.path.push(u.toString()),r.validateSchema.call(this,o,c.oneOf[u]),o.path.pop(),o.path.pop()},not:function(o,c){i.whatIs(c.not)!=="object"?o.addError("KEYWORD_TYPE_EXPECTED",["not","object"]):(o.path.push("not"),r.validateSchema.call(this,o,c.not),o.path.pop())},definitions:function(o,c){if(i.whatIs(c.definitions)!=="object")o.addError("KEYWORD_TYPE_EXPECTED",["definitions","object"]);else for(var u=Object.keys(c.definitions),f=u.length;f--;){var l=u[f],d=c.definitions[l];o.path.push("definitions"),o.path.push(l),r.validateSchema.call(this,o,d),o.path.pop(),o.path.pop()}},format:function(o,c){typeof c.format!="string"?o.addError("KEYWORD_TYPE_EXPECTED",["format","string"]):e[c.format]===void 0&&this.options.ignoreUnknownFormats!==!0&&o.addError("UNKNOWN_FORMAT",[c.format])},id:function(o,c){typeof c.id!="string"&&o.addError("KEYWORD_TYPE_EXPECTED",["id","string"])},title:function(o,c){typeof c.title!="string"&&o.addError("KEYWORD_TYPE_EXPECTED",["title","string"])},description:function(o,c){typeof c.description!="string"&&o.addError("KEYWORD_TYPE_EXPECTED",["description","string"])},default:function(){}},a=function(o,c){for(var u=c.length;u--;)r.validateSchema.call(this,o,c[u]);return o.isValid()};r.validateSchema=function(o,c){if(o.commonErrorMessage="SCHEMA_VALIDATION_FAILED",Array.isArray(c))return a.call(this,o,c);if(c.__$validated)return!0;var u=c.$schema&&c.id!==c.$schema;if(u)if(c.__$schemaResolved&&c.__$schemaResolved!==c){var f=new n(o),l=t.validate.call(this,f,c.__$schemaResolved,c);l===!1&&o.addError("PARENT_SCHEMA_VALIDATION_FAILED",null,f)}else this.options.ignoreUnresolvableReferences!==!0&&o.addError("REF_UNRESOLVED",[c.$schema]);if(this.options.noTypeless===!0){if(c.type!==void 0){var d=[];Array.isArray(c.anyOf)&&(d=d.concat(c.anyOf)),Array.isArray(c.oneOf)&&(d=d.concat(c.oneOf)),Array.isArray(c.allOf)&&(d=d.concat(c.allOf)),d.forEach(function(v){v.type||(v.type=c.type)})}c.enum===void 0&&c.type===void 0&&c.anyOf===void 0&&c.oneOf===void 0&&c.not===void 0&&c.$ref===void 0&&o.addError("KEYWORD_UNDEFINED_STRICT",["type"])}for(var h=Object.keys(c),y=h.length;y--;){var p=h[y];p.indexOf("__")!==0&&(s[p]!==void 0?s[p].call(this,o,c):u||this.options.noExtraKeywords===!0&&o.addError("KEYWORD_UNEXPECTED",[p]))}if(this.options.pedanticCheck===!0){if(c.enum){var g=i.clone(c);for(delete g.enum,delete g.default,o.path.push("enum"),y=c.enum.length;y--;)o.path.push(y.toString()),t.validate.call(this,o,g,c.enum[y]),o.path.pop();o.path.pop()}c.default&&(o.path.push("default"),t.validate.call(this,o,c,c.default),o.path.pop())}var m=o.isValid();return m&&(c.__$validated=!0),m}})(XR);var XL;function uJ(){return XL||(XL=1,function(r){var e=c7e,t=I5,n=cJ(),i=XR,s=Mp;function a(f){return decodeURIComponent(f).replace(/~[0-1]/g,function(l){return l==="~1"?"/":"~"})}function o(f){var l=f.indexOf("#");return l===-1?f:f.slice(0,l)}function c(f){var l=f.indexOf("#"),d=l===-1?void 0:f.slice(l+1);return d}function u(f,l){if(!(typeof f!="object"||f===null)){if(!l||f.id&&(f.id===l||f.id[0]==="#"&&f.id.substring(1)===l))return f;var d,h;if(Array.isArray(f)){for(d=f.length;d--;)if(h=u(f[d],l),h)return h}else{var y=Object.keys(f);for(d=y.length;d--;){var p=y[d];if(p.indexOf("__$")!==0&&(h=u(f[p],l),h))return h}}}}r.cacheSchemaByUri=function(f,l){var d=o(f);d&&(this.cache[d]=l)},r.removeFromCacheByUri=function(f){var l=o(f);l&&delete this.cache[l]},r.checkCacheForUri=function(f){var l=o(f);return l?this.cache[l]!=null:!1},r.getSchema=function(f,l){return typeof l=="object"&&(l=r.getSchemaByReference.call(this,f,l)),typeof l=="string"&&(l=r.getSchemaByUri.call(this,f,l)),l},r.getSchemaByReference=function(f,l){for(var d=this.referenceCache.length;d--;)if(e(this.referenceCache[d][0],l))return this.referenceCache[d][1];var h=s.cloneDeep(l);return this.referenceCache.push([l,h]),h},r.getSchemaByUri=function(f,l,d){var h=o(l),y=c(l),p=h?this.cache[h]:d;if(p&&h){var g=p!==d;if(g){f.path.push(h);var m,v=f.getAncestor(p.id);if(v)m=v;else if(m=new t(f),n.compileSchema.call(this,m,p)){var b=this.options;try{this.options=p.__$validationOptions||this.options,i.validateSchema.call(this,m,p)}finally{this.options=b}}var _=m.isValid();if(_||f.addError("REMOTE_NOT_VALID",[l],m),f.path.pop(),!_)return}}if(p&&y)for(var C=y.split("/"),N=0,x=C.length;p&&N<x;N++){var I=a(C[N]);N===0?p=u(p,I):p=p[I]}return p},r.getRemotePath=o}(oA)),oA}const u7e="http://json-schema.org/draft-04/schema#",f7e="http://json-schema.org/draft-04/schema#",l7e="Core schema meta-schema",d7e={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},h7e="object",p7e={id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},y7e={exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},m7e={id:u7e,$schema:f7e,description:l7e,definitions:d7e,type:h7e,properties:p7e,dependencies:y7e,default:{}},b7e="http://json-schema.org/draft-04/hyper-schema#",g7e="http://json-schema.org/draft-04/hyper-schema#",v7e="JSON Hyper-Schema",x7e=[{$ref:"http://json-schema.org/draft-04/schema#"}],w7e={additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}]},dependencies:{additionalProperties:{anyOf:[{$ref:"#"},{type:"array"}]}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}]},definitions:{additionalProperties:{$ref:"#"}},patternProperties:{additionalProperties:{$ref:"#"}},properties:{additionalProperties:{$ref:"#"}},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},links:{type:"array",items:{$ref:"#/definitions/linkDescription"}},fragmentResolution:{type:"string"},media:{type:"object",properties:{type:{description:"A media type, as described in RFC 2046",type:"string"},binaryEncoding:{description:"A content encoding scheme, as described in RFC 2045",type:"string"}}},pathStart:{description:"Instances' URIs must start with this value for this schema to apply to them",type:"string",format:"uri"}},E7e={schemaArray:{type:"array",items:{$ref:"#"}},linkDescription:{title:"Link Description Object",type:"object",required:["href","rel"],properties:{href:{description:"a URI template, as defined by RFC 6570, with the addition of the $, ( and ) characters for pre-processing",type:"string"},rel:{description:"relation to the target resource of the link",type:"string"},title:{description:"a title for the link",type:"string"},targetSchema:{description:"JSON Schema describing the link target",$ref:"#"},mediaType:{description:"media type (as defined by RFC 2046) describing the link target",type:"string"},method:{description:'method for requesting the target of the link (e.g. for HTTP this might be "GET" or "DELETE")',type:"string"},encType:{description:"The media type in which to submit data along with the request",type:"string",default:"application/json"},schema:{description:"Schema describing the data to submit along with the request",$ref:"#"}}}},A7e={$schema:b7e,id:g7e,title:v7e,allOf:x7e,properties:w7e,definitions:E7e};var _7e=LZ,p9=I5,eN=JR,S7e=YR,fp=uJ(),tN=cJ(),fJ=XR,au=Mp,M7e=m7e,P7e=A7e,Pb={asyncTimeout:2e3,forceAdditional:!1,assumeAdditional:!1,enumCaseInsensitiveComparison:!1,forceItems:!1,forceMinItems:!1,forceMaxItems:!1,forceMinLength:!1,forceMaxLength:!1,forceProperties:!1,ignoreUnresolvableReferences:!1,noExtraKeywords:!1,noTypeless:!1,noEmptyStrings:!1,noEmptyArrays:!1,strictUris:!1,strictMode:!1,reportPathAsArray:!1,breakOnFirstError:!1,pedanticCheck:!1,ignoreUnknownFormats:!1,customValidator:null};function fT(r){var e;if(typeof r=="object"){for(var t=Object.keys(r),n=t.length,i;n--;)if(i=t[n],Pb[i]===void 0)throw new Error("Unexpected option passed to constructor: "+i);for(t=Object.keys(Pb),n=t.length;n--;)i=t[n],r[i]===void 0&&(r[i]=au.clone(Pb[i]));e=r}else e=au.clone(Pb);return e.strictMode===!0&&(e.forceAdditional=!0,e.forceItems=!0,e.forceMaxLength=!0,e.forceProperties=!0,e.noExtraKeywords=!0,e.noTypeless=!0,e.noEmptyStrings=!0,e.noEmptyArrays=!0),e}function Vr(r){this.cache={},this.referenceCache=[],this.validateOptions={},this.options=fT(r);var e=fT({});this.setRemoteReference("http://json-schema.org/draft-04/schema",M7e,e),this.setRemoteReference("http://json-schema.org/draft-04/hyper-schema",P7e,e)}Vr.prototype.compileSchema=function(r){var e=new p9(this.options);return r=fp.getSchema.call(this,e,r),tN.compileSchema.call(this,e,r),this.lastReport=e,e.isValid()};Vr.prototype.validateSchema=function(r){if(Array.isArray(r)&&r.length===0)throw new Error(".validateSchema was called with an empty array");var e=new p9(this.options);r=fp.getSchema.call(this,e,r);var t=tN.compileSchema.call(this,e,r);return t&&fJ.validateSchema.call(this,e,r),this.lastReport=e,e.isValid()};Vr.prototype.validate=function(r,e,t,n){au.whatIs(t)==="function"&&(n=t,t={}),t||(t={}),this.validateOptions=t;var i=au.whatIs(e);if(i!=="string"&&i!=="object"){var s=new Error("Invalid .validate call - schema must be a string or object but "+i+" was passed!");if(n){process.nextTick(function(){n(s,!1)});return}throw s}var a=!1,o=new p9(this.options);if(o.json=r,typeof e=="string"){var c=e;if(e=fp.getSchema.call(this,o,c),!e)throw new Error("Schema with id '"+c+"' wasn't found in the validator cache!")}else e=fp.getSchema.call(this,o,e);var u=!1;a||(u=tN.compileSchema.call(this,o,e)),u||(this.lastReport=o,a=!0);var f=!1;if(a||(f=fJ.validateSchema.call(this,o,e)),f||(this.lastReport=o,a=!0),t.schemaPath&&(o.rootSchema=e,e=_7e(e,t.schemaPath),!e))throw new Error("Schema path '"+t.schemaPath+"' wasn't found in the schema!");if(a||S7e.validate.call(this,o,e,r),n){o.processAsyncTasks(this.options.asyncTimeout,n);return}else if(o.asyncTasks.length>0)throw new Error("This validation has async tasks and cannot be done in sync mode, please provide callback argument.");return this.lastReport=o,o.isValid()};Vr.prototype.getLastError=function(){if(this.lastReport.errors.length===0)return null;var r=new Error;return r.name="z-schema validation error",r.message=this.lastReport.commonErrorMessage,r.details=this.lastReport.errors,r};Vr.prototype.getLastErrors=function(){return this.lastReport&&this.lastReport.errors.length>0?this.lastReport.errors:null};Vr.prototype.getMissingReferences=function(r){r=r||this.lastReport.errors;for(var e=[],t=r.length;t--;){var n=r[t];if(n.code==="UNRESOLVABLE_REFERENCE"){var i=n.params[0];e.indexOf(i)===-1&&e.push(i)}n.inner&&(e=e.concat(this.getMissingReferences(n.inner)))}return e};Vr.prototype.getMissingRemoteReferences=function(){for(var r=this.getMissingReferences(),e=[],t=r.length;t--;){var n=fp.getRemotePath(r[t]);n&&e.indexOf(n)===-1&&e.push(n)}return e};Vr.prototype.setRemoteReference=function(r,e,t){typeof e=="string"?e=JSON.parse(e):e=au.cloneDeep(e),t&&(e.__$validationOptions=fT(t)),fp.cacheSchemaByUri.call(this,r,e)};Vr.prototype.getResolvedSchema=function(r){var e=new p9(this.options);r=fp.getSchema.call(this,e,r),r=au.cloneDeep(r);var t=[],n=function(i){var s,a=au.whatIs(i);if(!(a!=="object"&&a!=="array")&&!i.___$visited){if(i.___$visited=!0,t.push(i),i.$ref&&i.__$refResolved){var o=i.__$refResolved,c=i;delete i.$ref,delete i.__$refResolved;for(s in o)o.hasOwnProperty(s)&&(c[s]=o[s])}for(s in i)i.hasOwnProperty(s)&&(s.indexOf("__$")===0?delete i[s]:n(i[s]))}};if(n(r),t.forEach(function(i){delete i.___$visited}),this.lastReport=e,e.isValid())return r;throw this.getLastError()};Vr.prototype.setSchemaReader=function(r){return Vr.setSchemaReader(r)};Vr.prototype.getSchemaReader=function(){return Vr.schemaReader};Vr.schemaReader=void 0;Vr.setSchemaReader=function(r){Vr.schemaReader=r};Vr.registerFormat=function(r,e){eN[r]=e};Vr.unregisterFormat=function(r){delete eN[r]};Vr.getRegisteredFormats=function(){return Object.keys(eN)};Vr.getDefaultOptions=function(){return au.cloneDeep(Pb)};Vr.schemaSymbol=au.schemaSymbol;Vr.jsonSymbol=au.jsonSymbol;var T7e=Vr;const C7e=so(T7e),I7e=new C7e({});I7e.setRemoteReference("http://json-schema.org/draft-07/schema#",{type:["array","boolean","integer","number","object","string"]});var rN={exports:{}},ey=typeof Reflect=="object"?Reflect:null,eU=ey&&typeof ey.apply=="function"?ey.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},g3;ey&&typeof ey.ownKeys=="function"?g3=ey.ownKeys:Object.getOwnPropertySymbols?g3=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:g3=function(e){return Object.getOwnPropertyNames(e)};function R7e(r){console&&console.warn&&console.warn(r)}var lJ=Number.isNaN||function(e){return e!==e};function er(){er.init.call(this)}rN.exports=er;rN.exports.once=D7e;er.EventEmitter=er;er.prototype._events=void 0;er.prototype._eventsCount=0;er.prototype._maxListeners=void 0;var tU=10;function y9(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(er,"defaultMaxListeners",{enumerable:!0,get:function(){return tU},set:function(r){if(typeof r!="number"||r<0||lJ(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");tU=r}});er.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};er.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||lJ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function dJ(r){return r._maxListeners===void 0?er.defaultMaxListeners:r._maxListeners}er.prototype.getMaxListeners=function(){return dJ(this)};er.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")eU(c,this,t);else for(var u=c.length,f=bJ(c,u),n=0;n<u;++n)eU(f[n],this,t);return!0};function hJ(r,e,t,n){var i,s,a;if(y9(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),a=s[e]),a===void 0)a=s[e]=t,++r._eventsCount;else if(typeof a=="function"?a=s[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=dJ(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=r,o.type=e,o.count=a.length,R7e(o)}return r}er.prototype.addListener=function(e,t){return hJ(this,e,t,!1)};er.prototype.on=er.prototype.addListener;er.prototype.prependListener=function(e,t){return hJ(this,e,t,!0)};function N7e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pJ(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=N7e.bind(n);return i.listener=t,n.wrapFn=i,i}er.prototype.once=function(e,t){return y9(t),this.on(e,pJ(this,e,t)),this};er.prototype.prependOnceListener=function(e,t){return y9(t),this.prependListener(e,pJ(this,e,t)),this};er.prototype.removeListener=function(e,t){var n,i,s,a,o;if(y9(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():O7e(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this};er.prototype.off=er.prototype.removeListener;er.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function yJ(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?k7e(i):bJ(i,i.length)}er.prototype.listeners=function(e){return yJ(this,e,!0)};er.prototype.rawListeners=function(e){return yJ(this,e,!1)};er.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):mJ.call(r,e)};er.prototype.listenerCount=mJ;function mJ(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}er.prototype.eventNames=function(){return this._eventsCount>0?g3(this._events):[]};function bJ(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function O7e(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function k7e(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function D7e(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,s),n(a)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}gJ(r,e,s,{once:!0}),e!=="error"&&B7e(r,i,{once:!0})})}function B7e(r,e,t){typeof r.on=="function"&&gJ(r,"error",e,t)}function gJ(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var $7e=rN.exports;const eRe=so($7e);var vJ={},q5={};const K0=nj(q2e);var V5={},Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.Errors=Ft.legacyAlgoMap=Ft.legacyAttrTypes=Ft.eventNames=Ft.verificationMethodTypes=Ft.MESSAGE_PREFIX=Ft.DEFAULT_JSON_RPC=Ft.DEFAULT_REGISTRY_ADDRESS=Ft.nullAddress=Ft.identifierMatcher=void 0;Ft.strip0x=L7e;Ft.bytes32toString=U7e;Ft.stringToBytes32=F7e;Ft.interpretIdentifier=j7e;Ft.isDefined=q7e;const f2=K0;Ft.identifierMatcher=/^(.*)?(0x[0-9a-fA-F]{40}|0x[0-9a-fA-F]{66})$/;Ft.nullAddress="0x0000000000000000000000000000000000000000";Ft.DEFAULT_REGISTRY_ADDRESS="0xdca7ef03e98e0dc2b855be647c39abe984fcf21b";Ft.DEFAULT_JSON_RPC="http://127.0.0.1:8545/";Ft.MESSAGE_PREFIX="0x1900";var _l;(function(r){r.EcdsaSecp256k1VerificationKey2019="EcdsaSecp256k1VerificationKey2019",r.EcdsaSecp256k1RecoveryMethod2020="EcdsaSecp256k1RecoveryMethod2020",r.Ed25519VerificationKey2018="Ed25519VerificationKey2018",r.RSAVerificationKey2018="RSAVerificationKey2018",r.X25519KeyAgreementKey2019="X25519KeyAgreementKey2019"})(_l||(Ft.verificationMethodTypes=_l={}));var rU;(function(r){r.DIDOwnerChanged="DIDOwnerChanged",r.DIDAttributeChanged="DIDAttributeChanged",r.DIDDelegateChanged="DIDDelegateChanged"})(rU||(Ft.eventNames=rU={}));Ft.legacyAttrTypes={sigAuth:"SignatureAuthentication2018",veriKey:"VerificationKey2018",enc:"KeyAgreementKey2019"};Ft.legacyAlgoMap={Secp256k1VerificationKey2018:_l.EcdsaSecp256k1VerificationKey2019,Ed25519SignatureAuthentication2018:_l.Ed25519VerificationKey2018,Secp256k1SignatureAuthentication2018:_l.EcdsaSecp256k1VerificationKey2019,RSAVerificationKey2018:_l.RSAVerificationKey2018,Ed25519VerificationKey2018:_l.Ed25519VerificationKey2018,X25519KeyAgreementKey2019:_l.X25519KeyAgreementKey2019};function L7e(r){return r.startsWith("0x")?r.slice(2):r}function U7e(r){return(0,f2.toUtf8String)(r).replace(/\0+$/,"")}function F7e(r){const e=(0,f2.toUtf8Bytes)(r);return(0,f2.zeroPadBytes)(e.slice(0,32),32)}function j7e(r){let e=r,t;if(e.startsWith("did:ethr")){e=e.split("?")[0];const n=e.split(":");e=n[n.length-1],n.length>=4&&(t=n.splice(2,n.length-3).join(":"))}return e.length>42?{address:(0,f2.computeAddress)(e),publicKey:e,network:t}:{address:(0,f2.getAddress)(e),network:t}}var nU;(function(r){r.notFound="notFound",r.invalidDid="invalidDid",r.unknownNetwork="unknownNetwork",r.unsupportedFormat="unsupportedFormat"})(nU||(Ft.Errors=nU={}));function q7e(r){return r!==null&&typeof r<"u"}var z5={};Object.defineProperty(z5,"__esModule",{value:!0});z5.deployments=void 0;z5.deployments=[{chainId:1,registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",name:"mainnet",legacyNonce:!0},{chainId:11155111,registry:"0x03d5003bf0e79C5F5223588F347ebA39AfbC3818",name:"sepolia",legacyNonce:!1},{chainId:100,registry:"0x03d5003bf0e79C5F5223588F347ebA39AfbC3818",name:"gno",legacyNonce:!1},{chainId:17e3,registry:"0x03d5003bf0e79C5F5223588F347ebA39AfbC3818",name:"holesky",legacyNonce:!1},{chainId:246,registry:"0xE29672f34e92b56C9169f9D485fFc8b9A136BCE4",name:"ewc",description:"energy web chain",legacyNonce:!1},{chainId:73799,registry:"0xC15D5A57A8Eb0e1dCBE5D88B8f9a82017e5Cc4AF",name:"volta",description:"energy web testnet",legacyNonce:!1},{chainId:246785,registry:"0xdCa7EF03e98e0DC2B855bE647C39ABe984fcF21B",name:"artis:tau1",legacyNonce:!0},{chainId:246529,registry:"0xdCa7EF03e98e0DC2B855bE647C39ABe984fcF21B",name:"artis:sigma1",legacyNonce:!0},{chainId:137,registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",name:"polygon",legacyNonce:!0},{chainId:80001,registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",name:"polygon:test",legacyNonce:!0},{chainId:1313161554,registry:"0x63eD58B671EeD12Bc1652845ba5b2CDfBff198e0",name:"aurora",legacyNonce:!0},{chainId:59140,registry:"0x03d5003bf0e79C5F5223588F347ebA39AfbC3818",name:"linea:goerli",legacyNonce:!1}];var H5={};Object.defineProperty(H5,"__esModule",{value:!0});H5.EthereumDIDRegistry=void 0;H5.EthereumDIDRegistry={_format:"hh-sol-artifact-1",contractName:"EthereumDIDRegistry",sourceName:"contracts/EthereumDIDRegistry.sol",abi:[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"identity",type:"address"},{indexed:!1,internalType:"bytes32",name:"name",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"value",type:"bytes"},{indexed:!1,internalType:"uint256",name:"validTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"previousChange",type:"uint256"}],name:"DIDAttributeChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"identity",type:"address"},{indexed:!1,internalType:"bytes32",name:"delegateType",type:"bytes32"},{indexed:!1,internalType:"address",name:"delegate",type:"address"},{indexed:!1,internalType:"uint256",name:"validTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"previousChange",type:"uint256"}],name:"DIDDelegateChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"identity",type:"address"},{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"previousChange",type:"uint256"}],name:"DIDOwnerChanged",type:"event"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"addDelegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"addDelegateSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"address",name:"newOwner",type:"address"}],name:"changeOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"address",name:"newOwner",type:"address"}],name:"changeOwnerSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"changed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"address",name:"",type:"address"}],name:"delegates",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"}],name:"identityOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"owners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"}],name:"revokeAttribute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"}],name:"revokeAttributeSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"}],name:"revokeDelegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"}],name:"revokeDelegateSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"setAttribute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"setAttributeSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"}],name:"validDelegate",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],bytecode:"0x608060405234801561001057600080fd5b506113c8806100206000396000f3fe608060405234801561001057600080fd5b50600436106100ff5760003560e01c806380b29f7c11610097578063a7068d6611610066578063a7068d66146102b5578063e476af5c146102c8578063f00d4b5d146102db578063f96d0f9f146102ee57600080fd5b806380b29f7c146102695780638733d4e81461027c578063930726841461028f5780639c2c1b2b146102a257600080fd5b8063240cf1fa116100d3578063240cf1fa146101b1578063622b2a3c146101c457806370ae92d2146102365780637ad4b0a41461025657600080fd5b8062c023da14610104578063022914a7146101195780630d44625b1461015f578063123b5e981461019e575b600080fd5b610117610112366004610ea7565b61030e565b005b610142610127366004610dd2565b6000602081905290815260409020546001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61019061016d366004610e27565b600160209081526000938452604080852082529284528284209052825290205481565b604051908152602001610156565b6101176101ac3660046110f7565b61031f565b6101176101bf366004610f5d565b6103ab565b6102266101d2366004610e27565b6001600160a01b039283166000908152600160209081526040808320815180840196909652815180870384018152958201825285519583019590952083529381528382209290941681529252902054421090565b6040519015158152602001610156565b610190610244366004610dd2565b60036020526000908152604090205481565b610117610264366004610efe565b61048d565b610117610277366004610e27565b6104a0565b61014261028a366004610dd2565b6104ac565b61011761029d366004610fb4565b6104dc565b6101176102b0366004611013565b6105c7565b6101176102c3366004610e63565b6106b5565b6101176102d636600461107d565b6106c2565b6101176102e9366004610df4565b610741565b6101906102fc366004610dd2565b60026020526000908152604090205481565b61031a83338484610750565b505050565b6000601960f81b81306003826103348d6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548b88888860405160200161037098979695949392919061123e565b6040516020818303038152906040528051906020012090506103a1886103998a8a8a8a87610824565b868686610923565b5050505050505050565b6000601960f81b81306003826103c08b6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528a831b851660568501527f6368616e67654f776e6572000000000000000000000000000000000000000000606a8501529186901b90931660758301528051606981840301815260899092019052805191012090506104858661047f8188888887610824565b84610a07565b505050505050565b61049a8433858585610923565b50505050565b61031a83338484610b03565b6001600160a01b0380821660009081526020819052604081205490911680156104d55792915050565b5090919050565b6000601960f81b81306003826104f18c6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528b831b851660568501527f7265766f6b6544656c6567617465000000000000000000000000000000000000606a850152607884018890529186901b90931660988301528051608c81840301815260ac9092019052805191012090506105be876105b78189898987610824565b8585610b03565b50505050505050565b6000601960f81b81306003826105dc8d6104ac565b6001600160a01b0316815260208082019290925260409081016000205490516001600160f81b031995861692810192909252929093166021840152606090811b6bffffffffffffffffffffffff19908116602285015260368401929092528a811b821660568401527f61646444656c6567617465000000000000000000000000000000000000000000606a8401526075830187905285901b16609582015260a9810183905260c9016040516020818303038152906040528051906020012090506103a1886106ad8a8a8a8a87610824565b868686610bfd565b61049a8433858585610bfd565b6000601960f81b81306003826106d78c6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548a878760405160200161071197969594939291906111a8565b6040516020818303038152906040528051906020012090506105be8761073a8989898987610824565b8585610750565b61074c823383610a07565b5050565b838361075b826104ac565b6001600160a01b0316816001600160a01b0316146107ac5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064015b60405180910390fd5b6001600160a01b0386166000818152600260205260408082205490517f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e4926107f9928992899291906112db565b60405180910390a25050506001600160a01b0390921660009081526002602052604090204390555050565b6040805160008082526020820180845284905260ff8716928201929092526060810185905260808101849052819060019060a0016020604051602081039080840390855afa15801561087a573d6000803e3d6000fd5b50505060206040510351905061088f876104ac565b6001600160a01b0316816001600160a01b0316146108ef5760405162461bcd60e51b815260206004820152600d60248201527f6261645f7369676e61747572650000000000000000000000000000000000000060448201526064016107a3565b6001600160a01b03811660009081526003602052604081208054916109138361134b565b9091555090979650505050505050565b848461092e826104ac565b6001600160a01b0316816001600160a01b03161461097a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0387167f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e486866109b18742611307565b6001600160a01b038c16600090815260026020526040908190205490516109db94939291906112db565b60405180910390a25050506001600160a01b039093166000908152600260205260409020439055505050565b8282610a12826104ac565b6001600160a01b0316816001600160a01b031614610a5e5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0385811660008181526020818152604080832080547fffffffffffffffffffffffff000000000000000000000000000000000000000016958916958617905560028252918290205482519485529084015290917f38a5a6e68f30ed1ab45860a4afb34bcb2fc00f22ca462d249b8a8d40cda6f7a3910160405180910390a2505050506001600160a01b03166000908152600260205260409020439055565b8383610b0e826104ac565b6001600160a01b0316816001600160a01b031614610b5a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b03868116600081815260016020908152604080832081518084018b90528251808203850181528184018085528151918601919091208652918452828520968a16808652968452828520429081905586865260029094529190932054928990526060810194909452608084015260a0830152907f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f79060c0016107f9565b8484610c08826104ac565b6001600160a01b0316816001600160a01b031614610c545760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b610c5e8342611307565b6001600160a01b03888116600081815260016020908152604080832081518084018d9052825180820385018152908301835280519084012084528252808320948a16835293905291909120919091557f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f78686610cda8742611307565b6001600160a01b038c8116600090815260026020908152604091829020548251968752949092169185019190915283015260608201526080016109db565b80356001600160a01b0381168114610d2f57600080fd5b919050565b600082601f830112610d4557600080fd5b813567ffffffffffffffff80821115610d6057610d6061137c565b604051601f8301601f19908116603f01168101908282118183101715610d8857610d8861137c565b81604052838152866020858801011115610da157600080fd5b836020870160208301376000602085830101528094505050505092915050565b803560ff81168114610d2f57600080fd5b600060208284031215610de457600080fd5b610ded82610d18565b9392505050565b60008060408385031215610e0757600080fd5b610e1083610d18565b9150610e1e60208401610d18565b90509250929050565b600080600060608486031215610e3c57600080fd5b610e4584610d18565b925060208401359150610e5a60408501610d18565b90509250925092565b60008060008060808587031215610e7957600080fd5b610e8285610d18565b935060208501359250610e9760408601610d18565b9396929550929360600135925050565b600080600060608486031215610ebc57600080fd5b610ec584610d18565b925060208401359150604084013567ffffffffffffffff811115610ee857600080fd5b610ef486828701610d34565b9150509250925092565b60008060008060808587031215610f1457600080fd5b610f1d85610d18565b935060208501359250604085013567ffffffffffffffff811115610f4057600080fd5b610f4c87828801610d34565b949793965093946060013593505050565b600080600080600060a08688031215610f7557600080fd5b610f7e86610d18565b9450610f8c60208701610dc1565b93506040860135925060608601359150610fa860808701610d18565b90509295509295909350565b60008060008060008060c08789031215610fcd57600080fd5b610fd687610d18565b9550610fe460208801610dc1565b945060408701359350606087013592506080870135915061100760a08801610d18565b90509295509295509295565b600080600080600080600060e0888a03121561102e57600080fd5b61103788610d18565b965061104560208901610dc1565b955060408801359450606088013593506080880135925061106860a08901610d18565b915060c0880135905092959891949750929550565b60008060008060008060c0878903121561109657600080fd5b61109f87610d18565b95506110ad60208801610dc1565b945060408701359350606087013592506080870135915060a087013567ffffffffffffffff8111156110de57600080fd5b6110ea89828a01610d34565b9150509295509295509295565b600080600080600080600060e0888a03121561111257600080fd5b61111b88610d18565b965061112960208901610dc1565b955060408801359450606088013593506080880135925060a088013567ffffffffffffffff81111561115a57600080fd5b6111668a828b01610d34565b92505060c0880135905092959891949750929550565b6000815180845261119481602086016020860161131f565b601f01601f19169290920160200192915050565b60006001600160f81b0319808a1683528089166001840152506bffffffffffffffffffffffff19808860601b166002840152866016840152808660601b166036840152507f7265766f6b654174747269627574650000000000000000000000000000000000604a830152836059830152825161122b81607985016020870161131f565b9190910160790198975050505050505050565b60006001600160f81b0319808b168352808a166001840152506bffffffffffffffffffffffff19808960601b166002840152876016840152808760601b166036840152507f7365744174747269627574650000000000000000000000000000000000000000604a83015284605683015283516112c181607685016020880161131f565b607692019182019290925260960198975050505050505050565b8481526080602082015260006112f4608083018661117c565b6040830194909452506060015292915050565b6000821982111561131a5761131a611366565b500190565b60005b8381101561133a578181015183820152602001611322565b8381111561049a5750506000910152565b600060001982141561135f5761135f611366565b5060010190565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fdfea2646970667358221220216ddc889c83668a16b40556d3dc23f6e1a9fa3333587b228a11c3a0d1fad80b64736f6c63430008060033",deployedBytecode:"0x608060405234801561001057600080fd5b50600436106100ff5760003560e01c806380b29f7c11610097578063a7068d6611610066578063a7068d66146102b5578063e476af5c146102c8578063f00d4b5d146102db578063f96d0f9f146102ee57600080fd5b806380b29f7c146102695780638733d4e81461027c578063930726841461028f5780639c2c1b2b146102a257600080fd5b8063240cf1fa116100d3578063240cf1fa146101b1578063622b2a3c146101c457806370ae92d2146102365780637ad4b0a41461025657600080fd5b8062c023da14610104578063022914a7146101195780630d44625b1461015f578063123b5e981461019e575b600080fd5b610117610112366004610ea7565b61030e565b005b610142610127366004610dd2565b6000602081905290815260409020546001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61019061016d366004610e27565b600160209081526000938452604080852082529284528284209052825290205481565b604051908152602001610156565b6101176101ac3660046110f7565b61031f565b6101176101bf366004610f5d565b6103ab565b6102266101d2366004610e27565b6001600160a01b039283166000908152600160209081526040808320815180840196909652815180870384018152958201825285519583019590952083529381528382209290941681529252902054421090565b6040519015158152602001610156565b610190610244366004610dd2565b60036020526000908152604090205481565b610117610264366004610efe565b61048d565b610117610277366004610e27565b6104a0565b61014261028a366004610dd2565b6104ac565b61011761029d366004610fb4565b6104dc565b6101176102b0366004611013565b6105c7565b6101176102c3366004610e63565b6106b5565b6101176102d636600461107d565b6106c2565b6101176102e9366004610df4565b610741565b6101906102fc366004610dd2565b60026020526000908152604090205481565b61031a83338484610750565b505050565b6000601960f81b81306003826103348d6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548b88888860405160200161037098979695949392919061123e565b6040516020818303038152906040528051906020012090506103a1886103998a8a8a8a87610824565b868686610923565b5050505050505050565b6000601960f81b81306003826103c08b6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528a831b851660568501527f6368616e67654f776e6572000000000000000000000000000000000000000000606a8501529186901b90931660758301528051606981840301815260899092019052805191012090506104858661047f8188888887610824565b84610a07565b505050505050565b61049a8433858585610923565b50505050565b61031a83338484610b03565b6001600160a01b0380821660009081526020819052604081205490911680156104d55792915050565b5090919050565b6000601960f81b81306003826104f18c6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528b831b851660568501527f7265766f6b6544656c6567617465000000000000000000000000000000000000606a850152607884018890529186901b90931660988301528051608c81840301815260ac9092019052805191012090506105be876105b78189898987610824565b8585610b03565b50505050505050565b6000601960f81b81306003826105dc8d6104ac565b6001600160a01b0316815260208082019290925260409081016000205490516001600160f81b031995861692810192909252929093166021840152606090811b6bffffffffffffffffffffffff19908116602285015260368401929092528a811b821660568401527f61646444656c6567617465000000000000000000000000000000000000000000606a8401526075830187905285901b16609582015260a9810183905260c9016040516020818303038152906040528051906020012090506103a1886106ad8a8a8a8a87610824565b868686610bfd565b61049a8433858585610bfd565b6000601960f81b81306003826106d78c6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548a878760405160200161071197969594939291906111a8565b6040516020818303038152906040528051906020012090506105be8761073a8989898987610824565b8585610750565b61074c823383610a07565b5050565b838361075b826104ac565b6001600160a01b0316816001600160a01b0316146107ac5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064015b60405180910390fd5b6001600160a01b0386166000818152600260205260408082205490517f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e4926107f9928992899291906112db565b60405180910390a25050506001600160a01b0390921660009081526002602052604090204390555050565b6040805160008082526020820180845284905260ff8716928201929092526060810185905260808101849052819060019060a0016020604051602081039080840390855afa15801561087a573d6000803e3d6000fd5b50505060206040510351905061088f876104ac565b6001600160a01b0316816001600160a01b0316146108ef5760405162461bcd60e51b815260206004820152600d60248201527f6261645f7369676e61747572650000000000000000000000000000000000000060448201526064016107a3565b6001600160a01b03811660009081526003602052604081208054916109138361134b565b9091555090979650505050505050565b848461092e826104ac565b6001600160a01b0316816001600160a01b03161461097a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0387167f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e486866109b18742611307565b6001600160a01b038c16600090815260026020526040908190205490516109db94939291906112db565b60405180910390a25050506001600160a01b039093166000908152600260205260409020439055505050565b8282610a12826104ac565b6001600160a01b0316816001600160a01b031614610a5e5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0385811660008181526020818152604080832080547fffffffffffffffffffffffff000000000000000000000000000000000000000016958916958617905560028252918290205482519485529084015290917f38a5a6e68f30ed1ab45860a4afb34bcb2fc00f22ca462d249b8a8d40cda6f7a3910160405180910390a2505050506001600160a01b03166000908152600260205260409020439055565b8383610b0e826104ac565b6001600160a01b0316816001600160a01b031614610b5a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b03868116600081815260016020908152604080832081518084018b90528251808203850181528184018085528151918601919091208652918452828520968a16808652968452828520429081905586865260029094529190932054928990526060810194909452608084015260a0830152907f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f79060c0016107f9565b8484610c08826104ac565b6001600160a01b0316816001600160a01b031614610c545760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b610c5e8342611307565b6001600160a01b03888116600081815260016020908152604080832081518084018d9052825180820385018152908301835280519084012084528252808320948a16835293905291909120919091557f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f78686610cda8742611307565b6001600160a01b038c8116600090815260026020908152604091829020548251968752949092169185019190915283015260608201526080016109db565b80356001600160a01b0381168114610d2f57600080fd5b919050565b600082601f830112610d4557600080fd5b813567ffffffffffffffff80821115610d6057610d6061137c565b604051601f8301601f19908116603f01168101908282118183101715610d8857610d8861137c565b81604052838152866020858801011115610da157600080fd5b836020870160208301376000602085830101528094505050505092915050565b803560ff81168114610d2f57600080fd5b600060208284031215610de457600080fd5b610ded82610d18565b9392505050565b60008060408385031215610e0757600080fd5b610e1083610d18565b9150610e1e60208401610d18565b90509250929050565b600080600060608486031215610e3c57600080fd5b610e4584610d18565b925060208401359150610e5a60408501610d18565b90509250925092565b60008060008060808587031215610e7957600080fd5b610e8285610d18565b935060208501359250610e9760408601610d18565b9396929550929360600135925050565b600080600060608486031215610ebc57600080fd5b610ec584610d18565b925060208401359150604084013567ffffffffffffffff811115610ee857600080fd5b610ef486828701610d34565b9150509250925092565b60008060008060808587031215610f1457600080fd5b610f1d85610d18565b935060208501359250604085013567ffffffffffffffff811115610f4057600080fd5b610f4c87828801610d34565b949793965093946060013593505050565b600080600080600060a08688031215610f7557600080fd5b610f7e86610d18565b9450610f8c60208701610dc1565b93506040860135925060608601359150610fa860808701610d18565b90509295509295909350565b60008060008060008060c08789031215610fcd57600080fd5b610fd687610d18565b9550610fe460208801610dc1565b945060408701359350606087013592506080870135915061100760a08801610d18565b90509295509295509295565b600080600080600080600060e0888a03121561102e57600080fd5b61103788610d18565b965061104560208901610dc1565b955060408801359450606088013593506080880135925061106860a08901610d18565b915060c0880135905092959891949750929550565b60008060008060008060c0878903121561109657600080fd5b61109f87610d18565b95506110ad60208801610dc1565b945060408701359350606087013592506080870135915060a087013567ffffffffffffffff8111156110de57600080fd5b6110ea89828a01610d34565b9150509295509295509295565b600080600080600080600060e0888a03121561111257600080fd5b61111b88610d18565b965061112960208901610dc1565b955060408801359450606088013593506080880135925060a088013567ffffffffffffffff81111561115a57600080fd5b6111668a828b01610d34565b92505060c0880135905092959891949750929550565b6000815180845261119481602086016020860161131f565b601f01601f19169290920160200192915050565b60006001600160f81b0319808a1683528089166001840152506bffffffffffffffffffffffff19808860601b166002840152866016840152808660601b166036840152507f7265766f6b654174747269627574650000000000000000000000000000000000604a830152836059830152825161122b81607985016020870161131f565b9190910160790198975050505050505050565b60006001600160f81b0319808b168352808a166001840152506bffffffffffffffffffffffff19808960601b166002840152876016840152808760601b166036840152507f7365744174747269627574650000000000000000000000000000000000000000604a83015284605683015283516112c181607685016020880161131f565b607692019182019290925260960198975050505050505050565b8481526080602082015260006112f4608083018661117c565b6040830194909452506060015292915050565b6000821982111561131a5761131a611366565b500190565b60005b8381101561133a578181015183820152602001611322565b8381111561049a5750506000910152565b600060001982141561135f5761135f611366565b5060010190565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fdfea2646970667358221220216ddc889c83668a16b40556d3dc23f6e1a9fa3333587b228a11c3a0d1fad80b64736f6c63430008060033",linkReferences:{},deployedLinkReferences:{}};Object.defineProperty(V5,"__esModule",{value:!0});V5.getContractForNetwork=v3;V5.configureResolverWithNetworks=G7e;const iU=K0,V7e=Ft,nN=z5,z7e=H5,H7e={polygon:"matic","polygon:test":"maticmum",aurora:"aurora-mainnet"},W7e=["mainnet","aurora","linea:goerli","sepolia"];function K7e(r){if(!r)return{};const e=W7e.map(t=>{const n=nN.deployments.find(i=>i.name===t);if(n&&n.name){const s=`https://${H7e[n.name]||n.name}.infura.io/v3/${r}`;return{...n,rpcUrl:s}}}).filter(t=>!!t);return xJ({networks:e})}function v3(r){var n,i;let e=r.provider||((n=r.web3)==null?void 0:n.currentProvider);if(!e)if(r.rpcUrl){const s=r.chainId?r.chainId:(i=nN.deployments.find(o=>o.name===r.name))==null?void 0:i.chainId,a=s&&BigInt(s);e=new iU.JsonRpcProvider(r.rpcUrl,a||"any")}else throw new Error(`invalid_config: No web3 provider could be determined for network ${r.name||r.chainId}`);return iU.ContractFactory.fromSolidity(z7e.EthereumDIDRegistry).attach(r.registry||V7e.DEFAULT_REGISTRY_ADDRESS).connect(e)}function sU(r){var n;const e={},t=r.chainId||((n=nN.deployments.find(i=>r.name&&(i.name===r.name||i.description===r.name)))==null?void 0:n.chainId);if(t){r.name&&(e[r.name]=v3(r));const i=typeof t=="bigint"||typeof t=="number"?`0x${t.toString(16)}`:t;e[i]=v3(r)}else(r.provider||r.web3||r.rpcUrl)&&(e[r.name||""]=v3(r));return e}function xJ(r){var e;return{...sU(r),...(e=r.networks)==null?void 0:e.reduce((t,n)=>({...t,...sU(n)}),{})}}function G7e(r={}){const e={...K7e(r.infuraProjectId),...xJ(r)};if(Object.keys(e).length===0)throw new Error("invalid_config: Please make sure to have at least one network");return e}var iN={};Object.defineProperty(iN,"__esModule",{value:!0});iN.logDecoder=Z7e;const wJ=Ft;function Q7e(r,e){const t={};if(r.fragment.inputs.length!==r.args.length)throw new TypeError("malformed event input. wrong number of arguments");return r.fragment.inputs.forEach((n,i)=>{let s=r.args[i];typeof s=="object"&&(s=BigInt(s)),n.type==="bytes32"&&(s=(0,wJ.bytes32toString)(s)),t[n.name]=s}),t._eventName=r.name,t.blockNumber=e,t}function Z7e(r,e){return e.map(t=>{const n=r.interface.parseLog({topics:[...t.topics],data:t.data});return n?Q7e(n,t.blockNumber):null}).filter(wJ.isDefined)}Object.defineProperty(q5,"__esModule",{value:!0});q5.EthrDidResolver=void 0;q5.getResolver=X7e;const fv=K0,J7e=V5,Xr=Ft,Y7e=iN;function X7e(r){return new EJ(r).build()}let EJ=class{constructor(e){this.contracts=(0,J7e.configureResolverWithNetworks)(e)}async previousChange(e,t,n){return await this.contracts[t].changed(e,{blockTag:n})}async getBlockMetadata(e,t){const n=this.contracts[t];if(!n)throw new Error(`No contract configured for network ${t}`);if(!n.runner)throw new Error(`No runner configured for contract with network ${t}`);if(!n.runner.provider)throw new Error(`No provider configured for runner in contract with network ${t}`);const i=await n.runner.provider.getBlock(e);if(!i)throw new Error(`Block at height ${e} not found`);return{height:i.number.toString(),isoDate:new Date(i.timestamp*1e3).toISOString().replace(".000","")}}async changeLog(e,t,n="latest"){const i=this.contracts[t];if(!i)throw new Error(`No contract configured for network ${t}`);if(!i.runner)throw new Error(`No runner configured for contract with network ${t}`);if(!i.runner.provider)throw new Error(`No provider configured for runner in contract with network ${t}`);const s=i.runner.provider,a=t.startsWith("0x")?t:void 0,o=a?BigInt(a):(await s.getNetwork()).chainId,c=[],{address:u,publicKey:f}=(0,Xr.interpretIdentifier)(e),l=f;let d=await this.previousChange(u,t,n);for(;d;){const h=d,y=await s.getLogs({address:await i.getAddress(),topics:[null,`0x000000000000000000000000${u.slice(2)}`],fromBlock:d,toBlock:d}),p=(0,Y7e.logDecoder)(i,y);p.reverse(),d=null;for(const g of p)c.unshift(g),g.previousChange<h&&(d=g.previousChange)}return{address:u,history:c,controllerKey:l,chainId:o}}wrapDidDocument(e,t,n,i,s,a,o){const c={id:e,verificationMethod:[],authentication:[],assertionMethod:[]};let u=t;const f=[`${e}#controller`],l=[`${e}#controller`];let d=0,h=Number.POSITIVE_INFINITY,y=!1,p=0,g=0,m="";const v={},b={},_={},C={},N={};typeof a=="string"&&(a=-1);for(const $ of i){if(a!==-1&&$.blockNumber>a){h>$.blockNumber&&(h=$.blockNumber);continue}else d<$.blockNumber&&(d=$.blockNumber);const j=$.validTo||BigInt(0),O=`${$._eventName}-${$.delegateType||$.name}-${$.delegate||$.value}`;if(j&&j>=o){if($._eventName===Xr.eventNames.DIDDelegateChanged){const E=$;switch(p++,E.delegateType){case"sigAuth":v[O]=`${e}#delegate-${p}`,_[O]=`${e}#delegate-${p}`;case"veriKey":C[O]={id:`${e}#delegate-${p}`,type:Xr.verificationMethodTypes.EcdsaSecp256k1RecoveryMethod2020,controller:e,blockchainAccountId:`eip155:${s}:${E.delegate}`},_[O]=`${e}#delegate-${p}`;break}}else if($._eventName===Xr.eventNames.DIDAttributeChanged){const E=$,A=E.name.match(/^did\/(pub|svc)\/(\w+)(\/(\w+))?(\/(\w+))?$/);if(A){const w=A[1],P=A[2],k=Xr.legacyAttrTypes[A[4]]||A[4],D=A[6];switch(w){case"pub":{p++;const T={id:`${e}#delegate-${p}`,type:`${P}${k}`,controller:e};switch(T.type=Xr.legacyAlgoMap[T.type]||P,D){case null:case void 0:case"hex":T.publicKeyHex=(0,Xr.strip0x)(E.value);break;case"base64":T.publicKeyBase64=(0,fv.encodeBase64)(E.value);break;case"base58":T.publicKeyBase58=(0,fv.encodeBase58)(E.value);break;case"pem":T.publicKeyPem=(0,fv.toUtf8String)(E.value);break;default:T.value=(0,Xr.strip0x)(E.value)}C[O]=T,A[4]==="sigAuth"?(v[O]=T.id,_[O]=T.id):A[4]==="enc"?b[O]=T.id:_[O]=T.id;break}case"svc":{g++;const T=(0,fv.toUtf8String)(E.value);try{m=JSON.parse(T)}catch{m=T}N[O]={id:`${e}#service-${g}`,type:P,serviceEndpoint:m};break}}}}}else if($._eventName===Xr.eventNames.DIDOwnerChanged){const E=$;if(u=E.owner,E.owner===Xr.nullAddress){y=!0;break}}else $._eventName===Xr.eventNames.DIDDelegateChanged||$._eventName===Xr.eventNames.DIDAttributeChanged&&$.name.match(/^did\/pub\//)?p++:$._eventName===Xr.eventNames.DIDAttributeChanged&&$.name.match(/^did\/svc\//)&&g++,delete v[O],delete _[O],delete C[O],delete N[O]}const x=[{id:`${e}#controller`,type:Xr.verificationMethodTypes.EcdsaSecp256k1RecoveryMethod2020,controller:e,blockchainAccountId:`eip155:${s}:${u}`}];n&&u==t&&(x.push({id:`${e}#controllerKey`,type:Xr.verificationMethodTypes.EcdsaSecp256k1VerificationKey2019,controller:e,publicKeyHex:(0,Xr.strip0x)(n)}),f.push(`${e}#controllerKey`),l.push(`${e}#controllerKey`));const I={...c,verificationMethod:x.concat(Object.values(C)),authentication:f.concat(Object.values(v)),assertionMethod:l.concat(Object.values(_))};return Object.values(N).length>0&&(I.service=Object.values(N)),Object.values(b).length>0&&(I.keyAgreement=Object.values(b)),y?{didDocument:c,deactivated:y,versionId:d,nextVersionId:h}:{didDocument:I,deactivated:y,versionId:d,nextVersionId:h}}async resolve(e,t,n,i){let s={};if(i.accept==="application/did+json")s={};else if(i.accept==="application/did+ld+json"||typeof i.accept!="string")s={"@context":["https://www.w3.org/ns/did/v1","https://w3id.org/security/suites/secp256k1recovery-2020/v2","https://w3id.org/security/v3-unstable"]};else return{didResolutionMetadata:{error:Xr.Errors.unsupportedFormat,message:`The DID resolver does not support the requested 'accept' format: ${i.accept}`},didDocumentMetadata:{},didDocument:null};const a=t.id.match(Xr.identifierMatcher);if(!a)return{didResolutionMetadata:{error:Xr.Errors.invalidDid,message:`Not a valid did:ethr: ${t.id}`},didDocumentMetadata:{},didDocument:null};const o=a[2],c=a[1]?a[1].slice(0,-1):"mainnet";let u=i.blockTag||"latest";if(typeof t.query=="string"){u=new URLSearchParams(t.query).get("versionId")??u;const g=Number.parseInt(u);Number.isNaN(g)?u="latest":u=g}if(!this.contracts[c])return{didResolutionMetadata:{error:Xr.Errors.unknownNetwork,message:`The DID resolver does not have a configuration for network: ${c}`},didDocumentMetadata:{},didDocument:null};let f=BigInt(Math.floor(new Date().getTime()/1e3));if(typeof u=="number"){const p=await this.getBlockMetadata(u,c);f=BigInt(Date.parse(p.isoDate)/1e3)}const{address:l,history:d,controllerKey:h,chainId:y}=await this.changeLog(o,c,"latest");try{const{didDocument:p,deactivated:g,versionId:m,nextVersionId:v}=this.wrapDidDocument(e,l,h,d,y,u,f),b=g?{deactivated:!0}:{};let _={},C={};if(m!==0){const N=await this.getBlockMetadata(m,c);_={versionId:N.height,updated:N.isoDate}}if(v!==Number.POSITIVE_INFINITY){const N=await this.getBlockMetadata(v,c);C={nextVersionId:N.height,nextUpdate:N.isoDate}}return{didDocumentMetadata:{...b,..._,...C},didResolutionMetadata:{contentType:i.accept??"application/did+ld+json"},didDocument:{...p,...s}}}catch(p){return{didResolutionMetadata:{error:Xr.Errors.notFound,message:p.toString()},didDocumentMetadata:{},didDocument:null}}}build(){return{ethr:this.resolve.bind(this)}}};q5.EthrDidResolver=EJ;var m9={};Object.defineProperty(m9,"__esModule",{value:!0});m9.EthrDidController=void 0;const lt=K0,eEe=V5,Vi=Ft;let tEe=class{constructor(e,t,n,i="mainnet",s,a,o=Vi.DEFAULT_REGISTRY_ADDRESS,c=!0){this.legacyNonce=c;const{address:u,publicKey:f,network:l}=(0,Vi.interpretIdentifier)(e),d=l||i;if(t)this.contract=t;else if(s||n!=null&&n.provider||a){const y=s||(n==null?void 0:n.provider);this.contract=(0,eEe.getContractForNetwork)({name:d,provider:y,registry:o,rpcUrl:a})}else throw new Error(" either a contract instance or a provider or rpcUrl is required to initialize");this.signer=n,this.address=u;let h=d?`${d}:`:"";h in["mainnet:","0x1:"]&&(h=""),this.did=f?`did:ethr:${h}${f}`:`did:ethr:${h}${u}`}encodeAttributeValue(e){return(0,lt.isHexString)(e)?e:(0,lt.toUtf8Bytes)(e)}async getOwner(e,t){return this.contract.identityOwner(e,{blockTag:t})}async attachContract(e){let t=e?await e:await this.getOwner(this.address,"latest");typeof t!="string"&&(t=await e.getAddress());let n;if(this.signer)n=this.signer;else{if(!this.contract)throw new Error("No contract configured");if(!this.contract.runner)throw new Error("No runner configured for contract");if(!this.contract.runner.provider)throw new Error("No provider configured for runner in contract");n=await this.contract.runner.provider.getSigner(t)||this.contract.signer}return this.contract.connect(n)}async changeOwner(e,t={}){const n={gasLimit:123456,...t},i=await this.attachContract(n.from??void 0);return delete n.from,await(await i.changeOwner(this.address,e,n)).wait()}async createChangeOwnerHash(e){const t=await this.getPaddedNonceCompatibility(),n=(0,lt.concat)([Vi.MESSAGE_PREFIX,await this.contract.getAddress(),t,this.address,(0,lt.getBytes)((0,lt.concat)([(0,lt.toUtf8Bytes)("changeOwner"),e]))]);return(0,lt.keccak256)(n)}async changeOwnerSigned(e,t,n={}){const i={gasLimit:123456,...n},s=await this.attachContract(i.from??void 0);return delete i.from,await(await s.changeOwnerSigned(this.address,t.sigV,t.sigR,t.sigS,e,i)).wait()}async addDelegate(e,t,n,i={}){const s={gasLimit:123456,...i},a=await this.attachContract(s.from??void 0);delete s.from;const o=(0,Vi.stringToBytes32)(e);return await(await a.addDelegate(this.address,o,t,n,s)).wait()}async createAddDelegateHash(e,t,n){const i=await this.getPaddedNonceCompatibility(),s=(0,lt.concat)([Vi.MESSAGE_PREFIX,await this.contract.getAddress(),i,this.address,(0,lt.concat)([(0,lt.toUtf8Bytes)("addDelegate"),(0,lt.encodeBytes32String)(e),t,(0,lt.zeroPadValue)((0,lt.toBeHex)(n),32)])]);return(0,lt.keccak256)(s)}async addDelegateSigned(e,t,n,i,s={}){const a={gasLimit:123456,...s},o=await this.attachContract(a.from??void 0);delete a.from;const c=(0,Vi.stringToBytes32)(e);return await(await o.addDelegateSigned(this.address,i.sigV,i.sigR,i.sigS,c,t,n,a)).wait()}async revokeDelegate(e,t,n={}){const i={gasLimit:123456,...n};e=e.startsWith("0x")?e:(0,Vi.stringToBytes32)(e);const s=await this.attachContract(i.from??void 0);return delete i.from,await(await s.revokeDelegate(this.address,e,t,i)).wait()}async createRevokeDelegateHash(e,t){const n=await this.getPaddedNonceCompatibility(),i=(0,lt.concat)([Vi.MESSAGE_PREFIX,await this.contract.getAddress(),n,this.address,(0,lt.getBytes)((0,lt.concat)([(0,lt.toUtf8Bytes)("revokeDelegate"),(0,lt.encodeBytes32String)(e),t]))]);return(0,lt.keccak256)(i)}async revokeDelegateSigned(e,t,n,i={}){const s={gasLimit:123456,...i};e=e.startsWith("0x")?e:(0,Vi.stringToBytes32)(e);const a=await this.attachContract(s.from??void 0);return delete s.from,await(await a.revokeDelegateSigned(this.address,n.sigV,n.sigR,n.sigS,e,t,s)).wait()}async setAttribute(e,t,n,i={}){const s={gasLimit:123456,controller:void 0,...i};e=e.startsWith("0x")?e:(0,Vi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,lt.hexlify)((0,lt.toUtf8Bytes)(t));const a=await this.attachContract(s.from??void 0);return delete s.from,await(await a.setAttribute(this.address,e,t,n,s)).wait()}async createSetAttributeHash(e,t,n){const i=await this.getPaddedNonceCompatibility(!0),s=this.encodeAttributeValue(t),a=(0,lt.concat)([Vi.MESSAGE_PREFIX,await this.contract.getAddress(),i,this.address,(0,lt.concat)([(0,lt.toUtf8Bytes)("setAttribute"),(0,lt.encodeBytes32String)(e),s,(0,lt.zeroPadValue)((0,lt.toBeHex)(n),32)])]);return(0,lt.keccak256)(a)}async setAttributeSigned(e,t,n,i,s={}){const a={gasLimit:123456,controller:void 0,...s};e=e.startsWith("0x")?e:(0,Vi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,lt.hexlify)((0,lt.toUtf8Bytes)(t));const o=await this.attachContract(a.from??void 0);return delete a.from,await(await o.setAttributeSigned(this.address,i.sigV,i.sigR,i.sigS,e,t,n,a)).wait()}async revokeAttribute(e,t,n={}){const i={gasLimit:123456,...n};e=e.startsWith("0x")?e:(0,Vi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,lt.hexlify)((0,lt.toUtf8Bytes)(t));const s=await this.attachContract(i.from??void 0);return delete i.from,await(await s.revokeAttribute(this.address,e,t,i)).wait()}async createRevokeAttributeHash(e,t){const n=await this.getPaddedNonceCompatibility(!0),i=this.encodeAttributeValue(t),s=(0,lt.concat)([Vi.MESSAGE_PREFIX,await this.contract.getAddress(),n,this.address,(0,lt.getBytes)((0,lt.concat)([(0,lt.toUtf8Bytes)("revokeAttribute"),(0,lt.encodeBytes32String)(e),i]))]);return(0,lt.keccak256)(s)}async getPaddedNonceCompatibility(e=!1){let t;return this.legacyNonce&&e?t=this.address:t=await this.getOwner(this.address),(0,lt.zeroPadValue)((0,lt.toBeHex)(await this.contract.nonce(t)),32)}async revokeAttributeSigned(e,t,n,i={}){const s={gasLimit:123456,...i};e=e.startsWith("0x")?e:(0,Vi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,lt.hexlify)((0,lt.toUtf8Bytes)(t));const a=await this.attachContract(s.from??void 0);return delete s.from,await(await a.revokeAttributeSigned(this.address,n.sigV,n.sigR,n.sigS,e,t,s)).wait()}};m9.EthrDidController=tEe;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.deployments=r.EthereumDIDRegistry=r.Errors=r.interpretIdentifier=r.identifierMatcher=r.verificationMethodTypes=r.attrTypes=r.delegateTypes=r.EthrDidController=r.stringToBytes32=r.bytes32toString=r.getResolver=r.REGISTRY=void 0;const e=q5;Object.defineProperty(r,"getResolver",{enumerable:!0,get:function(){return e.getResolver}});const t=m9;Object.defineProperty(r,"EthrDidController",{enumerable:!0,get:function(){return t.EthrDidController}});const n=Ft;Object.defineProperty(r,"bytes32toString",{enumerable:!0,get:function(){return n.bytes32toString}}),Object.defineProperty(r,"REGISTRY",{enumerable:!0,get:function(){return n.DEFAULT_REGISTRY_ADDRESS}}),Object.defineProperty(r,"Errors",{enumerable:!0,get:function(){return n.Errors}}),Object.defineProperty(r,"identifierMatcher",{enumerable:!0,get:function(){return n.identifierMatcher}}),Object.defineProperty(r,"interpretIdentifier",{enumerable:!0,get:function(){return n.interpretIdentifier}}),Object.defineProperty(r,"delegateTypes",{enumerable:!0,get:function(){return n.legacyAlgoMap}}),Object.defineProperty(r,"attrTypes",{enumerable:!0,get:function(){return n.legacyAttrTypes}}),Object.defineProperty(r,"stringToBytes32",{enumerable:!0,get:function(){return n.stringToBytes32}}),Object.defineProperty(r,"verificationMethodTypes",{enumerable:!0,get:function(){return n.verificationMethodTypes}});const i=H5;Object.defineProperty(r,"EthereumDIDRegistry",{enumerable:!0,get:function(){return i.EthereumDIDRegistry}});const s=z5;Object.defineProperty(r,"deployments",{enumerable:!0,get:function(){return s.deployments}}),r.default={REGISTRY:n.DEFAULT_REGISTRY_ADDRESS,getResolver:e.getResolver,bytes32toString:n.bytes32toString,stringToBytes32:n.stringToBytes32,EthrDidController:t.EthrDidController,verificationMethodTypes:n.verificationMethodTypes,identifierMatcher:n.identifierMatcher,interpretIdentifier:n.interpretIdentifier,Errors:n.Errors,EthereumDIDRegistry:i.EthereumDIDRegistry,deployments:s.deployments}})(vJ);const ec=so(vJ);ec.getResolver;ec.deployments;ec.REGISTRY;ec.bytes32toString;ec.stringToBytes32;ec.EthrDidController;ec.verificationMethodTypes;ec.identifierMatcher;ec.interpretIdentifier;ec.Errors;ec.EthereumDIDRegistry;var aU;(function(r){r.veriKey="veriKey",r.sigAuth="sigAuth",r.enc="enc"})(aU||(aU={}));Mt("veramo:did-provider-ethr");function rEe(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var s=r.charAt(i),a=s.charCodeAt(0);if(t[a]!==255)throw new TypeError(s+" is ambiguous");t[a]=i}var o=r.length,c=r.charAt(0),u=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var p=0,g=0,m=0,v=y.length;m!==v&&y[m]===0;)m++,p++;for(var b=(v-m)*f+1>>>0,_=new Uint8Array(b);m!==v;){for(var C=y[m],N=0,x=b-1;(C!==0||N<g)&&x!==-1;x--,N++)C+=256*_[x]>>>0,_[x]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");g=N,m++}for(var I=b-g;I!==b&&_[I]===0;)I++;for(var $=c.repeat(p);I<b;++I)$+=r.charAt(_[I]);return $}function d(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var p=0;if(y[p]!==" "){for(var g=0,m=0;y[p]===c;)g++,p++;for(var v=(y.length-p)*u+1>>>0,b=new Uint8Array(v);y[p];){var _=t[y.charCodeAt(p)];if(_===255)return;for(var C=0,N=v-1;(_!==0||C<m)&&N!==-1;N--,C++)_+=o*b[N]>>>0,b[N]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");m=C,p++}if(y[p]!==" "){for(var x=v-m;x!==v&&b[x]===0;)x++;for(var I=new Uint8Array(g+(v-x)),$=g;x!==v;)I[$++]=b[x++];return I}}}function h(y){var p=d(y);if(p)return p;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:d,decode:h}}var nEe=rEe,iEe=nEe;const sEe=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},aEe=r=>new TextEncoder().encode(r),oEe=r=>new TextDecoder().decode(r);class cEe{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class uEe{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AJ(this,e)}}class fEe{constructor(e){this.decoders=e}or(e){return AJ(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const AJ=(r,e)=>new fEe({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class lEe{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new cEe(e,t,n),this.decoder=new uEe(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const b9=({name:r,prefix:e,encode:t,decode:n})=>new lEe(r,e,t,n),W5=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=iEe(t,e);return b9({prefix:r,name:e,encode:n,decode:s=>sEe(i(s))})},dEe=(r,e,t,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=r.length;for(;r[s-1]==="=";)--s;const a=new Uint8Array(s*t/8|0);let o=0,c=0,u=0;for(let f=0;f<s;++f){const l=i[r[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|l,o+=t,o>=8&&(o-=8,a[u++]=255&c>>o)}if(o>=t||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return a},hEe=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let s="",a=0,o=0;for(let c=0;c<r.length;++c)for(o=o<<8|r[c],a+=8;a>t;)a-=t,s+=e[i&o>>a];if(a&&(s+=e[i&o<<t-a]),n)for(;s.length*t&7;)s+="=";return s},gi=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>b9({prefix:e,name:r,encode(i){return hEe(i,n,t)},decode(i){return dEe(i,n,t,r)}});W5({prefix:"9",name:"base10",alphabet:"0123456789"});gi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});gi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});gi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});const _J=Array.from(""),pEe=_J.reduce((r,e,t)=>(r[t]=e,r),[]),yEe=_J.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function mEe(r){return r.reduce((e,t)=>(e+=pEe[t],e),"")}function bEe(r){const e=[];for(const t of r){const n=yEe[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}b9({prefix:"",name:"base256emoji",encode:mEe,decode:bEe});gi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});gi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});gi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});gi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});gi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});gi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});gi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});gi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});gi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});W5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});W5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});W5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});W5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});gi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});gi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});gi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});gi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});gi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});b9({prefix:"\0",name:"identity",encode:r=>oEe(r),decode:r=>aEe(r)});new TextEncoder;new TextDecoder;Mt("veramo:key-manager");let lv;const gEe=new Uint8Array(16);function vEe(){if(!lv&&(lv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!lv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lv(gEe)}const Jn=[];for(let r=0;r<256;++r)Jn.push((r+256).toString(16).slice(1));function xEe(r,e=0){return Jn[r[e+0]]+Jn[r[e+1]]+Jn[r[e+2]]+Jn[r[e+3]]+"-"+Jn[r[e+4]]+Jn[r[e+5]]+"-"+Jn[r[e+6]]+Jn[r[e+7]]+"-"+Jn[r[e+8]]+Jn[r[e+9]]+"-"+Jn[r[e+10]]+Jn[r[e+11]]+Jn[r[e+12]]+Jn[r[e+13]]+Jn[r[e+14]]+Jn[r[e+15]]}const wEe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),oU={randomUUID:wEe};function EEe(r,e,t){if(oU.randomUUID&&!r)return oU.randomUUID();r=r||{};const n=r.random||(r.rng||vEe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,xEe(n)}Mt("veramo:kms:local");var AEe={},SJ={},lT={},sN={},g9={},v9={};Object.defineProperty(v9,"__esModule",{value:!0});v9.BrowserRandomSource=void 0;const cU=65536;class _Ee{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=cU)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,cU)));return t}}v9.BrowserRandomSource=_Ee;function SEe(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var x9={},yu={};Object.defineProperty(yu,"__esModule",{value:!0});function MEe(r){for(var e=0;e<r.length;e++)r[e]=0;return r}yu.wipe=MEe;Object.defineProperty(x9,"__esModule",{value:!0});x9.NodeRandomSource=void 0;const PEe=yu;class TEe{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof SEe<"u"){const e=zw;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=t[i];return(0,PEe.wipe)(t),n}}x9.NodeRandomSource=TEe;Object.defineProperty(g9,"__esModule",{value:!0});g9.SystemRandomSource=void 0;const CEe=v9,IEe=x9;class REe{constructor(){if(this.isAvailable=!1,this.name="",this._source=new CEe.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new IEe.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}g9.SystemRandomSource=REe;var gt={},MJ={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(o,c){var u=o>>>16&65535,f=o&65535,l=c>>>16&65535,d=c&65535;return f*d+(u*d+f*l<<16>>>0)|0}r.mul=Math.imul||e;function t(o,c){return o+c|0}r.add=t;function n(o,c){return o-c|0}r.sub=n;function i(o,c){return o<<c|o>>>32-c}r.rotl=i;function s(o,c){return o<<32-c|o>>>c}r.rotr=s;function a(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}r.isInteger=Number.isInteger||a,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(o){return r.isInteger(o)&&o>=-r.MAX_SAFE_INTEGER&&o<=r.MAX_SAFE_INTEGER}})(MJ);Object.defineProperty(gt,"__esModule",{value:!0});var PJ=MJ;function NEe(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}gt.readInt16BE=NEe;function OEe(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}gt.readUint16BE=OEe;function kEe(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}gt.readInt16LE=kEe;function DEe(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}gt.readUint16LE=DEe;function TJ(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}gt.writeUint16BE=TJ;gt.writeInt16BE=TJ;function CJ(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}gt.writeUint16LE=CJ;gt.writeInt16LE=CJ;function dT(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}gt.readInt32BE=dT;function hT(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}gt.readUint32BE=hT;function pT(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}gt.readInt32LE=pT;function yT(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}gt.readUint32LE=yT;function nw(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}gt.writeUint32BE=nw;gt.writeInt32BE=nw;function iw(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}gt.writeUint32LE=iw;gt.writeInt32LE=iw;function BEe(r,e){e===void 0&&(e=0);var t=dT(r,e),n=dT(r,e+4);return t*4294967296+n-(n>>31)*4294967296}gt.readInt64BE=BEe;function $Ee(r,e){e===void 0&&(e=0);var t=hT(r,e),n=hT(r,e+4);return t*4294967296+n}gt.readUint64BE=$Ee;function LEe(r,e){e===void 0&&(e=0);var t=pT(r,e),n=pT(r,e+4);return n*4294967296+t-(t>>31)*4294967296}gt.readInt64LE=LEe;function UEe(r,e){e===void 0&&(e=0);var t=yT(r,e),n=yT(r,e+4);return n*4294967296+t}gt.readUint64LE=UEe;function IJ(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),nw(r/4294967296>>>0,e,t),nw(r>>>0,e,t+4),e}gt.writeUint64BE=IJ;gt.writeInt64BE=IJ;function RJ(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),iw(r>>>0,e,t),iw(r/4294967296>>>0,e,t+4),e}gt.writeUint64LE=RJ;gt.writeInt64LE=RJ;function FEe(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=r/8+t-1;s>=t;s--)n+=e[s]*i,i*=256;return n}gt.readUintBE=FEe;function jEe(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=t;s<t+r/8;s++)n+=e[s]*i,i*=256;return n}gt.readUintLE=jEe;function qEe(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!PJ.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=r/8+n-1;s>=n;s--)t[s]=e/i&255,i*=256;return t}gt.writeUintBE=qEe;function VEe(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!PJ.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+r/8;s++)t[s]=e/i&255,i*=256;return t}gt.writeUintLE=VEe;function zEe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}gt.readFloat32BE=zEe;function HEe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}gt.readFloat32LE=HEe;function WEe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}gt.readFloat64BE=WEe;function KEe(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}gt.readFloat64LE=KEe;function GEe(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r),e}gt.writeFloat32BE=GEe;function QEe(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r,!0),e}gt.writeFloat32LE=QEe;function ZEe(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r),e}gt.writeFloat64BE=ZEe;function JEe(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r,!0),e}gt.writeFloat64LE=JEe;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=g9,t=gt,n=yu;r.defaultRandomSource=new e.SystemRandomSource;function i(u,f=r.defaultRandomSource){return f.randomBytes(u)}r.randomBytes=i;function s(u=r.defaultRandomSource){const f=i(4,u),l=(0,t.readUint32LE)(f);return(0,n.wipe)(f),l}r.randomUint32=s;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(u,f=a,l=r.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let d="";const h=f.length,y=256-256%h;for(;u>0;){const p=i(Math.ceil(u*256/y),l);for(let g=0;g<p.length&&u>0;g++){const m=p[g];m<y&&(d+=f.charAt(m%h),u--)}(0,n.wipe)(p)}return d}r.randomString=o;function c(u,f=a,l=r.defaultRandomSource){const d=Math.ceil(u/(Math.log(f.length)/Math.LN2));return o(d,f,l)}r.randomStringForEntropy=c})(sN);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=sN,t=yu;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function n(_){const C=new Float64Array(16);if(_)for(let N=0;N<_.length;N++)C[N]=_[N];return C}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function a(_){let C=1;for(let N=0;N<16;N++){let x=_[N]+C+65535;C=Math.floor(x/65536),_[N]=x-C*65536}_[0]+=C-1+37*(C-1)}function o(_,C,N){const x=~(N-1);for(let I=0;I<16;I++){const $=x&(_[I]^C[I]);_[I]^=$,C[I]^=$}}function c(_,C){const N=n(),x=n();for(let I=0;I<16;I++)x[I]=C[I];a(x),a(x),a(x);for(let I=0;I<2;I++){N[0]=x[0]-65517;for(let j=1;j<15;j++)N[j]=x[j]-65535-(N[j-1]>>16&1),N[j-1]&=65535;N[15]=x[15]-32767-(N[14]>>16&1);const $=N[15]>>16&1;N[14]&=65535,o(x,N,1-$)}for(let I=0;I<16;I++)_[2*I]=x[I]&255,_[2*I+1]=x[I]>>8}function u(_,C){for(let N=0;N<16;N++)_[N]=C[2*N]+(C[2*N+1]<<8);_[15]&=32767}function f(_,C,N){for(let x=0;x<16;x++)_[x]=C[x]+N[x]}function l(_,C,N){for(let x=0;x<16;x++)_[x]=C[x]-N[x]}function d(_,C,N){let x,I,$=0,j=0,O=0,E=0,S=0,A=0,w=0,P=0,k=0,D=0,T=0,M=0,L=0,K=0,Y=0,re=0,ne=0,ae=0,ie=0,fe=0,oe=0,ce=0,xe=0,ge=0,me=0,Le=0,Oe=0,Ue=0,te=0,J=0,se=0,be=N[0],pe=N[1],he=N[2],Te=N[3],_e=N[4],ke=N[5],tt=N[6],V=N[7],R=N[8],B=N[9],W=N[10],z=N[11],G=N[12],Z=N[13],de=N[14],Pe=N[15];x=C[0],$+=x*be,j+=x*pe,O+=x*he,E+=x*Te,S+=x*_e,A+=x*ke,w+=x*tt,P+=x*V,k+=x*R,D+=x*B,T+=x*W,M+=x*z,L+=x*G,K+=x*Z,Y+=x*de,re+=x*Pe,x=C[1],j+=x*be,O+=x*pe,E+=x*he,S+=x*Te,A+=x*_e,w+=x*ke,P+=x*tt,k+=x*V,D+=x*R,T+=x*B,M+=x*W,L+=x*z,K+=x*G,Y+=x*Z,re+=x*de,ne+=x*Pe,x=C[2],O+=x*be,E+=x*pe,S+=x*he,A+=x*Te,w+=x*_e,P+=x*ke,k+=x*tt,D+=x*V,T+=x*R,M+=x*B,L+=x*W,K+=x*z,Y+=x*G,re+=x*Z,ne+=x*de,ae+=x*Pe,x=C[3],E+=x*be,S+=x*pe,A+=x*he,w+=x*Te,P+=x*_e,k+=x*ke,D+=x*tt,T+=x*V,M+=x*R,L+=x*B,K+=x*W,Y+=x*z,re+=x*G,ne+=x*Z,ae+=x*de,ie+=x*Pe,x=C[4],S+=x*be,A+=x*pe,w+=x*he,P+=x*Te,k+=x*_e,D+=x*ke,T+=x*tt,M+=x*V,L+=x*R,K+=x*B,Y+=x*W,re+=x*z,ne+=x*G,ae+=x*Z,ie+=x*de,fe+=x*Pe,x=C[5],A+=x*be,w+=x*pe,P+=x*he,k+=x*Te,D+=x*_e,T+=x*ke,M+=x*tt,L+=x*V,K+=x*R,Y+=x*B,re+=x*W,ne+=x*z,ae+=x*G,ie+=x*Z,fe+=x*de,oe+=x*Pe,x=C[6],w+=x*be,P+=x*pe,k+=x*he,D+=x*Te,T+=x*_e,M+=x*ke,L+=x*tt,K+=x*V,Y+=x*R,re+=x*B,ne+=x*W,ae+=x*z,ie+=x*G,fe+=x*Z,oe+=x*de,ce+=x*Pe,x=C[7],P+=x*be,k+=x*pe,D+=x*he,T+=x*Te,M+=x*_e,L+=x*ke,K+=x*tt,Y+=x*V,re+=x*R,ne+=x*B,ae+=x*W,ie+=x*z,fe+=x*G,oe+=x*Z,ce+=x*de,xe+=x*Pe,x=C[8],k+=x*be,D+=x*pe,T+=x*he,M+=x*Te,L+=x*_e,K+=x*ke,Y+=x*tt,re+=x*V,ne+=x*R,ae+=x*B,ie+=x*W,fe+=x*z,oe+=x*G,ce+=x*Z,xe+=x*de,ge+=x*Pe,x=C[9],D+=x*be,T+=x*pe,M+=x*he,L+=x*Te,K+=x*_e,Y+=x*ke,re+=x*tt,ne+=x*V,ae+=x*R,ie+=x*B,fe+=x*W,oe+=x*z,ce+=x*G,xe+=x*Z,ge+=x*de,me+=x*Pe,x=C[10],T+=x*be,M+=x*pe,L+=x*he,K+=x*Te,Y+=x*_e,re+=x*ke,ne+=x*tt,ae+=x*V,ie+=x*R,fe+=x*B,oe+=x*W,ce+=x*z,xe+=x*G,ge+=x*Z,me+=x*de,Le+=x*Pe,x=C[11],M+=x*be,L+=x*pe,K+=x*he,Y+=x*Te,re+=x*_e,ne+=x*ke,ae+=x*tt,ie+=x*V,fe+=x*R,oe+=x*B,ce+=x*W,xe+=x*z,ge+=x*G,me+=x*Z,Le+=x*de,Oe+=x*Pe,x=C[12],L+=x*be,K+=x*pe,Y+=x*he,re+=x*Te,ne+=x*_e,ae+=x*ke,ie+=x*tt,fe+=x*V,oe+=x*R,ce+=x*B,xe+=x*W,ge+=x*z,me+=x*G,Le+=x*Z,Oe+=x*de,Ue+=x*Pe,x=C[13],K+=x*be,Y+=x*pe,re+=x*he,ne+=x*Te,ae+=x*_e,ie+=x*ke,fe+=x*tt,oe+=x*V,ce+=x*R,xe+=x*B,ge+=x*W,me+=x*z,Le+=x*G,Oe+=x*Z,Ue+=x*de,te+=x*Pe,x=C[14],Y+=x*be,re+=x*pe,ne+=x*he,ae+=x*Te,ie+=x*_e,fe+=x*ke,oe+=x*tt,ce+=x*V,xe+=x*R,ge+=x*B,me+=x*W,Le+=x*z,Oe+=x*G,Ue+=x*Z,te+=x*de,J+=x*Pe,x=C[15],re+=x*be,ne+=x*pe,ae+=x*he,ie+=x*Te,fe+=x*_e,oe+=x*ke,ce+=x*tt,xe+=x*V,ge+=x*R,me+=x*B,Le+=x*W,Oe+=x*z,Ue+=x*G,te+=x*Z,J+=x*de,se+=x*Pe,$+=38*ne,j+=38*ae,O+=38*ie,E+=38*fe,S+=38*oe,A+=38*ce,w+=38*xe,P+=38*ge,k+=38*me,D+=38*Le,T+=38*Oe,M+=38*Ue,L+=38*te,K+=38*J,Y+=38*se,I=1,x=$+I+65535,I=Math.floor(x/65536),$=x-I*65536,x=j+I+65535,I=Math.floor(x/65536),j=x-I*65536,x=O+I+65535,I=Math.floor(x/65536),O=x-I*65536,x=E+I+65535,I=Math.floor(x/65536),E=x-I*65536,x=S+I+65535,I=Math.floor(x/65536),S=x-I*65536,x=A+I+65535,I=Math.floor(x/65536),A=x-I*65536,x=w+I+65535,I=Math.floor(x/65536),w=x-I*65536,x=P+I+65535,I=Math.floor(x/65536),P=x-I*65536,x=k+I+65535,I=Math.floor(x/65536),k=x-I*65536,x=D+I+65535,I=Math.floor(x/65536),D=x-I*65536,x=T+I+65535,I=Math.floor(x/65536),T=x-I*65536,x=M+I+65535,I=Math.floor(x/65536),M=x-I*65536,x=L+I+65535,I=Math.floor(x/65536),L=x-I*65536,x=K+I+65535,I=Math.floor(x/65536),K=x-I*65536,x=Y+I+65535,I=Math.floor(x/65536),Y=x-I*65536,x=re+I+65535,I=Math.floor(x/65536),re=x-I*65536,$+=I-1+37*(I-1),I=1,x=$+I+65535,I=Math.floor(x/65536),$=x-I*65536,x=j+I+65535,I=Math.floor(x/65536),j=x-I*65536,x=O+I+65535,I=Math.floor(x/65536),O=x-I*65536,x=E+I+65535,I=Math.floor(x/65536),E=x-I*65536,x=S+I+65535,I=Math.floor(x/65536),S=x-I*65536,x=A+I+65535,I=Math.floor(x/65536),A=x-I*65536,x=w+I+65535,I=Math.floor(x/65536),w=x-I*65536,x=P+I+65535,I=Math.floor(x/65536),P=x-I*65536,x=k+I+65535,I=Math.floor(x/65536),k=x-I*65536,x=D+I+65535,I=Math.floor(x/65536),D=x-I*65536,x=T+I+65535,I=Math.floor(x/65536),T=x-I*65536,x=M+I+65535,I=Math.floor(x/65536),M=x-I*65536,x=L+I+65535,I=Math.floor(x/65536),L=x-I*65536,x=K+I+65535,I=Math.floor(x/65536),K=x-I*65536,x=Y+I+65535,I=Math.floor(x/65536),Y=x-I*65536,x=re+I+65535,I=Math.floor(x/65536),re=x-I*65536,$+=I-1+37*(I-1),_[0]=$,_[1]=j,_[2]=O,_[3]=E,_[4]=S,_[5]=A,_[6]=w,_[7]=P,_[8]=k,_[9]=D,_[10]=T,_[11]=M,_[12]=L,_[13]=K,_[14]=Y,_[15]=re}function h(_,C){d(_,C,C)}function y(_,C){const N=n();for(let x=0;x<16;x++)N[x]=C[x];for(let x=253;x>=0;x--)h(N,N),x!==2&&x!==4&&d(N,N,C);for(let x=0;x<16;x++)_[x]=N[x]}function p(_,C){const N=new Uint8Array(32),x=new Float64Array(80),I=n(),$=n(),j=n(),O=n(),E=n(),S=n();for(let k=0;k<31;k++)N[k]=_[k];N[31]=_[31]&127|64,N[0]&=248,u(x,C);for(let k=0;k<16;k++)$[k]=x[k];I[0]=O[0]=1;for(let k=254;k>=0;--k){const D=N[k>>>3]>>>(k&7)&1;o(I,$,D),o(j,O,D),f(E,I,j),l(I,I,j),f(j,$,O),l($,$,O),h(O,E),h(S,I),d(I,j,I),d(j,$,E),f(E,I,j),l(I,I,j),h($,I),l(j,O,S),d(I,j,s),f(I,I,O),d(j,j,I),d(I,O,S),d(O,$,x),h($,E),o(I,$,D),o(j,O,D)}for(let k=0;k<16;k++)x[k+16]=I[k],x[k+32]=j[k],x[k+48]=$[k],x[k+64]=O[k];const A=x.subarray(32),w=x.subarray(16);y(A,A),d(w,w,A);const P=new Uint8Array(32);return c(P,w),P}r.scalarMult=p;function g(_){return p(_,i)}r.scalarMultBase=g;function m(_){if(_.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const C=new Uint8Array(_);return{publicKey:g(C),secretKey:C}}r.generateKeyPairFromSeed=m;function v(_){const C=(0,e.randomBytes)(32,_),N=m(C);return(0,t.wipe)(C),N}r.generateKeyPair=v;function b(_,C,N=!1){if(_.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(C.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const x=p(_,C);if(N){let I=0;for(let $=0;$<x.length;$++)I|=x[$];if(I===0)throw new Error("X25519: invalid shared key")}return x}r.sharedKey=b})(lT);var I6={},w9={};Object.defineProperty(w9,"__esModule",{value:!0});var Si=gt,mT=yu,YEe=20;function XEe(r,e,t){for(var n=1634760805,i=t[3]<<24|t[2]<<16|t[1]<<8|t[0],s=t[7]<<24|t[6]<<16|t[5]<<8|t[4],a=t[11]<<24|t[10]<<16|t[9]<<8|t[8],o=t[15]<<24|t[14]<<16|t[13]<<8|t[12],c=857760878,u=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],l=e[11]<<24|e[10]<<16|e[9]<<8|e[8],d=e[15]<<24|e[14]<<16|e[13]<<8|e[12],h=2036477234,y=t[19]<<24|t[18]<<16|t[17]<<8|t[16],p=t[23]<<24|t[22]<<16|t[21]<<8|t[20],g=t[27]<<24|t[26]<<16|t[25]<<8|t[24],m=t[31]<<24|t[30]<<16|t[29]<<8|t[28],v=1797285236,b=n,_=i,C=s,N=a,x=o,I=c,$=u,j=f,O=l,E=d,S=h,A=y,w=p,P=g,k=m,D=v,T,M=0;M<YEe;M+=2)T=b+w|0,x^=T<<7|T>>>25,T=x+b|0,O^=T<<9|T>>>23,T=O+x|0,w^=T<<13|T>>>19,T=w+O|0,b^=T<<18|T>>>14,T=I+_|0,E^=T<<7|T>>>25,T=E+I|0,P^=T<<9|T>>>23,T=P+E|0,_^=T<<13|T>>>19,T=_+P|0,I^=T<<18|T>>>14,T=S+$|0,k^=T<<7|T>>>25,T=k+S|0,C^=T<<9|T>>>23,T=C+k|0,$^=T<<13|T>>>19,T=$+C|0,S^=T<<18|T>>>14,T=D+A|0,N^=T<<7|T>>>25,T=N+D|0,j^=T<<9|T>>>23,T=j+N|0,A^=T<<13|T>>>19,T=A+j|0,D^=T<<18|T>>>14,T=b+N|0,_^=T<<7|T>>>25,T=_+b|0,C^=T<<9|T>>>23,T=C+_|0,N^=T<<13|T>>>19,T=N+C|0,b^=T<<18|T>>>14,T=I+x|0,$^=T<<7|T>>>25,T=$+I|0,j^=T<<9|T>>>23,T=j+$|0,x^=T<<13|T>>>19,T=x+j|0,I^=T<<18|T>>>14,T=S+E|0,A^=T<<7|T>>>25,T=A+S|0,O^=T<<9|T>>>23,T=O+A|0,E^=T<<13|T>>>19,T=E+O|0,S^=T<<18|T>>>14,T=D+k|0,w^=T<<7|T>>>25,T=w+D|0,P^=T<<9|T>>>23,T=P+w|0,k^=T<<13|T>>>19,T=k+P|0,D^=T<<18|T>>>14;Si.writeUint32LE(b+n|0,r,0),Si.writeUint32LE(_+i|0,r,4),Si.writeUint32LE(C+s|0,r,8),Si.writeUint32LE(N+a|0,r,12),Si.writeUint32LE(x+o|0,r,16),Si.writeUint32LE(I+c|0,r,20),Si.writeUint32LE($+u|0,r,24),Si.writeUint32LE(j+f|0,r,28),Si.writeUint32LE(O+l|0,r,32),Si.writeUint32LE(E+d|0,r,36),Si.writeUint32LE(S+h|0,r,40),Si.writeUint32LE(A+y|0,r,44),Si.writeUint32LE(w+p|0,r,48),Si.writeUint32LE(P+g|0,r,52),Si.writeUint32LE(k+m|0,r,56),Si.writeUint32LE(D+v|0,r,60)}function NJ(r,e,t,n,i){if(i===void 0&&(i=0),r.length!==32)throw new Error("Salsa20: key size must be 32 bytes");if(n.length<t.length)throw new Error("Salsa20: destination is shorter than source");var s,a;if(i===0){if(e.length!==8)throw new Error("Salsa20 nonce must be 8 bytes");s=new Uint8Array(16),s.set(e),a=e.length}else{if(e.length!==16)throw new Error("Salsa20 nonce with counter must be 16 bytes");s=e,a=16-i}for(var o=new Uint8Array(64),c=0;c<t.length;c+=64){XEe(o,s,r);for(var u=c;u<c+64&&u<t.length;u++)n[u]=t[u]^o[u-c];tAe(s,a,s.length-a)}return mT.wipe(o),i===0&&mT.wipe(s),n}w9.streamXOR=NJ;function eAe(r,e,t,n){return n===void 0&&(n=0),mT.wipe(t),NJ(r,e,t,t,n)}w9.stream=eAe;function tAe(r,e,t){for(var n=1;t--;)n=n+(r[e]&255)|0,r[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("Salsa20: counter overflow")}Object.defineProperty(I6,"__esModule",{value:!0});var al=gt,rAe=w9,OJ=yu;function kJ(r,e,t,n,i){if(i===void 0&&(i=0),i===0){if(e.length!==24)throw new Error("XSalsa20 nonce must be 24 bytes")}else if(e.length!==32)throw new Error("XSalsa20 nonce with counter must be 32 bytes");var s=DJ(r,e.subarray(0,16),new Uint8Array(32)),a=rAe.streamXOR(s,e.subarray(16),t,n,i);return OJ.wipe(s),a}I6.streamXOR=kJ;function nAe(r,e,t,n){return n===void 0&&(n=0),OJ.wipe(t),kJ(r,e,t,t,n)}I6.stream=nAe;var iAe=20;function DJ(r,e,t){for(var n=1634760805,i=r[3]<<24|r[2]<<16|r[1]<<8|r[0],s=r[7]<<24|r[6]<<16|r[5]<<8|r[4],a=r[11]<<24|r[10]<<16|r[9]<<8|r[8],o=r[15]<<24|r[14]<<16|r[13]<<8|r[12],c=857760878,u=e[3]<<24|e[2]<<16|e[1]<<8|e[0],f=e[7]<<24|e[6]<<16|e[5]<<8|e[4],l=e[11]<<24|e[10]<<16|e[9]<<8|e[8],d=e[15]<<24|e[14]<<16|e[13]<<8|e[12],h=2036477234,y=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],m=r[31]<<24|r[30]<<16|r[29]<<8|r[28],v=1797285236,b,_=0;_<iAe;_+=2)b=n+p|0,o^=b<<7|b>>>25,b=o+n|0,l^=b<<9|b>>>23,b=l+o|0,p^=b<<13|b>>>19,b=p+l|0,n^=b<<18|b>>>14,b=c+i|0,d^=b<<7|b>>>25,b=d+c|0,g^=b<<9|b>>>23,b=g+d|0,i^=b<<13|b>>>19,b=i+g|0,c^=b<<18|b>>>14,b=h+u|0,m^=b<<7|b>>>25,b=m+h|0,s^=b<<9|b>>>23,b=s+m|0,u^=b<<13|b>>>19,b=u+s|0,h^=b<<18|b>>>14,b=v+y|0,a^=b<<7|b>>>25,b=a+v|0,f^=b<<9|b>>>23,b=f+a|0,y^=b<<13|b>>>19,b=y+f|0,v^=b<<18|b>>>14,b=n+a|0,i^=b<<7|b>>>25,b=i+n|0,s^=b<<9|b>>>23,b=s+i|0,a^=b<<13|b>>>19,b=a+s|0,n^=b<<18|b>>>14,b=c+o|0,u^=b<<7|b>>>25,b=u+c|0,f^=b<<9|b>>>23,b=f+u|0,o^=b<<13|b>>>19,b=o+f|0,c^=b<<18|b>>>14,b=h+d|0,y^=b<<7|b>>>25,b=y+h|0,l^=b<<9|b>>>23,b=l+y|0,d^=b<<13|b>>>19,b=d+l|0,h^=b<<18|b>>>14,b=v+m|0,p^=b<<7|b>>>25,b=p+v|0,g^=b<<9|b>>>23,b=g+p|0,m^=b<<13|b>>>19,b=m+g|0,v^=b<<18|b>>>14;return al.writeUint32LE(n,t,0),al.writeUint32LE(c,t,4),al.writeUint32LE(h,t,8),al.writeUint32LE(v,t,12),al.writeUint32LE(u,t,16),al.writeUint32LE(f,t,20),al.writeUint32LE(l,t,24),al.writeUint32LE(d,t,28),t}I6.hsalsa=DJ;var pf={},BJ={},R6={};Object.defineProperty(R6,"__esModule",{value:!0});function sAe(r,e,t){return~(r-1)&e|r-1&t}R6.select=sAe;function aAe(r,e){return(r|0)-(e|0)-1>>>31&1}R6.lessOrEqual=aAe;function $J(r,e){if(r.length!==e.length)return 0;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return 1&t-1>>>8}R6.compare=$J;function oAe(r,e){return r.length===0||e.length===0?!1:$J(r,e)!==0}R6.equal=oAe;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=R6,t=yu;r.DIGEST_LENGTH=16;var n=function(){function a(o){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var c=o[0]|o[1]<<8;this._r[0]=c&8191;var u=o[2]|o[3]<<8;this._r[1]=(c>>>13|u<<3)&8191;var f=o[4]|o[5]<<8;this._r[2]=(u>>>10|f<<6)&7939;var l=o[6]|o[7]<<8;this._r[3]=(f>>>7|l<<9)&8191;var d=o[8]|o[9]<<8;this._r[4]=(l>>>4|d<<12)&255,this._r[5]=d>>>1&8190;var h=o[10]|o[11]<<8;this._r[6]=(d>>>14|h<<2)&8191;var y=o[12]|o[13]<<8;this._r[7]=(h>>>11|y<<5)&8065;var p=o[14]|o[15]<<8;this._r[8]=(y>>>8|p<<8)&8191,this._r[9]=p>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return a.prototype._blocks=function(o,c,u){for(var f=this._fin?0:2048,l=this._h[0],d=this._h[1],h=this._h[2],y=this._h[3],p=this._h[4],g=this._h[5],m=this._h[6],v=this._h[7],b=this._h[8],_=this._h[9],C=this._r[0],N=this._r[1],x=this._r[2],I=this._r[3],$=this._r[4],j=this._r[5],O=this._r[6],E=this._r[7],S=this._r[8],A=this._r[9];u>=16;){var w=o[c+0]|o[c+1]<<8;l+=w&8191;var P=o[c+2]|o[c+3]<<8;d+=(w>>>13|P<<3)&8191;var k=o[c+4]|o[c+5]<<8;h+=(P>>>10|k<<6)&8191;var D=o[c+6]|o[c+7]<<8;y+=(k>>>7|D<<9)&8191;var T=o[c+8]|o[c+9]<<8;p+=(D>>>4|T<<12)&8191,g+=T>>>1&8191;var M=o[c+10]|o[c+11]<<8;m+=(T>>>14|M<<2)&8191;var L=o[c+12]|o[c+13]<<8;v+=(M>>>11|L<<5)&8191;var K=o[c+14]|o[c+15]<<8;b+=(L>>>8|K<<8)&8191,_+=K>>>5|f;var Y=0,re=Y;re+=l*C,re+=d*(5*A),re+=h*(5*S),re+=y*(5*E),re+=p*(5*O),Y=re>>>13,re&=8191,re+=g*(5*j),re+=m*(5*$),re+=v*(5*I),re+=b*(5*x),re+=_*(5*N),Y+=re>>>13,re&=8191;var ne=Y;ne+=l*N,ne+=d*C,ne+=h*(5*A),ne+=y*(5*S),ne+=p*(5*E),Y=ne>>>13,ne&=8191,ne+=g*(5*O),ne+=m*(5*j),ne+=v*(5*$),ne+=b*(5*I),ne+=_*(5*x),Y+=ne>>>13,ne&=8191;var ae=Y;ae+=l*x,ae+=d*N,ae+=h*C,ae+=y*(5*A),ae+=p*(5*S),Y=ae>>>13,ae&=8191,ae+=g*(5*E),ae+=m*(5*O),ae+=v*(5*j),ae+=b*(5*$),ae+=_*(5*I),Y+=ae>>>13,ae&=8191;var ie=Y;ie+=l*I,ie+=d*x,ie+=h*N,ie+=y*C,ie+=p*(5*A),Y=ie>>>13,ie&=8191,ie+=g*(5*S),ie+=m*(5*E),ie+=v*(5*O),ie+=b*(5*j),ie+=_*(5*$),Y+=ie>>>13,ie&=8191;var fe=Y;fe+=l*$,fe+=d*I,fe+=h*x,fe+=y*N,fe+=p*C,Y=fe>>>13,fe&=8191,fe+=g*(5*A),fe+=m*(5*S),fe+=v*(5*E),fe+=b*(5*O),fe+=_*(5*j),Y+=fe>>>13,fe&=8191;var oe=Y;oe+=l*j,oe+=d*$,oe+=h*I,oe+=y*x,oe+=p*N,Y=oe>>>13,oe&=8191,oe+=g*C,oe+=m*(5*A),oe+=v*(5*S),oe+=b*(5*E),oe+=_*(5*O),Y+=oe>>>13,oe&=8191;var ce=Y;ce+=l*O,ce+=d*j,ce+=h*$,ce+=y*I,ce+=p*x,Y=ce>>>13,ce&=8191,ce+=g*N,ce+=m*C,ce+=v*(5*A),ce+=b*(5*S),ce+=_*(5*E),Y+=ce>>>13,ce&=8191;var xe=Y;xe+=l*E,xe+=d*O,xe+=h*j,xe+=y*$,xe+=p*I,Y=xe>>>13,xe&=8191,xe+=g*x,xe+=m*N,xe+=v*C,xe+=b*(5*A),xe+=_*(5*S),Y+=xe>>>13,xe&=8191;var ge=Y;ge+=l*S,ge+=d*E,ge+=h*O,ge+=y*j,ge+=p*$,Y=ge>>>13,ge&=8191,ge+=g*I,ge+=m*x,ge+=v*N,ge+=b*C,ge+=_*(5*A),Y+=ge>>>13,ge&=8191;var me=Y;me+=l*A,me+=d*S,me+=h*E,me+=y*O,me+=p*j,Y=me>>>13,me&=8191,me+=g*$,me+=m*I,me+=v*x,me+=b*N,me+=_*C,Y+=me>>>13,me&=8191,Y=(Y<<2)+Y|0,Y=Y+re|0,re=Y&8191,Y=Y>>>13,ne+=Y,l=re,d=ne,h=ae,y=ie,p=fe,g=oe,m=ce,v=xe,b=ge,_=me,c+=16,u-=16}this._h[0]=l,this._h[1]=d,this._h[2]=h,this._h[3]=y,this._h[4]=p,this._h[5]=g,this._h[6]=m,this._h[7]=v,this._h[8]=b,this._h[9]=_},a.prototype.finish=function(o,c){c===void 0&&(c=0);var u=new Uint16Array(10),f,l,d,h;if(this._leftover){for(h=this._leftover,this._buffer[h++]=1;h<16;h++)this._buffer[h]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,h=2;h<10;h++)this._h[h]+=f,f=this._h[h]>>>13,this._h[h]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,u[0]=this._h[0]+5,f=u[0]>>>13,u[0]&=8191,h=1;h<10;h++)u[h]=this._h[h]+f,f=u[h]>>>13,u[h]&=8191;for(u[9]-=8192,l=(f^1)-1,h=0;h<10;h++)u[h]&=l;for(l=~l,h=0;h<10;h++)this._h[h]=this._h[h]&l|u[h];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,d=this._h[0]+this._pad[0],this._h[0]=d&65535,h=1;h<8;h++)d=(this._h[h]+this._pad[h]|0)+(d>>>16)|0,this._h[h]=d&65535;return o[c+0]=this._h[0]>>>0,o[c+1]=this._h[0]>>>8,o[c+2]=this._h[1]>>>0,o[c+3]=this._h[1]>>>8,o[c+4]=this._h[2]>>>0,o[c+5]=this._h[2]>>>8,o[c+6]=this._h[3]>>>0,o[c+7]=this._h[3]>>>8,o[c+8]=this._h[4]>>>0,o[c+9]=this._h[4]>>>8,o[c+10]=this._h[5]>>>0,o[c+11]=this._h[5]>>>8,o[c+12]=this._h[6]>>>0,o[c+13]=this._h[6]>>>8,o[c+14]=this._h[7]>>>0,o[c+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(o){var c=0,u=o.length,f;if(this._leftover){f=16-this._leftover,f>u&&(f=u);for(var l=0;l<f;l++)this._buffer[this._leftover+l]=o[c+l];if(u-=f,c+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(u>=16&&(f=u-u%16,this._blocks(o,c,f),c+=f,u-=f),u){for(var l=0;l<u;l++)this._buffer[this._leftover+l]=o[c+l];this._leftover+=u}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},a.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();r.Poly1305=n;function i(a,o){var c=new n(a);c.update(o);var u=c.digest();return c.clean(),u}r.oneTimeAuth=i;function s(a,o){return a.length!==r.DIGEST_LENGTH||o.length!==r.DIGEST_LENGTH?!1:e.equal(a,o)}r.equal=s})(BJ);Object.defineProperty(pf,"__esModule",{value:!0});pf.generateKey=pf.openSecretBox=pf.secretBox=void 0;const sw=I6,bT=BJ,ty=yu,cAe=sN;function uAe(r,e,t){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");const n=new Uint8Array(64),i=new Uint8Array(32);i.set(e),(0,sw.stream)(r,i,n,8);const s=new Uint8Array(16+t.length);for(let o=0;o<32&&o<t.length;o++)s[16+o]=t[o]^n[32+o];t.length>32&&(0,sw.streamXOR)(r,i,t.subarray(32),s.subarray(48),8);const a=(0,bT.oneTimeAuth)(n.subarray(0,32),s.subarray(16));for(let o=0;o<a.length;o++)s[o]=a[o];return(0,ty.wipe)(a),(0,ty.wipe)(n),(0,ty.wipe)(i),s}pf.secretBox=uAe;function fAe(r,e,t){if(e.length!==24)throw new Error("secretBox nonce must be 24 bytes");if(t.length<16)throw new Error("secretBox data must be at least 16 bytes");const n=new Uint8Array(64),i=new Uint8Array(32);i.set(e),(0,sw.stream)(r,i,n,8);const s=(0,bT.oneTimeAuth)(n.subarray(0,32),t.subarray(16));if(!(0,bT.equal)(s,t.subarray(0,16)))return null;const a=t.subarray(16),o=new Uint8Array(a.length);for(let c=0;c<32&&c<a.length;c++)o[c]=a[c]^n[32+c];return a.length>32&&(0,sw.streamXOR)(r,i,a.subarray(32),o.subarray(32),8),(0,ty.wipe)(s),(0,ty.wipe)(n),(0,ty.wipe)(i),o}pf.openSecretBox=fAe;function lAe(r){return(0,cAe.randomBytes)(32,r)}pf.generateKey=lAe;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.openBox=r.box=r.precomputeSharedKey=r.generateKeyPair=void 0;const e=lT,t=I6,n=pf,i=yu;var s=lT;Object.defineProperty(r,"generateKeyPair",{enumerable:!0,get:function(){return s.generateKeyPair}});const a=new Uint8Array(16);function o(f,l){const d=(0,e.scalarMult)(l,f);return(0,t.hsalsa)(d,a,d),d}r.precomputeSharedKey=o;function c(f,l,d,h){const y=o(f,l),p=(0,n.secretBox)(y,d,h);return(0,i.wipe)(y),p}r.box=c;function u(f,l,d,h){const y=o(f,l),p=(0,n.openSecretBox)(y,d,h);return(0,i.wipe)(y),p}r.openBox=u})(SJ);(function(r){var e=Ht&&Ht.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),t=Ht&&Ht.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(r,"__esModule",{value:!0}),t(SJ,r),t(pf,r)})(AEe);Mt("veramo:message-handler");Mt("veramo:message-handler");Mt("veramo:w3c:message-handler");var uU;(function(r){r[r.JWT=0]="JWT",r[r.JSONLD=1]="JSONLD",r[r.EIP712=2]="EIP712"})(uU||(uU={}));Mt("veramo:w3c:action-handler");Mt("veramo:resolver");var LJ={},K5={},G5={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.Errors=jt.legacyAlgoMap=jt.legacyAttrTypes=jt.eventNames=jt.verificationMethodTypes=jt.MESSAGE_PREFIX=jt.DEFAULT_JSON_RPC=jt.DEFAULT_REGISTRY_ADDRESS=jt.nullAddress=jt.identifierMatcher=void 0;jt.strip0x=dAe;jt.bytes32toString=hAe;jt.stringToBytes32=pAe;jt.interpretIdentifier=yAe;jt.isDefined=mAe;const l2=K0;jt.identifierMatcher=/^(.*)?(0x[0-9a-fA-F]{40}|0x[0-9a-fA-F]{66})$/;jt.nullAddress="0x0000000000000000000000000000000000000000";jt.DEFAULT_REGISTRY_ADDRESS="0xdca7ef03e98e0dc2b855be647c39abe984fcf21b";jt.DEFAULT_JSON_RPC="http://127.0.0.1:8545/";jt.MESSAGE_PREFIX="0x1900";var Sl;(function(r){r.EcdsaSecp256k1VerificationKey2019="EcdsaSecp256k1VerificationKey2019",r.EcdsaSecp256k1RecoveryMethod2020="EcdsaSecp256k1RecoveryMethod2020",r.Ed25519VerificationKey2018="Ed25519VerificationKey2018",r.RSAVerificationKey2018="RSAVerificationKey2018",r.X25519KeyAgreementKey2019="X25519KeyAgreementKey2019"})(Sl||(jt.verificationMethodTypes=Sl={}));var fU;(function(r){r.DIDOwnerChanged="DIDOwnerChanged",r.DIDAttributeChanged="DIDAttributeChanged",r.DIDDelegateChanged="DIDDelegateChanged"})(fU||(jt.eventNames=fU={}));jt.legacyAttrTypes={sigAuth:"SignatureAuthentication2018",veriKey:"VerificationKey2018",enc:"KeyAgreementKey2019"};jt.legacyAlgoMap={Secp256k1VerificationKey2018:Sl.EcdsaSecp256k1VerificationKey2019,Ed25519SignatureAuthentication2018:Sl.Ed25519VerificationKey2018,Secp256k1SignatureAuthentication2018:Sl.EcdsaSecp256k1VerificationKey2019,RSAVerificationKey2018:Sl.RSAVerificationKey2018,Ed25519VerificationKey2018:Sl.Ed25519VerificationKey2018,X25519KeyAgreementKey2019:Sl.X25519KeyAgreementKey2019};function dAe(r){return r.startsWith("0x")?r.slice(2):r}function hAe(r){return(0,l2.toUtf8String)(r).replace(/\0+$/,"")}function pAe(r){const e=(0,l2.toUtf8Bytes)(r);return(0,l2.zeroPadBytes)(e.slice(0,32),32)}function yAe(r){let e=r,t;if(e.startsWith("did:ethr")){e=e.split("?")[0];const n=e.split(":");e=n[n.length-1],n.length>=4&&(t=n.splice(2,n.length-3).join(":"))}return e.length>42?{address:(0,l2.computeAddress)(e),publicKey:e,network:t}:{address:(0,l2.getAddress)(e),network:t}}var lU;(function(r){r.notFound="notFound",r.invalidDid="invalidDid",r.unknownNetwork="unknownNetwork",r.unsupportedFormat="unsupportedFormat"})(lU||(jt.Errors=lU={}));function mAe(r){return r!==null&&typeof r<"u"}var Q5={};Object.defineProperty(Q5,"__esModule",{value:!0});Q5.deployments=void 0;Q5.deployments=[{chainId:1,registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",name:"mainnet",legacyNonce:!0},{chainId:11155111,registry:"0x03d5003bf0e79C5F5223588F347ebA39AfbC3818",name:"sepolia",legacyNonce:!1},{chainId:246,registry:"0xE29672f34e92b56C9169f9D485fFc8b9A136BCE4",name:"ewc",description:"energy web chain",legacyNonce:!1},{chainId:73799,registry:"0xC15D5A57A8Eb0e1dCBE5D88B8f9a82017e5Cc4AF",name:"volta",description:"energy web testnet",legacyNonce:!1},{chainId:246785,registry:"0xdCa7EF03e98e0DC2B855bE647C39ABe984fcF21B",name:"artis:tau1",legacyNonce:!0},{chainId:246529,registry:"0xdCa7EF03e98e0DC2B855bE647C39ABe984fcF21B",name:"artis:sigma1",legacyNonce:!0},{chainId:137,registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",name:"polygon",legacyNonce:!0},{chainId:80001,registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",name:"polygon:test",legacyNonce:!0},{chainId:1313161554,registry:"0x63eD58B671EeD12Bc1652845ba5b2CDfBff198e0",name:"aurora",legacyNonce:!0},{chainId:59140,registry:"0x03d5003bf0e79C5F5223588F347ebA39AfbC3818",name:"linea:goerli",legacyNonce:!1}];const bAe="hh-sol-artifact-1",gAe="EthereumDIDRegistry",vAe="contracts/EthereumDIDRegistry.sol",xAe=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"identity",type:"address"},{indexed:!1,internalType:"bytes32",name:"name",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"value",type:"bytes"},{indexed:!1,internalType:"uint256",name:"validTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"previousChange",type:"uint256"}],name:"DIDAttributeChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"identity",type:"address"},{indexed:!1,internalType:"bytes32",name:"delegateType",type:"bytes32"},{indexed:!1,internalType:"address",name:"delegate",type:"address"},{indexed:!1,internalType:"uint256",name:"validTo",type:"uint256"},{indexed:!1,internalType:"uint256",name:"previousChange",type:"uint256"}],name:"DIDDelegateChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"identity",type:"address"},{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"previousChange",type:"uint256"}],name:"DIDOwnerChanged",type:"event"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"addDelegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"addDelegateSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"address",name:"newOwner",type:"address"}],name:"changeOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"address",name:"newOwner",type:"address"}],name:"changeOwnerSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"changed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"address",name:"",type:"address"}],name:"delegates",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"}],name:"identityOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"owners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"}],name:"revokeAttribute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"}],name:"revokeAttributeSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"}],name:"revokeDelegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"}],name:"revokeDelegateSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"setAttribute",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"uint8",name:"sigV",type:"uint8"},{internalType:"bytes32",name:"sigR",type:"bytes32"},{internalType:"bytes32",name:"sigS",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"bytes",name:"value",type:"bytes"},{internalType:"uint256",name:"validity",type:"uint256"}],name:"setAttributeSigned",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"identity",type:"address"},{internalType:"bytes32",name:"delegateType",type:"bytes32"},{internalType:"address",name:"delegate",type:"address"}],name:"validDelegate",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],wAe="0x608060405234801561001057600080fd5b506113c8806100206000396000f3fe608060405234801561001057600080fd5b50600436106100ff5760003560e01c806380b29f7c11610097578063a7068d6611610066578063a7068d66146102b5578063e476af5c146102c8578063f00d4b5d146102db578063f96d0f9f146102ee57600080fd5b806380b29f7c146102695780638733d4e81461027c578063930726841461028f5780639c2c1b2b146102a257600080fd5b8063240cf1fa116100d3578063240cf1fa146101b1578063622b2a3c146101c457806370ae92d2146102365780637ad4b0a41461025657600080fd5b8062c023da14610104578063022914a7146101195780630d44625b1461015f578063123b5e981461019e575b600080fd5b610117610112366004610ea7565b61030e565b005b610142610127366004610dd2565b6000602081905290815260409020546001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61019061016d366004610e27565b600160209081526000938452604080852082529284528284209052825290205481565b604051908152602001610156565b6101176101ac3660046110f7565b61031f565b6101176101bf366004610f5d565b6103ab565b6102266101d2366004610e27565b6001600160a01b039283166000908152600160209081526040808320815180840196909652815180870384018152958201825285519583019590952083529381528382209290941681529252902054421090565b6040519015158152602001610156565b610190610244366004610dd2565b60036020526000908152604090205481565b610117610264366004610efe565b61048d565b610117610277366004610e27565b6104a0565b61014261028a366004610dd2565b6104ac565b61011761029d366004610fb4565b6104dc565b6101176102b0366004611013565b6105c7565b6101176102c3366004610e63565b6106b5565b6101176102d636600461107d565b6106c2565b6101176102e9366004610df4565b610741565b6101906102fc366004610dd2565b60026020526000908152604090205481565b61031a83338484610750565b505050565b6000601960f81b81306003826103348d6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548b88888860405160200161037098979695949392919061123e565b6040516020818303038152906040528051906020012090506103a1886103998a8a8a8a87610824565b868686610923565b5050505050505050565b6000601960f81b81306003826103c08b6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528a831b851660568501527f6368616e67654f776e6572000000000000000000000000000000000000000000606a8501529186901b90931660758301528051606981840301815260899092019052805191012090506104858661047f8188888887610824565b84610a07565b505050505050565b61049a8433858585610923565b50505050565b61031a83338484610b03565b6001600160a01b0380821660009081526020819052604081205490911680156104d55792915050565b5090919050565b6000601960f81b81306003826104f18c6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528b831b851660568501527f7265766f6b6544656c6567617465000000000000000000000000000000000000606a850152607884018890529186901b90931660988301528051608c81840301815260ac9092019052805191012090506105be876105b78189898987610824565b8585610b03565b50505050505050565b6000601960f81b81306003826105dc8d6104ac565b6001600160a01b0316815260208082019290925260409081016000205490516001600160f81b031995861692810192909252929093166021840152606090811b6bffffffffffffffffffffffff19908116602285015260368401929092528a811b821660568401527f61646444656c6567617465000000000000000000000000000000000000000000606a8401526075830187905285901b16609582015260a9810183905260c9016040516020818303038152906040528051906020012090506103a1886106ad8a8a8a8a87610824565b868686610bfd565b61049a8433858585610bfd565b6000601960f81b81306003826106d78c6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548a878760405160200161071197969594939291906111a8565b6040516020818303038152906040528051906020012090506105be8761073a8989898987610824565b8585610750565b61074c823383610a07565b5050565b838361075b826104ac565b6001600160a01b0316816001600160a01b0316146107ac5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064015b60405180910390fd5b6001600160a01b0386166000818152600260205260408082205490517f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e4926107f9928992899291906112db565b60405180910390a25050506001600160a01b0390921660009081526002602052604090204390555050565b6040805160008082526020820180845284905260ff8716928201929092526060810185905260808101849052819060019060a0016020604051602081039080840390855afa15801561087a573d6000803e3d6000fd5b50505060206040510351905061088f876104ac565b6001600160a01b0316816001600160a01b0316146108ef5760405162461bcd60e51b815260206004820152600d60248201527f6261645f7369676e61747572650000000000000000000000000000000000000060448201526064016107a3565b6001600160a01b03811660009081526003602052604081208054916109138361134b565b9091555090979650505050505050565b848461092e826104ac565b6001600160a01b0316816001600160a01b03161461097a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0387167f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e486866109b18742611307565b6001600160a01b038c16600090815260026020526040908190205490516109db94939291906112db565b60405180910390a25050506001600160a01b039093166000908152600260205260409020439055505050565b8282610a12826104ac565b6001600160a01b0316816001600160a01b031614610a5e5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0385811660008181526020818152604080832080547fffffffffffffffffffffffff000000000000000000000000000000000000000016958916958617905560028252918290205482519485529084015290917f38a5a6e68f30ed1ab45860a4afb34bcb2fc00f22ca462d249b8a8d40cda6f7a3910160405180910390a2505050506001600160a01b03166000908152600260205260409020439055565b8383610b0e826104ac565b6001600160a01b0316816001600160a01b031614610b5a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b03868116600081815260016020908152604080832081518084018b90528251808203850181528184018085528151918601919091208652918452828520968a16808652968452828520429081905586865260029094529190932054928990526060810194909452608084015260a0830152907f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f79060c0016107f9565b8484610c08826104ac565b6001600160a01b0316816001600160a01b031614610c545760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b610c5e8342611307565b6001600160a01b03888116600081815260016020908152604080832081518084018d9052825180820385018152908301835280519084012084528252808320948a16835293905291909120919091557f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f78686610cda8742611307565b6001600160a01b038c8116600090815260026020908152604091829020548251968752949092169185019190915283015260608201526080016109db565b80356001600160a01b0381168114610d2f57600080fd5b919050565b600082601f830112610d4557600080fd5b813567ffffffffffffffff80821115610d6057610d6061137c565b604051601f8301601f19908116603f01168101908282118183101715610d8857610d8861137c565b81604052838152866020858801011115610da157600080fd5b836020870160208301376000602085830101528094505050505092915050565b803560ff81168114610d2f57600080fd5b600060208284031215610de457600080fd5b610ded82610d18565b9392505050565b60008060408385031215610e0757600080fd5b610e1083610d18565b9150610e1e60208401610d18565b90509250929050565b600080600060608486031215610e3c57600080fd5b610e4584610d18565b925060208401359150610e5a60408501610d18565b90509250925092565b60008060008060808587031215610e7957600080fd5b610e8285610d18565b935060208501359250610e9760408601610d18565b9396929550929360600135925050565b600080600060608486031215610ebc57600080fd5b610ec584610d18565b925060208401359150604084013567ffffffffffffffff811115610ee857600080fd5b610ef486828701610d34565b9150509250925092565b60008060008060808587031215610f1457600080fd5b610f1d85610d18565b935060208501359250604085013567ffffffffffffffff811115610f4057600080fd5b610f4c87828801610d34565b949793965093946060013593505050565b600080600080600060a08688031215610f7557600080fd5b610f7e86610d18565b9450610f8c60208701610dc1565b93506040860135925060608601359150610fa860808701610d18565b90509295509295909350565b60008060008060008060c08789031215610fcd57600080fd5b610fd687610d18565b9550610fe460208801610dc1565b945060408701359350606087013592506080870135915061100760a08801610d18565b90509295509295509295565b600080600080600080600060e0888a03121561102e57600080fd5b61103788610d18565b965061104560208901610dc1565b955060408801359450606088013593506080880135925061106860a08901610d18565b915060c0880135905092959891949750929550565b60008060008060008060c0878903121561109657600080fd5b61109f87610d18565b95506110ad60208801610dc1565b945060408701359350606087013592506080870135915060a087013567ffffffffffffffff8111156110de57600080fd5b6110ea89828a01610d34565b9150509295509295509295565b600080600080600080600060e0888a03121561111257600080fd5b61111b88610d18565b965061112960208901610dc1565b955060408801359450606088013593506080880135925060a088013567ffffffffffffffff81111561115a57600080fd5b6111668a828b01610d34565b92505060c0880135905092959891949750929550565b6000815180845261119481602086016020860161131f565b601f01601f19169290920160200192915050565b60006001600160f81b0319808a1683528089166001840152506bffffffffffffffffffffffff19808860601b166002840152866016840152808660601b166036840152507f7265766f6b654174747269627574650000000000000000000000000000000000604a830152836059830152825161122b81607985016020870161131f565b9190910160790198975050505050505050565b60006001600160f81b0319808b168352808a166001840152506bffffffffffffffffffffffff19808960601b166002840152876016840152808760601b166036840152507f7365744174747269627574650000000000000000000000000000000000000000604a83015284605683015283516112c181607685016020880161131f565b607692019182019290925260960198975050505050505050565b8481526080602082015260006112f4608083018661117c565b6040830194909452506060015292915050565b6000821982111561131a5761131a611366565b500190565b60005b8381101561133a578181015183820152602001611322565b8381111561049a5750506000910152565b600060001982141561135f5761135f611366565b5060010190565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fdfea2646970667358221220216ddc889c83668a16b40556d3dc23f6e1a9fa3333587b228a11c3a0d1fad80b64736f6c63430008060033",EAe="0x608060405234801561001057600080fd5b50600436106100ff5760003560e01c806380b29f7c11610097578063a7068d6611610066578063a7068d66146102b5578063e476af5c146102c8578063f00d4b5d146102db578063f96d0f9f146102ee57600080fd5b806380b29f7c146102695780638733d4e81461027c578063930726841461028f5780639c2c1b2b146102a257600080fd5b8063240cf1fa116100d3578063240cf1fa146101b1578063622b2a3c146101c457806370ae92d2146102365780637ad4b0a41461025657600080fd5b8062c023da14610104578063022914a7146101195780630d44625b1461015f578063123b5e981461019e575b600080fd5b610117610112366004610ea7565b61030e565b005b610142610127366004610dd2565b6000602081905290815260409020546001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b61019061016d366004610e27565b600160209081526000938452604080852082529284528284209052825290205481565b604051908152602001610156565b6101176101ac3660046110f7565b61031f565b6101176101bf366004610f5d565b6103ab565b6102266101d2366004610e27565b6001600160a01b039283166000908152600160209081526040808320815180840196909652815180870384018152958201825285519583019590952083529381528382209290941681529252902054421090565b6040519015158152602001610156565b610190610244366004610dd2565b60036020526000908152604090205481565b610117610264366004610efe565b61048d565b610117610277366004610e27565b6104a0565b61014261028a366004610dd2565b6104ac565b61011761029d366004610fb4565b6104dc565b6101176102b0366004611013565b6105c7565b6101176102c3366004610e63565b6106b5565b6101176102d636600461107d565b6106c2565b6101176102e9366004610df4565b610741565b6101906102fc366004610dd2565b60026020526000908152604090205481565b61031a83338484610750565b505050565b6000601960f81b81306003826103348d6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548b88888860405160200161037098979695949392919061123e565b6040516020818303038152906040528051906020012090506103a1886103998a8a8a8a87610824565b868686610923565b5050505050505050565b6000601960f81b81306003826103c08b6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528a831b851660568501527f6368616e67654f776e6572000000000000000000000000000000000000000000606a8501529186901b90931660758301528051606981840301815260899092019052805191012090506104858661047f8188888887610824565b84610a07565b505050505050565b61049a8433858585610923565b50505050565b61031a83338484610b03565b6001600160a01b0380821660009081526020819052604081205490911680156104d55792915050565b5090919050565b6000601960f81b81306003826104f18c6104ac565b6001600160a01b0316815260208082019290925260409081016000205481516001600160f81b0319968716818501529490951660218501526bffffffffffffffffffffffff19606093841b8116602286015260368501959095528b831b851660568501527f7265766f6b6544656c6567617465000000000000000000000000000000000000606a850152607884018890529186901b90931660988301528051608c81840301815260ac9092019052805191012090506105be876105b78189898987610824565b8585610b03565b50505050505050565b6000601960f81b81306003826105dc8d6104ac565b6001600160a01b0316815260208082019290925260409081016000205490516001600160f81b031995861692810192909252929093166021840152606090811b6bffffffffffffffffffffffff19908116602285015260368401929092528a811b821660568401527f61646444656c6567617465000000000000000000000000000000000000000000606a8401526075830187905285901b16609582015260a9810183905260c9016040516020818303038152906040528051906020012090506103a1886106ad8a8a8a8a87610824565b868686610bfd565b61049a8433858585610bfd565b6000601960f81b81306003826106d78c6104ac565b6001600160a01b03166001600160a01b03168152602001908152602001600020548a878760405160200161071197969594939291906111a8565b6040516020818303038152906040528051906020012090506105be8761073a8989898987610824565b8585610750565b61074c823383610a07565b5050565b838361075b826104ac565b6001600160a01b0316816001600160a01b0316146107ac5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064015b60405180910390fd5b6001600160a01b0386166000818152600260205260408082205490517f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e4926107f9928992899291906112db565b60405180910390a25050506001600160a01b0390921660009081526002602052604090204390555050565b6040805160008082526020820180845284905260ff8716928201929092526060810185905260808101849052819060019060a0016020604051602081039080840390855afa15801561087a573d6000803e3d6000fd5b50505060206040510351905061088f876104ac565b6001600160a01b0316816001600160a01b0316146108ef5760405162461bcd60e51b815260206004820152600d60248201527f6261645f7369676e61747572650000000000000000000000000000000000000060448201526064016107a3565b6001600160a01b03811660009081526003602052604081208054916109138361134b565b9091555090979650505050505050565b848461092e826104ac565b6001600160a01b0316816001600160a01b03161461097a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0387167f18ab6b2ae3d64306c00ce663125f2bd680e441a098de1635bd7ad8b0d44965e486866109b18742611307565b6001600160a01b038c16600090815260026020526040908190205490516109db94939291906112db565b60405180910390a25050506001600160a01b039093166000908152600260205260409020439055505050565b8282610a12826104ac565b6001600160a01b0316816001600160a01b031614610a5e5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b0385811660008181526020818152604080832080547fffffffffffffffffffffffff000000000000000000000000000000000000000016958916958617905560028252918290205482519485529084015290917f38a5a6e68f30ed1ab45860a4afb34bcb2fc00f22ca462d249b8a8d40cda6f7a3910160405180910390a2505050506001600160a01b03166000908152600260205260409020439055565b8383610b0e826104ac565b6001600160a01b0316816001600160a01b031614610b5a5760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b6001600160a01b03868116600081815260016020908152604080832081518084018b90528251808203850181528184018085528151918601919091208652918452828520968a16808652968452828520429081905586865260029094529190932054928990526060810194909452608084015260a0830152907f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f79060c0016107f9565b8484610c08826104ac565b6001600160a01b0316816001600160a01b031614610c545760405162461bcd60e51b81526020600482015260096024820152683130b22fb0b1ba37b960b91b60448201526064016107a3565b610c5e8342611307565b6001600160a01b03888116600081815260016020908152604080832081518084018d9052825180820385018152908301835280519084012084528252808320948a16835293905291909120919091557f5a5084339536bcab65f20799fcc58724588145ca054bd2be626174b27ba156f78686610cda8742611307565b6001600160a01b038c8116600090815260026020908152604091829020548251968752949092169185019190915283015260608201526080016109db565b80356001600160a01b0381168114610d2f57600080fd5b919050565b600082601f830112610d4557600080fd5b813567ffffffffffffffff80821115610d6057610d6061137c565b604051601f8301601f19908116603f01168101908282118183101715610d8857610d8861137c565b81604052838152866020858801011115610da157600080fd5b836020870160208301376000602085830101528094505050505092915050565b803560ff81168114610d2f57600080fd5b600060208284031215610de457600080fd5b610ded82610d18565b9392505050565b60008060408385031215610e0757600080fd5b610e1083610d18565b9150610e1e60208401610d18565b90509250929050565b600080600060608486031215610e3c57600080fd5b610e4584610d18565b925060208401359150610e5a60408501610d18565b90509250925092565b60008060008060808587031215610e7957600080fd5b610e8285610d18565b935060208501359250610e9760408601610d18565b9396929550929360600135925050565b600080600060608486031215610ebc57600080fd5b610ec584610d18565b925060208401359150604084013567ffffffffffffffff811115610ee857600080fd5b610ef486828701610d34565b9150509250925092565b60008060008060808587031215610f1457600080fd5b610f1d85610d18565b935060208501359250604085013567ffffffffffffffff811115610f4057600080fd5b610f4c87828801610d34565b949793965093946060013593505050565b600080600080600060a08688031215610f7557600080fd5b610f7e86610d18565b9450610f8c60208701610dc1565b93506040860135925060608601359150610fa860808701610d18565b90509295509295909350565b60008060008060008060c08789031215610fcd57600080fd5b610fd687610d18565b9550610fe460208801610dc1565b945060408701359350606087013592506080870135915061100760a08801610d18565b90509295509295509295565b600080600080600080600060e0888a03121561102e57600080fd5b61103788610d18565b965061104560208901610dc1565b955060408801359450606088013593506080880135925061106860a08901610d18565b915060c0880135905092959891949750929550565b60008060008060008060c0878903121561109657600080fd5b61109f87610d18565b95506110ad60208801610dc1565b945060408701359350606087013592506080870135915060a087013567ffffffffffffffff8111156110de57600080fd5b6110ea89828a01610d34565b9150509295509295509295565b600080600080600080600060e0888a03121561111257600080fd5b61111b88610d18565b965061112960208901610dc1565b955060408801359450606088013593506080880135925060a088013567ffffffffffffffff81111561115a57600080fd5b6111668a828b01610d34565b92505060c0880135905092959891949750929550565b6000815180845261119481602086016020860161131f565b601f01601f19169290920160200192915050565b60006001600160f81b0319808a1683528089166001840152506bffffffffffffffffffffffff19808860601b166002840152866016840152808660601b166036840152507f7265766f6b654174747269627574650000000000000000000000000000000000604a830152836059830152825161122b81607985016020870161131f565b9190910160790198975050505050505050565b60006001600160f81b0319808b168352808a166001840152506bffffffffffffffffffffffff19808960601b166002840152876016840152808760601b166036840152507f7365744174747269627574650000000000000000000000000000000000000000604a83015284605683015283516112c181607685016020880161131f565b607692019182019290925260960198975050505050505050565b8481526080602082015260006112f4608083018661117c565b6040830194909452506060015292915050565b6000821982111561131a5761131a611366565b500190565b60005b8381101561133a578181015183820152602001611322565b8381111561049a5750506000910152565b600060001982141561135f5761135f611366565b5060010190565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fdfea2646970667358221220216ddc889c83668a16b40556d3dc23f6e1a9fa3333587b228a11c3a0d1fad80b64736f6c63430008060033",AAe={},_Ae={},UJ={_format:bAe,contractName:gAe,sourceName:vAe,abi:xAe,bytecode:wAe,deployedBytecode:EAe,linkReferences:AAe,deployedLinkReferences:_Ae};var SAe=Ht&&Ht.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(G5,"__esModule",{value:!0});G5.getContractForNetwork=x3;G5.configureResolverWithNetworks=RAe;const dU=K0,MAe=jt,aN=Q5,PAe=SAe(UJ),TAe={polygon:"matic","polygon:test":"maticmum",aurora:"aurora-mainnet","linea:goerli":"linea-goerli"},CAe=["mainnet","aurora","linea:goerli","sepolia"];function IAe(r){if(!r)return{};const e=CAe.map(t=>{const n=aN.deployments.find(i=>i.name===t);if(n&&n.name){const s=`https://${TAe[n.name]||n.name}.infura.io/v3/${r}`;return{...n,rpcUrl:s}}}).filter(t=>!!t);return FJ({networks:e})}function x3(r){var n,i;let e=r.provider||((n=r.web3)==null?void 0:n.currentProvider);if(!e)if(r.rpcUrl){const s=r.chainId?r.chainId:(i=aN.deployments.find(o=>o.name===r.name))==null?void 0:i.chainId,a=s&&BigInt(s);e=new dU.JsonRpcProvider(r.rpcUrl,a||"any")}else throw new Error(`invalid_config: No web3 provider could be determined for network ${r.name||r.chainId}`);return dU.ContractFactory.fromSolidity(PAe.default).attach(r.registry||MAe.DEFAULT_REGISTRY_ADDRESS).connect(e)}function hU(r){var n;const e={},t=r.chainId||((n=aN.deployments.find(i=>r.name&&(i.name===r.name||i.description===r.name)))==null?void 0:n.chainId);if(t){r.name&&(e[r.name]=x3(r));const i=typeof t=="bigint"||typeof t=="number"?`0x${t.toString(16)}`:t;e[i]=x3(r)}else(r.provider||r.web3||r.rpcUrl)&&(e[r.name||""]=x3(r));return e}function FJ(r){var e;return{...hU(r),...(e=r.networks)==null?void 0:e.reduce((t,n)=>({...t,...hU(n)}),{})}}function RAe(r={}){const e={...IAe(r.infuraProjectId),...FJ(r)};if(Object.keys(e).length===0)throw new Error("invalid_config: Please make sure to have at least one network");return e}var oN={};Object.defineProperty(oN,"__esModule",{value:!0});oN.logDecoder=OAe;const jJ=jt;function NAe(r,e){const t={};if(r.fragment.inputs.length!==r.args.length)throw new TypeError("malformed event input. wrong number of arguments");return r.fragment.inputs.forEach((n,i)=>{let s=r.args[i];typeof s=="object"&&(s=BigInt(s)),n.type==="bytes32"&&(s=(0,jJ.bytes32toString)(s)),t[n.name]=s}),t._eventName=r.name,t.blockNumber=e,t}function OAe(r,e){return e.map(t=>{const n=r.interface.parseLog({topics:[...t.topics],data:t.data});return n?NAe(n,t.blockNumber):null}).filter(jJ.isDefined)}Object.defineProperty(K5,"__esModule",{value:!0});K5.EthrDidResolver=void 0;K5.getResolver=BAe;const dv=K0,kAe=G5,en=jt,DAe=oN;function BAe(r){return new qJ(r).build()}class qJ{constructor(e){this.contracts=(0,kAe.configureResolverWithNetworks)(e)}async previousChange(e,t,n){return await this.contracts[t].changed(e,{blockTag:n})}async getBlockMetadata(e,t){const n=this.contracts[t];if(!n)throw new Error(`No contract configured for network ${t}`);if(!n.runner)throw new Error(`No runner configured for contract with network ${t}`);if(!n.runner.provider)throw new Error(`No provider configured for runner in contract with network ${t}`);const i=await n.runner.provider.getBlock(e);if(!i)throw new Error(`Block at height ${e} not found`);return{height:i.number.toString(),isoDate:new Date(i.timestamp*1e3).toISOString().replace(".000","")}}async changeLog(e,t,n="latest"){const i=this.contracts[t];if(!i)throw new Error(`No contract configured for network ${t}`);if(!i.runner)throw new Error(`No runner configured for contract with network ${t}`);if(!i.runner.provider)throw new Error(`No provider configured for runner in contract with network ${t}`);const s=i.runner.provider,a=t.startsWith("0x")?t:void 0,o=a?BigInt(a):(await s.getNetwork()).chainId,c=[],{address:u,publicKey:f}=(0,en.interpretIdentifier)(e),l=f;let d=await this.previousChange(u,t,n);for(;d;){const h=d,y=await s.getLogs({address:await i.getAddress(),topics:[null,`0x000000000000000000000000${u.slice(2)}`],fromBlock:d,toBlock:d}),p=(0,DAe.logDecoder)(i,y);p.reverse(),d=null;for(const g of p)c.unshift(g),g.previousChange<h&&(d=g.previousChange)}return{address:u,history:c,controllerKey:l,chainId:o}}wrapDidDocument(e,t,n,i,s,a,o){const c={id:e,verificationMethod:[],authentication:[],assertionMethod:[]};let u=t;const f=[`${e}#controller`],l=[`${e}#controller`];let d=0,h=Number.POSITIVE_INFINITY,y=!1,p=0,g=0,m="";const v={},b={},_={},C={},N={};typeof a=="string"&&(a=-1);for(const $ of i){if(a!==-1&&$.blockNumber>a){h>$.blockNumber&&(h=$.blockNumber);continue}else d<$.blockNumber&&(d=$.blockNumber);const j=$.validTo||BigInt(0),O=`${$._eventName}-${$.delegateType||$.name}-${$.delegate||$.value}`;if(j&&j>=o){if($._eventName===en.eventNames.DIDDelegateChanged){const E=$;switch(p++,E.delegateType){case"sigAuth":v[O]=`${e}#delegate-${p}`,_[O]=`${e}#delegate-${p}`;case"veriKey":C[O]={id:`${e}#delegate-${p}`,type:en.verificationMethodTypes.EcdsaSecp256k1RecoveryMethod2020,controller:e,blockchainAccountId:`eip155:${s}:${E.delegate}`},_[O]=`${e}#delegate-${p}`;break}}else if($._eventName===en.eventNames.DIDAttributeChanged){const E=$,A=E.name.match(/^did\/(pub|svc)\/(\w+)(\/(\w+))?(\/(\w+))?$/);if(A){const w=A[1],P=A[2],k=en.legacyAttrTypes[A[4]]||A[4],D=A[6];switch(w){case"pub":{p++;const T={id:`${e}#delegate-${p}`,type:`${P}${k}`,controller:e};switch(T.type=en.legacyAlgoMap[T.type]||P,D){case null:case void 0:case"hex":T.publicKeyHex=(0,en.strip0x)(E.value);break;case"base64":T.publicKeyBase64=(0,dv.encodeBase64)(E.value);break;case"base58":T.publicKeyBase58=(0,dv.encodeBase58)(E.value);break;case"pem":T.publicKeyPem=(0,dv.toUtf8String)(E.value);break;default:T.value=(0,en.strip0x)(E.value)}C[O]=T,A[4]==="sigAuth"?(v[O]=T.id,_[O]=T.id):A[4]==="enc"?b[O]=T.id:_[O]=T.id;break}case"svc":{g++;const T=(0,dv.toUtf8String)(E.value);try{m=JSON.parse(T)}catch{m=T}N[O]={id:`${e}#service-${g}`,type:P,serviceEndpoint:m};break}}}}}else if($._eventName===en.eventNames.DIDOwnerChanged){const E=$;if(u=E.owner,E.owner===en.nullAddress){y=!0;break}}else $._eventName===en.eventNames.DIDDelegateChanged||$._eventName===en.eventNames.DIDAttributeChanged&&$.name.match(/^did\/pub\//)?p++:$._eventName===en.eventNames.DIDAttributeChanged&&$.name.match(/^did\/svc\//)&&g++,delete v[O],delete _[O],delete C[O],delete N[O]}const x=[{id:`${e}#controller`,type:en.verificationMethodTypes.EcdsaSecp256k1RecoveryMethod2020,controller:e,blockchainAccountId:`eip155:${s}:${u}`}];n&&u==t&&(x.push({id:`${e}#controllerKey`,type:en.verificationMethodTypes.EcdsaSecp256k1VerificationKey2019,controller:e,publicKeyHex:(0,en.strip0x)(n)}),f.push(`${e}#controllerKey`),l.push(`${e}#controllerKey`));const I={...c,verificationMethod:x.concat(Object.values(C)),authentication:f.concat(Object.values(v)),assertionMethod:l.concat(Object.values(_))};return Object.values(N).length>0&&(I.service=Object.values(N)),Object.values(b).length>0&&(I.keyAgreement=Object.values(b)),y?{didDocument:c,deactivated:y,versionId:d,nextVersionId:h}:{didDocument:I,deactivated:y,versionId:d,nextVersionId:h}}async resolve(e,t,n,i){let s={};if(i.accept==="application/did+json")s={};else if(i.accept==="application/did+ld+json"||typeof i.accept!="string")s={"@context":["https://www.w3.org/ns/did/v1","https://w3id.org/security/suites/secp256k1recovery-2020/v2","https://w3id.org/security/v3-unstable"]};else return{didResolutionMetadata:{error:en.Errors.unsupportedFormat,message:`The DID resolver does not support the requested 'accept' format: ${i.accept}`},didDocumentMetadata:{},didDocument:null};const a=t.id.match(en.identifierMatcher);if(!a)return{didResolutionMetadata:{error:en.Errors.invalidDid,message:`Not a valid did:ethr: ${t.id}`},didDocumentMetadata:{},didDocument:null};const o=a[2],c=a[1]?a[1].slice(0,-1):"mainnet";let u=i.blockTag||"latest";if(typeof t.query=="string"){u=new URLSearchParams(t.query).get("versionId")??u;const g=Number.parseInt(u);Number.isNaN(g)?u="latest":u=g}if(!this.contracts[c])return{didResolutionMetadata:{error:en.Errors.unknownNetwork,message:`The DID resolver does not have a configuration for network: ${c}`},didDocumentMetadata:{},didDocument:null};let f=BigInt(Math.floor(new Date().getTime()/1e3));if(typeof u=="number"){const p=await this.getBlockMetadata(u,c);f=BigInt(Date.parse(p.isoDate)/1e3)}const{address:l,history:d,controllerKey:h,chainId:y}=await this.changeLog(o,c,"latest");try{const{didDocument:p,deactivated:g,versionId:m,nextVersionId:v}=this.wrapDidDocument(e,l,h,d,y,u,f),b=g?{deactivated:!0}:{};let _={},C={};if(m!==0){const N=await this.getBlockMetadata(m,c);_={versionId:N.height,updated:N.isoDate}}if(v!==Number.POSITIVE_INFINITY){const N=await this.getBlockMetadata(v,c);C={nextVersionId:N.height,nextUpdate:N.isoDate}}return{didDocumentMetadata:{...b,..._,...C},didResolutionMetadata:{contentType:i.accept??"application/did+ld+json"},didDocument:{...p,...s}}}catch(p){return{didResolutionMetadata:{error:en.Errors.notFound,message:p.toString()},didDocumentMetadata:{},didDocument:null}}}build(){return{ethr:this.resolve.bind(this)}}}K5.EthrDidResolver=qJ;var E9={};Object.defineProperty(E9,"__esModule",{value:!0});E9.EthrDidController=void 0;const dt=K0,$Ae=G5,zi=jt;class LAe{constructor(e,t,n,i="mainnet",s,a,o=zi.DEFAULT_REGISTRY_ADDRESS,c=!0){this.legacyNonce=c;const{address:u,publicKey:f,network:l}=(0,zi.interpretIdentifier)(e),d=l||i;if(t)this.contract=t;else if(s||n!=null&&n.provider||a){const y=s||(n==null?void 0:n.provider);this.contract=(0,$Ae.getContractForNetwork)({name:d,provider:y,registry:o,rpcUrl:a})}else throw new Error(" either a contract instance or a provider or rpcUrl is required to initialize");this.signer=n,this.address=u;let h=d?`${d}:`:"";h in["mainnet:","0x1:"]&&(h=""),this.did=f?`did:ethr:${h}${f}`:`did:ethr:${h}${u}`}encodeAttributeValue(e){return(0,dt.isHexString)(e)?e:(0,dt.toUtf8Bytes)(e)}async getOwner(e,t){return this.contract.identityOwner(e,{blockTag:t})}async attachContract(e){let t=e?await e:await this.getOwner(this.address,"latest");typeof t!="string"&&(t=await e.getAddress());let n;if(this.signer)n=this.signer;else{if(!this.contract)throw new Error("No contract configured");if(!this.contract.runner)throw new Error("No runner configured for contract");if(!this.contract.runner.provider)throw new Error("No provider configured for runner in contract");n=await this.contract.runner.provider.getSigner(t)||this.contract.signer}return this.contract.connect(n)}async changeOwner(e,t={}){const n={gasLimit:123456,...t},i=await this.attachContract(n.from??void 0);return delete n.from,await(await i.changeOwner(this.address,e,n)).wait()}async createChangeOwnerHash(e){const t=await this.getPaddedNonceCompatibility(),n=(0,dt.concat)([zi.MESSAGE_PREFIX,await this.contract.getAddress(),t,this.address,(0,dt.getBytes)((0,dt.concat)([(0,dt.toUtf8Bytes)("changeOwner"),e]))]);return(0,dt.keccak256)(n)}async changeOwnerSigned(e,t,n={}){const i={gasLimit:123456,...n},s=await this.attachContract(i.from??void 0);return delete i.from,await(await s.changeOwnerSigned(this.address,t.sigV,t.sigR,t.sigS,e,i)).wait()}async addDelegate(e,t,n,i={}){const s={gasLimit:123456,...i},a=await this.attachContract(s.from??void 0);delete s.from;const o=(0,zi.stringToBytes32)(e);return await(await a.addDelegate(this.address,o,t,n,s)).wait()}async createAddDelegateHash(e,t,n){const i=await this.getPaddedNonceCompatibility(),s=(0,dt.concat)([zi.MESSAGE_PREFIX,await this.contract.getAddress(),i,this.address,(0,dt.concat)([(0,dt.toUtf8Bytes)("addDelegate"),(0,dt.encodeBytes32String)(e),t,(0,dt.zeroPadValue)((0,dt.toBeHex)(n),32)])]);return(0,dt.keccak256)(s)}async addDelegateSigned(e,t,n,i,s={}){const a={gasLimit:123456,...s},o=await this.attachContract(a.from??void 0);delete a.from;const c=(0,zi.stringToBytes32)(e);return await(await o.addDelegateSigned(this.address,i.sigV,i.sigR,i.sigS,c,t,n,a)).wait()}async revokeDelegate(e,t,n={}){const i={gasLimit:123456,...n};e=e.startsWith("0x")?e:(0,zi.stringToBytes32)(e);const s=await this.attachContract(i.from??void 0);return delete i.from,await(await s.revokeDelegate(this.address,e,t,i)).wait()}async createRevokeDelegateHash(e,t){const n=await this.getPaddedNonceCompatibility(),i=(0,dt.concat)([zi.MESSAGE_PREFIX,await this.contract.getAddress(),n,this.address,(0,dt.getBytes)((0,dt.concat)([(0,dt.toUtf8Bytes)("revokeDelegate"),(0,dt.encodeBytes32String)(e),t]))]);return(0,dt.keccak256)(i)}async revokeDelegateSigned(e,t,n,i={}){const s={gasLimit:123456,...i};e=e.startsWith("0x")?e:(0,zi.stringToBytes32)(e);const a=await this.attachContract(s.from??void 0);return delete s.from,await(await a.revokeDelegateSigned(this.address,n.sigV,n.sigR,n.sigS,e,t,s)).wait()}async setAttribute(e,t,n,i={}){const s={gasLimit:123456,controller:void 0,...i};e=e.startsWith("0x")?e:(0,zi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,dt.hexlify)((0,dt.toUtf8Bytes)(t));const a=await this.attachContract(s.from??void 0);return delete s.from,await(await a.setAttribute(this.address,e,t,n,s)).wait()}async createSetAttributeHash(e,t,n){const i=await this.getPaddedNonceCompatibility(!0),s=this.encodeAttributeValue(t),a=(0,dt.concat)([zi.MESSAGE_PREFIX,await this.contract.getAddress(),i,this.address,(0,dt.concat)([(0,dt.toUtf8Bytes)("setAttribute"),(0,dt.encodeBytes32String)(e),s,(0,dt.zeroPadValue)((0,dt.toBeHex)(n),32)])]);return(0,dt.keccak256)(a)}async setAttributeSigned(e,t,n,i,s={}){const a={gasLimit:123456,controller:void 0,...s};e=e.startsWith("0x")?e:(0,zi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,dt.hexlify)((0,dt.toUtf8Bytes)(t));const o=await this.attachContract(a.from??void 0);return delete a.from,await(await o.setAttributeSigned(this.address,i.sigV,i.sigR,i.sigS,e,t,n,a)).wait()}async revokeAttribute(e,t,n={}){const i={gasLimit:123456,...n};e=e.startsWith("0x")?e:(0,zi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,dt.hexlify)((0,dt.toUtf8Bytes)(t));const s=await this.attachContract(i.from??void 0);return delete i.from,await(await s.revokeAttribute(this.address,e,t,i)).wait()}async createRevokeAttributeHash(e,t){const n=await this.getPaddedNonceCompatibility(!0),i=this.encodeAttributeValue(t),s=(0,dt.concat)([zi.MESSAGE_PREFIX,await this.contract.getAddress(),n,this.address,(0,dt.getBytes)((0,dt.concat)([(0,dt.toUtf8Bytes)("revokeAttribute"),(0,dt.encodeBytes32String)(e),i]))]);return(0,dt.keccak256)(s)}async getPaddedNonceCompatibility(e=!1){let t;return this.legacyNonce&&e?t=this.address:t=await this.getOwner(this.address),(0,dt.zeroPadValue)((0,dt.toBeHex)(await this.contract.nonce(t)),32)}async revokeAttributeSigned(e,t,n,i={}){const s={gasLimit:123456,...i};e=e.startsWith("0x")?e:(0,zi.stringToBytes32)(e),t=t.startsWith("0x")?t:(0,dt.hexlify)((0,dt.toUtf8Bytes)(t));const a=await this.attachContract(s.from??void 0);return delete s.from,await(await a.revokeAttributeSigned(this.address,n.sigV,n.sigR,n.sigS,e,t,s)).wait()}}E9.EthrDidController=LAe;(function(r){var e=Ht&&Ht.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(r,"__esModule",{value:!0}),r.deployments=r.EthereumDIDRegistry=r.Errors=r.interpretIdentifier=r.identifierMatcher=r.verificationMethodTypes=r.attrTypes=r.delegateTypes=r.EthrDidController=r.stringToBytes32=r.bytes32toString=r.getResolver=r.REGISTRY=void 0;const t=K5;Object.defineProperty(r,"getResolver",{enumerable:!0,get:function(){return t.getResolver}});const n=E9;Object.defineProperty(r,"EthrDidController",{enumerable:!0,get:function(){return n.EthrDidController}});const i=jt;Object.defineProperty(r,"bytes32toString",{enumerable:!0,get:function(){return i.bytes32toString}}),Object.defineProperty(r,"REGISTRY",{enumerable:!0,get:function(){return i.DEFAULT_REGISTRY_ADDRESS}}),Object.defineProperty(r,"Errors",{enumerable:!0,get:function(){return i.Errors}}),Object.defineProperty(r,"identifierMatcher",{enumerable:!0,get:function(){return i.identifierMatcher}}),Object.defineProperty(r,"interpretIdentifier",{enumerable:!0,get:function(){return i.interpretIdentifier}}),Object.defineProperty(r,"delegateTypes",{enumerable:!0,get:function(){return i.legacyAlgoMap}}),Object.defineProperty(r,"attrTypes",{enumerable:!0,get:function(){return i.legacyAttrTypes}}),Object.defineProperty(r,"stringToBytes32",{enumerable:!0,get:function(){return i.stringToBytes32}}),Object.defineProperty(r,"verificationMethodTypes",{enumerable:!0,get:function(){return i.verificationMethodTypes}});const s=e(UJ);Object.defineProperty(r,"EthereumDIDRegistry",{enumerable:!0,get:function(){return s.default}});var a=Q5;Object.defineProperty(r,"deployments",{enumerable:!0,get:function(){return a.deployments}})})(LJ);const tc=so(LJ);tc.getResolver;tc.deployments;tc.REGISTRY;tc.bytes32toString;tc.stringToBytes32;tc.EthrDidController;tc.verificationMethodTypes;tc.identifierMatcher;tc.interpretIdentifier;tc.Errors;tc.EthereumDIDRegistry;class UAe{static getInheritanceTree(e){const t=[e],n=i=>{const s=Object.getPrototypeOf(i);s&&s.name&&(t.push(s),n(s))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter(n=>n.target&&t.indexOf(n.target)!==-1):e}}class FAe{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.foreignKeys=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.propertyName===t)}findTree(e){return this.trees.find(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterForeignKeys(e){return this.foreignKeys.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterUniques(e){return this.uniques.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterChecks(e){return this.checks.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterExclusions(e){return this.exclusions.filter(t=>Array.isArray(e)?e.indexOf(t.target)!==-1:t.target===e)}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find(n=>n.target===e&&n.propertyName===t)}filterJoinColumns(e,t){return this.joinColumns.filter(n=>n.target===e&&n.propertyName===t)}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterTransactionRepository(e,t){return this.transactionRepositories.filter(n=>(Array.isArray(e)?e.indexOf(n.target)!==-1:n.target===e)&&n.methodName===t)}filterSingleTableChildren(e){return this.tables.filter(t=>typeof t.target=="function"&&typeof e=="function"&&UAe.isInherited(t.target,e)&&t.type==="entity-child")}findInheritanceType(e){return this.inheritances.find(t=>t.target===e)}findDiscriminatorValue(e){return this.discriminatorValues.find(t=>t.target===e)}filterByTarget(e,t){return e.filter(n=>Array.isArray(t)?t.indexOf(n.target)!==-1:n.target===t)}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(a=>a.propertyName===i.propertyName)||n.push(i))}),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach(i=>{if(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t){const a=n.findIndex(o=>o.propertyName===i.propertyName);if(Array.isArray(t)&&a!==-1&&t.indexOf(i.target)<t.indexOf(n[a].target)){const o=Object.create(n[a]);o.type=i.type,n[a]=o}else a===-1&&n.push(i)}}),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach(i=>{(Array.isArray(t)?t.indexOf(i.target)!==-1:i.target===t)&&(n.find(o=>o.prefix===i.prefix&&o.propertyName===i.propertyName)||n.push(i))}),n}}class VJ{static getGlobalVariable(){return typeof window<"u"?window:typeof globalThis<"u"?globalThis:global}static load(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: require("${e}").`);return""}static pathNormalize(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize("${e}").`);return""}static pathExtname(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname("${e}").`);return""}static pathResolve(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve("${e}").`);return""}static fileExist(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync("${e}").`);return!1}static dotenv(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "${e}" }).`)}static getEnvVariable(e){}static readFileSync(e){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("${e}").`);return null}static appendFileSync(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("${e}").`)}static writeFile(e,t){if(this.type==="browser")throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile("${e}").`);return Promise.reject(null)}static highlightSql(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}}VJ.type="browser";typeof window<"u"&&(window.Buffer=x5.Buffer);typeof globalThis<"u"&&(globalThis.Buffer=x5.Buffer);typeof global<"u"&&typeof require<"u"&&(global.Buffer=require("buffer/").Buffer);class ur{static isObject(e){return e!==null&&typeof e=="object"}static isObjectWithName(e){return e!==null&&typeof e=="object"&&e.name!==void 0}static assign(e,...t){for(const n of t)for(const i of Object.getOwnPropertyNames(n))e[i]=n[i]}static mixedListToArray(e){return e!==null&&typeof e=="object"?Object.keys(e).map(t=>e[t]):e}}class $e extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}class Qp extends $e{constructor(){super("Locking not supported on given driver.")}}class gT extends $e{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}class rr{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return typeof e=="function"&&typeof e.hasId=="function"&&typeof e.save=="function"&&typeof e.useDataSource=="function"}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return typeof e=="object"&&e!==null&&e["@instanceof"]===Symbol.for(t)}}class jAe extends $e{constructor(e,t){super(),this.entityClass=e,this.criteria=t,this.message=`Could not find any entity of type "${this.stringifyTarget(e)}" matching: ${this.stringifyCriteria(t)}`}stringifyTarget(e){return rr.isEntitySchema(e)?e.options.name:typeof e=="function"||ur.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch{}return""+e}}class pU extends $e{constructor(e,t,n){super(`The optimistic lock on entity ${e} failed, version ${t} was expected, but is actually ${n}.`)}}class zJ extends $e{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}class qAe extends $e{constructor(e,t){super(`Primary column ${e.constructor.name}#${t} cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.`)}}class VAe extends $e{constructor(e){super(`Entity "${e.name}" does not have delete date columns.`)}}class A9 extends $e{constructor(){super("OUTPUT or RETURNING clause only supported by PostgreSQL, MariaDB, Microsoft SqlServer or Google Spanner.")}}class Oc extends $e{constructor(e,t){super(e),Object.setPrototypeOf(this,Oc.prototype),this.message=`Property "${e}" was not found in "${t.targetName}". Make sure your query is correct.`}}class zAe extends $e{constructor(e){super(`Entity ${e} does not have version or update date columns.`)}}class HAe extends $e{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}class ib extends $e{constructor(){super("The optimistic lock can be used only with getOne() method.")}}class WAe extends $e{constructor(e){super(),e.length===1?this.message=`Relation "${e[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${e.map(t=>`"${t}"`).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}class KAe extends $e{constructor(){super("An open transaction is required for pessimistic lock.")}}class HJ extends $e{constructor(e,t){super(`Column type for ${e.constructor.name}#${t} is not defined and cannot be guessed. Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.`)}}class GAe extends $e{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}class yU{constructor(e){ur.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new $e(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}class $c{static isAliasProperty(e){if(typeof e!="string"||e.indexOf(".")===-1)return!1;const[t,n]=e.split(".");return!(!t||!n||e.indexOf("(")!==-1||e.indexOf(")")!==-1)}}function QAe(r,e={}){const{segmentLength:t=4,separator:n="__",termLength:i=2}=e;return r.split(n).reduce((o,c)=>{const u=c.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),f=u.length>1?i:t,l=u.map(d=>d.substr(0,f)).join("");return o.push(l),o},[]).join(n)}function ZAe(r,e={}){const t=_Z("sha1");t.update(r,"utf8");const n=t.digest("hex");return e.length&&e.length>0?n.slice(0,e.length):n}class JAe{static isGreaterOrEqual(e,t){if(!e)return!1;const n=mU(e),i=mU(t);for(let s=0;s<n.length&&s<i.length;s++){if(n[s]>i[s])return!0;if(n[s]<i[s])return!1}return!0}}function mU(r){return r.split(".").map(e=>parseInt(e,10))}class Ge{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return JAe.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres","cockroachdb"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const i of Object.keys(n))typeof n[i]>"u"&&delete n[i];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){const i=t&&t.joiner?t.joiner:"_",s=n.length===1?n[0]:n.join(i);if(e&&e>0&&s.length>e){if(t&&t.shorten===!0){const a=QAe(s);if(a.length<e)return a}return ZAe(s,{length:e})}return s}static buildColumnAlias({maxAliasLength:e},t,...n){return typeof t=="string"?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t),this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),s=i.indexOf("/"),a=s!==-1?i.substr(0,s):i;let o=s!==-1?i.substr(s+1):void 0;o&&o.indexOf("?")!==-1&&(o=o.substr(0,o.indexOf("?")));const c=a.lastIndexOf("@"),u=a.substr(0,c),f=a.substr(c+1);let l=u,d="";const h=u.indexOf(":");h!==-1&&(l=u.substr(0,h),d=u.substr(h+1));const[y,p]=f.split(":");return{type:t,host:y,username:decodeURIComponent(l),password:decodeURIComponent(d),port:p?parseInt(p):void 0,database:o||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),i=e.substr(n+2),s=i.indexOf("/"),a=s!==-1?i.substr(0,s):i;let o=s!==-1?i.substr(s+1):void 0,c="",u,f,l,d;const h={};if(o&&o.indexOf("?")!==-1){c=o.substr(o.indexOf("?")+1,o.length);const C=c.split("&");let N,x;C.forEach(I=>{N=I.split("=")[0],x=I.split("=")[1],h[N]=x}),d=h.replicaSet,o=o.substr(0,o.indexOf("?"))}const y=a.lastIndexOf("@"),p=a.substr(0,y),g=a.substr(y+1);let m=p,v="";const b=p.indexOf(":");b!==-1&&(m=p.substr(0,b),v=p.substr(b+1)),d?l=g:[u,f]=g.split(":");const _={type:t,host:u,hostReplicaSet:l,username:decodeURIComponent(m),password:decodeURIComponent(v),port:f?parseInt(f):void 0,database:o||void 0};for(const[C,N]of Object.entries(h))_[C]=N;return _}}class WJ{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,n&&ur.assign(this,n)}get isMany(){return this.isMappingMany!==void 0?this.isMappingMany:this.relation?this.relation.isManyToMany||this.relation.isOneToMany:!1}get isSelected(){if(!this.isSelectedEvaluated){const e=()=>{for(const t of this.queryExpressionMap.selects)if(t.selection===this.alias.name||this.metadata&&this.metadata.columns.find(n=>t.selection===this.alias.name+"."+n.propertyPath))return!0;return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if($c.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if($c.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){const e=()=>{if(!$c.isAliasProperty(this.entityOrProperty))return;const t=this.queryExpressionMap.findAliasByName(this.parentAlias);let n=t.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(n||t.metadata.parentEntityMetadata&&(n=t.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),n))return n;throw new $e(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){if(this.relation)return this.relation.inverseEntityMetadata;if(this.connection.hasMetadata(this.entityOrProperty))return this.connection.getMetadata(this.entityOrProperty);if(this.mapAsEntity&&this.connection.hasMetadata(this.mapAsEntity))return this.connection.getMetadata(this.mapAsEntity)}get junctionAlias(){if(!this.relation)throw new $e("Cannot get junction table for join without relation.");if(typeof this.entityOrProperty!="string")throw new $e("Junction property is not defined.");const e=this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."));return this.relation.isOwning?Ge.buildAlias(this.connection.driver,void 0,e,this.alias.name):Ge.buildAlias(this.connection.driver,void 0,this.alias.name,e)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}class cN{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,ur.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value must be a string representation of alias property");const t=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!t)throw new $e(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return t}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}class uN{constructor(e,t){this.expressionMap=e,ur.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),i=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!i)throw new $e(`Relation with property path ${t} in entity was not found.`);return i}get metadata(){if(!$c.isAliasProperty(this.relationName))throw new $e("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}class fN{constructor(e){var t;this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy),this.timeTravel=((t=e.options)==null?void 0:t.timeTravelQueries)||!1}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&this.options.indexOf("disable-global-order")===-1){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),!t&&typeof e.target=="function"&&(t=e.target.name),!t&&typeof e.target=="string"&&(t=e.target);const n=new yU;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find(n=>n.name===e);if(!t)throw new $e(`"${e}" alias was not found. Maybe you forgot to join it?`);return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new $e("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new $e(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return e}clone(){const e=new fN(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map(t=>t),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach(t=>e.aliases.push(new yU(t))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map(t=>new WJ(this.connection,this,t)),e.relationIdAttributes=this.relationIdAttributes.map(t=>new cN(this,t)),e.relationCountAttributes=this.relationCountAttributes.map(t=>new uN(this,t)),e.wheres=this.wheres.map(t=>({...t})),e.havings=this.havings.map(t=>({...t})),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map(t=>t),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.useIndex=this.useIndex,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.timeTravel=this.timeTravel,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map(t=>({alias:t.alias,queryBuilder:typeof t.queryBuilder=="string"?t.queryBuilder:t.queryBuilder.clone(),options:t.options})),e}}class bU{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}}class vT{static transformFrom(e,t){return Array.isArray(e)?e.slice().reverse().reduce((i,s)=>s.from(i),t):e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce((n,i)=>i.to(n),t):e.to(t)}}class Z5{constructor(e,t,n=!0,i=!1,s,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=i,this._getSql=s,this._objectLiteralParameters=a}get useParameter(){return rr.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return rr.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return rr.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return rr.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(rr.isFindOperator(this._value))return this._value}get getSql(){return rr.isFindOperator(this._value)?this._value.getSql:this._getSql}transformValue(e){this._value instanceof Z5?this._value.transformValue(e):this._value=Array.isArray(this._value)&&this._multipleParameters?this._value.map(t=>e&&vT.transformTo(e,t)):vT.transformTo(e,this._value)}}function YAe(r){return new Z5("in",r,!0,!0)}const XAe=/[.*+\-?^${}()|[\]\\]/g,e_e=r=>r.replace(XAe,"\\$&");class Qr{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,rr.isDataSource(e)?(this.connection=e,this.queryRunner=t,this.expressionMap=new fN(this.connection)):(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone())}static registerQueryBuilderClass(e,t){Qr.queryBuilderRegistry[e]=t}get alias(){if(!this.expressionMap.mainAlias)throw new $e("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){return this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map(n=>({selection:n})):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]),rr.isSelectQueryBuilder(this)?this:Qr.queryBuilderRegistry.SelectQueryBuilder(this)}insert(){return this.expressionMap.queryType="insert",rr.isInsertQueryBuilder(this)?this:Qr.queryBuilderRegistry.InsertQueryBuilder(this)}update(e,t){const n=t||e;if(e=rr.isEntitySchema(e)?e.options.name:e,typeof e=="function"||typeof e=="string"){const i=this.createFromAlias(e);this.expressionMap.setMainAlias(i)}return this.expressionMap.queryType="update",this.expressionMap.valuesSet=n,rr.isUpdateQueryBuilder(this)?this:Qr.queryBuilderRegistry.UpdateQueryBuilder(this)}delete(){return this.expressionMap.queryType="delete",rr.isDeleteQueryBuilder(this)?this:Qr.queryBuilderRegistry.DeleteQueryBuilder(this)}softDelete(){return this.expressionMap.queryType="soft-delete",rr.isSoftDeleteQueryBuilder(this)?this:Qr.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}restore(){return this.expressionMap.queryType="restore",rr.isSoftDeleteQueryBuilder(this)?this:Qr.queryBuilderRegistry.SoftDeleteQueryBuilder(this)}relation(e,t){const n=arguments.length===2?e:void 0,i=arguments.length===2?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=i,n){const s=this.createFromAlias(n);this.expressionMap.setMainAlias(s)}return rr.isRelationQueryBuilder(this)?this:Qr.queryBuilderRegistry.RelationQueryBuilder(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every(s=>!!n.findRelationWithPropertyPath(s))}hasParameter(e){var t;return((t=this.parentQueryBuilder)==null?void 0:t.hasParameter(e))||e in this.expressionMap.parameters}setParameter(e,t){if(typeof t=="function")throw new $e(`Function parameter isn't supported in the parameters. Please check "${e}" parameter.`);if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new $e("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do t=`orm_param_${this.parameterIndex++}`;while(this.hasParameter(t));return this.setParameter(t,e),`:${t}`}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach(t=>{this.expressionMap.nativeParameters[t]=e[t]}),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter(i=>i.discriminatorColumn).map(i=>i.discriminatorValue);n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(e){return new this.constructor(this.connection,e??this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map(t=>t===""?t:this.escape(t)).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new $e('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}else{if(typeof e=="string"){const s=e.substr(0,1)==="("&&e.substr(-1)===")";return this.expressionMap.createAlias({type:"from",name:t,tablePath:s?void 0:e,subQuery:s?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const i=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:i})}}replacePropertyNames(e){return e}replacePropertyNamesForTheWholeQuery(e){const t={};for(const s of this.expressionMap.aliases){if(!s.hasMetadata)continue;const a=this.expressionMap.aliasNamePrefixingEnabled&&s.name?`${s.name}.`:"";t[a]||(t[a]={});for(const o of s.metadata.relations)o.joinColumns.length>0&&(t[a][o.propertyPath]=o.joinColumns[0].databaseName);for(const o of s.metadata.relations){const c=[...o.joinColumns,...o.inverseJoinColumns];for(const u of c){const f=`${o.propertyPath}.${u.referencedColumn.propertyPath}`;t[a][f]=u.databaseName}}for(const o of s.metadata.columns)t[a][o.databaseName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyName]=o.databaseName;for(const o of s.metadata.columns)t[a][o.propertyPath]=o.databaseName}const n=Object.keys(t),i=n.map(s=>e_e(s)).join("|");return n.length>0&&(e=e.replace(new RegExp(`([ =(]|^.{0})${i?"("+i+")":""}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),(...s)=>{let a,o,c;if(i){if(a=s[0],o=s[1],c=s[3],t[s[2]][c])return`${o}${this.escape(s[2].substring(0,s[2].length-1))}.${this.escape(t[s[2]][c])}`}else if(a=s[0],o=s[1],c=s[2],t[""][c])return`${o}${this.escape(t[""][c])}`;return a})),e}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace(/\*\//g,"")} */ `:""}createTimeTravelQuery(){return this.expressionMap.queryType==="select"&&this.expressionMap.timeTravel?` AS OF SYSTEM TIME ${this.expressionMap.timeTravel}`:""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&t!=="1=1"&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&i.deleteDateColumn){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.deleteDateColumn.propertyName:i.deleteDateColumn.propertyName,a=`${this.replacePropertyNames(s)} IS NULL`;e.push(a)}if(i.discriminatorColumn&&i.parentEntityMetadata){const s=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.discriminatorColumn.databaseName:i.discriminatorColumn.databaseName,a=`${this.replacePropertyNames(s)} IN (:...discriminatorColumnValues)`;e.push(a)}}if(this.expressionMap.extraAppendedAndWhereCondition){const i=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(i)}let n="";return n+=this.createTimeTravelQuery(),e.length?e.length===1?n+=` WHERE ${e[0]}`:n+=` WHERE ( ${e.join(" ) AND ( ")} )`:n+="",n}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if(typeof this.expressionMap.returning!="string"&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter(i=>t.indexOf(i)===-1)),t.length){let i=t.map(s=>{const a=this.escape(s.databaseName);return n.options.type==="mssql"?this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update"||this.expressionMap.queryType==="soft-delete"||this.expressionMap.queryType==="restore"?"INSERTED."+a:this.escape(this.getMainTableName())+"."+a:a}).join(", ");return n.options.type==="oracle"&&(i+=" INTO "+t.map(s=>this.createParameter({type:n.columnTypeToNativeParameter(s.type),dir:n.oracle.BIND_OUT})).join(", ")),n.options.type==="mssql"&&(this.expressionMap.queryType==="insert"||this.expressionMap.queryType==="update")&&(i+=" INTO @OutputTable"),i}else if(typeof this.expressionMap.returning=="string")return this.expressionMap.returning;return""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach(t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))}),e}createWhereClausesExpression(e){return e.map((t,n)=>{const i=this.createWhereConditionExpression(t.condition);switch(t.type){case"and":return(n>0?"AND ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`;case"or":return(n>0?"OR ":"")+`${this.connection.options.isolateWhereStatements?"(":""}${i}${this.connection.options.isolateWhereStatements?")":""}`}return i}).join(" ").trim()}createWhereConditionExpression(e,t=!1){if(typeof e=="string")return e;if(Array.isArray(e))return e.length===0?"1=1":e.length===1&&!t?this.createWhereClausesExpression(e):"("+this.createWhereClausesExpression(e)+")";const{driver:n}=this.connection;switch(e.operator){case"lessThan":return`${e.parameters[0]} < ${e.parameters[1]}`;case"lessThanOrEqual":return`${e.parameters[0]} <= ${e.parameters[1]}`;case"arrayContains":return`${e.parameters[0]} @> ${e.parameters[1]}`;case"jsonContains":return`${e.parameters[0]} ::jsonb @> ${e.parameters[1]}`;case"arrayContainedBy":return`${e.parameters[0]} <@ ${e.parameters[1]}`;case"arrayOverlap":return`${e.parameters[0]} && ${e.parameters[1]}`;case"moreThan":return`${e.parameters[0]} > ${e.parameters[1]}`;case"moreThanOrEqual":return`${e.parameters[0]} >= ${e.parameters[1]}`;case"notEqual":return`${e.parameters[0]} != ${e.parameters[1]}`;case"equal":return`${e.parameters[0]} = ${e.parameters[1]}`;case"ilike":return n.options.type==="postgres"||n.options.type==="cockroachdb"?`${e.parameters[0]} ILIKE ${e.parameters[1]}`:`UPPER(${e.parameters[0]}) LIKE UPPER(${e.parameters[1]})`;case"like":return`${e.parameters[0]} LIKE ${e.parameters[1]}`;case"between":return`${e.parameters[0]} BETWEEN ${e.parameters[1]} AND ${e.parameters[2]}`;case"in":return e.parameters.length<=1?"0=1":`${e.parameters[0]} IN (${e.parameters.slice(1).join(", ")})`;case"any":return n.options.type==="cockroachdb"?`${e.parameters[0]}::STRING = ANY(${e.parameters[1]}::STRING[])`:`${e.parameters[0]} = ANY(${e.parameters[1]})`;case"isNull":return`${e.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(e.condition)})`;case"brackets":return`${this.createWhereConditionExpression(e.condition,!0)}`;case"and":return"("+e.parameters.join(" AND ")+")";case"or":return"("+e.parameters.join(" OR ")+")"}throw new TypeError(`Unsupported FindOperator ${Z5.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map(n=>{let i=typeof n.queryBuilder=="string"?n.queryBuilder:"";if(typeof n.queryBuilder!="string"){if(n.queryBuilder.hasCommonTableExpressions())throw new $e(`Nested CTEs aren't supported (CTE: ${n.alias})`);if(i=n.queryBuilder.getQuery(),!this.connection.driver.cteCapabilities.writable&&!rr.isSelectQueryBuilder(n.queryBuilder))throw new $e(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${n.alias})`);this.setParameters(n.queryBuilder.getParameters())}let s=this.escape(n.alias);if(n.options.columnNames){const c=n.options.columnNames.map(u=>this.escape(u));if(rr.isSelectQueryBuilder(n.queryBuilder)&&n.queryBuilder.expressionMap.selects.length&&n.options.columnNames.length!==n.queryBuilder.expressionMap.selects.length)throw new $e(`cte.options.columnNames length (${n.options.columnNames.length}) doesn't match subquery select list length ${n.queryBuilder.expressionMap.selects.length} (CTE: ${n.alias})`);s+=`(${c.join(", ")})`}const a=n.options.recursive&&e?"RECURSIVE":"";let o="";return this.connection.driver.cteCapabilities.materializedHint&&n.options.materialized!==void 0&&(o=n.options.materialized?"MATERIALIZED":"NOT MATERIALIZED"),[a,s,"AS",o,`(${i})`].filter(Boolean).join(" ")}).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map(i=>t.ensureEntityIdMap(i));if(!t.hasMultiplePrimaryKeys){const i=t.primaryColumns[0];if(!i.transformer&&!i.relationMetadata&&!i.embeddedMetadata)return{[i.propertyName]:YAe(n.map(s=>i.getEntityValue(s,!1)))}}return new bU(i=>{for(const s of n)i.orWhere(new bU(a=>a.where(s)))})}getExistsCondition(e){const t=e.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select("1").setOption("disable-global-order");return[`EXISTS (${t.getQuery()})`,t.getParameters()]}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],i=e.split(".");for(;i.length>1;){const o=i[0];if(!(t!=null&&t.hasMetadata))break;if(t.metadata.hasEmbeddedWithPropertyPath(o)){i.unshift(`${i.shift()}.${i.shift()}`);continue}if(t.metadata.hasRelationWithPropertyPath(o)){const c=this.expressionMap.joinAttributes.find(u=>u.relationPropertyPath===o);if(!(c!=null&&c.alias)){const u=n.length>0?`${n.join(".")}.${o}`:o;throw new Error(`Cannot find alias for relation at ${u}`)}t=c.alias,n.push(...o.split(".")),i.shift();continue}break}if(!t)throw new Error(`Cannot find alias for property ${e}`);const s=i.join("."),a=t.metadata.findColumnsWithPropertyPath(s);if(!a.length)throw new Oc(e,t.metadata);return[t,n,a]}createPropertyPath(e,t,n=""){const i=[];for(const s of Object.keys(t)){const a=n?`${n}.${s}`:s;if(t[s]===null||typeof t[s]!="object"||rr.isFindOperator(t[s])){i.push(a);continue}if(e.hasEmbeddedWithPropertyPath(a)){const o=this.createPropertyPath(e,t[s],a);i.push(...o);continue}if(e.hasRelationWithPropertyPath(a)){const o=e.findRelationWithPropertyPath(a);if(o.relationType==="one-to-one"||o.relationType==="many-to-one"){const l=o.joinColumns.map(h=>h.referencedColumn).filter(h=>!!h);if(l.length>0&&l.every(h=>h.getEntityValue(t[s],!1))){i.push(a);continue}}if(o.relationType==="one-to-many"||o.relationType==="many-to-many")throw new Error(`Cannot query across ${o.relationType} for property ${a}`);const c=o.inverseEntityMetadata.primaryColumns;if(c.length>0&&c.every(l=>l.getEntityValue(t[s],!1))){const l=c.map(d=>`${a}.${d.propertyPath}`);i.push(...l);continue}const f=this.createPropertyPath(o.inverseEntityMetadata,t[s]).map(l=>`${a}.${l}`);i.push(...f);continue}i.push(a)}return i}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[i,s,a]=this.findColumnsForPropertyPath(n);for(const o of a){let c=e;for(const l of s){if(!c||!(l in c)){c={};break}c=c[l]}const u=this.expressionMap.aliasNamePrefixingEnabled?`${i.name}.${o.propertyPath}`:o.propertyPath,f=o.getEntityValue(c,!0);yield[u,f]}}}else for(const t of Object.keys(e)){const n=e[t];yield[this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${t}`:t,n]}}getWherePredicateCondition(e,t){var n,i;if(rr.isFindOperator(t)){const s=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const a of t.value)s.push(this.createParameter(a));else s.push(this.createParameter(t.value));if(t.type==="raw")return t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]};if(t.type==="not")return t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...s]};if(t.type==="and"){const a=t.value;return{operator:t.type,parameters:a.map(o=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,o)))}}else if(t.type==="or"){const a=t.value;return{operator:t.type,parameters:a.map(o=>this.createWhereConditionExpression(this.getWherePredicateCondition(e,o)))}}else return{operator:t.type,parameters:[e,...s]}}else if(t===null){const s=((n=this.connection.options.invalidWhereValuesBehavior)==null?void 0:n.null)||"ignore";if(s==="sql-null")return{operator:"isNull",parameters:[e]};if(s==="throw")throw new $e(`Null value encountered in property '${e}' of a where condition. To match with SQL NULL, the IsNull() operator must be used. Set 'invalidWhereValuesBehavior.null' to 'ignore' or 'sql-null' in connection options to skip or handle null values.`)}else if(t===void 0&&(((i=this.connection.options.invalidWhereValuesBehavior)==null?void 0:i.undefined)||"ignore")==="throw")throw new $e(`Undefined value encountered in property '${e}' of a where condition. Set 'invalidWhereValuesBehavior.undefined' to 'ignore' in connection options to skip properties with undefined values.`);return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if(typeof e=="string")return e;if(rr.isBrackets(e)){const i=this.createQueryBuilder();return i.parentQueryBuilder=this,i.expressionMap.mainAlias=this.expressionMap.mainAlias,i.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,i.expressionMap.parameters=this.expressionMap.parameters,i.expressionMap.nativeParameters=this.expressionMap.nativeParameters,i.expressionMap.wheres=[],e.whereFactory(i),{operator:rr.isNotBrackets(e)?"not":"brackets",condition:i.expressionMap.wheres}}if(typeof e=="function")return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const i of t){const s=[];for(const[a,o]of this.getPredicates(i))s.push({type:"and",condition:this.getWherePredicateCondition(a,o)});n.push({type:"or",condition:s})}return n.length===1?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}Qr.queryBuilderRegistry={};class t_e{static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}}class r_e extends Qr{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createDeleteExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const s=await n.query(e,t,!0),a=t_e.from(s);return this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),i&&await n.commitTransaction(),a}catch(s){if(i)try{await n.rollbackTransaction()}catch{}throw s}finally{n!==this.queryRunner&&await n.release()}}from(e,t){e=rr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new A9;return this.expressionMap.returning=e,this}createDeleteExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createWhereExpression(),n=this.createReturningExpression("delete");return n===""?`DELETE FROM ${e}${t}`:this.connection.driver.options.type==="mssql"?`DELETE FROM ${e} OUTPUT ${n}${t}`:this.connection.driver.options.type==="spanner"?`DELETE FROM ${e}${t} THEN RETURN ${n}`:`DELETE FROM ${e}${t} RETURNING ${n}`}}const Yn=[];for(let r=0;r<256;++r)Yn.push((r+256).toString(16).slice(1));function n_e(r,e=0){return(Yn[r[e+0]]+Yn[r[e+1]]+Yn[r[e+2]]+Yn[r[e+3]]+"-"+Yn[r[e+4]]+Yn[r[e+5]]+"-"+Yn[r[e+6]]+Yn[r[e+7]]+"-"+Yn[r[e+8]]+Yn[r[e+9]]+"-"+Yn[r[e+10]]+Yn[r[e+11]]+Yn[r[e+12]]+Yn[r[e+13]]+Yn[r[e+14]]+Yn[r[e+15]]).toLowerCase()}let uA;const i_e=new Uint8Array(16);function s_e(){if(!uA){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");uA=crypto.getRandomValues.bind(crypto)}return uA(i_e)}const a_e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gU={randomUUID:a_e};function o_e(r,e,t){var i;if(gU.randomUUID&&!r)return gU.randomUUID();r=r||{};const n=r.random??((i=r.rng)==null?void 0:i.call(r))??s_e();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,n_e(n)}class vU{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}class xU{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.raw,t}}class lN{constructor(e,t){this.queryRunner=e,this.expressionMap=t}async update(e,t){const n=this.expressionMap.mainAlias.metadata;await Promise.all(t.map(async(i,s)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){this.queryRunner.connection.driver.options.type==="oracle"&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce((c,u,f)=>(c[this.expressionMap.extraReturningColumns[f].databaseName]=u[0],c),{}));const a=Array.isArray(e.raw)?e.raw[s]:e.raw,o=this.queryRunner.connection.driver.createGeneratedMap(n,a);o&&(this.queryRunner.manager.merge(n.target,i,o),e.generatedMaps.push(o))}else{const a=this.expressionMap.extraReturningColumns;if(a.length>0){const o=this.expressionMap.mainAlias.metadata.getEntityIdMap(i);if(!o)throw new $e("Cannot update entity because entity id is not set in the entity.");const c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(u=>n.targetName+"."+u.propertyPath)).addSelect(a.map(u=>n.targetName+"."+u.propertyPath)).from(n.target,n.targetName).where(o).withDeleted().setOption("create-pojo").getOne();c&&(this.queryRunner.manager.merge(n.target,i,c),e.generatedMaps.push(c))}}}))}async insert(e,t){const n=this.expressionMap.mainAlias.metadata;let i=n.getInsertionReturningColumns();const s=this.queryRunner.connection.driver.isReturningSqlSupported("insert");i=i.filter(o=>o.isGenerated?s===!0:!0);const a=t.map((o,c)=>{Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(this.queryRunner.connection.driver.options.type==="oracle"?e.raw=e.raw.reduce((l,d,h)=>(l[this.expressionMap.extraReturningColumns[h].databaseName]=d[0],l),{}):this.queryRunner.connection.driver.options.type==="spanner"&&(e.raw=e.raw[0]));const u=Array.isArray(e.raw)?e.raw[c]:e.raw,f=this.queryRunner.connection.driver.createGeneratedMap(n,u,c,t.length)||{};return c in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(n.target,f,this.expressionMap.locallyGenerated[c]),this.queryRunner.manager.merge(n.target,o,f),f});if(i.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const o=t.map(u=>{const f=n.getEntityIdMap(u);if(!f)throw new $e("Cannot update entity because entity id is not set in the entity.");return f}),c=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map(u=>n.targetName+"."+u.propertyPath)).addSelect(i.map(u=>n.targetName+"."+u.propertyPath)).from(n.target,n.targetName).where(o).setOption("create-pojo").getMany();t.forEach((u,f)=>{this.queryRunner.manager.merge(n.target,a[f],c[f]),this.queryRunner.manager.merge(n.target,u,c[f])})}t.forEach((o,c)=>{const u=n.getEntityIdMap(o);e.identifiers.push(u),e.generatedMaps.push(a[c])})}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion)}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter(e=>e.asExpression!==void 0||e.isUpdateDate||e.isVersion||e.isDeleteDate)}}class c_e extends Qr{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createInsertExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.getValueSets();if(e.length===0)return new xU;const t=this.obtainQueryRunner();let n=!1;try{if(this.expressionMap.useTransaction===!0&&t.isTransactionActive===!1&&(await t.startTransaction(),n=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const y=new vU;e.forEach(p=>{t.broadcaster.broadcastBeforeInsertEvent(y,this.expressionMap.mainAlias.metadata,p)}),await y.wait()}let i=null,s=null;const a=new lN(t,this.expressionMap),o=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const y of this.expressionMap.returning)o.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(y));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&(e.length>1&&this.connection.driver.options.type==="oracle"||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),o.push(...this.expressionMap.extraReturningColumns.filter(y=>!o.includes(y)))),o.length>0&&this.connection.driver.options.type==="mssql"&&(i=this.connection.driver.buildTableVariableDeclaration("@OutputTable",o),s="SELECT * FROM @OutputTable");const[c,u]=this.getQueryAndParameters(),l=[i,c,s].filter(y=>y!=null).join(`;

`),d=await t.query(l,u,!0),h=xU.from(d);if(this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&await a.insert(h,e),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata){const y=new vU;e.forEach(p=>{t.broadcaster.broadcastAfterInsertEvent(y,this.expressionMap.mainAlias.metadata,p)}),await y.wait()}return n&&await t.commitTransaction(),h}catch(i){if(n)try{await t.rollbackTransaction()}catch{}throw i}finally{t!==this.queryRunner&&await t.release()}}into(e,t){e=rr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e);return this.expressionMap.setMainAlias(n),this.expressionMap.insertColumns=t||[],this}values(e){return this.expressionMap.valuesSet=e,this}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new A9;return this.expressionMap.returning=e,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}onConflict(e){return this.expressionMap.onConflict=e,this}orIgnore(e=!0){return this.expressionMap.onIgnore=!!e,this}orUpdate(e,t,n){const{where:i,parameters:s}=(n==null?void 0:n.overwriteCondition)??{};let a;if(i){const o=this.getWhereCondition(i);(Array.isArray(o)?o.length!==0:o)&&(a=[{type:"simple",condition:o}])}return s&&this.setParameters(s),Array.isArray(e)?(this.expressionMap.onUpdate={overwrite:e,conflict:t,skipUpdateIfNoValuesChanged:n==null?void 0:n.skipUpdateIfNoValuesChanged,indexPredicate:n==null?void 0:n.indexPredicate,upsertType:n==null?void 0:n.upsertType,overwriteCondition:a},this):(this.expressionMap.onUpdate={conflict:e==null?void 0:e.conflict_target,columns:e==null?void 0:e.columns,overwrite:e==null?void 0:e.overwrite,skipUpdateIfNoValuesChanged:n==null?void 0:n.skipUpdateIfNoValuesChanged,upsertType:n==null?void 0:n.upsertType,overwriteCondition:a},this)}createInsertExpression(){var o,c,u,f;if((this.expressionMap.onUpdate||this.expressionMap.onIgnore)&&(((o=this.expressionMap.onUpdate)==null?void 0:o.upsertType)??"merge-into")==="merge-into"&&this.connection.driver.supportedUpsertTypes.includes("merge-into"))return this.createMergeExpression();const e=this.getTableName(this.getMainTableName()),t=this.alias!==this.getMainTableName()?this.escape(this.alias):e,n=this.createValuesExpression(),i=this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),s=this.createColumnNamesExpression();let a="INSERT ";if(((c=this.expressionMap.onUpdate)==null?void 0:c.upsertType)==="primary-key"&&(a="UPSERT "),(Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+=`${this.expressionMap.onIgnore?" IGNORE ":""}`),a+=`INTO ${e}`,this.alias!==this.getMainTableName()&&Ge.isPostgresFamily(this.connection.driver)&&(a+=` AS "${this.alias}"`),s?a+=`(${s})`:!n&&(Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(a+="()"),i&&this.connection.driver.options.type==="mssql"&&(a+=` OUTPUT ${i}`),n?(this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="sap")&&this.getValueSets().length>1?a+=` ${n}`:a+=` VALUES ${n}`:Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"?a+=" VALUES ()":a+=" DEFAULT VALUES",((u=this.expressionMap.onUpdate)==null?void 0:u.upsertType)!=="primary-key"){if(this.connection.driver.supportedUpsertTypes.includes("on-conflict-do-update")){if(this.expressionMap.onIgnore)a+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)a+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:l,columns:d,conflict:h,skipUpdateIfNoValuesChanged:y,indexPredicate:p}=this.expressionMap.onUpdate;let g="ON CONFLICT";if(Array.isArray(h)){if(g+=` ( ${h.map(v=>this.escape(v)).join(", ")} )`,p&&!Ge.isPostgresFamily(this.connection.driver))throw new $e("indexPredicate option is not supported by the current database driver");p&&Ge.isPostgresFamily(this.connection.driver)&&(g+=` WHERE ( ${p} )`)}else h&&(g+=` ON CONSTRAINT ${this.escape(h)}`);const m=[];if(Array.isArray(l)?m.push(...l.map(v=>`${this.escape(v)} = EXCLUDED.${this.escape(v)}`)):d&&m.push(...d.map(v=>`${this.escape(v)} = :${v}`)),m.length>0&&(a+=` ${g} DO UPDATE SET `,m.push(...this.expressionMap.mainAlias.metadata.columns.filter(v=>v.isUpdateDate&&!(l!=null&&l.includes(v.databaseName))&&!(this.connection.driver.options.type==="oracle"&&this.getValueSets().length>1||Ge.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")).map(v=>`${this.escape(v.databaseName)} = DEFAULT`)),a+=m.join(", ")),Array.isArray(l)&&y){(f=this.expressionMap.onUpdate).overwriteCondition??(f.overwriteCondition=[]);const v=l.map(b=>({type:"or",condition:`${t}.${this.escape(b)} IS DISTINCT FROM EXCLUDED.${this.escape(b)}`}));this.expressionMap.onUpdate.overwriteCondition.push({type:"and",condition:v})}Ge.isPostgresFamily(this.connection.driver)&&this.expressionMap.onUpdate.overwriteCondition&&this.expressionMap.onUpdate.overwriteCondition.length>0&&(a+=` WHERE ${this.createUpsertConditionExpression()}`)}}else if(this.connection.driver.supportedUpsertTypes.includes("on-duplicate-key-update")){if(this.expressionMap.onUpdate){const{overwrite:l,columns:d}=this.expressionMap.onUpdate;Array.isArray(l)?(a+=" ON DUPLICATE KEY UPDATE ",a+=l.map(h=>`${this.escape(h)} = VALUES(${this.escape(h)})`).join(", "),a+=" "):Array.isArray(d)&&(a+=" ON DUPLICATE KEY UPDATE ",a+=d.map(h=>`${this.escape(h)} = :${h}`).join(", "),a+=" ")}}else if(this.expressionMap.onUpdate)throw new $e("onUpdate is not supported by the current database driver")}return i&&(Ge.isPostgresFamily(this.connection.driver)||this.connection.driver.options.type==="oracle"||this.connection.driver.options.type==="cockroachdb"||Ge.isMySQLFamily(this.connection.driver))&&(a+=` RETURNING ${i}`),i&&this.connection.driver.options.type==="spanner"&&(a+=` THEN RETURN ${i}`),this.connection.driver.options.type==="mssql"&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter(l=>this.expressionMap.insertColumns.length>0?this.expressionMap.insertColumns.indexOf(l.propertyPath)!==-1:l.isInsert).some(l=>this.isOverridingAutoIncrementBehavior(l))&&(a=`SET IDENTITY_INSERT ${e} ON; ${a}; SET IDENTITY_INSERT ${e} OFF`),a}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter(e=>this.expressionMap.insertColumns.length?this.expressionMap.insertColumns.indexOf(e.propertyPath)!==-1:!(!e.isInsert||e.isGenerated&&e.generationStrategy==="increment"&&this.connection.driver.options.type!=="spanner"&&this.connection.driver.options.type!=="oracle"&&!Ge.isSQLiteFamily(this.connection.driver)&&!Ge.isMySQLFamily(this.connection.driver)&&this.connection.driver.options.type!=="aurora-mysql"&&!(this.connection.driver.options.type==="mssql"&&this.isOverridingAutoIncrementBehavior(e)))):[]}createColumnNamesExpression(){const e=this.getInsertedColumns();if(e.length>0)return e.map(t=>this.escape(t.databaseName)).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const t=this.getValueSets();if(t.length===1)return Object.keys(t[0]).map(n=>this.escape(n)).join(", ")}return this.expressionMap.insertColumns.map(t=>this.escape(t)).join(", ")}createValuesExpression(){const e=this.getValueSets(),t=this.getInsertedColumns();if(t.length>0){let n="";return e.forEach((i,s)=>{t.forEach((a,o)=>{o===0&&(this.connection.driver.options.type==="oracle"&&e.length>1||this.connection.driver.options.type==="sap"&&e.length>1?n+=" SELECT ":n+="("),n+=this.createColumnValueExpression(e,s,a),o===t.length-1?s===e.length-1?["oracle","sap"].includes(this.connection.driver.options.type)&&e.length>1?n+=" FROM "+this.connection.driver.dummyTableName:n+=")":["oracle","sap"].includes(this.connection.driver.options.type)&&e.length>1?n+=" FROM "+this.connection.driver.dummyTableName+" UNION ALL ":n+="), ":n+=", "})}),n==="()"?"":n}else{let n="";return e.forEach((i,s)=>{Object.keys(i).forEach((o,c)=>{c===0&&(n+="(");const u=i[o];typeof u=="function"?n+=u():u===void 0?this.connection.driver.options.type==="oracle"&&e.length>1||Ge.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?n+="NULL":n+="DEFAULT":u===null&&this.connection.driver.options.type==="spanner"||(n+=this.createParameter(u)),c===Object.keys(i).length-1?s===e.length-1?n+=")":n+="), ":n+=", "})}),n==="()"?"":n}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(ur.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new HAe}isOverridingAutoIncrementBehavior(e){return e.isPrimary&&e.isGenerated&&e.generationStrategy==="increment"&&this.getValueSets().some(t=>e.getEntityValue(t)!==void 0&&e.getEntityValue(t)!==null)}createMergeExpression(){var f,l,d;if(!this.connection.driver.supportedUpsertTypes.includes("merge-into"))throw new $e('Upsert type "merge-into" is not supported by current database driver');if((f=this.expressionMap.onUpdate)!=null&&f.upsertType&&this.expressionMap.onUpdate.upsertType!=="merge-into")throw new $e(`Upsert type "${this.expressionMap.onUpdate.upsertType}" is not supported by current database driver`);const e=this.getTableName(this.getMainTableName()),t=this.escape(this.alias),n=this.getInsertedColumns(),i=this.createColumnNamesExpression();let s=`MERGE INTO ${e} ${this.escape(this.alias)}`;const a=this.escape("mergeIntoSource"),o=this.createMergeIntoSourceExpression(a);if(s+=` ${o}`,this.expressionMap.onIgnore){const h=n.find(y=>y.isPrimary);h?s+=` ON (${t}.${this.escape(h.databaseName)} = ${a}.${this.escape(h.databaseName)})`:s+=`ON (${this.expressionMap.mainAlias.metadata.uniques.map(y=>`(${y.columns.map(p=>`${t}.${this.escape(p.databaseName)} = ${a}.${this.escape(p.databaseName)}`).join(" AND ")})`).join(" OR ")})`}else if(this.expressionMap.onUpdate){const{conflict:h,indexPredicate:y}=this.expressionMap.onUpdate;if(y)throw new $e('indexPredicate option is not supported by upsert type "merge-into"');Array.isArray(h)?s+=` ON (${h.map(p=>`${t}.${this.escape(p)} = ${a}.${this.escape(p)}`).join(" AND ")})`:h?s+=` ON (${t}.${this.escape(h)} = ${a}.${this.escape(h)})`:s+=`ON (${this.expressionMap.mainAlias.metadata.uniques.map(p=>`(${p.columns.map(g=>`${t}.${this.escape(g.databaseName)} = ${a}.${this.escape(g.databaseName)}`).join(" AND ")})`).join(" OR ")})`}if(this.expressionMap.onUpdate){const{overwrite:h,columns:y,conflict:p,skipUpdateIfNoValuesChanged:g}=this.expressionMap.onUpdate;let m="";if(Array.isArray(h)&&(m+=(l=h||y)==null?void 0:l.filter(b=>!(p!=null&&p.includes(b))).map(b=>`${t}.${this.escape(b)} = ${a}.${this.escape(b)}`).join(", ")),Array.isArray(h)&&g){(d=this.expressionMap.onUpdate).overwriteCondition??(d.overwriteCondition=[]);const b=h.map(_=>({type:"or",condition:{operator:"notEqual",parameters:[`${t}.${this.escape(_)}`,`${a}.${this.escape(_)}`]}}));this.expressionMap.onUpdate.overwriteCondition.push({type:"and",condition:b})}const v=this.createUpsertConditionExpression();m.trim()&&((this.connection.driver.options.type==="mssql"||this.connection.driver.options.type==="sap")&&v!=""?s+=` WHEN MATCHED AND ${v} THEN UPDATE SET ${m}`:(s+=` WHEN MATCHED THEN UPDATE SET ${m}`,v!=""&&(s+=` WHERE ${v}`)))}const c=this.createMergeIntoInsertValuesExpression(a),u=this.connection.driver.options.type==="mssql"?this.createReturningExpression("insert"):null;return s+=" WHEN NOT MATCHED THEN INSERT",i&&(s+=`(${i})`),c&&(s+=` VALUES ${c}`),u&&this.connection.driver.options.type==="mssql"&&(s+=` OUTPUT ${u}`),this.connection.driver.options.type==="mssql"&&(s+=";"),s}createMergeIntoSourceExpression(e){const t=this.getValueSets(),n=this.getInsertedColumns();let i="USING (";if(n.length>0)this.connection.driver.options.type==="mssql"&&(i+="VALUES "),t.forEach((s,a)=>{n.forEach((o,c)=>{c===0&&(this.connection.driver.options.type==="mssql"?i+="(":i+="SELECT ");const u=o.getEntityValue(s);u===void 0&&!(o.isGenerated&&o.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported())?o.default!==void 0&&o.default!==null?i+=this.connection.driver.normalizeDefault(o):i+="NULL":u===null?i+="NULL":i+=this.createColumnValueExpression(t,a,o),this.connection.driver.options.type!=="mssql"&&(i+=` AS ${this.escape(o.databaseName)}`),c===n.length-1?a===t.length-1?["oracle","sap"].includes(this.connection.driver.options.type)?i+=" FROM "+this.connection.driver.dummyTableName:this.connection.driver.options.type==="mssql"&&(i+=")"):["oracle","sap"].includes(this.connection.driver.options.type)&&t.length>1?i+=" FROM "+this.connection.driver.dummyTableName+" UNION ALL ":this.connection.driver.options.type==="mssql"?i+="), ":i+=" UNION ALL ":i+=", "})});else throw new $e('Upsert type "merge-into" is not supported without metadata tables');return i+=`) ${e}`,this.connection.driver.options.type==="mssql"&&(i+=` (${n.map(s=>this.escape(s.databaseName)).join(", ")})`),i}createMergeIntoInsertValuesExpression(e){const t=this.getInsertedColumns();let n="";if(t.length>0)t.forEach((i,s)=>{s===0&&(n+="("),i.isGenerated&&i.generationStrategy==="uuid"&&this.connection.driver.isUUIDGenerationSupported()||i.isGenerated&&i.generationStrategy!=="uuid"?n+="DEFAULT":n+=`${e}.${this.escape(i.databaseName)}`,s===t.length-1?n+=")":n+=", "});else throw new $e('Upsert type "merge-into" is not supported without metadata tables');return n==="()"?"":n}createUpsertConditionExpression(){if(!this.expressionMap.onUpdate.overwriteCondition)return"";const e=[],t=this.createWhereClausesExpression(this.expressionMap.onUpdate.overwriteCondition);if(t.length>0&&t!=="1=1"&&e.push(t),this.expressionMap.mainAlias.hasMetadata){const i=this.expressionMap.mainAlias.metadata;if(this.expressionMap.queryType==="select"&&!this.expressionMap.withDeleted&&i.deleteDateColumn){const a=`${this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.deleteDateColumn.propertyName:i.deleteDateColumn.propertyName} IS NULL`;e.push(a)}if(i.discriminatorColumn&&i.parentEntityMetadata){const a=`${this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+i.discriminatorColumn.databaseName:i.discriminatorColumn.databaseName} IN (:...discriminatorColumnValues)`;e.push(a)}}if(this.expressionMap.extraAppendedAndWhereCondition){const i=this.expressionMap.extraAppendedAndWhereCondition;e.push(i)}let n="";return e.length?e.length===1?n+=`${e[0]}`:n+=`( ${e.join(" ) AND ( ")} )`:n+="",n}createColumnValueExpression(e,t,n){const i=e[t];let s="",a=n.getEntityValue(i);if(typeof a!="function"&&(a=this.connection.driver.preparePersistentValue(a,n)),n.isVersion&&a===void 0)s+="1";else if(n.isDiscriminator)s+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(n.isGenerated&&n.generationStrategy==="uuid"&&!this.connection.driver.isUUIDGenerationSupported()&&a===void 0)a=o_e(),s+=this.createParameter(a),t in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[t]={}),n.setEntityValue(this.expressionMap.locallyGenerated[t],a);else if(a===void 0)this.connection.driver.options.type==="oracle"&&e.length>1||Ge.isSQLiteFamily(this.connection.driver)||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"?n.default!==void 0&&n.default!==null?s+=this.connection.driver.normalizeDefault(n):this.connection.driver.options.type==="spanner"&&n.isGenerated&&n.generationStrategy==="uuid"?s+="GENERATE_UUID()":s+="NULL":s+="DEFAULT";else if(a===null&&(this.connection.driver.options.type==="spanner"||this.connection.driver.options.type==="oracle"))s+="NULL";else if(typeof a=="function")s+=a();else{this.connection.driver.options.type==="mssql"&&(a=this.connection.driver.parametrizeValue(n,a));const o=this.createParameter(a);if((Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.includes(n.type)){const u=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";n.srid!=null?s+=`${u}(${o}, ${n.srid})`:s+=`${u}(${o})`}else Ge.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.includes(n.type)?n.srid!=null?s+=`ST_SetSRID(ST_GeomFromGeoJSON(${o}), ${n.srid})::${n.type}`:s+=`ST_GeomFromGeoJSON(${o})::${n.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.includes(n.type)?s+=n.type+"::STGeomFromText("+o+", "+(n.srid||"0")+")":s+=o}return s}}class wU{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async update(e){const t=this.expressionMap.relationMetadata;if(t.isManyToOne||t.isOneToOneOwner){const n=t.joinColumns.reduce((i,s)=>{const a=ur.isObject(e)?s.referencedColumn.getEntityValue(e):e;return s.setEntityValue(i,a),i},{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(t.entityMetadata.target).set(n).whereInIds(this.expressionMap.of).execute()}else if((t.isOneToOneNotOwner||t.isOneToMany)&&e===null){const n={};t.inverseRelation.joinColumns.forEach(c=>{n[c.propertyName]=null});const i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],s={},a=[];i.forEach((c,u)=>{t.inverseRelation.joinColumns.map((f,l)=>{const d="joinColumn_"+u+"_"+l;s[d]=ur.isObject(c)?f.referencedColumn.getEntityValue(c):c,a.push(`${f.propertyPath} = :${d}`)})});const o=a.map(c=>"("+c+")").join(" OR ");if(!o)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(n).where(o).setParameters(s).execute()}else if(t.isOneToOneNotOwner||t.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new $e("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const n=this.expressionMap.of,i=t.inverseRelation.joinColumns.reduce((s,a)=>{const o=ur.isObject(n)?a.referencedColumn.getEntityValue(n):n;return a.setEntityValue(s,o),s},{});if(!e||Array.isArray(e)&&!e.length)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(i).whereInIds(e).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],s=Array.isArray(e)?e:[e],a=t.isManyToManyOwner?i:s,o=t.isManyToManyOwner?s:i,c=[];if(a.forEach(u=>{o.forEach(f=>{const l={};n.ownerColumns.forEach(d=>{l[d.databaseName]=ur.isObject(u)?d.referencedColumn.getEntityValue(u):u}),n.inverseColumns.forEach(d=>{l[d.databaseName]=ur.isObject(f)?d.referencedColumn.getEntityValue(f):f}),c.push(l)})}),!c.length)return;this.queryBuilder.connection.driver.options.type==="oracle"||this.queryBuilder.connection.driver.options.type==="sap"?await Promise.all(c.map(u=>this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(u).execute())):await this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(c).execute()}}}class u_e{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async remove(e){const t=this.expressionMap.relationMetadata;if(t.isOneToMany){const n=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(e)?e:[e],s={};t.inverseRelation.joinColumns.forEach(u=>{s[u.propertyName]=null});const a={},o=[];n.forEach((u,f)=>{o.push(...i.map((l,d)=>[...t.inverseRelation.joinColumns.map((h,y)=>{const p="joinColumn_"+f+"_"+d+"_"+y;return a[p]=ur.isObject(u)?h.referencedColumn.getEntityValue(u):u,`${h.propertyPath} = :${p}`}),...t.inverseRelation.entityMetadata.primaryColumns.map((h,y)=>{const p="primaryColumn_"+d+"_"+d+"_"+y;return a[p]=ur.isObject(l)?h.getEntityValue(l):l,`${h.propertyPath} = :${p}`})].join(" AND ")))});const c=o.map(u=>"("+u+")").join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(s).where(c).setParameters(a).execute()}else{const n=t.junctionEntityMetadata,i=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],s=Array.isArray(e)?e:[e],a=t.isManyToManyOwner?i:s,o=t.isManyToManyOwner?s:i,c={},u=[];a.forEach((l,d)=>{u.push(...o.map((h,y)=>[...n.ownerColumns.map((p,g)=>{const m="firstValue_"+d+"_"+y+"_"+g;return c[m]=ur.isObject(l)?p.referencedColumn.getEntityValue(l):l,`${p.databaseName} = :${m}`}),...n.inverseColumns.map((p,g)=>{const m="secondValue_"+d+"_"+y+"_"+g;return c[m]=ur.isObject(h)?p.referencedColumn.getEntityValue(h):h,`${p.databaseName} = :${m}`})].join(" AND ")))});const f=u.map(l=>"("+l+")").join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(n.tableName).where(f).setParameters(c).execute()}}}class f_e extends Qr{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(e){return this.expressionMap.of=e,this}async set(e){const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new $e("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToMany||t.isOneToMany)throw new $e(`Set operation is only supported for many-to-one and one-to-one relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .add() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!ur.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new $e('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new wU(this,this.expressionMap).update(e)}async add(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new $e("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new $e(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!ur.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new $e('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new wU(this,this.expressionMap).update(e)}async remove(e){if(Array.isArray(e)&&e.length===0)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new $e("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new $e(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set(null) method instead.`);return new u_e(this,this.expressionMap).remove(e)}async addAndRemove(e,t){await this.remove(t),await this.add(e)}async loadOne(){return this.loadMany().then(e=>e[0])}async loadMany(){let e=this.expressionMap.of;if(!ur.isObject(e)){const t=this.expressionMap.mainAlias.metadata;if(t.hasMultiplePrimaryKeys)throw new $e("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");e=t.primaryColumns[0].createValueMap(e)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,e,this.queryRunner)}}class $t{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),(n,i)=>e.slice(i*t,i*t+t))}static splitClassesAndStrings(e){return[e.filter(t=>typeof t!="string"),e.filter(t=>typeof t=="string")]}static groupBy(e,t){return e.reduce((n,i)=>{const s=t(i);let a=n.find(o=>o.id===s);return a||(a={id:s,items:[]},n.push(a)),a.items.push(i),n},[])}static uniq(e,t){return e.reduce((n,i)=>{let s=!1;if(typeof t=="function"){const a=t(i);s=!!n.find(o=>t(o)===a)}else typeof t=="string"?s=!!n.find(a=>a[t]===i[t]):s=n.indexOf(i)!==-1;return s||n.push(i),n},[])}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)$t.merge(e,n);return e}static cloneObject(e){return e==null?e:Object.assign(Object.create(Object.getPrototypeOf(e)),e)}static deepCompare(...e){let t,n,i,s;if(e.length<1)return!0;for(t=1,n=e.length;t<n;t++)if(i=[],s=[],!$t.compare2Objects(i,s,e[0],e[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let i=0,s=n.length;i<s;i++)e=e[n[i]];return e}static replaceEmptyObjectsWithBooleans(e){for(const t in e)e[t]&&typeof e[t]=="object"&&(Object.keys(e[t]).length===0?e[t]=!0:$t.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){const t={};for(const n of e){const i=n.split(".");if(!i.length)continue;(!t[i[0]]||t[i[0]]===!0)&&(t[i[0]]={});let s=t[i[0]];for(const[a,o]of i.entries())a!==0&&(s[o]?s=s[o]:a===i.length-1?(s[o]={},s=null):(s[o]={},s=s[o]))}return $t.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return e==null||t===void 0||t===null?!1:(typeof e.id=="string"&&typeof t.id=="string"||typeof e.id=="number"&&typeof t.id=="number")&&Object.keys(e).length===1&&Object.keys(t).length===1?e.id===t.id:$t.deepCompare(e,t)}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e==="true"||e==="1":typeof e=="number"?e>0:!1}static isArraysEqual(e,t){return e.length!==t.length?!1:e.every(n=>t.includes(n))}static areMutuallyExclusive(...e){return!e.some(n=>{const i=e.filter(s=>s!==n);return n.some(s=>i.some(a=>a.includes(s)))})}static parseSqlCheckExpression(e,t){const n=e.match(new RegExp(`"${t}" varchar CHECK\\s*\\(\\s*"${t}"\\s+IN\\s*`));if(n&&n.index){const s=e.substring(n.index+n[0].length);let a="",o="";const c=[];for(let u=0;u<s.length;u++){const f=s[u];switch(f){case",":a==""?(c.push(o),o=""):o+=f;break;case"'":a==f?s[u+1]===f?(o+=f,u+=1):a="":a=f;break;case")":if(a=="")return c.push(o),c;o+=f;break;default:a!=""&&(o+=f)}}}}static isCriteriaNullOrEmpty(e){return e==null||e===""||Array.isArray(e)&&e.length===0||$t.isPlainObject(e)&&Object.keys(e).length===0}static isSinglePrimitiveCriteria(e){return typeof e=="string"||typeof e=="number"||e instanceof Date}static isPrimitiveCriteria(e){return Array.isArray(e)?e.every(t=>$t.isSinglePrimitiveCriteria(t)):$t.isSinglePrimitiveCriteria(e)}static compare2Objects(e,t,n,i){let s;if(Number.isNaN(n)&&Number.isNaN(i)||n===i)return!0;if(n===null||i===null||n===void 0||i===void 0)return!1;if((typeof n.equals=="function"||typeof n.equals=="function")&&n.equals(i))return!0;if(typeof n=="function"&&typeof i=="function"||n instanceof Date&&i instanceof Date||n instanceof RegExp&&i instanceof RegExp||typeof n=="string"&&typeof i=="string"||typeof n=="number"&&typeof i=="number")return n.toString()===i.toString();if(!(typeof n=="object"&&typeof i=="object")||Object.prototype.isPrototypeOf.call(n,i)||Object.prototype.isPrototypeOf.call(i,n)||n.constructor!==i.constructor||n.prototype!==i.prototype||e.indexOf(n)>-1||t.indexOf(i)>-1)return!1;for(s in i){if(i.hasOwnProperty(s)!==n.hasOwnProperty(s))return!1;if(typeof i[s]!=typeof n[s])return!1}for(s in n){if(i.hasOwnProperty(s)!==n.hasOwnProperty(s))return!1;if(typeof i[s]!=typeof n[s])return!1;switch(typeof n[s]){case"object":case"function":if(e.push(n),t.push(i),!$t.compare2Objects(e,t,n[s],i[s]))return!1;e.pop(),t.pop();break;default:if(n[s]!==i[s])return!1;break}}return!0}static isPlainObject(e){return e==null?!1:!e.constructor||e.constructor===Object}static mergeArrayKey(e,t,n,i){if(i.has(n)){e[t]=i.get(n);return}if(!(n instanceof Promise)){if(!$t.isPlainObject(n)&&!Array.isArray(n)){e[t]=n;return}e[t]||(e[t]=Array.isArray(n)?[]:{}),i.set(n,e[t]),$t.merge(e[t],n,i),i.delete(n)}}static mergeObjectKey(e,t,n,i){if(i.has(n)){Object.assign(e,{[t]:i.get(n)});return}if(!(n instanceof Promise)){if(!$t.isPlainObject(n)&&!Array.isArray(n)){Object.assign(e,{[t]:n});return}e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),i.set(n,e[t]),$t.merge(e[t],n,i),i.delete(n)}}static merge(e,t,n=new Map){if($t.isPlainObject(e)&&$t.isPlainObject(t))for(const[i,s]of Object.entries(t))i!=="__proto__"&&$t.mergeObjectKey(e,i,s,n);if(Array.isArray(e)&&Array.isArray(t))for(let i=0;i<t.length;i++)$t.mergeArrayKey(e,i,t[i],n)}}class l_e{constructor(e,t,n,i,s){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=i,this.queryRunner=s,this.pojo=this.expressionMap.options.includes("create-pojo"),this.selections=new Set(this.expressionMap.selects.map(a=>a.selection)),this.aliasCache=new Map,this.columnsCache=new Map}transform(e,t){const n=this.group(e,t),i=[];for(const s of n.values()){const a=this.transformRawResultsGroup(s,t);a!==void 0&&i.push(a)}return i}buildAlias(e,t){let n=this.aliasCache.get(e);n||(n=new Map,this.aliasCache.set(e,n));let i=n.get(t);return i||(i=Ge.buildAlias(this.driver,void 0,e,t),n.set(t,i)),i}group(e,t){const n=new Map,i=[];t.metadata.tableType==="view"?i.push(...t.metadata.columns.map(s=>this.buildAlias(t.name,s.databaseName))):i.push(...t.metadata.primaryColumns.map(s=>this.buildAlias(t.name,s.databaseName)));for(const s of e){const a=i.map(c=>{const u=s[c];return Buffer.isBuffer(u)?u.toString("hex"):ur.isObject(u)?JSON.stringify(u):u}).join("_"),o=n.get(a);o?o.push(s):n.set(a,[s])}return n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const f=e.map(d=>d[this.buildAlias(t.name,t.metadata.discriminatorColumn.databaseName)]),l=n.childEntityMetadatas.find(d=>typeof f.find(h=>h===d.discriminatorValue)<"u");l&&(n=l)}const i=n.create(this.queryRunner,{fromDeserializer:!0,pojo:this.pojo}),s=this.transformColumns(e,t,i,n),a=this.transformJoins(e,i,t,n),o=this.transformRelationIds(e,t,i,n),c=this.transformRelationCounts(e,t,i);if(s||n.primaryColumns.every(f=>f.isVirtual===!0)&&(a||o||c))return i}transformColumns(e,t,n,i){let s=!1;const a=e[0];for(const[o,c]of this.getColumnsToProcess(t.name,i)){const u=a[o];u!==void 0&&(u!==null&&!c.isVirtualProperty&&(s=!0),c.setEntityValue(n,this.driver.prepareHydratedValue(u,c)))}return s}transformJoins(e,t,n,i){let s=!1;for(const a of this.expressionMap.joinAttributes){if(!a.metadata||!a.isSelected||a.relation&&!i.relations.find(c=>c===a.relation))continue;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==n.name)continue}else if(!a.relation||a.parentAlias!==n.name||a.relationPropertyPath!==a.relation.propertyPath)continue;let o=this.transform(e,a.alias);o=a.isMany?o:o[0],o=!a.isMany&&o===void 0?null:o,o!==void 0&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=o:a.relation.setEntityValue(t,o),s=!0)}return s}transformRelationIds(e,t,n,i){let s=!1;for(const[a,o]of this.rawRelationIdResults.entries()){if(o.relationIdAttribute.parentAlias!==t.name)continue;const c=o.relationIdAttribute.relation,u=this.createValueMapFromJoinColumns(c,o.relationIdAttribute.parentAlias,e);if(u==null)continue;this.prepareDataForTransformRelationIds();const f=this.hashEntityIds(c,u),l=this.relationIdMaps[a][f]||[],d=o.relationIdAttribute.mapToPropertyPropertyPath.split("."),h=(y,p,g)=>{const m=y.shift();if(m&&y.length===0)return p[m]=g,p;if(m&&y.length>0)h(y,p[m],g);else return p};c.isOneToOne||c.isManyToOne?l[0]!==void 0&&(h(d,n,l[0]),s=!0):(h(d,n,l),s=s||l.length>0)}return s}transformRelationCounts(e,t,n){let i=!1;for(const s of this.rawRelationCountResults){if(s.relationCountAttribute.parentAlias!==t.name)continue;const a=s.relationCountAttribute.relation;let o;a.isOneToMany?o=a.inverseRelation.joinColumns[0].referencedColumn.databaseName:o=a.isOwning?a.joinColumns[0].referencedColumn.databaseName:a.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=e[0][this.buildAlias(t.name,o)];if(c!=null){n[s.relationCountAttribute.mapToPropertyPropertyName]=0;for(const u of s.results)u.parentId===c&&(n[s.relationCountAttribute.mapToPropertyPropertyName]=parseInt(u.cnt),i=!0)}}return i}getColumnsToProcess(e,t){let n=this.columnsCache.get(e);n||(n=new Map,this.columnsCache.set(e,n));let i=n.get(t);return i||(i=t.columns.filter(s=>!s.isVirtual&&(this.selections.has(e)||this.selections.has(`${e}.${s.propertyPath}`))&&!t.childEntityMetadatas.some(a=>a.target===s.target)).map(s=>[this.buildAlias(e,s.databaseName),s]),n.set(t,i)),i}createValueMapFromJoinColumns(e,t,n){let i;return e.isManyToOne||e.isOneToOneOwner?i=e.entityMetadata.primaryColumns.map(s=>s):e.isOneToMany||e.isOneToOneNotOwner?i=e.inverseRelation.joinColumns.map(s=>s):e.isOwning?i=e.joinColumns.map(s=>s):i=e.inverseRelation.inverseJoinColumns.map(s=>s),i.reduce((s,a)=>{for(const o of n)e.isManyToOne||e.isOneToOneOwner?s[a.databaseName]=this.driver.prepareHydratedValue(o[this.buildAlias(t,a.databaseName)],a):s[a.databaseName]=this.driver.prepareHydratedValue(o[this.buildAlias(t,a.referencedColumn.databaseName)],a.referencedColumn);return s},{})}extractEntityPrimaryIds(e,t){let n;return e.isManyToOne||e.isOneToOneOwner?n=e.entityMetadata.primaryColumns.map(i=>i):e.isOneToMany||e.isOneToOneNotOwner?n=e.inverseRelation.joinColumns.map(i=>i):e.isOwning?n=e.joinColumns.map(i=>i):n=e.inverseRelation.inverseJoinColumns.map(i=>i),n.reduce((i,s)=>(i[s.databaseName]=t[s.databaseName],i),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map(e=>{const t=e.relationIdAttribute.relation;let n;return t.isManyToOne||t.isOneToOneOwner?n=t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?n=t.inverseEntityMetadata.primaryColumns:t.isOwning?n=t.inverseJoinColumns:n=t.inverseRelation.joinColumns,e.results.reduce((i,s)=>{let a=n.reduce((o,c)=>{let u=s[c.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(c.isVirtual&&c.referencedColumn&&c.referencedColumn.propertyName!==c.propertyName&&(u=c.referencedColumn.createValueMap(u)),$t.mergeDeep(o,c.createValueMap(u))):(!c.isPrimary&&c.referencedColumn.referencedColumn&&(u=c.referencedColumn.referencedColumn.createValueMap(u)),$t.mergeDeep(o,c.referencedColumn.createValueMap(u)))},{});if(n.length===1&&!e.relationIdAttribute.disableMixedMap&&(t.isOneToMany||t.isOneToOneNotOwner?a=n[0].getEntityValue(a):a=n[0].referencedColumn.getEntityValue(a)),a!==void 0){const o=this.hashEntityIds(t,s);i[o]?i[o].push(a):i[o]=[a]}return i},{})}))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}}let d_e=class{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map(async n=>{if(n.relation.isManyToOne||n.relation.isOneToOneOwner){if(n.queryBuilderFactory)throw new $e("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const i={},s=e.map(a=>{const o={},c=[];n.relation.joinColumns.forEach(f=>{o[f.databaseName]=this.connection.driver.prepareHydratedValue(a[Ge.buildAlias(this.connection.driver,void 0,n.parentAlias,f.databaseName)],f.referencedColumn);const l=`${f.databaseName}:${o[f.databaseName]}`;c.indexOf(l)===-1&&c.push(l)}),n.relation.entityMetadata.primaryColumns.forEach(f=>{o[f.databaseName]=this.connection.driver.prepareHydratedValue(a[Ge.buildAlias(this.connection.driver,void 0,n.parentAlias,f.databaseName)],f);const l=`${f.databaseName}:${o[f.databaseName]}`;c.indexOf(l)===-1&&c.push(l)}),c.sort();const u=c.join("::");return i[u]?null:(i[u]=!0,o)}).filter(a=>a);return{relationIdAttribute:n,results:s}}else if(n.relation.isOneToMany||n.relation.isOneToOneNotOwner){const i=n.relation,s=i.isOwning?i.joinColumns:i.inverseRelation.joinColumns,a=i.inverseEntityMetadata.target,o=i.inverseEntityMetadata.tableName,c=n.alias||o,u={},f={},l=e.map((p,g)=>{const m=[],v={},b=s.map(C=>{const N=C.databaseName+g,x=p[Ge.buildAlias(this.connection.driver,void 0,n.parentAlias,C.referencedColumn.databaseName)],I=`${c}:${C.propertyPath}:${x}`;return m.indexOf(I)!==-1?"":(m.push(I),v[N]=x,c+"."+C.propertyPath+" = :"+N)}).filter(C=>C).join(" AND ");m.sort();const _=m.join("::");return u[_]?"":(u[_]=!0,Object.assign(f,v),b)}).filter(p=>p).map(p=>"("+p+")").join(" OR ");if(!l)return{relationIdAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);$t.uniq([...s,...i.inverseRelation.entityMetadata.primaryColumns],p=>p.propertyPath).forEach(p=>{d.addSelect(c+"."+p.propertyPath,p.databaseName)}),d.from(a,c).where("("+l+")").setParameters(f),n.queryBuilderFactory&&n.queryBuilderFactory(d);const y=await d.getRawMany();return y.forEach(p=>{s.forEach(g=>{p[g.databaseName]=this.connection.driver.prepareHydratedValue(p[g.databaseName],g.referencedColumn)}),i.inverseRelation.entityMetadata.primaryColumns.forEach(g=>{p[g.databaseName]=this.connection.driver.prepareHydratedValue(p[g.databaseName],g)})}),{relationIdAttribute:n,results:y}}else{const i=n.relation,s=i.isOwning?i.joinColumns:i.inverseRelation.inverseJoinColumns,a=i.isOwning?i.inverseJoinColumns:i.inverseRelation.joinColumns,o=n.junctionAlias,c=n.joinInverseSideMetadata.tableName,u=n.alias||c,f=i.isOwning?i.junctionEntityMetadata.tableName:i.inverseRelation.junctionEntityMetadata.tableName,l=e.map(b=>s.reduce((_,C)=>(_[C.propertyPath]=b[Ge.buildAlias(this.connection.driver,void 0,n.parentAlias,C.referencedColumn.databaseName)],_),{}));if(l.length===0)return{relationIdAttribute:n,results:[]};const d={},h={},y=l.map((b,_)=>{const C=[],N={},x=Object.keys(b).map($=>{const j=$+_,O=b[$],E=`${o}:${$}:${O}`;return C.indexOf(E)!==-1?"":(C.push(E),N[j]=O,o+"."+$+" = :"+j)}).filter($=>$).join(" AND ");C.sort();const I=C.join("::");return h[I]?"":(h[I]=!0,Object.assign(d,N),x)}).filter(b=>b),p=a.map(b=>o+"."+b.propertyPath+" = "+u+"."+b.referencedColumn.propertyPath).join(" AND "),g=y.map(b=>"("+b+" AND "+p+")").join(" OR "),m=this.connection.createQueryBuilder(this.queryRunner);a.forEach(b=>{m.addSelect(o+"."+b.propertyPath,b.databaseName).addOrderBy(o+"."+b.propertyPath)}),s.forEach(b=>{m.addSelect(o+"."+b.propertyPath,b.databaseName).addOrderBy(o+"."+b.propertyPath)}),m.from(c,u).innerJoin(f,o,g).setParameters(d),n.queryBuilderFactory&&n.queryBuilderFactory(m);const v=await m.getRawMany();return v.forEach(b=>{[...s,...a].forEach(_=>{b[_.databaseName]=this.connection.driver.prepareHydratedValue(b[_.databaseName],_.referencedColumn)})}),{relationIdAttribute:n,results:v}}});return Promise.all(t)}};class h_e{constructor(e,t){this.connection=e,this.queryRunner=t}load(e,t,n){const i=Array.isArray(t)?t:[t],s=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,i,s):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,i,s):this.loadForOneToManyAndOneToOneNotOwner(e,i,s)}async loadManyToManyRelationIdsAndGroup(e,t,n,i){const s=e.isManyToMany||e.isOneToMany,a=Array.isArray(t)?t:[t];if(!n&&(n=await this.connection.relationLoader.load(e,t,this.queryRunner,i),!n.length))return a.map(l=>({entity:l,related:s?[]:void 0}));const o=await this.load(e,t,n),c=Array.isArray(n)?n:[n];let u=[],f=[];return e.isManyToManyOwner?(u=e.junctionEntityMetadata.inverseColumns.map(l=>l.referencedColumn),f=e.junctionEntityMetadata.ownerColumns.map(l=>l.referencedColumn)):e.isManyToManyNotOwner?(u=e.junctionEntityMetadata.ownerColumns.map(l=>l.referencedColumn),f=e.junctionEntityMetadata.inverseColumns.map(l=>l.referencedColumn)):e.isManyToOne||e.isOneToOneOwner?(u=e.joinColumns.map(l=>l.referencedColumn),f=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(u=e.inverseRelation.entityMetadata.primaryColumns,f=e.inverseRelation.joinColumns.map(l=>l.referencedColumn)),a.map(l=>{const d={entity:l,related:s?[]:void 0},h=o.filter(y=>f.every(p=>p.compareEntityValue(l,y[p.entityMetadata.name+"_"+p.propertyAliasName])));return h.length&&c.forEach(y=>{h.forEach(p=>{u.every(m=>m.compareEntityValue(y,p[Ge.buildAlias(this.connection.driver,void 0,m.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+m.propertyPath.replace(".","_"))]))&&(s?d.related.push(y):d.related=y)})}),d})}loadForManyToMany(e,t,n){const i=e.junctionEntityMetadata,s=i.name,a=e.isOwning?i.ownerColumns:i.inverseColumns,o=e.isOwning?i.inverseColumns:i.ownerColumns,c=this.connection.createQueryBuilder(this.queryRunner);a.forEach(d=>{const h=Ge.buildAlias(this.connection.driver,void 0,d.referencedColumn.entityMetadata.name+"_"+d.referencedColumn.propertyPath.replace(".","_"));c.addSelect(s+"."+d.propertyPath,h)}),o.forEach(d=>{const h=Ge.buildAlias(this.connection.driver,void 0,d.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+d.referencedColumn.propertyPath.replace(".","_"));c.addSelect(s+"."+d.propertyPath,h)});let u="";if(a.length===1){const d=t.map(y=>a[0].referencedColumn.getEntityValue(y));d.every(y=>typeof y=="number")?u=`${s}.${a[0].propertyPath} IN (${d.join(", ")})`:(c.setParameter("values1",d),u=s+"."+a[0].propertyPath+" IN (:...values1)")}else u="("+t.map((d,h)=>a.map(y=>{const p="entity1_"+h+"_"+y.propertyName;return c.setParameter(p,y.referencedColumn.getEntityValue(d)),s+"."+y.propertyPath+" = :"+p}).join(" AND ")).map(d=>"("+d+")").join(" OR ")+")";let f="";if(n)if(o.length===1){const d=n.map(y=>o[0].referencedColumn.getEntityValue(y));d.every(y=>typeof y=="number")?f=`${s}.${o[0].propertyPath} IN (${d.join(", ")})`:(c.setParameter("values2",d),f=s+"."+o[0].propertyPath+" IN (:...values2)")}else f="("+n.map((d,h)=>o.map(y=>{const p="entity2_"+h+"_"+y.propertyName;return c.setParameter(p,y.referencedColumn.getEntityValue(d)),s+"."+y.propertyPath+" = :"+p}).join(" AND ")).map(d=>"("+d+")").join(" OR ")+")";const l=[u,f].filter(d=>d.length>0).join(" AND ");return c.from(i.target,s).where(l).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const i=e.entityMetadata.targetName,s=e.joinColumns.every(c=>!!e.entityMetadata.nonVirtualColumns.find(u=>u===c));if(n&&s){const c=[];if(t.forEach(u=>{const f={};e.entityMetadata.primaryColumns.forEach(l=>{const d=l.entityMetadata.name+"_"+l.propertyPath.replace(".","_");f[d]=l.getEntityValue(u)}),n.forEach(l=>{e.joinColumns.forEach(d=>{const h=d.getEntityValue(u),y=d.referencedColumn.getEntityValue(l);if(!(h===void 0||y===void 0)&&h===y){const p=d.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+d.referencedColumn.propertyPath.replace(".","_");f[p]=y}})}),Object.keys(f).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&c.push(f)}),c.length===t.length)return Promise.resolve(c)}const a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const u=Ge.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+c.propertyPath.replace(".","_"));a.addSelect(i+"."+c.propertyPath,u)}),e.joinColumns.forEach(c=>{const u=Ge.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+c.referencedColumn.propertyPath.replace(".","_"));a.addSelect(i+"."+c.propertyPath,u)});let o="";if(e.entityMetadata.primaryColumns.length===1){const c=t.map(f=>e.entityMetadata.primaryColumns[0].getEntityValue(f));c.every(f=>typeof f=="number")?o=`${i}.${e.entityMetadata.primaryColumns[0].propertyPath} IN (${c.join(", ")})`:(a.setParameter("values",c),o=i+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else o=t.map((c,u)=>e.entityMetadata.primaryColumns.map((f,l)=>{const d="entity"+u+"_"+l;return a.setParameter(d,f.getEntityValue(c)),i+"."+f.propertyPath+" = :"+d}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return a.from(e.entityMetadata.target,i).where(o).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){const i=e;if(e=e.inverseRelation,e.entityMetadata.primaryColumns.length===e.joinColumns.length&&e.entityMetadata.primaryColumns.every(u=>e.joinColumns.indexOf(u)!==-1))return Promise.resolve(t.map(u=>{const f={};return e.joinColumns.forEach(function(l){const d=l.referencedColumn.getEntityValue(u),h=l.referencedColumn.entityMetadata.name+"_"+l.referencedColumn.propertyPath.replace(".","_"),y=l.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+l.propertyPath.replace(".","_");f[h]=d,f[y]=d}),f}));const s=e.entityMetadata.targetName,a=this.connection.createQueryBuilder(this.queryRunner);e.entityMetadata.primaryColumns.forEach(c=>{const u=Ge.buildAlias(this.connection.driver,void 0,c.entityMetadata.name+"_"+i.propertyPath.replace(".","_")+"_"+c.propertyPath.replace(".","_"));a.addSelect(s+"."+c.propertyPath,u)}),e.joinColumns.forEach(c=>{const u=Ge.buildAlias(this.connection.driver,void 0,c.referencedColumn.entityMetadata.name+"_"+c.referencedColumn.propertyPath.replace(".","_"));a.addSelect(s+"."+c.propertyPath,u)});let o="";if(e.joinColumns.length===1){const c=t.map(f=>e.joinColumns[0].referencedColumn.getEntityValue(f));c.every(f=>typeof f=="number")?o=`${s}.${e.joinColumns[0].propertyPath} IN (${c.join(", ")})`:(a.setParameter("values",c),o=s+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else o=t.map((c,u)=>e.joinColumns.map((f,l)=>{const d="entity"+u+"_"+l;return a.setParameter(d,f.referencedColumn.getEntityValue(c)),s+"."+f.propertyPath+" = :"+d}).join(" AND ")).map(c=>"("+c+")").join(" OR ");return a.from(e.entityMetadata.target,s).where(o).getRawMany()}}class p_e{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationIds.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)})})}metadataToAttribute(e,t){return new cN(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class y_e{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(i,s,a)=>a.indexOf(i)===s,n=this.relationCountAttributes.map(async i=>{if(i.relation.isOneToMany){const s=i.relation,a=s.inverseRelation,o=a.joinColumns[0].referencedColumn.propertyName,c=s.inverseEntityMetadata.target,u=s.inverseEntityMetadata.tableName,f=i.alias||u,l=a.propertyName;let d=e.map(y=>y[i.parentAlias+"_"+o]).filter(y=>!!y);if(d=d.filter(t),d.length===0)return{relationCountAttribute:i,results:[]};const h=this.connection.createQueryBuilder(this.queryRunner);return h.select(f+"."+l,"parentId").addSelect("COUNT(*)","cnt").from(c,f).where(f+"."+l+" IN (:...ids)").addGroupBy(f+"."+l).setParameter("ids",d),i.queryBuilderFactory&&i.queryBuilderFactory(h),{relationCountAttribute:i,results:await h.getRawMany()}}else{let s,a,o,c;i.relation.isOwning?(s=i.relation.joinColumns[0].referencedColumn.databaseName,a=i.relation.inverseJoinColumns[0].referencedColumn.databaseName,o=i.relation.junctionEntityMetadata.columns[0],c=i.relation.junctionEntityMetadata.columns[1]):(s=i.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,a=i.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,o=i.relation.junctionEntityMetadata.columns[1],c=i.relation.junctionEntityMetadata.columns[0]);let u=e.map(g=>g[i.parentAlias+"_"+s]).filter(g=>!!g);if(u=u.filter(t),u.length===0)return{relationCountAttribute:i,results:[]};const f=i.junctionAlias,l=i.joinInverseSideMetadata.tableName,d=i.alias||l,h=i.relation.junctionEntityMetadata.tableName,y=f+"."+o.propertyName+" IN ("+u.map(g=>isNaN(g)?"'"+g+"'":g)+") AND "+f+"."+c.propertyName+" = "+d+"."+a,p=this.connection.createQueryBuilder(this.queryRunner);return p.select(f+"."+o.propertyName,"parentId").addSelect("COUNT("+p.escape(d)+"."+p.escape(a)+")","cnt").from(l,d).innerJoin(h,f,y).addGroupBy(f+"."+o.propertyName),i.queryBuilderFactory&&i.queryBuilderFactory(p),{relationCountAttribute:i,results:await p.getRawMany()}}});return Promise.all(n)}}class m_e{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach(e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)}),this.expressionMap.joinAttributes.forEach(e=>{!e.metadata||e.metadata.isJunction||e.metadata.relationCounts.forEach(t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)})})}metadataToAttribute(e,t){return new uN(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class dN{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||typeof t.select=="object"||typeof t.relations=="object"||typeof t.where=="object"||typeof t.join=="object"||typeof t.order=="object"||typeof t.cache=="object"||typeof t.cache=="boolean"||typeof t.cache=="number"||typeof t.comment=="string"||typeof t.lock=="object"||typeof t.loadRelationIds=="object"||typeof t.loadRelationIds=="boolean"||typeof t.loadEagerRelations=="boolean"||typeof t.withDeleted=="boolean"||typeof t.relationLoadStrategy=="string"||typeof t.transaction=="boolean")}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||typeof t.skip=="number"||typeof t.take=="number"||typeof t.skip=="string"||typeof t.take=="string")}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(t!=null&&t.relations){const n=[...t.relations];if(dN.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new WAe(n)}return e}static applyRelationsRecursively(e,t,n,i,s){let a=[];if(s){const o=new RegExp("^"+s.replace(".","\\.")+"\\.");a=t.filter(c=>c.match(o)).map(c=>i.findRelationWithPropertyPath(c.replace(o,""))).filter(c=>c)}else a=t.map(o=>i.findRelationWithPropertyPath(o)).filter(o=>o);a.forEach(o=>{const c=Ge.buildAlias(e.connection.driver,{joiner:"__"},n,o.propertyPath),u=n+"."+o.propertyPath;e.expressionMap.relationLoadStrategy==="query"?e.concatRelationMetadata(o):e.leftJoinAndSelect(u,c),t.splice(t.indexOf(s?s+"."+o.propertyPath:o.propertyPath),1);let f,l;if(e.expressionMap.relationLoadStrategy==="query")f=o.inverseEntityMetadata,l=c;else{const d=e.expressionMap.joinAttributes.find(h=>h.entityOrProperty===u);f=d.metadata,l=d.alias.name}if(!l||!f)throw new Oc(o.propertyPath,i);if(this.applyRelationsRecursively(e,t,l,f,s?s+"."+o.propertyPath:o.propertyPath),e.expressionMap.relationLoadStrategy==="join"){const d=i.relations.find(h=>h.propertyName===o.propertyPath);d&&this.joinEagerRelations(e,c,d.inverseEntityMetadata)}})}static joinEagerRelations(e,t,n){n.eagerRelations.forEach(i=>{let s=Ge.buildAlias(e.connection.driver,{joiner:"__"},t,i.propertyName),a=!0;for(const u of e.expressionMap.joinAttributes)if(!(u.condition!==void 0||u.mapToProperty!==void 0||u.isMappingMany!==void 0||u.direction!=="LEFT"||u.entityOrProperty!==`${t}.${i.propertyPath}`)){a=!1,s=u.alias.name;break}const o=!!e.expressionMap.joinAttributes.find(u=>u.alias.name===s);a&&!o&&e.leftJoin(t+"."+i.propertyPath,s);let c=!0;for(const u of e.expressionMap.selects)if(!(u.aliasName!==void 0||u.virtual!==void 0||u.selection!==s)){c=!1;break}c&&e.addSelect(s),this.joinEagerRelations(e,s,i.inverseEntityMetadata)})}}class hN extends Qr{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),this.replacePropertyNamesForTheWholeQuery(e)}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map(n=>({selection:n}));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map(n=>({selection:n})));else if(typeof e=="function"){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}fromDummy(){return this.from(this.connection.driver.dummyTableName??"(SELECT 1 AS dummy_column)","dummy_table")}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,i){return this.join("INNER",e,t,n,i),this}leftJoin(e,t,n,i){return this.join("LEFT",e,t,n,i),this}innerJoinAndSelect(e,t,n,i){return this.addSelect(t),this.innerJoin(e,t,n,i),this}leftJoinAndSelect(e,t,n,i){return this.addSelect(t),this.leftJoin(e,t,n,i),this}innerJoinAndMapMany(e,t,n,i,s){return this.addSelect(n),this.join("INNER",t,n,i,s,e,!0),this}innerJoinAndMapOne(e,t,n,i,s,a){return this.addSelect(n),this.join("INNER",t,n,i,s,e,!1,a),this}leftJoinAndMapMany(e,t,n,i,s){return this.addSelect(n),this.join("LEFT",t,n,i,s,e,!0),this}leftJoinAndMapOne(e,t,n,i,s,a){return this.addSelect(n),this.join("LEFT",t,n,i,s,e,!1,a),this}loadRelationIdAndMap(e,t,n,i){const s=new cN(this.expressionMap);return s.mapToProperty=e,s.relationName=t,typeof n=="string"&&(s.alias=n),typeof n=="object"&&n.disableMixedMap&&(s.disableMixedMap=!0),s.queryBuilderFactory=i,this.expressionMap.relationIdAttributes.push(s),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,i){const s=new uN(this.expressionMap);return s.mapToProperty=e,s.relationName=t,s.alias=n,s.queryBuilderFactory=i,this.expressionMap.relationCountAttributes.push(s),this.expressionMap.createAlias({type:"other",name:s.junctionAlias}),s.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:s.junctionAlias,metadata:s.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach(t=>{e!==void 0&&e.relations!==void 0&&e.relations.indexOf(t.propertyPath)===-1||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)}),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereExists(e){return this.where(...this.getExistsCondition(e))}andWhereExists(e){return this.andWhere(...this.getExistsCondition(e))}orWhereExists(e){return this.orWhere(...this.getExistsCondition(e))}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return e?this.expressionMap.groupBys=[e]:this.expressionMap.groupBys=[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}timeTravelQuery(e){return this.connection.driver.options.type==="cockroachdb"&&(e===void 0?this.expressionMap.timeTravel="follower_read_timestamp()":this.expressionMap.timeTravel=e),this}orderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new $e('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new $e('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){if(t!==void 0&&t!=="ASC"&&t!=="DESC")throw new $e('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(n!==void 0&&n!=="NULLS FIRST"&&n!=="NULLS LAST")throw new $e('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),this.expressionMap.limit!==void 0&&isNaN(this.expressionMap.limit))throw new $e('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),this.expressionMap.offset!==void 0&&isNaN(this.expressionMap.offset))throw new $e('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),this.expressionMap.take!==void 0&&isNaN(this.expressionMap.take))throw new $e('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),this.expressionMap.skip!==void 0&&isNaN(this.expressionMap.skip))throw new $e('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if(this.expressionMap.lockMode==="optimistic")throw new ib;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const t=(await this.getRawAndEntities()).entities[0];if(t&&this.expressionMap.lockMode==="optimistic"&&this.expressionMap.lockVersion){const n=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const i=n.updateDateColumn.getEntityValue(t);if(i.getTime()!==this.expressionMap.lockVersion.getTime())throw new pU(n.name,this.expressionMap.lockVersion,i)}else{const i=n.versionColumn.getEntityValue(t);if(i!==this.expressionMap.lockVersion)throw new pU(n.name,this.expressionMap.lockVersion,i)}}return t===void 0?null:t}async getOneOrFail(){const e=await this.getOne();if(!e)throw new jAe(this.expressionMap.mainAlias.target,this.expressionMap.parameters);return e}async getMany(){if(this.expressionMap.lockMode==="optimistic")throw new ib;return(await this.getRawAndEntities()).entities}async getCount(){if(this.expressionMap.lockMode==="optimistic")throw new ib;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getExists(){if(this.expressionMap.lockMode==="optimistic")throw new ib;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeExistsQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if(this.expressionMap.lockMode==="optimistic")throw new ib;const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;let i=this.lazyCount(n);if(i===void 0){const a=this.expressionMap.cacheId;a&&(this.expressionMap.cacheId=`${a}-count`),i=await this.executeCountQuery(e)}const s=[n.entities,i];return t&&await e.commitTransaction(),s}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}lazyCount(e){const t=this.expressionMap.limit!==void 0&&this.expressionMap.limit!==null;if(this.expressionMap.joinAttributes.length>0&&t)return;const n=this.expressionMap.take!==void 0&&this.expressionMap.take!==null,i=t?this.expressionMap.limit:n?this.expressionMap.take:void 0;if(i!==void 0&&e.entities.length===i)return;const s=this.expressionMap.skip!==void 0&&this.expressionMap.skip!==null&&this.expressionMap.skip>0,a=this.expressionMap.offset!==void 0&&this.expressionMap.offset!==null&&this.expressionMap.offset>0;if(e.entities.length===0&&(s||a))return;const o=a?this.expressionMap.offset:s?this.expressionMap.skip:0;return e.entities.length+o}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let i=!1;try{this.expressionMap.useTransaction===!0&&n.isTransactionActive===!1&&(await n.startTransaction(),i=!0);const s=()=>{if(n!==this.queryRunner)return n.release()},a=n.stream(e,t,s,s);return i&&await n.commitTransaction(),a}catch(s){if(i)try{await n.rollbackTransaction()}catch{}throw s}}cache(e,t){return typeof e=="boolean"?this.expressionMap.cache=e:typeof e=="number"?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):(typeof e=="string"||typeof e=="number")&&(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,i,s,a,o,c){s&&this.setParameters(s);const u=new WJ(this.connection,this.expressionMap);u.direction=e,u.mapAsEntity=c,u.mapToProperty=a,u.isMappingMany=o,u.entityOrProperty=t,u.condition=i,this.expressionMap.joinAttributes.push(u);const f=u.metadata;if(f){if(f.deleteDateColumn&&!this.expressionMap.withDeleted){const l=`${n}.${f.deleteDateColumn.propertyName} IS NULL`;u.condition=u.condition?` ${u.condition} AND ${l}`:`${l}`}u.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:f}),u.relation&&u.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:u.junctionAlias,metadata:u.relation.junctionEntityMetadata})}else{let l="";if(typeof t=="function"){const h=t(this.subQuery());this.setParameters(h.getParameters()),l=h.getQuery()}else l=t;const d=typeof t=="function"||t.substr(0,1)==="("&&t.substr(-1)===")";u.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:d===!1?t:void 0,subQuery:d===!0?l:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new $e("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const o=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,o)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,o))}this.expressionMap.joinAttributes.forEach(o=>{if(o.metadata)e.push(...this.buildEscapedEntityColumnSelects(o.alias.name,o.metadata)),t.push(...this.findEntityColumnSelects(o.alias.name,o.metadata));else if(this.expressionMap.selects.some(u=>u.selection===o.alias.name)){e.push({selection:this.escape(o.alias.name)+".*"});const u=this.expressionMap.selects.find(f=>f.selection===o.alias.name);t.push(u)}}),this.expressionMap.selects.filter(o=>t.indexOf(o)===-1).forEach(o=>e.push({selection:this.replacePropertyNames(o.selection),aliasName:o.aliasName})),e.length===0&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&Ge.isMySQLFamily(this.connection.driver)&&(n=` USE INDEX (${this.expressionMap.useIndex})`);const i=this.expressionMap.aliases.filter(o=>o.type==="from"&&(o.tablePath||o.subQuery)).map(o=>o.subQuery?o.subQuery+" "+this.escape(o.name):this.getTableName(o.tablePath)+" "+this.escape(o.name)),s=this.createSelectDistinctExpression(),a=e.map(o=>o.selection+(o.aliasName?" AS "+this.escape(o.aliasName):"")).join(", ");return s+a+" FROM "+i.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:i}=this.connection;let s="SELECT ";return n>0&&Ge.isMySQLFamily(i)&&(s+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),Ge.isPostgresFamily(i)&&t.length>0?s=`SELECT DISTINCT ON (${t.map(o=>this.replacePropertyNames(o)).join(", ")}) `:e&&(s="SELECT DISTINCT "),s}createJoinExpression(){return this.expressionMap.joinAttributes.map(t=>{const n=t.relation,i=t.tablePath,s=t.alias.name;let a=t.condition?" AND ("+t.condition+")":"";const o=t.parentAlias;if(!o||!n){const c=t.alias.subQuery?t.alias.subQuery:this.getTableName(i);return" "+t.direction+" JOIN "+c+" "+this.escape(s)+this.createTableLockExpression()+(t.condition?" ON "+this.replacePropertyNames(t.condition):"")}if(n.isManyToOne||n.isOneToOneOwner){const c=n.joinColumns.map(u=>s+"."+u.referencedColumn.propertyPath+"="+o+"."+n.propertyPath+"."+u.referencedColumn.propertyPath).join(" AND ");return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+a)}else if(n.isOneToMany||n.isOneToOneNotOwner){const c=n.inverseRelation.joinColumns.map(u=>(n.inverseEntityMetadata.tableType==="entity-child"&&n.inverseEntityMetadata.discriminatorColumn&&(a+=" AND "+s+"."+n.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+n.inverseEntityMetadata.discriminatorValue+"'"),s+"."+n.inverseRelation.propertyPath+"."+u.referencedColumn.propertyPath+"="+o+"."+u.referencedColumn.propertyPath)).join(" AND ");if(!c)throw new $e(`Relation ${n.entityMetadata.name}.${n.propertyName} does not have join columns.`);return" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c+a)}else{const c=n.junctionEntityMetadata.tablePath,u=t.junctionAlias;let f="",l="";return n.isOwning?(f=n.joinColumns.map(d=>u+"."+d.propertyPath+"="+o+"."+d.referencedColumn.propertyPath).join(" AND "),l=n.inverseJoinColumns.map(d=>s+"."+d.referencedColumn.propertyPath+"="+u+"."+d.propertyPath).join(" AND ")):(f=n.inverseRelation.inverseJoinColumns.map(d=>u+"."+d.propertyPath+"="+o+"."+d.referencedColumn.propertyPath).join(" AND "),l=n.inverseRelation.joinColumns.map(d=>s+"."+d.referencedColumn.propertyPath+"="+u+"."+d.propertyPath).join(" AND "))," "+t.direction+" JOIN "+this.getTableName(c)+" "+this.escape(u)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(f)+" "+t.direction+" JOIN "+this.getTableName(i)+" "+this.escape(s)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+a)}}).join(" ")}createGroupByExpression(){return!this.expressionMap.groupBys||!this.expressionMap.groupBys.length?"":" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", "))}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length===0?"":" ORDER BY "+Object.keys(e).map(t=>{const n=typeof e[t]=="string"?e[t]:e[t].order+" "+e[t].nulls,i=this.expressionMap.selects.find(s=>s.selection===t);if(i&&!i.aliasName&&t.indexOf(".")!==-1){const s=t.split("."),a=s[0],o=s.slice(1).join("."),c=this.expressionMap.aliases.find(u=>u.name===a);if(c){const u=c.metadata.findColumnWithPropertyPath(o);if(u){const f=Ge.buildAlias(this.connection.driver,void 0,a,u.databaseName);return this.escape(f)+" "+n}}}return this.replacePropertyNames(t)+" "+n}).join(", ")}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;e===void 0&&t===void 0&&this.expressionMap.joinAttributes.length===0&&(e=this.expressionMap.skip,t=this.expressionMap.take);const n=t!=null,i=e!=null;if(this.connection.driver.options.type==="mssql"){let s="";if((n||i)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(s=" ORDER BY (SELECT NULL)"),n&&i)return s+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(n)return s+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(i)return s+" OFFSET "+e+" ROWS"}else if(Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql"||this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner"){if(n&&i)return" LIMIT "+t+" OFFSET "+e;if(n)return" LIMIT "+t;if(i)throw new GAe}else if(Ge.isSQLiteFamily(this.connection.driver)){if(n&&i)return" LIMIT "+t+" OFFSET "+e;if(n)return" LIMIT "+t;if(i)return" LIMIT -1 OFFSET "+e}else if(this.connection.driver.options.type==="oracle"){if(n&&i)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(n)return" FETCH NEXT "+t+" ROWS ONLY";if(i)return" OFFSET "+e+" ROWS"}else{if(n&&i)return" LIMIT "+t+" OFFSET "+e;if(n)return" LIMIT "+t;if(i)return" OFFSET "+e}return""}createTableLockExpression(){if(this.connection.driver.options.type==="mssql")switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!(Ge.isPostgresFamily(e)||e.options.type==="cockroachdb"))throw new $e("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new $e("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch(this.expressionMap.onLocked==="nowait"?n=" NOWAIT":this.expressionMap.onLocked==="skip_locked"&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if(e.options.type==="mysql"||e.options.type==="aurora-mysql")return Ge.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if(e.options.type==="mariadb")return" LOCK IN SHARE MODE";if(Ge.isPostgresFamily(e))return" FOR SHARE"+t+n;if(e.options.type==="oracle")return" FOR UPDATE";if(e.options.type==="mssql")return"";throw new Qp;case"pessimistic_write":if(Ge.isMySQLFamily(e)||e.options.type==="aurora-mysql"||e.options.type==="oracle")return" FOR UPDATE"+n;if(Ge.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+n;if(e.options.type==="mssql")return"";throw new Qp;case"pessimistic_partial_write":if(Ge.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(Ge.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new Qp;case"pessimistic_write_or_fail":if(Ge.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR UPDATE"+t+" NOWAIT";if(Ge.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new Qp;case"for_no_key_update":if(Ge.isPostgresFamily(e)||e.options.type==="cockroachdb")return" FOR NO KEY UPDATE"+t+n;throw new Qp;case"for_key_share":if(Ge.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new Qp;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map((t,n)=>{switch(t.type){case"and":return(n>0?"AND ":"")+this.replacePropertyNames(t.condition);case"or":return(n>0?"OR ":"")+this.replacePropertyNames(t.condition);default:return this.replacePropertyNames(t.condition)}}).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some(u=>u.selection===e),i=[];if(n&&i.push(...t.columns.filter(u=>u.isSelect===!0)),i.push(...t.columns.filter(u=>this.expressionMap.selects.some(f=>f.selection===e+"."+u.propertyPath))),i.length===0)return[];const s=this.expressionMap.queryEntity?t.primaryColumns.filter(u=>i.indexOf(u)===-1):[],a=[...i,...s],o=[],c=this.escape(e);return a.forEach(u=>{let f=c+"."+this.escape(u.databaseName);u.isVirtualProperty&&u.query&&(f=`(${u.query(c)})`),this.connection.driver.spatialTypes.indexOf(u.type)!==-1&&((Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&(f=`${this.connection.driver.options.legacySpatialSupport?"AsText":"ST_AsText"}(${f})`),Ge.isPostgresFamily(this.connection.driver)&&(u.precision?f=`ST_AsGeoJSON(${f}, ${u.precision})::json`:f=`ST_AsGeoJSON(${f})::json`),this.connection.driver.options.type==="mssql"&&(f=`${f}.ToString()`));const l=this.expressionMap.selects.filter(d=>d.selection===e+"."+u.propertyPath);l.length?l.forEach(d=>{o.push({selection:f,aliasName:d.aliasName?d.aliasName:Ge.buildAlias(this.connection.driver,void 0,e,u.databaseName),virtual:d.virtual})}):o.push({selection:f,aliasName:Ge.buildAlias(this.connection.driver,void 0,e,u.databaseName),virtual:n})}),o}findEntityColumnSelects(e,t){return this.expressionMap.selects.filter(n=>n.selection===e||t.columns.some(i=>n.selection===e+"."+i.propertyPath))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,n=this.expressionMap.mainAlias.metadata.primaryColumns,i=this.escape(e);if(this.expressionMap.joinAttributes.length===0&&this.expressionMap.relationIdAttributes.length===0&&this.expressionMap.relationCountAttributes.length===0)return"COUNT(1)";if(this.connection.driver.options.type==="cockroachdb"||Ge.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+n.map(s=>`${i}.${this.escape(s.databaseName)}`).join(", ")+"))";if(Ge.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+n.map(s=>`${i}.${this.escape(s.databaseName)}`).join(", ")+")";if(this.connection.driver.options.type==="mssql"){const s=n.map(a=>`${i}.${this.escape(a.databaseName)}`).join(", '|;|', ");return n.length===1?`COUNT(DISTINCT(${s}))`:`COUNT(DISTINCT(CONCAT(${s})))`}return this.connection.driver.options.type==="spanner"?n.length===1?`COUNT(DISTINCT(${i}.${this.escape(n[0].databaseName)}))`:`COUNT(DISTINCT(CONCAT(${n.map(a=>`CAST(${i}.${this.escape(a.databaseName)} AS STRING)`).join(", '|;|', ")})))`:"COUNT(DISTINCT("+n.map(s=>`${i}.${this.escape(s.databaseName)}`).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return!n||!n[0]||!n[0].cnt?0:parseInt(n[0].cnt)}async executeExistsQuery(e){return(await this.connection.createQueryBuilder().fromDummy().select("1","row_exists").whereExists(this).limit(1).loadRawResults(e)).length>0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?$t.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?$t.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.findOptions.loadEagerRelations!==!1&&this.expressionMap.relationLoadStrategy==="join"&&this.buildEagerRelations(e,typeof this.findOptions.select=="object"?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere(this.conditions.substr(0,1)!=="("?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach(e=>{e.select&&!e.selection?e.type==="inner"?this.innerJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):e.type==="inner"?this.innerJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias)}),this.findOptions.skip!==void 0&&this.skip(this.findOptions.skip),this.findOptions.take!==void 0&&this.take(this.findOptions.take),typeof this.findOptions.cache=="number"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="boolean"?this.cache(this.findOptions.cache):typeof this.findOptions.cache=="object"&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach(e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)}),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach(e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)}),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach(e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)}),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach(e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)})),this.findOptions.lock){if(this.findOptions.lock.mode==="optimistic")this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if(this.findOptions.lock.mode==="pessimistic_read"||this.findOptions.lock.mode==="pessimistic_write"||this.findOptions.lock.mode==="dirty_read"||this.findOptions.lock.mode==="pessimistic_partial_write"||this.findOptions.lock.mode==="pessimistic_write_or_fail"||this.findOptions.lock.mode==="for_no_key_update"||this.findOptions.lock.mode==="for_key_share"){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map(t=>{const n=this.expressionMap.aliases.find(i=>i.metadata.tableNameWithoutPrefix===t);if(!n)throw new $e(`"${t}" is not part of this query`);return this.escape(n.name)}):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}}this.findOptions.loadRelationIds===!0?this.loadAllRelationIds():typeof this.findOptions.loadRelationIds=="object"&&this.loadAllRelationIds(this.findOptions.loadRelationIds),this.findOptions.loadEagerRelations!==!1&&dN.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),this.findOptions.transaction===!0&&(this.expressionMap.useTransaction=!0)}}concatRelationMetadata(e){this.relationMetadatas.push(e)}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new $e('Alias is not set. Use "from" method to set an alias.');if((this.expressionMap.lockMode==="pessimistic_read"||this.expressionMap.lockMode==="pessimistic_write"||this.expressionMap.lockMode==="pessimistic_partial_write"||this.expressionMap.lockMode==="pessimistic_write_or_fail"||this.expressionMap.lockMode==="for_no_key_update"||this.expressionMap.lockMode==="for_key_share")&&!e.isTransactionActive)throw new KAe;if(this.expressionMap.lockMode==="optimistic"){const c=this.expressionMap.mainAlias.metadata;if(!c.versionColumn&&!c.updateDateColumn)throw new zAe(c.name)}const t=new d_e(this.connection,e,this.expressionMap.relationIdAttributes),n=new y_e(this.connection,e,this.expressionMap.relationCountAttributes);new p_e(this.expressionMap).transform(),new m_e(this.expressionMap).transform();let a=[],o=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[c,u]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),f=this.expressionMap.mainAlias.metadata,l=this.expressionMap.mainAlias.name,d=f.primaryColumns.map(p=>{const g=this.escape("distinctAlias"),m=this.escape(Ge.buildAlias(this.connection.driver,void 0,l,p.databaseName));u[m]||(u[m]="ASC");const v=Ge.buildAlias(this.connection.driver,void 0,"ids_"+l,p.databaseName);return`${g}.${m} AS ${this.escape(v)}`}),h=this.clone(),y=h.expressionMap.timeTravel;if(a=await new hN(this.connection,e).select(`DISTINCT ${d.join(", ")}`).addSelect(c).from(`(${h.orderBy().timeTravelQuery(!1).getQuery()})`,"distinctAlias").timeTravelQuery(y).offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(u).cache(this.expressionMap.cache&&this.expressionMap.cacheId?`${this.expressionMap.cacheId}-pagination`:this.expressionMap.cache,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),a.length>0){let p="";const g={};if(f.hasMultiplePrimaryKeys)p=a.map((m,v)=>f.primaryColumns.map(b=>{const _=`orm_distinct_ids_${v}_${b.databaseName}`,C=Ge.buildAlias(this.connection.driver,void 0,"ids_"+l,b.databaseName);return g[_]=m[C],`${l}.${b.propertyPath}=:${_}`}).join(" AND ")).join(" OR ");else{const m=Ge.buildAlias(this.connection.driver,void 0,"ids_"+l,f.primaryColumns[0].databaseName),v=a.map(_=>_[m]);v.every(_=>typeof _=="number")?p=`${l}.${f.primaryColumns[0].propertyPath} IN (${v.join(", ")})`:(g.orm_distinct_ids=v,p=l+"."+f.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}a=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:p}).setParameters(g).loadRawResults(e)}}else a=await this.loadRawResults(e);if(a.length>0){const c=await t.load(a),u=await n.load(a);o=new l_e(this.expressionMap,this.connection.driver,c,u,this.queryRunner).transform(a,this.expressionMap.mainAlias),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,o)}if(this.expressionMap.relationLoadStrategy==="query"){const c=new h_e(this.connection,e);await Promise.all(this.relationMetadatas.map(async u=>{const f=u.inverseEntityMetadata.target,l=u.inverseEntityMetadata.targetName,d=Array.isArray(this.findOptions.select)?$t.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,h=Array.isArray(this.findOptions.relations)?$t.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,y=this.createQueryBuilder(e).select(l).from(f,l).setFindOptions({select:d?$t.deepValue(d,u.propertyPath):void 0,order:this.findOptions.order?$t.deepValue(this.findOptions.order,u.propertyPath):void 0,relations:h?$t.deepValue(h,u.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(o.length>0){const p=await c.loadManyToManyRelationIdsAndGroup(u,o,void 0,y);o.forEach(g=>{const m=p.find(v=>v.entity===g);if(m){const v=m.related===void 0?null:m.related;u.setEntityValue(g,v)}})}}))}return{raw:a,entities:o}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],c=a.slice(1).join("."),f=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(c);return this.escape(e)+"."+this.escape(Ge.buildAlias(this.connection.driver,void 0,o,f.databaseName))}else return this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?this.escape(e)+"."+this.escape(s):""}).join(", "),i={};return Object.keys(t).forEach(s=>{if(s.indexOf(".")!==-1){const a=s.split("."),o=a[0],c=a.slice(1).join("."),f=this.expressionMap.findAliasByName(o).metadata.findColumnWithPropertyPath(c);i[this.escape(e)+"."+this.escape(Ge.buildAlias(this.connection.driver,void 0,o,f.databaseName))]=t[s]}else this.expressionMap.selects.find(a=>a.selection===s||a.aliasName===s)?i[this.escape(e)+"."+this.escape(s)]=t[s]:i[s]=t[s]}),[n,i]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),i=t+" -- PARAMETERS: "+JSON.stringify(n,(f,l)=>typeof l=="bigint"?l.toString():l),s=typeof this.connection.options.cache=="object"?this.connection.options.cache:{};let a;const o=s.alwaysEnabled&&this.expressionMap.cache!==!1||this.expressionMap.cache===!0;let c=!1;if(this.connection.queryResultCache&&o)try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:i,duration:this.expressionMap.cacheDuration||s.duration||1e3},e),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(f){if(!s.ignoreErrors)throw f;c=!0}const u=await e.query(t,n,!0);if(!c&&this.connection.queryResultCache&&o)try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:i,time:Date.now(),duration:this.expressionMap.cacheDuration||s.duration||1e3,result:JSON.stringify(u.records)},a,e)}catch(f){if(!s.ignoreErrors)throw f}return u.records}mergeExpressionMap(e){return ur.assign(this.expressionMap,e),this}normalizeNumber(e){return typeof e=="number"||e===void 0||e===null?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner(this.connection.defaultReplicationModeForReads())}buildSelect(e,t,n,i){for(const s in e){if(e[s]===void 0||e[s]===!1)continue;const a=i?i+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),c=t.findEmbeddedWithPropertyPath(a),u=t.findRelationWithPropertyPath(a);if(!c&&!o&&!u)throw new Oc(a,t);o?this.selects.push(n+"."+a):c&&this.buildSelect(e[s],t,n,a)}}buildRelations(e,t,n,i,s){e&&Object.keys(e).forEach(a=>{const o=e[a],c=s?s+"."+a:a,u=n.findEmbeddedWithPropertyPath(c),f=n.findRelationWithPropertyPath(c);if(!u&&!f)throw new Oc(c,n);if(u)this.buildRelations(o,typeof t=="object"?$t.deepValue(t,u.propertyPath):void 0,n,i,c);else if(f){let l=i+"_"+c.replace(".","_");l=Ge.buildAlias(this.connection.driver,{joiner:"__"},i,l),(o===!0||typeof o=="object")&&(this.expressionMap.relationLoadStrategy==="query"?this.concatRelationMetadata(f):(this.joins.push({type:"left",select:!0,selection:t&&typeof t[a]=="object"?t[a]:void 0,alias:l,parentAlias:i,relationMetadata:f}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],f.inverseEntityMetadata,l))),typeof o=="object"&&this.expressionMap.relationLoadStrategy==="join"&&this.buildRelations(o,typeof t=="object"?$t.deepValue(t,f.propertyPath):void 0,f.inverseEntityMetadata,l,void 0)}})}buildEagerRelations(e,t,n,i,s){e&&Object.keys(e).forEach(a=>{const o=e[a],c=s?s+"."+a:a,u=n.findEmbeddedWithPropertyPath(c),f=n.findRelationWithPropertyPath(c);if(!u&&!f)throw new Oc(c,n);if(u)this.buildEagerRelations(o,typeof t=="object"?$t.deepValue(t,u.propertyPath):void 0,n,i,c);else if(f){let l=i+"_"+c.replace(".","_");l=Ge.buildAlias(this.connection.driver,{joiner:"__"},i,l),(o===!0||typeof o=="object")&&f.inverseEntityMetadata.eagerRelations.forEach(d=>{let h=l+"_"+d.propertyPath.replace(".","_");h=Ge.buildAlias(this.connection.driver,{joiner:"__"},l,h),this.joins.find(p=>p.alias===h)||this.joins.push({type:"left",select:!0,alias:h,parentAlias:l,selection:void 0,relationMetadata:d}),t&&typeof t[a]=="object"&&this.buildSelect(t[a],f.inverseEntityMetadata,l)}),typeof o=="object"&&this.buildEagerRelations(o,typeof t=="object"?$t.deepValue(t,f.propertyPath):void 0,f.inverseEntityMetadata,l,void 0)}})}buildOrder(e,t,n,i){for(const s in e){if(e[s]===void 0)continue;const a=i?i+"."+s:s,o=t.findColumnWithPropertyPathStrict(a),c=t.findEmbeddedWithPropertyPath(a),u=t.findRelationWithPropertyPath(a);if(!c&&!o&&!u)throw new Oc(a,t);if(o){let f=typeof e[s]=="object"?e[s].direction:e[s];f=f==="DESC"||f==="desc"||f===-1?"DESC":"ASC";let l=typeof e[s]=="object"?e[s].nulls:void 0;l=(l==null?void 0:l.toLowerCase())==="first"?"NULLS FIRST":(l==null?void 0:l.toLowerCase())==="last"?"NULLS LAST":void 0;const d=`${n}.${a}`;this.addOrderBy(d,f,l)}else if(c)this.buildOrder(e[s],t,n,a);else if(u){let f=n+"_"+a.replace(".","_");f=Ge.buildAlias(this.connection.driver,{joiner:"__"},n,f),this.joins.find(d=>d.alias===f)||this.joins.push({type:"left",select:!1,alias:f,parentAlias:n,selection:void 0,relationMetadata:u}),this.buildOrder(e[s],u.inverseEntityMetadata,f)}}}buildWhere(e,t,n,i){var a,o,c;let s="";if(Array.isArray(e))e.length&&(s=e.map(u=>this.buildWhere(u,t,n,i)).filter(u=>!!u).map(u=>"("+u+")").join(" OR "));else{const u=[];for(const f in e){let l=e[f];const d=i?i+"."+f:f,h=t.findColumnWithPropertyPathStrict(d),y=t.findEmbeddedWithPropertyPath(d),p=t.findRelationWithPropertyPath(d);if(!y&&!h&&!p)throw new Oc(d,t);if(l===void 0){if((((a=this.connection.options.invalidWhereValuesBehavior)==null?void 0:a.undefined)||"ignore")==="throw")throw new $e(`Undefined value encountered in property '${n}.${f}' of a where condition. Set 'invalidWhereValuesBehavior.undefined' to 'ignore' in connection options to skip properties with undefined values.`);continue}if(l===null){const g=((o=this.connection.options.invalidWhereValuesBehavior)==null?void 0:o.null)||"ignore";if(g==="ignore")continue;if(g==="throw")throw new $e(`Null value encountered in property '${n}.${f}' of a where condition. To match with SQL NULL, the IsNull() operator must be used. Set 'invalidWhereValuesBehavior.null' to 'ignore' or 'sql-null' in connection options to skip or handle null values.`)}if(h){let g=`${n}.${d}`;if(h.isVirtualProperty&&h.query&&(g=`(${h.query(this.escape(n))})`),l===null){u.push(`${g} IS NULL`);continue}rr.isEqualOperator(e[f])&&(l=e[f].value),h.transformer&&(l instanceof Z5?l.transformValue(h.transformer):l=vT.transformTo(h.transformer,l)),this.connection.driver.options.type==="mssql"&&(l=this.connection.driver.parametrizeValues(h,l)),u.push(this.createWhereConditionExpression(this.getWherePredicateCondition(g,l)))}else if(y){const g=this.buildWhere(e[f],t,n,d);g&&u.push(g)}else if(p){if(e[f]===null){const g=((c=this.connection.options.invalidWhereValuesBehavior)==null?void 0:c.null)||"ignore";if(g==="sql-null")u.push(`${n}.${d} IS NULL`);else if(g==="throw")throw new $e(`Null value encountered in property '${n}.${f}' of a where condition. Set 'invalidWhereValuesBehavior.null' to 'ignore' or 'sql-null' in connection options to skip or handle null values.`);continue}if(typeof e[f]=="object"&&Object.keys(e[f]).every(m=>e[f][m]===void 0))continue;if(rr.isFindOperator(e[f]))if(e[f].type==="moreThan"||e[f].type==="lessThan"||e[f].type==="moreThanOrEqual"||e[f].type==="lessThanOrEqual"){let g="";e[f].type==="moreThan"?g=">":e[f].type==="lessThan"?g="<":e[f].type==="moreThanOrEqual"?g=">=":e[f].type==="lessThanOrEqual"&&(g="<=");const m=this.subQuery();if(p.isManyToManyOwner)m.select("COUNT(*)").from(p.joinTableName,p.joinTableName).where(p.joinColumns.map(v=>`${p.joinTableName}.${v.propertyName} = ${n}.${v.referencedColumn.propertyName}`).join(" AND "));else if(p.isManyToManyNotOwner)m.select("COUNT(*)").from(p.inverseRelation.joinTableName,p.inverseRelation.joinTableName).where(p.inverseRelation.inverseJoinColumns.map(v=>`${p.inverseRelation.joinTableName}.${v.propertyName} = ${n}.${v.referencedColumn.propertyName}`).join(" AND "));else if(p.isOneToMany)m.select("COUNT(*)").from(p.inverseEntityMetadata.target,p.inverseEntityMetadata.tableName).where(p.inverseRelation.joinColumns.map(v=>`${p.inverseEntityMetadata.tableName}.${v.propertyName} = ${n}.${v.referencedColumn.propertyName}`).join(" AND "));else throw new Error("This relation isn't supported by given find operator");this.andWhere(m.getSql()+" "+g+" "+parseInt(e[f].value))}else if(p.isManyToOne||p.isOneToOne&&p.isOneToOneOwner){const g=`${n}.${d}`;u.push(this.createWhereConditionExpression(this.getWherePredicateCondition(g,e[f])))}else throw new Error("This relation isn't supported by given find operator");else{let g=n+"_"+p.propertyPath.replace(".","_");g=Ge.buildAlias(this.connection.driver,{joiner:"__"},n,g),this.joins.find(b=>b.alias===g)||this.joins.push({type:"left",select:!1,selection:void 0,alias:g,parentAlias:n,relationMetadata:p});const v=this.buildWhere(e[f],p.inverseEntityMetadata,g);v&&u.push(v)}}}s=u.length?"("+u.join(") AND (")+")":u.join(" AND ")}return s.length?"("+s+")":s}}class KJ{constructor(){this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}}class b_e extends Qr{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createUpdateExpression();return e+=this.createCteExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const n=new lN(e,this.expressionMap);this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=n.getSoftDeletionReturningColumns());const[i,s]=this.getQueryAndParameters(),a=await e.query(i,s,!0),o=KJ.from(a);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await n.update(o,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&(this.expressionMap.queryType==="soft-delete"?await e.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):this.expressionMap.queryType==="restore"&&await e.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),t&&await e.commitTransaction(),o}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}from(e,t){e=rr.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new A9;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new $e(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new $e("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!e)throw new $e(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!e.deleteDateColumn)throw new VAe(e);const t=[];switch(this.expressionMap.queryType){case"soft-delete":t.push(this.escape(e.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":t.push(this.escape(e.deleteDateColumn.databaseName)+" = NULL");break;default:throw new $e('The queryType must be "soft-delete" or "restore"')}if(e.versionColumn&&t.push(this.escape(e.versionColumn.databaseName)+" = "+this.escape(e.versionColumn.databaseName)+" + 1"),e.updateDateColumn&&t.push(this.escape(e.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),t.length<=0)throw new gT;const n=this.createWhereExpression(),i=this.createReturningExpression("update");return i===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")} OUTPUT ${i}${n}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n} RETURNING ${i}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(Ge.isMySQLFamily(this.connection.driver))return" LIMIT "+e;throw new zJ}return""}}class g_e extends Qr{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createUpdateExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),this.replacePropertyNamesForTheWholeQuery(e.trim())}async execute(){const e=this.obtainQueryRunner();let t=!1;try{this.expressionMap.useTransaction===!0&&e.isTransactionActive===!1&&(await e.startTransaction(),t=!0),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let n=null,i=null;const s=new lN(e,this.expressionMap),a=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const d of this.expressionMap.returning)a.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(d));this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=s.getUpdationReturningColumns(),a.push(...this.expressionMap.extraReturningColumns.filter(d=>!a.includes(d)))),a.length>0&&this.connection.driver.options.type==="mssql"&&(n=this.connection.driver.buildTableVariableDeclaration("@OutputTable",a),i="SELECT * FROM @OutputTable");const[o,c]=this.getQueryAndParameters(),u=[n,o,i],f=await e.query(u.filter(d=>d!=null).join(`;

`),c,!0),l=KJ.from(f);return this.expressionMap.updateEntity===!0&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await s.update(l,this.expressionMap.whereEntities),this.expressionMap.callListeners===!0&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),t&&await e.commitTransaction(),l}catch(n){if(t)try{await e.rollbackTransaction()}catch{}throw n}finally{e!==this.queryRunner&&await e.release()}}set(e){return this.expressionMap.valuesSet=e,this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new A9;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return e?typeof e=="object"?this.expressionMap.orderBys=e:n?this.expressionMap.orderBys={[e]:{order:t,nulls:n}}:this.expressionMap.orderBys={[e]:t}:this.expressionMap.orderBys={},this}addOrderBy(e,t="ASC",n){return n?this.expressionMap.orderBys[e]={order:t,nulls:n}:this.expressionMap.orderBys[e]=t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new $e(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach(n=>{const i=this.expressionMap.mainAlias.metadata.getEntityIdMap(n);if(!i)throw new $e("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(i)}),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.getValueSet(),t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,n={};for(const c in e)e[c]!==void 0&&(n[c]=e[c]);const i=[],s=[];if(t?(this.createPropertyPath(t,n).forEach(c=>{const u=t.findColumnsWithPropertyPath(c);if(u.length<=0)throw new Oc(c,t);u.forEach(f=>{if(!f.isUpdate||s.includes(f))return;s.push(f);let l=f.getEntityValue(n);if(f.referencedColumn&&typeof l=="object"&&!(l instanceof Date)&&l!==null&&!Buffer.isBuffer(l)?l=f.referencedColumn.getEntityValue(l):typeof l!="function"&&(l=this.connection.driver.preparePersistentValue(l,f)),typeof l=="function")i.push(this.escape(f.databaseName)+" = "+l());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&l===null)i.push(this.escape(f.databaseName)+" = NULL");else{this.connection.driver.options.type==="mssql"&&(l=this.connection.driver.parametrizeValue(f,l));const d=this.createParameter(l);let h=null;if((Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")&&this.connection.driver.spatialTypes.indexOf(f.type)!==-1){const p=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";f.srid!=null?h=`${p}(${d}, ${f.srid})`:h=`${p}(${d})`}else Ge.isPostgresFamily(this.connection.driver)&&this.connection.driver.spatialTypes.indexOf(f.type)!==-1?f.srid!=null?h=`ST_SetSRID(ST_GeomFromGeoJSON(${d}), ${f.srid})::${f.type}`:h=`ST_GeomFromGeoJSON(${d})::${f.type}`:this.connection.driver.options.type==="mssql"&&this.connection.driver.spatialTypes.indexOf(f.type)!==-1?h=f.type+"::STGeomFromText("+d+", "+(f.srid||"0")+")":h=d;i.push(this.escape(f.databaseName)+" = "+h)}})}),(i.length>0||Object.keys(n).length===0)&&(t.versionColumn&&s.indexOf(t.versionColumn)===-1&&i.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&s.indexOf(t.updateDateColumn)===-1&&i.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(n).map(c=>{const u=n[c];if(typeof u=="function")i.push(this.escape(c)+" = "+u());else if((this.connection.driver.options.type==="sap"||this.connection.driver.options.type==="spanner")&&u===null)i.push(this.escape(c)+" = NULL");else{const f=this.createParameter(u);i.push(this.escape(c)+" = "+f)}}),i.length<=0)throw new gT;const a=this.createWhereExpression(),o=this.createReturningExpression("update");return o===""?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${a}`:this.connection.driver.options.type==="mssql"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")} OUTPUT ${o}${a}`:this.connection.driver.options.type==="spanner"?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${a} THEN RETURN ${o}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${i.join(", ")}${a} RETURNING ${o}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map(t=>typeof e[t]=="string"?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls).join(", "):""}createLimitExpression(){const e=this.expressionMap.limit;if(e){if(Ge.isMySQLFamily(this.connection.driver)||this.connection.driver.options.type==="aurora-mysql")return" LIMIT "+e;throw new zJ}return""}getValueSet(){if(typeof this.expressionMap.valuesSet=="object")return this.expressionMap.valuesSet;throw new gT}}function v_e(){Qr.registerQueryBuilderClass("DeleteQueryBuilder",r=>new r_e(r)),Qr.registerQueryBuilderClass("InsertQueryBuilder",r=>new c_e(r)),Qr.registerQueryBuilderClass("RelationQueryBuilder",r=>new f_e(r)),Qr.registerQueryBuilderClass("SelectQueryBuilder",r=>new hN(r)),Qr.registerQueryBuilderClass("SoftDeleteQueryBuilder",r=>new b_e(r)),Qr.registerQueryBuilderClass("UpdateQueryBuilder",r=>new g_e(r))}function EU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function AU(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EU(Object(t),!0).forEach(function(n){x_e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function x_e(r,e,t){return e=w_e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function w_e(r){var e=E_e(r,"string");return typeof e=="symbol"?e:String(e)}function E_e(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}GJ({});function GJ(r){return e.withOptions=t=>GJ(AU(AU({},r),t)),e;function e(t,...n){const i=typeof t=="string"?[t]:t.raw,{alignValues:s=!1,escapeSpecialCharacters:a=Array.isArray(t),trimWhitespace:o=!0}=r;let c="";for(let l=0;l<i.length;l++){let d=i[l];if(a&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),c+=d,l<n.length){const h=s?A_e(n[l],c):n[l];c+=h}}const u=c.split(`
`);let f=null;for(const l of u){const d=l.match(/^(\s+)\S+/);if(d){const h=d[1].length;f?f=Math.min(f,h):f=h}}if(f!==null){const l=f;c=u.map(d=>d[0]===" "||d[0]==="	"?d.slice(l):d).join(`
`)}return o&&(c=c.trim()),a&&(c=c.replace(/\\n/g,`
`)),c}}function A_e(r,e){if(typeof r!="string"||!r.includes(`
`))return r;const n=e.slice(e.lastIndexOf(`
`)+1).match(/^(\s+)/);if(n){const i=n[1];return r.replace(/\n/g,`
${i}`)}return r}var __e={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(Ht,function(){var t=1e3,n=6e4,i=36e5,s="millisecond",a="second",o="minute",c="hour",u="day",f="week",l="month",d="quarter",h="year",y="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var w=["th","st","nd","rd"],P=A%100;return"["+A+(w[(P-20)%10]||w[P]||w[0])+"]"}},b=function(A,w,P){var k=String(A);return!k||k.length>=w?A:""+Array(w+1-k.length).join(P)+A},_={s:b,z:function(A){var w=-A.utcOffset(),P=Math.abs(w),k=Math.floor(P/60),D=P%60;return(w<=0?"+":"-")+b(k,2,"0")+":"+b(D,2,"0")},m:function A(w,P){if(w.date()<P.date())return-A(P,w);var k=12*(P.year()-w.year())+(P.month()-w.month()),D=w.clone().add(k,l),T=P-D<0,M=w.clone().add(k+(T?-1:1),l);return+(-(k+(P-D)/(T?D-M:M-D))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:l,y:h,w:f,d:u,D:y,h:c,m:o,s:a,ms:s,Q:d}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},C="en",N={};N[C]=v;var x="$isDayjsObject",I=function(A){return A instanceof E||!(!A||!A[x])},$=function A(w,P,k){var D;if(!w)return C;if(typeof w=="string"){var T=w.toLowerCase();N[T]&&(D=T),P&&(N[T]=P,D=T);var M=w.split("-");if(!D&&M.length>1)return A(M[0])}else{var L=w.name;N[L]=w,D=L}return!k&&D&&(C=D),D||!k&&C},j=function(A,w){if(I(A))return A.clone();var P=typeof w=="object"?w:{};return P.date=A,P.args=arguments,new E(P)},O=_;O.l=$,O.i=I,O.w=function(A,w){return j(A,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var E=function(){function A(P){this.$L=$(P.locale,null,!0),this.parse(P),this.$x=this.$x||P.x||{},this[x]=!0}var w=A.prototype;return w.parse=function(P){this.$d=function(k){var D=k.date,T=k.utc;if(D===null)return new Date(NaN);if(O.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var M=D.match(g);if(M){var L=M[2]-1||0,K=(M[7]||"0").substring(0,3);return T?new Date(Date.UTC(M[1],L,M[3]||1,M[4]||0,M[5]||0,M[6]||0,K)):new Date(M[1],L,M[3]||1,M[4]||0,M[5]||0,M[6]||0,K)}}return new Date(D)}(P),this.init()},w.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},w.$utils=function(){return O},w.isValid=function(){return this.$d.toString()!==p},w.isSame=function(P,k){var D=j(P);return this.startOf(k)<=D&&D<=this.endOf(k)},w.isAfter=function(P,k){return j(P)<this.startOf(k)},w.isBefore=function(P,k){return this.endOf(k)<j(P)},w.$g=function(P,k,D){return O.u(P)?this[k]:this.set(D,P)},w.unix=function(){return Math.floor(this.valueOf()/1e3)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function(P,k){var D=this,T=!!O.u(k)||k,M=O.p(P),L=function(oe,ce){var xe=O.w(D.$u?Date.UTC(D.$y,ce,oe):new Date(D.$y,ce,oe),D);return T?xe:xe.endOf(u)},K=function(oe,ce){return O.w(D.toDate()[oe].apply(D.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(ce)),D)},Y=this.$W,re=this.$M,ne=this.$D,ae="set"+(this.$u?"UTC":"");switch(M){case h:return T?L(1,0):L(31,11);case l:return T?L(1,re):L(0,re+1);case f:var ie=this.$locale().weekStart||0,fe=(Y<ie?Y+7:Y)-ie;return L(T?ne-fe:ne+(6-fe),re);case u:case y:return K(ae+"Hours",0);case c:return K(ae+"Minutes",1);case o:return K(ae+"Seconds",2);case a:return K(ae+"Milliseconds",3);default:return this.clone()}},w.endOf=function(P){return this.startOf(P,!1)},w.$set=function(P,k){var D,T=O.p(P),M="set"+(this.$u?"UTC":""),L=(D={},D[u]=M+"Date",D[y]=M+"Date",D[l]=M+"Month",D[h]=M+"FullYear",D[c]=M+"Hours",D[o]=M+"Minutes",D[a]=M+"Seconds",D[s]=M+"Milliseconds",D)[T],K=T===u?this.$D+(k-this.$W):k;if(T===l||T===h){var Y=this.clone().set(y,1);Y.$d[L](K),Y.init(),this.$d=Y.set(y,Math.min(this.$D,Y.daysInMonth())).$d}else L&&this.$d[L](K);return this.init(),this},w.set=function(P,k){return this.clone().$set(P,k)},w.get=function(P){return this[O.p(P)]()},w.add=function(P,k){var D,T=this;P=Number(P);var M=O.p(k),L=function(re){var ne=j(T);return O.w(ne.date(ne.date()+Math.round(re*P)),T)};if(M===l)return this.set(l,this.$M+P);if(M===h)return this.set(h,this.$y+P);if(M===u)return L(1);if(M===f)return L(7);var K=(D={},D[o]=n,D[c]=i,D[a]=t,D)[M]||1,Y=this.$d.getTime()+P*K;return O.w(Y,this)},w.subtract=function(P,k){return this.add(-1*P,k)},w.format=function(P){var k=this,D=this.$locale();if(!this.isValid())return D.invalidDate||p;var T=P||"YYYY-MM-DDTHH:mm:ssZ",M=O.z(this),L=this.$H,K=this.$m,Y=this.$M,re=D.weekdays,ne=D.months,ae=D.meridiem,ie=function(ce,xe,ge,me){return ce&&(ce[xe]||ce(k,T))||ge[xe].slice(0,me)},fe=function(ce){return O.s(L%12||12,ce,"0")},oe=ae||function(ce,xe,ge){var me=ce<12?"AM":"PM";return ge?me.toLowerCase():me};return T.replace(m,function(ce,xe){return xe||function(ge){switch(ge){case"YY":return String(k.$y).slice(-2);case"YYYY":return O.s(k.$y,4,"0");case"M":return Y+1;case"MM":return O.s(Y+1,2,"0");case"MMM":return ie(D.monthsShort,Y,ne,3);case"MMMM":return ie(ne,Y);case"D":return k.$D;case"DD":return O.s(k.$D,2,"0");case"d":return String(k.$W);case"dd":return ie(D.weekdaysMin,k.$W,re,2);case"ddd":return ie(D.weekdaysShort,k.$W,re,3);case"dddd":return re[k.$W];case"H":return String(L);case"HH":return O.s(L,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return oe(L,K,!0);case"A":return oe(L,K,!1);case"m":return String(K);case"mm":return O.s(K,2,"0");case"s":return String(k.$s);case"ss":return O.s(k.$s,2,"0");case"SSS":return O.s(k.$ms,3,"0");case"Z":return M}return null}(ce)||M.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function(P,k,D){var T,M=this,L=O.p(k),K=j(P),Y=(K.utcOffset()-this.utcOffset())*n,re=this-K,ne=function(){return O.m(M,K)};switch(L){case h:T=ne()/12;break;case l:T=ne();break;case d:T=ne()/3;break;case f:T=(re-Y)/6048e5;break;case u:T=(re-Y)/864e5;break;case c:T=re/i;break;case o:T=re/n;break;case a:T=re/t;break;default:T=re}return D?T:O.a(T)},w.daysInMonth=function(){return this.endOf(l).$D},w.$locale=function(){return N[this.$L]},w.locale=function(P,k){if(!P)return this.$L;var D=this.clone(),T=$(P,k,!0);return T&&(D.$L=T),D},w.clone=function(){return O.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},A}(),S=E.prototype;return j.prototype=S,[["$ms",s],["$s",a],["$m",o],["$H",c],["$W",u],["$M",l],["$y",h],["$D",y]].forEach(function(A){S[A[1]]=function(w){return this.$g(w,A[0],A[1])}}),j.extend=function(A,w){return A.$i||(A(w,E,j),A.$i=!0),j},j.locale=$,j.isDayjs=I,j.unix=function(A){return j(1e3*A)},j.en=N[C],j.Ls=N,j.p={},j})})(__e);var _U;(function(r){r.VIEW="VIEW",r.MATERIALIZED_VIEW="MATERIALIZED_VIEW",r.GENERATED_COLUMN="GENERATED_COLUMN"})(_U||(_U={}));class ma{}ma.AFTER_LOAD="after-load";ma.BEFORE_INSERT="before-insert";ma.AFTER_INSERT="after-insert";ma.BEFORE_UPDATE="before-update";ma.AFTER_UPDATE="after-update";ma.BEFORE_REMOVE="before-remove";ma.AFTER_REMOVE="after-remove";ma.BEFORE_SOFT_REMOVE="before-soft-remove";ma.AFTER_SOFT_REMOVE="after-soft-remove";ma.BEFORE_RECOVER="before-recover";ma.AFTER_RECOVER="after-recover";v_e();function Ps(){const r=VJ.getGlobalVariable();return r.typeormMetadataArgsStorage||(r.typeormMetadataArgsStorage=new FAe),r.typeormMetadataArgsStorage}function ft(r,e){return function(t,n){let i;typeof r=="string"||typeof r=="function"?i=r:r&&(e=r,i=r.type),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&s&&(i=s),!e.type&&i&&(e.type=i),e.type==="hstore"&&!e.hstoreType&&(e.hstoreType=s===Object?"object":"string"),typeof r=="function")Ps().embeddeds.push({target:t.constructor,propertyName:n,isArray:s===Array||e.array===!0,prefix:e.prefix!==void 0?e.prefix:void 0,type:r});else{if(!e.type)throw new HJ(t,n);e.unique===!0&&Ps().uniques.push({target:t.constructor,columns:[n]}),Ps().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&Ps().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}}function qf(r,e){return function(t,n){let i;r===String||r===Boolean||r===Number?i=r:e=Object.assign({},r),e||(e={});const s=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",t,n):void 0;if(!i&&s&&(i=s),!e.type&&i&&(e.type=i),!e.type)throw new HJ(t,n);if(e.nullable)throw new qAe(t,n);e.primary=!0,Ps().columns.push({target:t.constructor,propertyName:n,mode:"regular",options:e}),e.generated&&Ps().generations.push({target:t.constructor,propertyName:n,strategy:typeof e.generated=="string"?e.generated:"increment"})}}function pN(){return function(r,e){Ps().entityListeners.push({target:r.constructor,propertyName:e,type:ma.BEFORE_INSERT})}}function QJ(){return function(r,e){Ps().entityListeners.push({target:r.constructor,propertyName:e,type:ma.BEFORE_UPDATE})}}function _9(r){return function(e,t){r=r||{},Ps().joinTables.push({target:e.constructor,propertyName:t,name:r.name,joinColumns:r&&r.joinColumn?[r.joinColumn]:r.joinColumns,inverseJoinColumns:r&&r.inverseJoinColumn?[r.inverseJoinColumn]:r.inverseJoinColumns,schema:r&&r.schema?r.schema:void 0,database:r&&r.database?r.database:void 0,synchronize:!(r&&r.synchronize===!1)})}}function G0(r,e,t){let n;return ur.isObject(e)?t=e:n=e,function(i,s){t||(t={});let a=t.lazy===!0;if(!a&&Reflect&&Reflect.getMetadata){const o=Reflect.getMetadata("design:type",i,s);o&&typeof o.name=="string"&&o.name.toLowerCase()==="promise"&&(a=!0)}Ps().relations.push({target:i.constructor,propertyName:s,relationType:"many-to-many",isLazy:a,type:r,inverseSideProperty:n,options:t})}}function mu(r,e,t){let n;return ur.isObject(e)?t=e:n=e,function(i,s){t||(t={});let a=t&&t.lazy===!0;if(!a&&Reflect&&Reflect.getMetadata){const o=Reflect.getMetadata("design:type",i,s);o&&typeof o.name=="string"&&o.name.toLowerCase()==="promise"&&(a=!0)}Ps().relations.push({target:i.constructor,propertyName:s,relationType:"many-to-one",isLazy:a,type:r,inverseSideProperty:n,options:t})}}function bu(r,e,t){return function(n,i){t||(t={});let s=t&&t.lazy===!0;if(!s&&Reflect&&Reflect.getMetadata){const a=Reflect.getMetadata("design:type",n,i);a&&typeof a.name=="string"&&a.name.toLowerCase()==="promise"&&(s=!0)}Ps().relations.push({target:n.constructor,propertyName:i,isLazy:s,relationType:"one-to-many",type:r,inverseSideProperty:e,options:t})}}function Vf(r,e){const t=(ur.isObject(r)?r:e)||{},n=typeof r=="string"?r:t.name;return function(i){Ps().tables.push({target:i,name:n,type:"regular",orderBy:t.orderBy?t.orderBy:void 0,engine:t.engine?t.engine:void 0,database:t.database?t.database:void 0,schema:t.schema?t.schema:void 0,synchronize:t.synchronize,withoutRowid:t.withoutRowid,comment:t.comment?t.comment:void 0})}}function S_e(r,e,t){const n=typeof r=="string"?r:void 0,i=typeof r=="string"?e:r;let s=ur.isObject(r)&&!Array.isArray(r)?r:t;return s||(s=ur.isObject(e)&&!Array.isArray(e)?e:t),function(a,o){Ps().indices.push({target:o?a.constructor:a,name:n,columns:o?[o]:i,synchronize:!(s&&s.synchronize===!1),where:s?s.where:void 0,unique:!!(s&&s.unique),spatial:!!(s&&s.spatial),fulltext:!!(s&&s.fulltext),nullFiltered:!!(s&&s.nullFiltered),parser:s?s.parser:void 0,sparse:!!(s&&s.sparse),background:!!(s&&s.background),concurrent:!!(s&&s.concurrent),expireAfterSeconds:s?s.expireAfterSeconds:void 0})}}class Q0{hasId(){return this.constructor.getRepository().hasId(this)}save(e){return this.constructor.getRepository().save(this,e)}remove(e){return this.constructor.getRepository().remove(this,e)}softRemove(e){return this.constructor.getRepository().softRemove(this,e)}recover(e){return this.constructor.getRepository().recover(this,e)}async reload(){const e=this.constructor,t=e.getRepository().metadata.getEntityIdMap(this);if(!t)throw new Error("Entity doesn't have id-s set, cannot reload entity");const n=await e.getRepository().findOneByOrFail(t);ur.assign(this,n)}static useDataSource(e){this.dataSource=e}static getRepository(){const e=this.dataSource;if(!e)throw new Error("DataSource is not set for this entity.");return e.getRepository(this)}static get target(){return this.getRepository().target}static hasId(e){return this.getRepository().hasId(e)}static getId(e){return this.getRepository().getId(e)}static createQueryBuilder(e){return this.getRepository().createQueryBuilder(e)}static create(e){return this.getRepository().create(e)}static merge(e,...t){return this.getRepository().merge(e,...t)}static preload(e){return this.getRepository().preload(e)}static save(e,t){return this.getRepository().save(e,t)}static remove(e,t){return this.getRepository().remove(e,t)}static softRemove(e,t){return this.getRepository().softRemove(e,t)}static insert(e){return this.getRepository().insert(e)}static update(e,t){return this.getRepository().update(e,t)}static upsert(e,t){return this.getRepository().upsert(e,t)}static delete(e){return this.getRepository().delete(e)}static exists(e){return this.getRepository().exists(e)}static existsBy(e){return this.getRepository().existsBy(e)}static count(e){return this.getRepository().count(e)}static countBy(e){return this.getRepository().countBy(e)}static sum(e,t){return this.getRepository().sum(e,t)}static average(e,t){return this.getRepository().average(e,t)}static minimum(e,t){return this.getRepository().minimum(e,t)}static maximum(e,t){return this.getRepository().maximum(e,t)}static find(e){return this.getRepository().find(e)}static findBy(e){return this.getRepository().findBy(e)}static findAndCount(e){return this.getRepository().findAndCount(e)}static findAndCountBy(e){return this.getRepository().findAndCountBy(e)}static findByIds(e){return this.getRepository().findByIds(e)}static findOne(e){return this.getRepository().findOne(e)}static findOneBy(e){return this.getRepository().findOneBy(e)}static findOneById(e){return this.getRepository().findOneById(e)}static findOneOrFail(e){return this.getRepository().findOneOrFail(e)}static findOneByOrFail(e){return this.getRepository().findOneByOrFail(e)}static query(e,t){return this.getRepository().query(e,t)}static clear(){return this.getRepository().clear()}}var Tp=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},N6=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let ou=class extends Q0{constructor(){super(...arguments);H(this,"kid");H(this,"kms");H(this,"type");H(this,"publicKeyHex");H(this,"meta");H(this,"identifier")}};Tp([qf(),N6("design:type",String)],ou.prototype,"kid",void 0);Tp([ft(),N6("design:type",String)],ou.prototype,"kms",void 0);Tp([ft(),N6("design:type",String)],ou.prototype,"type",void 0);Tp([ft(),N6("design:type",String)],ou.prototype,"publicKeyHex",void 0);Tp([ft({type:"simple-json",nullable:!0,transformer:{to:r=>r,from:r=>r}}),N6("design:type",Object)],ou.prototype,"meta",void 0);Tp([mu(r=>Wt,r=>r==null?void 0:r.keys,{onDelete:"CASCADE"}),N6("design:type",Object)],ou.prototype,"identifier",void 0);ou=Tp([Vf("key")],ou);var O6=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},J5=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let L0=class extends Q0{constructor(){super(...arguments);H(this,"id");H(this,"type");H(this,"serviceEndpoint");H(this,"description");H(this,"identifier")}};O6([qf(),J5("design:type",String)],L0.prototype,"id",void 0);O6([ft(),J5("design:type",String)],L0.prototype,"type",void 0);O6([ft(),J5("design:type",String)],L0.prototype,"serviceEndpoint",void 0);O6([ft({nullable:!0}),J5("design:type",String)],L0.prototype,"description",void 0);O6([mu(r=>Wt,r=>r==null?void 0:r.services,{onDelete:"CASCADE"}),J5("design:type",Object)],L0.prototype,"identifier",void 0);L0=O6([Vf("service")],L0);var co=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rc=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let di=class extends Q0{constructor(){super(...arguments);H(this,"hash");H(this,"issuer");H(this,"subject");H(this,"credential");H(this,"issuanceDate");H(this,"expirationDate");H(this,"context");H(this,"credentialType");H(this,"type");H(this,"value");H(this,"isObj")}};co([qf(),rc("design:type",String)],di.prototype,"hash",void 0);co([mu(r=>Wt,r=>r.issuedClaims,{eager:!0,onDelete:"CASCADE"}),rc("design:type",Object)],di.prototype,"issuer",void 0);co([mu(r=>Wt,r=>r.receivedClaims,{eager:!0,nullable:!0}),rc("design:type",Object)],di.prototype,"subject",void 0);co([mu(r=>An,r=>r.claims,{onDelete:"CASCADE"}),rc("design:type",Object)],di.prototype,"credential",void 0);co([ft(),rc("design:type",Date)],di.prototype,"issuanceDate",void 0);co([ft({nullable:!0}),rc("design:type",Date)],di.prototype,"expirationDate",void 0);co([ft("simple-array"),rc("design:type",Array)],di.prototype,"context",void 0);co([ft("simple-array"),rc("design:type",Array)],di.prototype,"credentialType",void 0);co([ft(),rc("design:type",String)],di.prototype,"type",void 0);co([ft("text",{nullable:!0}),rc("design:type",Object)],di.prototype,"value",void 0);co([ft(),rc("design:type",Boolean)],di.prototype,"isObj",void 0);di=co([Vf("claim")],di);var ba=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},da=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let An=class extends Q0{constructor(){super(...arguments);H(this,"hash");H(this,"_raw");H(this,"issuer");H(this,"subject");H(this,"id");H(this,"issuanceDate");H(this,"expirationDate");H(this,"context");H(this,"type");H(this,"claims");H(this,"presentations");H(this,"messages")}set raw(t){this._raw=t,this.hash=OI(t)}get raw(){return this._raw}};ba([qf(),da("design:type",String)],An.prototype,"hash",void 0);ba([ft("simple-json"),da("design:type",Object),da("design:paramtypes",[Object])],An.prototype,"raw",null);ba([mu(r=>Wt,r=>r.issuedCredentials,{cascade:["insert"],eager:!0,onDelete:"CASCADE"}),da("design:type",Object)],An.prototype,"issuer",void 0);ba([mu(r=>Wt,r=>r==null?void 0:r.receivedCredentials,{cascade:["insert"],eager:!0,nullable:!0}),da("design:type",Object)],An.prototype,"subject",void 0);ba([ft({nullable:!0}),da("design:type",String)],An.prototype,"id",void 0);ba([ft(),da("design:type",Date)],An.prototype,"issuanceDate",void 0);ba([ft({nullable:!0}),da("design:type",Date)],An.prototype,"expirationDate",void 0);ba([ft("simple-array"),da("design:type",Array)],An.prototype,"context",void 0);ba([ft("simple-array"),da("design:type",Array)],An.prototype,"type",void 0);ba([bu(r=>di,r=>r.credential,{cascade:["insert"]}),da("design:type",Object)],An.prototype,"claims",void 0);ba([G0(r=>hi,r=>r.credentials),da("design:type",Object)],An.prototype,"presentations",void 0);ba([G0(r=>gr,r=>r.credentials),da("design:type",Object)],An.prototype,"messages",void 0);An=ba([Vf("credential")],An);var uo=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},io=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let hi=class extends Q0{constructor(){super(...arguments);H(this,"hash");H(this,"_raw");H(this,"holder");H(this,"verifier");H(this,"id");H(this,"issuanceDate");H(this,"expirationDate");H(this,"context");H(this,"type");H(this,"credentials");H(this,"messages")}set raw(t){this._raw=t,this.hash=OI(t)}get raw(){return this._raw}};uo([qf(),io("design:type",String)],hi.prototype,"hash",void 0);uo([ft({type:"simple-json"}),io("design:type",Object),io("design:paramtypes",[Object])],hi.prototype,"raw",null);uo([mu(r=>Wt,r=>r.issuedPresentations,{cascade:["insert"],eager:!0,onDelete:"CASCADE"}),io("design:type",Object)],hi.prototype,"holder",void 0);uo([G0(r=>Wt,r=>r==null?void 0:r.receivedPresentations,{cascade:["insert"],eager:!0,nullable:!0}),_9(),io("design:type",Object)],hi.prototype,"verifier",void 0);uo([ft({nullable:!0}),io("design:type",String)],hi.prototype,"id",void 0);uo([ft(),io("design:type",Date)],hi.prototype,"issuanceDate",void 0);uo([ft({nullable:!0}),io("design:type",Date)],hi.prototype,"expirationDate",void 0);uo([ft("simple-array"),io("design:type",Array)],hi.prototype,"context",void 0);uo([ft("simple-array"),io("design:type",Array)],hi.prototype,"type",void 0);uo([G0(r=>An,r=>r.presentations,{cascade:!0}),_9(),io("design:type",Object)],hi.prototype,"credentials",void 0);uo([G0(r=>gr,r=>r.presentations),io("design:type",Object)],hi.prototype,"messages",void 0);hi=uo([Vf("presentation")],hi);var pn=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},br=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let gr=class extends Q0{constructor(){super(...arguments);H(this,"id");H(this,"saveDate");H(this,"updateDate");H(this,"createdAt");H(this,"expiresAt");H(this,"threadId");H(this,"type");H(this,"raw");H(this,"data");H(this,"replyTo");H(this,"replyUrl");H(this,"from");H(this,"to");H(this,"metaData");H(this,"presentations");H(this,"credentials")}setId(){this.id||(this.id=OI(this.raw||EEe()))}setSaveDate(){this.saveDate=new Date,this.updateDate=new Date}setUpdateDate(){this.updateDate=new Date}};pn([pN(),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",void 0)],gr.prototype,"setId",null);pn([qf(),br("design:type",String)],gr.prototype,"id",void 0);pn([pN(),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",void 0)],gr.prototype,"setSaveDate",null);pn([QJ(),br("design:type",Function),br("design:paramtypes",[]),br("design:returntype",void 0)],gr.prototype,"setUpdateDate",null);pn([ft({select:!1}),br("design:type",Date)],gr.prototype,"saveDate",void 0);pn([ft({select:!1}),br("design:type",Date)],gr.prototype,"updateDate",void 0);pn([ft({nullable:!0}),br("design:type",Date)],gr.prototype,"createdAt",void 0);pn([ft({nullable:!0}),br("design:type",Date)],gr.prototype,"expiresAt",void 0);pn([ft({nullable:!0}),br("design:type",String)],gr.prototype,"threadId",void 0);pn([ft(),br("design:type",String)],gr.prototype,"type",void 0);pn([ft({nullable:!0}),br("design:type",String)],gr.prototype,"raw",void 0);pn([ft("simple-json",{nullable:!0}),br("design:type",Object)],gr.prototype,"data",void 0);pn([ft("simple-array",{nullable:!0}),br("design:type",Array)],gr.prototype,"replyTo",void 0);pn([ft({nullable:!0}),br("design:type",String)],gr.prototype,"replyUrl",void 0);pn([mu(r=>Wt,r=>r.sentMessages,{nullable:!0,cascade:["insert"],eager:!0,onDelete:"CASCADE"}),br("design:type",Object)],gr.prototype,"from",void 0);pn([mu(r=>Wt,r=>r.receivedMessages,{nullable:!0,cascade:["insert"],eager:!0,onDelete:"CASCADE"}),br("design:type",Object)],gr.prototype,"to",void 0);pn([ft("simple-json",{nullable:!0}),br("design:type",Object)],gr.prototype,"metaData",void 0);pn([G0(r=>hi,r=>r.messages,{cascade:!0}),_9(),br("design:type",Object)],gr.prototype,"presentations",void 0);pn([G0(r=>An,r=>r.messages,{cascade:!0}),_9(),br("design:type",Object)],gr.prototype,"credentials",void 0);gr=pn([Vf("message")],gr);var _n=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Yr=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let Wt=class extends Q0{constructor(){super(...arguments);H(this,"did");H(this,"provider");H(this,"alias");H(this,"saveDate");H(this,"updateDate");H(this,"controllerKeyId");H(this,"keys");H(this,"services");H(this,"sentMessages");H(this,"receivedMessages");H(this,"issuedPresentations");H(this,"receivedPresentations");H(this,"issuedCredentials");H(this,"receivedCredentials");H(this,"issuedClaims");H(this,"receivedClaims")}setSaveDate(){this.saveDate=new Date,this.updateDate=new Date}setUpdateDate(){this.updateDate=new Date}async getLatestClaimValue(t,n){const i=await(await t).getRepository(di).findOne({where:{...n,subject:this.did},order:{issuanceDate:"DESC"}});return i==null?void 0:i.value}shortDid(){return`${this.did.slice(0,15)}...${this.did.slice(-4)}`}};_n([qf(),Yr("design:type",String)],Wt.prototype,"did",void 0);_n([ft({nullable:!0}),Yr("design:type",String)],Wt.prototype,"provider",void 0);_n([ft({nullable:!0}),Yr("design:type",String)],Wt.prototype,"alias",void 0);_n([pN(),Yr("design:type",Function),Yr("design:paramtypes",[]),Yr("design:returntype",void 0)],Wt.prototype,"setSaveDate",null);_n([QJ(),Yr("design:type",Function),Yr("design:paramtypes",[]),Yr("design:returntype",void 0)],Wt.prototype,"setUpdateDate",null);_n([ft({select:!1}),Yr("design:type",Date)],Wt.prototype,"saveDate",void 0);_n([ft({select:!1}),Yr("design:type",Date)],Wt.prototype,"updateDate",void 0);_n([ft({nullable:!0}),Yr("design:type",String)],Wt.prototype,"controllerKeyId",void 0);_n([bu(r=>ou,r=>r.identifier),Yr("design:type",Array)],Wt.prototype,"keys",void 0);_n([bu(r=>L0,r=>r.identifier,{cascade:!0}),Yr("design:type",Array)],Wt.prototype,"services",void 0);_n([bu(r=>gr,r=>r.from),Yr("design:type",Array)],Wt.prototype,"sentMessages",void 0);_n([bu(r=>gr,r=>r.to),Yr("design:type",Array)],Wt.prototype,"receivedMessages",void 0);_n([bu(r=>hi,r=>r.holder),Yr("design:type",Array)],Wt.prototype,"issuedPresentations",void 0);_n([G0(r=>hi,r=>r.verifier),Yr("design:type",Array)],Wt.prototype,"receivedPresentations",void 0);_n([bu(r=>An,r=>r.issuer),Yr("design:type",Array)],Wt.prototype,"issuedCredentials",void 0);_n([bu(r=>An,r=>r.subject),Yr("design:type",Array)],Wt.prototype,"receivedCredentials",void 0);_n([bu(r=>di,r=>r.issuer),Yr("design:type",Array)],Wt.prototype,"issuedClaims",void 0);_n([bu(r=>di,r=>r.subject),Yr("design:type",Array)],Wt.prototype,"receivedClaims",void 0);Wt=_n([Vf("identifier"),S_e(["alias","provider"],{unique:!0})],Wt);Mt("veramo:typeorm:identifier-store");Mt("veramo:typeorm:key-store");var S9=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},yN=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let d2=class extends Q0{constructor(){super(...arguments);H(this,"alias");H(this,"type");H(this,"privateKeyHex")}};S9([qf(),yN("design:type",String)],d2.prototype,"alias",void 0);S9([ft(),yN("design:type",String)],d2.prototype,"type",void 0);S9([ft(),yN("design:type",String)],d2.prototype,"privateKeyHex",void 0);d2=S9([Vf("private-key")],d2);Mt("veramo:typeorm:key-store");var mN=function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(a=r[o])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ZJ=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)};let aw=class extends ou{constructor(){super(...arguments);H(this,"kid");H(this,"privateKeyHex")}};mN([qf(),ZJ("design:type",String)],aw.prototype,"kid",void 0);mN([ft({nullable:!0}),ZJ("design:type",String)],aw.prototype,"privateKeyHex",void 0);aw=mN([Vf("key")],aw);Mt("veramo:data-store:initial-migration");Mt("veramo:data-store:migrate-private-keys");Mt("veramo:data-store:migrate-presentation-issuance-date");var M_e={};function SU(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function JJ(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=function(i,s){if(i){if(typeof i=="string")return SU(i,s);var a={}.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?SU(i,s):void 0}}(r))||e){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cs(){return cs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},cs.apply(null,arguments)}function xT(r){return xT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xT(r)}function Rt(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,h2(r,e)}function YJ(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YJ=function(){return!!r})()}function h2(r,e){return h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},h2(r,e)}function Hm(r){var e=typeof Map=="function"?new Map:void 0;return Hm=function(t){if(t===null||!function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(i,s,a){if(YJ())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,s);var c=new(i.bind.apply(i,o));return a&&h2(c,a.prototype),c}(t,arguments,xT(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h2(n,t)},Hm(r)}const XJ=(r,e,t=[])=>{const n=Object.getOwnPropertyDescriptors(e);for(let i of t)delete n[i];Object.defineProperties(r,n)},Gb=(r,e=[r])=>{const t=Object.getPrototypeOf(r);return t===null?e:Gb(t,[...e,t])},MU=(r,e,t=[])=>{var n;const i=(n=((...o)=>{if(o.length===0)return;let c;const u=o.map(f=>Gb(f));for(;u.every(f=>f.length>0);){const f=u.map(d=>d.pop()),l=f[0];if(!f.every(d=>d===l))break;c=l}return c})(...r))!==null&&n!==void 0?n:Object.prototype,s=Object.create(i),a=Gb(i);for(let o of r){let c=Gb(o);for(let u=c.length-1;u>=0;u--){let f=c[u];a.indexOf(f)===-1&&(XJ(s,f,["constructor",...t]),a.push(f))}}return s.constructor=e,s},wT=r=>r.filter((e,t)=>r.indexOf(e)==t),eY=new WeakMap,P_e=r=>eY.get(r),PU=(r,e)=>{var t,n;const i=wT([...Object.getOwnPropertyNames(r),...Object.getOwnPropertyNames(e)]),s={};for(let a of i)s[a]=wT([...(t=r==null?void 0:r[a])!==null&&t!==void 0?t:[],...(n=e==null?void 0:e[a])!==null&&n!==void 0?n:[]]);return s},TU=(r,e)=>{var t,n,i,s;return{property:PU((t=r==null?void 0:r.property)!==null&&t!==void 0?t:{},(n=e==null?void 0:e.property)!==null&&n!==void 0?n:{}),method:PU((i=r==null?void 0:r.method)!==null&&i!==void 0?i:{},(s=e==null?void 0:e.method)!==null&&s!==void 0?s:{})}},T_e=new Map,CU=(r,e)=>{const t=r.property,n=r.method;if(t)for(let i in t)for(let s of t[i])s(e,i);if(n)for(let i in n)for(let s of n[i])s(e,i,Object.getOwnPropertyDescriptor(e,i))};var Ce,rt,C_e=function(r){function e(t){var n;return(n=r.call(this,"HTTP Error")||this).path=void 0,n.response=void 0,n.code=void 0,n.line=void 0,n.column=void 0,n.sourceURL=void 0,n.name=n.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n.stack=new Error().stack,n.path=t.path,n.response=t.response,t.line&&(n.line=t.line),t.column&&(n.line=t.column),t.sourceURL&&(n.sourceURL=t.sourceURL),t.code&&(n.code=t.code),n}return Rt(e,r),e}(Hm(Error)),IU=function(r){function e(t){var n;return(n=r.call(this,"Communication Error")||this).exception=void 0,n.name="CommunicationError",n.message=t.exception.message,n.exception=t.exception,Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error().stack,n}return Rt(e,r),e}(Hm(Error)),ET=function(r){function e(t){var n;return(n=r.call(this,t)||this).code=void 0,n.name=n.constructor.name,Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error().stack,n}return Rt(e,r),e}(Hm(Error));function bN(r,e){var t=new ET(r);return e&&((t=new ET(e+": "+r)).code=e),t}function Ze(r,e){throw bN(r,e)}function Pc(r,e){return Array.isArray(e)?e.some(function(t){return Pc(r,t)}):r instanceof Error&&e===I_e(r)}function I_e(r){if(r instanceof ET)return r.code;if(r!=null&&r.code){if(Object.values(Ce).includes(r.code))return Ce.from(r.code)}else if(r instanceof Error){var e=r.message.split(":")[0];if(e&&e.length>0&&Object.values(Ce).includes(e))return Ce.from(e)}}(function(r){r.AccountDoesntExist="AccountDoesntExist",r.AccountNotFound="AccountNotFound",r.AccountServiceError="AccountServiceError",r.CommunicationNotConnected="CommunicationNotConnected",r.CommunicationNotLoggedIn="CommunicationNotLoggedIn",r.CommunicationTimeout="CommunicationTimeout",r.CouldntCreateApi="CouldntCreateApi",r.DataQueryNoRowDataFound="DataQueryNoRowDataFound",r.InvalidLinkAuthRequest="InvalidLinkAuthRequest",r.InvalidChallenge="InvalidChallenge",r.InvalidData="InvalidData",r.InvalidKey="InvalidKey",r.InvalidArgumentType="InvalidArgumentType",r.InvalidKeyLevel="InvalidKeyLevel",r.InvalidQrCode="InvalidQrCode",r.InvalidUsername="InvalidUsername",r.InvalidRequestType="InvalidRequestType",r.InvalidRequestResponseType="InvalidRequestResponseType",r.JwtNotValid="JwtNotValid",r.KeyNotFound="KeyNotFound",r.LinkAuthFailed="LinkAuthFailed",r.MessageSendError="MessageSendError",r.MissingChallenge="MissingChallenge",r.MissingParams="MissingParams",r.OriginNotFound="OriginNotFound",r.OriginMismatch="OriginMismatch",r.PasswordFormatInvalid="PasswordFormatInvalid",r.PasswordInvalid="PasswordInvalid",r.RequestsNotFound="RequestsNotFound",r.ResponsesNotFound="ResponsesNotFound",r.PasswordTooCommon="PasswordTooCommon",r.PinInvalid="PinInvalid",r.ReferrerEmpty="ReferrerEmpty",r.SenderNotAuthorized="SenderNotAuthorized",r.SettingsNotInitialized="SettingsNotInitialized",r.UpdateKeysTransactionNoKeys="UpdateKeysTransactionNoKeys",r.UserDeactivated="UserDeactivated",r.UsernameNotFound="UsernameNotFound",r.UsernameTaken="UsernameTaken",r.UsernameNotDefined="UsernameNotDefined",r.UserNotLoggedIn="UserNotLoggedIn",r.UserNotLoggedInWithThisApp="UserNotLoggedInWithThisApp",r.UserRefreshed="UserRefreshed",r.WrongOrigin="WrongOrigin",r.UserCancelled="UserCancelled",r.UserLogout="UserLogout",r.VerificationDataNotFound="VerificationDataNotFound"})(Ce||(Ce={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]}}(Ce||(Ce={})),function(r){r.PASSWORD="PASSWORD",r.ACTIVE="ACTIVE",r.PIN="PIN",r.BIOMETRIC="BIOMETRIC",r.LOCAL="LOCAL",r.BROWSER_LOCAL_STORAGE="BROWSER_LOCAL_STORAGE",r.BROWSER_SESSION_STORAGE="BROWSER_SESSION_STORAGE"}(rt||(rt={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]},r.validate=function(e){if(r.indexFor(e)===-1)throw new Error(Ce.InvalidKeyLevel+": Invalid level")}}(rt||(rt={}));var R_e=function(){function r(){this.level=void 0,this.privateKey=void 0,this.challenge=void 0}return r.validate=function(e){rt.validate(e.level),e.challenge!==void 0&&(typeof e.challenge=="string"&&e.challenge.length!==0||Ze("Invalid challenge",Ce.InvalidChallenge))},r}(),N_e=function(){function r(){this.level=void 0,this.data=void 0,this.challenge=void 0,this.outputType=void 0}return r.validate=function(e){rt.validate(e.level),e.challenge!==void 0&&(typeof e.challenge=="string"&&e.challenge.length!==0||Ze("Invalid challenge",Ce.InvalidChallenge)),e.outputType&&e.outputType!=="jwt"&&e.outputType!=="transaction"&&Ze("Invalid output type",Ce.InvalidData)},r}(),fA=function(){function r(){this.level=void 0}return r.validate=function(e){rt.validate(e.level)},r}(),O_e=function(){function r(){this.level=void 0,this.challenge=void 0}return r.validate=function(e){rt.validate(e.level),e.challenge!==void 0&&(typeof e.challenge=="string"&&e.challenge.length!==0||Ze("Invalid challenge",Ce.InvalidChallenge))},r}(),k_e={get:function(r,e){e==="scope"&&Ze("Scope is a reserved key"),e==="cache"&&Ze("Cache is a reserved key");var t=r.scope+e;return e in r?(e==="clear"&&(r.cache={}),function(){r[e]()}):r.cache[t]?r.cache[t]:r.retrieve(t).then(function(n){return r.cache[t]=n,n}).catch(function(n){Ze("Could not get "+t+" from storage - "+n)})},set:function(r,e,t){try{var n=r.scope+e;return Promise.resolve(r.store(n,t).then(function(){return r.cache[n]=t,!0}).catch(function(){return!1}))}catch(i){return Promise.reject(i)}}},gN="tonomy.id.";function tY(r,e){var t=e(r);return t.cache={},new Proxy(t,k_e)}function vN(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function rY(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?vN(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}class D_e{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class B_e{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return nY(this,e)}}class $_e{constructor(e){this.decoders=e}or(e){return nY(this,e)}decode(e){const t=this.decoders[e[0]];if(t)return t.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nY=(r,e)=>new $_e({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class L_e{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new D_e(e,t,n),this.decoder=new B_e(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const M9=({name:r,prefix:e,encode:t,decode:n})=>new L_e(r,e,t,n),p2=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=function(s,a){if(s.length>=255)throw new TypeError("Alphabet too long");for(var o=new Uint8Array(256),c=0;c<o.length;c++)o[c]=255;for(var u=0;u<s.length;u++){var f=s.charAt(u),l=f.charCodeAt(0);if(o[l]!==255)throw new TypeError(f+" is ambiguous");o[l]=u}var d=s.length,h=s.charAt(0),y=Math.log(d)/Math.log(256),p=Math.log(256)/Math.log(d);function g(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var v=0;if(m[v]!==" "){for(var b=0,_=0;m[v]===h;)b++,v++;for(var C=(m.length-v)*y+1>>>0,N=new Uint8Array(C);m[v];){var x=o[m.charCodeAt(v)];if(x===255)return;for(var I=0,$=C-1;(x!==0||I<_)&&$!==-1;$--,I++)N[$]=(x+=d*N[$]>>>0)%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");_=I,v++}if(m[v]!==" "){for(var j=C-_;j!==C&&N[j]===0;)j++;for(var O=new Uint8Array(b+(C-j)),E=b;j!==C;)O[E++]=N[j++];return O}}}return{encode:function(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var v=0,b=0,_=0,C=m.length;_!==C&&m[_]===0;)_++,v++;for(var N=(C-_)*p+1>>>0,x=new Uint8Array(N);_!==C;){for(var I=m[_],$=0,j=N-1;(I!==0||$<b)&&j!==-1;j--,$++)x[j]=(I+=256*x[j]>>>0)%d>>>0,I=I/d>>>0;if(I!==0)throw new Error("Non-zero carry");b=$,_++}for(var O=N-b;O!==N&&x[O]===0;)O++;for(var E=h.repeat(v);O<N;++O)E+=s.charAt(x[O]);return E},decodeUnsafe:g,decode:function(m){var v=g(m);if(v)return v;throw new Error(`Non-${a} character`)}}}(t,e);return M9({prefix:r,name:e,encode:n,decode:s=>(a=>{if(a instanceof Uint8Array&&a.constructor.name==="Uint8Array")return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw new Error("Unknown type, must be binary type")})(i(s))})},ni=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>M9({prefix:e,name:r,encode:i=>((s,a,o)=>{const c=a[a.length-1]==="=",u=(1<<o)-1;let f="",l=0,d=0;for(let h=0;h<s.length;++h)for(d=d<<8|s[h],l+=8;l>o;)l-=o,f+=a[u&d>>l];if(l&&(f+=a[u&d<<o-l]),c)for(;f.length*o&7;)f+="=";return f})(i,n,t),decode:i=>((s,a,o,c)=>{const u={};for(let p=0;p<a.length;++p)u[a[p]]=p;let f=s.length;for(;s[f-1]==="=";)--f;const l=new Uint8Array(f*o/8|0);let d=0,h=0,y=0;for(let p=0;p<f;++p){const g=u[s[p]];if(g===void 0)throw new SyntaxError(`Non-${c} character`);h=h<<o|g,d+=o,d>=8&&(d-=8,l[y++]=255&h>>d)}if(d>=o||255&h<<8-d)throw new SyntaxError("Unexpected end of data");return l})(i,n,t,r)});var U_e={__proto__:null,identity:M9({prefix:"\0",name:"identity",encode:r=>{return e=r,new TextDecoder().decode(e);var e},decode:r=>(e=>new TextEncoder().encode(e))(r)})},F_e={__proto__:null,base2:ni({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})},j_e={__proto__:null,base8:ni({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})},q_e={__proto__:null,base10:p2({prefix:"9",name:"base10",alphabet:"0123456789"})},V_e={__proto__:null,base16:ni({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:ni({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})},z_e={__proto__:null,base32:ni({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper:ni({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad:ni({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper:ni({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex:ni({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper:ni({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad:ni({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:ni({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:ni({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},H_e={__proto__:null,base36:p2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:p2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},W_e={__proto__:null,base58btc:p2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:p2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},K_e={__proto__:null,base64:ni({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad:ni({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:ni({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:ni({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})};const iY=Array.from(""),G_e=iY.reduce((r,e,t)=>(r[t]=e,r),[]),Q_e=iY.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);var Z_e={__proto__:null,base256emoji:M9({prefix:"",name:"base256emoji",encode:function(r){return r.reduce((e,t)=>e+G_e[t],"")},decode:function(r){const e=[];for(const t of r){const n=Q_e[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}})},J_e=Math.pow(2,31),Y_e=Math.pow(2,7),X_e=Math.pow(2,14),eSe=Math.pow(2,21),tSe=Math.pow(2,28),rSe=Math.pow(2,35),nSe=Math.pow(2,42),iSe=Math.pow(2,49),sSe=Math.pow(2,56),aSe=Math.pow(2,63),ow={encode:function r(e,t,n){t=t||[];for(var i=n=n||0;e>=J_e;)t[n++]=255&e|128,e/=128;for(;-128&e;)t[n++]=255&e|128,e>>>=7;return t[n]=0|e,r.bytes=n-i+1,t},decode:function r(e,t){var n,i=0,s=0,a=t=t||0,o=e.length;do{if(a>=o)throw r.bytes=0,new RangeError("Could not decode varint");n=e[a++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return r.bytes=a-t,i},encodingLength:function(r){return r<Y_e?1:r<X_e?2:r<eSe?3:r<tSe?4:r<rSe?5:r<nSe?6:r<iSe?7:r<sSe?8:r<aSe?9:10}};const oSe=(r,e=0)=>[ow.decode(r,e),ow.decode.bytes];new TextEncoder,new TextDecoder;const RU={...U_e,...F_e,...j_e,...q_e,...V_e,...z_e,...H_e,...W_e,...K_e,...Z_e};function sY(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const NU=sY("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),lA=sY("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{const e=rY((r=r.substring(1)).length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),aY={utf8:NU,"utf-8":NU,hex:RU.base16,latin1:lA,ascii:lA,binary:lA,...RU};function xN(r,e="utf8"){const t=aY[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return e!=="utf8"&&e!=="utf-8"||globalThis.Buffer==null||globalThis.Buffer.from==null?t.decoder.decode(`${t.prefix}${r}`):vN(globalThis.Buffer.from(r,"utf-8"))}function oY(r,e="utf8"){const t=aY[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return e!=="utf8"&&e!=="utf-8"||globalThis.Buffer==null||globalThis.Buffer.from==null?t.encoder.encode(r).substring(1):globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8")}function OU(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function P9(r,...e){if(!((t=r)instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"))throw new Error("Uint8Array expected");var t;if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function cw(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}const dA=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,hA=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),cc=(r,e)=>r<<32-e|r>>>e;function wN(r){return typeof r=="string"&&(r=function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(r)),P9(r),r}class cY{clone(){return this._cloneInto()}}function uY(r){const e=n=>r().update(wN(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function fY(r=32){if(dA&&typeof dA.getRandomValues=="function")return dA.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}const cSe=(r,e,t)=>r&e^r&t^e&t;class lY extends cY{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=hA(this.buffer)}update(e){cw(this);const{view:t,buffer:n,blockLen:i}=this,s=(e=wN(e)).length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o!==i)n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{const c=hA(e);for(;i<=s-a;a+=i)this.process(c,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){cw(this),function(l,d){P9(l);const h=d.outputLen;if(l.length<h)throw new Error(`digestInto() expects output buffer of length at least ${h}`)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let l=a;l<i;l++)t[l]=0;(function(l,d,h,y){if(typeof l.setBigUint64=="function")return l.setBigUint64(d,h,y);const p=BigInt(32),g=BigInt(4294967295),m=Number(h>>p&g),v=Number(h&g),b=y?0:4;l.setUint32(d+(y?4:0),m,y),l.setUint32(d+b,v,y)})(n,i-8,BigInt(8*this.length),s),this.process(n,0);const o=hA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,f[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%t&&e.buffer.set(n),e}}const hv=BigInt(2**32-1),kU=BigInt(32);function uSe(r,e=!1){return e?{h:Number(r&hv),l:Number(r>>kU&hv)}:{h:0|Number(r>>kU&hv),l:0|Number(r&hv)}}var DU=(r,e,t)=>r>>>t,BU=(r,e,t)=>r<<32-t|e>>>t,Zp=(r,e,t)=>r>>>t|e<<32-t,Jp=(r,e,t)=>r<<32-t|e>>>t,pv=(r,e,t)=>r<<64-t|e>>>t-32,yv=(r,e,t)=>r>>>t-32|e<<64-t,_u=function(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:0|i}},fSe=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),lSe=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,dSe=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),hSe=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,pSe=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,ySe=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0);const[mSe,bSe]=function(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:a}=uSe(r[i],e);[t[i],n[i]]=[s,a]}return[t,n]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),ol=new Uint32Array(80),cl=new Uint32Array(80);class gSe extends lY{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:a,Dh:o,Dl:c,Eh:u,El:f,Fh:l,Fl:d,Gh:h,Gl:y,Hh:p,Hl:g}=this;return[e,t,n,i,s,a,o,c,u,f,l,d,h,y,p,g]}set(e,t,n,i,s,a,o,c,u,f,l,d,h,y,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|i,this.Ch=0|s,this.Cl=0|a,this.Dh=0|o,this.Dl=0|c,this.Eh=0|u,this.El=0|f,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|y,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let b=0;b<16;b++,t+=4)ol[b]=e.getUint32(t),cl[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const _=0|ol[b-15],C=0|cl[b-15],N=Zp(_,C,1)^Zp(_,C,8)^DU(_,0,7),x=Jp(_,C,1)^Jp(_,C,8)^BU(_,C,7),I=0|ol[b-2],$=0|cl[b-2],j=Zp(I,$,19)^pv(I,$,61)^DU(I,0,6),O=Jp(I,$,19)^yv(I,$,61)^BU(I,$,6),E=dSe(x,O,cl[b-7],cl[b-16]),S=hSe(E,N,j,ol[b-7],ol[b-16]);ol[b]=0|S,cl[b]=0|E}let{Ah:n,Al:i,Bh:s,Bl:a,Ch:o,Cl:c,Dh:u,Dl:f,Eh:l,El:d,Fh:h,Fl:y,Gh:p,Gl:g,Hh:m,Hl:v}=this;for(let b=0;b<80;b++){const _=Zp(l,d,14)^Zp(l,d,18)^pv(l,d,41),C=Jp(l,d,14)^Jp(l,d,18)^yv(l,d,41),N=l&h^~l&p,x=ySe(v,C,d&y^~d&g,bSe[b],cl[b]),I=pSe(x,m,_,N,mSe[b],ol[b]),$=0|x,j=Zp(n,i,28)^pv(n,i,34)^pv(n,i,39),O=Jp(n,i,28)^yv(n,i,34)^yv(n,i,39),E=n&s^n&o^s&o,S=i&a^i&c^a&c;m=0|p,v=0|g,p=0|h,g=0|y,h=0|l,y=0|d,{h:l,l:d}=_u(0|u,0|f,0|I,0|$),u=0|o,f=0|c,o=0|s,c=0|a,s=0|n,a=0|i;const A=fSe($,O,S);n=lSe(A,I,j,E),i=0|A}({h:n,l:i}=_u(0|this.Ah,0|this.Al,0|n,0|i)),{h:s,l:a}=_u(0|this.Bh,0|this.Bl,0|s,0|a),{h:o,l:c}=_u(0|this.Ch,0|this.Cl,0|o,0|c),{h:u,l:f}=_u(0|this.Dh,0|this.Dl,0|u,0|f),{h:l,l:d}=_u(0|this.Eh,0|this.El,0|l,0|d),{h,l:y}=_u(0|this.Fh,0|this.Fl,0|h,0|y),{h:p,l:g}=_u(0|this.Gh,0|this.Gl,0|p,0|g),{h:m,l:v}=_u(0|this.Hh,0|this.Hl,0|m,0|v),this.set(n,i,s,a,o,c,u,f,l,d,h,y,p,g,m,v)}roundClean(){ol.fill(0),cl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const vSe=uY(()=>new gSe),xSe=BigInt(1),wSe=BigInt(2);function ry(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function T9(r){if(!ry(r))throw new Error("Uint8Array expected")}const ESe=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function ny(r){T9(r);let e="";for(let t=0;t<r.length;t++)e+=ESe[r[t]];return e}function dY(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const Su={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function $U(r){return r>=Su._0&&r<=Su._9?r-Su._0:r>=Su._A&&r<=Su._F?r-(Su._A-10):r>=Su._a&&r<=Su._f?r-(Su._a-10):void 0}function y2(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const a=$U(r.charCodeAt(s)),o=$U(r.charCodeAt(s+1));if(a===void 0||o===void 0)throw new Error('hex string expected, got non-hex character "'+(r[s]+r[s+1])+'" at index '+s);n[i]=16*a+o}return n}function Sd(r){return dY(ny(r))}function Qb(r){return T9(r),dY(ny(Uint8Array.from(r).reverse()))}function Zb(r,e){return y2(r.toString(16).padStart(2*e,"0"))}function uw(r,e){return Zb(r,e).reverse()}function On(r,e,t){let n;if(typeof e=="string")try{n=y2(e)}catch(s){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${s}`)}else{if(!ry(e))throw new Error(`${r} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function iy(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];T9(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}const hY=r=>(wSe<<BigInt(r-1))-xSe,pA=r=>new Uint8Array(r),LU=r=>Uint8Array.from(r);function ASe(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=pA(r),i=pA(r),s=0;const a=()=>{n.fill(1),i.fill(0),s=0},o=(...f)=>t(i,n,...f),c=(f=pA())=>{i=o(LU([0]),f),n=o(),f.length!==0&&(i=o(LU([1]),f),n=o())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const l=[];for(;f<e;){n=o();const d=n.slice();l.push(d),f+=n.length}return iy(...l)};return(f,l)=>{let d;for(a(),c(f);!(d=l(u()));)c();return a(),d}}const _Se={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||ry(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function m2(r,e,t={}){const n=(i,s,a)=>{const o=_Se[s];if(typeof o!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=r[i];if(!(a&&c===void 0||o(c,r)))throw new Error(`Invalid param ${String(i)}=${c} (${typeof c}), expected ${s}`)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}var SSe={__proto__:null,hexToBytes:y2,bytesToNumberBE:Sd};const Dn=BigInt(0),Dr=BigInt(1),dd=BigInt(2),MSe=BigInt(3),yA=BigInt(4),UU=BigInt(5),FU=BigInt(8);function Pr(r,e){const t=r%e;return t>=Dn?t:e+t}function PSe(r,e,t){if(t<=Dn||e<Dn)throw new Error("Expected power/modulo > 0");if(t===Dr)return Dn;let n=Dr;for(;e>Dn;)e&Dr&&(n=n*r%t),r=r*r%t,e>>=Dr;return n}function Wr(r,e,t){let n=r;for(;e-- >Dn;)n*=n,n%=t;return n}function AT(r,e){if(r===Dn||e<=Dn)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Pr(r,e),n=e,i=Dn,s=Dr;for(;t!==Dn;){const a=n%t,o=i-s*(n/t);n=t,t=a,i=s,s=o}if(n!==Dr)throw new Error("invert: does not exist");return Pr(i,e)}BigInt(9),BigInt(16);const TSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pY(r,e){const t=e!==void 0?e:r.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}function EN(r,e,t=!1,n={}){if(r<=Dn)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=pY(r,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=function(c){if(c%yA===MSe){const u=(c+Dr)/yA;return function(f,l){const d=f.pow(l,u);if(!f.eql(f.sqr(d),l))throw new Error("Cannot find square root");return d}}if(c%FU===UU){const u=(c-UU)/FU;return function(f,l){const d=f.mul(l,dd),h=f.pow(d,u),y=f.mul(l,h),p=f.mul(f.mul(y,dd),h),g=f.mul(y,f.sub(p,f.ONE));if(!f.eql(f.sqr(g),l))throw new Error("Cannot find square root");return g}}return function(u){const f=(u-Dr)/dd;let l,d,h;for(l=u-Dr,d=0;l%dd===Dn;l/=dd,d++);for(h=dd;h<u&&PSe(h,f,u)!==u-Dr;h++);if(d===1){const p=(u+Dr)/yA;return function(g,m){const v=g.pow(m,p);if(!g.eql(g.sqr(v),m))throw new Error("Cannot find square root");return v}}const y=(l+Dr)/dd;return function(p,g){if(p.pow(g,f)===p.neg(p.ONE))throw new Error("Cannot find square root");let m=d,v=p.pow(p.mul(p.ONE,h),l),b=p.pow(g,y),_=p.pow(g,l);for(;!p.eql(_,p.ONE);){if(p.eql(_,p.ZERO))return p.ZERO;let C=1;for(let x=p.sqr(_);C<m&&!p.eql(x,p.ONE);C++)x=p.sqr(x);const N=p.pow(v,Dr<<BigInt(m-C-1));v=p.sqr(N),b=p.mul(b,N),_=p.mul(_,v),m=C}return b}}(c)}(r),o=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:hY(i),ZERO:Dn,ONE:Dr,create:c=>Pr(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return Dn<=c&&c<r},is0:c=>c===Dn,isOdd:c=>(c&Dr)===Dr,neg:c=>Pr(-c,r),eql:(c,u)=>c===u,sqr:c=>Pr(c*c,r),add:(c,u)=>Pr(c+u,r),sub:(c,u)=>Pr(c-u,r),mul:(c,u)=>Pr(c*u,r),pow:(c,u)=>function(f,l,d){if(d<Dn)throw new Error("Expected power > 0");if(d===Dn)return f.ONE;if(d===Dr)return l;let h=f.ONE,y=l;for(;d>Dn;)d&Dr&&(h=f.mul(h,y)),y=f.sqr(y),d>>=Dr;return h}(o,c,u),div:(c,u)=>Pr(c*AT(u,r),r),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>AT(c,r),sqrt:n.sqrt||(c=>a(o,c)),invertBatch:c=>function(u,f){const l=new Array(f.length),d=f.reduce((y,p,g)=>u.is0(p)?y:(l[g]=y,u.mul(y,p)),u.ONE),h=u.inv(d);return f.reduceRight((y,p,g)=>u.is0(p)?y:(l[g]=u.mul(y,l[g]),u.mul(y,p)),h),l}(o,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>t?uw(c,s):Zb(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return t?Qb(c):Sd(c)}});return Object.freeze(o)}function yY(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function jU(r){const e=yY(r);return e+Math.ceil(e/2)}const CSe=BigInt(0),mA=BigInt(1);function mY(r,e){const t=(i,s)=>{const a=s.negate();return i?a:s},n=i=>({windows:Math.ceil(e/i)+1,windowSize:2**(i-1)});return{constTimeNegate:t,unsafeLadder(i,s){let a=r.ZERO,o=i;for(;s>CSe;)s&mA&&(a=a.add(o)),o=o.double(),s>>=mA;return a},precomputeWindow(i,s){const{windows:a,windowSize:o}=n(s),c=[];let u=i,f=u;for(let l=0;l<a;l++){f=u,c.push(f);for(let d=1;d<o;d++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(i,s,a){const{windows:o,windowSize:c}=n(i);let u=r.ZERO,f=r.BASE;const l=BigInt(2**i-1),d=2**i,h=BigInt(i);for(let y=0;y<o;y++){const p=y*c;let g=Number(a&l);a>>=h,g>c&&(g-=d,a+=mA);const m=p,v=p+Math.abs(g)-1,b=g<0;g===0?f=f.add(t(y%2!=0,s[m])):u=u.add(t(b,s[v]))}return{p:u,f}},wNAFCached(i,s,a,o){const c=i._WINDOW_SIZE||1;let u=s.get(i);return u||(u=this.precomputeWindow(i,c),c!==1&&s.set(i,o(u))),this.wNAF(c,u,a)}}}function _T(r){return m2(r.Fp,TSe.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),m2(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pY(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}const mo=BigInt(0),Hs=BigInt(1),mv=BigInt(2),ISe=BigInt(8),RSe={zip215:!0},ST=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),qU=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const NSe=BigInt(1),VU=BigInt(2);BigInt(3);const OSe=BigInt(5),kSe=BigInt(8);function DSe(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function BSe(r,e){const t=ST,n=Pr(e*e*e,t),i=function(d){const h=BigInt(10),y=BigInt(20),p=BigInt(40),g=BigInt(80),m=ST,v=d*d%m*d%m,b=Wr(v,VU,m)*v%m,_=Wr(b,NSe,m)*d%m,C=Wr(_,OSe,m)*_%m,N=Wr(C,h,m)*C%m,x=Wr(N,y,m)*N%m,I=Wr(x,p,m)*x%m,$=Wr(I,g,m)*I%m,j=Wr($,g,m)*I%m,O=Wr(j,h,m)*C%m;return{pow_p_5_8:Wr(O,VU,m)*d%m,b2:v}}(r*Pr(n*n*e,t)).pow_p_5_8;let s=Pr(r*n*i,t);const a=Pr(e*s*s,t),o=s,c=Pr(s*qU,t),u=a===r,f=a===Pr(-r,t),l=a===Pr(-r*qU,t);return u&&(s=o),(f||l)&&(s=c),(Pr(s,t)&Dr)===Dr&&(s=Pr(-s,t)),{isValid:u||f,value:s}}const $Se=EN(ST,void 0,!0),LSe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:$Se,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:kSe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:vSe,randomBytes:fY,adjustScalarBytes:DSe,uvRatio:BSe},USe=function(){const r=function(S){const A=_T(S);return m2(S,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...A})}(LSe),{Fp:e,n:t,prehash:n,hash:i,randomBytes:s,nByteLength:a,h:o}=r,c=mv<<BigInt(8*a)-Hs,u=e.create,f=r.uvRatio||((S,A)=>{try{return{isValid:!0,value:e.sqrt(S*e.inv(A))}}catch{return{isValid:!1,value:mo}}}),l=r.adjustScalarBytes||(S=>S),d=r.domain||((S,A,w)=>{if(A.length||w)throw new Error("Contexts/pre-hash are not supported");return S}),h=S=>typeof S=="bigint"&&mo<S,y=(S,A)=>h(S)&&h(A)&&S<A,p=S=>S===mo||y(S,c);function g(S,A){if(y(S,A))return S;throw new Error(`Expected valid scalar < ${A}, got ${typeof S} ${S}`)}function m(S){return S===mo?S:g(S,t)}const v=new Map;function b(S){if(!(S instanceof _))throw new Error("ExtendedPoint expected")}class _{constructor(A,w,P,k){if(this.ex=A,this.ey=w,this.ez=P,this.et=k,!p(A))throw new Error("x required");if(!p(w))throw new Error("y required");if(!p(P))throw new Error("z required");if(!p(k))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof _)throw new Error("extended point not allowed");const{x:w,y:P}=A||{};if(!p(w)||!p(P))throw new Error("invalid affine point");return new _(w,P,Hs,u(w*P))}static normalizeZ(A){const w=e.invertBatch(A.map(P=>P.ez));return A.map((P,k)=>P.toAffine(w[k])).map(_.fromAffine)}_setWindowSize(A){this._WINDOW_SIZE=A,v.delete(this)}assertValidity(){const{a:A,d:w}=r;if(this.is0())throw new Error("bad point: ZERO");const{ex:P,ey:k,ez:D,et:T}=this,M=u(P*P),L=u(k*k),K=u(D*D),Y=u(K*K),re=u(M*A);if(u(K*u(re+L))!==u(Y+u(w*u(M*L))))throw new Error("bad point: equation left != right (1)");if(u(P*k)!==u(D*T))throw new Error("bad point: equation left != right (2)")}equals(A){b(A);const{ex:w,ey:P,ez:k}=this,{ex:D,ey:T,ez:M}=A,L=u(w*M),K=u(D*k),Y=u(P*M),re=u(T*k);return L===K&&Y===re}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:A}=r,{ex:w,ey:P,ez:k}=this,D=u(w*w),T=u(P*P),M=u(mv*u(k*k)),L=u(A*D),K=w+P,Y=u(u(K*K)-D-T),re=L+T,ne=re-M,ae=L-T,ie=u(Y*ne),fe=u(re*ae),oe=u(Y*ae),ce=u(ne*re);return new _(ie,fe,ce,oe)}add(A){b(A);const{a:w,d:P}=r,{ex:k,ey:D,ez:T,et:M}=this,{ex:L,ey:K,ez:Y,et:re}=A;if(w===BigInt(-1)){const te=u((D-k)*(K+L)),J=u((D+k)*(K-L)),se=u(J-te);if(se===mo)return this.double();const be=u(T*mv*re),pe=u(M*mv*Y),he=pe+be,Te=J+te,_e=pe-be,ke=u(he*se),tt=u(Te*_e),V=u(he*_e),R=u(se*Te);return new _(ke,tt,R,V)}const ne=u(k*L),ae=u(D*K),ie=u(M*P*re),fe=u(T*Y),oe=u((k+D)*(L+K)-ne-ae),ce=fe-ie,xe=fe+ie,ge=u(ae-w*ne),me=u(oe*ce),Le=u(xe*ge),Oe=u(oe*ge),Ue=u(ce*xe);return new _(me,Le,Ue,Oe)}subtract(A){return this.add(A.negate())}wNAF(A){return x.wNAFCached(this,v,A,_.normalizeZ)}multiply(A){const{p:w,f:P}=this.wNAF(g(A,t));return _.normalizeZ([w,P])[0]}multiplyUnsafe(A){let w=m(A);return w===mo?N:this.equals(N)||w===Hs?this:this.equals(C)?this.wNAF(w).p:x.unsafeLadder(this,w)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return x.unsafeLadder(this,t).is0()}toAffine(A){const{ex:w,ey:P,ez:k}=this,D=this.is0();A==null&&(A=D?ISe:e.inv(k));const T=u(w*A),M=u(P*A),L=u(k*A);if(D)return{x:mo,y:Hs};if(L!==Hs)throw new Error("invZ was invalid");return{x:T,y:M}}clearCofactor(){const{h:A}=r;return A===Hs?this:this.multiplyUnsafe(A)}static fromHex(A,w=!1){const{d:P,a:k}=r,D=e.BYTES,T=(A=On("pointHex",A,D)).slice(),M=A[D-1];T[D-1]=-129&M;const L=Qb(T);L===mo||g(L,w?c:e.ORDER);const K=u(L*L),Y=u(K-Hs),re=u(P*K-k);let{isValid:ne,value:ae}=f(Y,re);if(!ne)throw new Error("Point.fromHex: invalid y coordinate");const ie=(ae&Hs)===Hs,fe=!!(128&M);if(!w&&ae===mo&&fe)throw new Error("Point.fromHex: x=0 and x_0=1");return fe!==ie&&(ae=u(-ae)),_.fromAffine({x:ae,y:L})}static fromPrivateKey(A){return j(A).point}toRawBytes(){const{x:A,y:w}=this.toAffine(),P=uw(w,e.BYTES);return P[P.length-1]|=A&Hs?128:0,P}toHex(){return ny(this.toRawBytes())}}_.BASE=new _(r.Gx,r.Gy,Hs,u(r.Gx*r.Gy)),_.ZERO=new _(mo,Hs,Hs,mo);const{BASE:C,ZERO:N}=_,x=mY(_,8*a);function I(S){return Pr(S,t)}function $(S){return I(Qb(S))}function j(S){const A=a;S=On("private key",S,A);const w=On("hashed private key",i(S),2*A),P=l(w.slice(0,A)),k=w.slice(A,2*A),D=$(P),T=C.multiply(D),M=T.toRawBytes();return{head:P,prefix:k,scalar:D,point:T,pointBytes:M}}function O(S=new Uint8Array,...A){const w=iy(...A);return $(i(d(w,On("context",S),!!n)))}const E=RSe;return C._setWindowSize(8),{CURVE:r,getPublicKey:function(S){return j(S).pointBytes},sign:function(S,A,w={}){S=On("message",S),n&&(S=n(S));const{prefix:P,scalar:k,pointBytes:D}=j(A),T=O(w.context,P,S),M=C.multiply(T).toRawBytes(),L=I(T+O(w.context,M,D,S)*k);return m(L),On("result",iy(M,uw(L,e.BYTES)),2*a)},verify:function(S,A,w,P=E){const{context:k,zip215:D}=P,T=e.BYTES;S=On("signature",S,2*T),A=On("message",A),n&&(A=n(A));const M=Qb(S.slice(T,2*T));let L,K,Y;try{L=_.fromHex(w,D),K=_.fromHex(S.slice(0,T),D),Y=C.multiplyUnsafe(M)}catch{return!1}if(!D&&L.isSmallOrder())return!1;const re=O(k,K.toRawBytes(),L.toRawBytes(),A);return K.add(L.multiplyUnsafe(re)).subtract(Y).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>s(e.BYTES),precompute:(S=8,A=_.BASE)=>(A._setWindowSize(S),A.multiply(BigInt(3)),A)}}}();var sb=function(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var a=r.length,o=r.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;var d=0;if(l[d]!==" "){for(var h=0,y=0;l[d]===o;)h++,d++;for(var p=(l.length-d)*c+1>>>0,g=new Uint8Array(p);l[d];){var m=e[l.charCodeAt(d)];if(m===255)return;for(var v=0,b=p-1;(m!==0||v<y)&&b!==-1;b--,v++)g[b]=(m+=a*g[b]>>>0)%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");y=v,d++}if(l[d]!==" "){for(var _=p-y;_!==p&&g[_]===0;)_++;for(var C=new Uint8Array(h+(p-_)),N=h;_!==p;)C[N++]=g[_++];return C}}}return{encode:function(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";for(var d=0,h=0,y=0,p=l.length;y!==p&&l[y]===0;)y++,d++;for(var g=(p-y)*u+1>>>0,m=new Uint8Array(g);y!==p;){for(var v=l[y],b=0,_=g-1;(v!==0||b<h)&&_!==-1;_--,b++)m[_]=(v+=256*m[_]>>>0)%a>>>0,v=v/a>>>0;if(v!==0)throw new Error("Non-zero carry");h=b,y++}for(var C=g-h;C!==g&&m[C]===0;)C++;for(var N=o.repeat(d);C<g;++C)N+=r.charAt(m[C]);return N},decodeUnsafe:f,decode:function(l){var d=f(l);if(d)return d;throw new Error("Non-base"+a+" character")}}};const FSe=new TextDecoder,jSe=new TextEncoder;var AN={decodeText:r=>FSe.decode(r),encodeText:r=>jSe.encode(r),concat:function(r,e){const t=new Uint8Array(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return t}};const{encodeText:qSe}=AN;var VSe=class{constructor(r,e,t,n){this.name=r,this.code=e,this.codeBuf=qSe(this.code),this.alphabet=n,this.codec=t(n)}encode(r){return this.codec.encode(r)}decode(r){for(const e of r)if(this.alphabet&&this.alphabet.indexOf(e)<0)throw new Error(`invalid character '${e}' in '${r}'`);return this.codec.decode(r)}},zSe={rfc4648:r=>e=>({encode:t=>((n,i,s)=>{const a=i[i.length-1]==="=",o=(1<<s)-1;let c="",u=0,f=0;for(let l=0;l<n.length;++l)for(f=f<<8|n[l],u+=8;u>s;)u-=s,c+=i[o&f>>u];if(u&&(c+=i[o&f<<s-u]),a)for(;c.length*s&7;)c+="=";return c})(t,e,r),decode:t=>((n,i,s)=>{const a={};for(let d=0;d<i.length;++d)a[i[d]]=d;let o=n.length;for(;n[o-1]==="=";)--o;const c=new Uint8Array(o*s/8|0);let u=0,f=0,l=0;for(let d=0;d<o;++d){const h=a[n[d]];if(h===void 0)throw new SyntaxError("Invalid character "+n[d]);f=f<<s|h,u+=s,u>=8&&(u-=8,c[l++]=255&f>>u)}if(u>=s||255&f<<8-u)throw new SyntaxError("Unexpected end of data");return c})(t,e,r)})};const{rfc4648:Qn}=zSe,{decodeText:HSe,encodeText:WSe}=AN,bY=[["identity","\0",()=>({encode:HSe,decode:WSe}),""],["base2","0",Qn(1),"01"],["base8","7",Qn(3),"01234567"],["base10","9",sb,"0123456789"],["base16","f",Qn(4),"0123456789abcdef"],["base16upper","F",Qn(4),"0123456789ABCDEF"],["base32hex","v",Qn(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Qn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Qn(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Qn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Qn(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Qn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Qn(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Qn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Qn(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",sb,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",sb,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",sb,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",sb,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Qn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Qn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Qn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Qn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],gY=bY.reduce((r,e)=>(r[e[0]]=new VSe(e[0],e[1],e[2],e[3]),r),{}),KSe=bY.reduce((r,e)=>(r[e[1]]=gY[e[0]],r),{});var zU,bA,Yp={names:gY,codes:KSe},MT=(zU=function(r,e){const{encodeText:t,decodeText:n,concat:i}=AN;function s(c){if(Object.prototype.hasOwnProperty.call(Yp.names,c))return Yp.names[c];if(Object.prototype.hasOwnProperty.call(Yp.codes,c))return Yp.codes[c];throw new Error(`Unsupported encoding: ${c}`)}(e=r.exports=function(c,u){if(!u)throw new Error("requires an encoded Uint8Array");const{name:f,codeBuf:l}=s(c);return function(d,h){s(d).decode(n(h))}(f,u),i([l,u],l.length+u.length)}).encode=function(c,u){const f=s(c),l=t(f.encode(u));return i([f.codeBuf,l],f.codeBuf.length+l.length)},e.decode=function(c){return c instanceof Uint8Array&&(c=n(c)),["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(c[0])&&(c=c.toLowerCase()),s(c[0]).decode(c.substring(1))},e.isEncoded=function(c){if(c instanceof Uint8Array&&(c=n(c)),Object.prototype.toString.call(c)!=="[object String]")return!1;try{return s(c[0]).name}catch{return!1}},e.encoding=s,e.encodingFromData=function(c){return c instanceof Uint8Array&&(c=n(c)),s(c[0])};const a=Object.freeze(Yp.names),o=Object.freeze(Yp.codes);e.names=a,e.codes=o},zU(bA={exports:{}},bA.exports),bA.exports);const GSe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ul=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),fl=new Uint32Array(64);class QSe extends lY{constructor(){super(64,32,8,!1),this.A=0|ul[0],this.B=0|ul[1],this.C=0|ul[2],this.D=0|ul[3],this.E=0|ul[4],this.F=0|ul[5],this.G=0|ul[6],this.H=0|ul[7]}get(){const{A:e,B:t,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,t,n,i,s,a,o,c]}set(e,t,n,i,s,a,o,c){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|i,this.E=0|s,this.F=0|a,this.G=0|o,this.H=0|c}process(e,t){for(let d=0;d<16;d++,t+=4)fl[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const h=fl[d-15],y=fl[d-2],p=cc(h,7)^cc(h,18)^h>>>3,g=cc(y,17)^cc(y,19)^y>>>10;fl[d]=g+fl[d-7]+p+fl[d-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:u,H:f}=this;for(let d=0;d<64;d++){const h=f+(cc(o,6)^cc(o,11)^cc(o,25))+((l=o)&c^~l&u)+GSe[d]+fl[d]|0,y=(cc(n,2)^cc(n,13)^cc(n,22))+cSe(n,i,s)|0;f=u,u=c,c=o,o=a+h|0,a=s,s=i,i=n,n=h+y|0}var l;n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,a,o,c,u,f)}roundClean(){fl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const vY=uY(()=>new QSe);class xY extends cY{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(a){if(typeof a!="function"||typeof a.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");OU(a.outputLen),OU(a.blockLen)}(e);const n=wN(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let a=0;a<s.length;a++)s[a]^=54;this.iHash.update(s),this.oHash=e.create();for(let a=0;a<s.length;a++)s[a]^=106;this.oHash.update(s),s.fill(0)}update(e){return cw(this),this.iHash.update(e),this}digestInto(e){cw(this),P9(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:a,outputLen:o}=this;return e.finished=i,e.destroyed=s,e.blockLen=a,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wY=(r,e,t)=>new xY(r,e).update(t).digest();wY.create=(r,e)=>new xY(r,e);const{bytesToNumberBE:ZSe,hexToBytes:JSe}=SSe,qd={Err:class extends Error{constructor(r=""){super(r)}},_parseInt(r){const{Err:e}=qd;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(n[0]===0&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ZSe(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=qd,t=typeof r=="string"?JSe(r):r;T9(t);let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=qd._parseInt(t.subarray(2)),{d:a,l:o}=qd._parseInt(s);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(r){const e=u=>8&Number.parseInt(u[0],16)?"00"+u:u,t=u=>{const f=u.toString(16);return 1&f.length?`0${f}`:f},n=e(t(r.s)),i=e(t(r.r)),s=n.length/2,a=i.length/2,o=t(s),c=t(a);return`30${t(a+s+4)}02${c}${i}02${o}${n}`}},Mu=BigInt(0),Sa=BigInt(1);BigInt(2);const HU=BigInt(3);function YSe(r){return{hash:r,hmac:(e,...t)=>wY(r,e,function(...n){let i=0;for(let a=0;a<n.length;a++){const o=n[a];P9(o),i+=o.length}const s=new Uint8Array(i);for(let a=0,o=0;a<n.length;a++){const c=n[a];s.set(c,o),o+=c.length}return s}(...t)),randomBytes:fY}}function EY(r,e){const t=n=>function(i){const s=function(E){const S=_T(E);return m2(S,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...S})}(i),{Fp:a,n:o}=s,c=a.BYTES+1,u=2*a.BYTES+1;function f(E){return Pr(E,o)}function l(E){return AT(E,o)}const{ProjectivePoint:d,normPrivateKeyToScalar:h,weierstrassEquation:y,isWithinCurveOrder:p}=function(E){const S=function(ae){const ie=_T(ae);m2(ie,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:fe,Fp:oe,a:ce}=ie;if(fe){if(!oe.eql(ce,oe.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof fe!="object"||typeof fe.beta!="bigint"||typeof fe.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...ie})}(E),{Fp:A}=S,w=S.toBytes||((ae,ie,fe)=>{const oe=ie.toAffine();return iy(Uint8Array.from([4]),A.toBytes(oe.x),A.toBytes(oe.y))}),P=S.fromBytes||(ae=>{const ie=ae.subarray(1);return{x:A.fromBytes(ie.subarray(0,A.BYTES)),y:A.fromBytes(ie.subarray(A.BYTES,2*A.BYTES))}});function k(ae){const{a:ie,b:fe}=S,oe=A.sqr(ae),ce=A.mul(oe,ae);return A.add(A.add(ce,A.mul(ae,ie)),fe)}if(!A.eql(A.sqr(S.Gy),k(S.Gx)))throw new Error("bad generator point: equation left != right");function D(ae){return typeof ae=="bigint"&&Mu<ae&&ae<S.n}function T(ae){if(!D(ae))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function M(ae){const{allowedPrivateKeyLengths:ie,nByteLength:fe,wrapPrivateKey:oe,n:ce}=S;if(ie&&typeof ae!="bigint"){if(ry(ae)&&(ae=ny(ae)),typeof ae!="string"||!ie.includes(ae.length))throw new Error("Invalid key");ae=ae.padStart(2*fe,"0")}let xe;try{xe=typeof ae=="bigint"?ae:Sd(On("private key",ae,fe))}catch{throw new Error(`private key must be ${fe} bytes, hex or bigint, not ${typeof ae}`)}return oe&&(xe=Pr(xe,ce)),T(xe),xe}const L=new Map;function K(ae){if(!(ae instanceof Y))throw new Error("ProjectivePoint expected")}class Y{constructor(ie,fe,oe){if(this.px=ie,this.py=fe,this.pz=oe,ie==null||!A.isValid(ie))throw new Error("x required");if(fe==null||!A.isValid(fe))throw new Error("y required");if(oe==null||!A.isValid(oe))throw new Error("z required")}static fromAffine(ie){const{x:fe,y:oe}=ie||{};if(!ie||!A.isValid(fe)||!A.isValid(oe))throw new Error("invalid affine point");if(ie instanceof Y)throw new Error("projective point not allowed");const ce=xe=>A.eql(xe,A.ZERO);return ce(fe)&&ce(oe)?Y.ZERO:new Y(fe,oe,A.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(ie){const fe=A.invertBatch(ie.map(oe=>oe.pz));return ie.map((oe,ce)=>oe.toAffine(fe[ce])).map(Y.fromAffine)}static fromHex(ie){const fe=Y.fromAffine(P(On("pointHex",ie)));return fe.assertValidity(),fe}static fromPrivateKey(ie){return Y.BASE.multiply(M(ie))}_setWindowSize(ie){this._WINDOW_SIZE=ie,L.delete(this)}assertValidity(){if(this.is0()){if(S.allowInfinityPoint&&!A.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:ie,y:fe}=this.toAffine();if(!A.isValid(ie)||!A.isValid(fe))throw new Error("bad point: x or y not FE");const oe=A.sqr(fe),ce=k(ie);if(!A.eql(oe,ce))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:ie}=this.toAffine();if(A.isOdd)return!A.isOdd(ie);throw new Error("Field doesn't support isOdd")}equals(ie){K(ie);const{px:fe,py:oe,pz:ce}=this,{px:xe,py:ge,pz:me}=ie,Le=A.eql(A.mul(fe,me),A.mul(xe,ce)),Oe=A.eql(A.mul(oe,me),A.mul(ge,ce));return Le&&Oe}negate(){return new Y(this.px,A.neg(this.py),this.pz)}double(){const{a:ie,b:fe}=S,oe=A.mul(fe,HU),{px:ce,py:xe,pz:ge}=this;let me=A.ZERO,Le=A.ZERO,Oe=A.ZERO,Ue=A.mul(ce,ce),te=A.mul(xe,xe),J=A.mul(ge,ge),se=A.mul(ce,xe);return se=A.add(se,se),Oe=A.mul(ce,ge),Oe=A.add(Oe,Oe),me=A.mul(ie,Oe),Le=A.mul(oe,J),Le=A.add(me,Le),me=A.sub(te,Le),Le=A.add(te,Le),Le=A.mul(me,Le),me=A.mul(se,me),Oe=A.mul(oe,Oe),J=A.mul(ie,J),se=A.sub(Ue,J),se=A.mul(ie,se),se=A.add(se,Oe),Oe=A.add(Ue,Ue),Ue=A.add(Oe,Ue),Ue=A.add(Ue,J),Ue=A.mul(Ue,se),Le=A.add(Le,Ue),J=A.mul(xe,ge),J=A.add(J,J),Ue=A.mul(J,se),me=A.sub(me,Ue),Oe=A.mul(J,te),Oe=A.add(Oe,Oe),Oe=A.add(Oe,Oe),new Y(me,Le,Oe)}add(ie){K(ie);const{px:fe,py:oe,pz:ce}=this,{px:xe,py:ge,pz:me}=ie;let Le=A.ZERO,Oe=A.ZERO,Ue=A.ZERO;const te=S.a,J=A.mul(S.b,HU);let se=A.mul(fe,xe),be=A.mul(oe,ge),pe=A.mul(ce,me),he=A.add(fe,oe),Te=A.add(xe,ge);he=A.mul(he,Te),Te=A.add(se,be),he=A.sub(he,Te),Te=A.add(fe,ce);let _e=A.add(xe,me);return Te=A.mul(Te,_e),_e=A.add(se,pe),Te=A.sub(Te,_e),_e=A.add(oe,ce),Le=A.add(ge,me),_e=A.mul(_e,Le),Le=A.add(be,pe),_e=A.sub(_e,Le),Ue=A.mul(te,Te),Le=A.mul(J,pe),Ue=A.add(Le,Ue),Le=A.sub(be,Ue),Ue=A.add(be,Ue),Oe=A.mul(Le,Ue),be=A.add(se,se),be=A.add(be,se),pe=A.mul(te,pe),Te=A.mul(J,Te),be=A.add(be,pe),pe=A.sub(se,pe),pe=A.mul(te,pe),Te=A.add(Te,pe),se=A.mul(be,Te),Oe=A.add(Oe,se),se=A.mul(_e,Te),Le=A.mul(he,Le),Le=A.sub(Le,se),se=A.mul(he,be),Ue=A.mul(_e,Ue),Ue=A.add(Ue,se),new Y(Le,Oe,Ue)}subtract(ie){return this.add(ie.negate())}is0(){return this.equals(Y.ZERO)}wNAF(ie){return ne.wNAFCached(this,L,ie,fe=>{const oe=A.invertBatch(fe.map(ce=>ce.pz));return fe.map((ce,xe)=>ce.toAffine(oe[xe])).map(Y.fromAffine)})}multiplyUnsafe(ie){const fe=Y.ZERO;if(ie===Mu)return fe;if(T(ie),ie===Sa)return this;const{endo:oe}=S;if(!oe)return ne.unsafeLadder(this,ie);let{k1neg:ce,k1:xe,k2neg:ge,k2:me}=oe.splitScalar(ie),Le=fe,Oe=fe,Ue=this;for(;xe>Mu||me>Mu;)xe&Sa&&(Le=Le.add(Ue)),me&Sa&&(Oe=Oe.add(Ue)),Ue=Ue.double(),xe>>=Sa,me>>=Sa;return ce&&(Le=Le.negate()),ge&&(Oe=Oe.negate()),Oe=new Y(A.mul(Oe.px,oe.beta),Oe.py,Oe.pz),Le.add(Oe)}multiply(ie){T(ie);let fe,oe,ce=ie;const{endo:xe}=S;if(xe){const{k1neg:ge,k1:me,k2neg:Le,k2:Oe}=xe.splitScalar(ce);let{p:Ue,f:te}=this.wNAF(me),{p:J,f:se}=this.wNAF(Oe);Ue=ne.constTimeNegate(ge,Ue),J=ne.constTimeNegate(Le,J),J=new Y(A.mul(J.px,xe.beta),J.py,J.pz),fe=Ue.add(J),oe=te.add(se)}else{const{p:ge,f:me}=this.wNAF(ce);fe=ge,oe=me}return Y.normalizeZ([fe,oe])[0]}multiplyAndAddUnsafe(ie,fe,oe){const ce=Y.BASE,xe=(me,Le)=>Le!==Mu&&Le!==Sa&&me.equals(ce)?me.multiply(Le):me.multiplyUnsafe(Le),ge=xe(this,fe).add(xe(ie,oe));return ge.is0()?void 0:ge}toAffine(ie){const{px:fe,py:oe,pz:ce}=this,xe=this.is0();ie==null&&(ie=xe?A.ONE:A.inv(ce));const ge=A.mul(fe,ie),me=A.mul(oe,ie),Le=A.mul(ce,ie);if(xe)return{x:A.ZERO,y:A.ZERO};if(!A.eql(Le,A.ONE))throw new Error("invZ was invalid");return{x:ge,y:me}}isTorsionFree(){const{h:ie,isTorsionFree:fe}=S;if(ie===Sa)return!0;if(fe)return fe(Y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:ie,clearCofactor:fe}=S;return ie===Sa?this:fe?fe(Y,this):this.multiplyUnsafe(S.h)}toRawBytes(ie=!0){return this.assertValidity(),w(Y,this,ie)}toHex(ie=!0){return ny(this.toRawBytes(ie))}}Y.BASE=new Y(S.Gx,S.Gy,A.ONE),Y.ZERO=new Y(A.ZERO,A.ONE,A.ZERO);const re=S.nBitLength,ne=mY(Y,S.endo?Math.ceil(re/2):re);return{CURVE:S,ProjectivePoint:Y,normPrivateKeyToScalar:M,weierstrassEquation:k,isWithinCurveOrder:D}}({...s,toBytes(E,S,A){const w=S.toAffine(),P=a.toBytes(w.x),k=iy;return A?k(Uint8Array.from([S.hasEvenY()?2:3]),P):k(Uint8Array.from([4]),P,a.toBytes(w.y))},fromBytes(E){const S=E.length,A=E[0],w=E.subarray(1);if(S!==c||A!==2&&A!==3){if(S===u&&A===4)return{x:a.fromBytes(w.subarray(0,a.BYTES)),y:a.fromBytes(w.subarray(a.BYTES,2*a.BYTES))};throw new Error(`Point of length ${S} was invalid. Expected ${c} compressed bytes or ${u} uncompressed bytes`)}{const k=Sd(w);if(!(Mu<(P=k)&&P<a.ORDER))throw new Error("Point is not on curve");const D=y(k);let T;try{T=a.sqrt(D)}catch(M){const L=M instanceof Error?": "+M.message:"";throw new Error("Point is not on curve"+L)}return!(1&~A)!=((T&Sa)===Sa)&&(T=a.neg(T)),{x:k,y:T}}var P}}),g=E=>ny(Zb(E,s.nByteLength));function m(E){return E>o>>Sa}const v=(E,S,A)=>Sd(E.slice(S,A));class b{constructor(S,A,w){this.r=S,this.s=A,this.recovery=w,this.assertValidity()}static fromCompact(S){const A=s.nByteLength;return S=On("compactSignature",S,2*A),new b(v(S,0,A),v(S,A,2*A))}static fromDER(S){const{r:A,s:w}=qd.toSig(On("DER",S));return new b(A,w)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new b(this.r,this.s,S)}recoverPublicKey(S){const{r:A,s:w,recovery:P}=this,k=x(On("msgHash",S));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const D=P===2||P===3?A+s.n:A;if(D>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const T=d.fromHex((1&P?"03":"02")+g(D)),M=l(D),L=f(-k*M),K=f(w*M),Y=d.BASE.multiplyAndAddUnsafe(T,L,K);if(!Y)throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return y2(this.toDERHex())}toDERHex(){return qd.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return y2(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const _={isValidPrivateKey(E){try{return h(E),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const E=jU(s.n);return function(S,A,w=!1){const P=S.length,k=yY(A),D=jU(A);if(P<16||P<D||P>1024)throw new Error(`expected ${D}-1024 bytes of input, got ${P}`);const T=Pr(w?Sd(S):Qb(S),A-Dr)+Dr;return w?uw(T,k):Zb(T,k)}(s.randomBytes(E),s.n)},precompute:(E=8,S=d.BASE)=>(S._setWindowSize(E),S.multiply(BigInt(3)),S)};function C(E){const S=ry(E),A=typeof E=="string",w=(S||A)&&E.length;return S?w===c||w===u:A?w===2*c||w===2*u:E instanceof d}const N=s.bits2int||function(E){const S=Sd(E),A=8*E.length-s.nBitLength;return A>0?S>>BigInt(A):S},x=s.bits2int_modN||function(E){return f(N(E))},I=hY(s.nBitLength);function $(E){if(typeof E!="bigint")throw new Error("bigint expected");if(!(Mu<=E&&E<I))throw new Error(`bigint expected < 2^${s.nBitLength}`);return Zb(E,s.nByteLength)}const j={lowS:s.lowS,prehash:!1},O={lowS:s.lowS,prehash:!1};return d.BASE._setWindowSize(8),{CURVE:s,getPublicKey:function(E,S=!0){return d.fromPrivateKey(E).toRawBytes(S)},getSharedSecret:function(E,S,A=!0){if(C(E))throw new Error("first arg must be private key");if(!C(S))throw new Error("second arg must be public key");return d.fromHex(S).multiply(h(E)).toRawBytes(A)},sign:function(E,S,A=j){const{seed:w,k2sig:P}=function(k,D,T=j){if(["recovered","canonical"].some(ce=>ce in T))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:L}=s;let{lowS:K,prehash:Y,extraEntropy:re}=T;K==null&&(K=!0),k=On("msgHash",k),Y&&(k=On("prehashed msgHash",M(k)));const ne=x(k),ae=h(D),ie=[$(ae),$(ne)];if(re!=null&&re!==!1){const ce=re===!0?L(a.BYTES):re;ie.push(On("extraEntropy",ce))}const fe=iy(...ie),oe=ne;return{seed:fe,k2sig:function(ce){const xe=N(ce);if(!p(xe))return;const ge=l(xe),me=d.BASE.multiply(xe).toAffine(),Le=f(me.x);if(Le===Mu)return;const Oe=f(ge*f(oe+Le*ae));if(Oe===Mu)return;let Ue=(me.x===Le?0:2)|Number(me.y&Sa),te=Oe;return K&&m(Oe)&&(te=function(J){return m(J)?f(-J):J}(Oe),Ue^=1),new b(Le,te,Ue)}}}(E,S,A);return ASe(s.hash.outputLen,s.nByteLength,s.hmac)(w,P)},verify:function(E,S,A,w=O){var fe;const P=E;if(S=On("msgHash",S),A=On("publicKey",A),"strict"in w)throw new Error("options.strict was renamed to lowS");const{lowS:k,prehash:D}=w;let T,M;try{if(typeof P=="string"||ry(P))try{T=b.fromDER(P)}catch(oe){if(!(oe instanceof qd.Err))throw oe;T=b.fromCompact(P)}else{if(typeof P!="object"||typeof P.r!="bigint"||typeof P.s!="bigint")throw new Error("PARSE");{const{r:oe,s:ce}=P;T=new b(oe,ce)}}M=d.fromHex(A)}catch(oe){if(oe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&T.hasHighS())return!1;D&&(S=s.hash(S));const{r:L,s:K}=T,Y=x(S),re=l(K),ne=f(Y*re),ae=f(L*re),ie=(fe=d.BASE.multiplyAndAddUnsafe(M,ne,ae))==null?void 0:fe.toAffine();return!!ie&&f(ie.x)===L},ProjectivePoint:d,Signature:b,utils:_}}({...r,...YSe(n)});return Object.freeze({...t(e),create:t})}BigInt(4);const WU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),KU=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),XSe=BigInt(1),PT=BigInt(2),GU=(r,e)=>(r+e/PT)/e,TT=EN(WU,void 0,void 0,{sqrt:function(r){const e=WU,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),c=BigInt(88),u=r*r*r%e,f=u*u*r%e,l=Wr(f,t,e)*f%e,d=Wr(l,t,e)*f%e,h=Wr(d,PT,e)*u%e,y=Wr(h,i,e)*h%e,p=Wr(y,s,e)*y%e,g=Wr(p,o,e)*p%e,m=Wr(g,c,e)*g%e,v=Wr(m,o,e)*p%e,b=Wr(v,t,e)*f%e,_=Wr(b,a,e)*y%e,C=Wr(_,n,e)*u%e,N=Wr(C,PT,e);if(!TT.eql(TT.sqr(N),r))throw new Error("Cannot find square root");return N}}),Wm=EY({a:BigInt(0),b:BigInt(7),Fp:TT,n:KU,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=KU,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-XSe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,a=BigInt("0x100000000000000000000000000000000"),o=GU(s*r,e),c=GU(-n*r,e);let u=Pr(r-o*t-c*i,e),f=Pr(-o*n-c*s,e);const l=u>a,d=f>a;if(l&&(u=e-u),d&&(f=e-f),u>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:l,k1:u,k2neg:d,k2:f}}}},vY);BigInt(0);const QU=EN(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),fw=EY({a:QU.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:QU,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},vY);function ZU(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function _N(r,...e){if(!((t=r)instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"))throw new Error("Uint8Array expected");var t;if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function lw(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function AY(r,e){_N(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const gA=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),uc=(r,e)=>r<<32-e|r>>>e,bv=(r,e)=>r<<e|r>>>32-e>>>0,JU=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function YU(r){for(let t=0;t<r.length;t++)r[t]=(e=r[t])<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;var e}function SN(r){return typeof r=="string"&&(r=function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(r)),_N(r),r}class _Y{clone(){return this._cloneInto()}}function MN(r){const e=n=>r().update(SN(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}const eMe=(r,e,t)=>r&e^r&t^e&t;class SY extends _Y{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=gA(this.buffer)}update(e){lw(this);const{view:t,buffer:n,blockLen:i}=this,s=(e=SN(e)).length;for(let a=0;a<s;){const o=Math.min(i-this.pos,s-a);if(o!==i)n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{const c=gA(e);for(;i<=s-a;a+=i)this.process(c,a)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){lw(this),AY(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(n,0),a=0);for(let l=a;l<i;l++)t[l]=0;(function(l,d,h,y){if(typeof l.setBigUint64=="function")return l.setBigUint64(d,h,y);const p=BigInt(32),g=BigInt(4294967295),m=Number(h>>p&g),v=Number(h&g),b=y?0:4;l.setUint32(d+(y?4:0),m,y),l.setUint32(d+b,v,y)})(n,i-8,BigInt(8*this.length),s),this.process(n,0);const o=gA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,f[l],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:a,pos:o}=this;return e.length=i,e.pos=o,e.finished=s,e.destroyed=a,i%t&&e.buffer.set(n),e}}const tMe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ll=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dl=new Uint32Array(64);class rMe extends SY{constructor(){super(64,32,8,!1),this.A=0|ll[0],this.B=0|ll[1],this.C=0|ll[2],this.D=0|ll[3],this.E=0|ll[4],this.F=0|ll[5],this.G=0|ll[6],this.H=0|ll[7]}get(){const{A:e,B:t,C:n,D:i,E:s,F:a,G:o,H:c}=this;return[e,t,n,i,s,a,o,c]}set(e,t,n,i,s,a,o,c){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|i,this.E=0|s,this.F=0|a,this.G=0|o,this.H=0|c}process(e,t){for(let d=0;d<16;d++,t+=4)dl[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const h=dl[d-15],y=dl[d-2],p=uc(h,7)^uc(h,18)^h>>>3,g=uc(y,17)^uc(y,19)^y>>>10;dl[d]=g+dl[d-7]+p+dl[d-16]|0}let{A:n,B:i,C:s,D:a,E:o,F:c,G:u,H:f}=this;for(let d=0;d<64;d++){const h=f+(uc(o,6)^uc(o,11)^uc(o,25))+((l=o)&c^~l&u)+tMe[d]+dl[d]|0,y=(uc(n,2)^uc(n,13)^uc(n,22))+eMe(n,i,s)|0;f=u,u=c,c=o,o=a+h|0,a=s,s=i,i=n,n=h+y|0}var l;n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,s,a,o,c,u,f)}roundClean(){dl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const nMe=MN(()=>new rMe),iMe=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),MY=new Uint8Array(new Array(16).fill(0).map((r,e)=>e));let PN=[MY],TN=[MY.map(r=>(9*r+5)%16)];for(let r=0;r<4;r++)for(let e of[PN,TN])e.push(e[r].map(t=>iMe[t]));const PY=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>new Uint8Array(r)),sMe=PN.map((r,e)=>r.map(t=>PY[e][t])),aMe=TN.map((r,e)=>r.map(t=>PY[e][t])),oMe=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),cMe=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function XU(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}const gv=new Uint32Array(16);class uMe extends SY{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:i,h4:s}=this;return[e,t,n,i,s]}set(e,t,n,i,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|i,this.h4=0|s}process(e,t){for(let h=0;h<16;h++,t+=4)gv[h]=e.getUint32(t,!0);let n=0|this.h0,i=n,s=0|this.h1,a=s,o=0|this.h2,c=o,u=0|this.h3,f=u,l=0|this.h4,d=l;for(let h=0;h<5;h++){const y=4-h,p=oMe[h],g=cMe[h],m=PN[h],v=TN[h],b=sMe[h],_=aMe[h];for(let C=0;C<16;C++){const N=bv(n+XU(h,s,o,u)+gv[m[C]]+p,b[C])+l|0;n=l,l=u,u=0|bv(o,10),o=s,s=N}for(let C=0;C<16;C++){const N=bv(i+XU(y,a,c,f)+gv[v[C]]+g,_[C])+d|0;i=d,d=f,f=0|bv(c,10),c=a,a=N}}this.set(this.h1+o+f|0,this.h2+u+d|0,this.h3+l+i|0,this.h4+n+a|0,this.h0+s+c|0)}roundClean(){gv.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const eF=MN(()=>new uMe),vv=BigInt(2**32-1),tF=BigInt(32);function fMe(r,e=!1){return e?{h:Number(r&vv),l:Number(r>>tF&vv)}:{h:0|Number(r>>tF&vv),l:0|Number(r&vv)}}function lMe(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:a}=fMe(r[i],e);[t[i],n[i]]=[s,a]}return[t,n]}const TY=[],CY=[],IY=[],dMe=BigInt(0),ab=BigInt(1),hMe=BigInt(2),pMe=BigInt(7),yMe=BigInt(256),mMe=BigInt(113);for(let r=0,e=ab,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],TY.push(2*(5*n+t)),CY.push((r+1)*(r+2)/2%64);let i=dMe;for(let s=0;s<7;s++)e=(e<<ab^(e>>pMe)*mMe)%yMe,e&hMe&&(i^=ab<<(ab<<BigInt(s))-ab);IY.push(i)}const[bMe,gMe]=lMe(IY,!0),rF=(r,e,t)=>t>32?((n,i,s)=>i<<s-32|n>>>64-s)(r,e,t):((n,i,s)=>n<<s|i>>>32-s)(r,e,t),nF=(r,e,t)=>t>32?((n,i,s)=>n<<s-32|i>>>64-s)(r,e,t):((n,i,s)=>i<<s|n>>>32-s)(r,e,t);class CN extends _Y{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ZU(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var a;this.state=new Uint8Array(200),this.state32=(a=this.state,new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))}keccak(){JU||YU(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,f=n[u],l=n[u+1],d=rF(f,l,1)^n[c],h=nF(f,l,1)^n[c+1];for(let y=0;y<50;y+=10)e[o+y]^=d,e[o+y+1]^=h}let s=e[2],a=e[3];for(let o=0;o<24;o++){const c=CY[o],u=rF(s,a,c),f=nF(s,a,c),l=TY[o];s=e[l],a=e[l+1],e[l]=u,e[l+1]=f}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)n[c]=e[o+c];for(let c=0;c<10;c++)e[o+c]^=~n[(c+2)%10]&n[(c+4)%10]}e[0]^=bMe[i],e[1]^=gMe[i]}n.fill(0)}(this.state32,this.rounds),JU||YU(this.state32),this.posOut=0,this.pos=0}update(e){lw(this);const{blockLen:t,state:n}=this,i=(e=SN(e)).length;for(let s=0;s<i;){const a=Math.min(t-this.pos,i-s);for(let o=0;o<a;o++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,128&t&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){lw(this,!1),_N(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+a),i),this.posOut+=a,i+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ZU(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(AY(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:a}=this;return e||(e=new CN(t,n,i,a,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}const vMe=MN(()=>new CN(136,1,32));var xMe=function r(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?r(e.toJSON()):Array.isArray(e)?`[${e.reduce((t,n,i)=>`${t}${i===0?"":","}${r(n===void 0||typeof n=="symbol"?null:n)}`,"")}]`:`{${Object.keys(e).sort().reduce((t,n)=>e[n]===void 0||typeof e[n]=="symbol"?t:`${t}${t.length===0?"":","}${r(n)}:${r(e[n])}`,"")}}`};function wMe(r,e){return e()}const iF="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",sF="[a-zA-Z0-9_.:%-]",EMe=new RegExp(`^did:([a-z0-9]+):((?:${iF}*:)*(${iF}+))((;${sF}+=${sF}*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$`);function IN(r){if(r===""||!r)return null;const e=r.match(EMe);if(e){const t={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:r};if(e[4]){const n=e[4].slice(1).split(";");t.params={};for(const i of n){const s=i.split("=");t.params[s[0]]=s[1]}}return e[6]&&(t.path=e[6]),e[7]&&(t.query=e[7].slice(1)),e[8]&&(t.fragment=e[8].slice(1)),t}return null}const xv={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};class AMe{constructor(e={},t={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=t.cache===!0?function(){const n=new Map;return function(i,s){try{let a=function(u){if(o)return u;const f=n.get(i.didUrl);return f!==void 0?f:Promise.resolve(s()).then(function(l){var d;return((d=l.didResolutionMetadata)==null?void 0:d.error)!=="notFound"&&n.set(i.didUrl,l),l})},o;const c=function(){if(i.params&&i.params["no-cache"]==="true")return Promise.resolve(s()).then(function(u){return o=1,u})}();return Promise.resolve(c&&c.then?c.then(a):a(c))}catch(a){return Promise.reject(a)}}}():t.cache||wMe,t.legacyResolvers&&Object.keys(t.legacyResolvers).map(n=>{var i;this.registry[n]||(this.registry[n]=(i=t.legacyResolvers[n],function(s,a,o){try{return Promise.resolve(function(c,u){try{var f=Promise.resolve(i(s,a,o)).then(function(l){return{...xv,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:l}})}catch(l){return u(l)}return f&&f.then?f.then(void 0,u):f}(0,function(c){return{...xv,didResolutionMetadata:{error:"notFound",message:c.toString()}}}))}catch(c){return Promise.reject(c)}}))})}resolve(e,t={}){try{const n=this,i=IN(e);if(i===null)return Promise.resolve({...xv,didResolutionMetadata:{error:"invalidDid"}});const s=n.registry[i.method];return Promise.resolve(s?n.cache(i,()=>s(i.did,i,n,t)):{...xv,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(n){return Promise.reject(n)}}}function C9(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}function _Me(...r){const e=n=>n,t=(n,i)=>s=>n(i(s));return{encode:r.map(n=>n.encode).reduceRight(t,e),decode:r.map(n=>n.decode).reduce(t,e)}}function SMe(r){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(t=>{if(C9(t),t<0||t>=r.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${r.length})`);return r[t]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(t=>{if(typeof t!="string")throw new Error(`alphabet.decode: not string element=${t}`);const n=r.indexOf(t);if(n===-1)throw new Error(`Unknown letter: "${t}". Allowed: ${r}`);return n})}}}function Ta(r=""){if(typeof r!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let t of e)if(typeof t!="string")throw new Error(`join.encode: non-string input=${t}`);return e.join(r)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(r)}}}function wv(r,e="="){if(C9(r),typeof e!="string")throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*r%8;)t.push(e);return t},decode(t){if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("padding.encode input should be array of strings");for(let i of t)if(typeof i!="string")throw new Error(`padding.decode: non-string input=${i}`);let n=t.length;if(n*r%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&t[n-1]===e;n--)if(!((n-1)*r%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,n)}}}function RY(r){if(typeof r!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>r(e)}}const NY=(r,e)=>e?NY(e,r%e):r,dw=(r,e)=>r+(e-NY(r,e));function CT(r,e,t,n){if(!Array.isArray(r))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(dw(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${dw(e,t)}`);let i=0,s=0;const a=2**t-1,o=[];for(const c of r){if(C9(c),c>=2**e)throw new Error(`convertRadix2: invalid data word=${c} from=${e}`);if(i=i<<e|c,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=t;s-=t)o.push((i>>s-t&a)>>>0);i&=2**s-1}if(i=i<<t-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&i)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&o.push(i>>>0),o}function dc(r,e=!1){if(C9(r),r<=0||r>32)throw new Error("radix2: bits should be in (0..32]");if(dw(8,r)>32||dw(r,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!((n=t)instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"))throw new Error("radix2.encode input should be Uint8Array");var n;return CT(Array.from(t),8,r,!e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(CT(t,r,8,e))}}}function aF(r){if(typeof r!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return r.apply(null,e)}catch{}}}Ta(""),dc(5),wv(5),Ta(""),dc(5),Ta(""),dc(5),wv(5),Ta(""),dc(5),Ta(""),dc(5),Ta(""),RY(r=>r.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")),dc(6),wv(6),Ta(""),dc(6),Ta(""),dc(6),wv(6),Ta(""),dc(6),Ta("");const IT=_Me(SMe("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Ta("")),oF=[996825010,642813549,513874426,1027748829,705979059];function ob(r){const e=r>>25;let t=(33554431&r)<<5;for(let n=0;n<oF.length;n++)(e>>n&1)==1&&(t^=oF[n]);return t}function cF(r,e,t=1){const n=r.length;let i=1;for(let s=0;s<n;s++){const a=r.charCodeAt(s);if(a<33||a>126)throw new Error(`Invalid prefix (${r})`);i=ob(i)^a>>5}i=ob(i);for(let s=0;s<n;s++)i=ob(i)^31&r.charCodeAt(s);for(let s of e)i=ob(i)^s;for(let s=0;s<6;s++)i=ob(i);return i^=t,IT.encode(CT([i%2**30],30,5,!1))}function MMe(r){const t=dc(5),n=t.decode,i=t.encode,s=aF(n);function a(o,c=90){if(typeof o!="string")throw new Error("bech32.decode input should be string, not "+typeof o);if(o.length<8||c!==!1&&o.length>c)throw new TypeError(`Wrong string length: ${o.length} (${o}). Expected (8..${c})`);const u=o.toLowerCase();if(o!==u&&o!==o.toUpperCase())throw new Error("String must be lowercase or uppercase");const f=u.lastIndexOf("1");if(f===0||f===-1)throw new Error('Letter "1" must be present between prefix and data only');const l=u.slice(0,f),d=u.slice(f+1);if(d.length<6)throw new Error("Data must be at least 6 characters long");const h=IT.decode(d).slice(0,-6),y=cF(l,h,1);if(!d.endsWith(y))throw new Error(`Invalid checksum in ${o}: expected "${y}"`);return{prefix:l,words:h}}return{encode:function(o,c,u=90){if(typeof o!="string")throw new Error("bech32.encode prefix should be string, not "+typeof o);if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("bech32.encode words should be array of numbers, not "+typeof c);if(o.length===0)throw new TypeError(`Invalid prefix length ${o.length}`);const f=o.length+7+c.length;if(u!==!1&&f>u)throw new TypeError(`Length ${f} exceeds limit ${u}`);const l=o.toLowerCase(),d=cF(l,c,1);return`${l}1${IT.encode(c)}${d}`},decode:a,decodeToBytes:function(o){const{prefix:c,words:u}=a(o,!1);return{prefix:c,words:u,bytes:n(u)}},decodeUnsafe:aF(a),fromWords:n,fromWordsUnsafe:s,toWords:i}}const uF=MMe();Ta(""),RY(r=>{if(typeof r!="string"||r.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof r} with length ${r.length}`);return r.toLowerCase()});const Ls={toString:oY,fromString:xN,concat:function(r,e){e||(e=r.reduce((i,s)=>i+s.length,0));const t=rY(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return vN(t)}};function OY(r){return Ls.toString(r,"base64url")}function Fa(r){const e=r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return Ls.fromString(e,"base64url")}function kY(r){return Ls.fromString(r,"base58btc")}const PMe={ES256:["JsonWebKey2020","Multikey","EcdsaSecp256r1VerificationKey2019"],ES256K:["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1","JsonWebKey2020","Multikey"],"ES256K-R":["EcdsaSecp256k1VerificationKey2019","EcdsaSecp256k1RecoveryMethod2020","Secp256k1VerificationKey2018","Secp256k1SignatureVerificationKey2018","EcdsaPublicKeySecp256k1","ConditionalProof2022","JsonWebKey2020","Multikey"],Ed25519:["ED25519SignatureVerification","Ed25519VerificationKey2018","Ed25519VerificationKey2020","JsonWebKey2020","Multikey"],EdDSA:["ED25519SignatureVerification","Ed25519VerificationKey2018","Ed25519VerificationKey2020","JsonWebKey2020","Multikey"]},Ev={Secp256k1SignatureVerificationKey2018:"Secp256k1",Secp256k1VerificationKey2018:"Secp256k1",EcdsaSecp256k1VerificationKey2019:"Secp256k1",EcdsaPublicKeySecp256k1:"Secp256k1",EcdsaSecp256k1RecoveryMethod2020:"Secp256k1",EcdsaSecp256r1VerificationKey2019:"P-256",Ed25519VerificationKey2018:"Ed25519",Ed25519VerificationKey2020:"Ed25519",ED25519SignatureVerification:"Ed25519",X25519KeyAgreementKey2019:"X25519",X25519KeyAgreementKey2020:"X25519",ConditionalProof2022:void 0,JsonWebKey2020:void 0,Multikey:void 0},DY={"ed25519-pub":237,"x25519-pub":236,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"p256-pub":4608},TMe={"bls12_381-g1-pub":"Bls12381G1","bls12_381-g2-pub":"Bls12381G2","ed25519-pub":"Ed25519","p256-pub":"P-256","secp256k1-pub":"Secp256k1","x25519-pub":"X25519"};function hw(r){if(r.publicKeyBase58)return{keyBytes:kY(r.publicKeyBase58),keyType:Ev[r.type]};if(r.publicKeyBase64)return{keyBytes:Fa(r.publicKeyBase64),keyType:Ev[r.type]};if(r.publicKeyHex)return{keyBytes:Jb(r.publicKeyHex),keyType:Ev[r.type]};if(r.publicKeyJwk&&r.publicKeyJwk.crv==="secp256k1"&&r.publicKeyJwk.x&&r.publicKeyJwk.y)return{keyBytes:Wm.ProjectivePoint.fromAffine({x:Av(Fa(r.publicKeyJwk.x)),y:Av(Fa(r.publicKeyJwk.y))}).toRawBytes(!1),keyType:"Secp256k1"};if(r.publicKeyJwk&&r.publicKeyJwk.crv==="P-256"&&r.publicKeyJwk.x&&r.publicKeyJwk.y)return{keyBytes:fw.ProjectivePoint.fromAffine({x:Av(Fa(r.publicKeyJwk.x)),y:Av(Fa(r.publicKeyJwk.y))}).toRawBytes(!1),keyType:"P-256"};if(r.publicKeyJwk&&r.publicKeyJwk.kty==="OKP"&&["Ed25519","X25519"].includes(r.publicKeyJwk.crv??"")&&r.publicKeyJwk.x)return{keyBytes:Fa(r.publicKeyJwk.x),keyType:r.publicKeyJwk.crv};if(r.publicKeyMultibase){const{keyBytes:e,keyType:t}=function(n){var s;const i=MT.decode(n);if([32,33,48,64,65,96].includes(i.length))return{keyBytes:i};try{const[a,o]=oSe(i),c=((s=Object.entries(DY).filter(([,u])=>u===a))==null?void 0:s[0][0])??"";return{keyBytes:i.slice(o),keyType:TMe[c]}}catch{return{keyBytes:i}}}(r.publicKeyMultibase);return{keyBytes:e,keyType:t??Ev[r.type]}}return{keyBytes:new Uint8Array}}function Jb(r,e){let t=r.startsWith("0x")?r.substring(2):r;return t.length%2!=0&&(t=`0${t}`),Ls.fromString(t.toLowerCase(),"base16")}function fF(r){return Ls.toString(Fa(r))}function c0(r){return Ls.toString(r,"base16")}function Av(r){return BigInt("0x"+Ls.toString(r,"base16"))}function pw({r,s:e,recoveryParam:t},n){const i=new Uint8Array(n?65:64);if(i.set(Ls.fromString(r,"base16"),0),i.set(Ls.fromString(e,"base16"),32),n){if(t===void 0)throw new Error("Signer did not return a recoveryParam");i[64]=t}return OY(i)}function _v(r,e=64){return r.length===e?r:"0".repeat(e-r.length)+r}function Ju(r){const e=typeof r=="string"?xN(r):r;return nMe(e)}const CMe=vMe;function lF(r){const e=xN(r.slice(2),"base16");return`0x${oY(CMe(e).slice(-20),"base16")}`}function RN(r){return typeof r=="object"&&"r"in r&&"s"in r}function dF(r){return function(e,t){try{return Promise.resolve(t(e)).then(function(n){if(RN(n))return pw(n,r);if(r&&function(i){const s=Fa(i);if(s.length<64||s.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${s.length}`);return{r:c0(s.slice(0,32)),s:c0(s.slice(32,64)),recoveryParam:s.length===65?s[64]:void 0}}(n).recoveryParam===void 0)throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return n})}catch(n){return Promise.reject(n)}}}function hF(){return function(r,e){try{return Promise.resolve(e(r)).then(function(t){if(RN(t))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return t})}catch(t){return Promise.reject(t)}}}const IMe={ES256:function(r,e){try{return Promise.resolve(e(r)).then(function(t){return RN(t)?pw(t):t})}catch(t){return Promise.reject(t)}},ES256K:dF(),"ES256K-R":dF(!0),Ed25519:hF(),EdDSA:hF()};function RT(r,e=!1){const t=Fa(r);if(t.length!==(e?65:64))throw new Error("wrong signature length");return{compact:t.slice(0,64),recovery:t[64]}}function pF(r,e,t){const n=[];if(e.length>86)n.push(RT(e,!0));else{const a=RT(e,!1);n.push({...a,recovery:0}),n.push({...a,recovery:1})}const i=Ju(r),s=a=>{const o=Wm.Signature.fromCompact(a.compact).addRecoveryBit(a.recovery||0).recoverPublicKey(i),c=lF(o.toHex(!1)).toLowerCase(),u=o.toHex(!1),f=o.toHex(!0);return t.find(l=>{var y,p,g;const{keyBytes:d}=hw(l),h=c0(d);return h===u||h===f||((y=l.ethereumAddress)==null?void 0:y.toLowerCase())===c||((g=(p=l.blockchainAccountId)==null?void 0:p.split("@eip155"))==null?void 0:g[0].toLowerCase())===c||function(m,v){if(v){const b=v.split(":");switch(b[0]){case"bip122":b[b.length-1]=function(_,C){const N=c0(kY(C).slice(0,1)),x=Jb(_),I=N+c0(eF(Ju(x))),$=Ju(Jb(I));return j=Jb(I+c0(Ju($)).substring(0,8)),Ls.toString(j,"base58btc");var j}(m,b[b.length-1]);break;case"cosmos":b[b.length-1]=function(_,C){const N=Wm.ProjectivePoint.fromHex(_).toRawBytes(),x=eF(Ju(N)),I=uF.toWords(x);return uF.encode(C,I).replace(C,"")}(m,b[1]);break;case"eip155":b[b.length-1]=lF(m);break;default:return!1}return b.join(":").toLowerCase()===v.toLowerCase()}return!1}(u,l.blockchainAccountId)})};for(const a of n){const o=s(a);if(o)return o}throw new Error("invalid_signature: Signature invalid for JWT")}function yF(r,e,t){const n=Ls.fromString(r,"utf-8"),i=Fa(e),s=t.find(a=>{const{keyBytes:o,keyType:c}=hw(a);return c==="Ed25519"&&USe.verify(i,n,o)});if(!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}const RMe={ES256:function(r,e,t){const n=Ju(r),i=fw.Signature.fromCompact(RT(e).compact),s=t.filter(a=>!a.ethereumAddress&&!a.blockchainAccountId).find(a=>{try{const{keyBytes:o}=hw(a);return fw.verify(i,n,o)}catch{return!1}});if(!s)throw new Error("invalid_signature: Signature invalid for JWT");return s},ES256K:function(r,e,t){const n=Ju(r),i=Wm.Signature.fromCompact(Fa(e)).normalizeS(),s=t.filter(c=>!c.ethereumAddress&&!c.blockchainAccountId),a=t.filter(c=>c.ethereumAddress||c.blockchainAccountId);let o=s.find(c=>{try{const{keyBytes:u}=hw(c);return Wm.verify(i,n,u)}catch{return!1}});if(!o&&a.length>0&&(o=pF(r,e,a)),!o)throw new Error("invalid_signature: Signature invalid for JWT");return o},"ES256K-R":pF,Ed25519:yF,EdDSA:yF};function BY(r){const e=RMe[r];if(!e)throw new Error(`not_supported: Unsupported algorithm ${r}`);return e}BY.toSignatureObject=function(r,e=!1){const t=Fa(r);if(t.length!==(e?65:64))throw new Error("wrong signature length");const n={r:c0(t.slice(0,32)),s:c0(t.slice(32,64))};return e&&(n.recoveryParam=t[64]),n};const nr={INVALID_JWT:"invalid_jwt",INVALID_AUDIENCE:"invalid_config",INVALID_SIGNATURE:"invalid_signature",NO_SUITABLE_KEYS:"no_suitable_keys",NOT_SUPPORTED:"not_supported",RESOLVER_ERROR:"resolver_error"},mF=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Zi(r,e,t){if(!r.s){if(t instanceof T1){if(!t.s)return void(t.o=Zi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(Zi.bind(null,r,e),Zi.bind(null,r,2));r.s=e,r.v=t;const n=r.o;n&&n(r)}}const T1=function(){function r(){}return r.prototype.then=function(e,t){const n=new r,i=this.s;if(i){const s=1&i?e:t;if(s){try{Zi(n,1,s(this.v))}catch(a){Zi(n,2,a)}return n}return this}return this.o=function(s){try{const a=s.v;1&s.s?Zi(n,1,e?e(a):a):t?Zi(n,1,t(a)):Zi(n,2,a)}catch(a){Zi(n,2,a)}},n},r}();function bF(r){return r instanceof T1&&1&r.s}const gF=function(r,{header:e,payload:t,signature:n,data:i},s,a){try{return s.type===vA?function(o,{header:c,payload:u,signature:f,data:l},d,h){try{if(d.conditionWeightedThreshold)return function(y,{header:p,payload:g,data:m,signature:v},b,_){try{let C=function(O){if(N)return O;throw new Error(`${nr.INVALID_SIGNATURE}: condition for authenticator ${b.id} is not met.`)},N;if(!b.conditionWeightedThreshold||!b.threshold)throw new Error("Expected conditionWeightedThreshold and threshold");const x=[],I=b.threshold;let $=0;const j=function(O,E,S){if(typeof O[mF]=="function"){var A,w,P,k=O[mF]();if(function L(K){try{for(;!((A=k.next()).done||S&&S());)if((K=E(A.value))&&K.then){if(!bF(K))return void K.then(L,P||(P=Zi.bind(null,w=new T1,2)));K=K.v}w?Zi(w,1,K):w=K}catch(Y){Zi(w||(w=new T1),2,Y)}}(),k.return){var D=function(L){try{A.done||k.return()}catch{}return L};if(w&&w.then)return w.then(D,function(L){throw D(L)});D()}return w}if(!("length"in O))throw new TypeError("Object is not iterable");for(var T=[],M=0;M<O.length;M++)T.push(O[M]);return function(L,K,Y){var re,ne,ae=-1;return function ie(fe){try{for(;++ae<L.length&&(!Y||!Y());)if((fe=K(ae))&&fe.then){if(!bF(fe))return void fe.then(ie,ne||(ne=Zi.bind(null,re=new T1,2)));fe=fe.v}re?Zi(re,1,fe):re=fe}catch(oe){Zi(re||(re=new T1),2,oe)}}(),re}(T,function(L){return E(T[L])},S)}(b.conditionWeightedThreshold,function(O){function E(P){return N?P:A&&!x.includes(A.id)&&(x.push(A.id),$+=O.weight,$>=I)?(N=1,b):void 0}const S=O.condition;let A;const w=function(P,k){try{var D=function(){var T;if(S.type===vA){if(!_.didAuthenticator)throw new Error("Expected didAuthenticator");const M={..._,didAuthenticator:{didResolutionResult:(T=_.didAuthenticator)==null?void 0:T.didResolutionResult,authenticators:[S],issuer:S.id}};return Promise.resolve(NT(y,M)).then(function({verified:L}){L&&(A=S)})}return Promise.resolve(xA({header:p,payload:g,data:m,signature:v},S)).then(function(M){A=M})}()}catch(T){return k(T)}return D&&D.then?D.then(void 0,k):D}(0,function(P){if(!P.message.startsWith(nr.INVALID_SIGNATURE))throw P});return w&&w.then?w.then(E):E(w)},function(){return N});return Promise.resolve(j&&j.then?j.then(C):C(j))}catch(C){return Promise.reject(C)}}(o,{header:c,payload:u,data:l,signature:f},d,h);if(d.conditionDelegated)return function(y,{header:p,payload:g,data:m,signature:v},b,_){try{if(!b.conditionDelegated)throw new Error("Expected conditionDelegated");if(!_.resolver)throw new Error("Expected resolver");let C;const N=b.conditionDelegated;return Promise.resolve($Y(_.resolver,p.alg,N,_.proofPurpose)).then(function(x){function I(E){if(C)return b;throw new Error(`${nr.INVALID_SIGNATURE}: condition for authenticator ${b.id} is not met.`)}const $=x.didResolutionResult;if(!($!=null&&$.didDocument))throw new Error(`${nr.RESOLVER_ERROR}: Could not resolve delegated DID ${N}.`);const j=x.authenticators.find(E=>E.id===N);if(!j)throw new Error(`${nr.NO_SUITABLE_KEYS}: Could not find delegated authenticator ${N} in it's DID Document`);const O=function(){if(j.type===vA)return Promise.resolve(NT(y,{..._,didAuthenticator:{didResolutionResult:$,authenticators:[j],issuer:j.id}})).then(function({verified:E}){E&&(C=j)});try{C=xA({header:p,payload:g,data:m,signature:v},j)}catch(E){if(!E.message.startsWith("invalid_signature:"))throw E}}();return O&&O.then?O.then(I):I()})}catch(C){return Promise.reject(C)}}(o,{header:c,payload:u,data:l,signature:f},d,h);throw new Error(`${nr.INVALID_JWT}: conditional proof type did not find condition for authenticator ${d.id}.`)}catch(y){return Promise.reject(y)}}(r,{payload:t,header:e,signature:n,data:i},s,a):Promise.resolve(xA({header:e,payload:t,data:i,signature:n},[s]))}catch(o){return Promise.reject(o)}},vA="ConditionalProof2022";function ki(r,e,t){if(!r.s){if(t instanceof b2){if(!t.s)return void(t.o=ki.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(ki.bind(null,r,e),ki.bind(null,r,2));r.s=e,r.v=t;const n=r.o;n&&n(r)}}const b2=function(){function r(){}return r.prototype.then=function(e,t){const n=new r,i=this.s;if(i){const s=1&i?e:t;if(s){try{ki(n,1,s(this.v))}catch(a){ki(n,2,a)}return n}return this}return this.o=function(s){try{const a=s.v;1&s.s?ki(n,1,e?e(a):a):t?ki(n,1,t(a)):ki(n,2,a)}catch(a){ki(n,2,a)}},n},r}();function o1(r){return r instanceof b2&&1&r.s}const $Y=function(r,e,t,n){try{const i=PMe[e];if(!i||i.length===0)throw new Error(`${nr.NOT_SUPPORTED}: No supported signature types for algorithm ${e}`);let s;return Promise.resolve(r.resolve(t,{accept:xF})).then(function(a){var f,l,d;if(s=Object.getOwnPropertyNames(a).indexOf("didDocument")===-1?{didDocument:a,didDocumentMetadata:{},didResolutionMetadata:{contentType:xF}}:a,((f=s.didResolutionMetadata)==null?void 0:f.error)||s.didDocument==null){const{error:h,message:y}=s.didResolutionMetadata;throw new Error(`${nr.RESOLVER_ERROR}: Unable to resolve DID document for ${t}: ${h}, ${y||""}`)}const o=(h,y)=>{const p=h.filter(({id:g})=>y===g);return p.length>0?p[0]:null};let c=[...((l=s==null?void 0:s.didDocument)==null?void 0:l.verificationMethod)||[],...((d=s==null?void 0:s.didDocument)==null?void 0:d.publicKey)||[]];typeof n=="string"&&(n.startsWith("assertion")&&!Object.getOwnPropertyNames(s==null?void 0:s.didDocument).includes("assertionMethod")&&(s.didDocument={...s.didDocument},s.didDocument.assertionMethod=[...c.map(h=>h.id)]),c=(s.didDocument[n]||[]).map(h=>typeof h=="string"?o(c,h):typeof h.publicKey=="string"?o(c,h.publicKey):h).filter(h=>h!=null));const u=c.filter(({type:h})=>i.find(y=>y===h));if(typeof n=="string"&&(!u||u.length===0))throw new Error(`${nr.NO_SUITABLE_KEYS}: DID document for ${t} does not have public keys suitable for ${e} with ${n} purpose`);if(!u||u.length===0)throw new Error(`${nr.NO_SUITABLE_KEYS}: DID document for ${t} does not have public keys for ${e}`);return{authenticators:u,issuer:t,didResolutionResult:s}})}catch(i){return Promise.reject(i)}},NT=function(r,e={resolver:void 0,auth:void 0,audience:void 0,callbackUrl:void 0,skewTime:void 0,proofPurpose:void 0,policies:{},didAuthenticator:void 0}){try{let t=function(){function h(m){var v,b,_,C,N;if(p){const x=typeof((v=e.policies)==null?void 0:v.now)=="number"?e.policies.now:Math.floor(Date.now()/1e3),I=e.skewTime!==void 0&&e.skewTime>=0?e.skewTime:$Me,$=x+I;if(((b=e.policies)==null?void 0:b.nbf)!==!1&&n.nbf){if(n.nbf>$)throw new Error(`${nr.INVALID_JWT}: JWT not valid before nbf: ${n.nbf}`)}else if(((_=e.policies)==null?void 0:_.iat)!==!1&&n.iat&&n.iat>$)throw new Error(`${nr.INVALID_JWT}: JWT not valid yet (issued in the future) iat: ${n.iat}`);if(((C=e.policies)==null?void 0:C.exp)!==!1&&n.exp&&n.exp<=x-I)throw new Error(`${nr.INVALID_JWT}: JWT has expired: exp: ${n.exp} < now: ${x}`);if(((N=e.policies)==null?void 0:N.aud)!==!1&&n.aud){if(!e.audience&&!e.callbackUrl)throw new Error(`${nr.INVALID_AUDIENCE}: JWT audience is required but your app address has not been configured`);if((Array.isArray(n.aud)?n.aud:[n.aud]).find(j=>e.audience===j||e.callbackUrl===j)===void 0)throw new Error(`${nr.INVALID_AUDIENCE}: JWT audience does not match your DID or callback url`)}return{verified:!0,payload:n,didResolutionResult:l,issuer:f,signer:p,jwt:r,policies:e.policies}}throw new Error(`${nr.INVALID_SIGNATURE}: JWT not valid. issuer DID document does not contain a verificationMethod that matches the signature.`)}const{did:y}=IN(c);let p=null;const g=function(){if(y!==c){const m=u.find(v=>v.id===c);if(!m)throw new Error(`${nr.INVALID_JWT}: No authenticator found for did URL ${c}`);return Promise.resolve(gF(r,{payload:n,header:i,signature:s,data:a},m,e)).then(function(v){p=v})}{let m=0;return function(v,b,_){for(var C;;){var N=v();if(o1(N)&&(N=N.v),!N)return x;if(N.then){C=0;break}var x=_();if(x&&x.then){if(!o1(x)){C=1;break}x=x.s}var I}var $=new b2,j=ki.bind(null,$,2);return(C===0?N.then(E):C===1?x.then(O):I.then(S)).then(void 0,j),$;function O(A){x=A;do{if(b&&(I=b())&&I.then&&o1(I),!(N=v())||o1(N)&&!N.v)return void ki($,1,x);if(N.then)return void N.then(E).then(void 0,j);o1(x=_())&&(x=x.v)}while(!x||!x.then);x.then(O).then(void 0,j)}function E(A){A?(x=_())&&x.then?x.then(O).then(void 0,j):O(x):ki($,1,x)}function S(){(N=v())?N.then?N.then(E).then(void 0,j):E(N):ki($,1,x)}}(function(){return!p&&m<u.length},void 0,function(){function v(C){m++}const b=u[m],_=function(C,N){try{var x=Promise.resolve(gF(r,{payload:n,header:i,signature:s,data:a},b,e)).then(function(I){p=I})}catch(I){return N(I)}return x&&x.then?x.then(void 0,N):x}(0,function(C){if(!C.message.includes(nr.INVALID_SIGNATURE)||m===u.length-1)throw C});return _&&_.then?_.then(v):v()})}}();return g&&g.then?g.then(h):h()};if(!e.resolver)throw new Error("missing_resolver: No DID resolver has been configured");const{payload:n,header:i,signature:s,data:a}=Y5(r,!1),o=Object.prototype.hasOwnProperty.call(e,"auth")?e.auth?"authentication":void 0:e.proofPurpose;let c,u,f,l;if(!n.iss&&!n.client_id)throw new Error(`${nr.INVALID_JWT}: JWT iss or client_id are required`);if(e.didAuthenticator)c=e.didAuthenticator.issuer;else if(n.iss===OMe||n.iss===kMe){if(!n.sub)throw new Error(`${nr.INVALID_JWT}: JWT sub is required`);c=n.sub_jwk===void 0?n.sub:(i.kid||"").split("#")[0]}else if(n.iss===DMe){if(!n.did)throw new Error(`${nr.INVALID_JWT}: JWT did is required`);c=n.did}else if(!n.iss&&n.scope==="openid"&&n.redirect_uri){if(!n.client_id)throw new Error(`${nr.INVALID_JWT}: JWT client_id is required`);c=n.client_id}else c=n.iss;if(!c)throw new Error(`${nr.INVALID_JWT}: No DID has been found in the JWT`);const d=function(){if(!e.didAuthenticator)return Promise.resolve($Y(e.resolver,i.alg,c,o)).then(function(h){({didResolutionResult:l,authenticators:u,issuer:f}=h),e.didAuthenticator={didResolutionResult:l,authenticators:u,issuer:f}});({didResolutionResult:l,authenticators:u,issuer:f}=e.didAuthenticator)}();return Promise.resolve(d&&d.then?d.then(t):t())}catch(t){return Promise.reject(t)}},vF=function(r,{issuer:e,signer:t,alg:n,expiresIn:i,canonicalize:s},a={}){try{if(!t)throw new Error("missing_signer: No Signer functionality has been configured");if(!e)throw new Error("missing_issuer: No issuing DID has been configured");a.typ||(a.typ="JWT"),a.alg||(a.alg=n);const o={iat:Math.floor(Date.now()/1e3),exp:void 0};if(i){if(typeof i!="number")throw new Error("invalid_argument: JWT expiresIn is not a number");o.exp=(r.nbf||o.iat)+Math.floor(i)}const c={...o,...r,iss:e};return NMe(c,t,a,{canonicalize:s})}catch(o){return Promise.reject(o)}},NMe=function(r,e,t={},n={}){try{t.alg||(t.alg=BMe);const i=typeof r=="string"?r:wF(r,n.canonicalize),s=[wF(t,n.canonicalize),i].join("."),a=function(o){const c=IMe[o];if(!c)throw new Error(`not_supported: Unsupported algorithm ${o}`);return c}(t.alg);return Promise.resolve(a(s,e)).then(function(o){return[s,o].join(".")})}catch(i){return Promise.reject(i)}},OMe="https://self-issued.me/v2",kMe="https://self-issued.me/v2/openid-vc",DMe="https://self-issued.me",BMe="ES256K",xF="application/did+json";function wF(r,e=!1){return t=e?xMe(r):JSON.stringify(r),OY(Ls.fromString(t));var t}const $Me=300;function Y5(r,e=!0){if(!r)throw new Error("invalid_argument: no JWT passed into decodeJWT");try{const t=function(s){const a=s.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(a)return{header:JSON.parse(fF(a[1])),payload:a[2],signature:a[3],data:`${a[1]}.${a[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}(r),n=Object.assign(t,{payload:JSON.parse(fF(t.payload))}),i=n.payload.iss;if(n.header.cty==="JWT"&&e){const s=Y5(n.payload.jwt);if(s.payload.iss!==i)throw new Error(`${nr.INVALID_JWT}: multiple issuers`);return s}return n}catch{throw new Error("invalid_argument: Incorrect format JWT")}}function xA({header:r,payload:e,data:t,signature:n},i){Array.isArray(i)||(i=[i]);const s=e.iss;let a=!0;do{if(s!==e.iss)throw new Error(`${nr.INVALID_JWT}: multiple issuers`);try{return BY(r.alg)(t,n,i)}catch(o){if(!o.message.startsWith(nr.INVALID_SIGNATURE))throw o}r.cty!=="JWT"?a=!1:{payload:e,header:r,signature:n,data:t}=Y5(e.jwt,!1)}while(a);throw new Error(`${nr.INVALID_SIGNATURE}: no matching public key found`)}function LY(r){return bde(new Uint8Array(r))}function UY(r){if(r.type===ht.K1)return function(e,t=!1){const n=e;if(n.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${n.length}`);return function(i){try{const s=Wm.sign(Ju(i),n);return Promise.resolve(pw({r:_v(s.r.toString(16)),s:_v(s.s.toString(16)),recoveryParam:s.recovery},t))}catch(s){return Promise.reject(s)}}}(r.data.array,!0);if(r.type===ht.R1||r.type===ht.WA)return function(e){if(e.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${e.length}`);return function(t){try{const n=fw.sign(Ju(t),e);return Promise.resolve(pw({r:_v(n.r.toString(16)),s:_v(n.s.toString(16))}))}catch(n){return Promise.reject(n)}}}(r.data.array);throw new Error("Unsupported key type")}function lp(r){var e=LY(r);return Array.from(e).map(LMe).join("")}function Km(r){return kt.hash(nt.from(UMe(r),"hex")).toString()}function LMe(r){return("0"+r.toString(16)).slice(-2)}function UMe(r){return r.split("").map(function(e){return e.charCodeAt(0).toString(16).padStart(2,"0")}).join("")}function w3(){var r=LY(32),e=new tH(ht.K1,new nt(r)),t=e.toPublic();return{privateKey:e,publicKey:t}}function NN(r,e){return{sign:function(t){try{return Promise.resolve(r.signData({level:e,data:t,outputType:"jwt"}))}catch(n){return Promise.reject(n)}}}}typeof Symbol>"u"||Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"));var sy,FY,jY=Mt("tonomy-sdk:settings");if(typeof Proxy>"u")throw new Error("This environment doesn't support Proxy");var ON=!1;function FMe(r){jY("Settings initialized",r),sy||(sy={});for(var e=0,t=Object.entries(r);e<t.length;e++){var n=t[e],i=n[1];i!=null&&(sy[n[0]]=i)}ON=!0}function jMe(r){FY=r}function qY(){return FY}function fr(){return ON||Ze("Settings not yet initialized",Ce.SettingsNotInitialized),new Proxy(sy,{get:function(r,e,t){if(Reflect.has(r,e))return Reflect.get(r,e,t);throw new Error("Tonomy SDK settings has not been initialized using setSettings() with property for variable: "+e.toString())}})}function X5(){return ON||Ze("Settings not yet initialized",Ce.SettingsNotInitialized),jY("Checking if production for environment:",sy.environment),["production","staging","testnet"].includes(sy.environment)}var qMe=function(r){try{return Promise.resolve(new Promise(function(e){return setTimeout(e,r)}))}catch(e){return Promise.reject(e)}},yw=86400;function wA(r){var e=new Date(1970,0,1);return e.setSeconds(r),e}function EF(r,e){return new Date(r.getTime()+1e3*e)}var EA,I9=function(r){try{return Promise.resolve(function(e,t){try{var n=Promise.resolve(Ga().v1.chain.get_account(r))}catch(i){return t(i)}return n&&n.then?n.then(void 0,t):n}(0,function(e){if(e.message!=="Account not found at /v1/chain/get_account")throw e;Ze('Account "'+r.toString()+'" not found',Ce.AccountDoesntExist)}))}catch(e){return Promise.reject(e)}},kN=function(){return AA?Promise.resolve(AA):Promise.resolve(VY()).then(function(r){if(!r||!r.chain_id)throw new Error("Chain ID not found in chain info");return AA=r.chain_id.toString()})},VY=function(){try{return Promise.resolve(Ga().v1.chain.get_info())}catch(r){return Promise.reject(r)}},VMe=function(r,e){e===void 0&&(e=zMe);try{var t,n=function(a){if(t)return a;var o=Ga().v1.chain.get_abi(r);return _A.set(r.toString(),{abiPromise:o,time:i}),Promise.resolve(o).then(function(c){var u=c.abi;if(!u)throw new Error("No ABI for "+r);return u})},i=new Date,s=function(){if(_A.has(r.toString())){AF("Using cached ABI for",r.toString());var a=_A.get(r.toString()),o=a.abiPromise,c=a.time;return function(){if(i.getTime()<c.getTime()+e)return Promise.resolve(o).then(function(u){var f=u.abi;if(AF("Using cached ABI for",r.toString(),f),!f)throw new Error("No ABI for "+r);return t=1,f})}()}}();return Promise.resolve(s&&s.then?s.then(n):n(s))}catch(a){return Promise.reject(a)}},AF=Mt("tonomy-sdk:services:blockchain:eosio:eosio");function Ga(){if(EA)return EA;var r=fr().blockchainUrl;return EA=new iI({url:r,provider:new sx(r,{fetch:qY()||sW})})}var AA,zMe=6e4,_A=new Map;function HMe(r){return ci.from({actor:r,permission:"active"})}function WMe(r){return ci.from({actor:r,permission:"owner"})}function Cr(r){return{authorization:[HMe(r)]}}function KMe(r){return{authorization:[WMe(r)]}}function zY(r){var e={authorization:[]};return r.forEach(function(t){t.authorization&&t.authorization.forEach(function(n){var i;(i=e.authorization)==null||i.push(n)})}),HY(e)}function HY(r){if(!r.authorization)throw new Error("Authorization is undefined");var e={authorization:[]};return r.authorization.forEach(function(t){var n,i;(n=e.authorization)!=null&&n.find(function(s){return s.actor.toString()===t.actor.toString()&&s.permission.toString()===t.permission.toString()})||(i=e.authorization)==null||i.push(t)}),e}var GMe=function(){function r(t,n,i,s){this.threshold=void 0,this.keys=void 0,this.accounts=void 0,this.waits=void 0,this.threshold=t,this.keys=n,this.accounts=i,this.waits=s}r.fromKey=function(t){return new this(1,[{key:t,weight:1}],[],[])},r.fromAccount=function(t){if(!qe.pattern.test(t.actor))throw new Error("Invalid account name "+t.actor);if(!qe.pattern.test(t.permission))throw new Error("Invalid account permission "+t.permission);return new this(1,[],[{permission:t,weight:1}],[])},r.fromAccountArray=function(t,n,i){i===void 0&&(i=1);var s=r.fromAccount({actor:t[0],permission:n});if(t.length>1)for(var a,o=JJ(t.slice(1));!(a=o()).done;)s.addAccount({actor:a.value,permission:n});return s.setThreshold(i),s.sort(),s},r.fromAccountPermission=function(t){return new r(t.required_auth.threshold.toNumber(),t.required_auth.keys.map(function(n){return{key:n.key.toString(),weight:n.weight.toNumber()}}),t.required_auth.accounts.map(function(n){return{permission:{actor:n.permission.actor.toString(),permission:n.permission.permission.toString()},weight:n.weight.toNumber()}}),t.required_auth.waits.map(function(n){return{wait_sec:n.wait_sec.toNumber(),weight:n.weight.toNumber()}}))};var e=r.prototype;return e.addCodePermission=function(t){return this.accounts.push({permission:{actor:t,permission:"eosio.code"},weight:1}),this.sort(),this},e.addAccount=function(t){return this.accounts.push({permission:t,weight:1}),this.sort(),this},e.addKey=function(t,n){return this.keys.push({key:t,weight:n}),this.sort(),this},e.setThreshold=function(t){return this.threshold=t,this},e.sort=function(){this.keys.sort(function(t,n){return String(t.key).localeCompare(String(n.key))}),this.accounts.sort(function(t,n){return Sv((i=t).permission.actor,(s=n).permission.actor)!==0?Sv(i.permission.actor,s.permission.actor):Sv(i.permission.permission,s.permission.permission)!==0?Sv(i.permission.permission,s.permission.permission):i.weight-s.weight;var i,s}),this.waits.sort(function(t,n){return t.wait_sec-n.wait_sec})},r}();function Sv(r,e){var t=qe.from(r).value.value,n=qe.from(e).value.value;return t.cmp(n)}var k6=function(r){try{var e=new Mde({client:Ga()});return Promise.resolve(e.load(r))}catch(t){return Promise.reject(t)}},e8=function(){function r(t,n){n===void 0&&(n=!1),this.contractName=void 0,this.contract=void 0,this.actions=void 0,this.contract=t,this.contractName=t.account,n&&this.reloadContract()}var e=r.prototype;return e.reloadContract=function(){try{var t=this,n=function(i,s){try{var a=Promise.resolve(k6(t.contractName)).then(function(o){t.contract=o})}catch(o){return s(o)}return a&&a.then?a.then(void 0,s):a}(0,function(i){console.error("Failed to reload contract "+t.contractName+":",i)});return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(i){return Promise.reject(i)}},e.action=function(t,n,i){return i===void 0&&(i=Cr(this.contractName)),this.contract.action(t,n,HY(i))},r}();function QMe(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var WY=function(r){try{return r instanceof Nr&&r.abi?Promise.resolve(r):Promise.resolve(VMe(r.account)).then(function(e){return Nr.from(r,e)})}catch(e){return Promise.reject(e)}},Vt=function(r,e){try{return Promise.resolve(Promise.all((Array.isArray(r)?r:[r]).map(WY))).then(function(t){return Promise.resolve(VY()).then(function(n){var i=n.getTransactionHeader(),s=hn.from(cs({},i,{actions:t})),a=Array.isArray(e)?e:[e],o=s.signingDigest(n.chain_id);return Promise.resolve(Promise.all(a.map(function(c){return c.sign(o)}))).then(function(c){var u=$o.from(cs({},s,{signatures:c}));return QMe(function(){return Promise.resolve(ZMe(t)).then(function(f){return _F("Pushing transaction",JSON.stringify(f,null,2)),Promise.resolve(Ga().v1.chain.push_transaction(u))})},function(f){var l;if(_F("Error pushing transaction",f),(l=f.response)!=null&&l.headers){var d;throw(d=f.response)!=null&&d.json?new KY(cs({},f.response.json,{actions:t})):new C_e(f)}throw f})})})})}catch(t){return Promise.reject(t)}},ZMe=function(r){try{return Promise.resolve(Promise.all((Array.isArray(r)?r:[r]).map(WY))).then(function(e){return e.map(function(t){return t.decoded})})}catch(e){return Promise.reject(e)}},_F=Mt("tonomy-sdk:services:blockchain:eosio:transaction");function ay(r,e,t){return{sign:function(n){try{return Promise.resolve(r.signData({level:e,data:n,challenge:t}))}catch(i){return Promise.reject(i)}}}}var KY=function(r){function e(n){var i,s;return(s=r.call(this,"AntelopePushTransactionError")||this).code=void 0,s.message=void 0,s.error=void 0,s.actions=void 0,s.contract=void 0,s.code=n.code,s.message=n.error.what,Array.isArray((i=n.error)==null?void 0:i.details)&&n.error.details.length>0&&(s.message+=": "+n.error.details[0].message),s.error=n.error,s.contract=n.contract,s.actions=n.actions?n.actions.map(function(a){return a instanceof Nr?a.decoded:a}):void 0,s.stack=new Error().stack,s.name=s.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(s,s.constructor),s}Rt(e,r);var t=e.prototype;return t.hasErrorCode=function(n){return this.error.code===n},t.hasTonomyErrorCode=function(n){return this.error.details[0].message.search(n)>0},e}(Hm(Error)),GY={____comment:"This file was generated with eosio-abigen. DO NOT EDIT ",version:"eosio::abi/1.2",types:[{new_type_name:"account_status",type:"uint8"},{new_type_name:"account_type",type:"uint8"},{new_type_name:"block_signing_authority",type:"variant_block_signing_authority_v0"},{new_type_name:"permission_level_name",type:"uint8"}],structs:[{name:"account_type_struct",base:"",fields:[{name:"account_name",type:"name"},{name:"acc_type",type:"account_type"},{name:"version",type:"uint16"}]},{name:"activate",base:"",fields:[{name:"feature_digest",type:"checksum256"}]},{name:"adminsetapp",base:"",fields:[{name:"account_name",type:"name"},{name:"json_data",type:"string"},{name:"username_hash",type:"checksum256"},{name:"origin",type:"string"}]},{name:"app",base:"",fields:[{name:"account_name",type:"name"},{name:"app_name",type:"string"},{name:"username_hash",type:"checksum256"},{name:"description",type:"string"},{name:"logo_url",type:"string"},{name:"origin",type:"string"}]},{name:"appv2",base:"",fields:[{name:"account_name",type:"name"},{name:"json_data",type:"string"},{name:"version",type:"uint16"},{name:"username_hash",type:"checksum256"},{name:"origin",type:"string"}]},{name:"authority",base:"",fields:[{name:"threshold",type:"uint32"},{name:"keys",type:"key_weight[]"},{name:"accounts",type:"permission_level_weight[]"},{name:"waits",type:"wait_weight[]"}]},{name:"block_signing_authority_v0",base:"",fields:[{name:"threshold",type:"uint32"},{name:"keys",type:"key_weight[]"}]},{name:"blockchain_parameters",base:"",fields:[{name:"max_block_net_usage",type:"uint64"},{name:"target_block_net_usage_pct",type:"uint32"},{name:"max_transaction_net_usage",type:"uint32"},{name:"base_per_transaction_net_usage",type:"uint32"},{name:"net_usage_leeway",type:"uint32"},{name:"context_free_discount_net_usage_num",type:"uint32"},{name:"context_free_discount_net_usage_den",type:"uint32"},{name:"max_block_cpu_usage",type:"uint32"},{name:"target_block_cpu_usage_pct",type:"uint32"},{name:"max_transaction_cpu_usage",type:"uint32"},{name:"min_transaction_cpu_usage",type:"uint32"},{name:"max_transaction_lifetime",type:"uint32"},{name:"deferred_trx_expiration_window",type:"uint32"},{name:"max_transaction_delay",type:"uint32"},{name:"max_inline_action_size",type:"uint32"},{name:"max_inline_action_depth",type:"uint16"},{name:"max_authority_depth",type:"uint16"}]},{name:"buyram",base:"",fields:[{name:"dao_owner",type:"name"},{name:"app",type:"name"},{name:"quant",type:"asset"}]},{name:"canceldelay",base:"",fields:[{name:"canceling_auth",type:"permission_level"},{name:"trx_id",type:"checksum256"}]},{name:"deleteapp",base:"",fields:[{name:"account_name",type:"name"}]},{name:"deleteauth",base:"",fields:[{name:"account",type:"name"},{name:"permission",type:"name"}]},{name:"eraseoldapps",base:"",fields:[]},{name:"key_weight",base:"",fields:[{name:"key",type:"public_key"},{name:"weight",type:"uint16"}]},{name:"linkauth",base:"",fields:[{name:"account",type:"name"},{name:"code",type:"name"},{name:"type",type:"name"},{name:"requirement",type:"name"}]},{name:"loginwithapp",base:"",fields:[{name:"account",type:"name"},{name:"app",type:"name"},{name:"parent",type:"name"},{name:"key",type:"public_key"}]},{name:"newaccount",base:"",fields:[{name:"creator",type:"name"},{name:"name",type:"name"},{name:"owner",type:"authority"},{name:"active",type:"authority"}]},{name:"newapp",base:"",fields:[{name:"json_data",type:"string"},{name:"username_hash",type:"checksum256"},{name:"origin",type:"string"},{name:"key",type:"public_key"}]},{name:"newperson",base:"",fields:[{name:"username_hash",type:"checksum256"},{name:"password_key",type:"public_key"},{name:"password_salt",type:"checksum256"}]},{name:"onerror",base:"",fields:[{name:"sender_id",type:"uint128"},{name:"sent_trx",type:"bytes"}]},{name:"permission_level",base:"",fields:[{name:"actor",type:"name"},{name:"permission",type:"name"}]},{name:"permission_level_weight",base:"",fields:[{name:"permission",type:"permission_level"},{name:"weight",type:"uint16"}]},{name:"person",base:"",fields:[{name:"account_name",type:"name"},{name:"status",type:"account_status"},{name:"username_hash",type:"checksum256"},{name:"password_salt",type:"checksum256"}]},{name:"producer_authority",base:"",fields:[{name:"producer_name",type:"name"},{name:"authority",type:"block_signing_authority"}]},{name:"reqactivated",base:"",fields:[{name:"feature_digest",type:"checksum256"}]},{name:"reqauth",base:"",fields:[{name:"from",type:"name"}]},{name:"resource_config",base:"",fields:[{name:"ram_fee",type:"float64"},{name:"ram_price",type:"float64"},{name:"total_ram_available",type:"uint64"},{name:"total_ram_used",type:"uint64"},{name:"total_cpu_weight_allocated",type:"uint64"},{name:"total_net_weight_allocated",type:"uint64"}]},{name:"sellram",base:"",fields:[{name:"dao_owner",type:"name"},{name:"app",type:"name"},{name:"quant",type:"asset"}]},{name:"setabi",base:"",fields:[{name:"account",type:"name"},{name:"abi",type:"bytes"}]},{name:"setalimits",base:"",fields:[{name:"account",type:"name"},{name:"ram_bytes",type:"int64"},{name:"net_weight",type:"int64"},{name:"cpu_weight",type:"int64"}]},{name:"setcode",base:"",fields:[{name:"account",type:"name"},{name:"vmtype",type:"uint8"},{name:"vmversion",type:"uint8"},{name:"code",type:"bytes"}]},{name:"setparams",base:"",fields:[{name:"params",type:"blockchain_parameters"}]},{name:"setpriv",base:"",fields:[{name:"account",type:"name"},{name:"is_priv",type:"uint8"}]},{name:"setprods",base:"",fields:[{name:"schedule",type:"producer_authority[]"}]},{name:"setresparams",base:"",fields:[{name:"ram_price",type:"float64"},{name:"total_ram_available",type:"uint64"},{name:"ram_fee",type:"float64"}]},{name:"unlinkauth",base:"",fields:[{name:"account",type:"name"},{name:"code",type:"name"},{name:"type",type:"name"}]},{name:"updateactive",base:"",fields:[{name:"account",type:"name"},{name:"active",type:"authority"}]},{name:"updateauth",base:"",fields:[{name:"account",type:"name"},{name:"permission",type:"name"},{name:"parent",type:"name"},{name:"auth",type:"authority"},{name:"auth_parent",type:"bool"}]},{name:"updatekeyper",base:"",fields:[{name:"account",type:"name"},{name:"permission",type:"permission_level_name"},{name:"key",type:"public_key"},{name:"link_auth",type:"bool"}]},{name:"wait_weight",base:"",fields:[{name:"wait_sec",type:"uint32"},{name:"weight",type:"uint16"}]}],actions:[{name:"activate",type:"activate",ricardian_contract:""},{name:"adminsetapp",type:"adminsetapp",ricardian_contract:""},{name:"buyram",type:"buyram",ricardian_contract:""},{name:"canceldelay",type:"canceldelay",ricardian_contract:""},{name:"deleteapp",type:"deleteapp",ricardian_contract:""},{name:"deleteauth",type:"deleteauth",ricardian_contract:""},{name:"eraseoldapps",type:"eraseoldapps",ricardian_contract:""},{name:"linkauth",type:"linkauth",ricardian_contract:""},{name:"loginwithapp",type:"loginwithapp",ricardian_contract:""},{name:"newaccount",type:"newaccount",ricardian_contract:""},{name:"newapp",type:"newapp",ricardian_contract:""},{name:"newperson",type:"newperson",ricardian_contract:""},{name:"onerror",type:"onerror",ricardian_contract:""},{name:"reqactivated",type:"reqactivated",ricardian_contract:""},{name:"reqauth",type:"reqauth",ricardian_contract:""},{name:"sellram",type:"sellram",ricardian_contract:""},{name:"setabi",type:"setabi",ricardian_contract:""},{name:"setalimits",type:"setalimits",ricardian_contract:""},{name:"setcode",type:"setcode",ricardian_contract:""},{name:"setparams",type:"setparams",ricardian_contract:""},{name:"setpriv",type:"setpriv",ricardian_contract:""},{name:"setprods",type:"setprods",ricardian_contract:""},{name:"setresparams",type:"setresparams",ricardian_contract:""},{name:"unlinkauth",type:"unlinkauth",ricardian_contract:""},{name:"updateactive",type:"updateactive",ricardian_contract:""},{name:"updateauth",type:"updateauth",ricardian_contract:""},{name:"updatekeyper",type:"updatekeyper",ricardian_contract:""}],tables:[{name:"acctypes",type:"account_type_struct",index_type:"i64",key_names:[],key_types:[]},{name:"apps",type:"app",index_type:"i64",key_names:[],key_types:[]},{name:"appsv2",type:"appv2",index_type:"i64",key_names:[],key_types:[]},{name:"people",type:"person",index_type:"i64",key_names:[],key_types:[]},{name:"resconfig",type:"resource_config",index_type:"i64",key_names:[],key_types:[]}],ricardian_clauses:[],variants:[{name:"variant_block_signing_authority_v0",types:["block_signing_authority_v0"]}],action_results:[]},SF="eosio.token";function QY(r,e){var t=e||fr().currencySymbol,n=r.split(" "),i=n[0],s=n[1];if(s!==t)throw new Error("Invalid currency symbol: expected "+t+", got "+s);return i}function hd(r,e){return parseFloat(QY(r,e))}function JMe(r,e){return new vp(QY(r,e))}function MF(r,e,t){return t===void 0&&(t=6),r.toFixed(t)+" "+e}var ZY=function(r){function e(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=r.call.apply(r,[this].concat(s))||this).actions={create:function(o,c){return c===void 0&&(c=Cr(n.contractName)),n.action("create",{issuer:o.issuer,maximum_supply:o.maximumSupply},c)},issue:function(o,c){var u=o.to,f=o.quantity,l=o.memo,d=l===void 0?"":l;return c===void 0&&(c=Cr(n.contractName)),n.action("issue",{to:u,quantity:f,memo:d},c)},retire:function(o,c){var u=o.quantity,f=o.memo,l=f===void 0?"":f;return c===void 0&&(c=Cr(n.contractName)),n.action("retire",{quantity:u,memo:l},c)},transfer:function(o,c){var u=o.from,f=o.to,l=o.quantity,d=o.memo,h=d===void 0?"":d;return c===void 0&&(c=Cr(u)),n.action("transfer",{from:u,to:f,quantity:l,memo:h},c)},setStats:function(o,c){return c===void 0&&(c=Cr(n.contractName)),n.action("setstats",o,c)},bridgeIssue:function(o,c){var u=o.to,f=o.quantity,l=o.memo,d=l===void 0?"":l;return c===void 0&&(c=Cr(n.contractName)),n.action("bridgeissue",{to:u,quantity:f,memo:d},c)},bridgeRetire:function(o,c){var u=o.from,f=o.quantity,l=o.memo,d=l===void 0?"":l;return c===void 0&&(c=Cr(n.contractName)),n.action("bridgeretire",{from:u,quantity:f,memo:d},c)}},n}Rt(e,r),e.atAccount=function(n){n===void 0&&(n=SF);try{var i=this;return Promise.resolve(k6(n)).then(function(s){return new i(s)})}catch(s){return Promise.reject(s)}},e.fromAbi=function(n,i){return i===void 0&&(i=SF),new this(new o5({abi:n,client:Ga(),account:i}),X5())};var t=e.prototype;return t.create=function(n,i,s){try{var a=this.actions.create({issuer:n,maximumSupply:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.issue=function(n,i,s,a){try{var o=this.actions.issue({to:n,quantity:i,memo:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.transfer=function(n,i,s,a,o){try{var c=this.actions.transfer({from:n,to:i,quantity:s,memo:a});return Promise.resolve(Vt(c,o))}catch(u){return Promise.reject(u)}},t.retire=function(n,i,s){try{var a=this.actions.retire({quantity:n,memo:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.bridgeIssue=function(n,i,s,a){try{var o=this.actions.bridgeIssue({to:n,quantity:i,memo:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.bridgeRetire=function(n,i,s,a){try{var o=this.actions.bridgeRetire({from:n,quantity:i,memo:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.getBalance=function(n,i){try{var s=i||fr().currencySymbol;return Promise.resolve(Ga().v1.chain.get_currency_balance(this.contractName,n,s)).then(function(a){return a.length===0?0:a[0].value})}catch(a){return Promise.reject(a)}},t.getBalanceDecimal=function(n,i){try{var s=i||fr().currencySymbol;return Promise.resolve(Ga().v1.chain.get_currency_balance(this.contractName,n,s)).then(function(a){return a.length===0?new vp(0):JMe(a[0].toString(),s)})}catch(a){return Promise.reject(a)}},e}(e8);ZY.TOTAL_SUPPLY=5e10;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));var C1,PF,hRe=function(r){try{return Promise.resolve(Us().getPersonDataByUsername(r)).then(function(e){return e.account_name})}catch(e){return Promise.reject(e)}},YMe=Mt("tonomy-sdk:blockchain:contracts:TonomyContract"),TF="tonomy",DN="tonomy";function SA(r){return{accountName:r.account_name,status:r.status.toNumber(),usernameHash:r.username_hash,passwordSalt:r.password_salt}}function CF(r,e,t,n,i){return JSON.stringify({app_name:r,description:e,logo_url:t,background_color:n,accent_color:i})}function IF(r){var e=JSON.parse(r.json_data);return{accountName:r.account_name,appName:e.app_name,description:e.description,logoUrl:e.logo_url,origin:r.origin,backgroundColor:e.background_color,accentColor:e.accent_color,usernameHash:r.username_hash,version:r.version.toNumber(),jsonData:r.json_data}}(function(r){r.OWNER="OWNER",r.ACTIVE="ACTIVE",r.PASSWORD="PASSWORD",r.PIN="PIN",r.BIOMETRIC="BIOMETRIC",r.LOCAL="LOCAL"})(C1||(C1={})),function(r){r[r.Person=0]="Person",r[r.Organization=1]="Organization",r[r.App=2]="App",r[r.Gov=3]="Gov",r[r.Service=4]="Service"}(PF||(PF={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]}}(C1||(C1={}));var MA,of,XMe=function(r){function e(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=r.call.apply(r,[this].concat(s))||this).actions={buyRam:function(o,c){return c===void 0&&(c={authorization:[{actor:o.daoOwner,permission:"active"},{actor:o.app,permission:"active"}]}),n.action("buyram",{dao_owner:o.daoOwner,app:o.app,quant:o.quant},c)},setResParams:function(o,c){return c===void 0&&(c=Cr(DN)),n.action("setresparams",{ram_price:o.ramPrice,total_ram_available:o.totalRamAvailable,ram_fee:o.ramFee},c)},newPerson:function(o,c){return n.action("newperson",{username_hash:o.usernameHash,password_key:o.passwordKey,password_salt:o.passwordSalt},c)},updateActive:function(o,c){return c===void 0&&(c=Cr(o.account)),n.action("updateactive",o,c)},updateKeyPer:function(o,c){var u;return c===void 0&&(c={authorization:[{actor:o.account,permission:"owner"}]}),n.action("updatekeyper",{account:o.account,permission:o.permission_level,key:o.key,link_auth:(u=o.link_auth)==null||u},c)},loginWithApp:function(o,c){return c===void 0&&(c={authorization:[{actor:o.account,permission:o.parent}]}),n.action("loginwithapp",o,c)},newApp:function(o,c){return n.action("newapp",{json_data:o.jsonData,username_hash:o.usernameHash,origin:o.origin,key:o.key},c)},adminSetApp:function(o,c){return n.action("adminsetapp",{account_name:qe.from(o.accountName),json_data:o.jsonData,username_hash:o.usernameHash,origin:o.origin},c)},deleteApp:function(o,c){return c===void 0&&(c=Cr(n.contractName)),n.action("deleteapp",{account_name:qe.from(o.accountName)},c)},eraseOldApps:function(o,c){return o===void 0&&(o={}),c===void 0&&(c=KMe(n.contractName)),n.action("eraseoldapps",o,c)}},n}Rt(e,r),e.atAccount=function(n){n===void 0&&(n=TF);try{var i=this;return Promise.resolve(k6(n)).then(function(s){return new i(s)})}catch(s){return Promise.reject(s)}},e.fromAbi=function(n,i){return i===void 0&&(i=TF),new this(new o5({abi:n,client:Ga(),account:i}),X5())};var t=e.prototype;return t.buyRam=function(n,i,s,a){try{var o=this.actions.buyRam({daoOwner:n,app:i,quant:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.setResourceParams=function(n,i,s,a){try{var o=this.actions.setResParams({ramPrice:n,totalRamAvailable:i,ramFee:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.newPerson=function(n,i,s,a){try{var o=this.actions.newPerson({usernameHash:n,passwordKey:i,passwordSalt:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.updateKeysPerson=function(n,i,s){try{var a=this;return Promise.resolve(I9(n)).then(function(o){Object.keys(i).length===0&&Ze("At least one key must be provided",Ce.UpdateKeysTransactionNoKeys);var c=[];for(var u in i){var f=C1.from(u),l=i[u],d=!0;try{var h=o.getPermission(f.toLowerCase());h&&h.linked_actions.find(function(y){return y.account.equals(a.contractName)&&y.action.equals("loginwithapp")})&&(d=!1)}catch(y){if(!y.message.startsWith("Unknown permission "))throw y}c.push(a.actions.updateKeyPer({account:n,permission_level:C1.indexFor(f),key:l,link_auth:d},Cr(n)))}return Vt(c,s)})}catch(o){return Promise.reject(o)}},t.updateActive=function(n,i,s){try{var a=this.actions.updateActive({account:n,active:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.newApp=function(n,i,s,a,o,c,u,f,l){try{var d=CF(n,i,a,c,u),h=this.actions.newApp({jsonData:d,usernameHash:s,origin:o,key:f});return Promise.resolve(Vt(h,l))}catch(y){return Promise.reject(y)}},t.loginWithApp=function(n,i,s,a,o){try{var c=this.actions.loginWithApp({account:n,app:i,parent:s,key:a});return Promise.resolve(Vt(c,o))}catch(u){return Promise.reject(u)}},t.getPersonData=function(n){try{return Promise.resolve(this.contract.table("people",this.contractName).get(n)).then(function(i){return i||Ze('Person "'+n.toString()+'" not found',Ce.AccountDoesntExist),i})}catch(i){return Promise.reject(i)}},t.getPersonDataByUsername=function(n){try{var i=kt.from(n.usernameHash);return Promise.resolve(this.contract.table("people",this.contractName).get(i,{index_position:"secondary"})).then(function(s){return s||Ze('Person with username "'+n.toString()+'" not found',Ce.UsernameNotFound),s})}catch(s){return Promise.reject(s)}},t.getAllAppData2=function(){try{return Promise.resolve(this.contract.table("appsv2",this.contractName).all()).then(function(n){return n&&n.length!==0||Ze("Apps not found",Ce.AccountDoesntExist),n})}catch(n){return Promise.reject(n)}},t.getAppData2=function(n){try{return Promise.resolve(this.contract.table("appsv2",this.contractName).get(n)).then(function(i){return i||Ze('App "'+n.toString()+'" not found',Ce.AccountDoesntExist),i})}catch(i){return Promise.reject(i)}},t.getAppData2ByUsername=function(n){try{var i=kt.from(n.usernameHash);return Promise.resolve(this.contract.table("appsv2",this.contractName).get(i,{index_position:"secondary"})).then(function(s){return s||Ze('App with username "'+n.toString()+'" not found',Ce.UsernameNotFound),s})}catch(s){return Promise.reject(s)}},t.getAppDataByOrigin=function(n){try{var i=Km(n);return Promise.resolve(this.contract.table("appsv2",this.contractName).get(kt.from(i),{index_position:"tertiary"})).then(function(s){return s||Ze('Origin "'+n+'" not found',Ce.OriginNotFound),s})}catch(s){return Promise.reject(s)}},t.getPerson=function(n){try{var i,s=function(){return SA(i)};YMe("getPerson",n,n instanceof $i);var a=n instanceof $i?Promise.resolve(this.getPersonDataByUsername(n)).then(function(o){i=o}):Promise.resolve(this.getPersonData(n)).then(function(o){i=o});return Promise.resolve(a&&a.then?a.then(s):s())}catch(o){return Promise.reject(o)}},t.getPeople=function(n){try{var i=this.contract.table("people",this.contractName).query(n);return Promise.resolve(i.next()).then(function(s){return s.map(SA)})}catch(s){return Promise.reject(s)}},t.getAllPeople=function(n){n===void 0&&(n=1e3);try{var i=this.contract.table("people",this.contractName).query({rowsPerAPIRequest:n});return Promise.resolve(i.all()).then(function(s){return s.map(SA)})}catch(s){return Promise.reject(s)}},t.getApp=function(n){try{var i,s=function(){return IF(i)},a=this,o=function(){if(n instanceof $i)return Promise.resolve(a.getAppData2ByUsername(n)).then(function(u){i=u});var c=n instanceof qe?Promise.resolve(a.getAppData2(n)).then(function(u){i=u}):Promise.resolve(a.getAppDataByOrigin(n)).then(function(u){i=u});return c&&c.then?c.then(function(){}):void 0}();return Promise.resolve(o&&o.then?o.then(s):s())}catch(c){return Promise.reject(c)}},t.getAllApps=function(){try{return Promise.resolve(this.getAllAppData2()).then(function(n){return n.map(IF)})}catch(n){return Promise.reject(n)}},t.adminSetApp=function(n,i,s,a,o,c,u,f,l){try{var d=CF(i,s,o,u,f),h=this.actions.adminSetApp({accountName:n,jsonData:d,usernameHash:a,origin:c});return Promise.resolve(Vt([h],l))}catch(y){return Promise.reject(y)}},e}(e8),Us=function(){return MA||(MA=XMe.fromAbi(GY)),MA},ePe=function(r,e,t){t===void 0&&(t=!0);try{return Promise.resolve(function(){if(t&&e){var n=$i.fromFullUsername(e);return Promise.resolve(Us().getPerson(n)).then(function(i){return i.accountName.equals(r)||Ze("Username does not match account",Ce.InvalidData),n})}}())}catch(n){return Promise.reject(n)}};(function(r){r.PERSON="PERSON",r.ORG="ORG",r.APP="APP",r.GOV="GOV"})(of||(of={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;return t=typeof e!="number"?r.indexFor(e):e,Object.values(r)[t]},r.getPreSuffix=function(e){return e.toLowerCase()}}(of||(of={}));var $i=function(){function r(t){this.username=void 0,this.usernameHash=void 0,this.username=t,this.usernameHash=Km(this.username)}r.fromUsername=function(t,n,i){return new r(t.normalize("NFKC").toLowerCase()+"."+of.getPreSuffix(n)+i)},r.fromFullUsername=function(t){return new r(t)};var e=r.prototype;return e.getBaseUsername=function(){var t;return(t=this.username)==null?void 0:t.split(".")[0]},e.toString=function(){return this.username},e.toJSON=function(){return this.toString()},r}(),RF="tonomy",tPe=["eosio","eosio.token","tonomy","vesting.tmy","staking.tmy","tonomy"];function Tb(r){return zY([r,{authorization:[{actor:DN,permission:"owner"}]}])}function rPe(r){return zY([r,{authorization:[{actor:DN,permission:"active"}]}])}function PA(r,e){return tPe.includes(e.toString())?Tb(r):rPe(r)}var TA,nPe=function(r){function e(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=r.call.apply(r,[this].concat(s))||this).actions={newAccount:function(o,c){return c===void 0&&(c=Tb(Cr(o.creator))),n.action("newaccount",o,c)},setCode:function(o,c){return c===void 0&&(c=PA(Cr(o.account),o.account)),n.action("setcode",o,c)},setAbi:function(o,c){return c===void 0&&(c=PA(Cr(o.account),o.account)),n.action("setabi",o,c)},updateAuth:function(o,c){var u;return c===void 0&&(c=PA({authorization:[{actor:o.account,permission:o.authParent?o.parent:o.permission}]},o.account)),n.action("updateauth",{account:o.account,permission:o.permission,parent:o.permission==="owner"?"":o.parent,auth:o.auth,auth_parent:(u=o.authParent)!=null&&u},c)},linkAuth:function(o,c){return c===void 0&&(c=Cr(o.account)),n.action("linkauth",{account:o.account,code:o.code,type:o.type,requirement:o.requirement},c)},setPriv:function(o,c){return c===void 0&&(c=Tb(Cr(n.contractName))),n.action("setpriv",{account:o.account,is_priv:o.isPriv},c)},setProds:function(o,c){return c===void 0&&(c=Tb(Cr(n.contractName))),n.action("setprods",o,c)},setParams:function(o,c){return c===void 0&&(c=Tb(Cr(n.contractName))),n.action("setparams",o,c)}},n}Rt(e,r),e.atAccount=function(n){n===void 0&&(n=RF);try{var i=this;return Promise.resolve(k6(n)).then(function(s){return new i(s)})}catch(s){return Promise.reject(s)}},e.fromAbi=function(n,i){return i===void 0&&(i=RF),new this(new o5({abi:n,client:Ga(),account:i}),X5())};var t=e.prototype;return t.deployContractActions=function(n,i,s,a){try{var o,c=i.toString("hex"),u=JSON.parse(s.toString()),f=Nt.from(u),l=Ut.encode({object:f}).hexString;a&&(o={authorization:Array.isArray(a)?a:[a]});var d=this.actions.setCode({account:n,vmtype:0,vmversion:0,code:c},o),h=this.actions.setAbi({account:n,abi:l},o);return Promise.resolve([d,h])}catch(y){return Promise.reject(y)}},t.deployContract=function(n,i,s,a,o){try{return Promise.resolve(this.deployContractActions(n,i,s,o)).then(function(c){return Vt(c,a)})}catch(c){return Promise.reject(c)}},t.newAccount=function(n,i,s,a,o){try{var c=this.actions.newAccount({creator:n,name:i,owner:s,active:a});return Promise.resolve(Vt(c,o))}catch(u){return Promise.reject(u)}},t.updateAuth=function(n,i,s,a,o,c){c===void 0&&(c={});try{var u=this.actions.updateAuth({account:n,permission:i,parent:s,auth:a,authParent:c.authParent});return Promise.resolve(Vt(u,o))}catch(f){return Promise.reject(f)}},t.linkAuth=function(n,i,s,a,o){try{var c=this.actions.linkAuth({account:n,code:i,type:s,requirement:a});return Promise.resolve(Vt(c,o))}catch(u){return Promise.reject(u)}},t.setPriv=function(n,i,s){try{var a=this.actions.setPriv({account:n,isPriv:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},e}(e8),NF=function(){return TA||(TA=nPe.fromAbi(GY)),TA};Mt("tonomy-sdk:services:blockchain:contracts:EosioMsigContract");var iPe=Mt("tonomy-sdk:blockchain:contracts:DemoTokenContract"),pRe=function(r){function e(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=r.call.apply(r,[this].concat(s))||this).actions={create:function(o,c){return n.action("create",{issuer:o.issuer,maximum_supply:o.maximumSupply},c)},issue:function(o,c){var u=o.memo;return n.action("issue",{to:o.to,quantity:o.quantity,memo:u===void 0?"":u},c)},selfIssue:function(o,c){var u=o.to,f=o.quantity,l=o.memo,d=l===void 0?"":l;return c===void 0&&(c=Cr(u)),n.action("selfissue",{to:u,quantity:f,memo:d},c)}},n}Rt(e,r),e.atAccount=function(n){try{var i=this;return Promise.resolve(i.getContractName(n)).then(function(s){return Promise.resolve(k6(s)).then(function(a){return new i(a)})})}catch(s){return Promise.reject(s)}},e.getContractName=function(n){try{if(n)return Promise.resolve(n);var i=$i.fromUsername("demo",of.APP,fr().accountSuffix);return Promise.resolve(Us().getApp(i)).then(function(s){return iPe("demo contract found",s.accountName.toString()),s.accountName})}catch(s){return Promise.reject(s)}};var t=e.prototype;return t.create=function(n,i,s){try{var a=this.actions.create({issuer:n,maximumSupply:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.issue=function(n,i,s,a){try{var o=this.actions.issue({to:n,quantity:i,memo:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.selfIssue=function(n,i,s,a){try{var o=this.actions.selfIssue({to:n,quantity:i,memo:s});return Promise.resolve(Vt(o,a))}catch(c){return Promise.reject(c)}},t.getBalance=function(n){try{return Promise.resolve(Ga().v1.chain.get_currency_balance(this.contractName,n,fr().currencySymbol)).then(function(i){return i.length===0?0:i[0].value})}catch(i){return Promise.reject(i)}},e}(e8),OF=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Ji(r,e,t){if(!r.s){if(t instanceof I1){if(!t.s)return void(t.o=Ji.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(Ji.bind(null,r,e),Ji.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var hl,I1=function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var s=1&i?e:t;if(s){try{Ji(n,1,s(this.v))}catch(a){Ji(n,2,a)}return n}return this}return this.o=function(a){try{var o=a.v;1&a.s?Ji(n,1,e?e(o):o):t?Ji(n,1,t(o)):Ji(n,2,o)}catch(c){Ji(n,2,c)}},n},r}();function kF(r){return r instanceof I1&&1&r.s}var sPe=Mt("tonomy-sdk:services:blockchain:contracts:staking"),Mv="staking.tmy",bo=function(r){function e(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=r.call.apply(r,[this].concat(s))||this).actions={stakeTokens:function(o,c){return c===void 0&&(c=Cr(o.accountName)),n.action("staketokens",{account_name:o.accountName,quantity:o.quantity},c)},requestUnstake:function(o,c){return c===void 0&&(c=Cr(o.accountName)),n.action("requnstake",{account_name:o.accountName,allocation_id:o.allocationId},c)},releaseToken:function(o,c){return c===void 0&&(c=Cr(o.accountName)),n.action("releasetoken",{account_name:o.accountName,allocation_id:o.allocationId},c)},cron:function(o){return n.action("cron",{},o)},resetAll:function(o){return n.action("resetall",{},o)},addYield:function(o,c){return c===void 0&&(c=Cr(o.sender)),n.action("addyield",o,c)},setSettings:function(o,c){return n.action("setsettings",{yearly_stake_pool:o.yearlyStakePool},c)}},n}Rt(e,r),e.fromAbi=function(n,i){return i===void 0&&(i=Mv),new this(new o5({abi:n,client:Ga(),account:i}),X5())},e.atAccount=function(n){n===void 0&&(n=Mv);try{var i=this;return Promise.resolve(k6(n)).then(function(s){return new i(s)})}catch(s){return Promise.reject(s)}};var t=e.prototype;return t.stakeTokens=function(n,i,s){try{var a=this;return Promise.resolve(I9(n)).then(function(o){function c(){var l=a.actions.stakeTokens({accountName:n,quantity:i});return Promise.resolve(Vt(l,s))}var u=o.getPermission("active"),f=function(){if(!u.required_auth.accounts.some(function(d){return d.permission.actor.toString()===Mv&&d.permission.permission.toString()==="eosio.code"})){var l=GMe.fromAccountPermission(u);return l.addCodePermission(Mv.toString()),sPe("Adding staking.tmy@eosio.code to active permission",JSON.stringify(l,null,2)),Promise.resolve(Us().updateActive(n,l,s)).then(function(){})}}();return f&&f.then?f.then(c):c()})}catch(o){return Promise.reject(o)}},t.requestUnstake=function(n,i,s){try{var a=this.actions.requestUnstake({accountName:n,allocationId:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.releaseToken=function(n,i,s){try{var a=this.actions.releaseToken({accountName:n,allocationId:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.cron=function(n){try{var i=this.actions.cron();return Promise.resolve(Vt(i,n))}catch(s){return Promise.reject(s)}},t.resetAll=function(n){try{var i=this.actions.resetAll();return Promise.resolve(Vt(i,n))}catch(s){return Promise.reject(s)}},t.addYield=function(n,i,s){try{var a=this.actions.addYield({sender:n,quantity:i});return Promise.resolve(Vt(a,s))}catch(o){return Promise.reject(o)}},t.setSettings=function(n,i){try{var s=this.actions.setSettings({yearlyStakePool:n});return Promise.resolve(Vt(s,i))}catch(a){return Promise.reject(a)}},t.getAllocationsData=function(n){try{var i=this.contract.table("stakingalloc",n);return Promise.resolve(i.all())}catch(s){return Promise.reject(s)}},t.getAllocations=function(n,i){try{var s=this;return Promise.resolve(s.getAllocationsData(n)).then(function(a){var o=[],c=function(u,f){if(typeof u[OF]=="function"){var l,d,h,y=function(b){try{for(;!(l=p.next()).done;)if((b=f(l.value))&&b.then){if(!kF(b))return void b.then(y,h||(h=Ji.bind(null,d=new I1,2)));b=b.v}d?Ji(d,1,b):d=b}catch(_){Ji(d||(d=new I1),2,_)}},p=u[OF]();if(y(),p.return){var g=function(b){try{l.done||p.return()}catch{}return b};if(d&&d.then)return d.then(g,function(b){throw g(b)});g()}return d}if(!("length"in u))throw new TypeError("Object is not iterable");for(var m=[],v=0;v<u.length;v++)m.push(u[v]);return function(b,_){var C,N,x=-1;return function I($){try{for(;++x<b.length;)if(($=_(x))&&$.then){if(!kF($))return void $.then(I,N||(N=Ji.bind(null,C=new I1,2)));$=$.v}C?Ji(C,1,$):C=$}catch(j){Ji(C||(C=new I1),2,j)}}(),C}(m,function(b){return f(m[b])})}(a,function(u){function f(h){var y=MF(h,"TONO"),p=MF(hd(u.tokens_staked.toString())-hd(u.initial_stake.toString()),"TONO");o.push({id:u.id.toNumber(),staker:qe.from(n),initialStake:u.initial_stake.toString(),staked:u.tokens_staked.toString(),yieldSoFar:p,stakedTime:l,unstakeableTime:EF(l,e.getLockedDays()*yw),unstakeTime:d,releaseTime:EF(d,e.getReleaseDays()*yw),unstakeRequested:u.unstake_requested,monthlyYield:y})}var l=new Date(u.stake_time.toString()+"Z"),d=new Date(u.unstake_time.toString()+"Z");return u.unstake_requested?f(0):Promise.resolve(s.calculateMonthlyYield(hd(u.tokens_staked.toString()),i)).then(f)});return c&&c.then?c.then(function(){return o}):o})}catch(a){return Promise.reject(a)}},t.getSettingsData=function(){try{return Promise.resolve(this.contract.table("settings",this.contractName).get()).then(function(n){if(!n)throw new Error("Staking settings have not yet been set");return n})}catch(n){return Promise.reject(n)}},t.getSettings=function(){try{return Promise.resolve(this.getSettingsData()).then(function(n){var i=hd(n.yearly_stake_pool.toString()),s=hd(n.total_staked.toString()),a=s>0?Math.min(i/s,e.MAX_APY):e.MAX_APY;return{currentYieldPool:n.current_yield_pool.toString(),yearlyStakePool:n.yearly_stake_pool.toString(),totalStaked:n.total_staked.toString(),totalReleasing:n.total_releasing.toString(),apy:a}})}catch(n){return Promise.reject(n)}},t.getAccountData=function(n){try{var i=this.contract.table("stakingaccou",this.contractName);return Promise.resolve(i.get(n)).then(function(s){return s||Ze("Account not found in staking contract",Ce.AccountNotFound),s})}catch(s){return Promise.reject(s)}},t.getAccount=function(n){try{return Promise.resolve(this.getAccountData(n)).then(function(i){return{staker:i.staker,totalYield:i.total_yield.toString(),lastPayout:new Date(i.last_payout+"Z"),payments:i.payments.toNumber(),version:i.version.toNumber()}})}catch(i){return Promise.reject(i)}},t.getAccountState=function(n){try{var i=this;return Promise.resolve(i.getSettings()).then(function(s){return Promise.resolve(i.getAllocations(n,s)).then(function(a){return Promise.resolve(i.getAccount(n)).then(function(o){for(var c,u=0,f=0,l=0,d=JJ(a);!(c=d()).done;){var h=c.value,y=hd(h.staked);h.unstakeRequested?l+=y:(u+=y,f+=hd(h.monthlyYield))}return cs({},o,{allocations:a,totalStaked:u,totalUnlockable:0,totalUnlocking:l,estimatedMonthlyYield:f,settings:s})})})})}catch(s){return Promise.reject(s)}},t.calculateMonthlyYield=function(n,i){try{return Promise.resolve(n*(Math.pow(1+i.apy,1/12)-1))}catch(s){return Promise.reject(s)}},e}(e8);hl=bo,bo.isTestEnv=function(){return["test","staging"].includes(fr().environment)},bo.getLockedDays=function(){return hl.isTestEnv()?10/yw:14},bo.getReleaseDays=function(){return hl.isTestEnv()?5/yw:5},bo.getMinimumTransfer=function(){return hl.isTestEnv()?1:1e3},bo.getMaxAllocations=function(){return hl.isTestEnv()?5:20},bo.getStakingCycleHours=function(){return hl.isTestEnv()?1/60:24},bo.MAX_APY=1,bo.STAKING_APY_TARGET=1,bo.STAKING_ESTIMATED_STAKED_PERCENT=.021,bo.yearlyStakePool=hl.STAKING_APY_TARGET*hl.STAKING_ESTIMATED_STAKED_PERCENT*ZY.TOTAL_SUPPLY;var yRe={__proto__:null,AntelopePushTransactionError:KY},BN=function(){function r(t,n){this.keyManager=void 0,this.storage=void 0,this.keyManager=t,this.storage=tY(gN+"user.",n)}var e=r.prototype;return e.getStatus=function(){try{return Promise.resolve(this.storage.status)}catch(t){return Promise.reject(t)}},e.getAccountName=function(){try{return Promise.resolve(this.storage.accountName)}catch(t){return Promise.reject(t)}},e.getUsername=function(){try{return Promise.resolve(this.storage.username).then(function(t){if(t){if(t instanceof $i)return t;if(typeof t=="string")return new $i(t);Ze("Username not in expected format",Ce.InvalidData)}else Ze("Username not set",Ce.InvalidData)})}catch(t){return Promise.reject(t)}},e.getDid=function(t){try{return Promise.resolve(this.storage.did).then(function(n){return n+(t?"#"+t:"")})}catch(n){return Promise.reject(n)}},e.getIssuer=function(){try{var t=this;return Promise.resolve(t.getDid()).then(function(n){return{did:n+"#local",signer:NN(t.keyManager,rt.LOCAL).sign,alg:"ES256K-R"}})}catch(n){return Promise.reject(n)}},e.getSigner=function(t){try{return Promise.resolve(ay(this.keyManager,t))}catch(n){return Promise.reject(n)}},r}();const DF="ES256K",aPe=/^[A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*$/,OT="https://www.w3.org/2018/credentials/v1",kT="VerifiableCredential",oPe="JwtProof2020",JY=["evidence","termsOfUse","refreshService","credentialSchema","credentialStatus"];function za(r){return Array.isArray(r)?r:[r]}function g2(r){return Array.isArray(r)?r.map(e=>g2(e)):r instanceof Date?new Date(r.getTime()):r&&typeof r=="object"?Object.getOwnPropertyNames(r).reduce((e,t)=>(Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t)),e[t]=g2(r[t]),e),Object.create(Object.getPrototypeOf(r))):r}function mw(r){return r!=null}function YY(r,e=!0){var a,o,c,u,f,l,d,h;let t=g2(r);var n;typeof(n=r)=="object"&&n.sub&&n.iss&&n.claim&&n.iat&&(t=function(y){const{iat:p,nbf:g,claim:m,vc:v,...b}=y,_={...b,nbf:g||p,vc:{"@context":[OT],type:[kT],credentialSubject:m}};return v&&(y.issVc=v),_}(r)),t.credentialSubject={...r.credentialSubject,...(a=r.vc)==null?void 0:a.credentialSubject},r.sub&&!((o=r.credentialSubject)!=null&&o.id)&&t.credentialSubject&&(t.credentialSubject.id=r.sub,e&&delete t.sub),e&&((c=t.vc)==null||delete c.credentialSubject),r.issuer!==void 0&&typeof r.issuer!="object"||(t.issuer=function(y){if(typeof y!="object"||y===null)return y;const p={...y};return Object.keys(p).forEach(g=>p[g]===void 0&&delete p[g]),p}({id:r.iss,...r.issuer}),e&&!((u=r.issuer)!=null&&u.id)&&delete t.iss),!r.id&&r.jti&&(t.id=t.id||t.jti,e&&delete t.jti);const i=[...za(t.type),...za((f=t.vc)==null?void 0:f.type)].filter(mw);t.type=[...new Set(i)],e&&((l=t.vc)==null||delete l.type);for(const y of JY)r.vc&&r.vc[y]&&(t[y]||(t[y]=r.vc[y]),e&&delete t.vc[y]);const s=[...za(r.context),...za(r["@context"]),...za((d=r.vc)==null?void 0:d["@context"])].filter(mw);return t["@context"]=[...new Set(s)],e&&(delete t.context,(h=t.vc)==null||delete h["@context"]),r.issuanceDate||!r.iat&&!r.nbf||(t.issuanceDate=new Date(1e3*(r.nbf||r.iat)).toISOString(),e&&(r.nbf?delete t.nbf:delete t.iat)),!r.expirationDate&&r.exp&&(t.expirationDate=new Date(1e3*r.exp).toISOString(),e&&delete t.exp),e&&t.vc&&Object.keys(t.vc).length===0&&delete t.vc,t}function BF(r,e=!0){let t;try{t=Y5(r)}catch{throw new TypeError("unknown credential format")}return{...YY(t.payload,e),proof:{type:oPe,jwt:r}}}function XY(r,e=!0){var t;if(typeof r=="string"){if(aPe.test(r))return BF(r,e);{let n;try{n=JSON.parse(r)}catch{throw new TypeError("unknown credential format")}return XY(n,e)}}return(t=r.proof)!=null&&t.jwt?g2({...BF(r.proof.jwt,e),proof:r.proof}):{proof:{},...YY(r,e)}}function cPe(r,e=!0){var a,o,c,u,f;if(Array.isArray(r.credentialSubject))throw Error("credentialSubject of type array not supported");const t=g2({vc:{...r.vc},...r});t.vc=t.vc;const n={...r.credentialSubject,...(a=r.vc)==null?void 0:a.credentialSubject};r.sub||(t.sub=(o=r.credentialSubject)==null?void 0:o.id,e&&delete n.id);const i=[...za(r.context),...za(r["@context"]),...za((c=r.vc)==null?void 0:c["@context"])].filter(mw);t.vc["@context"]=[...new Set(i)],e&&(delete t.context,delete t["@context"]);const s=[...za(r.type),...za((u=r.vc)==null?void 0:u.type)].filter(mw);if(t.vc.type=[...new Set(s)],e&&delete t.type,r.id&&Object.getOwnPropertyNames(r).indexOf("jti")===-1&&(t.jti=r.id,e&&delete t.id),r.issuanceDate&&Object.getOwnPropertyNames(r).indexOf("nbf")===-1){const l=Date.parse(r.issuanceDate);isNaN(l)||(t.nbf=Math.floor(l/1e3),e&&delete t.issuanceDate)}if(r.expirationDate&&Object.getOwnPropertyNames(r).indexOf("exp")===-1){const l=Date.parse(r.expirationDate);isNaN(l)||(t.exp=Math.floor(l/1e3),e&&delete t.expirationDate)}r.issuer&&Object.getOwnPropertyNames(r).indexOf("iss")===-1&&(typeof r.issuer=="object"?(t.iss=(f=r.issuer)==null?void 0:f.id,e&&(delete t.issuer.id,Object.keys(t.issuer).length===0&&delete t.issuer)):typeof r.issuer=="string"&&(t.iss=r.iss||""+r.issuer,e&&delete t.issuer)),t.vc.credentialSubject=n,e&&delete t.credentialSubject;for(const l of JY)r[l]&&(t.vc[l]||(t.vc[l]=r[l]),e&&delete t[l]);return t}const v2="schema_error";function x2(r){if(typeof r=="number"){if(!(Number.isInteger(r)&&r<1e11))throw new TypeError(`${v2}: "${r}" is not a unix timestamp in seconds`)}else if(typeof r=="string")x2(Math.floor(new Date(r).valueOf()/1e3));else if(!(e=r)||isNaN(e)||Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(`${v2}: "${r}" is not a valid time`);var e}function eX(r){const e=za(r);if(e.length<1||e.indexOf(OT)===-1)throw new TypeError(`${v2}: @context is missing default context "${OT}"`)}function tX(r){const e=za(r);if(e.length<1||e.indexOf(kT)===-1)throw new TypeError(`${v2}: type is missing default "${kT}"`)}function rX(r){if(Object.keys(r).length===0)throw new TypeError(`${v2}: credentialSubject must not be empty`)}const uPe=function(r,e,t={}){var n,i;try{const s=((n=t==null?void 0:t.policies)==null?void 0:n.issuanceDate)!==!1&&void 0,a=((i=t==null?void 0:t.policies)==null?void 0:i.expirationDate)!==!1&&void 0;return t={...t,policies:{...t==null?void 0:t.policies,nbf:s,exp:a,iat:s}},Promise.resolve(NT(r,{resolver:e,...t})).then(function(o){var u;return o.verifiableCredential=XY(o.jwt,t==null?void 0:t.removeOriginalFields),((u=t==null?void 0:t.policies)==null?void 0:u.format)!==!1&&(eX((c=o.verifiableCredential)["@context"]),tX(c.type),rX(c.credentialSubject),c.issuanceDate&&x2(c.issuanceDate),c.expirationDate&&x2(c.expirationDate)),o;var c})}catch(s){return Promise.reject(s)}};var CA,u0,nX=function(r,e){try{var t=function(){return"did:antelope:"+CA+":"+r+(e?"#"+e:"")},n=function(){if(!CA)return Promise.resolve(kN()).then(function(i){CA=i})}();return Promise.resolve(n&&n.then?n.then(t):t())}catch(i){return Promise.reject(i)}},iX=function(r,e){e===void 0&&(e=!0);try{return Promise.resolve(function(){if(e)return Promise.resolve(kN()).then(function(t){var n=$N(r).chain;return n!==t.toString()&&Ze("Invalid chain ID expected "+t.toString()+" found "+n,Ce.InvalidData),n})}())}catch(t){return Promise.reject(t)}},sX=function(r,e){var t=(e===void 0?{}:e).verifyChainId,n=t===void 0||t;try{var i=$N(r),s=i.account,a=i.fragment;return s!=="ops.tmy"&&Ze("DID must be from ops.tmy account, got: "+s,Ce.InvalidData),a!=="active"&&Ze("DID must use #active fragment, got: #"+a,Ce.InvalidData),Promise.resolve(iX(r,n)).then(function(){})}catch(o){return Promise.reject(o)}};function R9(r){var e=$N(r);return qe.from(e.account)}function $N(r){var e=N9(r);e.method!=="antelope"&&Ze("Invalid DID method: "+e.method,Ce.InvalidData);var t=e.id.split(":");return cs({},e,{chain:t.slice(0,t.length-1).join(":"),account:t[t.length-1]})}function N9(r){var e=IN(r);if(!e)throw new Error("Invalid DID: "+r);return e}(function(r){r.PENDING="PENDING",r.CREATING="CREATING",r.READY="READY",r.DEACTIVATED="DEACTIVATED"})(u0||(u0={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid AppStatusEnum");return n}}(u0||(u0={}));var fPe=function(r,e,t){t===void 0&&(t=!0);try{return Promise.resolve(function(){if(t){var n=r==null?void 0:r.split("/vc/auth/")[0];return n||Ze("Invalid origin",Ce.InvalidData),Promise.resolve(LN.getApp(n)).then(function(i){return N9(e).fragment!==i.accountName.toString()&&Ze("Invalid app",Ce.InvalidData),{origin:n,app:i}})}}())}catch(n){return Promise.reject(n)}},LN=function(){function r(e){if(this.accountName=void 0,this.appName=void 0,this.username=void 0,this.usernameHash=void 0,this.description=void 0,this.logoUrl=void 0,this.origin=void 0,this.version=void 0,this.status=void 0,this.accentColor=void 0,this.backgroundColor=void 0,this.accountName=e.accountName,this.appName=e.appName,this.username=e.username,this.description=e.description,this.logoUrl=e.logoUrl,this.origin=e.origin,this.version=e.version,this.status=e.status,this.accentColor=e.accentColor,this.backgroundColor=e.backgroundColor,e.usernameHash)this.usernameHash=e.usernameHash;else{if(!e.username)throw new Error("Either username or usernameHash must be provided");this.usernameHash=kt.from(e.username.usernameHash)}}return r.create=function(e){try{var t=$i.fromUsername(e.usernamePrefix,of.APP,fr().accountSuffix);return Promise.resolve(Us().newApp(e.appName,e.description,t.usernameHash,e.logoUrl,e.origin,e.backgroundColor,e.accentColor,e.publicKey,e.signer)).then(function(n){var i=n.processed.action_traces[0].inline_traces[0].act;return new r(cs({},e,{accountName:qe.from(i.data.name),username:t,version:i.data.version,status:u0.READY}))})}catch(n){return Promise.reject(n)}},r.getApp=function(e){try{return Promise.resolve(Us().getApp(e)).then(function(t){return new r({accountName:t.accountName,appName:t.appName,usernameHash:t.usernameHash,description:t.description,logoUrl:t.logoUrl,origin:t.origin,version:t.version,status:u0.READY,accentColor:t.accentColor,backgroundColor:t.backgroundColor})})}catch(t){return Promise.reject(t)}},r}();Mt("tonomy-sdk:vc");var Gm=function(){function r(t){this.decodedJwt=void 0,this.jwt=void 0,this.decodedJwt=Y5(t),this.jwt=t}var e=r.prototype;return e.getPayload=function(){return this.decodedJwt.payload},e.getVc=function(){return this.getPayload().vc},e.getCredentialSubject=function(){return this.getVc().credentialSubject},e.getIssuer=function(){return this.getPayload().iss},e.getSubject=function(){return this.getPayload().sub},e.getId=function(){return this.getPayload().jti},e.getAudience=function(){return this.getPayload().aud},e.getExpiration=function(){var t=this.getPayload().exp;return t?wA(t):void 0},e.getIssuedAt=function(){var t=this.getPayload().iat;return t?wA(t):void 0},e.getNotBefore=function(){var t=this.getPayload().nbf;return t?wA(t):void 0},e.verify=function(){try{var t=fr(),n=new AMe(cs({},f5e(),eW({antelopeChainUrl:t.blockchainUrl,fetch:qY()})));return Promise.resolve(uPe(this.jwt,n))}catch(i){return Promise.reject(i)}},r.sign=function(t,n,i,s,a){a===void 0&&(a={});try{var o=Array.isArray(n)?n:[n];o.includes("VerifiableCredential")||o.push("VerifiableCredential");var c={"@context":["https://www.w3.org/2018/credentials/v1"],id:t,type:o,issuer:{id:s.did},issuanceDate:new Date().toISOString(),credentialSubject:i};return a.subject&&(c.credentialSubject.id=a.subject),Promise.resolve(function(u,f,l={}){var d,h;try{const y={iat:void 0,...cPe(u,l.removeOriginalFields)};if(function(p){eX(p.vc["@context"]),tX(p.vc.type),rX(p.vc.credentialSubject),p.nbf&&x2(p.nbf),p.exp&&x2(p.exp)}(y),Array.isArray(f)){const p=f[0].did,g=[];for(const m of f){if(m.did!==p)throw new Error("All issuers must be the same did to comply with the Verifiable Conditions spec");g.push({issuer:m.did||y.iss||"",signer:m.signer,alg:m.alg||((d=l.header)==null?void 0:d.alg)||DF})}return Promise.resolve(function(m,{expiresIn:v,canonicalize:b},_){try{if(_.length===0)throw new Error("invalid_argument: must provide one or more issuers");let j=m,O="";const E=(C=_,N=function(S){const A=_[S],w={typ:"JWT",alg:A.alg};return S!==0&&(w.cty="JWT"),Promise.resolve(vF(j,{...A,canonicalize:b,expiresIn:v},w)).then(function(P){O=P,j={jwt:O}})},$=-1,function S(A){try{for(;++$<C.length;)if((A=N($))&&A.then){if(!o1(A))return void A.then(S,I||(I=ki.bind(null,x=new b2,2)));A=A.v}x?ki(x,1,A):x=A}catch(w){ki(x||(x=new b2),2,w)}}(),x);return Promise.resolve(E&&E.then?E.then(function(){return O}):O)}catch(j){return Promise.reject(j)}var C,N,x,I,$}(y,{...l},g))}return Promise.resolve(vF(y,{...l,issuer:f.did||y.iss||"",signer:f.signer},{...l.header,alg:f.alg||((h=l.header)==null?void 0:h.alg)||DF}))}catch(y){return Promise.reject(y)}}(c,s,{canonicalize:!0})).then(function(u){return new r(u)})}catch(u){return Promise.reject(u)}},e.toString=function(){return this.jwt},e.toJSON=function(){return this.toString()},r}(),nc=function(){function r(t){this.vc=void 0,this.decodedPayload=void 0,this.vc=typeof t=="string"?new Gm(t):t instanceof r?t.getVc():t,this.decodedPayload=this.getVc().getCredentialSubject().payload}r.sign=function(t,n,i){i===void 0&&(i={});try{var s=this.type;if(s==="VerifiableCredentialWithType"||s==="")throw new Error("class should be a derived class of VerifiableCredentialWithType to use the type property");var a=Object.assign({},{payload:t,type:s}),o="https://tonomy.foundation/vc/id/"+lp(10),c=["VerifiableCredential","TonomyVerifiableCredentialWithType"];return i.additionalTypes&&c.push.apply(c,i.additionalTypes),Promise.resolve(Gm.sign(o,c,a,n,i)).then(function(u){return new r(u)})}catch(u){return Promise.reject(u)}},r.getType=function(){return this.type};var e=r.prototype;return e.getVc=function(){return this.vc},e.getIssuer=function(){return this.getVc().getIssuer()},e.getPayload=function(){return this.decodedPayload},e.getType=function(){return this.getVc().getCredentialSubject().type},e.verify=function(){try{return Promise.resolve(this.getVc().verify()).then(function(t){return t.verified})}catch(t){return Promise.reject(t)}},e.toString=function(){return this.getVc().toString()},e.toJSON=function(){return this.toString()},r}();nc.type="VerifiableCredentialWithType";function aX(r){return g5e(JSON.stringify(r))}function oX(r){return JSON.parse(m5e(r))}var Lc,Yi,mRe=function(){try{var r=k9.fromUrl();return Promise.resolve(r.verify()).then(function(){return r.external.checkReferrerOrigin(),r})}catch(e){return Promise.reject(e)}};function $F(r,e){var t=new URL(r),n=new URL(e);return t.origin===n.origin}function lPe(r){var e=new URL(r,"http://dummybase"),t=e.pathname,n={};e.searchParams.forEach(function(s,a){n[a]=s});var i=e.hash?e.hash.substring(1):"";return{path:t,params:n,fragment:i}}function dPe(r,e,t,n){var i=new URL(e,r);return Object.entries(t).forEach(function(s){i.searchParams.append(s[0],s[1])}),n&&(i.hash=n),i.toString()}(function(r){r.PENDING="PENDING",r.APPROVED="APPROVED",r.DECLINED="DECLINED"})(Lc||(Lc={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid VeriffStatusEnum");return n}}(Lc||(Lc={})),function(r){r.KYC="KYC",r.FIRSTNAME="FIRSTNAME",r.LASTNAME="LASTNAME",r.EMAIL="EMAIL",r.PHONE="PHONE",r.ADDRESS="ADDRESS",r.BIRTHDATE="BIRTHDATE",r.NATIONALITY="NATIONALITY"}(Yi||(Yi={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid VerificationTypeEnum");return n}}(Yi||(Yi={}));var O9=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);O9.type="KYCVC";var UN=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);UN.type="FirstNameVC";var FN=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);FN.type="LastNameVC";var jN=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);jN.type="BirthDateVC";var qN=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);qN.type="AddressVC";var VN=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signData=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);function hPe(r){switch(r){case"approved":return Lc.APPROVED;case"declined":case"resubmission_requested":case"expired":case"abandoned":return Lc.DECLINED;default:throw new Error("Unknown decision: "+r)}}function DT(r,e){switch(e){case Yi.KYC:return new O9(r);case Yi.FIRSTNAME:return new UN(r);case Yi.LASTNAME:return new FN(r);case Yi.BIRTHDATE:return new jN(r);case Yi.ADDRESS:return new qN(r);case Yi.NATIONALITY:return new VN(r);default:throw new Error("type "+e+" not valid")}}VN.type="NationalityVC";var Yu=Mt("tonomy-sdk:util:WalletRequest");const LF=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Xi(r,e,t){if(!r.s){if(t instanceof R1){if(!t.s)return void(t.o=Xi.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(Xi.bind(null,r,e),Xi.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var R1=function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var s=1&i?e:t;if(s){try{Xi(n,1,s(this.v))}catch(a){Xi(n,2,a)}return n}return this}return this.o=function(a){try{var o=a.v;1&a.s?Xi(n,1,e?e(o):o):t?Xi(n,1,t(o)):Xi(n,2,o)}catch(c){Xi(n,2,c)}},n},r}();function UF(r){return r instanceof R1&&1&r.s}var zN=function(r){function e(t){var n;return(n=r.call(this,t)||this).decodedPayload.requests=n.decodedPayload.requests.map(function(i){return bw.isLoginRequest(i)&&(i.login.publicKey=ii.from(i.login.publicKey)),i}),n}return Rt(e,r),e.signRequest=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);zN.type="WalletRequest";var HN=function(r){function e(t){var n,i;return(i=r.call(this,t)||this).decodedPayload.responses=(n=i.decodedPayload.responses)==null?void 0:n.map(function(s){if(gw.isDataSharingResponse(s)){var a=s.data;!a.username||a.username instanceof $i||(a.username=$i.fromFullUsername(a.username)),a.kyc&&(a.kyc=new O9(a.kyc))}return s}),i}return Rt(e,r),e.signResponse=function(t,n,i){i===void 0&&(i={});try{var s=this;return Promise.resolve(r.sign.call(s,t,n,i)).then(function(a){return new s(a)})}catch(a){return Promise.reject(a)}},e}(nc);HN.type="WalletResponse";var bw=function(){function r(t){this.vc=void 0,this.app=void 0,this.vc=new zN(t)}r.isLoginRequest=function(t){return"login"in t},r.isDataSharingRequest=function(t){return"data"in t};var e=r.prototype;return e.getRequests=function(){return this.vc.getPayload().requests},e.getLoginRequest=function(){var t=this.getRequests().find(function(n){return r.isLoginRequest(n)});if(!t)throw new Error("No login request found");return t},e.getDataSharingRequest=function(){return this.getRequests().find(function(t){return r.isDataSharingRequest(t)})},e.getOrigin=function(){return this.getLoginRequest().login.origin},e.verify=function(){try{return Promise.resolve(this.vc.verify())}catch(t){return Promise.reject(t)}},e.getDid=function(){return this.vc.getIssuer()},e.checkReferrerOrigin=function(){var t=document.referrer;if(!t)throw new Error("No referrer found");if(!$F(t,this.getOrigin()))throw new Error("Referrer origin "+t+" does not match login request origin "+this.getOrigin())},e.getApp=function(){try{var t=this;return t.app?Promise.resolve(t.app):Promise.resolve(LN.getApp(t.getOrigin())).then(function(n){return t.app=n,t.app})}catch(n){return Promise.reject(n)}},e.accept=function(t,n){n===void 0&&(n=!1);try{var i=this;return Promise.resolve(i.getApp()).then(function(s){function a(u){return Promise.resolve(t.getIssuer()).then(function(f){return Promise.resolve(HN.signResponse({success:!0,responses:o},f)).then(function(l){return new gw(l)})})}Yu("WalletRequest/accept: "+s.origin);var o=[],c=function(u,f){if(typeof u[LF]=="function"){var l,d,h,y=function(b){try{for(;!(l=p.next()).done;)if((b=f(l.value))&&b.then){if(!UF(b))return void b.then(y,h||(h=Xi.bind(null,d=new R1,2)));b=b.v}d?Xi(d,1,b):d=b}catch(_){Xi(d||(d=new R1),2,_)}},p=u[LF]();if(y(),p.return){var g=function(b){try{l.done||p.return()}catch{}return b};if(d&&d.then)return d.then(g,function(b){throw g(b)});g()}return d}if(!("length"in u))throw new TypeError("Object is not iterable");for(var m=[],v=0;v<u.length;v++)m.push(u[v]);return function(b,_){var C,N,x=-1;return function I($){try{for(;++x<b.length;)if(($=_(x))&&$.then){if(!UF($))return void $.then(I,N||(N=Xi.bind(null,C=new R1,2)));$=$.v}C?Xi(C,1,$):C=$}catch(j){Xi(C||(C=new R1),2,j)}}(),C}(m,function(b){return f(m[b])})}(i.getRequests(),function(u){return function(){if(r.isLoginRequest(u)){var f=function(y){o.push({login:{origin:s.origin,callbackPath:l.login.callbackPath}})},l=u,d=l.login.publicKey;if(Yu("WalletRequest/accept: "+s.origin+": login request",JSON.stringify(l,null,2)),n&&!$F(s.origin,fr().ssoWebsiteOrigin))throw new Error("Invalid origin for SSO login request. Received "+s.origin+", expected "+fr().ssoWebsiteOrigin);var h=function(y,p){try{var g=Promise.resolve(t.getAccountName()).then(function(m){return Promise.resolve(LT(m,{publicKey:d})).then(function(v){if(s.accountName.toString()!==v.toString())throw new Error("App "+s.accountName+" is not authorized for the key "+d.toString())})})}catch(m){return p(m)}return g&&g.then?g.then(void 0,p):g}(0,function(y){return function(){if(Pc(y,Ce.UserNotLoggedInWithThisApp))return Yu("WalletRequest/accept: "+s.origin+": calling loginWithApp()"),Promise.resolve(t.loginWithApp(s,d)).then(function(){});throw y}()});return h&&h.then?h.then(f):f()}return function(){if(r.isDataSharingRequest(u)){var y=function(){function v(){Yu("WalletRequest/accept: "+s.origin+": data sharing response",JSON.stringify(g,null,2)),o.push(g)}var b=function(){if(p.data.kyc)return Promise.resolve(t.fetchVerificationData(Yi.KYC)).then(function(_){g.data.kyc=_})}();return b&&b.then?b.then(v):v()},p=u;Yu("WalletRequest/accept: "+s.origin+": data sharing request",p);var g={data:{}},m=function(){if(p.data.username)return Promise.resolve(t.getUsername()).then(function(v){g.data.username=v})}();return m&&m.then?m.then(y):y()}throw new Error("Unknown request type")}()}()});return c&&c.then?c.then(a):a()})}catch(s){return Promise.reject(s)}},e.toJSON=function(){return this.toString()},e.toString=function(){return this.vc.toString()},r}(),k9=function(){function r(t,n){this.external=void 0,this.sso=void 0,this.external=t,n&&(this.sso=n)}r.fromString=function(t){var n,i=oX(t);Yu("DualWalletRequests/fromString: Decoded requests",i);var s=new bw(i.external);return i.sso&&(n=new bw(i.sso)),new this(s,n)},r.fromUrl=function(){var t=new URLSearchParams(window.location.search).get("payload");if(!t)throw new Error("payload parameter doesn't exist");return this.fromString(t)};var e=r.prototype;return e.verify=function(){try{var t=this;return Promise.resolve(t.external.verify()).then(function(n){function i(s){return n&&s}return t.sso?Promise.resolve(t.sso.verify()).then(i):i(!0)})}catch(n){return Promise.reject(n)}},e.accept=function(t){try{var n=this;return Yu("DualWalletRequests/accept: Accepting requests",typeof n.external,typeof n.sso),Promise.resolve(n.external.accept(t)).then(function(i){function s(){return vw.fromResponses(i,a)}var a,o=function(){if(n.sso)return Promise.resolve(n.sso.accept(t,!0)).then(function(c){a=c})}();return o&&o.then?o.then(s):s()})}catch(i){return Promise.reject(i)}},e.reject=function(t){try{var n=this;return Yu("DualWalletRequests/reject: Rejecting requests with error",t,typeof n.external,typeof n.sso),Promise.resolve(vw.fromError(t,n))}catch(i){return Promise.reject(i)}},e.toJSON=function(){return this.toString()},e.toString=function(){return aX(this.sso?{external:this.external,sso:this.sso}:{external:this.external})},r}(),gw=function(){function r(t){this.vc=void 0,this.vc=new HN(t)}var e=r.prototype;return e.getResponses=function(){return this.vc.getPayload().responses},r.isLoginResponse=function(t){return"login"in t},r.isDataSharingResponse=function(t){return"data"in t},e.getLoginResponse=function(){var t,n=(t=this.getResponses())==null?void 0:t.find(function(i){return r.isLoginResponse(i)});if(!n)throw new Error("No login response found");return n},e.getDataSharingResponse=function(){var t;return(t=this.getResponses())==null?void 0:t.find(function(n){return r.isDataSharingResponse(n)})},e.getAccountName=function(){return R9(this.vc.getIssuer())},e.toJSON=function(){return this.toString()},e.toString=function(){return this.vc.toString()},r}(),vw=function(){function r(t,n){var i=n.external,s=n.sso,a=n.error,o=n.requests;if(this.success=void 0,this.external=void 0,this.sso=void 0,this.error=void 0,this.requests=void 0,t){if(!i)throw new Error("External wallet response is required for a successful response");this.success=!0,this.external=i,s&&(this.sso=s)}else{if(!a)throw new Error("Error is required for an unsuccessful response");if(!o)throw new Error("Requests are required for an unsuccessful response");this.success=!1,this.error=a,this.requests=o}}r.fromResponses=function(t,n){return new this(!0,{external:t,sso:n})},r.fromError=function(t,n){return new this(!1,{error:t,requests:n})},r.fromString=function(t){var n=oX(t);if(Yu("DualWalletResponse/fromString: Decoded response",n),n.success)return this.fromResponses(new gw(n.external),n.sso?new gw(n.sso):void 0);var i=n.error,s=k9.fromString(n.requests);return this.fromError(i,s)},r.fromUrl=function(){var t=new URLSearchParams(window.location.search).get("payload");if(!t)throw new Error("payload parameter doesn't exist");return this.fromString(t)};var e=r.prototype;return e.isSuccess=function(){return this.success},e.verify=function(){try{var t=function(i){function s(a){return i&&a}return n.sso?Promise.resolve(n.sso.vc.verify()).then(s):s(!0)},n=this;if(!n.success)throw new Error("Cannot verify a failed response");return Promise.resolve(n.external?Promise.resolve(n.external.vc.verify()).then(t):t(!0))}catch(i){return Promise.reject(i)}},e.toJSON=function(){return this.toString()},e.toString=function(){return aX({success:this.success,external:this.external,sso:this.sso,error:this.error,requests:this.requests})},e.getRedirectUrl=function(t){var n,i;t===void 0&&(t=!0);var s=this.toString();if(this.isSuccess()){var a=t?this.external:this.sso;if(!a)throw new Error("response not found in getRedirectUrl");n=a.getLoginResponse().login.origin,i=a.getLoginResponse().login.callbackPath}else{if(!this.requests)throw new Error("requests not found in getRedirectUrl");var o=t?this.requests.external:this.requests.sso;if(!o)throw new Error("request not found in getRedirectUrl");n=o.getLoginRequest().login.origin,i=o.getLoginRequest().login.callbackPath}var c=lPe(i),u=c.fragment;return dPe(n,c.path,cs({},c.params,{payload:s}),u)},r}(),pPe=Mt("tonomy-sdk:services:communication:message"),gu=function(r){function e(n){return r.call(this,n)||this}Rt(e,r),e.signMessageWithRecipient=function(n,i,s,a){a===void 0&&(a={});try{if(this.type==="Message")throw new Error("class should be a derived class of Message to use the type property");var o=cs({subject:s,additionalTypes:["TonomyMessage"]},a);return Promise.resolve(r.sign.call(this,n,i,o)).then(function(c){return new e(c.getVc())})}catch(c){return Promise.reject(c)}};var t=e.prototype;return t.getRecipient=function(){return this.getVc().getSubject()},t.getSender=function(){return r.prototype.getIssuer.call(this)},e}(nc);gu.type="Message";var BT=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signMessageWithoutRecipient=function(t,n,i){try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,"",i)).then(function(s){return new e(s)})}catch(s){return Promise.reject(s)}},e}(gu);BT.type="AuthenticationMessage";var yPe=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e}(gu);yPe.type="IdentifyMessage";var mPe=function(r){function e(t){var n;return(n=r.call(this,t)||this).decodedPayload=k9.fromString(n.decodedPayload),n}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e.prototype.verify=function(){try{var t=function(a){return r.prototype.verify.call(n)},n=this,i=n.getPayload().sso,s=function(){if(i)return Promise.resolve(i.verify()).then(function(){if(i.getDid()!==n.getIssuer())throw new Error("SSO request issuer does not match message issuer")})}();return Promise.resolve(s&&s.then?s.then(t):t())}catch(a){return Promise.reject(a)}},e}(gu);mPe.type="LoginRequestsMessage";var WN=function(r){function e(t){var n,i,s;return(s=r.call(this,t)||this).decodedPayload=vw.fromString(s.decodedPayload),pPe("LoginRequestResponseMessage payload",JSON.stringify({success:s.decodedPayload.success,external:(n=s.decodedPayload.external)==null?void 0:n.vc.getPayload(),sso:(i=s.decodedPayload.sso)==null?void 0:i.vc.getPayload(),error:s.decodedPayload.error,requests:s.decodedPayload.requests},null,2)),s}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e}(gu);WN.type="LoginRequestResponseMessage";var xw=function(r){function e(t){var n,i=(n=r.call(this,t)||this).getVc().getPayload().vc.credentialSubject.payload;return n.decodedPayload={contract:qe.from(i.contract),action:qe.from(i.action)},n}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e}(gu);xw.type="LinkAuthRequestMessage";var w2=function(r){function e(){return r.apply(this,arguments)||this}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e}(gu);w2.type="LinkAuthRequestResponseMessage";var $T=function(r){function e(t){var n;return(n=r.call(this,t)||this).type=void 0,n.payload=void 0,n.decodedPayload=cs({},n.decodedPayload,{kyc:new O9(n.decodedPayload.kyc)}),n.decodedPayload.firstName&&(n.decodedPayload.firstName=new UN(n.decodedPayload.firstName)),n.decodedPayload.lastName&&(n.decodedPayload.lastName=new FN(n.decodedPayload.lastName)),n.decodedPayload.birthDate&&(n.decodedPayload.birthDate=new jN(n.decodedPayload.birthDate)),n.decodedPayload.address&&(n.decodedPayload.address=new qN(n.decodedPayload.address)),n.decodedPayload.nationality&&(n.decodedPayload.nationality=new VN(n.decodedPayload.nationality)),n}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e}(gu);$T.type="VeriffVerificationMessage";var cX=function(r){function e(t){var n;return(n=r.call(this,t)||this).decodedPayload=cs({},n.decodedPayload,{amount:new vp(n.decodedPayload.amount)}),n}return Rt(e,r),e.signMessage=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(r.signMessageWithRecipient.call(this,t,n,i,s)).then(function(a){return new e(a)})}catch(a){return Promise.reject(a)}},e}(gu);cX.type="SwapTokenMessage";var LT=function(r,e){try{return Promise.resolve(Vd(r)).then(function(t){if(t||Ze("couldn't fetch account",Ce.AccountNotFound),e.publicKey){var n=e.publicKey,i=t.permissions.find(function(s){return s.required_auth.keys[0].key.toString()===n.toString()});return i||Ze("No permission found with key "+n,Ce.UserNotLoggedInWithThisApp),i.perm_name}return e.keyManager||Ze("keyManager missing",Ce.MissingParams),Promise.resolve(e.keyManager.getKey({level:rt.BROWSER_LOCAL_STORAGE})).then(function(s){return Promise.resolve(LN.getApp(window.location.origin)).then(function(a){try{var o=t.getPermission(a.accountName).required_auth.keys[0].key;s.toString()!==o.toString()&&Ze("key not authorized",Ce.KeyNotFound)}catch(c){if(!c.message.startsWith("Unknown permission "))throw c;Ze("No permission found for app "+a.accountName,Ce.UserNotLoggedInWithThisApp)}return a.accountName})})})}catch(t){return Promise.reject(t)}},bRe=function(r,e,t,n){try{return Promise.resolve(r.reject(t)).then(function(i){return e==="redirect"?i.getRedirectUrl():(n.user||Ze("Missing user",Ce.MissingParams),r.sso||Ze("SSO request not found",Ce.MissingParams),Promise.resolve(n.user.getIssuer()).then(function(s){var a,o=(a=r.sso)==null?void 0:a.getDid();return Promise.resolve(WN.signMessage(i,s,o)).then(function(c){return Promise.resolve(n.user.sendMessage(c)).then(function(){})})}))})}catch(i){return Promise.reject(i)}},Vd=function(r){try{var e,t=function(){return Promise.resolve(I9(e))},n=function(){if(r instanceof $i)return Promise.resolve(Us().getPerson(r)).then(function(i){e=i.accountName});e=r}();return Promise.resolve(n&&n.then?n.then(t):t())}catch(i){return Promise.reject(i)}},Tc,uX=function(r){function e(){return r.apply(this,arguments)||this}Rt(e,r);var t=e.prototype;return t.savePassword=function(n,i){try{var s,a,o=function(){return c.storage.salt=a,Promise.resolve(c.storage.salt).then(function(){return Promise.resolve(c.keyManager.storeKey({level:rt.PASSWORD,privateKey:s,challenge:n})).then(function(){return Promise.resolve(c.keyManager.storeKey({level:rt.ACTIVE,privateKey:s})).then(function(){})})})},c=this,u=i.salt?(a=i.salt,Promise.resolve(i.keyFromPasswordFn(n,a)).then(function(f){s=f.privateKey})):Promise.resolve(i.keyFromPasswordFn(n)).then(function(f){s=f.privateKey,a=f.salt});return Promise.resolve(u&&u.then?u.then(o):o())}catch(f){return Promise.reject(f)}},t.checkPassword=function(n,i){try{var s=this;return Promise.resolve(s.getAccountName()).then(function(a){return Promise.resolve(Us().getPerson(a)).then(function(o){return Promise.resolve(s.savePassword(n,cs({},i,{salt:o.passwordSalt}))).then(function(){return Promise.resolve(s.keyManager.getKey({level:rt.PASSWORD})).then(function(c){return Promise.resolve(Vd(o.accountName)).then(function(u){var f=u.getPermission("owner").required_auth.keys[0].key;return c.toString()!==f.toString()&&Ze("Password is incorrect",Ce.PasswordInvalid),!0})})})})})}catch(a){return Promise.reject(a)}},t.savePIN=function(n){try{var i=w3().privateKey;return Promise.resolve(this.keyManager.storeKey({level:rt.PIN,privateKey:i,challenge:n})).then(function(){})}catch(s){return Promise.reject(s)}},t.checkPin=function(n){try{return Promise.resolve(this.keyManager.checkKey({level:rt.PIN,challenge:n})).then(function(i){return i||Ze("Pin is incorrect",Ce.PinInvalid),!0})}catch(i){return Promise.reject(i)}},t.saveFingerprint=function(){try{var n=w3().privateKey;return Promise.resolve(this.keyManager.storeKey({level:rt.BIOMETRIC,privateKey:n})).then(function(){})}catch(i){return Promise.reject(i)}},t.saveLocal=function(){try{var n=w3().privateKey;return Promise.resolve(this.keyManager.storeKey({level:rt.LOCAL,privateKey:n})).then(function(){})}catch(i){return Promise.reject(i)}},t.createClientAuthorization=function(n){try{var i=this,s=lp(8);return Promise.resolve(i.getDid()).then(function(a){var o=a+"/vc/auth/"+s;return Promise.resolve(i.getIssuer()).then(function(c){return Promise.resolve(Gm.sign(o,"ClientAuthorization",n,c)).then(function(u){return u.toString()})})})}catch(a){return Promise.reject(a)}},e}(BN),bPe=function(r){function e(){return r.apply(this,arguments)||this}Rt(e,r);var t=e.prototype;return t.getCaptchaToken=function(){try{return Promise.resolve(this.storage.captchaToken)}catch(n){return Promise.reject(n)}},t.saveCaptchaToken=function(n){try{return this.storage.captchaToken=n,Promise.resolve(this.storage.captchaToken).then(function(){})}catch(i){return Promise.reject(i)}},e}(BN),fX=function(r){try{var e=fr().accountsServiceUrl;return Promise.resolve(function(t,n){try{var i=Promise.resolve(sW(e+"/v1/accounts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).then(function(s){return Promise.resolve(s.json()).then(function(a){if(s.status!==201){if(s.status===400)return Ze("Communication Service error: "+a.message+", errors: "+a.errors,Ce.AccountServiceError);Ze("Communication Service error: "+a.message+", status: "+s.status,Ce.AccountServiceError)}return{transactionId:a.transactionId,accountName:qe.from(a.accountName)}})})}catch(s){return n(s)}return i&&i.then?i.then(void 0,n):i}(0,function(t){if(t instanceof Error&&t.message.includes("FetchError: request to http://localhost:5000/v1/accounts/create failed, reason: socket hang up"))return fX(r);throw t}))}catch(t){return Promise.reject(t)}};(function(r){r.CREATING_ACCOUNT="CREATING_ACCOUNT",r.LOGGING_IN="LOGGING_IN",r.READY="READY",r.DEACTIVATED="DEACTIVATED"})(Tc||(Tc={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid UserStatusEnum");return n}}(Tc||(Tc={}));var pl=Mt("tonomy-sdk:services:communication:communication"),FF=1e5,ww=function(){function r(t){if(t===void 0&&(t=!0),this.socketServer=void 0,this.subscribers=new Map,this.authMessage=void 0,this.loggedIn=!1,this.url=void 0,this.seenMessages=new Map,this.seemMessageTTL=3600,r.singleton&&t)return r.singleton;this.url=fr().communicationUrl,this.socketServer=h3(this.url,{transports:["websocket"],autoConnect:!1}),r.singleton=this}var e=r.prototype;return e.checkSeenMessage=function(t){var n;if(typeof process<"u"&&(n=process)!=null&&n.env&&!M_e.CI)return!1;var i=this.seenMessages.has(Km(t));return this.addSeenMessage(t),this.trimSeenMessages(),i},e.trimSeenMessages=function(){var t=this;this.seenMessages.forEach(function(n,i){n.getTime()+t.seemMessageTTL<Date.now()&&t.seenMessages.delete(i)})},e.addSeenMessage=function(t){this.seenMessages.set(Km(t),new Date)},e.isConnected=function(){return this.socketServer&&this.socketServer.connected},e.isLoggedIn=function(){return this.loggedIn&&this.authMessage!==void 0&&typeof this.authMessage=="object"},e.connect=function(){try{var t=this;return t.isConnected()?Promise.resolve():(t.socketServer.connect(),Promise.resolve(new Promise(function(n,i){t.socketServer.on("connect",function(){try{var s=function(){n(!0)},a=function(){if(t.isLoggedIn())return Promise.resolve(t.login(t.authMessage)).then(function(){})}();return Promise.resolve(a&&a.then?a.then(s):s())}catch(o){return Promise.reject(o)}}),setTimeout(function(){t.isConnected()||i(bN("Could not connect to Tonomy Communication server",Ce.CommunicationNotConnected))},FF)})).then(function(){}))}catch(n){return Promise.reject(n)}},e.emitMessage=function(t,n){try{var i=this;return pl("emitMessage",t,n.getType(),n.getSender(),n.getRecipient(),n.getPayload()),Promise.resolve(new Promise(function(s,a){i.socketServer.timeout(FF).emit(t,{message:n.toString()},function(o,c){if(pl("emitMessage response",JSON.stringify(o,null,2),JSON.stringify(c,null,2)),c!=null&&c.error){var u;if((c==null||(u=c.exception)==null?void 0:u.name)==="HttpException"){var f=new IU(c);return void a(f)}a(c)}else o?a(o):s(c)})})).then(function(s){if(s.status!==200)throw new IU({exception:{response:s.error,name:"HttpException",status:s.status,message:s.error},name:"CommunicationError",message:s.error});return s.details})}catch(s){return Promise.reject(s)}},e.login=function(t){try{var n=this;return Promise.resolve(n.connect()).then(function(){return Promise.resolve(n.emitMessage("v1/login",t)).then(function(i){return i&&(n.loggedIn=!0,n.authMessage=t),i})})}catch(i){return Promise.reject(i)}},e.sendMessage=function(t){try{return this.isLoggedIn()||Ze("You need to login before sending a messages",Ce.CommunicationNotLoggedIn),Promise.resolve(this.emitMessage("v1/message/relay/send",t))}catch(n){return Promise.reject(n)}},e.sendSwapMessage=function(t){try{return this.isLoggedIn()||Ze("You need to login before sending a messages",Ce.CommunicationNotLoggedIn),Promise.resolve(this.emitMessage("v2/swap/token/tono",t))}catch(n){return Promise.reject(n)}},e.subscribeMessage=function(t,n){var i=this;r.identifier++;var s=function(a){var o=new gu(a);return pl("receiveMessage",o.getType(),o.getSender(),o.getRecipient()),o.getType()===n&&t(o),i};return this.socketServer.on("v1/message/relay/receive",s),this.subscribers.set(r.identifier,s),r.identifier},e.unsubscribeMessage=function(t){var n=this.subscribers.get(t);n&&(this.socketServer.off("v1/message/relay/receive",n),this.subscribers.delete(t))},e.disconnect=function(){this.loggedIn=!1,delete this.authMessage,this.isConnected()&&this.socketServer.disconnect()},e.subscribeVeriffVerification=function(t){var n=this;r.identifier++,pl("subscribeVeriffVerification() called");var i=function(s){try{pl("message",s);var a=new $T(s);if(n.checkSeenMessage(a.toString()))return pl("receiveVeriffVerification duplicate",a.getType(),a.getSender(),a.getRecipient()),Promise.resolve();pl("receiveVeriffVerification",a.getType(),a.getSender(),a.getRecipient());var o=function(){if(a.getType()===$T.getType())return Promise.resolve(t(a)).then(function(){})}();return Promise.resolve(o&&o.then?o.then(function(){return n}):n)}catch(c){return Promise.reject(c)}};return this.socketServer.on("v1/verification/veriff/receive",i),this.subscribers.set(r.identifier,i),r.identifier},e.unsubscribeVeriffVerification=function(t){var n=this.subscribers.get(t);n&&(this.socketServer.off("v1/verification/veriff/receive",n),this.subscribers.delete(t))},e.subscribeSwapBaseToTonomy=function(t){r.identifier++;var n=function(i){try{return typeof i!="string"&&Ze("Invalid swap data received:",i),pl("Received swap from base to tonomy:",i),Promise.resolve(t(i)).then(function(){})}catch(s){return Promise.reject(s)}};return this.socketServer.on("v1/swap/token/confirm",n),this.subscribers.set(r.identifier,n),r.identifier},e.unsubscribeSwapBaseToTonomy=function(t){var n=this.subscribers.get(t);n&&(this.socketServer.off("v1/swap/token/confirm",n),this.subscribers.delete(t))},r}();ww.singleton=void 0,ww.identifier=0;var zd,Hd,lX=function(r){function e(n,i){var s;return(s=r.call(this,n,i)||this).communication=void 0,s.communication=new ww(!1),s}Rt(e,r);var t=e.prototype;return t.loginCommunication=function(n){try{return Promise.resolve(this.communication.login(n))}catch(i){return Promise.reject(i)}},t.unsubscribeMessage=function(n){this.communication.unsubscribeMessage(n)},t.subscribeMessage=function(n,i){return this.communication.subscribeMessage(n,i)},t.subscribeVeriffVerification=function(n){return this.communication.subscribeVeriffVerification(n)},t.unsubscribeVeriffVerification=function(n){this.communication.unsubscribeVeriffVerification(n)},t.subscribeSwapBaseToTonomy=function(n){return this.communication.subscribeSwapBaseToTonomy(n)},t.sendMessage=function(n){try{return Promise.resolve(this.communication.sendMessage(n))}catch(i){return Promise.reject(i)}},t.disconnectCommunication=function(){this.communication.disconnect()},e}(uX),gPe=function(){function r(t){this.repository=void 0,this.repository=t}var e=r.prototype;return e.create=function(t,n,i,s){try{return Promise.resolve(this.repository.create(t,n,i,s.toString())).then(function(){return s})}catch(a){return Promise.reject(a)}},e.findLatestApproved=function(t){try{return Promise.resolve(this.findLatestWithTypeAndStatus(t,Lc.APPROVED))}catch(n){return Promise.reject(n)}},e.findLatestWithTypeAndStatus=function(t,n){try{return Promise.resolve(this.repository.findLatestWithStatus(t,n)).then(function(i){return i?DT(i.vc,t):null})}catch(i){return Promise.reject(i)}},e.updateRecord=function(t,n,i,s){try{var a=this;return Promise.resolve(a.repository.findByIdAndType(t,n)).then(function(o){if(o)return o.vc=s.toString(),o.status=i,o.reuseCount+=1,Promise.resolve(a.repository.update(o)).then(function(){return DT(o.vc,o.type)});throw new Error("Record not found for update")})}catch(o){return Promise.reject(o)}},e.deleteAll=function(){try{return Promise.resolve(this.repository.deleteAll()).then(function(){})}catch(t){return Promise.reject(t)}},e.emplaceByVeriffIdAndType=function(t,n,i,s){try{var a=this;return Promise.resolve(a.repository.findByIdAndType(t,n)).then(function(o){return o?a.updateRecord(t,n,i,s):a.create(t,n,i,s)})}catch(o){return Promise.reject(o)}},e.countReuse=function(t){try{return Promise.resolve(this.repository.findCountByType(t))}catch(n){return Promise.reject(n)}},e.updateReuseableCount=function(t){try{var n=this;return Promise.resolve(n.repository.findByType(t)).then(function(i){var s=function(){if(i)return i.reuseCount+=1,Promise.resolve(n.repository.update(i)).then(function(){})}();if(s&&s.then)return s.then(function(){})})}catch(i){return Promise.reject(i)}},r}();function go(r,e,t,n){var i,s=arguments.length,a=s<3?e:n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,n);else for(var o=r.length-1;o>=0;o--)(i=r[o])&&(a=(s<3?i(a):s>3?i(e,t,a):i(e,t))||a);return s>3&&a&&Object.defineProperty(e,t,a),a}function fc(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}typeof SuppressedError=="function"&&SuppressedError,function(r){r.VERIFF="VERIFF"}(zd||(zd={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid ProviderEnum");return n}}(zd||(zd={})),function(r){r.VERIFFv1="VERIFFv1"}(Hd||(Hd={})),function(r){r.indexFor=function(e){return Object.keys(r).indexOf(e)},r.from=function(e){var t;t=typeof e!="number"?r.indexFor(e.toUpperCase()):e;var n=Object.values(r)[t];if(n===void 0)throw new Error("Invalid VCTypeEnum");return n}}(Hd||(Hd={}));var Ks=function(){this.sessionId=void 0,this.vc=void 0,this.status=void 0,this.type=void 0,this.provider=void 0,this.vcType=void 0,this.version=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.reuseCount=void 0};go([jxe({type:"varchar"}),JE(),fc("design:type",String)],Ks.prototype,"sessionId",void 0),go([Au({type:"varchar"}),fc("design:type",String)],Ks.prototype,"vc",void 0),go([Au({type:"varchar",enum:Lc,default:Lc.PENDING}),fc("design:type",String)],Ks.prototype,"status",void 0),go([Au({type:"varchar",enum:Yi,default:Yi.KYC}),JE(),fc("design:type",String)],Ks.prototype,"type",void 0),go([Au({type:"varchar",enum:zd,default:zd.VERIFF}),fc("design:type",String)],Ks.prototype,"provider",void 0),go([Au({type:"varchar",enum:Hd,default:Hd.VERIFFv1}),fc("design:type",String)],Ks.prototype,"vcType",void 0),go([Au({type:"int"}),fc("design:type",Number)],Ks.prototype,"version",void 0),go([Au({type:"datetime"}),fc("design:type",Date)],Ks.prototype,"createdAt",void 0),go([Au({type:"datetime"}),JE(),fc("design:type",Date)],Ks.prototype,"updatedAt",void 0),go([Au({type:"int"}),fc("design:type",Number)],Ks.prototype,"reuseCount",void 0),Ks=go([qxe("IdentityVerificationStorage")],Ks);var vPe=function(){function r(t){this.ormRepository=void 0,this.ormRepository=t.getRepository(Ks)}var e=r.prototype;return e.create=function(t,n,i,s){try{var a=new Date,o=this.ormRepository.create({sessionId:t,vc:s,status:i,type:n,provider:zd.VERIFF,vcType:Hd.VERIFFv1,version:1,reuseCount:1,createdAt:a,updatedAt:a});return Promise.resolve(this.ormRepository.save(o))}catch(c){return Promise.reject(c)}},e.findLatestWithStatus=function(t,n){try{return Promise.resolve(this.ormRepository.findOne({where:{status:n,type:t},order:{createdAt:"DESC"}}))}catch(i){return Promise.reject(i)}},e.deleteAll=function(){try{return Promise.resolve(this.ormRepository.delete({})).then(function(){})}catch(t){return Promise.reject(t)}},e.update=function(t){try{var n=new Date;return t.updatedAt=n,Promise.resolve(this.ormRepository.save(t))}catch(i){return Promise.reject(i)}},e.findByIdAndType=function(t,n){try{return Promise.resolve(this.ormRepository.findOne({where:{sessionId:t,type:n}}))}catch(i){return Promise.reject(i)}},e.findLatestWithTypeAndStatus=function(t,n){try{return Promise.resolve(this.ormRepository.findOne({where:{type:t,status:n},order:{updatedAt:"DESC"}}))}catch(i){return Promise.reject(i)}},e.findCountByType=function(t){try{return Promise.resolve(this.ormRepository.sum("reuseCount",t?{type:t}:{})).then(function(n){return n||0})}catch(n){return Promise.reject(n)}},e.findByType=function(t){try{return Promise.resolve(this.ormRepository.findOne({where:{type:t}}))}catch(n){return Promise.reject(n)}},r}(),jF=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function es(r,e,t){if(!r.s){if(t instanceof N1){if(!t.s)return void(t.o=es.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(es.bind(null,r,e),es.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var N1=function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var s=1&i?e:t;if(s){try{es(n,1,s(this.v))}catch(a){es(n,2,a)}return n}return this}return this.o=function(a){try{var o=a.v;1&a.s?es(n,1,e?e(o):o):t?es(n,1,t(o)):es(n,2,o)}catch(c){es(n,2,c)}},n},r}();function qF(r){return r instanceof N1&&1&r.s}var Pu=Mt("tonomy-sdk:controllers:UserDataVault"),UT=function(r){function e(n,i,s){var a;(a=r.call(this,n,i)||this).idVerificationManager=void 0,a.dataSource=void 0,a.handleVerificationUpdate=function(c){try{return Pu("handleVerificationUpdate()",c.getIssuer(),c.getPayload()),Promise.resolve(c.verify()).then(function(){var u=c.getIssuer();return Promise.resolve(sX(u)).then(function(){var f=c.getPayload(),l=f.kyc.getPayload(),d=hPe(l.data.verification.decision);Pu("handleVerificationUpdate() kycPayload",u,l,f);var h=function(y,p){if(typeof y[jF]=="function"){var g,m,v,b=y[jF]();if(function x(I){try{for(;!(g=b.next()).done;)if((I=p(g.value))&&I.then){if(!qF(I))return void I.then(x,v||(v=es.bind(null,m=new N1,2)));I=I.v}m?es(m,1,I):m=I}catch($){es(m||(m=new N1),2,$)}}(),b.return){var _=function(x){try{g.done||b.return()}catch{}return x};if(m&&m.then)return m.then(_,function(x){throw _(x)});_()}return m}if(!("length"in y))throw new TypeError("Object is not iterable");for(var C=[],N=0;N<y.length;N++)C.push(y[N]);return function(x,I){var $,j,O=-1;return function E(S){try{for(;++O<x.length;)if((S=I(O))&&S.then){if(!qF(S))return void S.then(E,j||(j=es.bind(null,$=new N1,2)));S=S.v}$?es($,1,S):$=S}catch(A){es($||($=new N1),2,A)}}(),$}(C,function(x){return p(C[x])})}(Object.entries(f),function(y){var p=y[0],g=y[1],m=Yi.from(p),v=DT(g.toString(),m);return Promise.resolve(a.idVerificationManager.emplaceByVeriffIdAndType(l.sessionId+p,m,d,v)).then(function(){Pu("handleVerificationUpdate() successfully stored "+p+" VC in storage")})});if(h&&h.then)return h.then(function(){})})})}catch(u){return Promise.reject(u)}},a.dataSource=s;var o=new vPe(s);return a.idVerificationManager=new gPe(o),a}Rt(e,r);var t=e.prototype;return t.checkTableExists=function(n){try{var i=this.dataSource.createQueryRunner();return Promise.resolve(function(s,a){try{var o=Promise.resolve(i.query("SELECT name FROM sqlite_master WHERE type='table' AND name=?",[n])).then(function(c){return Pu("Table check result for "+n+":",c),c.length>0})}catch(c){return a(!0,c)}return o&&o.then?o.then(a.bind(null,!1),a.bind(null,!0)):a(!1,o)}(0,function(s,a){return Promise.resolve(i.release()).then(function(){if(s)throw a;return a})}))}catch(s){return Promise.reject(s)}},t.initializeKycDataSource=function(){try{var n=function(){return Promise.resolve(i.checkTableExists("IdentityVerificationStorage")).then(function(a){var o=function(){if(!a)return Promise.resolve(i.dataSource.synchronize()).then(function(){})}();if(o&&o.then)return o.then(function(){})})},i=this,s=function(){if(i.dataSource&&!i.dataSource.isInitialized)return Promise.resolve(i.dataSource.initialize()).then(function(){})}();return Promise.resolve(s&&s.then?s.then(n):n())}catch(a){return Promise.reject(a)}},t.waitForNextVeriffVerification=function(){try{var n,i=this;return Pu("waitForNextVeriffVerification"),Promise.resolve(new Promise(function(s,a){n=i.subscribeVeriffVerification(function(o){try{return Promise.resolve(function(c,u){try{var f=(Pu("waitForNextVeriffVerification() this.handleVerificationUpdate(message)"),Promise.resolve(i.handleVerificationUpdate(o)).then(function(){if(Pu("waitForNextVeriffVerification() this.handleVerificationUpdate(message) resolved"),!n)throw new Error("Failed to subscribe to Veriff verification messages");return i.unsubscribeVeriffVerification(n),Promise.resolve(i.fetchVerificationData(Yi.KYC)).then(function(l){var d=l.getPayload();Pu("waitForNextVeriffVerification() resolved with",d),s(d)})}))}catch(l){return u(l)}return f&&f.then?f.then(void 0,u):f}(0,function(c){a(c)}))}catch(c){return Promise.reject(c)}})}))}catch(s){return Promise.reject(s)}},t.fetchVerificationData=function(n,i){try{return i===void 0&&(i=Lc.APPROVED),Pu("fetchVerificationData()",n,i),Promise.resolve(this.idVerificationManager.findLatestWithTypeAndStatus(n,i)).then(function(s){return s||Ze(n+" verification data with status "+i+" requested but not available in storage",Ce.VerificationDataNotFound),s})}catch(s){return Promise.reject(s)}},t.fetchReuseableKycCount=function(n){try{return Promise.resolve(this.idVerificationManager.countReuse(n))}catch(i){return Promise.reject(i)}},t.updateReuseableKycCount=function(n){try{return Promise.resolve(this.idVerificationManager.updateReuseableCount(n)).then(function(){})}catch(i){return Promise.reject(i)}},e}(lX),xPe=function(r){try{var e=r.toPublic();return Promise.resolve(dX(e)).then(function(t){return{did:t,signer:UY(r),alg:"ES256K-R"}})}catch(t){return Promise.reject(t)}},dX=function(r){try{if(r.type!==ht.K1)throw new Error("Only K1 keys are supported");var e=r.data.toString("hex"),t=function(n,i="base58btc",s){if(s){const a=typeof s=="string"?DY[s]:s,o=ow.encodingLength(a),c=new Uint8Array(o+n.length);return((u,f,l=0)=>{ow.encode(u,f,l)})(a,c),c.set(n,o),Ls.toString(MT.encode(i,c),"utf-8")}return Ls.toString(MT.encode(i,n),"utf-8")}(Jb(ca.computePublicKey("0x"+e,!0)),"base58btc","secp256k1-pub");return Promise.resolve("did:key:"+t)}catch(n){return Promise.reject(n)}};function gRe(r){return fr().tonomyIdSchema+"ScanQR?did="+r}function yl(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var VF=Mt("tonomy-sdk:controllers:UserOnboarding");const zF=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function ts(r,e,t){if(!r.s){if(t instanceof O1){if(!t.s)return void(t.o=ts.bind(null,r,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(ts.bind(null,r,e),ts.bind(null,r,2));r.s=e,r.v=t;var n=r.o;n&&n(r)}}var O1=function(){function r(){}return r.prototype.then=function(e,t){var n=new r,i=this.s;if(i){var s=1&i?e:t;if(s){try{ts(n,1,s(this.v))}catch(a){ts(n,2,a)}return n}return this}return this.o=function(a){try{var o=a.v;1&a.s?ts(n,1,e?e(o):o):t?ts(n,1,t(o)):ts(n,2,o)}catch(c){ts(n,2,c)}},n},r}();function HF(r){return r instanceof O1&&1&r.s}function WF(r,e,t){if(typeof r[zF]=="function"){var n,i,s,a=function(l){try{for(;!((n=o.next()).done||t&&t());)if((l=e(n.value))&&l.then){if(!HF(l))return void l.then(a,s||(s=ts.bind(null,i=new O1,2)));l=l.v}i?ts(i,1,l):i=l}catch(d){ts(i||(i=new O1),2,d)}},o=r[zF]();if(a(),o.return){var c=function(l){try{n.done||o.return()}catch{}return l};if(i&&i.then)return i.then(c,function(l){throw c(l)});c()}return i}if(!("length"in r))throw new TypeError("Object is not iterable");for(var u=[],f=0;f<r.length;f++)u.push(r[f]);return function(l,d,h){var y,p,g=-1;return function m(v){try{for(;++g<l.length&&(!h||!h());)if((v=d(g))&&v.then){if(!HF(v))return void v.then(m,p||(p=ts.bind(null,y=new O1,2)));v=v.v}y?ts(y,1,v):y=v}catch(b){ts(y||(y=new O1),2,b)}}(),y}(u,function(l){return e(u[l])},t)}var wPe=function(r){function e(){for(var n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(n=r.call.apply(r,[this].concat(s))||this).chainID=void 0,n}Rt(e,r);var t=e.prototype;return t.validateUsername=function(n){typeof n=="string"&&n.length!==0||Ze("Username must be a string",Ce.InvalidData),/^[A-Za-z0-9_-]{1,100}$/g.test(n)||Ze("Username contains invalid characters",Ce.InvalidUsername)},t.createDid=function(){try{var n=function(){return Promise.resolve(i.getAccountName()).then(function(a){return Promise.resolve(nX(a.toString())).then(function(o){return i.storage.did=o,Promise.resolve(i.storage.did).then(function(){return i.storage.did})})})},i=this,s=function(){if(!i.chainID)return Promise.resolve(kN()).then(function(a){i.chainID=a})}();return Promise.resolve(s&&s.then?s.then(n):n())}catch(a){return Promise.reject(a)}},t.login=function(n,i,s){try{var a=this;a.validateUsername(n.getBaseUsername());var o=a.keyManager;return Promise.resolve(Us().getPerson(n)).then(function(c){return Promise.resolve(a.savePassword(i,cs({},s,{salt:c.passwordSalt}))).then(function(){return Promise.resolve(o.getKey({level:rt.PASSWORD})).then(function(u){return Promise.resolve(Vd(c.accountName)).then(function(f){var l=f.getPermission("owner").required_auth.keys[0].key;return u.toString()!==l.toString()&&Ze("Password is incorrect",Ce.PasswordInvalid),a.storage.accountName=c.accountName,a.storage.username=n,a.storage.status=Tc.LOGGING_IN,Promise.resolve(a.storage.accountName).then(function(){return Promise.resolve(a.storage.username).then(function(){return Promise.resolve(a.storage.status).then(function(){return Promise.resolve(a.createDid()).then(function(){return c})})})})})})})})}catch(c){return Promise.reject(c)}},t.isLoggedIn=function(){try{return Promise.resolve(this.getStatus()).then(function(n){return n===Tc.READY})}catch(n){return Promise.reject(n)}},t.createPerson=function(){try{var n=this,i=n.keyManager;return Promise.resolve(n.getUsername()).then(function(s){var a=s.usernameHash;return Promise.resolve(i.getKey({level:rt.PASSWORD})).then(function(o){return Promise.resolve(n.storage.salt).then(function(c){return Promise.resolve(n.storage.captchaToken).then(function(u){function f(d){return Promise.resolve(n.storage.accountName).then(function(){return n.storage.status=Tc.CREATING_ACCOUNT,Promise.resolve(n.storage.status).then(function(){return Promise.resolve(n.createDid()).then(function(){return Promise.resolve(n.getAccountName()).then(function(h){var y=h.toString();return Promise.resolve(n.getUsername()).then(function(p){var g=p.getBaseUsername();return Promise.resolve(n.getDid()).then(function(m){VF("Created account",{accountName:y,username:g,did:m})})})})})})})}var l=yl(function(){return Promise.resolve(fX({usernameHash:a,publicKey:o,salt:c,captchaToken:u})).then(function(d){n.storage.accountName=d.accountName})},function(d){throw d.status===400&&d.message==="Username is taken"&&Ze("Username is taken",Ce.UsernameTaken),d});return l&&l.then?l.then(f):f()})})})})}catch(s){return Promise.reject(s)}},t.saveUsername=function(n){try{var i=function(c){return s.storage.username=a,Promise.resolve(s.storage.username).then(function(){})},s=this;s.validateUsername(n);var a=$i.fromUsername(n,of.PERSON,fr().accountSuffix),o=yl(function(){return Promise.resolve(Vd(a)).then(function(c){c&&Ze("Username is taken",Ce.UsernameTaken)})},function(c){if(!Pc(c,Ce.UsernameNotFound))throw c});return Promise.resolve(o&&o.then?o.then(i):i())}catch(c){return Promise.reject(c)}},t.usernameExists=function(n){try{var i=$i.fromUsername(n,of.PERSON,fr().accountSuffix);return Promise.resolve(yl(function(){return Promise.resolve(Vd(i)).then(function(){return!0})},function(s){if(Pc(s,Ce.UsernameNotFound))return!1;throw s}))}catch(s){return Promise.reject(s)}},t.updateKeys=function(n){try{var i=this;return Promise.resolve(i.getStatus()).then(function(s){function a(f){function l(h){function y(g){var m=ay(o,rt.PASSWORD,n);return Promise.resolve(i.getAccountName()).then(function(v){return Promise.resolve(Us().updateKeysPerson(v,c,m)).then(function(){return i.storage.status=Tc.READY,Promise.resolve(i.storage.status).then(function(){})})})}var p=yl(function(){return Promise.resolve(o.getKey({level:rt.LOCAL})).then(function(g){c.LOCAL=g.toString()})},function(g){if(!Pc(g,Ce.KeyNotFound))throw g});return p&&p.then?p.then(y):y()}var d=yl(function(){return Promise.resolve(o.getKey({level:rt.BIOMETRIC})).then(function(h){c.BIOMETRIC=h.toString()})},function(h){if(!Pc(h,Ce.KeyNotFound))throw h});return d&&d.then?d.then(l):l()}s===Tc.DEACTIVATED&&Ze("Can't update keys for deactivated user",Ce.UserDeactivated);var o=i.keyManager,c={},u=yl(function(){return Promise.resolve(o.getKey({level:rt.PIN})).then(function(f){c.PIN=f.toString()})},function(f){if(!Pc(f,Ce.KeyNotFound))throw f});return u&&u.then?u.then(a):a()})}catch(s){return Promise.reject(s)}},t.checkKeysStillValid=function(){try{var n=this;return Promise.resolve(n.getStatus()).then(function(i){return i!==Tc.READY&&Ze("User is not ready",Ce.AccountDoesntExist),Promise.resolve(n.storage.accountName).then(function(s){return Promise.resolve(Vd(s)).then(function(a){var o=WF([{level:rt.PIN,permission:"pin"},{level:rt.BIOMETRIC,permission:"biometric"},{level:rt.LOCAL,permission:"local"},{level:rt.PASSWORD,permission:"active"},{level:rt.PASSWORD,permission:"owner"}],function(c){function u(){var d;try{d=a.getPermission(c.permission)}catch{d=null}!f&&d&&Ze(c.level+" key was not found in the keyManager, but was found on the blockchain",Ce.KeyNotFound),f&&!d&&Ze(c.level+" keys was not found on the blockchain, but was found in the keyManager",Ce.KeyNotFound),f&&d&&f.toString()!==d.required_auth.keys[0].key.toString()&&Ze(c.level+" keys do not match",Ce.KeyNotFound)}var f,l=yl(function(){return Promise.resolve(n.keyManager.getKey({level:c.level})).then(function(d){f=d})},function(){f=null});return l&&l.then?l.then(u):u()});return!o||!o.then||o.then(function(){return!0})})})})}catch(i){return Promise.reject(i)}},t.logout=function(){try{var n=function(a){i.storage.clear(),i.disconnectCommunication()},i=this,s=WF(Object.keys(rt),function(a){return yl(function(){return Promise.resolve(i.keyManager.getKey({level:rt.from(a)})).then(function(){i.keyManager.removeKey({level:rt.from(a)})})},function(o){if(!Pc(o,[Ce.KeyNotFound,Ce.InvalidKeyLevel]))throw o})},function(){});return Promise.resolve(s&&s.then?s.then(n):n())}catch(a){return Promise.reject(a)}},t.checkTableExists=function(n){try{var i=this.dataSource.createQueryRunner();return Promise.resolve(function(s,a){try{var o=Promise.resolve(i.query("SELECT name FROM sqlite_master WHERE type='table' AND name=?",[n])).then(function(c){return VF("Table check result for "+n+":",c),c.length>0})}catch(c){return a(!0,c)}return o&&o.then?o.then(a.bind(null,!1),a.bind(null,!0)):a(!1,o)}(0,function(s,a){return Promise.resolve(i.release()).then(function(){if(s)throw a;return a})}))}catch(s){return Promise.reject(s)}},t.initializeKycDataSource=function(){try{var n=function(){return Promise.resolve(i.checkTableExists("IdentityVerificationStorage")).then(function(a){var o=function(){if(!a)return Promise.resolve(i.dataSource.synchronize()).then(function(){})}();if(o&&o.then)return o.then(function(){})})},i=this,s=function(){if(i.dataSource&&!i.dataSource.isInitialized)return Promise.resolve(i.dataSource.initialize()).then(function(){return Promise.resolve(i.dataSource.runMigrations()).then(function(){})})}();return Promise.resolve(s&&s.then?s.then(n):n())}catch(a){return Promise.reject(a)}},t.initializeFromStorage=function(){try{var n=this;return Promise.resolve(n.getAccountName()).then(function(i){return Promise.resolve(n.initializeKycDataSource()).then(function(){return function(){if(i)return Promise.resolve(n.checkKeysStillValid());Ze('Account "'+i+'" not found',Ce.AccountDoesntExist)}()})})}catch(i){return Promise.reject(i)}},e}(UT);function KF(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var EPe=Mt("tonomy-sdk:controllers:UserRequestsManager");(function(...r){var e,t,n;const i=r.map(o=>o.prototype);function s(...o){for(const c of r)XJ(this,new c(...o))}s.prototype=MU(i,s),Object.setPrototypeOf(s,MU(r,null,["prototype"]));let a=s;{const o=((...c)=>{const u=((...f)=>{var l;const d=new Set,h=new Set([...f]);for(;h.size>0;)for(let y of h){const p=[...Gb(y.prototype).map(g=>g.constructor),...(l=P_e(y))!==null&&l!==void 0?l:[]].filter(g=>!d.has(g));for(let g of p)h.add(g);d.add(y),h.delete(y)}return[...d]})(...c).map(f=>T_e.get(f)).filter(f=>!!f);return u.length==0?{}:u.length==1?u[0]:u.reduce((f,l)=>((d,h)=>{var y,p,g,m,v,b;return{class:wT([...(y=d==null?void 0:d.class)!==null&&y!==void 0?y:[],...(p=h==null?void 0:h.class)!==null&&p!==void 0?p:[]]),static:TU((g=d==null?void 0:d.static)!==null&&g!==void 0?g:{},(m=h==null?void 0:h.static)!==null&&m!==void 0?m:{}),instance:TU((v=d==null?void 0:d.instance)!==null&&v!==void 0?v:{},(b=h==null?void 0:h.instance)!==null&&b!==void 0?b:{})}})(f,l))})(...r);for(let c of(e=o==null?void 0:o.class)!==null&&e!==void 0?e:[]){const u=c(a);u&&(a=u)}CU((t=o==null?void 0:o.static)!==null&&t!==void 0?t:{},a),CU((n=o==null?void 0:o.instance)!==null&&n!==void 0?n:{},a.prototype)}return eY.set(a,r),a})(BN,uX,bPe,wPe,lX,function(r){function e(){return r.apply(this,arguments)||this}Rt(e,r);var t=e.prototype;return t.handleLinkAuthRequestMessage=function(n){try{var i=this,s=new xw(n);return Promise.resolve(KF(function(){var a=R9(n.getSender()),o=a.equals;return Promise.resolve(i.getAccountName()).then(function(c){o.call(a,c)||Ze("Message not sent from authorized account",Ce.SenderNotAuthorized);var u=s.getPayload(),f=u.contract,l=u.action,d=N9(n.getSender()).fragment;return d||Ze("DID does not contain App permission",Ce.MissingParams),Promise.resolve(Us().getApp(qe.from(d))).then(function(){var h=ay(i.keyManager,rt.ACTIVE),y=NF(),p=y.linkAuth;return Promise.resolve(i.getAccountName()).then(function(g){return Promise.resolve(p.call(y,g,f,l,d,h)).then(function(){var m=w2.signMessage,v={requestId:s.getVc().getId(),success:!0};return Promise.resolve(i.getIssuer()).then(function(b){return Promise.resolve(m.call(w2,v,b,s.getSender())).then(function(_){return Promise.resolve(i.sendMessage(_)).then(function(){})})})})})})})},function(a){if(!Pc(a,Ce.SenderNotAuthorized))throw a}))}catch(a){return Promise.reject(a)}},t.loginWithApp=function(n,i){try{var s=this;return Promise.resolve(s.getAccountName()).then(function(a){var o={app:n,added:new Date,status:u0.PENDING};return Promise.resolve(s.storage.appRecords).then(function(c){return c||(c=[]),c.push(o),s.storage.appRecords=c,Promise.resolve(s.storage.appRecords).then(function(){function u(){return EPe("loginWithApp key",i.toString(),l),Promise.resolve(Us().loginWithApp(a,n.accountName,"local",i,f)).then(function(){function h(){return o.status=u0.READY,s.storage.appRecords=c,Promise.resolve(s.storage.appRecords).then(function(){})}var y=function(){if(l)return Promise.resolve(qMe(1e3)).then(function(){var p=ay(s.keyManager,rt.ACTIVE);return Promise.resolve(NF().linkAuth(a,n.accountName,"",n.accountName,p)).then(function(){})})}();return y&&y.then?y.then(h):h()})}var f=ay(s.keyManager,rt.LOCAL),l=!1,d=KF(function(){return Promise.resolve(Vd(a)).then(function(h){h.getPermission(n.accountName)})},function(h){h.message==="Unknown permission "+n.accountName.toString()+" on account "+a.toString()+"."&&(l=!0)});return d&&d.then?d.then(u):u()})})})}catch(a){return Promise.reject(a)}},t.acceptLoginRequest=function(n,i){try{var s=this;return Promise.resolve(n.accept(s)).then(function(a){return function(){if(i==="redirect")return a.getRedirectUrl();if(!n.sso)throw new Error("SSO requests are missing in the login request message");var o=n.sso.getDid();return Promise.resolve(s.getIssuer()).then(function(c){return Promise.resolve(WN.signMessage(a,c,o)).then(function(u){return Promise.resolve(s.sendMessage(u)).then(function(){})})})}()})}catch(a){return Promise.reject(a)}},e}(UT),UT);var Xp=gN+"key.",Yb=function(){function r(){this.keyStorage={}}var e=r.prototype;return e.storeKey=function(t){try{R_e.validate(t);var n={privateKey:t.privateKey,publicKey:t.privateKey.toPublic()};switch(t.level){case rt.ACTIVE:case rt.LOCAL:case rt.BIOMETRIC:break;case rt.PASSWORD:case rt.PIN:if(!t.challenge)throw new Error(Ce.MissingChallenge+": Challenge missing");n.salt=lp(32),n.hashedSaltedChallenge=Km(t.challenge+n.salt);break;case rt.BROWSER_LOCAL_STORAGE:localStorage.setItem(Xp+t.level,JSON.stringify(n));break;case rt.BROWSER_SESSION_STORAGE:sessionStorage.setItem(Xp+t.level,JSON.stringify(n));break;default:throw new Error(Ce.InvalidKeyLevel+": Invalid level")}return this.keyStorage[t.level]=n,Promise.resolve(n.publicKey)}catch(i){return Promise.reject(i)}},e.fetchKey=function(t){fA.validate(t);var n=this.keyStorage[t.level];if(n)return n;if(t.level===rt.BROWSER_LOCAL_STORAGE||t.level===rt.BROWSER_SESSION_STORAGE){var i=t.level===rt.BROWSER_LOCAL_STORAGE?localStorage.getItem(Xp+t.level):sessionStorage.getItem(Xp+t.level);if(!i)throw new Error(Ce.KeyNotFound+": No key for level "+t.level);var s=JSON.parse(i);return this.keyStorage[t.level]={privateKey:tH.from(s.privateKey),publicKey:ii.from(s.publicKey)},s.hashedSaltedChallenge&&(this.keyStorage[t.level].hashedSaltedChallenge=s.hashedSaltedChallenge),s.salt&&(this.keyStorage[t.level].salt=s.salt),this.keyStorage[t.level]}throw new Error(Ce.KeyNotFound+": No key for level "+t.level)},e.signData=function(t){try{var n=function(o){var c,u=s.privateKey;if(t.outputType==="jwt"){if(typeof t.data!="string")throw new Error(Ce.InvalidData+": Data must be a string");var f=UY(u);return Promise.resolve(f(t.data))}return c=typeof t.data=="string"?kt.hash(Buffer.from(t.data)):t.data,u.signDigest(c)},i=this;N_e.validate(t);var s=i.fetchKey(t),a=function(){if(t.level===rt.PASSWORD||t.level===rt.PIN){if(!t.challenge)throw new Error(Ce.MissingChallenge+": Challenge missing");return Promise.resolve(i.checkKey({level:t.level,challenge:t.challenge})).then(function(o){if(!o&&t.level===rt.PASSWORD)throw new Error(Ce.PasswordInvalid+": Invalid password");if(!o&&t.level===rt.PIN)throw new Error(Ce.PinInvalid+": Invalid PIN")})}}();return Promise.resolve(a&&a.then?a.then(n):n())}catch(o){return Promise.reject(o)}},e.getKey=function(t){try{fA.validate(t);var n=this.fetchKey(t);return Promise.resolve(n.publicKey)}catch(i){return Promise.reject(i)}},e.checkKey=function(t){try{O_e.validate(t);var n=this.fetchKey(t);if(t.level===rt.PIN||t.level===rt.PASSWORD){if(!t.challenge)throw new Error(Ce.MissingChallenge+": Challenge is missing");var i=Km((t==null?void 0:t.challenge)+n.salt);return Promise.resolve(i===n.hashedSaltedChallenge)}throw new Error(Ce.InvalidKeyLevel+": Invalid Level")}catch(s){return Promise.reject(s)}},e.removeKey=function(t){try{return fA.validate(t),delete this.keyStorage[t.level],t.level!==rt.BROWSER_LOCAL_STORAGE&&t.level!==rt.BROWSER_SESSION_STORAGE||(t.level===rt.BROWSER_LOCAL_STORAGE?localStorage.removeItem(Xp+t.level):sessionStorage.removeItem(Xp+t.level)),Promise.resolve()}catch(n){return Promise.reject(n)}},r}(),vRe=function(r){try{return r===void 0&&(r=new Yb),Promise.resolve(r.getKey({level:rt.BROWSER_LOCAL_STORAGE})).then(function(e){var t=NN(r,rt.BROWSER_LOCAL_STORAGE);return Promise.resolve(dX(e)).then(function(n){return{did:n,signer:t.sign,alg:"ES256K-R"}})})}catch(e){return Promise.reject(e)}},APe=function(r){try{r===void 0&&(r=new Yb);var e=w3().privateKey;return Promise.resolve(xPe(e)).then(function(t){return Promise.resolve(r.storeKey({level:rt.BROWSER_LOCAL_STORAGE,privateKey:e})).then(function(){return t})})}catch(t){return Promise.reject(t)}},E3=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AddressCannotBeZero",type:"error"},{inputs:[],name:"CooldownActive",type:"error"},{inputs:[],name:"PerWalletBuyCapExceeded",type:"error"},{inputs:[],name:"SellsBlocked",type:"error"},{inputs:[],name:"TradingNotEnabled",type:"error"},{inputs:[],name:"UnauthorizedAntiSnipingAction",type:"error"},{inputs:[{internalType:"address",name:"caller",type:"address"}],name:"UnauthorizedBridge",type:"error"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"}],name:"WalletIsBlacklisted",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"previousAdmin",type:"address"},{indexed:!1,internalType:"address",name:"newAdmin",type:"address"}],name:"AdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"manager",type:"address"}],name:"AntiSnipingManagerSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"seconds_",type:"uint32"}],name:"AntiSnipingSecondsSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"beacon",type:"address"}],name:"BeaconUpgraded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"enabled",type:"bool"},{indexed:!1,internalType:"uint32",name:"seconds_",type:"uint32"}],name:"CooldownSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint8",name:"version",type:"uint8"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"enabled",type:"bool"}],name:"LaunchPeriodEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"LiquidityAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"wallet",type:"address"}],name:"LpWalletSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint128",name:"amount",type:"uint128"}],name:"PerWalletBuyCapSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"pool",type:"address"}],name:"PoolAddressSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"}],name:"Snapshot",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bool",name:"enabled",type:"bool"}],name:"TradingEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"wallet",type:"address"},{indexed:!1,internalType:"bool",name:"status",type:"bool"}],name:"WalletBlacklisted",type:"event"},{inputs:[],name:"INITIAL_SUPPLY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"antiSnipingManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"antiSnipingSeconds",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"snapshotId",type:"uint256"}],name:"balanceOfAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"_wallets",type:"address[]"},{internalType:"bool",name:"_status",type:"bool"}],name:"batchBlacklistWallets",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"blacklistedWallets",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"bridge",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"bridgeBurn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"bridgeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"canTrade",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"cooldownEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"cooldownSeconds",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getRemainingAntiSnipingSeconds",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"}],name:"getRemainingBuyCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"}],name:"getWalletBuyAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isAntiSnipingPeriodActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isLaunchPeriodActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isLaunchPeriodEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isPoolAddressSet",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastBuyTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityAddedTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"lpWallet",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintTo",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"perWalletBuyCap",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"poolAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"_wallets",type:"address[]"}],name:"resetWalletBuyAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_antiSnipingManager",type:"address"}],name:"setAntiSnipingManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_seconds",type:"uint32"}],name:"setAntiSnipingSeconds",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_bridge",type:"address"}],name:"setBridge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_enabled",type:"bool"},{internalType:"uint32",name:"_seconds",type:"uint32"}],name:"setCooldownEnabled",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_enabled",type:"bool"}],name:"setLaunchPeriodEnabled",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"setLiquidityAdded",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_lpWallet",type:"address"}],name:"setLpWallet",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint128",name:"_amount",type:"uint128"}],name:"setPerWalletBuyCap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_poolAddress",type:"address"}],name:"setPoolAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_enabled",type:"bool"}],name:"setTradingEnabled",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"bool",name:"_status",type:"bool"}],name:"setWalletBlacklisted",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"snapshotId",type:"uint256"}],name:"totalSupplyAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tradingEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"}],name:"upgradeTo",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"walletBuyAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],hX="0x60a06040523060805234801561001457600080fd5b5061001d610022565b6100e1565b600054610100900460ff161561008e5760405162461bcd60e51b815260206004820152602760248201527f496e697469616c697a61626c653a20636f6e747261637420697320696e697469604482015266616c697a696e6760c81b606482015260840160405180910390fd5b60005460ff908116146100df576000805460ff191660ff9081179091556040519081527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b565b6080516137ac61011860003960008181610cda01528181610d2301528181611068015281816110a8015261113b01526137ac6000f3fe6080604052600436106103ad5760003560e01c80638129fc1c116101e7578063b087a2931161010d578063e9e15b4f116100a0578063f23375c71161006f578063f23375c714610b71578063f2fde38b14610b86578063f8072dd214610ba6578063fe575a8714610bc657600080fd5b8063e9e15b4f14610ac3578063eec368ac14610ae3578063ef17dd9f14610b23578063ef7898d014610b4357600080fd5b8063c6b98b4c116100dc578063c6b98b4c14610a42578063dd62ed3e14610a62578063e284308714610a82578063e78cea9214610aa257600080fd5b8063b087a293146109c7578063b8221bc4146109dc578063c2e5ec0414610a01578063c34e4f2f14610a2157600080fd5b80639212347011610185578063a457c2d711610154578063a457c2d714610945578063a9059cbb14610965578063a985ceef14610985578063afede0f2146109a757600080fd5b806392123470146108b557806395d89b41146108d6578063981b24d0146108eb5780639f51a13c1461090b57600080fd5b80638c2a993e116101c15780638c2a993e146108365780638da5cb5b146108565780638dd1480214610874578063900a60931461089457600080fd5b80638129fc1c146107de57806381911b54146107f35780638456cb591461082157600080fd5b806343924cc1116102d7578063617ffe5c1161026a578063715018a611610239578063715018a61461075257806374f4f54714610767578063786076dc1461078757806380fa5171146107a757600080fd5b8063617ffe5c146106a25780636303516c146106c25780636dbd46ef146106e357806370a082311461071c57600080fd5b80634f1ef286116102a65780634f1ef2861461064257806352d1902d14610655578063559f05dc1461066a5780635c975abb1461068a57600080fd5b806343924cc1146105c0578063468c7ee2146105e05780634ada218b146106005780634ee2cd7e1461062257600080fd5b80632ff2e9dc1161034f578063395093511161031e57806339509351146105495780633f4ba83a146105695780634290df941461057e578063434bce12146105a057600080fd5b80632ff2e9dc146104d6578063313ce567146104f65780633659cfe61461051257806337d15a8d1461053457600080fd5b806318160ddd1161038b57806318160ddd1461044657806323b872dd146104655780632b5ba3b9146104855780632f4237c0146104b657600080fd5b806306fdde03146103b2578063095ea7b3146103dd5780631755ff211461040d575b600080fd5b3480156103be57600080fd5b506103c7610c00565b6040516103d491906130a1565b60405180910390f35b3480156103e957600080fd5b506103fd6103f83660046130eb565b610c92565b60405190151581526020016103d4565b34801561041957600080fd5b506101c65461042e906001600160a01b031681565b6040516001600160a01b0390911681526020016103d4565b34801561045257600080fd5b506035545b6040519081526020016103d4565b34801561047157600080fd5b506103fd610480366004613115565b610cac565b34801561049157600080fd5b506103fd6104a0366004613152565b6101c96020526000908152604090205460ff1681565b3480156104c257600080fd5b506101c554600160a01b900460ff166103fd565b3480156104e257600080fd5b506104576b09b18ab5df7180b6b800000081565b34801561050257600080fd5b50604051601281526020016103d4565b34801561051e57600080fd5b5061053261052d366004613152565b610cd0565b005b34801561054057600080fd5b506103fd610db8565b34801561055557600080fd5b506103fd6105643660046130eb565b610e14565b34801561057557600080fd5b50610532610e36565b34801561058a57600080fd5b506101c5546103fd90600160a01b900460ff1681565b3480156105ac57600080fd5b506105326105bb36600461317d565b610e48565b3480156105cc57600080fd5b506104576105db366004613152565b610ef2565b3480156105ec57600080fd5b506105326105fb366004613152565b610f80565b34801561060c57600080fd5b506101c5546103fd90600160a81b900460ff1681565b34801561062e57600080fd5b5061045761063d3660046130eb565b611005565b6105326106503660046131c6565b61105e565b34801561066157600080fd5b5061045761112e565b34801561067657600080fd5b506103fd610685366004613152565b6111e1565b34801561069657600080fd5b5060975460ff166103fd565b3480156106ae57600080fd5b506105326106bd3660046132d1565b61121a565b3480156106ce57600080fd5b506101c75461042e906001600160a01b031681565b3480156106ef57600080fd5b506101c854610704906001600160801b031681565b6040516001600160801b0390911681526020016103d4565b34801561072857600080fd5b50610457610737366004613152565b6001600160a01b031660009081526033602052604090205490565b34801561075e57600080fd5b50610532611337565b34801561077357600080fd5b506105326107823660046130eb565b611349565b34801561079357600080fd5b506105326107a2366004613324565b61139a565b3480156107b357600080fd5b506104576107c2366004613152565b6001600160a01b031660009081526101cb602052604090205490565b3480156107ea57600080fd5b506105326113f0565b3480156107ff57600080fd5b5061045761080e366004613152565b6101cb6020526000908152604090205481565b34801561082d57600080fd5b50610532611645565b34801561084257600080fd5b506105326108513660046130eb565b611655565b34801561086257600080fd5b5060fb546001600160a01b031661042e565b34801561088057600080fd5b5061053261088f366004613152565b6116a6565b3480156108a057600080fd5b506101c55461042e906001600160a01b031681565b3480156108c157600080fd5b506101c45461042e906001600160a01b031681565b3480156108e257600080fd5b506103c76116f8565b3480156108f757600080fd5b5061045761090636600461333f565b611707565b34801561091757600080fd5b506101c85461093090600160e01b900463ffffffff1681565b60405163ffffffff90911681526020016103d4565b34801561095157600080fd5b506103fd6109603660046130eb565b611732565b34801561097157600080fd5b506103fd6109803660046130eb565b6117ad565b34801561099157600080fd5b506101c5546103fd90600160b01b900460ff1681565b3480156109b357600080fd5b506105326109c2366004613358565b6117bb565b3480156109d357600080fd5b50610532611812565b3480156109e857600080fd5b506101c85461093090600160c01b900463ffffffff1681565b348015610a0d57600080fd5b50610532610a1c366004613324565b611880565b348015610a2d57600080fd5b506101c6546001600160a01b031615156103fd565b348015610a4e57600080fd5b50610532610a5d366004613152565b6118d6565b348015610a6e57600080fd5b50610457610a7d366004613381565b611954565b348015610a8e57600080fd5b50610532610a9d3660046133bf565b61197f565b348015610aae57600080fd5b506101c35461042e906001600160a01b031681565b348015610acf57600080fd5b50610532610ade366004613152565b6119db565b348015610aef57600080fd5b506101c854610b0b90600160801b90046001600160401b031681565b6040516001600160401b0390911681526020016103d4565b348015610b2f57600080fd5b50610532610b3e3660046133da565b611a59565b348015610b4f57600080fd5b50610457610b5e366004613152565b6101ca6020526000908152604090205481565b348015610b7d57600080fd5b50610457611afe565b348015610b9257600080fd5b50610532610ba1366004613152565b611b52565b348015610bb257600080fd5b50610532610bc136600461341b565b611bc8565b348015610bd257600080fd5b506103fd610be1366004613152565b6001600160a01b031660009081526101c9602052604090205460ff1690565b606060368054610c0f90613445565b80601f0160208091040260200160405190810160405280929190818152602001828054610c3b90613445565b8015610c885780601f10610c5d57610100808354040283529160200191610c88565b820191906000526020600020905b815481529060010190602001808311610c6b57829003601f168201915b5050505050905090565b600033610ca0818585611c4e565b60019150505b92915050565b600033610cba858285611d72565b610cc5858585611de6565b506001949350505050565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163003610d215760405162461bcd60e51b8152600401610d189061347f565b60405180910390fd5b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610d6a600080516020613730833981519152546001600160a01b031690565b6001600160a01b031614610d905760405162461bcd60e51b8152600401610d18906134cb565b610d9981611f9c565b60408051600080825260208201909252610db591839190611fa4565b50565b6101c854600090600160801b90046001600160401b031615801590610e0f57506101c854610e0390600160e01b810463ffffffff1690600160801b90046001600160401b031661352d565b6001600160401b031642105b905090565b600033610ca0818585610e278383611954565b610e31919061354c565b611c4e565b610e3e61210f565b610e46612169565b565b60fb546001600160a01b03163314801590610e6f57506101c5546001600160a01b03163314155b15610e8d57604051630374046160e11b815260040160405180910390fd5b6001600160a01b03821660008181526101c96020908152604091829020805460ff19168515159081179091558251938452908301527f6e5e68466043e631629f40501adefa55dc080619353e9256cecbb1cc4997c18591015b60405180910390a15050565b6101c554600090600160a01b900460ff161580610f1d57506101c7546001600160a01b038381169116145b15610f2b5750600019919050565b6001600160a01b03821660009081526101cb60205260409020546101c8546001600160801b03168110610f615750600092915050565b6101c854610f799082906001600160801b031661355f565b9392505050565b610f8861210f565b6001600160a01b038116610faf576040516303988b8160e61b815260040160405180910390fd5b6101c780546001600160a01b0319166001600160a01b0383169081179091556040519081527fba608596696e6ca6fec819bcac9f7da176c0d8773c5c146a8664a896252bcc20906020015b60405180910390a150565b6001600160a01b03821660009081526065602052604081208190819061102c9085906121b6565b9150915081611053576001600160a01b038516600090815260336020526040902054611055565b805b95945050505050565b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001630036110a65760405162461bcd60e51b8152600401610d189061347f565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166110ef600080516020613730833981519152546001600160a01b031690565b6001600160a01b0316146111155760405162461bcd60e51b8152600401610d18906134cb565b61111e82611f9c565b61112a82826001611fa4565b5050565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146111ce5760405162461bcd60e51b815260206004820152603860248201527f555550535570677261646561626c653a206d757374206e6f742062652063616c60448201527f6c6564207468726f7567682064656c656761746563616c6c00000000000000006064820152608401610d18565b5060008051602061373083398151915290565b6001600160a01b03811660009081526101c9602052604081205460ff16158015610ca657506101c554600160a81b900460ff1692915050565b60fb546001600160a01b0316331480159061124157506101c5546001600160a01b03163314155b1561125f57604051630374046160e11b815260040160405180910390fd5b60005b8281101561133157816101c9600086868581811061128257611282613572565b90506020020160208101906112979190613152565b6001600160a01b031681526020810191909152604001600020805460ff19169115159190911790557f6e5e68466043e631629f40501adefa55dc080619353e9256cecbb1cc4997c1858484838181106112f2576112f2613572565b90506020020160208101906113079190613152565b604080516001600160a01b03909216825284151560208301520160405180910390a1600101611262565b50505050565b61133f61210f565b610e4660006122ac565b6101c3546001600160a01b03163314801590611370575060fb546001600160a01b03163314155b1561139057604051636585b60d60e01b8152336004820152602401610d18565b61112a82826122fe565b6113a261210f565b6101c58054821515600160a01b0260ff60a01b199091161790556040517fd8e3bee7c7113c718db3fcb51d8d99709734319c84a741b0835f4234181fcb6e90610ffa90831515815260200190565b600054610100900460ff16158080156114105750600054600160ff909116105b8061142a5750303b15801561142a575060005460ff166001145b61148d5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b6064820152608401610d18565b6000805460ff1916600117905580156114b0576000805461ff0019166101001790555b6114fa6040518060400160405280600c81526020016b2a37b737b6bc902a37b5b2b760a11b81525060405180604001604052806004815260200163544f4e4f60e01b81525061243e565b61150261246f565b61150a612496565b6115126124c5565b61151a6124f4565b61152261246f565b60fb546101c380546001600160a01b03199081166001600160a01b039093169283179091556101c480548216831790556101c5805490911682179055611574906b09b18ab5df7180b6b8000000612523565b6101c5805462ffffff60a01b19166201000160a01b1790556101c880546001600160c01b0316644b0000004b60c21b1790556115bd60646b09b18ab5df7180b6b8000000613588565b6101c880546001600160801b03929092166001600160801b031990921691909117905560fb546101c780546001600160a01b0319166001600160a01b039092169190911790558015610db5576000805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb384740249890602001610ffa565b61164d61210f565b610e466125f0565b6101c3546001600160a01b0316331480159061167c575060fb546001600160a01b03163314155b1561169c57604051636585b60d60e01b8152336004820152602401610d18565b61112a8282612523565b6116ae61210f565b6001600160a01b0381166116d5576040516303988b8160e61b815260040160405180910390fd5b6101c380546001600160a01b0319166001600160a01b0392909216919091179055565b606060378054610c0f90613445565b60008060006117178460666121b6565b91509150816117285760355461172a565b805b949350505050565b600033816117408286611954565b9050838110156117a05760405162461bcd60e51b815260206004820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f77604482015264207a65726f60d81b6064820152608401610d18565b610cc58286868403611c4e565b600033610ca0818585611de6565b6117c361210f565b6101c880546001600160801b0319166001600160801b0383169081179091556040519081527fe5f6e237b51db81285e9be4ada3d8c02b9d4dc29bb0ecad9074617716176b10d90602001610ffa565b61181a61210f565b6101c8805467ffffffffffffffff60801b1916600160801b426001600160401b039081168202929092179283905560405192041681527f77ed2dbaa6c32cee9eaf143d06075e351fd307e471df24cf51cd121bcb2f597b906020015b60405180910390a1565b61188861210f565b6101c58054821515600160a81b0260ff60a81b199091161790556040517fbeda7dca7bc1b3e80b871f4818129ec73b771581f803d553aeb3484098e5f65a90610ffa90831515815260200190565b6118de61210f565b6001600160a01b038116611905576040516303988b8160e61b815260040160405180910390fd5b6101c580546001600160a01b0319166001600160a01b0383169081179091556040519081527f47ed110db9454ca04a814e7595bcebdf2916548de74d627908580baaaa5d255790602001610ffa565b6001600160a01b03918216600090815260346020908152604080832093909416825291909152205490565b61198761210f565b6101c880546001600160e01b0316600160e01b63ffffffff8416908102919091179091556040519081527fe63080482c7323e063abdb23536cd975108fade91a048bb519ee8bdfb0b4b2fc90602001610ffa565b6119e361210f565b6001600160a01b038116611a0a576040516303988b8160e61b815260040160405180910390fd5b6101c680546001600160a01b0319166001600160a01b0383169081179091556040519081527f729d4615299649ca92158b89dd33a632bc43c938eb1d8ece90f1ce460128008090602001610ffa565b60fb546001600160a01b03163314801590611a8057506101c5546001600160a01b03163314155b15611a9e57604051630374046160e11b815260040160405180910390fd5b60005b81811015611af95760006101cb6000858585818110611ac257611ac2613572565b9050602002016020810190611ad79190613152565b6001600160a01b03168152602081019190915260400160002055600101611aa1565b505050565b6000611b08610db8565b611b125750600090565b6101c8544290611b3f90600160e01b810463ffffffff1690600160801b90046001600160401b031661352d565b6001600160401b0316610e0f919061355f565b611b5a61210f565b6001600160a01b038116611bbf5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610d18565b610db5816122ac565b611bd061210f565b6101c58054831515600160b01b0260ff60b01b199091161790556101c8805463ffffffff8316600160c01b0263ffffffff60c01b199091161790556040517ff0c73da940b4c5c4974ea6a77b1ddce443c0ba2f976c8a528d4ce217622feb5090610ee69084908490911515825263ffffffff16602082015260400190565b6001600160a01b038316611cb05760405162461bcd60e51b8152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f206164646044820152637265737360e01b6064820152608401610d18565b6001600160a01b038216611d115760405162461bcd60e51b815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f206164647265604482015261737360f01b6064820152608401610d18565b6001600160a01b0383811660008181526034602090815260408083209487168084529482529182902085905590518481527f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925910160405180910390a3505050565b6000611d7e8484611954565b905060001981146113315781811015611dd95760405162461bcd60e51b815260206004820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000006044820152606401610d18565b6113318484848403611c4e565b6001600160a01b038316611e4a5760405162461bcd60e51b815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f206164604482015264647265737360d81b6064820152608401610d18565b6001600160a01b038216611eac5760405162461bcd60e51b815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201526265737360e81b6064820152608401610d18565b611eb783838361262d565b6001600160a01b03831660009081526033602052604090205481811015611f2f5760405162461bcd60e51b815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e7420657863656564732062604482015265616c616e636560d01b6064820152608401610d18565b6001600160a01b0380851660008181526033602052604080822086860390559286168082529083902080548601905591517fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef90611f8f9086815260200190565b60405180910390a3611331565b610db561210f565b7f4910fdfa16fed3260ed0e7147f7cc6da11a60208b5b9406d12a635614ffd91435460ff1615611fd757611af9836127b5565b826001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612031575060408051601f3d908101601f1916820190925261202e918101906135aa565b60015b6120945760405162461bcd60e51b815260206004820152602e60248201527f45524331393637557067726164653a206e657720696d706c656d656e7461746960448201526d6f6e206973206e6f74205555505360901b6064820152608401610d18565b60008051602061373083398151915281146121035760405162461bcd60e51b815260206004820152602960248201527f45524331393637557067726164653a20756e737570706f727465642070726f786044820152681a58589b195555525160ba1b6064820152608401610d18565b50611af9838383612851565b60fb546001600160a01b03163314610e465760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610d18565b612171612876565b6097805460ff191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b039091168152602001611876565b600080600084116122025760405162461bcd60e51b815260206004820152601660248201527504552433230536e617073686f743a20696420697320360541b6044820152606401610d18565b61220a6128bf565b8411156122595760405162461bcd60e51b815260206004820152601d60248201527f4552433230536e617073686f743a206e6f6e6578697374656e742069640000006044820152606401610d18565b600061226584866128ca565b8454909150810361227d5760008092509250506122a5565b600184600101828154811061229457612294613572565b906000526020600020015492509250505b9250929050565b60fb80546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b6001600160a01b03821661235e5760405162461bcd60e51b815260206004820152602160248201527f45524332303a206275726e2066726f6d20746865207a65726f206164647265736044820152607360f81b6064820152608401610d18565b61236a8260008361262d565b6001600160a01b038216600090815260336020526040902054818110156123de5760405162461bcd60e51b815260206004820152602260248201527f45524332303a206275726e20616d6f756e7420657863656564732062616c616e604482015261636560f01b6064820152608401610d18565b6001600160a01b03831660008181526033602090815260408083208686039055603580548790039055518581529192917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a3505050565b600054610100900460ff166124655760405162461bcd60e51b8152600401610d18906135c3565b61112a8282612977565b600054610100900460ff16610e465760405162461bcd60e51b8152600401610d18906135c3565b600054610100900460ff166124bd5760405162461bcd60e51b8152600401610d18906135c3565b610e466129b7565b600054610100900460ff166124ec5760405162461bcd60e51b8152600401610d18906135c3565b610e466129ea565b600054610100900460ff1661251b5760405162461bcd60e51b8152600401610d18906135c3565b610e46612a1a565b6001600160a01b0382166125795760405162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f2061646472657373006044820152606401610d18565b6125856000838361262d565b8060356000828254612597919061354c565b90915550506001600160a01b0382166000818152603360209081526040808320805486019055518481527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef910160405180910390a35050565b6125f8612a49565b6097805460ff191660011790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a25861219e3390565b612638838383612a8f565b612643838383612d54565b6101c6546001600160a01b031680158015906126705750806001600160a01b0316846001600160a01b0316145b801561268457506001600160a01b03841615155b801561269857506001600160a01b03831615155b80156126b357506101c7546001600160a01b03858116911614155b80156126ce57506101c7546001600160a01b03848116911614155b15611331576101c554600160a01b900460ff1615612715576001600160a01b03831660009081526101cb60205260408120805484929061270f90849061354c565b90915550505b61271d610db8565b15612782576001600160a01b03831660008181526101c96020908152604091829020805460ff191660019081179091558251938452908301527f6e5e68466043e631629f40501adefa55dc080619353e9256cecbb1cc4997c185910160405180910390a15b6101c554600160b01b900460ff16156113315750506001600160a01b031660009081526101ca6020526040902042905550565b6001600160a01b0381163b6128225760405162461bcd60e51b815260206004820152602d60248201527f455243313936373a206e657720696d706c656d656e746174696f6e206973206e60448201526c1bdd08184818dbdb9d1c9858dd609a1b6064820152608401610d18565b60008051602061373083398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b61285a83612dc5565b6000825111806128675750805b15611af9576113318383612e05565b60975460ff16610e465760405162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b6044820152606401610d18565b6000610e0f60685490565b815460009081036128dd57506000610ca6565b82546000905b8082101561292a5760006128f78383612e2a565b6000878152602090209091508590820154111561291657809150612924565b61292181600161354c565b92505b506128e3565b6000821180156129565750836129538661294560018661355f565b600091825260209091200190565b54145b1561296f5761296660018361355f565b92505050610ca6565b509050610ca6565b600054610100900460ff1661299e5760405162461bcd60e51b8152600401610d18906135c3565b60366129aa8382613655565b506037611af98282613655565b600054610100900460ff166129de5760405162461bcd60e51b8152600401610d18906135c3565b6097805460ff19169055565b600054610100900460ff16612a115760405162461bcd60e51b8152600401610d18906135c3565b610e46336122ac565b600054610100900460ff16612a415760405162461bcd60e51b8152600401610d18906135c3565b600161012d55565b60975460ff1615610e465760405162461bcd60e51b815260206004820152601060248201526f14185d5cd8589b194e881c185d5cd95960821b6044820152606401610d18565b6001600160a01b0383161580612aac57506001600160a01b038216155b15612ab657505050565b6101c7546001600160a01b0384811691161480612ae157506101c7546001600160a01b038381169116145b15612aeb57505050565b6001600160a01b03831660009081526101c9602052604090205460ff1680612b2c57506001600160a01b03821660009081526101c9602052604090205460ff165b15612b5d576040516336aee97b60e21b81526001600160a01b03808516600483015283166024820152604401610d18565b6101c6546101c5546001600160a01b0390911690600160a81b900460ff16158015612b9057506001600160a01b03811615155b15612be457806001600160a01b0316846001600160a01b03161480612bc65750806001600160a01b0316836001600160a01b0316145b15612be4576040516312f1f92360e01b815260040160405180910390fd5b6101c554600160a01b900460ff168015612c0657506001600160a01b03811615155b15612caa57806001600160a01b0316836001600160a01b031603612c3d57604051630ee9c06360e01b815260040160405180910390fd5b806001600160a01b0316846001600160a01b031603612caa576101c8546001600160a01b03841660009081526101cb60205260409020546001600160801b0390911690612c8b90849061354c565b1115612caa57604051633931e3b560e01b815260040160405180910390fd5b6101c554600160b01b900460ff168015612ccc57506001600160a01b03811615155b8015612ce95750806001600160a01b0316846001600160a01b0316145b15611331576001600160a01b03831660009081526101ca60205260409020548015801590612d2f57506101c854600160c01b900463ffffffff16612d2d824261355f565b105b15612d4d5760405163aa9a98df60e01b815260040160405180910390fd5b5050505050565b612d5f838383612e45565b60975460ff1615611af95760405162461bcd60e51b815260206004820152602a60248201527f45524332305061757361626c653a20746f6b656e207472616e736665722077686044820152691a5b19481c185d5cd95960b21b6064820152608401610d18565b612dce816127b5565b6040516001600160a01b038216907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a250565b6060610f79838360405180606001604052806027815260200161375060279139612e8d565b6000612e396002848418613588565b610f799084841661354c565b6001600160a01b038316612e6457612e5c82612f05565b611af9612f38565b6001600160a01b038216612e7b57612e5c83612f05565b612e8483612f05565b611af982612f05565b6060600080856001600160a01b031685604051612eaa9190613713565b600060405180830381855af49150503d8060008114612ee5576040519150601f19603f3d011682016040523d82523d6000602084013e612eea565b606091505b5091509150612efb86838387612f46565b9695505050505050565b6001600160a01b0381166000908152606560209081526040808320603390925290912054610db59190612fbf565b612fbf565b610e466066612f3360355490565b60608315612fb5578251600003612fae576001600160a01b0385163b612fae5760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610d18565b508161172a565b61172a8383613009565b6000612fc96128bf565b905080612fd584613033565b1015611af9578254600180820185556000858152602080822090930193909355938401805494850181558252902090910155565b8151156130195781518083602001fd5b8060405162461bcd60e51b8152600401610d1891906130a1565b8054600090810361304657506000919050565b815482906130569060019061355f565b8154811061306657613066613572565b90600052602060002001549050919050565b919050565b60005b83811015613098578181015183820152602001613080565b50506000910152565b60208152600082518060208401526130c081604085016020870161307d565b601f01601f19169190910160400192915050565b80356001600160a01b038116811461307857600080fd5b600080604083850312156130fe57600080fd5b613107836130d4565b946020939093013593505050565b60008060006060848603121561312a57600080fd5b613133846130d4565b9250613141602085016130d4565b929592945050506040919091013590565b60006020828403121561316457600080fd5b610f79826130d4565b8035801515811461307857600080fd5b6000806040838503121561319057600080fd5b613199836130d4565b91506131a76020840161316d565b90509250929050565b634e487b7160e01b600052604160045260246000fd5b600080604083850312156131d957600080fd5b6131e2836130d4565b915060208301356001600160401b038111156131fd57600080fd5b8301601f8101851361320e57600080fd5b80356001600160401b03811115613227576132276131b0565b604051601f8201601f19908116603f011681016001600160401b0381118282101715613255576132556131b0565b60405281815282820160200187101561326d57600080fd5b816020840160208301376000602083830101528093505050509250929050565b60008083601f84011261329f57600080fd5b5081356001600160401b038111156132b657600080fd5b6020830191508360208260051b85010111156122a557600080fd5b6000806000604084860312156132e657600080fd5b83356001600160401b038111156132fc57600080fd5b6133088682870161328d565b909450925061331b90506020850161316d565b90509250925092565b60006020828403121561333657600080fd5b610f798261316d565b60006020828403121561335157600080fd5b5035919050565b60006020828403121561336a57600080fd5b81356001600160801b0381168114610f7957600080fd5b6000806040838503121561339457600080fd5b61339d836130d4565b91506131a7602084016130d4565b803563ffffffff8116811461307857600080fd5b6000602082840312156133d157600080fd5b610f79826133ab565b600080602083850312156133ed57600080fd5b82356001600160401b0381111561340357600080fd5b61340f8582860161328d565b90969095509350505050565b6000806040838503121561342e57600080fd5b6134378361316d565b91506131a7602084016133ab565b600181811c9082168061345957607f821691505b60208210810361347957634e487b7160e01b600052602260045260246000fd5b50919050565b6020808252602c908201527f46756e6374696f6e206d7573742062652063616c6c6564207468726f7567682060408201526b19195b1959d85d1958d85b1b60a21b606082015260800190565b6020808252602c908201527f46756e6374696f6e206d7573742062652063616c6c6564207468726f7567682060408201526b6163746976652070726f787960a01b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b6001600160401b038181168382160190811115610ca657610ca6613517565b80820180821115610ca657610ca6613517565b81810381811115610ca657610ca6613517565b634e487b7160e01b600052603260045260246000fd5b6000826135a557634e487b7160e01b600052601260045260246000fd5b500490565b6000602082840312156135bc57600080fd5b5051919050565b6020808252602b908201527f496e697469616c697a61626c653a20636f6e7472616374206973206e6f74206960408201526a6e697469616c697a696e6760a81b606082015260800190565b601f821115611af957806000526020600020601f840160051c810160208510156136355750805b601f840160051c820191505b81811015612d4d5760008155600101613641565b81516001600160401b0381111561366e5761366e6131b0565b6136828161367c8454613445565b8461360e565b6020601f8211600181146136b6576000831561369e5750848201515b600019600385901b1c1916600184901b178455612d4d565b600084815260208120601f198516915b828110156136e657878501518255602094850194600190920191016136c6565b50848210156137045786840151600019600387901b60f8161c191681555b50505050600190811b01905550565b6000825161372581846020870161307d565b919091019291505056fe360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc416464726573733a206c6f772d6c6576656c2064656c65676174652063616c6c206661696c6564a2646970667358221220d15010ba20ca3e8a22ddf1ee91b37be9b30c26e783ba73b66d2b64cef3af022164736f6c634300081c0033",FT=function(r){function e(){var n=[].slice.call(arguments);return function(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}(n.length>1?r.call.apply(r,[this].concat(n))||this:r.call(this,E3,hX,n[0])||this)}Rt(e,r);var t=e.prototype;return t.getDeployTransaction=function(n){return r.prototype.getDeployTransaction.call(this,n||{})},t.deploy=function(n){return r.prototype.deploy.call(this,n||{})},t.connect=function(n){return r.prototype.connect.call(this,n)},e.createInterface=function(){return new rp(E3)},e.connect=function(n,i){return new hf(n,E3,i)},e}(y5);FT.bytecode=hX,FT.abi=E3;var xRe=function(r){try{if(!r)throw new Error("No signer available to sign proof message");return Promise.resolve(r.getAddress()).then(function(e){var t=PPe(e,fr().baseNetwork);return Promise.resolve(r.signMessage(t)).then(function(n){return{message:t,signature:n}})})}catch(e){return Promise.reject(e)}},_Pe=function(r,e,t,n){try{var i=fr(),s=i.baseTokenAddress,a=i.baseNetwork,o=MPe(),c=C4(e.toString(),18);return Promise.resolve(n.getAddress()).then(function(u){return Promise.resolve(o.balanceOf(u)).then(function(f){GF("Available: "+T4(f,18)+", Required: "+e.toString()+", Address: "+r+", signerAddress, "+u+" ");var l=o.interface.encodeFunctionData("transfer",[r,c]),d=we(on(t)).substring(2),h={from:u,to:s,data:l+d,chainId:a==="base"?"0x2105":"0x14a34"};return GF("Sending transaction",JSON.stringify(h,null,2)),Promise.resolve(n.sendTransaction(h))})})}catch(u){return Promise.reject(u)}},GF=Mt("tonomy-sdk:services:ethereum");function SPe(){var r=fr();return X5()?new os(r.baseRpcUrl,r.baseNetwork):new os(r.baseRpcUrl,void 0,{staticNetwork:!0})}function MPe(r){var e,t=fr().baseTokenAddress;return e=SPe(),FT.connect(t,e)}function PPe(r,e){return"I am the owner of this address: "+r+" on "+e+`
Nonce: `+lp(8)+`
Timestamp: `+new Date().toISOString()}function TPe(r){var e=r.split(`
`);if(e.length<3)throw new Error("Invalid proof message format");try{var t=e[0].match(/^I am the owner of this address: (0x[a-fA-F0-9]{40}) on (.+)$/),n=e[1].match(/^Nonce: (.+)$/),i=e[2].match(/^Timestamp: (.+)$/);if(!t||!n||!i)throw new Error("Invalid proof message format");return{address:t[1],network:t[2],nonce:n[1],timestamp:i[1]}}catch(s){throw new Error("Failed to parse proof message: "+s.message)}}Mt("tonomy-sdk:util:ssi:veramo");var CPe=function(){function r(t){this._storage={},this.scope=void 0,this.scope=t,this._storage={}}var e=r.prototype;return e.retrieve=function(t){try{var n=this;if(t in n._storage)return Promise.resolve(n._storage[t]);if(!localStorage)return Promise.resolve(void 0);var i=localStorage.getItem(t);if(i){var s=JSON.parse(i);return n._storage[t]=s,Promise.resolve(s)}return Promise.resolve()}catch(a){return Promise.reject(a)}},e.store=function(t,n){try{return localStorage&&localStorage.setItem(t,JSON.stringify(n)),this._storage[t]=n,Promise.resolve()}catch(i){return Promise.reject(i)}},e.clear=function(){try{if(this._storage={},localStorage)for(var t=0;t<localStorage.length;t++){var n=localStorage.key(t);typeof n=="string"&&n.startsWith(this.scope)&&localStorage.removeItem(n)}return Promise.resolve()}catch(i){return Promise.reject(i)}},r}();function QF(r){return new CPe(r)}function ZF(r,e){try{var t=r()}catch(n){return e(n)}return t&&t.then?t.then(void 0,e):t}var IPe=function(r,e){var t=e===void 0?NPe:e,n=t.verifyChainId,i=n===void 0||n,s=t.verifyUsername,a=s===void 0||s,o=t.verifyOrigin,c=o===void 0||o;try{var u;if(typeof r=="string")u=new Gm(r);else if(r instanceof Gm)u=r;else{if(!(r instanceof nc))throw Error("Invalid VC type, expected string or VerifiableCredential");u=r.getVc()}var f=u.getId(),l=u.getIssuer(),d=u.getCredentialSubject();return Promise.resolve(R9(l)).then(function(h){var y=N9(l).method;return y!=="antelope"&&Ze("Invalid DID method: "+y,Ce.InvalidData),Promise.resolve(Promise.all([u.verify(),iX(l,i),ePe(h,d==null?void 0:d.username,a),fPe(f||"",l,c)])).then(function(p){var g=p[3];return{account:h,chainId:p[1],did:l,username:p[2],origin:g==null?void 0:g.origin,app:g==null?void 0:g.app}})})}catch(h){return Promise.reject(h)}},JF=Mt("tonomy-sdk:externalUser"),RPe=function(){function r(t,n){this.keyManager=void 0,this.storage=void 0,this.communication=void 0,this.storageFactory=void 0,this.did=void 0,this.keyManager=t,this.storageFactory=n,this.storage=tY(gN+"external.user.",n),this.communication=new ww(!1)}var e=r.prototype;return e.logout=function(){try{var t=this;return t.storage.clear(),t.keyManager.removeKey({level:rt.BROWSER_LOCAL_STORAGE}),t.keyManager.removeKey({level:rt.BROWSER_SESSION_STORAGE}),Promise.resolve()}catch(n){return Promise.reject(n)}},r.getUser=function(t){t===void 0&&(t={});try{var n=t,i=n.keyManager,s=i===void 0?new Yb:i,a=n.storageFactory,o=n.autoLogout,c=o===void 0||o,u=new r(s,a===void 0?QF:a);return Promise.resolve(ZF(function(){return Promise.resolve(u.getAccountName()).then(function(f){if(!f)throw Ze("accountName not found",Ce.AccountNotFound);return Promise.resolve(LT(f,{keyManager:s})).then(function(l){return Promise.resolve(u.getAppPermission()).then(function(d){return l.toString()!==d.toString()&&Ze("App permission has changed",Ce.InvalidData),Promise.resolve(u.getUsername()).then(function(h){var y=function(){if(h)return Promise.resolve(Us().getPerson(h)).then(function(p){f.toString()!==p.accountName.toString()&&Ze("Username has changed",Ce.InvalidData)})}();return y&&y.then?y.then(function(){return u}):u})})})})},function(f){function l(){throw Pc(f,[Ce.KeyNotFound,Ce.InvalidData])&&Ze("User Not loggedIn",Ce.UserNotLoggedIn),f}var d=function(){if(c)return Promise.resolve(u.logout()).then(function(){})}();return d&&d.then?d.then(l):l()}))}catch(f){return Promise.reject(f)}},e.getDid=function(){try{var t=this,n=t.did,i=function(){if(!n)return Promise.resolve(t.getAccountName()).then(function(s){return Promise.resolve(s.toString()).then(function(a){return Promise.resolve(t.getAppPermission()).then(function(o){return Promise.resolve(nX(a,o.toString())).then(function(c){return t.did=n=c,Promise.resolve(t.did).then(function(){})})})})})}();return Promise.resolve(i&&i.then?i.then(function(){return n}):n)}catch(s){return Promise.reject(s)}},e.getWalletDid=function(){try{var t=this;return Promise.resolve(t.getDid()).then(function(n){return Promise.resolve(t.getAppPermission()).then(function(i){return n.replace("#"+i,"#local")})})}catch(n){return Promise.reject(n)}},e.setAccountName=function(t){try{return this.storage.accountName=t,Promise.resolve(this.storage.accountName).then(function(){})}catch(n){return Promise.reject(n)}},e.setUsername=function(t){try{return this.storage.username=t,Promise.resolve(this.storage.username).then(function(){})}catch(n){return Promise.reject(n)}},e.setAppPermission=function(t){try{return this.storage.appPermission=t,Promise.resolve(this.storage.appPermission).then(function(){})}catch(n){return Promise.reject(n)}},e.getUsername=function(){try{return Promise.resolve(this.storage.username).then(function(t){if(t)if(t){if(t instanceof $i)return t;if(typeof t=="string")return new $i(t);Ze("Username not in expected format",Ce.InvalidData)}else Ze("Username not set",Ce.InvalidData)})}catch(t){return Promise.reject(t)}},e.getAccountName=function(){try{return Promise.resolve(this.storage.accountName)}catch(t){return Promise.reject(t)}},e.getAppPermission=function(){try{return Promise.resolve(this.storage.appPermission)}catch(t){return Promise.reject(t)}},r.loginWithTonomy=function(t,n){try{n===void 0&&(n=new Yb);var i=t.redirect,s=i===void 0||i,a=t.callbackPath,o=t.dataRequest;return Promise.resolve(APe(n)).then(function(c){return Promise.resolve(n.getKey({level:rt.BROWSER_LOCAL_STORAGE})).then(function(u){var f=[{login:{randomString:lp(32),origin:window.location.origin,publicKey:u,callbackPath:a}}];return o&&f.push({data:o}),Promise.resolve(zN.signRequest({requests:f},c)).then(function(l){var d=new bw(l),h=new k9(d);if(!s)return Promise.resolve(BT.signMessageWithoutRecipient({},c)).then(function(y){return{requests:h,loginToCommunication:y}});window.location.href=fr().ssoWebsiteOrigin+"/login?payload="+h.toString()})})})}catch(c){return Promise.reject(c)}},e.getIssuer=function(){try{var t=this;return Promise.resolve(t.getDid()).then(function(n){return{did:n,signer:NN(t.keyManager,rt.BROWSER_LOCAL_STORAGE).sign,alg:"ES256K-R"}})}catch(n){return Promise.reject(n)}},r.verifyLoginResponse=function(t){t===void 0&&(t={});try{var n=t,i=n.external,s=i===void 0||i,a=n.checkKeys,o=a===void 0||a,c=n.keyManager,u=c===void 0?new Yb:c,f=n.storageFactory,l=f===void 0?QF:f,d=n.responses,h=d===void 0?vw.fromUrl():d;return JF("verifyLoginResponse()",{external:s,checkKeys:o}),Promise.resolve(function(){if(h.isSuccess())return Promise.resolve(h.verify()).then(function(){var y=s?h.external:h.sso;if(!y)throw Error("No request found in dual wallet responses for "+(s?"external":"sso")+" app");var p=new r(u,l),g=y.getAccountName(),m={user:p},v=y.getDataSharingResponse();return Promise.resolve(IPe(y.vc,{verifyOrigin:!1,verifyUsername:!(v==null||!v.data.username)})).then(function(){function b(){return Promise.resolve(p.setAccountName(g)).then(function(){function C(){var x=v==null?void 0:v.data.username,I=function(){if(x)return Promise.resolve(p.setUsername(x)).then(function(){})}();return I&&I.then?I.then(function(){return m}):m}var N=function(){if(v!=null&&v.data.kyc){var x=v.data.kyc.getIssuer();return Promise.resolve(sX(x)).then(function(){m.data={kyc:{value:v.data.kyc.getPayload(),verifiableCredential:v.data.kyc}}})}}();return N&&N.then?N.then(C):C()})}var _=function(){if(o)return Promise.resolve(LT(g,{keyManager:u})).then(function(C){return Promise.resolve(p.setAppPermission(C)).then(function(){})})}();return _&&_.then?_.then(b):b()})});if(!h.error)throw Error("No error found in dual wallet responses");Ze(h.error.reason,h.error.code)}())}catch(y){return Promise.reject(y)}},e.signVc=function(t,n,i,s){s===void 0&&(s={});try{return Promise.resolve(this.getIssuer()).then(function(a){return Promise.resolve(Gm.sign(t,n,i,a,s))})}catch(a){return Promise.reject(a)}},e.createClientAuthorization=function(t){try{var n,i=((n=window)==null||(n=n.location)==null?void 0:n.origin)||"undefined",s=lp(8);return Promise.resolve(this.signVc(i+"/vc/auth/"+s,"ClientAuthorization",t)).then(function(a){return a.toString()})}catch(a){return Promise.reject(a)}},e.getTransactionSigner=function(){return ay(this.keyManager,rt.BROWSER_LOCAL_STORAGE)},e.signTransaction=function(t,n,i){try{var s=this;return Promise.resolve(s.getAccountName()).then(function(a){return Promise.resolve(s.getAppPermission()).then(function(o){function c(){return Promise.resolve(s.checkLinkAuthRequirements(a,o,u,n)).then(function(){var l={account:u,name:n,authorization:[{actor:a.toString(),permission:o.toString()}],data:i},d=s.getTransactionSigner();return JF("signTransaction() called by "+a.toString()+" with permission "+o.toString()+" to contract "+u.toString(),JSON.stringify(l,null,2)),Promise.resolve(Vt(l,d))})}var u,f=function(){if(t instanceof $i)return Promise.resolve(Us().getApp(t)).then(function(l){u=l.accountName});u=qe.from(t)}();return f&&f.then?f.then(c):c()})})}catch(a){return Promise.reject(a)}},e.checkLinkAuthRequirements=function(t,n,i,s){try{var a=this;return Promise.resolve(I9(t)).then(function(o){var c,u=o.permissions.find(function(d){return d.perm_name.equals(n)}),f=u==null||(c=u.linked_actions)==null?void 0:c.find(function(d){return d.account.equals(i)&&(!d.action||d.action.equals(s))}),l=function(){if(!f){var d=xw.signMessage,h={contract:qe.from(i),action:qe.from("")};return Promise.resolve(a.getIssuer()).then(function(y){return Promise.resolve(a.getWalletDid()).then(function(p){return Promise.resolve(d.call(xw,h,y,p)).then(function(g){var m,v=new Promise(function(b,_){m=a.communication.subscribeMessage(function(C){try{var N=ZF(function(){var x=C.getSender();return Promise.resolve(a.getWalletDid()).then(function(I){x!==I&&Ze("LinkAuthRequestResponse sender is not wallet",Ce.SenderNotAuthorized);var $=new w2(C);g.getVc().getId()===$.getPayload().requestId&&$.getPayload().success?b():Ze("Couldn't link permission",Ce.LinkAuthFailed)})},function(x){_(x)});return Promise.resolve(N&&N.then?N.then(function(){}):void 0)}catch(x){return Promise.reject(x)}},w2.getType()),setTimeout(function(){_(bN("LinkAuthRequestResponse timeout",Ce.MessageSendError))},5e3)});return Promise.resolve(a.sendMessage(g)).then(function(){return Promise.resolve(v).then(function(){a.communication.unsubscribeMessage(m)})})})})})}}();if(l&&l.then)return l.then(function(){})})}catch(o){return Promise.reject(o)}},e.sendMessage=function(t){try{var n=this;return Promise.resolve(n.loginToCommunication()).then(function(){return Promise.resolve(n.communication.sendMessage(t)).then(function(i){i||Ze("Failed to send message",Ce.MessageSendError)})})}catch(i){return Promise.reject(i)}},e.loginToCommunication=function(){try{var t=this,n=function(){if(!t.communication.isLoggedIn())return Promise.resolve(t.getIssuer()).then(function(i){return Promise.resolve(BT.signMessageWithoutRecipient({},i)).then(function(s){return Promise.resolve(t.communication.login(s)).then(function(){})})})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(i){return Promise.reject(i)}},r}(),NPe={verifyChainId:!0,verifyUsername:!0,verifyOrigin:!0},cb=Mt("tonomy-sdk:AppsExternalUser"),wRe=function(r){function e(n){var i;return(i=r.call(this,n.keyManager,n.storageFactory)||this).did=n.did,i}Rt(e,r);var t=e.prototype;return t.sendSwapMessage=function(n){try{var i=this;return Promise.resolve(i.loginToCommunication()).then(function(){return Promise.resolve(i.communication.sendSwapMessage(n)).then(function(s){s||Ze("Failed to send message",Ce.MessageSendError)})})}catch(s){return Promise.reject(s)}},t.swapTonomyToBaseToken=function(n,i,s){try{var a=this,o=TPe(i.message).address,c={amount:n,baseAddress:o,proof:i,_testOnly_tonomyAppsWebsiteUsername:s};return Promise.resolve(a.getIssuer()).then(function(u){return Promise.resolve(cX.signMessage(c,u,o)).then(function(f){return Promise.resolve(a.sendSwapMessage(f))})})}catch(u){return Promise.reject(u)}},t.swapBaseToTonomyToken=function(n,i,s){try{var a=this;return Promise.resolve(a.getIssuer()).then(function(o){var c=R9(o.did);return cb("subscribeSwapBaseToTonomy() did: "+o.did+" "),Promise.resolve(a.loginToCommunication()).then(function(){var u,f=OPe(c.toString(),s),l=YF(f).swapId,d=new Promise(function(y,p){var g=setTimeout(function(){u!==void 0&&a.communication.unsubscribeSwapBaseToTonomy(u),p(new Error("Swap subscriber timed out after 2 minutes"))},12e4);cb("subscribeSwapBaseToTonomy() "+o.did+" - subscribing to swap confirmation   "),u=a.communication.subscribeSwapBaseToTonomy(function(m){try{try{cb("subscribeSwapBaseToTonomy() "+o.did+" event",m),YF(m).swapId!==l&&p(new Error("Swap ID mismatch in subscriber")),y(!0)}catch(v){p(v)}finally{clearTimeout(g),u!==void 0&&a.communication.unsubscribeSwapBaseToTonomy(u)}return Promise.resolve()}catch(v){return Promise.reject(v)}})}),h=fr().baseMintBurnAddress;return cb("swapBaseToTonomyToken() "+o.did+" - sending transaction"),Promise.resolve(_Pe(h,n,f,i)).then(function(){return cb("subscribeSwapBaseToTonomy() "+o.did+" - waiting for swap confirmation"),Promise.resolve(d)})})})}catch(o){return Promise.reject(o)}},e}(RPe);function OPe(r,e){var t=lp(8);if(fr().environment==="test")return"swap:"+t+":"+r+(e?":"+e:"");if(e)throw Error("_testOnly_tonomyAppsWebsiteUsername should not be provided in non-test environment");return"swap:"+t+":"+r}function YF(r){var e=r.split(":"),t=fr().environment==="development"||fr().environment==="test";if(!t&&e.length!==3||e[0]!=="swap")throw new Error("Invalid swap memo format: "+r+" on environment "+fr().environment);return{swapId:e[1],tonomyAccount:e[2],_testOnly_tonomyAppsWebsiteUsername:t?e[3]:void 0}}Mt.enable("tonomy-console*");FMe({...Ah.config});jMe(window.fetch.bind(window));const Pv=A3.createRoot(document.getElementById("root")),Tv=window.location.host.split(".")[1]?window.location.host.split(".")[0]:null;try{if(parseInt(window.location.port)===3001||Tv==="demo")a8(()=>import("./module-index-DwKbTDe5.js"),__vite__mapDeps([0,1,2,3,4,5])).then(r=>{const e=r.default;e(Pv)});else if(parseInt(window.location.port)===3e3||Tv==="accounts")a8(()=>import("./module-index-gtq7xTFm.js"),__vite__mapDeps([6,1,2,7,4,8,9,10])).then(r=>{const e=r.default;e(Pv)});else if(parseInt(window.location.port)===3002||Tv==="console")a8(()=>import("./module-index-DoZK8gwD.js"),__vite__mapDeps([11,1,2,8,9,3,12])).then(r=>{const e=r.default;e(Pv)});else if(parseInt(window.location.port)===3003||Tv==="apps")a8(()=>import("./module-index-CcsjASBJ.js").then(r=>r.eV),__vite__mapDeps([13,1,2,4,7,3,9,14])).then(r=>{const e=r.default;e(Pv)});else throw new Error("Domain not supported");Ah.isProduction()||ple()}catch(r){console.error("error",r)}export{bw as $,ww as A,bRe as B,mRe as C,Mt as D,rt as E,gRe as F,WN as G,k9 as H,vw as I,ET as J,yRe as K,mPe as L,vRe as M,pRe as N,zw as O,lxe as P,BT as Q,XX as R,Pc as S,x5 as T,RPe as U,cu as V,zN as W,yPe as X,W0 as Y,Yb as Z,a8 as _,W_ as a,fde as a0,$Pe as a1,aI as a2,sH as a3,sCe as a4,aCe as a5,hx as a6,sI as a7,gp as a8,zoe as a9,wm as aa,cCe as ab,uCe as ac,fCe as ad,lCe as ae,ece as af,ofe as ag,afe as ah,zce as ai,eRe as aj,wRe as ak,vp as al,ZY as am,Vx as an,xRe as ao,MPe as ap,oI as b,Rc as c,so as d,$7e as e,Ah as f,nj as g,lH as h,Ht as i,$i as j,of as k,fr as l,lp as m,Vfe as n,DPe as o,LH as p,BPe as q,HT as r,cI as s,ire as t,BC as u,C_e as v,KY as w,IU as x,Ce as y,hRe as z};
